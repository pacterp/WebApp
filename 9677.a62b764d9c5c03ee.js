"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[9677],{2058:($,x,d)=>{d.r(x),d.d(x,{ChequeDiscPostedDocumentViewModel:()=>H});var o=d(32040),r=d(43767),f=d(54581),A=d(98580),R=d(67557),T=d(84151),P=d(82503),b=d(23458),k=d(7321),c=d(27730),G=d(11592),I=d(31884);class M{get CustomFieldsVisibility(){return this._Controls.length>0}get Controls(){return this._Controls}constructor(){this._Controls=[],this.CommonControls=[],this.ARAPControls=[],this.PosControls=[],this.LinkingControls=[],this.GroupCheckboxLinkingControls=[],this.Data=[],this._DocumentID=0,this._IsEdit=0,this.lstGroupBox=new Array}LoadScreen(t,s){Logger.InfoLog("PreferenceControlGenerator:: Inside LoadScreen"),this.Data=null,this.OnLoad(t,s)}LoadScreen_4(t,s,e,n){Logger.InfoLog("PreferenceControlGenerator:: Inside LoadScreen"),this._DocumentID=e,this._IsEdit=n,this.Data=null,this.OnLoad(t,s)}OnLoad(t,s){try{if(null==this.Data&&(this.oParent=t,this.Data=this._DocumentID>0?this.GetScreenInfo_2(s,this._DocumentID):this.GetScreenInfo(s),null!=this.Data&&this.Data.Tables.length>0&&!this.Data.Columns[0].Contains("ErrorMessage")&&(this.CheckLicense(this.Data.Tables[0]),this.CheckLicense(this.Data.Tables[1]),this.CheckLicense(this.Data.Tables[4]),null!=this.Data&&this.Data.Tables[0].length>0))){this.Data.Tables[0].filter(n=>"BodyFreezeColumn"==n.DBText),this.PosControls.Clear(),this.CommonControls.Clear(),this.ARAPControls.Clear(),this._Controls.Clear(),this.LinkingControls.Clear(),this.lstGroupBox.Clear();for(let n=0;n<this.Data.Tables[0].length;n++)this.SetProperties_Static(this.Data.Tables[0][n],this.Data.Tables[0][n].PrefValueType.toString())}}catch(e){Logger.ErrorLog("PreferenceControlGenerator:: LoadScreen : "+e.stack)}}CheckLicense(t){let s;null!=t.DBText?(s=t.filter(e=>"DuplicateProduct_Ratewise"==e.DBText),s.forEach(e=>{t.Remove(e)}),o.d.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"FALSE"==o.d.SessionManager.Preferences.IsControlAccounts.toUpperCase()&&(s=t.filter(e=>"ControlAccountFilterField"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("ChequeBookManagement")&&"FALSE"==o.d.SessionManager.LicenseSettings.ChequeBookManagement.toUpperCase()&&(s=t.filter(e=>"AutoChequeNo"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("CrossDimension")&&"FALSE"==o.d.SessionManager.LicenseSettings.CrossDimension.toUpperCase()&&(s=t.filter(e=>"UseasCrossDimension"==e.DBText||"CrossDimDocument"==e.DBText||"CrossDimField"),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("LCTR")&&"FALSE"==o.d.SessionManager.LicenseSettings.LCTR.toUpperCase()&&(s=t.filter(e=>"UseAsLC"==e.DBText||"EnableLC"==e.DBText||"LcCloseDocument"),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("QC")&&"FALSE"==o.d.SessionManager.LicenseSettings.QC.toUpperCase()&&(s=t.filter(e=>"EnableTestcase"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Kit")&&"FALSE"==o.d.SessionManager.LicenseSettings.Kit.toUpperCase()&&(s=t.filter(e=>"dynamicsetProductwiselinking"==e.DBText||"SplitKit"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Bins")&&"FALSE"==o.d.SessionManager.LicenseSettings.Bins.toUpperCase()&&(s=t.filter(e=>"AutoAdjustBinLinking"==e.DBText||"AutoAdjustBins"==e.DBText||"CopyBins"==e.DBText||"DuplicateProductClubBins"==e.DBText||"OptionalBins"==e.DBText||"ShowBins"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Packing")&&"FALSE"==o.d.SessionManager.LicenseSettings.Packing.toUpperCase()&&(s=t.filter(e=>"Checkpackedqty"==e.DBText||"DefaultPack"==e.DBText||"EnablePacking"==e.DBText||"LineWisePacking"==e.DBText||"Linkallprodspacked"==e.DBText||"PackLabel"==e.DBText||"PackMandScan"==e.DBText||"PackWiseProds"==e.DBText||"ScanPack"==e.DBText||"ShowPackStat"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Substitutes")&&"FALSE"==o.d.SessionManager.LicenseSettings.Substitutes.toUpperCase()&&(s=t.filter(e=>"EnableSubtitutes"==e.DBText||"EnableSubtitutesQty"==e.DBText||"ShowSubQOH"==e.DBText||"SubonProdChange"==e.DBText||"SubstituteOnQty"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Barcode")&&"FALSE"==o.d.SessionManager.LicenseSettings.Barcode.toUpperCase()&&(s=t.filter(e=>"BarcodeField"==e.DBText||"UsingBarCodes"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Hold_Release")&&"FALSE"==o.d.SessionManager.LicenseSettings.Hold_Release.toUpperCase()&&(s=t.filter(e=>"Enable Hold"==e.DBText||"enebleSaveonhold"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Import")&&"FALSE"==o.d.SessionManager.LicenseSettings.Import.toUpperCase()&&(s=t.filter(e=>"ImpPrf"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("SKU")&&"FALSE"==o.d.SessionManager.LicenseSettings.SKU.toUpperCase()&&(s=t.filter(e=>"OnScan"==e.DBText||"DumpStockCodes"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("PaymentTerms")&&"FALSE"==o.d.SessionManager.LicenseSettings.PaymentTerms.toUpperCase()&&(s=t.filter(e=>"accountwisePaymentTerms"==e.DBText||"CopyPaymentTerms"==e.DBText||"Enable Payment Terms"==e.DBText||"Paytermids"==e.DBText||"ShowPercentPayTerms"==e.DBText||"Paymenttermsbasedon"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("Schemes")&&"FALSE"==o.d.SessionManager.LicenseSettings.Schemes.toUpperCase()&&(s=t.filter(e=>"EnableSchemes"==e.DBText||"SchemesNumericFields"==e.DBText||"SchemesValueField"==e.DBText||"DonotUpdateSchemeQty"==e.DBText||"GetSchemeQty"==e.DBText||"PriceScheme"==e.DBText||"ValidateSchemeBeforeSave"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("TemporaryProduct")&&"FALSE"==o.d.SessionManager.LicenseSettings.TemporaryProduct.toUpperCase()&&(s=t.filter(e=>"onlyTempProduct"==e.DBText||"ExcludeTemproducts"==e.DBText||"IgnoreTempProduct"==e.DBText||"MandatorytempPartinfo"==e.DBText||"TempInfo"==e.DBText),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("ToleranceManagement")&&"FALSE"==o.d.SessionManager.LicenseSettings.ToleranceManagement.toUpperCase()&&(s=t.filter(e=>"Enabletolerance"==e.DBText),s.forEach(e=>{t.Remove(e)}))):null!=t.DocumentType&&(o.d.SessionManager.LicenseSettings.ContainsKey("DeliveryNoteReturn")&&"FALSE"==o.d.SessionManager.LicenseSettings.DeliveryNoteReturn.toUpperCase()&&(s=t.filter(e=>6==e.DocumentType),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("PhysicalStockTaking")&&"FALSE"==o.d.SessionManager.LicenseSettings.PhysicalStockTaking.toUpperCase()&&(s=t.filter(e=>31==e.DocumentType),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("PhysicalStockPosting")&&"FALSE"==o.d.SessionManager.LicenseSettings.PhysicalStockPosting.toUpperCase()&&(s=t.filter(e=>32==e.DocumentType),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("PurchaseRequisition")&&"FALSE"==o.d.SessionManager.LicenseSettings.PurchaseRequisition.toUpperCase()&&(s=t.filter(e=>25==e.DocumentType),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("PurchaseEnquiry")&&"FALSE"==o.d.SessionManager.LicenseSettings.PurchaseEnquiry.toUpperCase()&&(s=t.filter(e=>26==e.DocumentType),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("PurchaseQuotation")&&"FALSE"==o.d.SessionManager.LicenseSettings.PurchaseQuotation.toUpperCase()&&(s=t.filter(e=>27==e.DocumentType),s.forEach(e=>{t.Remove(e)})),o.d.SessionManager.LicenseSettings.ContainsKey("GoodsReceivedReturn")&&"FALSE"==o.d.SessionManager.LicenseSettings.GoodsReceivedReturn.toUpperCase()&&(s=t.filter(e=>10==e.DocumentType),s.forEach(e=>{t.Remove(e)})))}SetProperties_Static(t,s){let e;switch(s){case"CheckBox":if("FillLocalRef"==t.DBText.toString()||"EnableScanning"==t.DBText.toString()||"LockLinkedRows"==t.DBText.toString()||"VendorBasedBillNo"==t.DBText.toString()||"UseQtyAdjustment"==t.DBText.toString()||"DistributeCost"==t.DBText.toString()||(this.oCheckBox=G.c.PactCheckBoxData_3(t.DBText.toString(),43,t.Group.toString(),0)),this.oCheckBox.Label=t.Text.toString(),e=this.oCheckBox,this.oCheckBox.Row=t.PrefRowOrder.toString(),this.oCheckBox.DefaultValue=t.PrefDefalutValue.toString(),this.oCheckBox.Column=t.PrefColOrder.toString(),this.oCheckBox.IsChecked=!(r.J0.IsEmpty(t.Value)||"TRUE"!=t.Value.toString().toUpperCase()&&"1"!=t.Value.toString())&&(0,f.yG0)(t.Value.toString()),"OnlyExpired"==this.oCheckBox.DBColumnName||"StaticLinkingColumns"==this.oCheckBox.DBColumnName)return;("ProductName"==e.DBColumnName||"AccountName"==e.DBColumnName)&&(this.IsFrozenCheckBox=this.oCheckBox),"Common"==t.Group.toString()?this.CommonControls.push(this.oCheckBox):"ARAP"==t.Group.toString()?this.ARAPControls.push(this.oCheckBox):"General"==t.Group.toString()?this.Controls.push(this.oCheckBox):"POS"==t.Group.toString()?this.PosControls.push(this.oCheckBox):"Linking"==t.Group.toString()&&this.LinkingControls.push(this.oCheckBox),t.Text.toString();break;case"Textbox":case"TextBox":this.oText=T.Dw.PactTextBoxData_2("",43),this.oText.Label=t.Text.toString(),this.oText.DBColumnName=t.DBText.toString(),e=this.oText,this.oText.Row=t.PrefRowOrder.toString(),this.oText.Column=t.PrefColOrder.toString(),this.oText.GroupName=t.Group.toString(),this.SetProperty_DefaultValue(e),this.oText.Text=t.Value.toString(),"Common"==t.Group.toString()?(this.CommonControls.push(this.oText),this.oText.RowSpan=2):"POS"==t.Group.toString()?this.PosControls.push(this.oText):"General"==t.Group.toString()?this.Controls.push(this.oText):"Linking"==t.Group.toString()&&this.LinkingControls.push(this.oText);break;case"CustomTextBox":case"BarcodeFormat":break;case"RadioButton":this.oRadioButton=new I.u(t.DBText.toString(),43,t.Group.toString()),this.oRadioButton.Label=t.Text.toString(),e=this.oRadioButton,this.oRadioButton.Row=t.PrefRowOrder.toString(),this.oRadioButton.DefaultValue=t.PrefDefalutValue.toString(),this.oRadioButton.Column=t.PrefColOrder.toString(),this.oRadioButton.IsChecked=(0,f.yG0)(t.Value.toString()),"Common"==t.Group.toString()?this.CommonControls.push(this.oRadioButton):"POS"==t.Group.toString()?this.PosControls.push(this.oText):"General"==t.Group.toString()?this.Controls.push(this.oRadioButton):"Linking"==t.Group.toString()&&this.LinkingControls.push(this.oRadioButton);break;case"LISTBOX":let D,h=b.y$.PactListBoxData_2(t.DBText.toString(),43,t.Group.toString());h.Label=t.Text.toString(),h.Row=t.PrefRowOrder.toString(),h.DefaultValue=t.PrefDefalutValue.toString(),r.J0.IsEmpty(t.Value)||(D=r.J0.IntTryParse(t.Value.toString()),D>0&&(h.SelectedValue=parseInt(t.Value.toString()))),h.Column=t.PrefColOrder.toString(),"BilllandingReport"==t.DBText.toString()&&(h.CCID=200,h.TypeID=1),"Common"==t.Group.toString()?this.CommonControls.push(h):"General"==t.Group.toString()?this.Controls.push(h):"Linking"==t.Group.toString()&&this.LinkingControls.push(h);break;case"DATE":this.oDate=P.Lc.PactDatePickerData_3(t.DBText.toString(),43,t.Group.toString()),this.oDate.Label=t.Text.toString(),this.oDate.Row=t.PrefRowOrder.toString(),this.oDate.DefaultValue=t.PrefDefalutValue.toString(),!r.J0.IsEmpty(t.Value)&&"FALSE"!=t.Value.toString().toUpperCase()&&"TRUE"!=t.Value.toString().toUpperCase()&&(this.oDate.Date=r.J0.ParseDate(t.Value.toString())),this.oDate.Column=t.PrefColOrder.toString(),"Common"==t.Group.toString()?this.CommonControls.push(this.oDate):"General"==t.Group.toString()?this.Controls.push(this.oDate):"Linking"==t.Group.toString()&&this.LinkingControls.push(this.oDate);break;case"GroupCheckBox":if(this.lstGroupBox.Contains("GroupCheckBox"))break;this.lstGroupBox.push("GroupCheckBox");break;case"ComboBox":if(this.oCombo=c.y$.PactComboBoxData2(t.DBText.toString(),43,t.Group.toString()),this.oCombo.Label=t.Text.toString(),this.oCombo.Row=t.PrefRowOrder.toString(),this.oCombo.DefaultValue=t.PrefDefalutValue.toString(),"BillwisePosting"==t.DBText.toString())this.oCombo.Items.push(c._p.ComboBoxItems_2("","")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Line-wise","1")),this.oCombo.Items.push(c._p.ComboBoxItems_2("PaymentTerm-wise","2"));else if("TabsPopup"==t.DBText.toString())this.oCombo.Items.push(c._p.ComboBoxItems_2("","")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Pop up","1")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Collapsable","2"));else if("DefaultRightView"==t.DBText.toString())this.oCombo.Items.push(c._p.ComboBoxItems_2("","")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Import","Import")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Sort","Sort")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Notes","Notes")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Attachments","Attachments")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Search","Search")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Report","Report")),this.oCombo.Items.push(c._p.ComboBoxItems_2("Documents","Documents"));else if("DocumentLinkDimension"==t.DBText.toString()||"DimensionWise"==t.DBText.toString()||"defprod"==t.DBText.toString()||"PackWarehouseDim"==t.DBText.toString()||"DimWiseAttachments"==t.DBText.toString()||"DimensionStatusOnRenew"==t.DBText.toString()||"CurrencyDim"==t.DBText.toString()||"ToDimensionWise"==t.DBText.toString())this.Data.Tables.length>1&&this.Data.Tables[1].Columns.Contains("FEATUREID")&&this.Data.Tables[1].Columns.Contains("NAME")?this.FillDimensions(this.oCombo,this.Data.Tables[1]):this.Data.Tables.length>10&&this.Data.Tables[10].Columns.Contains("FEATUREID")&&this.Data.Tables[10].Columns.Contains("NAME")&&this.FillDimensions(this.oCombo,this.Data.Tables[10]);else if(this.Data.Tables.length>3&&("DueDateonBillDate"==t.DBText.toString()||"Paymenttermsbasedon"==t.DBText.toString())&&this.Data.Columns[3].Contains("UserColumnType")){let u=this.Data.Tables[3].filter(l=>3!=l.sectionid&&("DATE"==l.UserColumnType||"DATE"==l.ColumnDataType));for(let l=0;l<u.length;l++)this.oCombo.Items.push(c._p.ComboBoxItems_2(u[l].ResourceData.toString(),u[l].SysColumnName.toString()))}else if(this.Data.Tables.length>3&&("BodyFreezeColumn"==t.DBText.toString()||"Sortbasedon"==t.DBText.toString())&&this.Data.Columns[3].Contains("sectionid")){let u=this.Data.Tables[3].filter(l=>3==l.sectionid);this.oCombo.Items.push(c._p.ComboBoxItems_2("","0"));for(let l=0;l<u.length;l++)this.oCombo.Items.push(c._p.ComboBoxItems_2(u[l].ResourceData.toString(),u[l].CostCenterColID.toString()))}""!=t.Value.toString()&&"FALSE"!=t.Value.toString().toUpperCase()&&"TRUE"!=t.Value.toString().toUpperCase()&&(this.oCombo.SelectedValue=t.Value.toString()),this.oCombo.Column=t.PrefColOrder.toString(),"Common"==t.Group.toString()?this.CommonControls.push(this.oCombo):"POS"==t.Group.toString()?this.PosControls.push(this.oText):"General"==t.Group.toString()?this.Controls.push(this.oCombo):"Linking"==t.Group.toString()&&this.LinkingControls.push(this.oCombo);break;case"CheckList":let a=c.v4.CheckedListBoxData_1(t.DBText.toString(),43);a.GroupName=t.Group.toString(),a.Label=t.Text.toString(),a.Row=t.PrefRowOrder.toString(),a.Column=t.PrefColOrder.toString();let p=t.Value.toString().split(",");for(let u=0;u<this.Data.Tables[10].length;u++)a.Items.push(c.oN.CheckedListBoxItem_3(this.Data.Tables[10][u].NAME.toString(),this.Data.Tables[10][u].FEATUREID.toString())),p.Contains(this.Data.Tables[10][u].FEATUREID.toString())&&(a.Items[u].IsChecked=!0);"Common"==t.Group.toString()?this.CommonControls.push(a):"ARAP"==t.Group.toString()?this.ARAPControls.push(a):"General"==t.Group.toString()?this.Controls.push(a):"Linking"==t.Group.toString()&&this.LinkingControls.push(a)}}FillDimensions(t,s){if(null!=this.Data&&s.length>0){t.Items.push(c._p.ComboBoxItems_2("","0"));for(let e=0;e<s.length;e++)t.Items.push(c._p.ComboBoxItems_2(s[e].NAME.toString(),s[e].FEATUREID.toString()));("CurrencyDim"==t.DBColumnName||"DimensionWise"==t.DBColumnName&&"Linking"==t.GroupName)&&t.Items.push(c._p.ComboBoxItems_2("Product","3"))}}oCheckBox_PropertyChanged(t){}SetProperty_DefaultValue(t){if(t instanceof G.c)try{t.IsChecked=(0,f.yG0)(t.DefaultValue)}catch{}else if(t instanceof I.u)try{t.IsChecked=(0,f.yG0)(t.DefaultValue)}catch{}else if(t instanceof T.Dw)try{t.Text=t.DefaultValue}catch{}else if(t instanceof c.y$)try{t.SelectedValue=r.J0.IsEmpty(t.DefaultValue)?"":t.DefaultValue}catch{}}SetProperties_Custom(t,s){s.Label="Test",s.Mandatory=!1,s.DefaultValue="false",s.DBColumnName="Column",s instanceof T.Dw&&("INT"==s.DataType||"FLOAT"==s.DataType)&&(s.Align="Right")}GetScreenInfo(t){Logger.InfoLog("PreferenceControlGenerator:: Inside GetScreenInfo");try{let s=[];s.push(t),s.push(o.d.SessionManager.UserID),s.push(o.d.SessionManager.RoleID),s.push(o.d.SessionManager.LanguageID);let e=null;return e=o.d.document.GetScreenInfo(t),e}catch(s){return Logger.ErrorLog("PreferenceControlGenerator:: GetScreenInfo"+s.stack),null}}GetScreenInfo_2(t,s){Logger.InfoLog("PreferenceControlGenerator:: Inside GetScreenInfo");try{let e=null;return e=o.d.document.GetScreenInfo_2(t,s,this._IsEdit),e}catch(e){return Logger.ErrorLog("PreferenceControlGenerator:: GetScreenInfo"+e.stack),null}}}class E extends A.g{constructor(t){let s,e;if(super(),this.IsQuit=!0,this.IsOK=!1,this.PDCReceivableAccount=0,this.DocumentObject=new M,this.PostConversionDate=new G.c(0),this.Location=new c.v4(0),this.locationIn="",this.DepositedIn=new b.y$(0),this.DiscountBank=new b.y$(0),this.FromDate=new P.Lc(0),this.ToDate=new P.Lc(0),this.FValue=0,this.TValue=0,this.parent=t,this.DocumentObject.LoadScreen(this,109),this.Amount=new c.y$(0),this.Amount.Label="Amount",this.Amount.SelectionChangedCommand.Subscribe(this,"OnConditionSelectionChanged"),this.DepositedIn.Label="Deposited In",this.DepositedIn.CCID=2,this.DepositedIn.TypeID=51,this.DiscountBank.CCID=2,this.DiscountBank.TypeID=51,this.DiscountBank.Label="Discount Bank",this.Filter=new I.Q("Documents"),s=new I.u("PDC",0,"Filter"),s.Group=this.Filter,null!=this.parent&&0==this.parent.Filter&&(s.IsChecked=!0),s.Label="PDC",this.Filter.Items.push(s),s=new I.u("Discounted",1,"Filter"),s.Group=this.Filter,null!=this.parent&&1==this.parent.Filter&&(s.IsChecked=!0),s.Label="Discounted",this.Filter.Items.push(s),this.Title=" Cheque Discount ",this.FromValue=new T.Dw(0),this.ToValue=new T.Dw(0),this.FromList=new b.y$(0),this.ToList=new b.y$(0),this.FromList.Label=this.FromValue.Label="Value",this.ToList.Label=this.ToValue.Label=o.d.GetResource("Reports_ToValue"),o.d.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==o.d.SessionManager.Preferences.EnableLocationWise.toString()){this.Location.Items.push(c.oN.CheckedListBoxItem_3("All","-1"));let n=o.d.admin.getLocationRoles([50002,o.d.SessionManager.LangID]);if(null!=n&&n.Tables.length>0&&n.Tables[0].length>0)for(let h=0;h<n.Tables[0].length;h++)o.d.SessionManager.LocationID>0&&n.Tables[0][h][n.Columns[0][0]].toString()==o.d.SessionManager.LocationID.toString()?this.Location.Items.push(c.oN.CheckedListBoxItem_5(n.Tables[0][h][n.Columns[0][2]].toString(),n.Tables[0][h][n.Columns[0][0]].toString(),!0)):this.Location.Items.push(c.oN.CheckedListBoxItem_3(n.Tables[0][h][n.Columns[0][2]].toString(),n.Tables[0][h][n.Columns[0][0]].toString()));if(!r.J0.IsEmpty(o.d.SessionManager.LocationWhere)){let h=o.d.SessionManager.LocationWhere.split(",");if(0==o.d.SessionManager.LocationID&&h.length>1)for(let D=0;D<h.length;D++){const a=h[D];for(let p=0;p<this.Location.Items.length;p++){const u=this.Location.Items[p];if(u.Value.toString()==a.toString()){u.IsChecked=!0;break}}}}}else this.Location.Visible=!1;if(this.Documents=new c.v4,this.Documents.Label=" Documents List",e=t.DocumentList.split(","),null!=this.DocumentObject.Data.Tables[1]&&this.DocumentObject.Data.Tables[1].length>0)for(let n=0;n<this.DocumentObject.Data.Tables[1].length;n++)this.Documents.Items.push(c.oN.CheckedListBoxItem_3(this.DocumentObject.Data.Tables[1][n].DocumentName.toString(),this.DocumentObject.Data.Tables[1][n].CostCenterID.toString())),(e.Contains(this.DocumentObject.Data.Tables[1][n].CostCenterID.toString())||""==t.DocumentList)&&(this.Documents.Items[n].IsChecked=!0);this.FromDate.Label=o.d.GetResource("DocumentDesigner_FromDate"),this.ToDate.Label=o.d.GetResource("DocumentDesigner_ToDate"),this.PostConversionDate.Label=o.d.GetResource("PostonConversionDate"),this.Stat=new I.Q("Status"),this.FromDate.Date=this.parent.FromDate,this.ToDate.Date=this.parent.toDate,o.d.SessionManager.Preferences.ContainsKey("DefaultPostConversionDate")&&""!=o.d.SessionManager.Preferences.DefaultPostConversionDate&&(this.PostConversionDate.IsChecked=(0,f.yG0)(o.d.SessionManager.Preferences.DefaultPostConversionDate)),this.PostConversionDate.IsChecked=this.parent.PostonconversionDate,this.LoadConditions(),this.OnConditionSelectionChanged(this.Amount.SelectedValue),t.BankID>0&&(this.DepositedIn.SelectedValue=t.BankID),t.BankCCNodeID>0&&(this.DiscountBank.SelectedValue=t.BankCCNodeID),this.FromDate.Date=t.FromDate,this.ToDate.Date=t.toDate,t.FromValue>0&&(this.FromValue.Text=t.FromValue.toString()),t.ToValue>0&&(this.ToValue.Text=t.ToValue.toString())}OnLocationCheckedChanged(t){if(this.locationIn=this.GetLocation(this.Location),"-1"==t.Value)for(let s=0;s<this.Location.Items.length;s++)this.Location.Items[s].IsChecked=t.IsChecked;else t.IsChecked||(this.Location.Items[0].IsChecked=!1)}OnBankSelectionChanged(t){Logger.InfoLog("ChequeDiscountDialogViewModel ::Entering OnBankSelectionChanged");try{if(this.DepositedIn.SelectedValue>0){let s=o.d.common.GetDataSet("CD001",this.DepositedIn.SelectedValue.toString());null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&null!=s.Tables[0][0].ACCOUNTID&&""!=s.Tables[0][0].ACCOUNTID.toString()&&(null!=s.Tables[0][0].PDCReceivableAccount&&""!=s.Tables[0][0].PDCReceivableAccount.toString()&&(this.parent.PDCReceivableAccount=parseFloat(s.Tables[0][0].PDCReceivableAccount)),null!=s.Tables[0][0].InterestRate&&""!=s.Tables[0][0].InterestRate.toString()&&(this.parent.InterestRate=parseFloat(s.Tables[0][0].InterestRate)),null!=s.Tables[0][0].CommissionRate&&""!=s.Tables[0][0].CommissionRate.toString()&&(this.parent.CommissionRate=parseFloat(s.Tables[0][0].CommissionRate)),null!=s.Tables[0][0].CheckDiscountLimit&&""!=s.Tables[0][0].CheckDiscountLimit.toString()&&(this.parent.ChequeDiscountLimit=parseFloat(s.Tables[0][0].CheckDiscountLimit)),null!=s.Tables[0][0].ACCOUNTID&&""!=s.Tables[0][0].ACCOUNTID.toString()&&(this.parent.PDCDiscountAcc=parseFloat(s.Tables[0][0].ACCOUNTID)))}Logger.InfoLog("ChequeDiscountDialogViewModel ::Exiting OnBankSelectionChanged")}catch(s){Logger.ErrorLog("ChequeDiscountDialogViewModel :: OnBankSelectionChanged"+s.stack)}}OnConditionSelectionChanged(t){this.ToValue.Visible=!1,this.FromValue.Label="Value",null!=this.Amount.SelectedValue&&("Between"==this.Amount.SelectedValue||"NotBetween"==this.Amount.SelectedValue?this.FromList.CCID>0?(this.FromList.Visible=!0,this.ToList.CCID=this.FromList.CCID,this.ToList.TypeID=this.FromList.TypeID,this.ToList.CustomWhere=this.FromList.CustomWhere,this.ToList.Refresh(),this.ToList.Visible=!0,this.FromList.Label=o.d.GetResource("Reports_FromValue")):(this.FromValue.Visible=!0,this.ToValue.Visible=!0,this.FromValue.Label="From Value",this.FromValue.Label=o.d.GetResource("Reports_FromValue")):("Equal"==this.Amount.SelectedValue||"NotEqual"==this.Amount.SelectedValue)&&this.FromList.CCID>0?this.FromList.Visible=!0:this.FromValue.Visible=!0)}LoadConditions(){this.Amount.Items.Clear(),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Between"),"Between"," BETWEEN ")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Not Between"),"NotBetween"," NOT BETWEEN ")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Equal"),"Equal","=")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Not Equal"),"NotEqual","<>")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Lessthan"),"Lessthan","<")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Lessthan Or Equal"),"LessthanOrEqual","<=")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Greaterthan"),"Greaterthan",">")),this.Amount.Items.push(c._p.ComboBoxItems_3(o.d.GetResource("Greaterthan Or Equal"),"Greaterthan Or Equal",">=")),this.Amount.SelectedValue="Equal"}GetLocation(t){let s=1,e=0,n="";for(;s<t.Items.length;s++)t.Items[s].IsChecked&&(0==e&&(n=""),n+=t.Items[s].Value+",",e++);return n.length>0&&(n=n.substr(0,n.length-1)+""),n}OnButtonClick(t){if("Cancel"==t.toString())o.d.page.HideDialog(this.PopUpGUID);else try{this.parent.DialogResult=!0,this.parent.FromDate=this.FromDate.Date,this.parent.toDate=this.ToDate.Date,r.J0.IsEmpty(this.FromValue.Text)||(this.FValue=r.J0.IntTryParse(this.FromValue.Text),this.parent.FromValue=this.FValue),this.ToValue.Visible&&(r.J0.IsEmpty(this.ToValue.Text)||(this.TValue=r.J0.IntTryParse(this.ToValue.Text),this.parent.ToValue=this.TValue)),this.parent.strAmountQry=this.GetAmountCondition();let s="";for(let e=0;e<this.Documents.Items.length;e++)this.Documents.Items[e].IsChecked&&(s.length>0&&(s+=","),s+=this.Documents.Items[e].Value.toString());if(this.parent.DocumentList=s,this.parent.PostonconversionDate=this.PostConversionDate.IsChecked,this.parent.LocationList=this.GetLocation(this.Location),!(this.DepositedIn.SelectedValue>0))return this.DisplayMessage=" Please select Discount Bank",void(this.MessageVisibility=!0);this.parent.BankID=this.DepositedIn.SelectedValue,this.parent.Filter=this.Filter.CheckedItem.FeatureID,this.parent.BankCCNodeID=this.DiscountBank.SelectedValue>0?this.DiscountBank.SelectedValue:this.parent.BankID,this.parent.LoadData(),o.d.page.HideDialog(this.PopUpGUID)}catch{}}GetAmountCondition(){let t="";return"EQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?t=" = "+this.FromValue.Text:"BETWEEN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()&&null!=this.ToValue.Text&&""!=this.ToValue.Text.Trim()?t=" BETWEEN "+this.FromValue.Text+"  AND "+this.ToValue.Text:"NOTBETWEEN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()&&null!=this.ToValue.Text&&""!=this.ToValue.Text.Trim()?t=" NOT BETWEEN "+this.FromValue.Text+"  AND "+this.ToValue.Text:"NOTEQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?t=" <> "+this.FromValue.Text:"LESSTHAN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?t=" < "+this.FromValue.Text:"LESSTHANOREQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?t=" <= "+this.FromValue.Text:"GREATERTHAN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?t=" > "+this.FromValue.Text:"GREATERTHAN OR EQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()&&(t=" >= "+this.FromValue.Text),t}}var L=d(11798),i=d(96598),O=d(43357),w=d(67700),N=d(96336);function j(m,t){if(1&m&&(i.j41(0,"div",3),i.EFF(1,"\n            "),i.eu8(2,4),i.EFF(3,"\n        "),i.k0s()),2&m){const s=i.XpG();i.R7$(2),i.Y8G("obj",s.obj.DepositedIn)("group",s.form)}}function _(m,t){if(1&m&&(i.j41(0,"div",3),i.EFF(1,"\n            "),i.eu8(2,4),i.EFF(3,"\n        "),i.k0s()),2&m){const s=i.XpG();i.R7$(2),i.Y8G("obj",s.obj.Documents)("group",s.form)}}function U(m,t){if(1&m&&i.eu8(0,4),2&m){const s=i.XpG();i.Y8G("obj",s.obj.Amount)("group",s.form)}}function q(m,t){if(1&m&&i.eu8(0,4),2&m){const s=i.XpG();i.Y8G("obj",s.obj.FromValue)("group",s.form)}}function K(m,t){if(1&m&&i.eu8(0,4),2&m){const s=i.XpG();i.Y8G("obj",s.obj.ToValue)("group",s.form)}}function J(m,t){if(1&m&&(i.j41(0,"div",3),i.EFF(1,"\n            "),i.eu8(2,4),i.EFF(3,"\n        "),i.k0s()),2&m){const s=i.XpG();i.R7$(2),i.Y8G("obj",s.obj.DiscountBank)("group",s.form)}}function W(m,t){if(1&m&&(i.j41(0,"div",3),i.EFF(1,"\n            "),i.eu8(2,4),i.EFF(3,"\n        "),i.k0s()),2&m){const s=i.XpG();i.R7$(2),i.Y8G("obj",s.obj.Location)("group",s.form)}}let V=(()=>{class m{constructor(){}ngOnInit(){this.form=new L.gE({})}static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275cmp=i.VBU({type:m,selectors:[["app-cheque-discount-dialog"]],inputs:{obj:"obj"},standalone:!1,decls:65,vars:22,consts:[[1,"master-screen",2,"padding-bottom","4px",3,"formGroup"],[1,"PACTHeaderFields","dialogSubBody"],["class","form-group col-xl-12  col-md-12 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"row","rowflex"],[1,"form-group","row","form-row","col-xl-4","col-md-4","col-sm-12","col-xs-12","PACTControl",2,"padding-right","10px !important"],["FieldDirective","",3,"obj","group",4,"ngIf"],[1,"form-group","row","form-row","col-xl-4","col-md-4","col-sm-12","col-xs-12","PACTControl"],[1,"form-group","row","form-row","col-xl-6","col-md-6","col-sm-12","col-xs-12","PACTControl",2,"padding-right","10px !important"],[1,"form-group","row","form-row","col-xl-6","col-md-6","col-sm-12","col-xs-12","PACTControl"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(e,n){1&e&&(i.j41(0,"div",0),i.EFF(1,"\n    "),i.j41(2,"div",1),i.EFF(3,"\n        "),i.EFF(4,"\n        "),i.DNE(5,j,4,2,"div",2),i.EFF(6,"\n        "),i.DNE(7,_,4,2,"div",2),i.EFF(8,"\n        "),i.j41(9,"div",3),i.EFF(10,"\n            "),i.eu8(11,4),i.EFF(12,"\n        "),i.k0s(),i.EFF(13,"\n\n        "),i.j41(14,"div",5),i.EFF(15,"\n            "),i.j41(16,"div",6),i.EFF(17,"\n                "),i.DNE(18,U,1,2,"ng-container",7),i.EFF(19,"\n            "),i.k0s(),i.EFF(20,"\n            "),i.j41(21,"div",6),i.EFF(22,"\n                "),i.DNE(23,q,1,2,"ng-container",7),i.EFF(24,"\n            "),i.k0s(),i.EFF(25,"\n            "),i.j41(26,"div",8),i.EFF(27,"\n                "),i.DNE(28,K,1,2,"ng-container",7),i.EFF(29,"\n            "),i.k0s(),i.EFF(30,"\n        "),i.k0s(),i.EFF(31,"\n        "),i.j41(32,"div",5),i.EFF(33,"\n            "),i.j41(34,"div",9),i.EFF(35,"\n                "),i.eu8(36,4),i.EFF(37,"\n            "),i.k0s(),i.EFF(38,"\n            "),i.j41(39,"div",10),i.EFF(40,"\n                "),i.eu8(41,4),i.EFF(42,"\n            "),i.k0s(),i.EFF(43,"\n        "),i.k0s(),i.EFF(44,"\n        "),i.DNE(45,J,4,2,"div",2),i.EFF(46,"\n        "),i.DNE(47,W,4,2,"div",2),i.EFF(48,"\n\n    "),i.k0s(),i.EFF(49,"\n    "),i.j41(50,"div",11),i.EFF(51,"\n        "),i.j41(52,"div"),i.EFF(53,"\n            "),i.j41(54,"button",12),i.bIt("click",function(){return n.obj.OnButtonClick("OK")}),i.EFF(55),i.nI1(56,"translate"),i.k0s(),i.EFF(57,"\n            "),i.j41(58,"button",13),i.bIt("click",function(){return n.obj.OnButtonClick("Cancel")}),i.nrm(59,"i",14),i.EFF(60),i.nI1(61,"translate"),i.k0s(),i.EFF(62,"\n        "),i.k0s(),i.EFF(63,"\n    "),i.k0s(),i.EFF(64,"\n"),i.k0s()),2&e&&(i.xc7("width",n.obj.IsMobile?"100%":"400px"),i.Y8G("formGroup",n.form),i.R7$(5),i.Y8G("ngIf",n.obj.DepositedIn.Visible),i.R7$(2),i.Y8G("ngIf",n.obj.Documents.Visible),i.R7$(4),i.Y8G("obj",n.obj.Filter)("group",n.form),i.R7$(7),i.Y8G("ngIf",n.obj.Amount.Visible),i.R7$(5),i.Y8G("ngIf",n.obj.FromValue.Visible),i.R7$(5),i.Y8G("ngIf",n.obj.ToValue.Visible),i.R7$(8),i.Y8G("obj",n.obj.FromDate)("group",n.form),i.R7$(5),i.Y8G("obj",n.obj.ToDate)("group",n.form),i.R7$(4),i.Y8G("ngIf",n.obj.DiscountBank.Visible),i.R7$(2),i.Y8G("ngIf",n.obj.Location.Visible),i.R7$(8),i.JRh(i.bMT(56,18,"Com_OK")),i.R7$(5),i.JRh(i.bMT(61,20,"Cancel")))},dependencies:[O.bT,w._,L.cb,L.j4,N.D9],encapsulation:2})}}return m})();var S=d(21774),F=d(23603),v=d(5109);class H extends A.g{constructor(){super(),this.IsPDCS=!0,this.Availed=new T.Dw(0),this.Limit=new T.Dw(0),this.SelectedValue=new T.Dw(0),this.Balance=new T.Dw(0),this.FilterDate=new P.Lc(0),this.Bank=new b.y$(0),this.SearchText="",this.DialogResult=!1,this.FromDate=new Date,this.toDate=new Date,this.BankID=0,this.Filter=0,this.Status=0,this.FromValue=0,this.ToValue=0,this.DocList=new Array,this.Locations="",this.strAmountQry="",this.DocumentList="",this.LocationList="",this.PostonconversionDate=!1,this.PDCReceivableAccount=0,this.InterestRate=0,this.CommissionRate=0,this.ChequeDiscountLimit=0,this.Used=0,this.PDCDiscountAcc=0,this.BankCCNodeID=0,this.bankname="",this.MessageBank="",this.CheckedCnt=0,this.ScreenObject=new R.a(4e4,0),this.onLoad(),this.Bank.OnPactListBoxValueChanged.Subscribe(this,"onListSelectedChanged"),this.FilterDate.Label="Date",this.FilterDate.Date=new Date,this.Bank.Label="Bank",this.Bank.TypeID=51,this.Bank.CCID=2,this.Limit.Label="Limit",this.Availed.Label="Availed",this.SelectedValue.Label="Selected",this.Balance.Label="Balance",this.DialogResult=!1;let t=new E(this);o.d.page.ShowDialog(t,V,{ShowCenter:!o.d.IsMobile,NoWidth:!0}).subscribe(()=>{this.FillSearchDetails()})}FillSearchDetails(){this.Options=new c.y$(0),this.SearchCols=new c.y$(0),this.Options.Items.push(c._p.ComboBoxItems_2(o.d.GetResource("Com_Equals"),"1")),this.Options.Items.push(c._p.ComboBoxItems_2(o.d.GetResource("Com_NotEquals"),"2")),this.Options.Items.push(c._p.ComboBoxItems_2(o.d.GetResource("Com_BeginsWith"),"3")),this.Options.Items.push(c._p.ComboBoxItems_2(o.d.GetResource("Com_EndsWith"),"4")),this.Options.Items.push(c._p.ComboBoxItems_2(o.d.GetResource("Com_Contains"),"5")),this.Options.Items.push(c._p.ComboBoxItems_2(o.d.GetResource("Com_NotContains"),"6")),this.Options.SelectedValue="5",this.PstDocGrid.Columns.forEach(t=>{t.IsVisible&&"Sno"!=t.DisplayMember&&this.SearchCols.Items.push(c._p.ComboBoxItems_2(t.Header,t.DisplayMember))}),this.SearchCols.Items.length>0&&(this.SearchCols.SelectedValue=this.SearchCols.Items[0].Value)}onListSelectedChanged(t){if(Logger.InfoLog("ChequeDiscPostedDocumentViewModel ::Entering onListSelectedChanged"),null!=t&&this.Bank.SelectedValue>0){let s=o.d.common.GetDataSet("CD001",this.Bank.SelectedValue.toString());null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&!r.J0.IsEmpty(s.Tables[0][0].ACCOUNTID)&&(r.J0.IsEmpty(s.Tables[0][0].InterestRate)||(this.InterestRate=parseFloat(s.Tables[0][0].InterestRate)),r.J0.IsEmpty(s.Tables[0][0].CommissionRate)||(this.CommissionRate=parseFloat(s.Tables[0][0].CommissionRate)),r.J0.IsEmpty(s.Tables[0][0].CheckDiscountLimit)||(this.ChequeDiscountLimit=parseFloat(s.Tables[0][0].CheckDiscountLimit)),s.Columns[0].Contains("Used")&&!r.J0.IsEmpty(s.Tables[0][0].Used)&&(this.Used=parseFloat(s.Tables[0][0].Used)),this.ChequeDiscountLimit>0&&(this.Limit.Text=this.ChequeDiscountLimit.toString()))}}OnValueChange(t){(null==this.Limit.Text||""==this.Limit.Text)&&(this.Limit.Text="0"),(null==this.Availed.Text||""==this.Availed.Text)&&(this.Availed.Text="0"),(null==this.SelectedValue.Text||""==this.SelectedValue.Text)&&(this.SelectedValue.Text="0"),this.Balance.Text=(parseFloat(this.Limit.Text)-this.Used-parseFloat(this.Availed.Text)+parseFloat(this.SelectedValue.Text)).toString()}onLoad(){this.DisplayName="Cheque Discount Calculation",this.InitColumns()}oncellEditEnding(t){if("PACT.COMMON.PactTextBoxColumnEx"!=t.OriginalSource.Column.GetType().toString())return;let s=t.OriginalSource.RowDataItem.Row;if("Commission"==t.OriginalSource.Column.Binding.Path.Path||"Interest"==t.OriginalSource.Column.Binding.Path.Path){let e=0,n=0;r.J0.IsEmpty(s.Interest)||(e=parseFloat(s.Interest.toString())),r.J0.IsEmpty(s.Commission)||(n=parseFloat(s.Commission.toString())),s.Total=(e+n).toString(),s.AcceptChanges()}this.ShowColumnTotal()}InitColumns(){let e,t=[],s={};s.Name=o.d.GetResource("Pdc_Convert"),s.Value=1,s.Status=null,t.push(s),s={},s.Name=o.d.GetResource("Pdc_unConvert"),s.Value=2,s.Status=null,t.push(s),s={},s.Name=o.d.GetResource("DocumentDesigner_Bounce"),s.Value=0,s.Status=null,t.push(s),this.PstDocGrid=new k.vv,this.PstDocGrid.CanUserSortColumns=!0,this.PstDocGrid.Columns=[],this.PstDocGrid.Width="",this.PstDocGrid.CellEditEnding.Subscribe(this,"oncellEditEnding"),e=new S.O7,e.Header="CostcenterID",e.DisplayMember="CostcenterID",e.ReadOnly=!0,e.IsVisible=!1,e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="DocPrefix",e.DisplayMember="DocPrefix",e.ReadOnly=!0,e.IsVisible=!1,e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="DocNumber",e.DisplayMember="DocNumber",e.ReadOnly=!0,e.IsVisible=!1,e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("DocumentDesigner_VoucherNo"),e.DisplayMember="VoucherNo",e.DataType="LINK",e.Click.Subscribe(this,"OnDocLink"),e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("DocumentDesigner_VoucherDate"),e.DisplayMember="DocDateFormat",e.ReadOnly=!0,e.DataType="DATE",e.Width=80,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("DocumentDesigner_Account"),e.DisplayMember="AccountID",e.ValueMember="AccountID_Key",e.ReadOnly=!0,e.Width=150,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("DocumentDesigner_ChequeNo"),e.DisplayMember="ChequeNumber",e.ReadOnly=!0,e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="Maturity date",e.DisplayMember="ChequeDateFormat",e.ReadOnly=!0,e.DataType="DATE",e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("DocumentDesigner_Amount"),e.DisplayMember="Amount",e.ReadOnly=!0,e.DataType="FLOAT",e.IsCalculated=1,e.Width=100,o.d.SessionManager.Preferences.ContainsKey("DecimalsinRate")&&""!=o.d.SessionManager.Preferences.DecimalsinRate&&(e.DecimalPoints=o.d.SessionManager.Preferences.DecimalsinRate),this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("Pref_Select"),e.DisplayMember="Action",e.DataType="CheckBox",e.Width=50,e.CheckedChanged.Subscribe(this,"OnCheckedChanged"),this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="No Of Days",e.DisplayMember="NoOfDays",e.ReadOnly=!0,e.DataType="FLOAT",e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="Selected Amount",e.DisplayMember="SelectedAmount",e.ReadOnly=!0,e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,o.d.SessionManager.Preferences.ContainsKey("DecimalsinRate")&&""!=o.d.SessionManager.Preferences.DecimalsinRate&&(e.DecimalPoints=o.d.SessionManager.Preferences.DecimalsinRate),this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="Interest",e.DisplayMember="Interest",e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,o.d.SessionManager.Preferences.ContainsKey("DecimalsinExtraFields")&&""!=o.d.SessionManager.Preferences.DecimalsinExtraFields&&(e.DecimalPoints=o.d.SessionManager.Preferences.DecimalsinExtraFields),this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="Commission",e.DisplayMember="Commission",e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,o.d.SessionManager.Preferences.ContainsKey("DecimalsinExtraFields")&&""!=o.d.SessionManager.Preferences.DecimalsinExtraFields&&(e.DecimalPoints=o.d.SessionManager.Preferences.DecimalsinExtraFields),this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="Total",e.DisplayMember="Total",e.ReadOnly=!0,e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header=o.d.GetResource("DocumentDesigner_Bank"),e.DisplayMember="BankAccountID",e.ValueMember="BankAccountID_Key",e.DataType="LISTBOX",e.CostCenterID=2,e.TypeID=51,e.Width=150,e.ReadOnly=!0,this.PstDocGrid.Columns.push(e),e=new S.O7,e.Header="Discounted",e.DisplayMember="ConvertedVoucherNO",e.DataType="LINK",e.Click.Subscribe(this,"OnConvertedDocLink"),e.Width=100,this.PstDocGrid.Columns.push(e)}OnCheckedChanged(t,s){if(0==this.Filter){let e=t.Row;if(s){r.J0.IsEmpty(this.SelectedValue.Text)&&(this.SelectedValue.Text="0"),r.J0.IsEmpty(this.Limit.Text)&&(this.Limit.Text="0"),r.J0.IsEmpty(this.Availed.Text)&&(this.Availed.Text="0");let n=0;this.SelectedValue.Text=(parseFloat(this.SelectedValue.Text)+parseFloat(e.Amount)).toString(),n=parseFloat(this.Limit.Text)-this.Used-parseFloat(this.Availed.Text)-parseFloat(this.SelectedValue.Text),n>parseFloat(this.Limit.Text)?(alert("Balance exceeds Limit "),this.SelectedValue.Text=(parseFloat(this.SelectedValue.Text)-parseFloat(e.Amount)).toString(),e.Action=!1):(this.Balance.Text=n.toString(),e.SelectedAmount=parseFloat(e.Amount).ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),e.NoOfDays=r.J0.IsEmpty(e.ChequeMaturityDate)?"0":this.FilterDate.Date.Subtract(r.J0.ParseDate(e.ChequeMaturityDate)).Days,e.Interest=(parseFloat(e.SelectedAmount)*this.InterestRate/100/365*parseInt(e.NoOfDays.toString())*-1).ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),e.Commission=(parseFloat(e.SelectedAmount)*this.CommissionRate/100/365*parseInt(e.NoOfDays.toString())*-1).ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),e.Total=(parseFloat(e.Interest)+parseFloat(e.Commission)).toString(),e.Action=!0)}else e.Action=!1,e.SelectedAmount="0",e.NoOfDays="0",e.Interest="0",e.Commission="0",e.Total="0";this.ShowColumnTotal()}}ShowColumnTotal(){let t=0,s=0,e=0,n=0;for(let h=0;h<this.PstDocGrid.Table.length;h++)(0,f.yG0)(this.PstDocGrid.Table[h].Action)&&(null!=this.PstDocGrid.Table[h].Amount&&(t+=parseFloat(this.PstDocGrid.Table[h].Amount)),null!=this.PstDocGrid.Table[h].Interest&&(s+=parseFloat(this.PstDocGrid.Table[h].Interest)),null!=this.PstDocGrid.Table[h].Commission&&(e+=parseFloat(this.PstDocGrid.Table[h].Commission)),null!=this.PstDocGrid.Table[h].Total&&(n+=parseFloat(this.PstDocGrid.Table[h].Total)));this.SelectedValue.Text=t.ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),r.J0.IsEmpty(this.Availed.Text)&&(this.Availed.Text="0"),r.J0.IsEmpty(this.Limit.Text)&&(this.Limit.Text="0"),this.Balance.Text=(parseFloat(this.Limit.Text)-this.Used-parseFloat(this.Availed.Text)-parseFloat(this.SelectedValue.Text)).toString(),this.PstDocGrid.Columns[11].footer=t.ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Columns[12].footer=s.ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Columns[13].footer=e.ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Columns[14].footer=n.ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.UpdateFooter()}OnDocLink(t){}OnConvertedDocLink(t){if(null!=this.PstDocGrid.SelectedItem&&!r.J0.IsEmpty(this.PstDocGrid.SelectedItem.ConvertedDocNo))try{this.ScreenObject.GetDocDetailsByAccID(parseInt(this.PstDocGrid.SelectedItem.ConvertedAccDocID.toString()))}catch(s){Logger.ErrorLog("PostedDocumentViewModel","OnLinkClickEvent",s.Message)}}LoadData(){let s,t=[];t.push(this.FromDate.ToString("dd/MMM/yyyy")),t.push(this.toDate.ToString("dd/MMM/yyyy")),t.push(this.strAmountQry),t.push(this.DocumentList),t.push(this.BankID),t.push(this.BankCCNodeID),t.push(this.Filter),t.push(this.LocationList),F.Document.GetPDRChequeDiscount(t).subscribe(e=>{s=e,this.ScreenObject.DocID=e.RetValue,null!=s&&s.Tables.length>1&&s.Tables[1].length>0&&(this.bankname=s.Tables[1][0].AccountName.toString()),this.LoadDashData(s.Tables[0]),null!=s&&s.Tables.length>1&&s.Tables[1].length>0&&(this.bankname=s.Tables[1][0].AccountName.toString(),this.InterestRate=parseFloat(s.Tables[1][0].INTERESTRATE),this.CommissionRate=parseFloat(s.Tables[1][0].COMMISSIONRATE),this.ChequeDiscountLimit=parseFloat(s.Tables[1][0].CHECKDISCOUNTLIMIT),s.Columns[1].Contains("Used")&&!r.J0.IsEmpty(s.Tables[1][0].Used)&&(this.Used=parseFloat(s.Tables[1][0].Used.toString()))),this.Bank.SelectedValue=this.BankCCNodeID,this.ChequeDiscountLimit>0&&(this.Limit.Text=this.ChequeDiscountLimit.toString()),0==this.Filter?(this.IsPDCS=!0,this.PstDocGrid.Columns[10].IsVisible=!0,this.PstDocGrid.Columns[11].IsVisible=!0,this.PstDocGrid.Columns[12].IsVisible=!0,this.PstDocGrid.Columns[13].IsVisible=!0,this.PstDocGrid.Columns[14].IsVisible=!0,this.PstDocGrid.Columns[16].IsVisible=!1):(this.IsPDCS=!1,this.PstDocGrid.Columns[10].IsVisible=!1,this.PstDocGrid.Columns[11].IsVisible=!1,this.PstDocGrid.Columns[12].IsVisible=!1,this.PstDocGrid.Columns[13].IsVisible=!1,this.PstDocGrid.Columns[14].IsVisible=!1,this.PstDocGrid.Columns[16].IsVisible=!0),this.ShowColumnTotal()},e=>{console.log(e),this.DisplayMessage="Error loading Data..."})}LoadDashData(t){t.length>0&&null==t[0].Sno?(this.PstDocGrid.TableColumns.push("Sno"),this.PstDocGrid.TableColumns.push("DocDateFormat"),this.PstDocGrid.TableColumns.push("ChequeDateFormat"),this.PstDocGrid.TableColumns.push("CostcenterID"),this.PstDocGrid.TableColumns.push("clrDate"),this.PstDocGrid.TableColumns.push("clrDate_Key"),this.PstDocGrid.TableColumns.push("Action"),this.PstDocGrid.TableColumns.push("StatusForDisplay"),this.PstDocGrid.TableColumns.push("ConvertedDocNo"),this.PstDocGrid.TableColumns.push("ConvertedAccDocID"),this.PstDocGrid.TableColumns.push("NoOfDays"),this.PstDocGrid.TableColumns.push("SelectedAmount"),this.PstDocGrid.TableColumns.push("Commission"),this.PstDocGrid.TableColumns.push("Interest"),this.PstDocGrid.TableColumns.push("Total")):this.PstDocGrid.TableColumns.Contains("Sno")||(this.PstDocGrid.TableColumns.push("Sno"),this.PstDocGrid.TableColumns.push("DocDateFormat"),this.PstDocGrid.TableColumns.push("ChequeDateFormat"),this.PstDocGrid.TableColumns.push("CostcenterID"),this.PstDocGrid.TableColumns.push("clrDate"),this.PstDocGrid.TableColumns.push("clrDate_Key"),this.PstDocGrid.TableColumns.push("Action"),this.PstDocGrid.TableColumns.push("StatusForDisplay"),this.PstDocGrid.TableColumns.push("ConvertedDocNo"),this.PstDocGrid.TableColumns.push("ConvertedAccDocID"),this.PstDocGrid.TableColumns.push("NoOfDays"),this.PstDocGrid.TableColumns.push("SelectedAmount"),this.PstDocGrid.TableColumns.push("Commission"),this.PstDocGrid.TableColumns.push("Interest"),this.PstDocGrid.TableColumns.push("Total"));for(let s=0;s<=t.length-1;s++)r.J0.IsEmpty(t[s].DocDate)||(t[s].DocDateFormat=!o.d.SessionManager.Preferences.ContainsKey("Date Format")||r.J0.IsEmpty(o.d.SessionManager.Preferences["Date Format"])||r.J0.IsEmpty(t[s].DocDate)?r.J0.ParseDate(t[s].DocDate.toString()).ToString("dd/MMM/yyyy"):r.J0.ParseDate(t[s].DocDate.toString()).ToString(o.d.SessionManager.Preferences["Date Format"])),t[s].BankAccountID_Key=this.BankCCNodeID,t[s].BankAccountID=this.bankname,r.J0.IsEmpty(t[s].Amount)||(t[s].Amount=!o.d.SessionManager.Preferences.ContainsKey("DecimalsinAmount")||r.J0.IsEmpty(o.d.SessionManager.Preferences.DecimalsinAmount)||r.J0.IsEmpty(t[s].Amount)?parseFloat(t[s].Amount.toString()).ToString("N2"):parseFloat(t[s].Amount).ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount)),r.J0.IsEmpty(t[s].ConvertedVoucherNO)||(t[s].ConvertedDocNo=t[s].ConvertedVoucherNO),r.J0.IsEmpty(t[s].ConvertedDocID)||(t[s].ConvertedAccDocID=t[s].ConvertedDocID),r.J0.IsEmpty(t[s].ChequeMaturityDate)||(t[s].ChequeDateFormat=!o.d.SessionManager.Preferences.ContainsKey("Date Format")||r.J0.IsEmpty(o.d.SessionManager.Preferences["Date Format"])||r.J0.IsEmpty(t[s].DocDate)?r.J0.ParseDate(t[s].ChequeMaturityDate.toString()).ToString("dd/MMM/yyyy"):r.J0.ParseDate(t[s].ChequeMaturityDate.toString()).ToString(o.d.SessionManager.Preferences["Date Format"])),t[s].Action=!1,this.PstDocGrid.updateRow(t[s])}ButtonSave(t){if(this.DisplayMessage="","Save"==t.toString()||"unpost"==t.toString()){this.DisplayMessage="";let s=this.GetPDReceiptXML();if(""!=this.DisplayMessage)return void(this.MessageVisibility=!0);if(0==this.CheckedCnt)this.DisplayMessage=" Please select a record ",this.MessageVisibility=!0;else if(s.length>0){let e=0;F.Document.SetChequeDiscDocuments(s,this.FilterDate.Date).subscribe(n=>{this.DisplayMessage=n.Message,e=n.RetValue,e>0?(this.LoadData(),this.MessageVisibility=!0,this.ShowColumnTotal(),this.Limit.Text="",this.Availed.Text="",this.SelectedValue.Text="",this.Balance.Text=""):this.MessageVisibility=!0},n=>{console.log(n),this.DisplayMessage="Error in save"})}else this.DisplayMessage=" PDC Account Not Set For "+this.MessageBank,this.MessageVisibility=!0}else if("Search"==t)this.SearchGrid();else if("Refresh"==t){let s=new E(this);o.d.page.ShowDialog(s,V,{ShowCenter:!o.d.IsMobile,NoWidth:!0})}else if("Calculate"==t)for(let s=0;s<this.PstDocGrid.Table.length;s++)(0,f.yG0)(this.PstDocGrid.Table[s].Action)?(this.PstDocGrid.Table[s].Interest=(parseFloat(this.PstDocGrid.Table[s].SelectedAmount)*this.InterestRate/100/365*parseInt(this.PstDocGrid.Table[s].NoOfDays)).ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Table[s].Commission=(parseFloat(this.PstDocGrid.Table[s].SelectedAmount)*this.CommissionRate/100/365*parseInt(this.PstDocGrid.Table[s].NoOfDays)).ToString("N"+o.d.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Table[s].Total=(parseFloat(this.PstDocGrid.Table[s].Interest)+parseFloat(this.PstDocGrid.Table[s].Commission)).toString(),this.PstDocGrid.Table[s].Action=!0):(this.PstDocGrid.Table[s].Action=!1,this.PstDocGrid.Table[s].SelectedAmount="0",this.PstDocGrid.Table[s].NoOfDays="0",this.PstDocGrid.Table[s].Interest="0",this.PstDocGrid.Table[s].Commission="0",this.PstDocGrid.Table[s].Total="0"),this.ShowColumnTotal()}SearchGrid(){if(r.J0.IsEmpty(this.SearchText))return;let t="";if(""!=this.SearchCols.SelectedValue)t=this.SearchCols.SelectedValue;else{if(!(this.SearchCols.Items.length>0))return;t=this.SearchCols.Items[0].Value}if(!this.PstDocGrid.TableColumns.Contains(t))return;let s=this.PstDocGrid.SelectedIndex;-1==s&&(s=0);for(let e=0;e<this.PstDocGrid.Table.length;e++)if(s<this.PstDocGrid.Table.length-1?s++:s=0,!r.J0.IsEmpty(this.PstDocGrid.Table[s][t]))switch(this.Options.SelectedValue){case"1":if(this.PstDocGrid.Table[s][t].toString().toLowerCase()==this.SearchText.toLowerCase())return void this.Setselectedrow(s);break;case"2":if(this.PstDocGrid.Table[s][t].toString().toLowerCase()!=this.SearchText.toLowerCase())return void this.Setselectedrow(s);break;case"3":if(this.PstDocGrid.Table[s][t].toString().toLowerCase().startsWith(this.SearchText.toLowerCase()))return void this.Setselectedrow(s);break;case"4":if(this.PstDocGrid.Table[s][t].toString().toLowerCase().endsWith(this.SearchText.toLowerCase()))return void this.Setselectedrow(s);break;case"5":if(this.PstDocGrid.Table[s][t].toString().toLowerCase().Contains(this.SearchText.toLowerCase()))return void this.Setselectedrow(s);break;case"6":if(!this.PstDocGrid.Table[s][t].toString().toLowerCase().Contains(this.SearchText.toLowerCase()))return void this.Setselectedrow(s)}}Setselectedrow(t){this.PstDocGrid.SelectedItem=this.PstDocGrid.Table[t]}GetPDReceiptXML(){Logger.InfoLog("ChequeDiscPostedDocumentViewModel ::Entering GetPDReceiptXML");let t="",s="",e=null;if(this.CheckedCnt=0,0==this.Filter){for(let a=0;a<this.PstDocGrid.Table.length;a++)if(null!=this.PstDocGrid.Table[a].Action&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].Action)&&(0,f.yG0)(this.PstDocGrid.Table[a].Action)){if(""!=t&&(t+=",",s+=","),t+=this.PstDocGrid.Table[a].CostCenterID.toString(),r.J0.IsEmpty(this.PstDocGrid.Table[a].BankAccountID_Key))return this.DisplayMessage="Select Bank at Row No:"+(a+1).toString(),this.MessageVisibility=!0,"";s+=this.PstDocGrid.Table[a].BankAccountID_Key.toString()}""!=t&&(e=F.Document.GetDiscountfields(t,s))}let n="";n+="<PDR>";let h=0;for(let a=0;a<this.PstDocGrid.Table.length;a++)if(null!=this.PstDocGrid.Table[a].Action&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].Action)&&(0,f.yG0)(this.PstDocGrid.Table[a].Action)){if(0==this.Filter){let p=null,u=e.Tables[0].filter(l=>l.CostCenterID==this.PstDocGrid.Table[a].CostCenterID.toString());if(u.length>0){let l=null;if(""==u[0].OnDiscount.toString()||!r.J0.IsEmpty(u[0].OnDiscount)&&parseInt(u[0].OnDiscount.toString())<4e4)return this.DisplayMessage="Define Discount Document ",this.MessageVisibility=!0,"";if(r.J0.IsEmpty(u[0].OnDiscount)||(h=parseInt(u[0].OnDiscount.toString()),l=new v.AddEditDocumentViewModel(h,"",!1)),null!=l){if(p=e.Tables[2].find(C=>C.AccountID==this.PstDocGrid.Table[a].BankAccountID_Key.toString()),0==p.length||""==p[0].PDCDiscountAccount.toString()||"0"==p[0].PDCDiscountAccount.toString())return this.DisplayMessage="Define PDC Discount Account for "+this.PstDocGrid.Table[a].BankAccountID.toString(),this.MessageVisibility=!0,"";let g=l.ScreenObject.GridDataObj.NewRow();l.ScreenObject.GridDataColumns.Contains("CreditAccount_Key")&&(g.CreditAccount_Key=p[0].PDCDiscountAccount.toString()),null==l.ScreenObject.DebitAccount||r.J0.IsEmpty(this.PstDocGrid.Table[a].BankAccountID_Key)?l.ScreenObject.GridDataColumns.Contains("DebitAccount_Key")&&(g.DebitAccount_Key=this.PstDocGrid.Table[a].BankAccountID_Key.toString()):l.ScreenObject.DebitAccount.SelectedValue=parseInt(this.PstDocGrid.Table[a].BankAccountID_Key.toString()),l.ScreenObject.GridDataColumns.Contains("Amount")&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].Amount)&&(g.Amount=this.PstDocGrid.Table[a].Amount.toString()),l.ScreenObject.GridDataColumns.Contains("CommonNarration")?g.CommonNarration=this.PstDocGrid.Table[a].CommonNarration.toString():null!=(D=l.ScreenObject._StaticFields.find(C=>"commonnarration"==C.DBColumnName.toLowerCase()))&&D instanceof T.Dw&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].CommonNarration)&&(D.Text=this.PstDocGrid.Table[a].CommonNarration.toString()),l.ScreenObject.GridDataColumns.Contains("LineNarration")&&(g.LineNarration=this.PstDocGrid.Table[a].LineNarration.toString()),l.ScreenObject.GridDataColumns.Contains("ChequeNumber")?g.ChequeNumber=this.PstDocGrid.Table[a].ChequeNumber.toString():null!=(D=l.ScreenObject._StaticFields.find(y=>"chequenumber"==y.DBColumnName.toLowerCase()))&&D instanceof T.Dw&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].chequenumber)&&(D.Text=this.PstDocGrid.Table[a].chequenumber.toString()),l.ScreenObject.GridDataColumns.Contains("ChequeMaturityDate")?g.ChequeMaturityDate=this.PstDocGrid.Table[a].ChequeMaturityDate.toString():null!=(D=l.ScreenObject._StaticFields.find(y=>"chequematuritydate"==y.DBColumnName.toLowerCase()))&&D instanceof P.P6&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].ChequeMaturityDate)&&(D.Date=r.J0.ParseDate(this.PstDocGrid.Table[a].ChequeMaturityDate.toString())),l.ScreenObject.GridDataColumns.Contains("ChequeDate")&&(g.ChequeDate=this.PstDocGrid.Table[a].ChequeDate.toString()),e.Tables[1].find(C=>C.CostCenterID==u[0].OnDiscount.toString()&&C.SysColumnName==u[0].DiscountCommisionFld.toString()).length>0&&(this.PstDocGrid.Table[a].Commission.toString().Replace(",",""),l.ScreenObject.GridDataColumns.Contains(u[0].DiscountCommisionFld.toString())&&!r.J0.IsEmpty(this.PstDocGrid.Table[a].Commission)&&(g[u[0].DiscountCommisionFld.toString()]=this.PstDocGrid.Table[a].Commission.toString().Replace(",","")),l.ScreenObject.GridDataColumns.Contains(u[0].DiscountInterestFld.toString())&&""!=this.PstDocGrid.Table[a].Interest.toString().Replace(",","")&&(g[u[0].DiscountInterestFld.toString()]=this.PstDocGrid.Table[a].Interest.toString().Replace(",","")));for(let C=0;C<this.PstDocGrid.TableColumns.length;C++)if(this.PstDocGrid.TableColumns[C].toLowerCase().Contains("alpha")&&!r.J0.IsEmpty(this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]]))l.ScreenObject.GridDataColumns.Contains(this.PstDocGrid.TableColumns[C])?g[this.PstDocGrid.TableColumns[C]]=this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]].toString():null!=(D=l.ScreenObject._TextFields.find(B=>B.DBColumnName.toLowerCase()==this.PstDocGrid.TableColumns[C].toLowerCase()))&&l.ScreenObject.fillcontrolValue(D,this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]].toString());else if(this.PstDocGrid.TableColumns[C].toLowerCase().Contains("dcccnid")&&""!=this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]].toString()&&parseInt(this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]].toString())>1)if(l.ScreenObject.GridDataColumns.Contains(this.PstDocGrid.TableColumns[C]))g[this.PstDocGrid.TableColumns[C]+"_Key"]=this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]].toString();else{var D;null!=(D=l.ScreenObject._CCFields.find(B=>B.DBColumnName.toLowerCase()==this.PstDocGrid.TableColumns[C].toLowerCase()))&&D instanceof b.y$&&""!=this.PstDocGrid.Table[a].ChequeMaturityDate.toString()&&(D.SelectedValue=parseInt(this.PstDocGrid.Table[a][this.PstDocGrid.TableColumns[C]].toString()))}if(l.ScreenObject.GridData.InsertAt(g,0),l.CalculateTotals(g,!1),l.IsAutoPost=!0,l.DisplayMessage="",l.SaveAccountingDocument("Save"),""!=l.DisplayMessage)return this.DisplayMessage=l.DisplayMessage,this.MessageVisibility=!0,"";n+='<ROWS><Documents  Action="'+this.Filter+'" AccID="'+this.PstDocGrid.Table[a].AccDocDetailsID.toString()+'" DocID="'+this.PstDocGrid.Table[a].DocID.toString()+'" CostcenterID="'+this.PstDocGrid.Table[a].CostCenterID.toString()+'"></Documents>'+l.AutoPOstXML+"</ROWS>"}}}else n+='<ROWS><Documents  Action="'+this.Filter+'" AccID="'+this.PstDocGrid.Table[a].AccDocDetailsID.toString()+'" DocID="'+this.PstDocGrid.Table[a].DocID.toString()+'" CostcenterID="'+this.PstDocGrid.Table[a].CostCenterID.toString()+'"></Documents></ROWS>';this.CheckedCnt++}return n+="</PDR>",Logger.InfoLog("ChequeDiscPostedDocumentViewModel ::Exiting GetPDReceiptXML"),n.toString()}}}}]);
"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[35,511,2416,2892,5749,6740,8130],{2892:(_,f,h)=>{h.d(f,{s:()=>o});var e=h(41360),D=h(32881);function b(a,l){if(1&a){const s=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(s);const g=e.XpG().$implicit;return e.Njj(g.OnButtonClick("Level"))}),e.nrm(1,"i",10),e.k0s()}if(2&a){const s=e.XpG().$implicit;e.xc7("background-color",s.BgColor),e.FS9("title",s.ModifiedBy)}}function p(a,l){if(1&a){const s=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(s);const g=e.XpG().$implicit;return e.Njj(g.OnButtonClick("Level"))}),e.EFF(1,"X"),e.k0s()}if(2&a){const s=e.XpG().$implicit;e.xc7("background-color",s.BgColor),e.FS9("title",s.ModifiedBy)}}function i(a,l){if(1&a){const s=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(s);const g=e.XpG().$implicit;return e.Njj(g.OnButtonClick("Level"))}),e.EFF(1),e.k0s()}if(2&a){const s=e.XpG().$implicit;e.xc7("background-color",s.BgColor),e.FS9("title",s.ModifiedBy),e.R7$(),e.JRh(s.Label)}}function C(a,l){if(1&a&&(e.j41(0,"div",4),e.EFF(1,"\n        "),e.j41(2,"div",5),e.EFF(3,"\n            "),e.nrm(4,"div",6),e.EFF(5,"\n            "),e.DNE(6,b,2,3,"span",7),e.EFF(7,"\n            "),e.DNE(8,p,2,3,"span",7),e.EFF(9,"\n            "),e.DNE(10,i,2,4,"span",7),e.EFF(11,"\n            \n            "),e.nrm(12,"div",6),e.EFF(13,"\n        "),e.k0s(),e.EFF(14,"\n        "),e.j41(15,"label",8),e.EFF(16),e.k0s(),e.EFF(17,"\n    "),e.k0s()),2&a){const s=l.$implicit;e.R7$(4),e.xc7("background-color",s.LeftLineBrush),e.R7$(2),e.Y8G("ngIf",s.IsApproved),e.R7$(2),e.Y8G("ngIf",s.IsRejected),e.R7$(2),e.Y8G("ngIf",!s.IsRejected&&!s.IsApproved),e.R7$(2),e.xc7("background-color",s.RightLineBrush),e.R7$(3),e.FS9("title",s.LevelName),e.R7$(),e.JRh(s.LevelName)}}function I(a,l){if(1&a&&(e.j41(0,"div",2),e.EFF(1,"\n    "),e.DNE(2,C,18,9,"div",3),e.EFF(3,"\n"),e.k0s()),2&a){const s=e.XpG();e.R7$(2),e.Y8G("ngForOf",s.WFDocLevelList)}}function A(a,l){if(1&a){const s=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(s);const g=e.XpG().$implicit;return e.Njj(g.OnButtonClick("Level"))}),e.nrm(1,"i",10),e.k0s()}if(2&a){const s=e.XpG().$implicit;e.xc7("background-color",s.BgColor),e.FS9("title",s.ModifiedBy)}}function r(a,l){if(1&a){const s=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(s);const g=e.XpG().$implicit;return e.Njj(g.OnButtonClick("Level"))}),e.EFF(1,"X"),e.k0s()}if(2&a){const s=e.XpG().$implicit;e.xc7("background-color",s.BgColor),e.FS9("title",s.ModifiedBy)}}function t(a,l){if(1&a){const s=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(s);const g=e.XpG().$implicit;return e.Njj(g.OnButtonClick("Level"))}),e.EFF(1),e.k0s()}if(2&a){const s=e.XpG().$implicit;e.xc7("background-color",s.BgColor),e.FS9("title",s.ModifiedBy),e.R7$(),e.JRh(s.Label)}}function d(a,l){if(1&a&&(e.j41(0,"div",13),e.EFF(1,"\n        "),e.j41(2,"div",14),e.EFF(3,"\n            "),e.nrm(4,"div",15),e.EFF(5,"\n            "),e.DNE(6,A,2,3,"span",7),e.EFF(7,"\n            "),e.DNE(8,r,2,3,"span",7),e.EFF(9,"\n            "),e.DNE(10,t,2,4,"span",7),e.EFF(11,"\n            "),e.nrm(12,"div",15),e.EFF(13,"\n        "),e.k0s(),e.EFF(14,"\n        "),e.j41(15,"label",16),e.EFF(16),e.k0s(),e.EFF(17,"\n    "),e.k0s()),2&a){const s=l.$implicit;e.R7$(4),e.xc7("background-color",s.LeftLineBrush),e.R7$(2),e.Y8G("ngIf",s.IsApproved),e.R7$(2),e.Y8G("ngIf",s.IsRejected),e.R7$(2),e.Y8G("ngIf",!s.IsRejected&&!s.IsApproved),e.R7$(2),e.xc7("background-color",s.RightLineBrush),e.R7$(3),e.FS9("title",s.LevelName),e.R7$(),e.JRh(s.LevelName)}}function n(a,l){if(1&a&&(e.j41(0,"div",11),e.EFF(1,"\n    "),e.DNE(2,d,18,9,"div",12),e.EFF(3,"\n"),e.k0s()),2&a){const s=e.XpG();e.R7$(2),e.Y8G("ngForOf",s.WFDocLevelList)}}let o=(()=>{class a{constructor(){this.IsRental=!1}ngOnInit(){}static{this.\u0275fac=function(c){return new(c||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-wflevel-view"]],inputs:{WFDocLevelList:"WFDocLevelList",IsRental:"IsRental"},standalone:!1,decls:3,vars:2,consts:[["style","display: inline-flex;margin:auto;",4,"ngIf"],["style","display: inline-flex;margin:auto; width: 100%;",4,"ngIf"],[2,"display","inline-flex","margin","auto"],["class","wfview",4,"ngFor","ngForOf"],[1,"wfview"],[2,"display","flex"],[1,"line"],[3,"title","background-color","click",4,"ngIf"],[3,"title"],[3,"click","title"],[1,"fa-light","fa-circle-check",2,"font-size","21px","margin-left","-8px","margin-top","-2px"],[2,"display","inline-flex","margin","auto","width","100%"],["class","wfview","style","width: 100%;",4,"ngFor","ngForOf"],[1,"wfview",2,"width","100%"],[2,"display","flex","flex-direction","row"],[1,"line",2,"width","50% !important"],[2,"width","100% !important",3,"title"]],template:function(c,g){1&c&&(e.DNE(0,I,4,1,"div",0),e.EFF(1,"\n\n"),e.DNE(2,n,4,1,"div",1)),2&c&&(e.Y8G("ngIf",!g.IsRental),e.R7$(2),e.Y8G("ngIf",g.IsRental))},dependencies:[D.Sq,D.bT],styles:[".wfview[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wfview[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:2px;width:20px;margin:auto}.wfview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:22px;width:22px;border-radius:50%;color:#404756;border:solid 1px #707070;display:inline-block;padding-left:7px;padding-top:2px;font-weight:700}.wfview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{border:solid 2px var(--base-color);padding-left:6px;padding-top:1px}.wfview[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px!important;flex-direction:column;text-align:center;font-weight:700;text-overflow:ellipsis;width:60px;overflow:hidden}"]})}}return a})()},70061:(_,f,h)=>{h.d(f,{d:()=>I});var e=h(89211),D=h(29702),b=h(99393),p=h(5349),i=h(9659),C=h(66148);class I{get angularGrid(){return this.AssignGridObj.angularGrid}get AssignGrid(){return this.AssignGridObj.Table}get AssignGridColumns(){return this.AssignGridObj.TableColumns}get AssignGridColumnSource(){return this.AssignGridObj.Columns}QuickAssignGrid_1(r,t,d){this.SessionManager=i.d.SessionManager,this.CostCenterID=r,this.IsGroup=d,this.ScreenData=t,this.InitAssignGrid()}constructor(){this.AssignMapDimension=0,this.IsEdit=!1,this.AssignMapLabel="",this.dtDim=[],this.SelectAll=new e.c(0),this.AssignGridObj=new D.vv,this.SelectAllVisible=!1,this.SelectAllData=[],this.SessionManager=i.d.SessionManager}InitAssignGrid(){this.AssignMapVisible=!1;let r=null;r=i.d.common.GetDataSet("QASG001",""),this.dtDim=r.Tables[0];let t=[];if(t=3==this.CostCenterID?this.ScreenData.Tables[10].filter(d=>"EnableAssignMapInQuickAdd"==d.Name):this.ScreenData.Tables[5].filter(d=>"EnableAssignMapInQuickAdd"==d.Name),t.length>0&&t[0].Value.toString().length>0){this.AssignMapLabel="",this.EnableAssign=this.EnableMap=!1;let d=new C.VB;if(d.LoadXml(t[0].Value.toString()),"1"==d.DocumentElement.attributes.EnableAssign.value&&(this.AssignMapLabel="Assign",this.EnableAssign=!0),"1"==d.DocumentElement.attributes.EnableMap.value&&(this.AssignMapLabel.length>0&&(this.AssignMapLabel=this.AssignMapLabel+" / "),this.AssignMapLabel=this.AssignMapLabel+"Map",this.EnableMap=!0),this.AssignMapLabel.length>0){this.AssignMapVisible=!0,null!=d.DocumentElement.attributes.Dimension&&(this.AssignMapDimensionList=C.J0.String(d.DocumentElement.attributes.Dimension.value).split(","),null!=this.AssignMapDimensionList&&1==this.AssignMapDimensionList.length&&(this.AssignMapDimension=parseInt(this.AssignMapDimensionList[0]))),this.AssignGridObj=new D.vv,this.AssignGridObj.Width="",this.AssignGridObj.CanUserAddRows=!0,this.AssignGridObj.CanUserDeleteRows=!0,this.AssignGridObj.Table=[],this.EnableAssign&&this.EnableMap&&this.AssignGridObj.TableColumns.push("Action"),0==this.AssignMapDimension&&this.AssignGridObj.TableColumns.push("CostCenterID"),this.AssignGridObj.TableColumns.push("NodeID"),this.AssignGridObj.TableColumns.push("NodeID_Key"),this.AssignGridObj.TableColumns.push("StyleHeightZero");let n,o=[];if(this.EnableAssign&&this.EnableMap){n=new b.O7,n.Header=this.SessionManager.translate.instant("Service_Action"),n.ValueBinding="Action",n.DataType="ComboBox",n.DisplayMember="Name",n.ValueMember="Value",n.Width=100;let a=[];a.push(p._p.ComboBoxItems_2("Assign","1")),a.push(p._p.ComboBoxItems_2("Map","2")),n.ComboData=a,o.push(n)}if(0==this.AssignMapDimension){n=new b.O7,n.Header=this.SessionManager.translate.instant("DocumentDesigner_CostCenter"),n.ValueBinding="CostCenterID",n.DataType="ComboBox",n.DisplayMember="Name",n.ValueMember="Value",n.Width=80;let a=[];this.dtDim.forEach(l=>{a.push(p._p.ComboBoxItems_2(l.Name.toString(),l.FeatureID.toString()))}),(!this.IsGroup&&i.d.SessionManager.Preferences.ContainsKey("Dimension List")&&i.d.SessionManager.Preferences["Dimension List"].split(",").Contains(this.CostCenterID.toString())||this.IsGroup&&i.d.SessionManager.Preferences.ContainsKey("DimensionGroup List")&&i.d.SessionManager.Preferences["DimensionGroup List"].split(",").Contains(this.CostCenterID.toString()))&&a.push(p._p.ComboBoxItems_2("Users","7")),n.ComboData=a,o.push(n)}n=new b.O7,n.Header="Data",n.DataType="LISTBOX",n.DisplayMember="NodeID",n.TypeID=1,n.CostCenterID=this.AssignMapDimension,n.Width=this.EnableAssign&&this.EnableMap&&0==this.AssignMapDimension?200:this.EnableAssign&&this.EnableMap?255:0==this.AssignMapDimension?225:305,o.push(n),this.AssignGridObj.Columns=o;for(let a=0;a<8;a++)this.AssignGridObj.Table.push({});this.AssignGridObj.BeginEdit.Subscribe(this,"OnBeginEdit"),1==this.AssignGridObj.Columns.length&&this.EnableAssign?(this.SelectAllVisible=!0,this.SelectAll.CheckedChangedCommand.Subscribe(this,"onCheckedChanged"),this.SelectAll.Label="Select All"):this.SelectAllVisible=!1,this.Clear()}}}OnBeginEdit(r){return"DataGridPactListBoxColumn"==r.args.column.className&&this.AssignGridObj.TableColumns.Contains("CostCenterID")&&(""!=r.args.item.CostCenterID.toString()?(r.args.column.editor.collection.CCID=parseInt(r.args.item.CostCenterID.toString()),r.args.column.editor.collection.TypeID=1):r.args.column.editor.collection.CCID=0),!1}onCheckedChanged(r){this.SelectAll.IsChecked&&1==this.AssignGridObj.Columns.length&&this.AssignGridObj.Columns[0].CostCenterID>5e4&&(this.SelectAllData=i.d.common.GetDataSet("QASG002",this.AssignGridObj.Columns[0].CostCenterID.toString()),this.SelectAllData&&(this.AssignGridObj.Table=[],this.SelectAllData.forEach(t=>{let d=i.d.slick.emptyObj();d.NodeID=t.Name,d.NodeID_Key=t.NodeID,this.AssignGridObj.Table.push(d)})))}Clear(){if(this.IsEdit=!1,this.AssignMapVisible){this.AssignGridObj.Table.Clear();for(let t=0;t<10;t++)this.AssignGridObj.addEmptyRow();let r=0;"True"==i.d.SessionManager.Preferences.EnableLocationWise.toString()&&i.d.SessionManager.LocationID>0&&50002!=this.CostCenterID&&(this.EnableAssign&&(2==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Accounts"].toUpperCase()||3==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Products"].toUpperCase()||this.CostCenterID>5e4&&i.d.SessionManager.Preferences.LocationWiseDimension.split(",").Contains(this.CostCenterID.toString())||94==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Tenants"].toUpperCase())&&(0==this.AssignMapDimension||50002==this.AssignMapDimension)&&(0==this.AssignMapDimension&&(this.AssignGridObj.Table[r].CostCenterID=50002),this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[r].Action=1),this.AssignGridObj.Table[r].NodeID_Key=i.d.SessionManager.LocationID,this.AssignGridObj.Table[r].NodeID=i.d.SessionManager.LocationName,r++),this.EnableMap&&50002==this.AssignMapDimension&&(this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[r].Action=2),this.AssignGridObj.Table[r].NodeID_Key=i.d.SessionManager.LocationID,this.AssignGridObj.Table[r].NodeID=i.d.SessionManager.LocationName,r++)),"True"==i.d.SessionManager.Preferences.EnableDivisionWise.toString()&&i.d.SessionManager.DivisionID>0&&50001!=this.CostCenterID&&(this.EnableAssign&&(2==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Accounts"].toUpperCase()||3==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Products"].toUpperCase()||this.CostCenterID>5e4&&i.d.SessionManager.Preferences.DivisionWiseDimension.split(",").Contains(this.CostCenterID.toString())||94==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Tenants"].toUpperCase())&&(0==this.AssignMapDimension||50001==this.AssignMapDimension)&&(0==this.AssignMapDimension&&(this.AssignGridObj.Table[r].CostCenterID=50001),this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[r].Action=1),this.AssignGridObj.Table[r].NodeID_Key=i.d.SessionManager.DivisionID,this.AssignGridObj.Table[r].NodeID=i.d.SessionManager.DivisionName,r++),this.EnableMap&&50001==this.AssignMapDimension&&(this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[r].Action=2),this.AssignGridObj.Table[r].NodeID_Key=i.d.SessionManager.DivisionID,this.AssignGridObj.Table[r].NodeID=i.d.SessionManager.DivisionName,r++))}}LoadGrid(r,t){if(this.IsEdit=!0,!this.AssignMapVisible)return;let d="1"==i.d.SessionManager.RoleID||"1"==i.d.SessionManager.UserID||"True"!=i.d.SessionManager.Preferences.EnableLocationWise.toString(),n=i.d.SessionManager.LocationWhere.split(",");if(50002==this.AssignMapDimension&&"True"==i.d.SessionManager.Preferences.EnableLocationWise.toString()&&i.d.SessionManager.LocationID>0&&(this.EnableAssign&&(this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[0].Action=null),this.AssignGridObj.Table[0].NodeID_Key=null,this.AssignGridObj.Table[0].NodeID=null),this.EnableMap)){let l=this.EnableAssign?1:0;this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[l].Action=null),this.AssignGridObj.Table[l].NodeID_Key=null,this.AssignGridObj.Table[l].NodeID=null}let a,o=0;if(this.EnableAssign&&t.forEach(l=>{a=parseInt(l.CostCenterId),(0==this.AssignMapDimension||a==this.AssignMapDimension)&&(this.AssignGridObj.Table.length<=o+2&&this.AssignGridObj.Table.push({}),this.AssignGridObj.TableColumns.Contains("CostCenterID")&&(this.AssignGridObj.Table[o].CostCenterID=l.CostCenterId),this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[o].Action="1"),this.AssignGridObj.Table[o].NodeID_Key=l.NodeID,this.AssignGridObj.Table[o].NodeID=l.Value,50002==a&&!d&&!n.Contains(l.NodeID.toString())&&(this.AssignGridObj.Table[o].StyleHeightZero=1),o++)}),this.EnableMap){let l=i.d.inventory.GetCostCenterDetails(this.CostCenterID,r,2,this.AssignMapDimension);null!=l&&l.Tables.length>0&&l.Columns[0].Contains("NodeID")&&l.Tables[0].forEach(s=>{a=parseInt(s.CCID),this.AssignGridObj.Table.length<=o+2&&this.AssignGridObj.Table.push({}),this.AssignGridObj.TableColumns.Contains("CostCenterID")&&(this.AssignGridObj.Table[o].CostCenterID=s.CCID),this.AssignGridObj.TableColumns.Contains("Action")&&(this.AssignGridObj.Table[o].Action="2"),this.AssignGridObj.Table[o].NodeID_Key=s.NodeID,this.AssignGridObj.Table[o].NodeID=s.Value,50002==a&&!d&&!n.Contains(s.NodeID.toString())&&(this.AssignGridObj.Table[o].StyleHeightZero=1),o++})}}GetXML(r){r.strXML="";let d,t="";if(!this.AssignMapVisible){if(!this.IsEdit){if("TRUE"==i.d.SessionManager.Preferences.EnableLocationWise.toUpperCase()&&50002!=this.CostCenterID&&(2==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Accounts"].toUpperCase()||3==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Products"].toUpperCase()||this.CostCenterID>5e4&&i.d.SessionManager.Preferences.LocationWiseDimension.split(",").Contains(this.CostCenterID.toString())||94==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Tenants"].toUpperCase())){if(!(i.d.SessionManager.LocationID>0))return"Please login with location to create dimension.";t+="<Row ",t+=' CostCenterId="50002"',t+=' NodeID="'+i.d.SessionManager.LocationID.toString()+'"',t+="/>"}if("TRUE"==i.d.SessionManager.Preferences.EnableDivisionWise.toUpperCase()&&50001!=this.CostCenterID&&(2==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Accounts"].toUpperCase()||3==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Products"].toUpperCase()||this.CostCenterID>5e4&&i.d.SessionManager.Preferences.DivisionWiseDimension.split(",").Contains(this.CostCenterID.toString())||94==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Tenants"].toUpperCase())){if(!(i.d.SessionManager.DivisionID>0))return"Please login with division to create dimension.";t+="<Row ",t+=' CostCenterId="50001"',t+=' NodeID="'+i.d.SessionManager.DivisionID.toString()+'"',t+="/>"}"1"!=i.d.SessionManager.UserID&&(this.CostCenterID>5e4||7==this.CostCenterID)&&(!this.IsGroup&&i.d.SessionManager.Preferences["Dimension List"].split(",").Contains(this.CostCenterID.toString())||this.IsGroup&&i.d.SessionManager.Preferences["DimensionGroup List"].split(",").Contains(this.CostCenterID.toString()))&&(t+="<Row ",t+=' CostCenterId="7"',t+=' NodeID="'+i.d.SessionManager.UserID+'"',t+="/>"),t.length>0&&(t="<XML>"+t,t+="</XML>")}return r.strXML=t.toString(),""}if(d=this.EnableAssign&&this.EnableMap?"ASSIGN/MAP":this.EnableAssign?"ASSIGN":"MAP",t+='<ASSIGNMAPXML Dimension="'+this.AssignMapDimension+'" Action="'+d+'">',this.EnableAssign&&this.EnableMap){let n=this.AssignGridObj.Table;n=n.filter(o=>"1"==o.Action),t+="<ASSIGN>",t+=this.GetRowXML(n),"1"!=i.d.SessionManager.UserID&&(this.CostCenterID>5e4||7==this.CostCenterID)&&(!this.IsGroup&&i.d.SessionManager.Preferences["Dimension List"].split(",").Contains(this.CostCenterID.toString())||this.IsGroup&&i.d.SessionManager.Preferences["DimensionGroup List"].split(",").Contains(this.CostCenterID.toString()))&&(n=n.filter(o=>7==o.CostCenterID&&o.NodeID_Key>i.d.SessionManager.UserID),0==n.length&&(t+="<R ",t+=' CCID="7"',t+=' ID="'+i.d.SessionManager.UserID+'"',t+="/>")),t+="</ASSIGN>",n=this.AssignGridObj.Table,n=n.filter(o=>"2"==o.Action),t+="<MAP>",t+=this.GetRowXML(n),t+="</MAP>"}else if(this.EnableAssign){if(t+="<ASSIGN>",t+=this.GetRowXML(this.AssignGridObj.Table),"1"!=i.d.SessionManager.UserID&&(this.CostCenterID>5e4||7==this.CostCenterID)&&(!this.IsGroup&&i.d.SessionManager.Preferences["Dimension List"].split(",").Contains(this.CostCenterID.toString())||this.IsGroup&&i.d.SessionManager.Preferences["DimensionGroup List"].split(",").Contains(this.CostCenterID.toString()))){let n=this.AssignGridObj.Table;n=n.filter(o=>7==o.CostCenterID&&o.NodeID_Key>i.d.SessionManager.UserID),0==n.length&&(t+="<R ",t+=' CCID="7"',t+=' ID="'+i.d.SessionManager.UserID+'"',t+="/>")}t+="</ASSIGN>"}else this.EnableMap&&(t+="<MAP>",t+=this.GetRowXML(this.AssignGridObj.Table),t+="</MAP>");if(t+="</ASSIGNMAPXML>","TRUE"==i.d.SessionManager.Preferences.EnableLocationWise.toUpperCase()&&50002!=this.CostCenterID){let n=[];if(this.EnableAssign&&this.EnableMap?n=this.AssignGridObj.Table.filter(o=>"1"==o.Action&&50002==o.CostCenterID&&null!=o.NodeID_Key&&o.NodeID_Key>0):this.EnableAssign&&(50002==this.AssignMapDimension?n=this.AssignGridObj.Table.filter(o=>null!=o.NodeID_Key&&o.NodeID_Key>0):this.AssignGridObj.TableColumns.Contains("CostCenterID")&&(n=this.AssignGridObj.Table.filter(o=>50002==o.CostCenterID&&null!=o.NodeID_Key&&o.NodeID_Key>0))),(2==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Accounts"].toUpperCase()||3==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Products"].toUpperCase()||this.CostCenterID>5e4&&i.d.SessionManager.Preferences.LocationWiseDimension.split(",").Contains(this.CostCenterID.toString())||94==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["LW Tenants"].toUpperCase())&&0==n.length)return"Please Assign atleast one Location"}if("TRUE"==i.d.SessionManager.Preferences.EnableDivisionWise.toUpperCase()&&50001!=this.CostCenterID){let n=[];if(this.EnableAssign&&this.EnableMap?n=this.AssignGridObj.Table.filter(o=>"1"==o.Action&&50001==o.CostCenterID&&null!=o.NodeID_Key&&o.NodeID_Key>0):this.EnableAssign&&(50001==this.AssignMapDimension?n=this.AssignGridObj.Table.filter(o=>null!=o.NodeID_Key&&o.NodeID_Key>0):this.AssignGridObj.TableColumns.Contains("CostCenterID")&&(n=this.AssignGridObj.Table.filter(o=>50001==o.CostCenterID&&null!=o.NodeID_Key&&o.NodeID_Key>0))),(2==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Accounts"].toUpperCase()||3==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Products"].toUpperCase()||this.CostCenterID>5e4&&i.d.SessionManager.Preferences.DivisionWiseDimension.split(",").Contains(this.CostCenterID.toString())||94==this.CostCenterID&&"TRUE"==i.d.SessionManager.Preferences["DW Tenants"].toUpperCase())&&0==n.length)return"Please Assign atleast one Division"}if(null!=this.AssignMapDimensionList&&this.AssignMapDimensionList.length>0){let n="";if(this.AssignMapDimensionList.forEach(o=>{if(!C.J0.IsEmpty(o)&&this.CostCenterID!=parseInt(o)){let a=this.dtDim.find(s=>s.FeatureID==o),l=[];this.EnableAssign&&this.EnableMap?l=this.AssignGridObj.Table.filter(s=>"1"==s.Action&&s.CostCenterID==o&&null!=s.NodeID_Key&&s.NodeID_Key>0):this.EnableAssign&&(l=this.AssignGridObj.TableColumns.Contains("CostCenterID")?this.AssignGridObj.Table.filter(s=>s.CostCenterID==o&&null!=s.NodeID_Key&&s.NodeID_Key>0):this.AssignGridObj.Table.filter(s=>null!=s.NodeID_Key&&s.NodeID_Key>0)),parseInt(o)>5e4&&0==l.length&&(n+=0==n.length?C.J0.String(a.Name):", "+C.J0.String(a.Name))}}),!C.J0.IsEmpty(n))return"Please Assign at least one "+n}return r.strXML=t.toString(),""}GetRowXML(r){let t="",d=r;return d.length>0&&(d=d.ToTable(!0,0==this.AssignMapDimension?["CostCenterId","NodeID","NodeID_Key"]:["NodeID","NodeID_Key"]),d.forEach(n=>{n.NodeID_Key&&n.NodeID_Key.toString().length>0&&(t+='<R CCID="',t+=0==this.AssignMapDimension?n.CostCenterID.toString():this.AssignMapDimension,t+='" ID="'+n.NodeID_Key.toString()+'"/>')})),t.toString()}}}}]);
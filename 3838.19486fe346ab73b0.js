"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[3838],{31457:(c,h,o)=>{o.r(h),o.d(h,{ViewAddMulitpleUnitsViewModel:()=>O});var r=o(32040),l=o(43767),u=o(98580),d=o(21774),U=o(7321);class O extends u.g{get dtUints(){return this.dtUintsObj.Table}get ColumnSource(){return this.dtUintsObj.Columns}constructor(s,e){super(),this.dtUintsObj=new U.vv,Logger.InfoLog("ViewAddMulitpleUnitsViewModel::Entering ViewAddMulitpleUnitsViewModel"),this.Parent=e,this.ProductID=s,this.GenerateTable(),Logger.InfoLog("ViewAddMulitpleUnitsViewModel::Exiting ViewAddMulitpleUnitsViewModel")}OnClickCancel(s){r.d.page.HideDialog(this.PopUpGUID)}OnClickOk(s){try{Logger.InfoLog("ViewAddMulitpleUnitsViewModel::Entering OnClickOk");let e=0;if(this.dtUints.length>0){let a=0;for(let t=0;t<this.dtUints.length;t++)if(e=0,l.J0.IsNum(this.dtUints[t].Qty.toString())&&parseFloat(this.dtUints[t].Qty.toString())>0){let i;if(e=l.J0.DoubleTryParse(this.dtUints[t].Qty.toString()),0==a)i=this.Parent.SelectedRow,i.Quantity=l.J0.String(this.dtUints[t].Qty),i.Unit_Key=l.J0.String(this.dtUints[t].UOMID),i.Unit=l.J0.String(this.dtUints[t].UnitName);else{i=this.Parent.ScreenObject.GridDataObj.NewRow(),this.Parent.ScreenObject.GridData.InsertAt(i,this.Parent.ScreenObject.GridData.indexOf(this.Parent.SelectedRow));for(let n=0;n<this.Parent.ScreenObject.GridDataColumns.length;n++)"docseqno"!=this.Parent.ScreenObject.GridDataColumns[n].toLowerCase()&&"sno"!=this.Parent.ScreenObject.GridDataColumns[n].toLowerCase()&&"LinkedInvDocDetailsID"!=this.Parent.ScreenObject.GridDataColumns[n].toLowerCase()&&"LinkedFieldName"!=this.Parent.ScreenObject.GridDataColumns[n].toLowerCase()&&"RefNO"!=this.Parent.ScreenObject.GridDataColumns[n].toLowerCase()&&"docdetailsid"!=this.Parent.ScreenObject.GridDataColumns[n].toLowerCase()&&(i[n]=this.Parent.SelectedRow[n]);i.Quantity=l.J0.String(this.dtUints[t].Qty),i.Unit_Key=l.J0.String(this.dtUints[t].UOMID),i.Unit=l.J0.String(this.dtUints[t].UnitName)}a++,this.Parent.OnProductUnitChange(i),this.Parent.CalculateTotals(i,!1)}this.Parent.ScreenObject.UpdateSequence()}r.d.page.HideDialog(this.PopUpGUID)}catch{}finally{Logger.InfoLog("ViewAddMulitpleUnitsViewModel::Exiting OnClickOk")}}GenerateTable(){let s=[];s=r.d.inventory.GetProductUOM(this.ProductID);let e=new d.O7;e.Header=r.d.GetResource("UOM_Sno"),e.DisplayMember="SNO",e.DataType="TextBlock",e.ReadOnly=!0,e.Width=50,e.DisableTab=!0,this.ColumnSource.push(e),this.dtUintsObj.TableColumns.push("SNO"),e=new d.O7,e.Header=r.d.GetResource("UnitName"),e.DisplayMember="UnitName",e.DataType="TextBlock",e.ReadOnly=!0,e.Width=100,e.DisableTab=!0,this.ColumnSource.push(e),this.dtUintsObj.TableColumns.push("UnitName"),e=new d.O7,e.Header=r.d.GetResource("Conversion"),e.DisplayMember="Conversion",e.DataType="TextBlock",e.ReadOnly=!0,e.Width=100,e.DisableTab=!0,this.ColumnSource.push(e),this.dtUintsObj.TableColumns.push("Conversion"),e=new d.O7,e.Header=r.d.GetResource("Qty"),e.DisplayMember="Qty",e.DataType="TextBlock",e.ReadOnly=!1,e.Width=150,e.DisableTab=!0,this.ColumnSource.push(e),this.dtUintsObj.TableColumns.push("Qty"),this.dtUintsObj.TableColumns.push("UOMID");for(let a=0;a<s.Tables[0].length;a++){let t=this.dtUintsObj.NewRow();t.SNO=a+1,t.UOMID=s.Tables[0][a].UOMID,t.UnitName=s.Tables[0][a].UnitName,t.Conversion=s.Tables[0][a].Conversion,t.Qty=0,this.dtUintsObj.addRow(t)}}}}}]);
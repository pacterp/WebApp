"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[364],{17983:(B,g,d)=>{d.r(g),d.d(g,{GenerateBillsViewModel:()=>P});var f=d(74523),c=d(32040),r=d(43767),C=d(54581),I=d(98580),b=d(27730),V=d(84151),O=d(23458),S=d(82503),M=d(7321),u=d(21774),T=d(31884),p=d(11592),y=d(5109);class P extends I.g{get SelectAll(){return this._SelectAll}set SelectAll(e){e!=this._SelectAll&&(this._SelectAll=e,this.SelectUnselectAll(e))}get OnlyFirstInvs(){return this._OnlyFirstInvs}set OnlyFirstInvs(e){e!=this._OnlyFirstInvs&&(this._OnlyFirstInvs=e,this.FilterfirstInvs(e))}constructor(e){super(),this.InProgress="",this.ProgressMessage="",this.ProgressValue=0,this.ProgressWidth=0,this.ProgressMax=0,this.BasedOn=new b.y$(0),this.Status=new b.y$(0),this.Customer=new O.y$(0),this.From=new V.Dw(0),this.TO=new V.Dw(0),this.FromDate=new S.Lc(0),this.ToDate=new S.Lc(0),this.InvoiceDate=new S.Lc(0),this.TillDate=new S.Lc(0),this._SelectAll=!1,this.chkSelectAll=new p.c,this._OnlyFirstInvs=!1,this.chkOnlyFirstInvs=new p.c,this.VoucherWise=!1,this.DateWise=!1,this.rdoVoucherWise=new T.u("",0,"Doc"),this.rdoDateWise=new T.u("",0,"Doc"),this.dtpref=null,this.ShowProcessDialog=!1,this.VirtualVouchersTable=[],this.DisplayName=e,this.FromDate.Label=c.d.GetResource("DocumentDesigner_FromDate"),this.Customer.Label="Customer",this.Customer.CCID=2,this.Customer.TypeID=2,this.ToDate.Label=c.d.GetResource("DocumentDesigner_ToDate"),this.BasedOn.Label="Post Bills",this.Status.Label="Show Contracts",this.BasedOn.Items.push(b._p.ComboBoxItems_2("Contract based","0")),this.BasedOn.Items.push(b._p.ComboBoxItems_2("Customer based","1")),this.Status.Items.push(b._p.ComboBoxItems_2("Both","0")),this.Status.Items.push(b._p.ComboBoxItems_2("Pending","1")),this.Status.Items.push(b._p.ComboBoxItems_2("Invoiced","2")),this.BasedOn.SelectedValue="0",this.Status.SelectedValue="1",this.InvoiceDate.Label="Invoice Date",this.VoucherWise=!1,this.DateWise=!0,this.From.Label="From",this.TO.Label="To",this.TillDate.Label="Till Date",this.LoadGrid(),this.rdoVoucherWise.Label=c.d.GetResource("Com_HCNoWise"),this.rdoVoucherWise.CheckedChangedCommand.Subscribe(this,"onVoucherWiseCheck"),this.rdoDateWise.Label=c.d.GetResource("Com_DateWise"),this.rdoDateWise.CheckedChangedCommand.Subscribe(this,"onDateWiseCheck"),this.chkSelectAll.Label=c.d.GetResource("Selectall"),this.chkSelectAll.CheckedChangedCommand.Subscribe(this,"onSelectall"),this.chkOnlyFirstInvs.Label=c.d.GetResource("OnlyFirst"),this.chkOnlyFirstInvs.CheckedChangedCommand.Subscribe(this,"onOnlyFirstInvs"),this.ProgressWidth=1}onSelectall(e){this.SelectAll=e.IsChecked}onOnlyFirstInvs(e){this.OnlyFirstInvs=e.IsChecked}onVoucherWiseCheck(e){this.VoucherWise=e.IsChecked,this.DateWise=!1,this.rdoDateWise.IsChecked=!1,this.FromDate.Enable=!1,this.ToDate.Enable=!1,this.From.Enable=!0,this.TO.Enable=!0}onDateWiseCheck(e){this.DateWise=e.IsChecked,this.VoucherWise=!1,this.rdoVoucherWise.IsChecked=!1,this.FromDate.Enable=!0,this.ToDate.Enable=!0,this.From.Enable=!1,this.TO.Enable=!1}OnBeginEdit(e){return!r.J0.IsEmpty(e.args.item.BillNo)}LoadGrid(){this.Vouchers=new M.vv(!0),this.Vouchers.CanUserDeleteRows=!0,this.Vouchers.Table=[],this.Vouchers.OnBeginEdit.Subscribe(this,"OnBeginEdit"),this.Vouchers.TableColumns.push("Select"),this.Vouchers.TableColumns.push("Sno"),this.Vouchers.TableColumns.push("Date"),this.Vouchers.TableColumns.push("HCNo"),this.Vouchers.TableColumns.push("Customer"),this.Vouchers.TableColumns.push("Product"),this.Vouchers.TableColumns.push("BillCycle"),this.Vouchers.TableColumns.push("Price"),this.Vouchers.TableColumns.push("CustomerID"),this.Vouchers.TableColumns.push("DtBill"),this.Vouchers.TableColumns.push("BillNo"),this.Vouchers.TableColumns.push("Billdate"),this.Vouchers.TableColumns.push("TotDays"),this.Vouchers.TableColumns.push("InvDocDetailsID"),this.Vouchers.TableColumns.push("Remarks"),this.Vouchers.TableColumns.push("ProductID"),this.Vouchers.TableColumns.push("Fromdate"),this.Vouchers.TableColumns.push("Todate"),this.Vouchers.TableColumns.push("billseq");let e=new u.O7;this.Vouchers.Columns=[],e=new u.O7,e.Header="Select",e.DisplayMember="Select",e.DataType="CheckBox",e.Width=50,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Sno",e.DisplayMember="Sno",e.DataType="TextBlock",e.Width=50,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="HC Date",e.DisplayMember="Date",e.DataType="TextBlock",e.Width=80,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="HC No.",e.DisplayMember="HCNo",e.DataType="LINK",e.Click.Subscribe(this,"onHCClick"),e.Width=100,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Customer",e.DisplayMember="Customer",e.DataType="TextBlock",e.Width=200,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Product",e.DisplayMember="Product",e.DataType="TextBlock",e.Width=150,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="BillCycle",e.DisplayMember="BillCycle",e.DataType="TextBlock",e.Width=200,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Tot Days",e.DisplayMember="TotDays",e.DataType="TextBlock",e.Width=80,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Qty",e.DisplayMember="Qty",e.DataType="FLOAT",e.Width=80,e.ReadOnly=!0,e.IsVisible=!1,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Price",e.DisplayMember="Price",e.DataType="FLOAT",e.Width=70,e.DecimalPoints=c.d.SessionManager.Preferences.DecimalsinAmount,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Bill No",e.DisplayMember="BillNo",e.DataType="LINK",e.Width=100,e.ReadOnly=!0,e.Click.Subscribe(this,"onDOcClick"),this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Bill Date",e.DisplayMember="Billdate",e.Width=100,e.ReadOnly=!0,this.Vouchers.Columns.push(e),e=new u.O7,e.Header="Remarks",e.DisplayMember="Remarks",e.Width=100,e.ReadOnly=!0,this.Vouchers.Columns.push(e),this.Vouchers.SearchVisible=!0,this.Vouchers.SelectAll.Visible=!0,this.Vouchers.SearchColStartIndex=1,this.Vouchers.AddSearchCols()}onHCClick(e){var n=this;return(0,f.A)(function*(){if(null!=n.Vouchers.SelectedItem&&!r.J0.IsEmpty(n.Vouchers.SelectedItem.HCNo)){let l=0,t=c.d.report.GetDocumentDetailsByVoucherNo(n.Vouchers.SelectedItem.HCNo.toString());if(l=r.J0.Int(t.obj),l>0){let a;a=t.Tables[0].length>0?t.Tables[0][0]:t.Tables[1][0];const{AddEditDocumentComponent:i}=yield Promise.resolve().then(d.bind(d,30786)),{AddEditDocumentViewModel:s}=yield Promise.resolve().then(d.bind(d,5109));let h=new s(parseInt(a.CostCenterID),a.DocumentName.toString(),!0);h.ScreenObject.DocPrefix.ComboBox.SelectedValue=a.DocPrefix.toString(),h.ScreenObject.DocPrefix.TextBox.Text=a.DocNumber.toString(),h.OnDocPrefixChanged("lostFocus"),h.ScreenObject.FillDocumentPrefix(!0),c.d.page.addNewTab({component:i,params:{obj:h}})}}})()}onDOcClick(e){var n=this;return(0,f.A)(function*(){if(null!=n.Vouchers.SelectedItem&&!r.J0.IsEmpty(n.Vouchers.SelectedItem.BillNo)){let l=0,t=c.d.report.GetDocumentDetailsByVoucherNo(n.Vouchers.SelectedItem.BillNo.toString());if(l=r.J0.Int(t.obj),l>0){let a;a=t.Tables[0].length>0?t.Tables[0][0]:t.Tables[1][0];const{AddEditDocumentComponent:i}=yield Promise.resolve().then(d.bind(d,30786));let s=new y.AddEditDocumentViewModel(parseInt(a.CostCenterID),a.DocumentName.toString(),!0);s.ScreenObject.DocPrefix.ComboBox.SelectedValue=a.DocPrefix.toString(),s.ScreenObject.DocPrefix.TextBox.Text=a.DocNumber.toString(),s.OnDocPrefixChanged("lostFocus"),s.ScreenObject.FillDocumentPrefix(!0),c.d.page.addNewTab({component:i,params:{obj:s}})}}})()}OnButtonClick(e){if("Hide"==e)this.ShowProcessDialog=!1;else if("Generate Bills"==e)this.ProgressMessage="Resaving documents.Please wait...",this.ShowProcessDialog=!0,this.SaveCall();else if("Export"!=e&&"OK"==e){this.SelectAll=!1;let n=0,l=0;null!=this.From.Text&&r.J0.Int(this.From.Text)>0&&(n=parseInt(this.From.Text)),null!=this.TO.Text&&r.J0.Int(this.TO.Text)>0&&(l=parseInt(this.TO.Text));let t=this.GetBills(this.FromDate.Date,this.ToDate.Date,this.VoucherWise,n,l,this.TillDate.Date,this.Customer.SelectedValue);if(null!=t&&t.Tables.length>0&&t.Columns[0].Contains("ErrorMessage")&&t.Tables[0].length>0)return this.DisplayMessage=t.Tables[0][0].ErrorMessage.toString(),void(this.MessageVisibility=!0);if(null!=t&&t.Tables.length>0){let a=!1;if(t.Tables.length>1&&t.Tables[1].length>0&&t.Columns[1].Contains("Name")){if(this.dtpref=t.Tables[1],!this.Vouchers.TableColumns.Contains("Qty")){let s=this.dtpref.filter(h=>"QtyBased"==h.Name);s.length>0&&!r.J0.IsEmpty(s[0].Value)&&(0,C.yG0)(s[0].Value.toString())&&(this.Vouchers.TableColumns.push("Qty"),this.Vouchers.Columns[8].IsVisible=!0,this.Vouchers.UpdateFooter())}let i=this.dtpref.filter(s=>"InvoiceOnDelDate"==s.Name);i.length>0&&(a=(0,C.yG0)(i[0].Value.toString())),a&&!this.Vouchers.TableColumns.Contains("InvDate")&&this.Vouchers.TableColumns.push("InvDate")}this.Vouchers.Table.Clear();for(let i=0;i<t.Tables[0].length;i++){if("1"==this.Status.SelectedValue&&!r.J0.IsEmpty(t.Tables[0][i].BillNo)||"2"==this.Status.SelectedValue&&""==r.J0.String(t.Tables[0][i].BillNo))continue;let s=this.Vouchers.NewRow();s.Date=r.J0.ParseDate(t.Tables[0][i].docdate.toString()).ToString(c.d.SessionManager.Preferences["Date Format"]),s.HCNo=t.Tables[0][i].voucherno,s.Customer=t.Tables[0][i].accountname,s.CustomerID=t.Tables[0][i].debitaccount,s.Product=t.Tables[0][i].productname,s.ProductID=t.Tables[0][i].Prodid,s.Fromdate=r.J0.ParseDate(r.J0.String(t.Tables[0][i].Fromdate)),s.Todate=r.J0.ParseDate(r.J0.String(t.Tables[0][i].Todate)),s.BillCycle="from "+r.J0.ParseDate(t.Tables[0][i].Fromdate.toString()).ToString(c.d.SessionManager.Preferences["Date Format"])+"- to "+r.J0.ParseDate(t.Tables[0][i].Todate.toString()).ToString(c.d.SessionManager.Preferences["Date Format"]),r.J0.IsEmpty(t.Tables[0][i].Amount)||(s.Price=parseFloat(t.Tables[0][i].Amount.toString()).ToString("N"+c.d.SessionManager.Preferences.DecimalsinAmount));let m=r.J0.ParseDate(t.Tables[0][i].Todate.toString()).Subtract(r.J0.ParseDate(t.Tables[0][i].Fromdate.toString())).TotalDays+1;r.J0.IsEmpty(t.Tables[0][i].ExlDays)||(m-=parseInt(t.Tables[0][i].ExlDays.toString())),s.TotDays=m,s.DtBill=r.J0.ParseDate(t.Tables[0][i].Billdate.toString()),s.Billdate=r.J0.ParseDate(t.Tables[0][i].Billdate.toString()).ToString(c.d.SessionManager.Preferences["Date Format"]),s.BillNo=t.Tables[0][i].BillNo,s.InvDocDetailsID=t.Tables[0][i].InvDocDetailsID,s.Sno=(i+1).toString(),s.Select=!1,this.Vouchers.TableColumns.Contains("Qty")&&t.Columns[0].Contains("Qty")&&(s.Qty=t.Tables[0][i].Qty),this.Vouchers.TableColumns.Contains("billseq")&&t.Columns[0].Contains("billseq")&&(s.billseq=t.Tables[0][i].billseq),a&&(s.InvDate="1"==s.billseq.toString()?r.J0.ParseDate(r.J0.String(t.Tables[0][i].Fromdate)):r.J0.ParseDate(r.J0.String(t.Tables[0][i].Todate)));let o=this.dtpref.filter(D=>"OffHireDoc"==D.Name);o.length>0&&!r.J0.IsEmpty(o[0].Value)&&parseInt(o[0].Value.toString())>0&&(s.Remarks=t.Columns[0].Contains("isoffhire")&&!r.J0.IsEmpty(t.Tables[0][i].isoffhire)&&(0,C.yG0)(t.Tables[0][i].isoffhire.toString())?"Off Hire":"Hire cont."),this.Vouchers.addRow(s)}this.VirtualVouchersTable=this.Vouchers.Table,this.FilterfirstInvs(this.OnlyFirstInvs)}}}GetExportHTML(){let e="",n="";e+="<html><meta charset='utf-8' /><body style='color:blac;background-color:white;'>",n+=".hdr{text-align:cente; padding:5px; background-color:#4F81BD;color:white;font-family:Arial;font-size:11pt} ",n+=".grp{padding:2p; background-color:#87CEEB; color:#FFFCF7;font-family:arial; font-size:10pt;}",n+=".tot{background-color:whit; color:red;font-family:arial; font-weight:bold; font-size:8pt;}",n+=".alt{background-color:whitesmok; color:black; font-family:arial; font-size:9pt; align:right;}",e+="<style>"+n.toString()+"</style>";let t=0;for(let i=0;i<this.Vouchers.Columns.length;i++)t+=this.Vouchers.Columns[i].Width;e+="<table>",e+="\r\n<tr><td align='center'><h2>",e+=c.d.SessionManager.CompanyName,e+="</h2></td></tr>",e+="\r\n<tr><td align='center'><h3 style='vertical-align:middl;'>",e+=this.DisplayName,e+="</h3></td></tr>",e+="\r\n<tr><td align='center'>",e+=" From :  "+this.FromDate.Date.ToString(c.d.SessionManager.Preferences["Date Format"]),e+=" &nbs;&nbsp;&nbsp;To :  "+this.ToDate.Date.ToString(c.d.SessionManager.Preferences["Date Format"]),e+="</td></tr>",e+="<tr><td style='padding-top:10p;'><table border=1 width='"+t+"' style='border-collapse:collapse;  font-family:arial; font-size:9pt;' >",e+="<COLGROUP>";for(let i=0;i<this.Vouchers.Columns.length-2;i++)e+="FLOAT"==this.Vouchers.Columns[i].DataType?"<COL style='text-align:righ;'>":"<COL style=''>";e+="</COLGROUP>",e+="<tr style=''>";for(let i=0;i<this.Vouchers.Columns.length-2;i++)e+="<th class='hdr' width='"+this.Vouchers.Columns[i].Width,e+="px' >",e+=this.Vouchers.Columns[i].Header,e+="</th>";e+="</tr>";let a=this.Vouchers.Table;for(let i=0;i<a.length;i++){e+="<tr",i%2==1&&(e+=" class=alt"),e+=">";for(let s=0;s<this.Vouchers.Columns.length-2;s++)e+="<td",e+="FLOAT"==this.Vouchers.Columns[s].DataType?" align='right'":" align='left'",e+=">",e+=a[i][this.Vouchers.Columns[s].DisplayMember].toString(),e+="</td>";e+="</tr>"}return e+="</table>",e+="</td></tr></table>",e+="</body><html>",e}SelectUnselectAll(e){let n=this.Vouchers.Table;for(let l=0;l<n.length;l++)""==r.J0.String(n[l].BillNo)&&(n[l].Select=e);this.Vouchers.refreshDataView()}FilterfirstInvs(e){this.Vouchers.TableColumns.Contains("billseq")&&(this.Vouchers.Table=e?this.VirtualVouchersTable.filter(n=>1==n.billseq):this.VirtualVouchersTable)}SaveCall(){if(this.ProgressValue=1,null==this.dtpref)return;let e=0,n=0,l=!1;this.Billdatefld="";let t=this.dtpref.filter(o=>"SIVDoc"==o.Name);if(t.length>0&&(e=parseInt(t[0].Value.toString())),t=this.dtpref.filter(o=>"HireContractDoc"==o.Name),t.length>0&&(n=parseInt(t[0].Value.toString())),t=this.dtpref.filter(o=>"SIVBillingDate"==o.Name),t.length>0&&(this.Billdatefld=t[0].Value.toString()),t=this.dtpref.filter(o=>"InvoiceOnDelDate"==o.Name),t.length>0&&(l=(0,C.yG0)(t[0].Value.toString())),0==e)return;this.objViewModel=new y.AddEditDocumentViewModel(e,"",!0),this.objViewModel.GenratePrefix=!0;var a=this.objViewModel.ScreenObject.Link.LinkCombo.Items.find(o=>o.Parent==n.toString());if(null==a||null==a)return void(this.DisplayMessage="Please place linking between Hire Contract and Sales invoice Docuemnt");if(this.objViewModel.ScreenObject.Link.LinkCombo.SelectedValue=a.Value,!this.objViewModel.ScreenObject.GridDataColumns.Contains(this.Billdatefld))return void(this.DisplayMessage="Sales invoice Billing Date should be in body");let i="",s=null;"1"==this.BasedOn.SelectedValue?l?(s=this.Vouchers.Table.filter(o=>1==o.Select),s=s.sort((o,D)=>o.CustomerID>D.CustomerID||o.CustomerID==D.CustomerID&&o.InvDate>D.InvDate?1:-1)):(s=this.Vouchers.Table.filter(o=>1==o.Select),s=s.sort((o,D)=>D.CustomerID-o.CustomerID)):l?(s=this.Vouchers.Table.filter(o=>1==o.Select),s=s.sort((o,D)=>o.HCNo>D.HCNo||o.HCNo==D.HCNo&&o.InvDate>D.InvDate?1:-1)):(s=this.Vouchers.Table.filter(o=>1==o.Select),s=s.sort((o,D)=>D.HCNo-o.HCNo)),this.obja=[];let h=null,m=[];for(let o=0;o<s.length;o++)m.Contains(s[o].HCNo.toString())||m.push(s[o].HCNo),(0==o||l&&r.J0.ParseDate(s[o].InvDate.toString()).Date()!=r.J0.ParseDate(s[o-1].InvDate.toString()).Date()||"1"==this.BasedOn.SelectedValue&&r.J0.String(s[o].CustomerID)!=r.J0.String(s[o-1].CustomerID)||"1"!=this.BasedOn.SelectedValue&&r.J0.String(s[o].HCNo)!=r.J0.String(s[o-1].HCNo))&&(o>0&&this.obja.push(h),h=[]),h.push(s[o]);null!=h&&this.obja.push(h);for(let o=0;o<m.length;o++)""!=i&&(i+="','"),i+=m[o].toString();this.ProgressMax=this.obja.length,this.InProgress=this.ProgressValue+" of "+this.ProgressMax,this.ProgressWidth=100*(this.ProgressValue-1)/this.ProgressMax,0==this.ProgressWidth&&(this.ProgressWidth=1),this.objViewModel.ScreenObject.GetLinkDocDetails(i,parseInt(a.Value),"",!0).subscribe(o=>{this.dsLink=o,this.objViewModel.IsSelectAll=!0,this.iLoop=0,this.objViewModel.SaveCallBackMethod.Subscribe(this,"SaveCallBack_Complete"),this.SaveCallBack()})}SaveCallBack(){let e=!1,n=this.dtpref.filter(l=>"InvoiceOnDelDate"==l.Name);if(n.length>0&&(e=(0,C.yG0)(n[0].Value.toString())),this.iLoop>=this.obja.length)return this.Vouchers.refreshDataView(),void(this.ShowProcessDialog=!1);this.InProgress=this.ProgressValue+" of "+this.ProgressMax,this.ids=this.obja[this.iLoop],this.objViewModel.DocumentDate=this.InvoiceDate.Date,this.objViewModel.DocumentDate=e&&this.ids.length>0?r.J0.ParseDate(this.ids[0].InvDate).Date():this.InvoiceDate.Date;for(let l=0;l<this.ids.length;l++){let t=[];t.push(this.ids[l]),0==l&&null!=this.objViewModel.ScreenObject.DebitAccount&&(this.objViewModel.ScreenObject.DebitAccount.SelectedValue=parseInt(r.J0.String(this.ids[l].CustomerID)),this.objViewModel.ScreenObject.Data.Tables[0].filter(s=>null!=s.LocalReference&&s.LocalReference=="'"+this.objViewModel.ScreenObject.DebitAccount.DBColumnID+"'").length>0&&this.objViewModel.ScreenObject.GetLinkReferenceData(this.objViewModel.ScreenObject.DebitAccount.DBColumnID,this.objViewModel.CostCenterID,this.objViewModel.ScreenObject.DebitAccount.SelectedValue,this.objViewModel.DocumentDate,this.objViewModel.ScreenObject.DebitAccount.DBColumnName,2,null));let a=this.objViewModel.GetEmptyRowPosition(this.objViewModel.ScreenObject.GridDataObj,"ProductID_Key");this.objViewModel.LoadLinkData(this.dsLink,t,0,[],null),this.objViewModel.ScreenObject.GridData[a][this.Billdatefld]=r.J0.ParseDate(this.ids[l].DtBill.toString()).ToString(c.d.SessionManager.Preferences["Date Format"]),this.objViewModel.ScreenObject.GridDataColumns.Contains(this.Billdatefld+"_Key")&&(this.objViewModel.ScreenObject.GridData[a][this.Billdatefld+"_Key"]=r.J0.ParseDate(this.ids[l].DtBill.toString())),this.objViewModel.ScreenObject.GridDataColumns.Contains("dcnum10")&&(this.objViewModel.ScreenObject.GridData[a].dcnum10=this.ids[l].TotDays.toString()),!r.J0.IsEmpty(this.ids[l].Fromdate)&&this.objViewModel.ScreenObject.GridDataColumns.Contains("dcalpha6_Key")&&(this.objViewModel.ScreenObject.GridData[a].dcalpha6_Key=r.J0.ParseDate(this.ids[l].Fromdate.toString()),this.objViewModel.ScreenObject.GridData[a].dcalpha6=r.J0.ParseDate(this.ids[l].Fromdate.toString()).ToString(c.d.SessionManager.Preferences["Date Format"])),!r.J0.IsEmpty(this.ids[l].Todate)&&this.objViewModel.ScreenObject.GridDataColumns.Contains("dcalpha7_Key")&&(this.objViewModel.ScreenObject.GridData[a].dcalpha7_Key=r.J0.ParseDate(this.ids[l].Todate.toString()),this.objViewModel.ScreenObject.GridData[a].dcalpha7=r.J0.ParseDate(this.ids[l].Todate.toString()).ToString(c.d.SessionManager.Preferences["Date Format"])),this.objViewModel.ScreenObject.GridData[a].ProductID_Key.toString()!=this.ids[l].ProductID.toString()&&(this.objViewModel.ScreenObject.GridData[a].ProductID_Key=this.ids[l].ProductID.toString()),this.objViewModel.ScreenObject.GridData[a].Rate=this.ids[l].Price.toString(),this.Vouchers.TableColumns.Contains("Qty")&&!r.J0.IsEmpty(this.ids[l].Qty)&&(this.objViewModel.ScreenObject.GridData[a].Quantity=this.ids[l].Qty.toString()),this.objViewModel.ScreenObject.GridDataColumns.Contains("LineNarration")&&(this.objViewModel.ScreenObject.GridData[a].LineNarration=this.ids[l].BillCycle.toString()+"("+this.ids[l].Remarks.toString()+")"),this.objViewModel.CalculateTotals(this.objViewModel.ScreenObject.GridData[a],!1)}this.objViewModel.SaveInventoryDocument("Save",!1)}SaveCallBack_Complete(){setTimeout(()=>{if(this.objViewModel.RetValue<=0)this.objViewModel.clear(1);else for(let e=0;e<this.ids.length;e++)this.ids[e].BillNo=this.objViewModel.DisplayMessage,this.ids[e].Select=!1;this.ProgressValue++,this.iLoop++,this.SaveCallBack()},30)}GetBills(e,n,l,t,a,i,s){Logger.InfoLog("Document:: Inside GetBills");try{let h=[];return h.push(e.ToString("dd/MMM/yyyy")),h.push(n.ToString("dd/MMM/yyyy")),h.push(l),h.push(t),h.push(a),h.push(i.ToString("dd/MMM/yyyy")),h.push(s),h.push(c.d.SessionManager.UserName),h.push(c.d.SessionManager.UserID),h.push(c.d.SessionManager.LanguageID),c.d.document.GetBills(h)}catch(h){return Logger.ErrorLog("Document:: GetBills"+h.stack),null}}}}}]);
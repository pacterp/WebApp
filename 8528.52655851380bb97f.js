"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[8528],{96147:(G,g,i)=>{i.r(g),i.d(g,{CopyLeavesFromViewModel:()=>y});var c=i(9659),C=i(66148),u=i(76199),P=i(5349),I=i(4884),f=i(1077);class y extends u.g{get SelectAll(){return this._SelectAll}set SelectAll(t){t!=this._SelectAll&&(this._SelectAll=t,this.SelectUnselectAll(t))}constructor(t){super(),this.Grade=new f.y$(0),this.GradesList=new P.v4(0),this.SelectUnCheck=0,this.Parent=t,this.FillGrades()}FillGrades(){let t=c.d.common.GetDataSet("COPL001","");null!=t&&t.Tables.length>0&&(this.GradesList.Items.Clear(),null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&(t.Tables[0].forEach(a=>{this.GradesList.Items.push(P.oN.CheckedListBoxItem_6(a.Name.toString(),a.NodeID.toString(),!0,160))}),this.GradesList.Items.forEach(a=>{a.IsChecked=!1})))}OnSave(t){if("Cancel"==t.toString())c.d.page.HideDialog(this.PopUpGUID);else if("Load"==t.toString()){let d=[],o=[],l=[],h=[],_=[];var a=this.Parent.ScreenObject._TextFields.find(D=>"dcalpha3"==D.DBColumnName.toLowerCase());if(null!=a&&a instanceof I.P6&&""!=a.Date.toString()){if(d.push("GradeWise"),d.push(""),d.push(new Date(a.Date).ToString("dd/MMM/yyyy")),d.push(c.d.SessionManager.UserID),d.push(c.d.SessionManager.LanguageID),o=c.d.empService.GetAssignLeaves(d),null!=o&&o.Tables.length>0&&o.Tables[0].length>0&&!o.Columns[0].Contains("ErrorMessage")){this.GradesList.Items.forEach(r=>{1==r.IsChecked&&r.Value.toString()==this.Grade.SelectedValue.toString()&&(r.IsChecked=!1)}),l=o.Tables[0];let D=0;if(null!=l&&l.length>0){let r=this.Parent.ScreenObject.GridData.AsDataView();if(r=r.filter(S=>S.dcccnid53_Key==this.Grade.SelectedValue),!(r.length>0))return this.DisplayMessage="Selected grade doesn't exist in the document",void(this.MessageVisibility=!0);{this.GradesList.Items.forEach(n=>{if(1==n.IsChecked){if(h=l,l=l.filter(e=>e.dcccnid53_Key=n.Value.toString()).SortBy(["dcCCNID51_Key","dcCCNID52_Key"]),_=this.Parent.ScreenObject.GridData.AsDataView(),_=_.filter(e=>e.dcccnid53_Key==n.Value.toString()&&1==e.dcccnid51_Key),_.length<=0)for(let e=0;e<h.length;e++){let s=this.Parent.ScreenObject.GridData.NewRow();this.Parent.ScreenObject.GridData.Rows.InsertAt(s,D+e),s.ProductID_Key=parseInt(c.d.SessionManager.Preferences.PayrollProduct),s.dcCCNID51_Key=C.J0.String(h[e].dcCCNID51_Key),s.dcCCNID52_Key=C.J0.String(h[e].dcCCNID52_Key),s.dcCCNID53_Key=C.J0.String(h[e].dcCCNID53_Key),s.dcNum3=C.J0.String(h[e].dcNum3)}if(null!=(a=this.Parent.ScreenObject._TextFields.Where(e=>"dcalpha1"==e.DBColumnName.toLowerCase()).FirstOrDefault())&&a instanceof P.y$&&""!=a.SelectedValue.toString())for(let e=0;e<r.length;e++){if(null!=r[e].ProductID_Key)for(let s=0;s<this.Parent.ScreenObject.GridData.length;s++)null!=this.Parent.ScreenObject.GridData[s].dcCCNID52_Key&&null!=this.Parent.ScreenObject.GridData[s].dcCCNID53_Key&&parseFloat(n.Value.toString())==parseFloat(this.Parent.ScreenObject.GridData[s].dcCCNID53_Key)&&parseFloat(r[e].dcCCNID52_Key)==parseFloat(this.Parent.ScreenObject.GridData[s].dcCCNID52_Key)&&(this.Parent.ScreenObject.GridData[s].dcNum3=parseFloat(r[e].dcNum3));D=e}}});let S=this.Parent.ScreenObject.GridData.filter(n=>0==C.J0.IntTryParse(n.ProductID_Key));S.length>0&&S.forEach(n=>{this.Parent.ScreenObject.GridData.Remove(n)}),D+=2,this.Parent.ScreenObject.GridDataobj.refreshDatawithIDs(),this.Parent.ScreenObject.UpdateSequence(),this.Parent.RefreshGrid=!0,l.length>0&&l.Clear()}}}c.d.page.HideDialog(this.PopUpGUID)}}}SelectUnselectAll(t){this.GradesList.Items.forEach(a=>{a.IsChecked=t})}}}}]);
"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[6981],{29362:(D,h,l)=>{l.r(h),l.d(h,{AssetClassesViewModel:()=>A});var t=l(9659),i=l(66148),n=l(76199),o=l(6532),a=l(5349),r=l(66133),u=l(92014);class A extends n.g{get AssetClassID(){return this._AssetClassID}set AssetClassID(s){s!=this._AssetClassID&&(this._AssetClassID=s,this.obj.AssetClassID=this._AssetClassID)}constructor(s){super(),this._AssetClassID=0,this.AssetClassCode=new o.Dw(23793),this.AssetClassName=new o.Dw(23794),this.AssetClassStatus=new a.y$(23797),this.FAAccounts=new a.y$(23795),this.DeprBooks=new a.y$(23796),this.TotalYears=new o.Dw(49973),this.DeprPosting=new a.y$(49974),this.ScreenObject=new u.ControlGenerator,this.obj=new r.V,this.RetValue=0,this.YearsMandatory=!1,this.Fields=[],this.AssetClassID=s,this.obj.AssetClassID=s,this.DisplayMessage="",this.LoadData(),0==this.AssetClassID?this.Title=t.d.GetResource("AddAssetClass"):(this.Title=t.d.GetResource("EditAssetClass"),this.OnLoadData()),this.DisplayName=this.Title}LoadData(){this.ScreenObject.LoadScreen_2(this,74),this.AssetClassCode.Label=t.d.GetResource("Code"),this.AssetClassName.Label=t.d.GetResource("Name"),this.AssetClassCode.Enable=!0,this.AssetClassName.Enable=!0,this.AssetClassStatus.Enable=!0,this.FAAccounts.Enable=!0,this.DeprBooks.Enable=!0,this.TotalYears.Enable=!0,this.DeprPosting.Enable=!0,this.Fields.push(this.AssetClassCode),this.Fields.push(this.AssetClassName),this.Fields.push(this.AssetClassStatus),this.Fields.push(this.FAAccounts),this.Fields.push(this.DeprBooks),this.Fields.push(this.TotalYears),this.Fields.push(this.DeprPosting);let s=t.d.common.GetDataSet("ASS003","");s.Tables[0].forEach(e=>{this.DeprBooks.Items.push(a._p.ComboBoxItems_2(e.DeprBookName.toString(),e.DeprBookID.toString()))}),this.DeprBooks.Items.length>0&&(this.DeprBooks.SelectedValue=this.DeprBooks.Items[0].Value),this.DeprBooks.Mandatory=!0,s.Tables[1].forEach(e=>{this.FAAccounts.Items.push(a._p.ComboBoxItems_2(e.PostGroupName.toString(),e.PostingGroupID.toString()))}),this.FAAccounts.Items.length>0&&(this.FAAccounts.SelectedValue=this.FAAccounts.Items[0].Value),this.FAAccounts.Mandatory=!0,this.DeprPosting.Items.push(a._p.ComboBoxItems_2(t.d.GetResource("AssetManagement_Monthly"),"1")),this.DeprPosting.Items.push(a._p.ComboBoxItems_2(t.d.GetResource("Budget_Quarterly"),"3")),this.DeprPosting.Items.push(a._p.ComboBoxItems_2(t.d.GetResource("Budget_Halfyearely"),"4")),this.DeprPosting.Items.push(a._p.ComboBoxItems_2(t.d.GetResource("AssetManagement_Yearly"),"2")),this.DeprPosting.DefaultValue=this.DeprPosting.SelectedValue="2",this.TotalYears.Text="0",this.ScreenObject.Data.Tables.length>0&&(this.ScreenObject.Data.Tables[3].forEach(e=>{this.AssetClassStatus.Items.push(a._p.ComboBoxItems_2(e.Status.toString(),e.StatusID.toString()))}),this.AssetClassStatus.SelectedValue="379"),this.ScreenObject.Data.Tables[4].filter(e=>"ChangeOfFAAccountsNode"==e.Name).length>0&&(this.YearsMandatory=!0)}OnLoadData(){let s=r.V.GetAssetClassDetails(this.obj.AssetClassID);null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&(this.AssetClassCode.Text=s.Tables[0][0].AssetClassCode.toString(),this.AssetClassName.Text=s.Tables[0][0].AssetClassName.toString(),this.AssetClassStatus.SelectedValue=s.Tables[0][0].StatusID.toString(),this.FAAccounts.SelectedValue=s.Tables[0][0].FAAccountsID.toString(),this.DeprBooks.SelectedValue=s.Tables[0][0].DeprBookID.toString(),this.DeprPosting.SelectedValue=s.Tables[0][0].DeprPosting.toString(),this.TotalYears.Text=s.Tables[0][0].TotalYears.toString(),this.obj.GUID=s.Tables[0][0].GUID.toString(),this.ScreenObject.YearMonth=new Date(s.Tables[0][0].CDATE.toString()).ToString("yyyyMMM"))}OnSaveAssetClass(s){try{if(this.DisplayMessage="","Save"==s.toString()){if(null==this.AssetClassCode.Text||""==this.AssetClassCode.Text.Trim())return void(this.DisplayMessage=t.d.GetResource("Enter")+" Code");if(this.obj.AssetClassCode=this.AssetClassCode.Text,null==this.AssetClassName.Text||""==this.AssetClassName.Text.Trim())return void(this.DisplayMessage=t.d.GetResource("Enter")+" Name");if(this.obj.AssetClassName=this.AssetClassName.Text,""==this.AssetClassStatus.SelectedValue||null==this.AssetClassStatus.SelectedValue)return void(this.DisplayMessage="Select Status");if(this.obj.StatusID=parseInt(this.AssetClassStatus.SelectedValue),i.J0.IsEmpty(this.FAAccounts.SelectedValue)||"0"==this.FAAccounts.SelectedValue)return void(this.DisplayMessage="Select FA Accounts");if(i.J0.IsEmpty(this.DeprBooks.SelectedValue)||"0"==this.DeprBooks.SelectedValue)return void(this.DisplayMessage="Select Depriciation Book");if(this.obj.PostingGroupID=i.J0.Int(this.FAAccounts.SelectedValue),this.obj.DeprBookID=i.J0.Int(this.DeprBooks.SelectedValue),this.obj.DeprTypeID=i.J0.Int(this.DeprPosting.SelectedValue),this.obj.TotalYears=i.J0.Double(this.TotalYears.Text),this.YearsMandatory&&this.obj.TotalYears<=0)return void(this.DisplayMessage="Enter Total Years");this.obj.SaveAssetClass().subscribe(e=>{this.DisplayMessage=e.Message,this.RetValue=e.RetValue,this.RetValue>0&&(this.AssetClassID=0,this.ClearFields(),null!=this.Parent&&this.Parent.Refresh())})}else t.d.page.HideDialog(this.PopUpGUID)}catch(e){Logger.ErrorLog("AssetClassesViewModel:: OnSaveAssetClass",e)}}ClearFields(){this.AssetClassCode.Text="",this.AssetClassName.Text="",this.AssetClassStatus.SelectedValue="379",this.TotalYears.Text="0"}}}}]);
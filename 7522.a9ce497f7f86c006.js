"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[7522],{75141:(be,S,r)=>{r.r(S),r.d(S,{RibbonExtRental:()=>ge});var C=r(74523),I=r(31425),D=r(32040),d=r(43767),v=r(54581),k=r(7321),G=r(98580),u=r(21774),B=r(23458),F=r(82503),g=r(27730),O=r(33784),E=r(20643),L=r(72247),J=r(58170);class R extends O.d{get ClearSelectedNodes(){return this._ClearSelectedNodes}set ClearSelectedNodes(s){this._ClearSelectedNodes=s,this.tree.length>0&&(this.tree[0].ClearAllSelectedNodes=!this.tree[0].ClearAllSelectedNodes)}CaseIncomeDialogViewModel_1(s,e){this.parent=s,this.Title="Book Income",this.Property.Label="Property",this.FromDate.Label="Month",this.parent.FromDate&&(this.FromDate.Date=this.parent.FromDate),this.FromDate.CustomFormat="MMM/yyyy",this.Property.CCID=92,this.Property.TypeID=2,this.ToDate.Visible=!1,this.Status.Visible=!1,this.Property.SelectedValue=this.parent.Property,this.DateRanges=new g.y$,this.DateRanges.Visible=!1,this.TreeVisibility=!1}constructor(s,e){super(),this.TreeVisibility=!1,this.statusID=null,this.ID=0,this.clickCheck=0,this.Property=new B.y$(0),this.FromDate=new F.Lc(0),this.ToDate=new F.Lc(0),this.Status=new g.y$(0),this.Width="350",this.IsBulkNotification=!1,this.postparent=s,this.Title=s.DisplayName,this.Property.Label="Property",this.FromDate.Label="From",this.ToDate.Label="To",this.Status.Label="Status",this.Status.Items.push(g._p.ComboBoxItems_2(212!=s.FAID?"Pending":"Active","1")),this.Status.Items.push(g._p.ComboBoxItems_2(212!=s.FAID?"Posted":"Terminated","2")),this.Status.SelectedValue="1",s.FromDate&&(this.FromDate.Date=s.FromDate),s.ToDate&&(this.ToDate.Date=s.ToDate),d.J0.IsEmpty(this.postparent.stat)||(this.Status.SelectedValue=this.postparent.stat),212==s.FAID&&(this.ToDate.Visible=!1,this.FromDate.Label="Ason"),this.Property.CCID=92,this.Property.TypeID=2,this.Width="350",this.TreeVisibility=!0,this.Property.SelectedValue=s.Property,this.LoadDates()}CaseIncomeDialogViewModel_2(s,e,o){this.IsBulkNotification=o,this.postparent=s,this.Title=s.DisplayName,this.Property.Label="Property",this.FromDate.Label="From",this.ToDate.Label="To",this.Status.Label="Status",this.Status.Items.push(g._p.ComboBoxItems_2("Pending","1")),this.Status.Items.push(g._p.ComboBoxItems_2("Posted","2")),this.Status.SelectedValue="1",s.FromDate&&(this.FromDate.Date=s.FromDate.Value),s.ToDate&&(this.ToDate.Date=s.ToDate.Value),d.J0.IsEmpty(this.postparent.stat)||(this.Status.SelectedValue=this.postparent.stat),this.Property.CCID=92,this.Property.TypeID=2,this.Property.Visible=!1,this.Width="350",this.Property.SelectedValue=s.Property,this.LoadDates()}LoadDates(){if(this.DateRanges=new g.y$,this.DateRanges.Items=E.w.items_DateRanges,this.DateRanges.SelectionChangedCommand.Subscribe(this,"OnDateRangesSelectionChanged"),!this.IsBulkNotification){if(this.tree=[],this.CostCenterFilters=null!=this.postparent.ccfilter?this.postparent.ccfilter:[],this.CostCenters=new g.y$(0),this.CostCenters.SelectionChangedCommand.Subscribe(this,"OnCostCenterChange"),D.d.SessionManager.Preferences.ContainsKey("BulkInvPostingTreeFilter")&&"True"==D.d.SessionManager.Preferences.BulkInvPostingTreeFilter){this.TreeVisibility=!0;let s=D.d.report.ReportDataSet("RPT022",!1,"select Name,FeatureID from ADM_Features with(nolock)\n              where IsEnabled=1 and (FeatureID>50002 or FeatureID in(92,93,94))");for(let e=0;e<s.Tables[0].length;e++)this.CostCenters.Items.push(g._p.ComboBoxItems_2(s.Tables[0][e][Object.keys(s.Tables[0][e])[0]].toString(),s.Tables[0][e][Object.keys(s.Tables[0][e])[1]].toString()));this.CostCenters.SelectedValue="92",this.CostCenters.SelectedItem=this.CostCenters.GetselectedItem(),this.OnCostCenterChange(null),this.Width="800",this.Property.Visible=!1}else this.TreeVisibility=!1;null!=this.postparent&&212==this.postparent.FAID&&(this.DateRanges.Visible=!1)}}OnDateRangesSelectionChanged(s){null!=this.DateRanges.SelectedValue&&E.w.SetDateRanges(this.DateRanges.SelectedValue,this.FromDate,this.ToDate)}OnCostCenterChange(s){if(!d.J0.IsEmpty(this.CostCenters.SelectedValue)&&(0==this.tree.length||this.tree[0].CostCenterID!=parseInt(this.CostCenters.SelectedValue))){let e=0;null!=this.CostCenters.SelectedItem&&!d.J0.IsEmpty(this.CostCenters.SelectedItem.Parent)&&(e=d.J0.Int(this.CostCenters.SelectedItem.Parent)),this.LoadCostCenterTree(parseInt(this.CostCenters.SelectedValue),e,0,null)}}LoadCostCenterTree(s,e,o,n){this.tree.Clear();let i="";50002==s&&"True"==D.d.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==D.d.SessionManager.Preferences["LW Reports"]&&(i=d.J0.IsEmpty(D.d.SessionManager.LocationWhere)?"a.NodeID IN (-1234)":"a.NodeID IN ("+D.d.SessionManager.LocationWhere+")");let c=new L.T;if(null==n)for(let l=0;l<this.CostCenterFilters.length;l++){const h=this.CostCenterFilters[l];if(h.CostCenterID==s&&h.LookupTypeID==e){n=h.SelectedNodes;break}}null==n?c.TreeViewModel_5(s,this,o,i,""):c.TreeViewModel_6(s,this,o,i,n,""),c.LookupTypeID=e,c.HeaderVisiblity=!1,c.OnNodeSelected||(c.OnNodeSelected=new J.Yk,c.OnNodeSelected.Subscribe(this,"OnNodeSelected")),this.tree.push(c)}GetDimensionFilter(s,e=null){let o="";return this.CostCenterFilters.forEach(n=>{if(null==e||!e.Contains(n.CostCenterID)){let i="";if(92==n.CostCenterID?i="a.Propertyid":93==n.CostCenterID?i="a.UnitID":94==n.CostCenterID?i="a.TenantID":n.CostCenterID>5e4&&(i=s+(n.CostCenterID-5e4)),n.SelectedNodes.length>0){let c="";for(let l=0;l<n.SelectedNodes.length;l++)n.SelectedNodes[l].IsGroup||(c+=n.SelectedNodes[l].Id+",");c.length>1&&(c=c.substr(0,c.length-1),o+=" AND "+i+" in("+c+") ")}else n.DeleteButtonVisibility||(o+=" AND ",o+=i+"=-12912")}}),o.toString()}OnButtonClick(s){if("Cancel"==s.toString())D.d.page.HideDialog(this.PopUpGUID),null!=this.parent?this.parent.DialogResult=!1:null!=this.postparent&&(this.postparent.DialogResult=!1);else{if(null!=this.parent){this.parent.DialogResult=!0,this.parent.Property=this.Property.SelectedValue,this.parent.FromDate=this.FromDate.Date;let e=D.d.rental.GetContractsUnitsinCase(this.parent.Property,this.FromDate.Date);this.parent.FillData(e)}else if(null!=this.postparent&&this.IsBulkNotification)this.postparent.DialogResult=!0,this.postparent.Property=this.Property.SelectedValue,this.postparent.FromDate=this.FromDate.Date,this.postparent.ToDate=this.ToDate.Date,this.postparent.stat=this.Status.SelectedValue,this.postparent.DimWhere=this.TreeVisibility?this.GetDimensionFilter("L.dcCCNID"):"",this.postparent.ButtonPostVisible="1"==this.postparent.stat,this.postparent.FillDataBulkNoficationPosting();else if(null!=this.postparent){this.postparent.DialogResult=!0,this.postparent.Property=this.Property.SelectedValue,this.postparent.FromDate=this.FromDate.Date,this.postparent.ToDate=this.ToDate.Date,this.postparent.stat=this.Status.SelectedValue,this.TreeVisibility?(this.postparent.DimWhere=this.GetDimensionFilter("L.CCNID"),this.postparent.ccfilter=this.CostCenterFilters):this.postparent.DimWhere="",this.postparent.ButtonPostVisible="1"==this.postparent.stat;let e=null;210==this.postparent.FAID?e=D.d.rental.GetContractsSchedules(this.postparent.Property,this.FromDate.Date,this.ToDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin,this.postparent.DimWhere,104):190==this.postparent.FAID?e=D.d.rental.GetContractsSchedules(this.postparent.Property,this.FromDate.Date,this.ToDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin,this.postparent.DimWhere,95):212==this.postparent.FAID&&(e=D.d.rental.GetActiveContracts(this.postparent.Property,this.FromDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin,this.postparent.DimWhere)),this.postparent.TerminationDate.Date=this.FromDate.Date,this.postparent.FillData(e)}D.d.page.HideDialog(this.PopUpGUID)}}}var V=r(11798),t=r(96598),y=r(43357),W=r(65335),M=r(67700),j=r(96336);function $(a,s){if(1&a&&(t.j41(0,"div",15),t.EFF(1,"\n                    "),t.eu8(2,16),t.EFF(3,"\n                "),t.k0s()),2&a){const e=t.XpG(2);t.R7$(2),t.Y8G("obj",e.obj.CostCenters)("group",e.form)}}function U(a,s){if(1&a&&(t.j41(0,"div",15),t.EFF(1,"\n                            "),t.eu8(2,16),t.EFF(3,"\n                        "),t.k0s()),2&a){const e=t.XpG(4);t.R7$(2),t.Y8G("obj",e.obj.CostCenters)("group",e.form)}}function Y(a,s){if(1&a&&(t.j41(0,"app-pact-tree",19),t.EFF(1,"\n                        "),t.DNE(2,U,4,2,"div",13),t.EFF(3,"\n                    "),t.k0s()),2&a){const e=s.$implicit,o=t.XpG(3);t.Y8G("obj",e),t.R7$(2),t.Y8G("ngIf",o.obj.CostCenters.Visible)}}function H(a,s){if(1&a&&(t.j41(0,"div",17),t.EFF(1,"\n                    "),t.DNE(2,Y,4,2,"app-pact-tree",18),t.EFF(3,"\n                "),t.k0s()),2&a){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.obj.tree)}}function X(a,s){if(1&a&&(t.j41(0,"div",12),t.EFF(1,"\n            "),t.j41(2,"div"),t.EFF(3,"\n                "),t.DNE(4,$,4,2,"div",13),t.EFF(5,"\n                "),t.DNE(6,H,4,1,"div",14),t.EFF(7,"\n            "),t.k0s(),t.EFF(8,"\n        "),t.k0s()),2&a){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.obj.CostCenters.Visible&&0==e.obj.tree.length),t.R7$(2),t.Y8G("ngIf",e.obj.tree.length>0)}}function K(a,s){if(1&a&&(t.j41(0,"div",20),t.EFF(1,"\n                "),t.eu8(2,16),t.EFF(3,"\n            "),t.k0s()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("obj",e.obj.Property)("group",e.form)}}function z(a,s){if(1&a&&(t.j41(0,"div",21),t.EFF(1,"\n                    "),t.eu8(2,16),t.EFF(3,"\n                "),t.k0s()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("obj",e.obj.FromDate)("group",e.form)}}function Q(a,s){if(1&a&&(t.j41(0,"div",21),t.EFF(1,"\n                    "),t.eu8(2,16),t.EFF(3,"\n                "),t.k0s()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("obj",e.obj.ToDate)("group",e.form)}}function Z(a,s){if(1&a&&(t.j41(0,"div",20),t.EFF(1,"\n                "),t.eu8(2,16),t.EFF(3,"\n            "),t.k0s()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("obj",e.obj.Status)("group",e.form)}}function q(a,s){if(1&a){const e=t.RV6();t.j41(0,"span",28),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit;return t.Njj(n.OnButtonClick("Delete"))}),t.k0s()}2&a&&t.FS9("title",t.bMT(1,1,"Delete"))}function _(a,s){if(1&a){const e=t.RV6();t.qex(0),t.EFF(1,"\n                  "),t.EFF(2,"\n                  "),t.j41(3,"div",24),t.bIt("click",function(){const n=t.eBV(e).$implicit;return t.Njj(n.OnButtonClick())}),t.EFF(4,"\n                    "),t.j41(5,"div",25),t.EFF(6,"\n                      "),t.j41(7,"span"),t.EFF(8),t.k0s(),t.EFF(9,"\n                      "),t.DNE(10,q,2,3,"span",26),t.EFF(11," \n                    "),t.k0s(),t.EFF(12,"\n                    "),t.j41(13,"div",27),t.EFF(14,"\n                        "),t.j41(15,"span"),t.EFF(16),t.k0s(),t.EFF(17,"\n                    "),t.k0s(),t.EFF(18,"\n                    "),t.k0s(),t.EFF(19,"\n                "),t.bVm()}if(2&a){const e=s.$implicit;t.R7$(8),t.JRh(e.CostCenter),t.R7$(2),t.Y8G("ngIf",e.DeleteButtonVisibility),t.R7$(6),t.JRh(e.SelectedNodesTag)}}function ee(a,s){if(1&a&&(t.j41(0,"div",22),t.EFF(1,"\n                "),t.DNE(2,_,20,3,"ng-container",23),t.EFF(3,"\n              "),t.k0s()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.obj.CostCenterFilters)}}let A=(()=>{class a{constructor(){this.form=new V.gE({})}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-case-income-dialog"]],inputs:{obj:"obj"},standalone:!1,decls:38,vars:14,consts:[[1,"master-screen",2,"padding-bottom","4px"],[2,"display","flex"],["class","rpttree_div","style","width: 50%;display: flex;flex-direction: column;height: calc(100% - 50px);",4,"ngIf"],[1,"PACTHeaderFields","row","form-row","dialogSubBody",2,"height","calc(100% - 50px)"],["class","form-group col-xl-12 col-md-12 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],[1,"row","form-row"],["class","form-group col-xl-6 col-md-6 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],["style","display: flex;flex-wrap: wrap;",4,"ngIf"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"rpttree_div",2,"width","50%","display","flex","flex-direction","column","height","calc(100% - 50px)"],["class","CostCenters_select","style","margin: 5px;display: flex;align-items: center;",4,"ngIf"],["style","padding-right: 0px !important;height:400px",4,"ngIf"],[1,"CostCenters_select",2,"margin","5px","display","flex","align-items","center"],["FieldDirective","",3,"obj","group"],[2,"padding-right","0px !important","height","400px"],[3,"obj",4,"ngFor","ngForOf"],[3,"obj"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl"],[1,"form-group","col-xl-6","col-md-6","col-sm-12","col-xs-12","PACTControl"],[2,"display","flex","flex-wrap","wrap"],[4,"ngFor","ngForOf"],[1,"CCFilter_div",2,"display","flex","flex-direction","column",3,"click"],[1,"CCFilter_header"],["class","fa-light fa-circle-xmark tabclose",3,"title","click",4,"ngIf"],[1,"CCFilter"],[1,"fa-light","fa-circle-xmark","tabclose",3,"click","title"]],template:function(o,n){1&o&&(t.j41(0,"div",0),t.EFF(1,"\n    "),t.j41(2,"div",1),t.EFF(3,"\n        "),t.DNE(4,X,9,2,"div",2),t.EFF(5,"\n        "),t.j41(6,"div",3),t.EFF(7,"\n            "),t.DNE(8,K,4,2,"div",4),t.EFF(9,"\n            "),t.j41(10,"div",5),t.EFF(11,"\n                "),t.DNE(12,z,4,2,"div",6),t.EFF(13,"\n                "),t.DNE(14,Q,4,2,"div",6),t.EFF(15,"\n            "),t.k0s(),t.EFF(16,"\n            "),t.DNE(17,Z,4,2,"div",4),t.EFF(18,"\n            "),t.DNE(19,ee,4,1,"div",7),t.EFF(20,"\n        "),t.k0s(),t.EFF(21,"\n    "),t.k0s(),t.EFF(22,"\n    "),t.j41(23,"div",8),t.EFF(24,"\n        "),t.j41(25,"div"),t.EFF(26,"\n            "),t.j41(27,"button",9),t.bIt("click",function(){return n.obj.OnButtonClick("Save")}),t.EFF(28),t.nI1(29,"translate"),t.k0s(),t.EFF(30,"\n            "),t.j41(31,"button",10),t.bIt("click",function(){return n.obj.OnButtonClick("Cancel")}),t.nrm(32,"i",11),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.EFF(35,"\n        "),t.k0s(),t.EFF(36,"\n    "),t.k0s(),t.EFF(37,"\n"),t.k0s()),2&o&&(t.R7$(4),t.Y8G("ngIf",n.obj.TreeVisibility),t.R7$(2),t.xc7("width",n.obj.TreeVisibility?"50%":"100%"),t.R7$(2),t.Y8G("ngIf",n.obj.Property.Visible),t.R7$(4),t.Y8G("ngIf",n.obj.FromDate.Visible),t.R7$(2),t.Y8G("ngIf",n.obj.ToDate.Visible),t.R7$(3),t.Y8G("ngIf",n.obj.Status.Visible),t.R7$(2),t.Y8G("ngIf",n.obj.TreeVisibility),t.R7$(9),t.JRh(t.bMT(29,10,"Ok")),t.R7$(5),t.JRh(t.bMT(34,12,"Cancel")))},dependencies:[y.Sq,y.bT,W.G,M._,j.D9],encapsulation:2})}}return a})();var N=r(61301),x=r(41361),te=r(25864),se=r(40983),ie=r(11592);class ne extends G.g{constructor(s,e,o=!1){if(super(),this.sbSubQuery="",this.SelectAll=!1,this.ClubInvoice=new ie.c,this.ButtonPostVisible=!0,this.TerminationDate=new F.Lc,this.TermPostingDate=new F.Lc,this.BtnText="",this.BtnUnpostText="",this.IsBulkNotificationPosting=!1,this.DialogResult=!1,this.Property=0,this.FromDate=null,this.ToDate=null,this.stat="",this.strSelect="",this.strJoin="",this.DimWhere="",this.FAID=0,this.ccfilter=null,this.IsCancel=!1,this.ShowProcessDialog=!1,this.InProgress="",this.ProgressMessage="",this.ProgressValue=0,this.ProgressMax=0,this.ContractList=Array(),this.IdList=Array(),this.DisplayName=s,this.FAID=e,this.InitColumns(),!o){let n=new R(this,"Refresh");D.d.page.ShowDialog(n,A,{HideClose:!0,ShowCenter:!0,Title:this.DisplayName})}212!=this.FAID?(this.TermPostingDate.Visible=this.TerminationDate.Visible=!1,this.BtnText=D.d.GetResource("Post"),this.BtnUnpostText=D.d.GetResource("UnPost")):(this.BtnText=D.d.GetResource("REN_CntrctTerminate"),this.BtnUnpostText="Cancel Terminate",this.TerminationDate.Label=D.d.GetResource("Ren_CntrctTerDate"),this.TermPostingDate.Label="Posting Date"),this.ClubInvoice.IsChecked=!1,this.ClubInvoice.Label="Club Invoice of same contract"}OnBeginEdit(s){let e;if(e=s.item?s.item:s,this.ButtonPostVisible){if(!d.J0.IsEmpty(e.Remarks))return!0}else if(d.J0.IsEmpty(e.Postedvoucherno)&&212!=this.FAID)return!0;return!1}InitColumns(){let s;190==this.FAID?s=D.d.empService.GetQueryData(0,"BulkInvoicePosting","","",""):210==this.FAID?s=D.d.empService.GetQueryData(0,"BulkPurchaseContractScreen","","",""):212==this.FAID&&(s=D.d.empService.GetQueryData(0,"BulkterminateScreen","","","")),this.PstDocGrid=new k.vv,this.PstDocGrid.Columns=[],this.PstDocGrid.Clear(),this.PstDocGrid.Width="",this.PstDocGrid.Height=void 0,this.PstDocGrid.CanUserAddRows=!1,this.PstDocGrid.SearchVisible=!0,this.PstDocGrid.SelectAll.Visible=!0,this.PstDocGrid.CanUserSortColumns=!0,this.PstDocGrid.OnBeginEdit.Subscribe(this,"OnBeginEdit");let e,o=new Array,n=new Array;if(null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&!d.J0.IsEmpty(s.Tables[0][0].Value)){let l=new d.VB;l.LoadXml(s.Tables[0][0].Value.toString()),l.DocumentElement.childNodes.forEach(h=>{if(e=new u.O7,h.attributes)if(e.Header=h.attributes.Header.value,e.DisplayMember=h.attributes.Name.value,e.DisplayIndex=parseInt(h.attributes.index.value),!d.J0.IsEmpty(h.attributes.ID)&&!d.J0.IsEmpty(h.attributes.ID.value)&&(e.CostCenterID=parseInt(h.attributes.ID.value)),e.Width=parseInt(h.attributes.WIDTH.value),o.push(e),d.J0.IsEmpty(h.attributes.Type)||"DIM"!=h.attributes.Type.value)"Narration"==e.DisplayMember&&212!=this.FAID&&(this.strSelect+=",dbo.[fnREN_GetNextScheduleDate](a.ContractID,E.EventTime,E.SchEventID) Todate");else{e=new u.O7,e.Header=h.attributes.Header.value,e.DisplayMember="DIM"+h.attributes.ID.value,e.ReadOnly=!0,e.DisplayIndex=parseInt(h.attributes.index.value),e.Width=parseInt(h.attributes.WIDTH.value),n.push(e),this.PstDocGrid.TableColumns.push(e.DisplayMember);let p=(parseInt(h.attributes.ID.value)-5e4).toString();D.d.SessionManager.Preferences.ContainsKey("DepositLinkDimension")&&h.attributes.ID.value==D.d.SessionManager.Preferences.DepositLinkDimension?this.strSelect+=",(select top 1 Name from INV_DocDetails id  with(nolock)\t\t \n                               join com_docccdata idcc  with(nolock) on id.InvDocDetailsID=idcc.InvDocDetailsID\n                               join "+d.J0.GetTagTableName(d.J0.Int(h.attributes.ID.value))+" AS D"+p+" with(nolock) on idcc.dcccnid"+p+"=D"+p+".NOdeid\n                               where id.docid=D.ID) AS DIM"+h.attributes.ID.value:(this.strSelect+=",L.CCNID"+p+",D"+p+".Name AS DIM"+h.attributes.ID.value,this.strJoin+=" LEFT JOIN "+d.J0.GetTagTableName(d.J0.Int(h.attributes.ID.value))+" AS D"+p+" with(nolock) ON L.CCNID"+p+"=D"+p+".NodeID")}})}e=new u.O7,e.Header="\u221a",e.DisplayMember="Select",e.DataType="CheckBox",e.Width=25,n.push(e),e=new u.O7,e.Click.Subscribe(this,"OpenDoc"),e.Header="OpenDoc",e.DisplayMember="LinkDoc",e.DataType="LINK",e.Width=100,212!=this.FAID&&n.push(e),e=new u.O7,e.Header="Contract SNo",e.DisplayMember="ContractNo",e.DataType="LINK",e.ReadOnly=!0,e.Click.Subscribe(this,"Opencont"),e.Width=100;let i=o.find(l=>l.DisplayMember==e.DisplayMember);null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Start Date",e.DisplayMember="startdate",e.DataType="DATE",e.ReadOnly=!0,e.Width=95,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="End Date",e.DisplayMember="enddate",e.DataType="DATE",e.ReadOnly=!0,e.Width=95,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Tower",e.DisplayMember="property",e.ReadOnly=!0,e.Width=150,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Unit",e.DisplayMember="unit",e.ReadOnly=!0,e.Width=100,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Tenant",e.DisplayMember="Tenant",e.ReadOnly=!0,e.Width=100,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="DocDate",e.DisplayMember="DocDate",e.DataType="DATE",e.ValueMember="EventTime",e.ReadOnly=!D.d.SessionManager.IsActionAssigned(495,"Date Editable in Bulk Posting"),e.Width=90,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Amount",e.DisplayMember="Amount",e.ReadOnly=!0,e.Width=100,e.DataType="FLOAT",i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="No.of invoices",e.DisplayMember="RecurDuration",e.ReadOnly=!0,e.Width=100,e.DataType="FLOAT",i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Doc No",e.DisplayMember="Postedvoucherno",e.DataType="LINK",e.ReadOnly=!0,e.Width=80,e.Click.Subscribe(this,"onClick"),i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Remarks",e.DisplayMember="Remarks",e.ReadOnly=!0,e.Width=90,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),e=new u.O7,e.Header="Narration",e.DisplayMember="Narration",e.ReadOnly=!0,e.Width=90,i=o.find(l=>l.DisplayMember==e.DisplayMember),null!=i&&null!=i?(e.DisplayIndex=i.DisplayIndex,e.Width=i.Width):o.length>0&&(e.IsVisible=!1),n.push(e),n.sort((l,h)=>l.DisplayIndex-h.DisplayIndex).forEach(l=>{this.PstDocGrid.Columns.push(l)}),this.PstDocGrid.TableColumns.push("Select"),this.PstDocGrid.TableColumns.push("ContractNo"),this.PstDocGrid.TableColumns.push("LinkDoc"),this.PstDocGrid.TableColumns.push("startdate"),this.PstDocGrid.TableColumns.push("startdate_Key"),this.PstDocGrid.TableColumns.push("enddate"),this.PstDocGrid.TableColumns.push("enddate_Key"),this.PstDocGrid.TableColumns.push("receiveDate"),this.PstDocGrid.TableColumns.push("VoucherNo"),this.PstDocGrid.TableColumns.push("unit"),this.PstDocGrid.TableColumns.push("property"),this.PstDocGrid.TableColumns.push("Tenant"),this.PstDocGrid.TableColumns.push("unitID"),this.PstDocGrid.TableColumns.push("propertyID"),this.PstDocGrid.TableColumns.push("TenantID"),this.PstDocGrid.TableColumns.push("contractID"),this.PstDocGrid.TableColumns.push("CostCenterID"),this.PstDocGrid.TableColumns.push("NodeID"),this.PstDocGrid.TableColumns.push("DocDate"),this.PstDocGrid.TableColumns.push("Postedvoucherno"),this.PstDocGrid.TableColumns.push("EventTime"),this.PstDocGrid.TableColumns.push("SchEventID"),this.PstDocGrid.TableColumns.push("SchGUID"),this.PstDocGrid.TableColumns.push("RecurMethod"),this.PstDocGrid.TableColumns.push("AttachmentID"),this.PstDocGrid.TableColumns.push("SubCostCenterID"),this.PstDocGrid.TableColumns.push("PostedDocid"),this.PstDocGrid.TableColumns.push("Remarks"),this.PstDocGrid.TableColumns.push("Narration"),this.PstDocGrid.TableColumns.push("Amount"),this.PstDocGrid.TableColumns.push("RecurDuration"),this.PstDocGrid.TableColumns.push("TermSetAccID"),this.PstDocGrid.SearchVisible=!0,this.PstDocGrid.AddSearchCols()}onClick(){null!=this.PstDocGrid.SelectedItem&&!d.J0.IsEmpty(this.PstDocGrid.SelectedItem.PostedDocid)&&!d.J0.IsEmpty(this.PstDocGrid.SelectedItem.SubCostCenterID)&&(event.preventDefault(),N.RibbonExtViewModel.LoadDocument_2(parseInt(this.PstDocGrid.SelectedItem.SubCostCenterID.toString()),parseInt(this.PstDocGrid.SelectedItem.PostedDocid.toString())))}OpenDoc(){Logger.InfoLog("BulkInvoicePostingViewModel ::Entering OpenDoc"),null!=this.PstDocGrid.SelectedItem&&(""==d.J0.String(this.PstDocGrid.SelectedItem.Postedvoucherno)?N.RibbonExtViewModel.OpenRecurDocument(this.PstDocGrid.SelectedItem):this.onClick()),Logger.InfoLog("BulkInvoicePostingViewModel ::Exiting OpenDoc")}Opencont(){if(null!=this.PstDocGrid.SelectedItem&&""!=this.PstDocGrid.SelectedItem.contractID.toString()){let s=new x.AddEditRenContractViewModel;s.AddEditRenContractViewModel_1(210==this.FAID?104:95,parseInt(this.PstDocGrid.SelectedItem.contractID.toString()),!1,1,parseInt(this.PstDocGrid.SelectedItem.contractID.toString())),D.d.page.addNewTab({component:se.AddEditRentalContractComponent,params:{obj:s}})}}FillData(s){this.Title=this.FromDate?this.ToDate?this.FromDate.ToString(D.d.SessionManager.Preferences["Date Format"])+" - "+this.ToDate.ToString(D.d.SessionManager.Preferences["Date Format"]):this.FromDate.ToString(D.d.SessionManager.Preferences["Date Format"]):"";var e=this.PstDocGrid.Columns.find(n=>"Postedvoucherno"==n.DisplayMember),o=this.PstDocGrid.Columns.find(n=>"Remarks"==n.DisplayMember);if("1"==this.stat||212==this.FAID?(e.IsVisible=!1,o.IsVisible=!0):(e.IsVisible=!0,o.IsVisible=!1),this.PstDocGrid.Clear(),null!=s&&s.Tables.length>0&&!s.Columns[0].Contains("ErrorMessage"))for(let n=0;n<s.Tables[0].length;n++){let i=this.PstDocGrid.NewRow();i.Select=!1,i.LinkDoc="Document",i.contractID=d.J0.String(s.Tables[0][n].ContractID),i.ContractNo=d.J0.String(s.Tables[0][n].sno),d.J0.IsEmpty(s.Tables[0][n].startdate)||(i.startdate=d.J0.ParseDate(d.J0.String(s.Tables[0][n].startdate)).ToString(D.d.SessionManager.Preferences["Date Format"])),i.startdate_Key=d.J0.ParseDate(d.J0.String(s.Tables[0][n].startdate)),d.J0.IsEmpty(s.Tables[0][n].enddate)||(i.enddate=d.J0.ParseDate(s.Tables[0][n].enddate.toString()).ToString(D.d.SessionManager.Preferences["Date Format"]),i.enddate_Key=d.J0.ParseDate(s.Tables[0][n].enddate.toString())),212!=this.FAID&&(i.VoucherNo=d.J0.String(s.Tables[0][n].VoucherNo),i.Postedvoucherno=d.J0.String(s.Tables[0][n].POstedvoucherno),d.J0.IsEmpty(s.Tables[0][n].EventTime)||(i.DocDate=d.J0.ParseDate(s.Tables[0][n].EventTime.toString()).ToString(D.d.SessionManager.Preferences["Date Format"]),i.EventTime=d.J0.ParseDate(s.Tables[0][n].EventTime.toString()),i.Narration=" for the Period of ("+i.DocDate.toString(),s.Columns[0].Contains("Todate")&&!d.J0.IsEmpty(s.Tables[0][n].Todate)&&(i.Narration=i.Narration.toString()+"-"+new Date(s.Tables[0][n].Todate.toString()).AddDays(-1).ToString(D.d.SessionManager.Preferences["Date Format"])),i.Narration=i.Narration.toString()+")"),i.SchEventID=d.J0.String(s.Tables[0][n].SchEventID),i.SchGUID=d.J0.String(s.Tables[0][n].GUID),i.RecurMethod=d.J0.String(s.Tables[0][n].RecurMethod),i.AttachmentID=d.J0.String(s.Tables[0][n].AttachmentID),i.CostCenterID=d.J0.String(s.Tables[0][n].CostCenterID),i.NodeID=d.J0.String(s.Tables[0][n].NodeID),i.SubCostCenterID=d.J0.String(s.Tables[0][n].SubCostCenterID),i.PostedDocid=d.J0.String(s.Tables[0][n].PostedDocid),i.Amount=d.J0.String(s.Tables[0][n].Amount)),s.Columns[0].Contains("RecurDuration")&&(i.RecurDuration=s.Tables[0][n].RecurDuration),s.Columns[0].Contains("TermSetAccID")&&(i.TermSetAccID=s.Tables[0][n].TermSetAccID),i.unit=s.Tables[0][n].unitName,i.property=d.J0.String(s.Tables[0][n].propertyName),i.Tenant=d.J0.String(s.Tables[0][n].firstName),i.Remarks="",i.unitID=s.Tables[0][n].unitid,i.propertyID=d.J0.String(s.Tables[0][n].Propertyid),i.TenantID=d.J0.String(s.Tables[0][n].TenantID);for(let c=0;c<this.PstDocGrid.Columns.length;c++)this.PstDocGrid.Columns[c].DisplayMember.startsWith("DIM")&&s.Columns[0].Contains(this.PstDocGrid.Columns[c].DisplayMember)&&(i[this.PstDocGrid.Columns[c].DisplayMember]=d.J0.String(s.Tables[0][n][this.PstDocGrid.Columns[c].DisplayMember]));this.PstDocGrid.addRow(i)}this.PstDocGrid.UpdateFooter(),this.PstDocGrid.RefreshColumns()}save(){var s=this;return(0,C.A)(function*(){s.ProgressValue=1;let e=s.PstDocGrid.Table.filter(i=>1==i.Select);s.ProgressMax=e.length;let o,n=null;for(let i=0;i<e.length;i++,s.ProgressValue++){s.InProgress=s.ProgressValue+" of "+s.ProgressMax;let c=0;if(d.J0.IsEmpty(e[i].contractID)||(c=parseInt(e[i].contractID.toString())),c>0)if(s.IsCancel)D.d.rental.CancelTermination(95,c).subscribe(l=>{e[i].Remarks=l.Message,o=l.RetValue},l=>{alert(JSON.stringify(l)),console.log("BulkInvoicePosting : "+JSON.stringify(l))});else{null==n?(n=new x.AddEditRenContractViewModel,n.AddEditRenContractViewModel_1(95,c,!1,1,c)):(n.ContractID=c,n.LoadEditData(null),n.CalculateFooter(),n.PropID=n.Property.SelectedValue,n.UnitTempID=n.Unit.SelectedValue),n.IsBulkterm=!0;let l=n.GetContractNunber();n.TerminateContracts=new te.L(n,c,l,1),n.TerminateContracts.TerminationDate.Date=s.TerminationDate.Date,n.TerminateContracts.TerminationPostDate.Date=s.TermPostingDate.Date,d.J0.IsEmpty(e[i].TermSetAccID)||(n.TermSetAccID=parseInt(e[i].TermSetAccID.toString())),n.TerminateContract(c,1,s.TerminationDate.Date.Date,1,!0),e[i].Remarks=n.DisplayMessage}}})()}SelectUnselectAll(s){for(let e=0;e<this.PstDocGrid.Table.length;e++)this.PstDocGrid.Table[e].Select=this.ButtonPostVisible?!!d.J0.IsEmpty(this.PstDocGrid.Table[e].Remarks)&&s:!d.J0.IsEmpty(this.PstDocGrid.Table[e].Postedvoucherno)&&s}ButtonSave(s){var e=this;return(0,C.A)(function*(){if(e.DisplayMessage="","Customize"!=s&&"Export"!=s)if("POST"==s.toString()){if(212==e.FAID){for(let o=0;o<e.PstDocGrid.Table.length;o++)if(!d.J0.IsEmpty(e.PstDocGrid.Table[o].Select)&&(0,v.yG0)(e.PstDocGrid.Table[o].Select.toString())){if(!d.J0.IsEmpty(e.PstDocGrid.Table[o].startdate_Key)&&e.TerminationDate.Date<new Date(e.PstDocGrid.Table[o].startdate_Key.toString()))return e.DisplayMessage="Termination date should be higher than contract start date",e.MessageVisibility=!0,void e.PstDocGrid.Setselectedrow(o);if(!d.J0.IsEmpty(e.PstDocGrid.Table[o].enddate_Key)&&e.TerminationDate.Date>=new Date(e.PstDocGrid.Table[o].enddate_Key.toString()))return e.DisplayMessage="Termination date should be lower than contract end date",e.MessageVisibility=!0,void e.PstDocGrid.Setselectedrow(o)}return e.IsCancel=!1,e.ProgressMessage="Terminating Contracts.Please wait...",e.ShowProcessDialog=!0,e.save(),void(e.ShowProcessDialog=!1)}if(e.ClubInvoice.IsChecked){e.PstDocGrid.TableColumns.Contains("DocumentDate")||e.PstDocGrid.TableColumns.push("DocumentDate");let o=e.PstDocGrid.Table.filter(l=>1==l.Select),n="",i=0;o.length>0&&o.SortBy(["contractID"]);let c=[];for(let l=0;l<o.length;l++)if(n!=o[l].contractID.toString()){n=o[l].contractID.toString();let h={};h.contractID=o[l].contractID.toString(),h.sno=o[l].ContractNo.toString(),d.J0.IsEmpty(o[l].EventTime)?(h.Dt=(new Date).OnlyDate().ToString(D.d.SessionManager.Preferences["Date Format"]),h.Dt_Key=(new Date).OnlyDate()):(h.Dt=o[l].DocDate.toString(),h.Dt_Key=d.J0.ParseDate(o[l].EventTime.toString())),c.push(h),i++}if(i>0){const{UpdatePayTermsViewModel:l}=yield r.e(6594).then(r.bind(r,96594)),{UpdatepaytermsComponent:h}=yield r.e(2076).then(r.bind(r,97160));{let p=new l("AddEditRenContractViewModel");p.UpdatePayTermsViewModel_2(e),p.PstDocGrid.Columns=[],p.DisplayName="Post Invoices";let m=new u.O7;m.Header="Tracking No.",m.DisplayMember="sno",m.ReadOnly=!0,m.DisableTab=!0,m.Width=150,p.PstDocGrid.Columns.push(m),m=new u.O7,m.Header="Posting date",m.DisplayMember="Dt",m.Width=150,m.DataType="DATE",p.PstDocGrid.Columns.push(m),p.PstDocGrid.Width="400",p.PstDocGrid.Table=c,p.PstDocGrid.SelectAll.Visible=!1,p.PstDocGrid.SearchVisible=!1,D.d.page.ShowDialog(p,h,{ShowCenter:!0,Title:p.DisplayName},()=>{if(p.DailogResult){for(let b=0;b<p.PstDocGrid.Table.length;b++)o=e.PstDocGrid.Table.filter(T=>T.contractID==p.PstDocGrid.Table[b].contractID.toString()&&1==T.Select),o.forEach(T=>{d.J0.IsEmpty(p.PstDocGrid.Table[b].Dt_Key)||(T.DocumentDate=d.J0.ParseDate(p.PstDocGrid.Table[b].Dt_Key.toString()))});e.TempAutoPostDocs(e.PstDocGrid.Table,e.PstDocGrid.TableColumns,e.ClubInvoice.IsChecked)}})}}}else e.TempAutoPostDocs(e.PstDocGrid.Table,e.PstDocGrid.TableColumns,e.ClubInvoice.IsChecked)}else if("OK"==s.toString())e.vModel&&(e.vModel.ShowProcessDialog=!1);else if("UnPost"==s.toString()){if(212==e.FAID)return e.IsCancel=!0,e.ProgressMessage="Cancelling Terminated Contracts.Please wait...",e.ShowProcessDialog=!0,e.save(),void(e.ShowProcessDialog=!1);e.UnPost()}else{let o=new R(e,"Refresh");D.d.page.ShowDialog(o,A,{HideClose:!0,ShowCenter:!0,Title:e.DisplayName})}})()}get Progress(){return this.vModel?this.vModel.ProgressValue+"/"+this.vModel.ProgressMax:""}AutoPostDocs(s){var e=this;return(0,C.A)(function*(o,n=[],i){const{DashBoardNotifViewModel:c}=yield Promise.all([r.e(2911),r.e(5620)]).then(r.bind(r,85620));e.vModel=new c(0),e.vModel.dt=o,e.vModel.ClubInvoice=i,e.vModel.dtGrid=e.PstDocGrid,e.vModel.dtColumns=n,e.ProgressMessage="Posting documents please wait...",yield e.vModel.save()}).apply(this,arguments)}TempAutoPostDocs(s){var e=this;return(0,C.A)(function*(o,n=[],i){const{DashBoardNotifViewModel:c}=yield Promise.all([r.e(2911),r.e(5620)]).then(r.bind(r,85620));e.vModel=new c(0),e.vModel.ShowProcessDialog=!0,e.ContractList.Clear(),e.IdList.Clear();let l=o.filter(h=>1==h.Select);for(let h=0;h<l.length;h++)e.ContractList.push(l[h].contractID),Object.keys(l[h]).Contains("id")&&e.IdList.push(l[h].id);D.d.rental.BulkPosting(o,n,i,e.DisplayName,e.FAID).subscribe(h=>{let p=h;if(p&&p.Tables&&p.Tables.length>0&&p.Tables[0].length>0)for(let m=0;m<e.ContractList.length;m++){const b=e.ContractList[m],T=e.IdList[m];let P=e.PstDocGrid.Table.filter(f=>f.contractID==b&&f.id==T),w=p.Tables[0].filter(f=>f.contractID==b&&f.id==T);for(let f=0;f<P.length;f++)e.PstDocGrid.TableColumns.Contains("Remarks")&&(P[f].Remarks=w[0].Remarks,P[f].Postedvoucherno=w[0].Postedvoucherno,P[f].Select=!1),e.PstDocGrid.updateRow(P[f])}e.vModel.ShowProcessDialog=!1})}).apply(this,arguments)}UpdGrid(){var s=this;return(0,C.A)(function*(){for(let e=0;e<s.PstDocGrid.Table.length;e++)1==s.PstDocGrid.Table[e].Select&&(s.PstDocGrid.Table[e].Select=!1,s.PstDocGrid.updateRow(s.PstDocGrid.Table[e]))})()}GetExportHTML(){Logger.InfoLog("BulkInvoicePostingViewModel:: inside GetExportHTML ");let s="",e="";s+="<html><meta charset='utf-8' /><body style='color:blac;background-color:white;'>",e+=".hdr{text-align:cente; padding:5px; background-color:#4F81BD;color:white;font-family:Arial;font-size:11pt} ",e+=".grp{padding:2p; background-color:#87CEEB; color:#FFFCF7;font-family:arial; font-size:10pt;}",e+=".tot{background-color:whit; color:red;font-family:arial; font-weight:bold; font-size:8pt;}",e+=".alt{background-color:whitesmok; color:black; font-family:arial; font-size:9pt; align:right;}",s+="<style>"+e.toString()+"</style>";let i,n=0;for(let c=0;c<this.PstDocGrid.Columns.length;c++)n+=this.PstDocGrid.Columns[c].Width;s+="<table>",s+="\r\n<tr><td align='center'><h2>",s+=D.d.SessionManager.CompanyName,s+="</h2></td></tr>",s+="\r\n<tr><td align='center'><h3 style='vertical-align:middl;'>",s+=this.DisplayName,s+="</h3></td></tr>",s+="\r\n<tr><td align='center'>",s+=" From :  "+this.FromDate.ToString(D.d.SessionManager.Preferences["Date Format"]),s+=" &nbs;&nbsp;&nbsp;To :  "+this.ToDate.ToString(D.d.SessionManager.Preferences["Date Format"]),s+="</td></tr>",s+="<tr><td style='padding-top:10p;'><table border=1 width='"+n+"' style='border-collapse:collapse;  font-family:arial; font-size:9pt;' >",s+="<COLGROUP>";for(let c=0;c<this.PstDocGrid.Columns.length;c++)s+="FLOAT"==this.PstDocGrid.Columns[c].DataType?"<COL style='text-align:righ;'>":"<COL style=''>";s+="</COLGROUP>",s+="<tr style=''>";for(let c=0;c<this.PstDocGrid.Columns.length;c++)s+="<th class='hdr' width='"+this.PstDocGrid.Columns[c].Width,s+="' >",s+=this.PstDocGrid.Columns[c].Header,s+="</th>";s+="</tr>";for(let c=0;c<this.PstDocGrid.Table.length;c++){s+="<tr",c%2==1&&(s+=" class=alt"),s+=">";for(let l=0;l<this.PstDocGrid.Columns.length;l++)s+="<td",s+="FLOAT"==this.PstDocGrid.Columns[l].DataType?" align='right'":" align='left'",s+=">",i="PactComboBox"==this.PstDocGrid.Columns[l].DataType?this.PstDocGrid.Columns[l].ValueBinding+"_Key":this.PstDocGrid.Columns[l].DisplayMember,this.PstDocGrid.TableColumns.Contains(i)&&("ChequeNumber"==i&&this.PstDocGrid.Table[c][i].toString().startsWith("0")?s+="'"+this.PstDocGrid.Table[c][i].toString():s+=this.PstDocGrid.Table[c][i].toString()),s+="</td>";s+="</tr>"}return s+="</table>",s+="</td></tr></table>",s+="</body><html>",Logger.InfoLog("BulkInvoicePostingViewModel:: exiting GetExportHTML "),s}UnPost(){let e,o=0;for(let i=0;i<this.PstDocGrid.Table.length;i++)if(!d.J0.IsEmpty(this.PstDocGrid.Table[i].Postedvoucherno)&&!d.J0.IsEmpty(this.PstDocGrid.Table[i].Select)&&(0,v.yG0)(this.PstDocGrid.Table[i].Select)){e=0;let c=D.d.rental.UnPostInvoice(parseInt(this.PstDocGrid.Table[i].SubCostCenterID.toString()),parseInt(this.PstDocGrid.Table[i].PostedDocid.toString()),parseInt(this.PstDocGrid.Table[i].SchEventID.toString()),95);this.DisplayMessage=c.Message,e=c.RetValue,e>0&&(this.PstDocGrid.Table[i].Postedvoucherno=null,this.PstDocGrid.Table[i].Select=!1,this.PstDocGrid.updateRow(this.PstDocGrid.Table[i]),this.PstDocGrid.SelectAll.IsChecked=!1,o++)}this.MessageVisibility=!0,o>0&&(this.DisplayMessage="Deleted "+o)}}var oe=r(24649);function ae(a,s){if(1&a&&(t.j41(0,"label",16),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.SpI("\n                    ",e.obj.Title,"\n                ")}}function le(a,s){if(1&a&&t.eu8(0,17),2&a){const e=t.XpG();t.Y8G("obj",e.obj.ClubInvoice)}}function re(a,s){if(1&a&&t.eu8(0,17),2&a){const e=t.XpG();t.Y8G("obj",e.obj.TerminationDate)}}function ce(a,s){if(1&a&&t.eu8(0,17),2&a){const e=t.XpG();t.Y8G("obj",e.obj.TermPostingDate)}}function de(a,s){if(1&a){const e=t.RV6();t.j41(0,"span",9),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.obj.ButtonSave("POST"))}),t.nrm(1,"i",18),t.EFF(2),t.k0s()}if(2&a){const e=t.XpG();t.R7$(2),t.JRh(e.obj.BtnText)}}function De(a,s){if(1&a){const e=t.RV6();t.j41(0,"span",9),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.obj.ButtonSave("UnPost"))}),t.nrm(1,"i",19),t.EFF(2),t.k0s()}if(2&a){const e=t.XpG();t.R7$(2),t.JRh(e.obj.BtnUnpostText)}}function he(a,s){1&a&&(t.j41(0,"div",20),t.EFF(1,"\n"),t.k0s())}function pe(a,s){1&a&&(t.j41(0,"div",21),t.EFF(1,"\n    "),t.EFF(2,"\n    "),t.j41(3,"span"),t.EFF(4,"Posting Documents : "),t.k0s(),t.EFF(5,"\n"),t.k0s())}function ue(a,s){1&a&&(t.j41(0,"div",20),t.EFF(1,"\n"),t.k0s())}function me(a,s){1&a&&(t.j41(0,"div",21),t.EFF(1,"\n    "),t.EFF(2,"\n    "),t.j41(3,"span"),t.EFF(4,"Posting Documents : "),t.k0s(),t.EFF(5,"\n"),t.k0s())}let fe=(()=>{class a extends G.V{constructor(){super(),this.form=new V.gE({})}ngOnInit(){this.obj=this.params.obj,console.log(this.obj)}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-bulk-invoice-posting"]],inputs:{obj:"obj"},standalone:!1,features:[t.Vt3],decls:49,vars:16,consts:[["id","maincontainer",1,"maincontainer"],[2,"flex-direction","column","justify-content","flex-end","width","100%","height","100%"],[1,"page-header"],[1,"page-title"],["style","font-size: 14px;",4,"ngIf"],[2,"display","flex"],["FieldDirective","",3,"obj",4,"ngIf"],[1,"btnMetroDiv","secondary-btn-group"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-gears"],[1,"main_div"],[1,"documentgrid","row","form-row",2,"width","100%","height","100%","padding","4px"],[2,"width","100%","height","100%",3,"obj","group"],["style","position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; background-color: #666; opacity: 0.1;",4,"ngIf"],["style","position: absolute;   left: 50%; top: 50%; background-color: white; margin: auto; transform: translate(-50%, -50%);font-size: 20px;padding: 10px; z-index: 200;",4,"ngIf"],[2,"font-size","14px"],["FieldDirective","",3,"obj"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"],[1,"fa-light","fa-save"],[2,"position","absolute","width","100%","height","100%","left","0px","top","0px","background-color","#666","opacity","0.1"],[2,"position","absolute","left","50%","top","50%","background-color","white","margin","auto","transform","translate(-50%, -50%)","font-size","20px","padding","10px","z-index","200"]],template:function(o,n){1&o&&(t.j41(0,"div",0),t.EFF(1,"\n    "),t.j41(2,"div",1),t.EFF(3,"\n        "),t.j41(4,"div",2),t.EFF(5,"\n            "),t.j41(6,"label",3),t.EFF(7),t.DNE(8,ae,2,1,"label",4),t.EFF(9,"\n            "),t.k0s(),t.EFF(10,"  \n            "),t.j41(11,"div",5),t.DNE(12,le,1,1,"ng-container",6),t.EFF(13,"\n                "),t.DNE(14,re,1,1,"ng-container",6),t.EFF(15,"\n                "),t.DNE(16,ce,1,1,"ng-container",6),t.k0s(),t.EFF(17,"         \n            "),t.j41(18,"div",7),t.EFF(19,"\n                "),t.DNE(20,de,3,1,"span",8),t.EFF(21,"\n                "),t.DNE(22,De,3,1,"span",8),t.EFF(23,"\n                "),t.j41(24,"span",9),t.bIt("click",function(){return n.obj.ButtonSave("Regenerate")}),t.nrm(25,"i",10),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.EFF(28,"\n                "),t.EFF(29,"\n            "),t.k0s(),t.EFF(30,"\n        "),t.k0s(),t.EFF(31,"\n        "),t.j41(32,"div",11),t.EFF(33,"\n            "),t.j41(34,"div",12),t.EFF(35,"\n                "),t.nrm(36,"app-PactGridView",13),t.EFF(37,"\n            "),t.k0s(),t.EFF(38,"\n        "),t.k0s(),t.EFF(39,"\n    "),t.k0s(),t.EFF(40,"\n"),t.k0s(),t.EFF(41,"\n"),t.DNE(42,he,2,0,"div",14),t.EFF(43,"\n"),t.DNE(44,pe,6,0,"div",15),t.EFF(45,"\n\n"),t.DNE(46,ue,2,0,"div",14),t.EFF(47,"\n"),t.DNE(48,me,6,0,"div",15)),2&o&&(t.R7$(7),t.SpI("\n                ",n.obj.DisplayName,"\n                "),t.R7$(),t.Y8G("ngIf",!n.obj.TerminationDate.Visible),t.R7$(4),t.Y8G("ngIf",!n.obj.TerminationDate.Visible),t.R7$(2),t.Y8G("ngIf",n.obj.TerminationDate.Visible),t.R7$(2),t.Y8G("ngIf",n.obj.TermPostingDate.Visible),t.R7$(4),t.Y8G("ngIf",n.obj.ButtonPostVisible),t.R7$(2),t.Y8G("ngIf",!n.obj.ButtonPostVisible),t.R7$(4),t.JRh(t.bMT(27,14,"Regenerate")),t.R7$(10),t.Y8G("obj",n.obj.PstDocGrid)("group",n.form),t.R7$(6),t.Y8G("ngIf",null==n.obj.vModel?null:n.obj.vModel.ShowProcessDialog),t.R7$(2),t.Y8G("ngIf",null==n.obj.vModel?null:n.obj.vModel.ShowProcessDialog),t.R7$(2),t.Y8G("ngIf",n.obj.ShowProcessDialog),t.R7$(2),t.Y8G("ngIf",n.obj.ShowProcessDialog))},dependencies:[y.bT,M._,oe.X,j.D9],encapsulation:2})}}return a})();class ge{static LoadRentalScreen(s){if(106!=s.FeatureID||167!=s.FeatureActionTypeID){if(103==s.FeatureID)return{component:I.TreeViewPageComponent,params:{ScreenName:s.ScreenName,FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};if(129==s.FeatureID)return{component:I.TreeViewPageComponent,params:{ScreenName:s.ScreenName,FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"}}switch(s.FeatureActionID.ToString()){case"190":case"210":case"212":let e;e=new ne(s.ScreenName,s.FeatureActionID),D.d.page.addNewTab({title:s.ScreenName,component:fe,params:{obj:e}});break;case"514":case"3742":return{component:I.TreeViewPageComponent,params:{ScreenName:s.ScreenName,FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};case"3016":return{component:I.TreeViewPageComponent,params:{ScreenName:D.d.GetResource("TNT_List"),FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};case"602":return{component:I.TreeViewPageComponent,params:{ScreenName:D.d.GetResource("RENTALSProperty_ListofProperties"),FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};case"3706":return{component:I.TreeViewPageComponent,params:{ScreenName:D.d.GetResource("REN_Units"),FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"}}return{}}static ShowQuickAdd_RENIsQuick(s,e){return(0,C.A)(function*(){if(94==s){const{QuickAddTenantComponent:o}=yield r.e(4116).then(r.bind(r,44116)),{QuickAddTenantViewModel:n}=yield Promise.all([r.e(4359),r.e(2076),r.e(1804)]).then(r.bind(r,9423));let i=new n(e,94,1,!1,null);D.d.page.ShowDialog(i,o,{Title:i.Title,ShowCenter:!0})}return 0})()}static ShowQuickAdd_REN(s,e){return(0,C.A)(function*(){if(92==s){D.d.page.ShowLoading=!0;const{AddEditPropertyComponent:o}=yield r.e(552).then(r.bind(r,20552)),{AddEditPropertyViewModel:n}=yield Promise.resolve().then(r.bind(r,65922));let i=new n(parseInt(e),1,!1);D.d.page.addNewTab({title:i.Title,component:o,params:{obj:i}})}else if(93==s){D.d.page.ShowLoading=!0;const{AddEditUnitsComponent:o}=yield r.e(4587).then(r.bind(r,34587)),{AddEditUnitsViewModel:n}=yield Promise.resolve().then(r.bind(r,21943));let i=new n(e,!1,0,0);D.d.page.addNewTab({title:i.Title,component:o,params:{obj:i}})}else if(94==s){const{AddEditTenantComponent:o}=yield Promise.all([r.e(2076),r.e(9911)]).then(r.bind(r,48080)),{AddEditTenantViewModel:n}=yield Promise.resolve().then(r.bind(r,3579));let i=new n(e,0,!1);D.d.page.addNewTab({title:i.Title,component:o,params:{obj:i}})}else if(95==s){const{AddEditRentalContractComponent:o}=yield Promise.resolve().then(r.bind(r,40983)),{AddEditRenContractViewModel:n}=yield Promise.resolve().then(r.bind(r,41361));let i=new n;i.AddEditRenContractViewModel_1(s,e,!1,1,e),D.d.page.addNewTab({title:i.Title,component:o,params:{obj:i}})}})()}}}}]);
"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[3903],{56284:(b,h,s)=>{s.r(h),s.d(h,{VouchersListViewModel:()=>C});var a=s(74523),d=s(76199),m=s(29702),D=s(99393),r=s(9659),i=s(66148);class C extends d.g{constructor(t,n,l,e,o){super(),this.Parent=null,this.CostCenterID=0,this.docType=0,this.ColName="",this.filterText="",Logger.InfoLog("VouchersListViewModel:: Entering VouchersListViewModel"),this.CostCenterID=t,this.ColName=n,this.docType=e,this.filterText=l,this.Parent=o,this.InitGrid()}InitGrid(){let t,n=this.Parent.ScreenObject.GetVouchersList(this.CostCenterID,this.ColName,this.filterText,this.docType);this.Documents=new m.vv,this.Documents.OnLinkClick.Subscribe(this,"OnGridLinkClick"),this.Documents.Width="";let e,l=[];e=new D.O7,e.Header="VoucherNo",e.DisplayMember="VoucherNo",e.DataType="LINK",e.ReadOnly=!0,e.IsFrozen=!0,e.Width=200,l.push(e),e=new D.O7,e.Header="Document Name",e.DisplayMember="DocumentName",e.DataType="TEXT",e.ReadOnly=!0,e.IsFrozen=!0,e.Width=200,l.push(e),this.Documents.Table=[],this.Documents.TableColumns.push("VoucherNo"),this.Documents.TableColumns.push("DocPrefix"),this.Documents.TableColumns.push("DocNumber"),this.Documents.TableColumns.push("CostCenterID"),this.Documents.TableColumns.push("DocumentName");try{if(n.Tables[0].length>0)for(let o=0;o<n.Tables[0].length;o++)t=this.Documents.NewRow(),t.VoucherNo=i.J0.String(n.Tables[0][o].VoucherNo),t.DocPrefix=i.J0.String(n.Tables[0][o].DocPrefix),t.DocNumber=i.J0.String(n.Tables[0][o].DocNumber),t.CostCenterID=i.J0.String(n.Tables[0][o].CostCenterID),t.DocumentName=i.J0.String(n.Tables[0][o].DocumentName),this.Documents.addRow(t)}catch{}this.Documents.Columns=l}OnButtonClick(t){("Cancel"==t||"OK"==t)&&r.d.page.HideDialog(this.PopUpGUID)}OnGridLinkClick(t,n,l){var e=this;return(0,a.A)(function*(){if("VoucherNo"==n&&i.J0.String(t.DocNumber).length>0){r.d.page.HideDialog(e.PopUpGUID);const{AddEditDocumentViewModel:o}=yield Promise.resolve().then(s.bind(s,27490)),{AddEditDocumentComponent:T}=yield Promise.resolve().then(s.bind(s,8405));let c=new o(parseInt(t.CostCenterID.toString()),t.DocumentName.toString(),!0),u={};Object.assign(u,{component:T,params:{obj:c}}),r.d.page.addNewTab(u),r.d.page.SetActiveTab(u),c.ScreenObject.DocPrefix.ComboBox.SelectedValue=i.J0.String(t.DocPrefix),c.ScreenObject.DocPrefix.TextBox.Text=i.J0.String(t.DocNumber),c.OnDocPrefixChanged("lostFocus"),c.ScreenObject.FillDocumentPrefix(!0)}})()}}}}]);
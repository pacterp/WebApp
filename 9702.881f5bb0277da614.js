(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[9702],{7321:(U,L,u)=>{"use strict";u.d(L,{vv:()=>F});var f=u(74523),E=u(58170),d=u(26336),D=u(11592),A=u(84151),v=u(27730),w=u(32040),x=u(43794),m=u(43767),t=u(89731),r=u(80197),g=u(75467);class F extends E.MI{get rowid(){return++this._rowid}NewRow(){let i={id:this.rowid};return this.TableNewRow.Call(i),i}setRowid(){this.Table.forEach(s=>{s.id=this.rowid})}get ReadOnlyBody(){return this._ReadOnlyBody}set ReadOnlyBody(i){i!=this._ReadOnlyBody&&(this._ReadOnlyBody=i,this.gridObj&&this.setOptionCallback.Call())}get ContextMenuClick(){return this.ContextMenuClickSubject.asObservable()}get IsAltBG(){return this._IsAltBG}set IsAltBG(i){i!=this._IsAltBG&&(this._IsAltBG=i)}get Columns(){return this._Columns}set Columns(i){this._Columns=i,this.SearchVisible&&this.AddSearchCols(),this.LoadMobileObj(),this.RefreshGridColumns.Call()}get Table(){return this._Table}get TableUI(){return this._Table}set Table(i){this._Table=i,null!=this.SortPopup&&this.SortPopup.Sort&&this.RefreshSno(),this.duplicateTable=this._Table}LoadMobileObj(){var i=this;return(0,f.A)(function*(){if("TravelRequestViewModel"!=i.MobileAddLine?.ClassName&&(i.ShowBodyAsFields||w.d.IsMobile&&i.AllowMobileAddLine)){const{RibbonMobile:s}=yield Promise.all([u.e(895),u.e(2076),u.e(7256)]).then(u.bind(u,47256));i.MobileAddLine=s.GetMobileAddLine(i),i.MobileAddLine.AttendanceDate=i.attendanceDate,i.CallbackOnLoad.IsSubscribed&&i.CallbackOnLoad.Call()}})()}set RefreshGrid(i){this.RefreshGridSubject.Call()}get SelectedItem(){return this._SelectedItem}set SelectedItem(i){i!=this._SelectedItem&&(this.OnRowSelection.IsSubscribed&&this.OnRowSelection.Call(null!=i?i:null),this._SelectedItem=i)}get SearchCombo(){return this._SearchCombo}set SearchCombo(i){i!=this._SearchCombo&&(this._SearchCombo=i)}get SearchVisible(){return this._SearchVisible}set SearchVisible(i){this._SearchVisible!=i&&(this._SearchVisible=i,i&&(this.SearchButtonClick.Subscribe(this,"OnSearchClick"),null==this.SearchCols&&(this.SearchCols=new v.y$,this.SearchCols.SelectionChangedCommand.Subscribe(this,"onoptionChged"),this.SearchCols.Width="200",this._Columns?.length>0&&this.AddSearchCols()),null==this.SearchOptions&&(this.SearchOptions=new v.y$,this.SearchOptions.SelectionChangedCommand.Subscribe(this,"onoptionChged"),this.SearchOptions.Width="160",this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Com_Equals"),"1")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Com_NotEquals"),"2")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Com_BeginsWith"),"3")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Com_EndsWith"),"4")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Com_Contains"),"5")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Com_NotContains"),"6")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Reports_Lessthan"),"7")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Reports_LessthanOrEqual"),"8")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Reports_Greaterthan"),"9")),this.SearchOptions.Items.push(v._p.ComboBoxItems_2(w.d.translate.instant("Reports_GreaterthanOrEqual"),"10")),this.SearchOptions.SelectedValue="5")))}onoptionChged(i){if(m.J0.IsEmpty(this.SearchCols.SelectedValue)||"FULL_TEXT"==this.SearchCols.SelectedValue||!this.TableColumns.Contains(this.SearchCols.SelectedValue)||"1"!=this.SearchOptions.SelectedValue&&"2"!=this.SearchOptions.SelectedValue)this.SelectedItem=null,this.SearchText.Visible=!0,this.SearchCombo.Visible=!1;else if(this.SelectedItem=null,this.SearchText.Visible=!1,this.SearchCombo.Visible=!0,this.SearchCombo.DBColumnName!=this.SearchCols.SelectedValue){this.SearchCombo.DBColumnName=this.SearchCols.SelectedValue,this.SearchCombo.Items.Clear(),this.SearchCombo.Items.push(v._p.ComboBoxItems_2("",""));for(let s=0;s<this.Table.length;s++)""!=m.J0.String(this.Table[s][this.SearchCols.SelectedValue])&&null==this.SearchCombo.Items.find(c=>c.Value==this.Table[s][this.SearchCols.SelectedValue].toString())&&this.SearchCombo.Items.push(v._p.ComboBoxItems_2(this.Table[s][this.SearchCols.SelectedValue].toString(),this.Table[s][this.SearchCols.SelectedValue].toString()))}}AddSearchCols(){let i;if(this.SearchCols.Items.Clear(),this.SearchCols.Items.push(v._p.ComboBoxItems_3(w.d.translate.instant("Tree_Fulltext"),"FULL_TEXT","-1")),!m.J0.IsEmpty(this._Columns))for(let s=this.SearchColStartIndex;s<this._Columns.length;s++)this._Columns[s].IsVisible&&"Select"!=this._Columns[s].DisplayMember&&"DocSeqNo"!=this._Columns[s].DisplayMember&&(i=v._p.ComboBoxItems_3(this._Columns[s].Header,this._Columns[s].DisplayMember,s.toString()),w.d.SessionManager.StringIsNullOrEmpty(this._Columns[s].DataType)||(i.Aliasname=this._Columns[s].DataType.toUpperCase()),"PACTCOMBOBOX"==i.Aliasname?i.Value=this._Columns[s].ValueBinding+"_Key":"COMBOBOX"==i.Aliasname&&(i.Value=this._Columns[s].ValueBinding),this.SearchCols.Items.push(i));this.SearchCols.Items.length>0&&(this.SearchCols.SelectedValue=this.SearchCols.Items[0].Value)}constructor(i=!1){super(),this._rowid=0,this.onMultiTypeColumnChanged=new x.B,this.CallbackOnLoad=new E.Yk,this.AllowMobileAddLine=!1,this.ShowBodyAsFields=!1,this.ShowBodyAsPopupFields=!1,this.TosetFocus=new E.Yk,this.ShowTotals=!1,this.ShowFooterTotals=0,this.gridtype="",this.IsDocument=!1,this.GridView=!1,this.GridTypeID=0,this.CCID=0,this.HideZeroHeightRows=!1,this.callParentObjMethod=new E.Yk,this.BeginEdit=new E.Yk,this.OnBeginEdit=new E.Yk,this.CellEditEnding=new E.Yk,this.OnCellEditEnding=new E.Yk,this.CellChange=new E.Yk,this.OnRowSelection=new E.Yk,this.RowSelectionChange=new E.Yk,this.DoubleClick=new E.Yk,this.BeforeRowDeleting=new E.Yk,this.OnLinkClick=new E.Yk,this.SearchButtonClick=new E.Yk,this.RefreshGridColumns=new E.Yk,this.RefreshGridSubject=new E.Yk,this.OnPreviewKeyDown=new E.Yk,this.setOptionCallback=new E.Yk,this._ReadOnlyBody=!1,this.BodyVisible=!0,this.ContextMenuClickSubject=new x.B,this.Tag=null,this._IsAltBG=2,this.SetColSize=!1,this.SetFocusongrid=!1,this.ColumnNo=0,this.LineNo=0,this._Columns=[],this.DataTypes=new m.dd,this.TableColumns=[],this.duplicateTable=[],this.attendanceDate=null,this.Height=240,this.MaxHeight=0,this.HeaderHeight=24,this.RowHeight=28,this.AllowReorderColumns=!1,this.CanUserAddRows=!1,this.ColumnHeadersVisible="A;;",this.IsReadOnlyColor=!1,this.CanEvaluateFormulas=!1,this.CanUserDeleteRows=!1,this.CanUserSortColumns=!1,this.CanUserResizeColumns=!0,this.CanDeleteRow=!0,this.CanHideDelete=!1,this._SelectedItem=null,this.GridLines="Vertical",this.SelectedIndex=-1,this.Total=new d.bT,this.CalcTotalsOnDataView=!1,this.IgnoreFormulaKeywords=[],this.oWorkspaceViewModel=null,this.SelectAll=null,this.SearchText=new A.Dw,this.SearchOptions=null,this.SearchCols=null,this._SearchCombo=new v.y$,this._SearchVisible=!1,this.SearchColStartIndex=0,this.SortVisible=!1,this.FilterVisible=!0,this.SortPopup=null,this.FilterPopup=null,this.ContextMenuOpening=new E.Yk,this.ContextMenu={},this.contextVisible=!0,this.kpiList=new Array,this.LineItemEdit=new E.Yk,this.LineItemDelete=new E.Yk,this.IncludeDefaultKeys=!0,this.SearchDefaultFilter="",this.filterObj={},this.IgnoreSelectAllChecked=!1,this.IgnoreOnCheckedChanged=!1,this.TableNewRow=new E.Yk,this.RowDeleted=new E.Yk,this.shortcut=new E.Yk,this._SearchCombo.Visible=!1,this._SearchCombo.Width="200",this.CanEvaluateFormulas=!0,this.SelectAll=new D.c(0),this.SelectAll.CheckedChangedCommand.Subscribe(this,"SelectAllChecked"),this.SelectAll.DBColumnName="Select",this.SelectAll.Label=w.d.GetResource("Selectall"),this.SelectAll.Visible=!1,this.SearchText.Width="200",this._Table=[]}LineItemEditClick(i){this.SelectedItem=i,this.MobileAddLine.ShowMobileAddLineItem(i,0,1)}LineItemDeleteClick(i){this.CanUserDeleteRows&&this.RowDeleted.IsSubscribed&&this.RowDeleted.Call(i)}OnSearchClick(i){("Search"==i||"Filter"==i)&&this.SearchGrid(i)}#e;EvaluateFormulas(i,s=!1){if(null==this.fldDict||null==i)return!1;if(null!=i){for(let O=0;O<this.fldDict.length;O++){let T={Key:this.fldDict.keys[O],Value:this.fldDict.values[O]};if(null==this.IgnoreFormulaKeywords||!this.IgnoreFormulaKeywords.Contains(T.Key)){var b=this.Columns.filter(y=>y.DisplayMember==this.fldDict[T.Key].getFieldName());0==b.length&&(b=this.Columns.filter(y=>y.Header==this.fldDict[T.Key].getFieldName())),b.length>0&&!m.J0.IsEmpty(i[b[0].DisplayMember])?this.fldDict[T.Key].setFieldValue(i[b[0].DisplayMember]):this.fldDict[T.Key].setFieldValue(0)}}this.IncludeDefaultKeys&&(this.TableColumns.Contains("Rate")&&!m.J0.IsEmpty(i.Rate)?this.fldDict.RATE.setFieldValue(i.Rate):this.fldDict.RATE.setFieldValue(0),this.TableColumns.Contains("Qty")&&!m.J0.IsEmpty(i.QTY)?this.fldDict.QTY.setFieldValue(i.Qty):this.fldDict.QTY.setFieldValue(0),this.fldDict.UNITS.setFieldValue(0),this.TableColumns.Contains("Gross")&&!m.J0.IsEmpty(i.Gross)?this.fldDict.GROSS.setFieldValue(i.Gross):this.fldDict.GROSS.setFieldValue(0))}let p,R,C=this.fldDict;for(let O=0;O<this.Columns.length;O++){if(m.J0.IsEmpty(this.Columns[O].Formula))this.Columns[O].DisplayMember.startsWith("dcNum")&&(i["dcCalc"+this.Columns[O].DisplayMember]=i[this.Columns[O].DisplayMember],this.fldDict["Calc"+this.Columns[O].Header].setFieldValue(i[this.Columns[O].DisplayMember]));else{try{R=this.eval.EvaluateExpression(this.Columns[O].Formula,C),this.Columns[O].DisplayMember.startsWith("dcNum")?(1==this.Columns[O].IsCalculated&&(i[this.Columns[O].DisplayMember]=R,this.fldDict[this.Columns[O].Header].setFieldValue(R)),i["dcCalc"+this.Columns[O].DisplayMember]=R,this.fldDict["Calc"+this.Columns[O].Header].setFieldValue(R)):(m.J0.IsNum(R)?(p=m.J0.Double(R),i[this.Columns[O].DisplayMember]=p,R=p):i[this.Columns[O].DisplayMember]=R,this.fldDict[this.Columns[O].DisplayMember].setFieldValue(R))}catch(T){Logger.ErrorLog("PactGridViewModel:: EvaluateFormulas ",T)}this.updateRow(i)}if(!m.J0.IsEmpty(this.Columns[O].Expression))try{if("0"==this.eval.EvaluateExpression(this.Columns[O].Expression,C).toString())return!0}catch{}}return s||this.UpdateTotals(),this.kpiList.length>0&&this.ApplyKPI(i),!1}ConstructFormulaFields(i=!0){this.IncludeDefaultKeys=i,this.eval=new t.CC,this.fldDict=new d.bT;let s=new t.Nl;i&&(s=new t.Nl,s.setFieldDetails("RATE",1,1,"",0,!1,!1),this.fldDict.push("RATE",s),s=new t.Nl,s.setFieldDetails("NET",2,1,"",0,!1,!1),this.fldDict.push("NET",s),s=new t.Nl,s.setFieldDetails("AVGRATE",2,1,"",0,!1,!1),this.fldDict.push("AVGRATE",s),s=new t.Nl,s.setFieldDetails("QTY",3,1,"",0,!1,!1),this.fldDict.push("QTY",s),s=new t.Nl,s.setFieldDetails("GROSS",3,1,"",0,!1,!1),this.fldDict.push("GROSS",s),s=new t.Nl,s.setFieldDetails("LASTPURCHASERATE",2,1,"",0,!1,!1),this.fldDict.push("LASTPURCHASERATE",s),s=new t.Nl,s.setFieldDetails("LASTLANDINGRATE",2,1,"",0,!1,!1),this.fldDict.push("LASTLANDINGRATE",s),s=new t.Nl,s.setFieldDetails("CONVERSIONQTY",3,1,"",0,!1,!1),this.fldDict.push("CONVERSIONQTY",s),s=new t.Nl,s.setFieldDetails("UNITS",3,1,"",0,!1,!1),this.fldDict.push("UNITS",s),s=new t.Nl,s.setFieldDetails("BASEQTY",3,1,"",1,!1,!1),this.fldDict.push("BASEQTY",s),s=new t.Nl,s.setFieldDetails("EXCHANGERATE",3,1,"",0,!1,!1),this.fldDict.push("EXCHANGERATE",s)),this.Total.Clear(),this.Columns.forEach(c=>{1==c.IsCalculated&&this.Total.push(c.DisplayMember,0)}),this.Columns.forEach(c=>{c.DisplayMember.startsWith("dcNum")?(s=new t.Nl,s.setFieldDetails(c.Header,3,1,"",0,!1,!1),this.fldDict.push(c.Header,s),s=new t.Nl,s.setFieldDetails("Calc"+c.Header,3,1,"",0,!1,!1),this.fldDict.push("Calc"+c.Header,s)):1==c.IsCalculated&&"GROSS"!=c.DisplayMember&&(s=new t.Nl,s.setFieldDetails(c.DisplayMember,3,1,"",0,!1,!1),this.fldDict.push(c.DisplayMember,s))})}UpdateTotals(){if(null==this.Table)return;let i=0;for(let s=0;s<this.Columns.length;s++)null!=this.Columns[s].DecimalPoints&&(i=0,this.Table.forEach(c=>{this.TableColumns.Contains("IsGroupRow")&&null!=c.IsGroupRow&&!m.J0.IsEmpty(c.IsGroupRow)&&""!=c.IsGroupRow.toString().Trim()&&(0,g.yG0)(c.IsGroupRow)||(1==this.Columns[s].IsCalculated?m.J0.IsNullOrWhiteSpace(c[this.Columns[s].DisplayMember])||(i+=parseFloat(c[this.Columns[s].DisplayMember])):this.Columns[s].DisplayMember.Contains("dcNum")&&(m.J0.IsNullOrWhiteSpace(c["dcCalc"+this.Columns[s].DisplayMember])||(i+=parseFloat(c["dcCalc"+this.Columns[s].DisplayMember]))))}),this.Columns[s].ShowTotal&&(this.Columns[s].footer=i.Commas("N"+this.Columns[s].DecimalPoints)),this.Total[this.Columns[s].DisplayMember]=i);this.UpdateFooter()}RefreshColumns(){this.LoadMobileObj(),this.RefreshGridColumns.Call()}RefreshSno(i="sno"){}AddExtraEmptyRows(i){null!=this.Table&&(this.addEmptyRows(i),this.RefreshSno())}ClearFilters(){this.angularGrid.dataView.setFilterArgs({}),this.angularGrid.dataView.refresh()}SearchGrid(i){let s=null;if(""!=this.SearchCols.SelectedValue)s=this.SearchCols.GetselectedItem();else{if(!(this.SearchCols.Items.length>0))return;s=this.SearchCols.Items[0]}let c=s.Value;if(this.SearchCombo.Visible&&(this.SearchText.Text=m.J0.IsEmpty(this.SearchCombo.SelectedValue)?"":this.SearchCombo.SelectedValue),this.duplicateTable&&0==this.duplicateTable.length&&(this.duplicateTable=this._Table),m.J0.StringIsNullOrEmpty(this.SearchText.Text)){if("Filter"==i){if("FULL_TEXT"==c)return this?.angularGrid&&(this.angularGrid.dataView.setFilterArgs({}),this.gridObj.getData().setItems(this.duplicateTable),this.gridObj.getData().refresh(),this.gridObj.invalidate()),void this.UpdateTotals();this.angularGrid.dataView.setFilterArgs({}),this.angularGrid.dataView.refresh(),this.UpdateTotals()}}else if(this.TableColumns.Contains(c)||"FULL_TEXT"==c){if("Filter"==i){if(m.J0.IsEmpty(this.SearchText.Text))return void this.UpdateTotals();let b={};if("FULL_TEXT"==c){for(let p=0;p<this.SearchCols.Items.length;p++){let C=this.SearchCols.Items[p];if(!this.TableColumns.Contains(C.Value))continue;let R=this.GetFilterArg(C.Value);R.columnDef&&(b[C.Value]=R)}return this.FilterData(),void this.UpdateTotals()}{let p=this.GetFilterArg(s.Value);p.columnDef&&(b[s.Value]=p)}try{m.J0.IsEmpty(this.SearchDefaultFilter),console.log(b),this.angularGrid.dataView.setFilterArgs({columnFilters:b,grid:this.angularGrid.slickGrid}),this.angularGrid.dataView.refresh(),this.UpdateTotals()}catch(p){Logger.ErrorLog("Filter Error",p)}return}if(!m.J0.StringIsNullOrEmpty(this.SearchText.Text)&&"Search..."!=this.SearchText.Text){let b=this.Search(!0,this.angularGrid.dataView.getItems(),c);return void this.angularGrid.slickGrid.setActiveCell(b,1)}}}FilterData(){let i=[];if(!(this.SearchCols.SelectedIndex>0)){const s=this.fullTextSearchAllColumns(this.SearchOptions.SelectedValue);s&&s.length>0&&i.push(...s)}this?.angularGrid&&(this.gridObj.getData().setItems(i),this.gridObj.getData().refresh(),this.gridObj.invalidate())}fullTextSearchAllColumns(i){const s=this.SearchText.Text.toLowerCase().trim(),c=parseFloat(s);return this.duplicateTable.filter(b=>Object.values(b).some(p=>{if(null==p)return!1;const C=typeof p;if("string"!==C&&"number"!==C)return!1;const R=p.toString().toLowerCase(),O=parseFloat(p);switch(i){case"1":return R===s;case"2":return R!==s;case"3":return R.startsWith(s);case"4":return R.endsWith(s);case"5":return R.includes(s);case"6":return""!==R&&!R.includes(s);case"7":return"number"===C&&!isNaN(O)&&O<c;case"8":return"number"===C&&!isNaN(O)&&O<=c;case"9":return"number"===C&&!isNaN(O)&&O>c;case"10":return"number"===C&&!isNaN(O)&&O>=c;default:return!1}}))}SqlLike(i,s){let c=!0,b=!1,p=!1,C=!1,R=!1,O=!1,T=-1,y=0,Q=[],z="\0";for(let K=0;K<s.length;K++){let $=s[K];if(O=y>=i.length,!O)if(z=i[y],b||"%"!=z){if("_"==z)p=!0,y++;else if("["==z){if("^"==i[++y]?(R=!0,y++):C=!0,Q.Clear(),"-"==i[y+1]&&"]"==i[y+3]){let Y=i[y].toUpperCase();y+=2;let q=i[y].toUpperCase();if(Y<=q)for(let Z=Y;Z<=q;Z++)Q.push(Z);y++}for(;y<i.length&&"]"!=i[y];)Q.push(i[y]),y++;y++}}else{for(T=y,b=!0;y<i.length&&"%"==i[y];)y++;z=y>=i.length?"\0":i[y]}if(b)$.toUpperCase()==z.toUpperCase()&&(b=!1,y++);else if(p)p=!1;else if(C||R){let Y=Q.Contains($.toUpperCase());if(R&&Y||C&&!Y){if(!(T>=0)){c=!1;break}y=T}R=C=!1}else if($.toUpperCase()==z.toUpperCase())y++;else{if(!(T>=0)){c=!1;break}y=T}}if(O=y>=i.length,c&&!O){let K=!0;for(let $=y;$<i.length;$++)if("%"!=i[$]){K=!1;break}K&&(O=!0)}return c&&O}GetFilterArg(i){let s=this.GetFilterOperator(this.SearchOptions.SelectedValue),c=this.slickColumns.find(b=>b.id=i);return s.length>0&&"Contains"==s&&m.J0.String(this.SearchText.Text).length>0&&this.SearchText.Text.Contains("%")?{columnDef:i,operator:s,searchTerms:this.SearchText.Text.toLowerCase().split("%"),columnId:c.id}:s.length>0?{columnDef:i,operator:s,searchTerms:[this.SearchText.Text.toLowerCase()||"",void 0,null],columnId:c.id}:{}}Setselectedrow(i){this.SelectedItem=this.Table[i]}GetFilterOperator(i){let s="";switch(i){case"1":s="EQ";break;case"2":s="NE";break;case"3":s="StartsWith";break;case"4":s="EndsWith";break;case"5":s="Contains";break;case"6":s="Not_Contains";break;case"7":s="LT";break;case"8":s="LE";break;case"9":s="GT";break;case"10":s="GE"}return s}Search(i,s,c){let R,b=[],p=0,C="N";null!=this.SelectedItem&&(p=s.indexOf(this.SelectedItem)),-1==p&&(p=0);for(let O=0;O<s.length;O++){i?p<s.length-1?p++:p=0:0==p?p=s.length-1:p--,b=s[p];let T=b[c];if(this.SearchCols.SelectedIndex>0){if(null!=this.SearchOptions.SelectedValue){if("1"==this.SearchOptions.SelectedValue.toString()&&T.toLowerCase()==this.SearchText.Text.toLowerCase()||"2"==this.SearchOptions.SelectedValue.toString()&&T.toLowerCase()!=this.SearchText.Text.toLowerCase()||"3"==this.SearchOptions.SelectedValue.toString()&&T.toLowerCase().startsWith(this.SearchText.Text.toLowerCase())||"4"==this.SearchOptions.SelectedValue.toString()&&T.toLowerCase().endsWith(this.SearchText.Text.toLowerCase())||"5"==this.SearchOptions.SelectedValue.toString()&&T.toLowerCase().toString().Contains(this.SearchText.Text.toLowerCase())||"6"==this.SearchOptions.SelectedValue.toString()&&!T.toLowerCase().Contains(this.SearchText.Text.toLowerCase()))return p}else if(T.toLowerCase().Contains(this.SearchText.Text.toLowerCase()))return p}else null!=this.SearchOptions.SelectedValue?("1"==this.SearchOptions.SelectedValue.toString()&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&T.toString().toLowerCase()==this.SearchText.Text.toLowerCase()&&(C="Y",R=p))}),"2"==this.SearchOptions.SelectedValue.toString()&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&T.toString().toLowerCase()!=this.SearchText.Text.toLowerCase()&&(C="Y",R=p))}),"3"==this.SearchOptions.SelectedValue.toString()&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&T.toString().toLowerCase().startsWith(this.SearchText.Text.toLowerCase())&&(C="Y",R=p))}),"4"==this.SearchOptions.SelectedValue.toString()&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&T.toString().toLowerCase().endsWith(this.SearchText.Text.toLowerCase())&&(C="Y",R=p))}),"5"==this.SearchOptions.SelectedValue.toString()&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&T.toString().toLowerCase().Contains(this.SearchText.Text.toLowerCase())&&(C="Y",R=p))}),"6"==this.SearchOptions.SelectedValue.toString()&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&!T.toString().toLowerCase().Contains(this.SearchText.Text.toLowerCase())&&(C="Y",R=p))})):null==this.SearchOptions.SelectedValue&&this.TableColumns.forEach(y=>{"N"==C&&(T=s[p][y],!m.J0.StringIsNullOrEmpty(T)&&T.toString().toLowerCase().Contains(this.SearchText.Text.toLowerCase())&&(C="Y",R=p))});if("Y"==C)return C="N",R}return p}SelectAllChecked(i){(this.IgnoreSelectAllChecked||null==this.Table||w.d.SessionManager.StringIsNullOrEmpty(this.SelectAll.DBColumnName)||this.TableColumns.length>0&&!this.TableColumns.Contains(this.SelectAll.DBColumnName))&&!(this.TableColumns.length>0&&this.TableColumns.Contains("isChecked"))||(this.TableColumns.length>0&&this.TableColumns.Contains("isChecked")?(this.IgnoreOnCheckedChanged=!0,this.Table.forEach(s=>{(0,g.yG0)(s.isChecked)!=this.SelectAll.IsChecked&&(s.isChecked=this.SelectAll.IsChecked,this.updateRow(s))}),this.IgnoreOnCheckedChanged=!1):(this.IgnoreOnCheckedChanged=!0,this.Table.forEach(s=>{(0,g.yG0)(s[this.SelectAll.DBColumnName])!=this.SelectAll.IsChecked&&(s[this.SelectAll.DBColumnName]=this.SelectAll.IsChecked,this.updateRow(s))}),this.IgnoreOnCheckedChanged=!1))}RefreshGridView(){this.angularGrid&&this.angularGrid.gridService.clearAllFiltersAndSorts()}OnCheckedChanged(i,s){this.IgnoreOnCheckedChanged||s||1==this.SelectAll.IsChecked&&(this.IgnoreSelectAllChecked=!0,this.SelectAll.IsChecked=!1,this.IgnoreSelectAllChecked=!1)}LoadDocument(i,s){return(0,f.A)(function*(){if(Object.keys(s).Contains(i)&&""!=m.J0.String(s[i]))try{if(!Object.keys(s).Contains("CostCenterID")){let b=w.d.report.GetDocumentDetailsByVoucherNo(s[i].toString()),p=m.J0.Int(b.obj);if(s=null,!(p>0))return;s=b.Tables[0].length>0?b.Tables[0][0]:b.Tables[1][0]}const{RibbonExtViewModel:c}=yield Promise.resolve().then(u.bind(u,61301));c.LoadDocument(s)}catch(c){Logger.ErrorLog("LINK_VOUCHER","OnLinkClickEvent",c.Message)}})()}ExportExcelNew(i,s,c,b,p=0){return new M(this,i,s,c,p).Export(!0,b)}InitKPI(i){if(i.length>0){let s=new m.VB;s.LoadXml(i.toString()),s.DocumentElement.childNodes.forEach(c=>{this.kpiList.push(new H(c,this))})}}ApplyKPI(i){0!=this.kpiList.length&&(this.kpiList.forEach(s=>{s.Apply(i)}),this.updateRow(i))}addEmptyRow(){this.addRow(this.NewRow())}getEmptyRow(){return{id:this.rowid}}addEmptyRows(i){for(let s=0;s<i;s++)this.addEmptyRow()}addRow(i){m.J0.IsEmpty(i.id)&&(i.id=w.d.slick.rowid),this.angularGrid?this.angularGrid.dataView.addItem(i):this.Table.push(i)}addNewRowEmpty(){let i={id:this.rowid};return this.TableNewRow.Call(i),this.addRow(i),i}addRows(i){this.Table.AddRange(i),this.refreshDatawithIDs()}removeRow(i){this.angularGrid?this.angularGrid.gridService.deleteItem(i):this.Table.Remove(i),this.RowDeleted.IsSubscribed&&this.RowDeleted.Call(i),this.refreshDataView()}removeRowAt(i){let s;this.angularGrid?(s=this.angularGrid.dataView.getItemByIdx(i),this.angularGrid.gridService.deleteItem(s)):(s=this.Table[i],this.Table.Remove(s)),this.RowDeleted.IsSubscribed&&this.RowDeleted.Call(s)}removeSingleRowAt(i){let s=this.Table[i];this.Table.Remove(s),this.RowDeleted.IsSubscribed&&this.RowDeleted.Call(s)}multipleRowAt(i){let s;if(this.angularGrid)if(Array.isArray(i)){const c=i.sort((b,p)=>p-b);for(const b of c)s=this.angularGrid.dataView.getItemByIdx(b),s&&this.angularGrid.gridService.deleteItem(s)}else s=this.angularGrid.dataView.getItemByIdx(i),s&&this.angularGrid.gridService.deleteItemById(s);else if(this.Table)if(Array.isArray(i)){const c=i.sort((b,p)=>p-b);for(const b of c)s=this.Table[b],s&&this.Table.Remove(s)}else s=this.Table[i],s&&this.Table.Remove(s);this.RowDeleted&&this.RowDeleted.IsSubscribed&&this.RowDeleted.Call(s)}Update(){this.angularGrid&&this.angularGrid.gridService.updateItems(this.Table,{highlightRow:!1,triggerEvent:!1})}insertRowAt(i,s){m.J0.IsEmpty(i.id)&&(i.id=w.d.slick.rowid),this.angularGrid?this.Table.length>s?this.angularGrid.dataView.insertItem(s,i):this.angularGrid.dataView.addItem(i):this.Table.splice(s,0,i)}updateRow(i){if(this.angularGrid&&this.Table.Contains(i))try{this.angularGrid.gridService.updateItem(i,{highlightRow:!1,triggerEvent:!1})}catch{console.log("updateRow")}}Clear(){this.Table.Clear(),this.refreshDataView()}refreshDataView(){this.angularGrid&&this.angularGrid.dataView.refresh()}refreshDatawithIDs(){this.angularGrid&&this.angularGrid.dataView.refreshdataids()}refreshUI(){this.angularGrid&&this.angularGrid.resizerService.resizeGrid()}refreshUIwithDimensions(){this.angularGrid&&this.angularGrid.resizerService.resizeGrid(0,{height:this.Height,width:void 0})}refreshids(){this.Table.forEach(i=>{i.id=this.rowid})}invalidate(){this.angularGrid&&this.angularGrid.slickGrid.invalidate()}applyBatchUpdates(){this.Table.length>0&&this.angularGrid&&(this.angularGrid.dataView.refreshdataids(),this.angularGrid.slickGrid.invalidate())}UpdateFooter(){if(this.angularGrid)for(let i=0;i<this.slickColumns.length;i++){let s=this.slickColumns[i].DgCol;if(s.ShowbodyTotal>0||s.ShowTotal||null!=s.footer){let c=this.angularGrid.slickGrid.getFooterRowColumn(i);if(c&&null!=s.footer){let b=m.J0.String(w.d.SessionManager.Preferences.DecimalsinAmount);c.innerText=s.footer.Contains("Total Collectable")||s.footer.Contains("Total Payable")?s.footer:!m.J0.IsEmpty(b)&&parseFloat(b)>0?w.d.SessionManager.Preferences.ContainsKey("Commas")&&"Millions"!=w.d.SessionManager.Preferences.Commas&&""!=w.d.SessionManager.Preferences.Commas?m.J0.Double(s.footer).Commas("N"+b):w.d.SessionManager.transformDecimal(s.footer,"0."+b+"-"+b):s.footer}}}}UpdateFooterChanged(){if(this.angularGrid)for(let i=0;i<this.slickColumns.length;i++){let s=this.slickColumns[i].DgCol,c=this.angularGrid.slickGrid.getFooterRowColumn(i);c&&null!=s.footer&&(c.innerText=s.footer)}}commitEdit(){null!=this.angularGrid&&this.angularGrid?.slickGrid&&this.angularGrid?.slickGrid.getActiveCellNode()&&this.angularGrid.slickGrid.getEditorLock().commitCurrentEdit()}getArgsObj(i){let s={};return s.grid=i.grid,s.column=i.grid.getColumns()[i.cell],s.item=this.angularGrid.dataView.getItemByIdx(i.row),s}}class M{constructor(i,s,c,b,p=0){this.footerCnt=0,this.CostCenterID=0,this.VisibleCols=[],this.ChunkSize=25e3,this.grid=i,this.ReportName=c,this.DateFilter=b,this.CostCenterID=p;for(let C=s;C<i.Columns.length;C++)i.Columns[C].IsVisible&&i.Columns[C].Width>20&&(this.VisibleCols.push(i.Columns[C]),m.J0.IsEmpty(i.Columns[C].footer)||(this.footerCnt=1))}exportAsExcelFile(i,s){}saveAsExcelFile(i,s){const c=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});r.saveAs(c,s+"_export_"+(new Date).getTime()+".xlsx")}exportExcel(i,s){}Export(i,s){let c=this.grid.Table,b=[],p=[],C="";for(let R=0;R<c.length;R++){const O=c[R];p=[];for(let T=0;T<this.VisibleCols.length;T++)C=m.J0.StringValue(O[this.VisibleCols[T].DisplayMember])||null,C=m.J0.IsEmpty(C)?null:C,"FLOAT"==this.VisibleCols[T].DataType&&null!=this.VisibleCols[T].DecimalPoints&&this.VisibleCols[T].DecimalPoints.length>0&&parseInt(this.VisibleCols[T].DecimalPoints)>0&&!m.J0.IsEmpty(C)&&!isNaN(C)&&(C=parseFloat(C).ToString("N"+this.VisibleCols[T].DecimalPoints)),this.grid.TableColumns.Contains("Variance_RED")&&(m.J0.IsEmpty(this.grid.Table.some(y=>y.hasOwnProperty("Variance_RED")))||"1"!=m.J0.StringValue(this.grid.Table[R].Variance_RED)?C+="~0":C+="~1"),p.push(C),C="";b.push(p),p=[]}this.exportExcel(b,this.ReportName)}ColorToInteger(i){}CreateTwoDimensionalObject(i){}ReleaseObject(i){}GetHeaderText(i){}}class H{constructor(i,s){this.IsRowKPI=!1,this.IsBold=!1,this.fontSize=0,this.ID=null,this.Name=null,this.Formula=null,this.Expression=null,this.Image=null,this.Text=null,this.BackColor=null,this.ForeColor=null,this.ColsUsed=new Array,this.evalParse=new t.PE,this.eval=new t.CC,this.fldDict=new d.bT,this.Parent=s,this.ID=i.attributes.ID.value,this.Formula=i.attributes.Formula.value,this.Expression=i.attributes.Expression.value,this.BackColor=i.attributes.BackColor.value,this.ForeColor=i.attributes.ForeColor.value,this.Text=i.attributes.Text.value,this.Image=i.attributes.Img.value,this.IsBold=null!=i.attributes.Bold&&"1"==i.attributes.Bold.value,this.fontSize=null!=i.attributes.FontSize?parseFloat(i.attributes.FontSize.value):0,m.J0.IsEmpty(this.Image)||(this.Image="Images/"+this.Image),this.IsRowKPI="ROW_KPI"==this.ID,this.eval.ThrowException=!1,this.eval.SetKeyWords("REPORT"),this.evalParse.ThrowException=!1,this.evalParse.SetKeyWords("REPORT");let c=[];this.evalParse.ParseFormula(this.Expression,c);let b,p=null;for(let C=c.length-1;C>=0;C--){let R=c[C];b=R.getTokenValue().toString(),R.getTokenClass()!=t.C3.OPERAND||null==p||p.getTokenClass()!=t.C3.OPERAND?p=R:(p.tokenValue=R.tokenValue.toString()+p.tokenValue.toString(),c.RemoveAt(C))}c.forEach(C=>{let R=C;if(b=R.getTokenValue().toString(),R.getTokenClass()==t.C3.OPERAND&&R.getTokenType()==t.Wz.REFERENCE){let O=new t.Nl;this.fldDict.ContainsKey(b)||(O=new t.Nl,O.setFieldDetails(b,3,1,"",0,!1,!1),this.fldDict.push(b,O))}}),null!=s.Table?this.IsRowKPI?(s.TableColumns.Contains("Row_Background")||s.TableColumns.push("Row_Background"),s.TableColumns.Contains("Row_Foreground")||s.TableColumns.push("Row_Foreground")):(s.TableColumns.Contains(this.ID+"_COLOR")||s.TableColumns.push(this.ID+"_COLOR"),s.TableColumns.Contains(this.ID+"_FRCOLOR")||s.TableColumns.push(this.ID+"_FRCOLOR")):Logger.ErrorLog("Unable to add KPI Color Columns To Table")}Apply(i){this.fldDict.keys.forEach(c=>{let b={Key:c,Value:this.fldDict[c]};if(this.fldDict[b.Key].setFieldValue(null),i.TableColumns.Contains(b.Key)){var p=this.Parent.Columns.find(C=>C.ID==b.Key);null==p||m.J0.IsEmpty(i[b.Key])?this.fldDict[b.Key].setFieldValue(null==p||"FLOAT"==p.DataType?0:""):this.fldDict[b.Key].setFieldValue(i[b.Key])}else this.fldDict[b.Key].setFieldValue(0)});try{"1"==this.eval.EvaluateExpression(this.Expression,this.fldDict).toString()?this.IsRowKPI?(i.Row_Background=this.BackColor,i.Row_Foreground=this.ForeColor):(i[this.ID+"_COLOR"]=this.BackColor,i[this.ID+"_FRCOLOR"]=this.ForeColor):this.IsRowKPI&&(i.Row_Background=null)}catch{}}}},11592:(U,L,u)=>{"use strict";u.d(L,{c:()=>E});var f=u(58170);class E extends f.MI{constructor(D=0){super(),this.CheckedChangedCommand=new f.Yk,this.IsChecked=!1,this.Value=null,this.ToolTip=null,this.Width="200",this.DBColumnID=D,this.Mandatory=!1}static PactCheckBoxData_1(D,A){let v=new E(0);return v.DBColumnName=D,v.FeatureID=A,v}static PactCheckBoxData_2(D,A){let v=new E(0);return v.DBColumnName=D,v.Value=A,v}static PactCheckBoxData_3(D,A,v,w){let x=new E(0);return x.DBColumnName=D,x.FeatureID=A,x.GroupName=v,x}}},21720:(U,L,u)=>{"use strict";u.d(L,{W:()=>d});var f=u(32040),E=u(96598);let d=(()=>{class D{constructor(){}createInteractiveAngularComponent(v,w,x,m){const t=f.d.ViewContainerRef.createComponent(v,m);t?.instance&&x&&Object.assign(t.instance,x);let r=null;const l=t.hostView;return l&&Array.isArray(l.rootNodes)&&l.rootNodes[0]&&(r=l.rootNodes[0],w&&r&&w.replaceChildren(t.location.nativeElement)),{componentRef:t,domElement:r}}createAngularComponent(v,w,x,m){const t=f.d.ViewContainerRef.createComponent(v,m);t?.instance&&x&&(Object.assign(t.instance,x),t.changeDetectorRef.detectChanges());let r=null;const l=t.hostView;return l&&Array.isArray(l.rootNodes)&&l.rootNodes[0]&&(r=l.rootNodes[0],w&&r&&(w.innerHTML=r.innerHTML)),{componentRef:t,domElement:r}}createAngularComponentAppendToDom(v,w,x,m){const t=this.createAngularComponent(v,w,x,m);return w?.replaceChildren?w.replaceChildren(t.domElement):document.body.appendChild(t.domElement),t}static{this.\u0275fac=function(w){return new(w||D)}}static{this.\u0275prov=E.jDH({token:D,factory:D.\u0275fac})}}return D})()},28716:(U,L,u)=>{"use strict";u.d(L,{J:()=>E});var f=u(96598);let E=(()=>{class d{constructor(){this.dependencies=[]}get(A){const v=this.dependencies.find(w=>w.key===A);return v?.instance?v.instance:null}dispose(){this.dependencies=[]}registerInstance(A,v){this.dependencies.some(x=>x.key===A)||this.dependencies.push({key:A,instance:v})}static{this.\u0275fac=function(v){return new(v||d)}}static{this.\u0275prov=f.jDH({token:d,factory:d.\u0275fac})}}return d})()},41610:(U,L,u)=>{"use strict";u.d(L,{a:()=>E});var f=u(54581);const E={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel"},columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:d},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",itemsKey:"ITEMS",itemsSelected:"items selected",itemsSelectedKey:"ITEMS_SELECTED",of:"of",ofKey:"OF"}},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:f.CuW.input,defaultBackendServiceFilterTypingDebounce:500,defaultColumnSortFieldId:"id",defaultFilterPlaceholder:"\u{1f50e}\ufe0e",defaultFilterRangeOperator:f.huT.rangeInclusive,editable:!1,enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableFilterTrimWhiteSpace:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableEmptyDataWarningMessage:!1,emptyDataWarning:{className:"slick-empty-data-warning",message:"No data to display.",messageKey:"",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,eventNamingStyle:f.iKL.camelCase,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:f.ptE.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2b9e",groupExpandedSymbol:"\u2b9f",groupingAggregatorRowText:"",sanitizeDataExport:!1},textExportOptions:{delimiter:f.IQ1.comma,exportWithFormatter:!1,filename:"export",format:f.ptE.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},filterTypingDebounce:0,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:0,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleDarkModeCommand:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-pin-off-outline",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:d},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},headerRowHeight:35,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{collapseAllOnSort:!0,cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,useSimpleViewportCalc:!0,saveDetailViewOnScroll:!1},rowHeight:35,topPanelHeight:35,preHeaderPanelWidth:"100%",translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\xb7"}};function d(D,A){let v=D?.columnPickerLabel??D?.name??"";(v instanceof HTMLElement||v instanceof DocumentFragment)&&(v=v.textContent||"");const w=D?.columnGroup||"";return w?w+(A?.columnGroupSeparator??" - ")+v:v}},41882:(U,L,u)=>{"use strict";u.d(L,{v:()=>x});var f=u(74523),E=u(54581),d=u(34475);class D{constructor(t){this.pubSubService=t,this.pluginName="RowDetailView",this._dataViewIdProperty="id",this._expandableOverride=null,this._expandedRows=[],this._gridRowBuffer=0,this._gridUid="",this._keyPrefix="",this._lastRange=null,this._outsideRange=5,this._rowIdsOutOfViewport=[],this._visibleRenderedCellCount=0,this._defaults={alwaysRenderColumn:!0,columnId:"_detail_selector",field:"_detail_selector",cssClass:"detailView-toggle",collapseAllOnSort:!0,collapsedClass:void 0,expandedClass:void 0,keyPrefix:"_",loadOnce:!1,maxRows:void 0,reorderable:!1,saveDetailViewOnScroll:!0,singleRowExpand:!1,useSimpleViewportCalc:!1,toolTip:"",width:30},this._eventHandler=new E.JD8,this.onAsyncEndUpdate=new E.HXj("onAsyncEndUpdate"),this.onAsyncResponse=new E.HXj("onAsyncResponse"),this.onAfterRowDetailToggle=new E.HXj("onAfterRowDetailToggle"),this.onBeforeRowDetailToggle=new E.HXj("onBeforeRowDetailToggle"),this.onRowBackToViewportRange=new E.HXj("onRowBackToViewportRange"),this.onRowOutOfViewportRange=new E.HXj("onRowOutOfViewportRange")}get addonOptions(){return this._addonOptions}get dataView(){return this._grid?.getData()}get dataViewIdProperty(){return this._dataViewIdProperty}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()||{}}get gridUid(){return this._gridUid||this._grid?.getUID()||""}set lastRange(t){this._lastRange=t}set rowIdsOutOfViewport(t){this._rowIdsOutOfViewport=t}get visibleRenderedCellCount(){return this._visibleRenderedCellCount}init(t){if(this._grid=t,!t)throw new Error('[Slickgrid-Universal] RowDetailView Plugin requires the Grid instance to be passed as argument to the "init()" method.');this._grid=t,this._gridUid=t.getUID(),this._addonOptions||(this._addonOptions=(0,d.extend)(!0,{},this._defaults,this.gridOptions.rowDetailView)),this._keyPrefix=this._addonOptions?.keyPrefix||"_",E.Aq$.addSlickEventPubSubWhenDefined(this.pubSubService,this),this._gridRowBuffer=this.gridOptions.minRowBuffer||0,this.gridOptions.minRowBuffer=this._addonOptions.panelRows+3,this._eventHandler.subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onBeforeEditCell,()=>this.collapseAll()).subscribe(this._grid.onScroll,this.handleScroll.bind(this)),this._addonOptions.collapseAllOnSort&&(this.pubSubService.subscribe("onSortChanged",()=>this.collapseAll()),this._expandedRows=[],this._rowIdsOutOfViewport=[]),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{this._grid.updateRowCount(),this._grid.render()}),this._eventHandler.subscribe(this.dataView.onRowsChanged,(r,l)=>{this._grid.invalidateRows(l.rows),this._grid.render()}),this._eventHandler.subscribe(this.onAsyncResponse,this.handleOnAsyncResponse.bind(this)),this._eventHandler.subscribe(this.dataView.onSetItemsCalled,()=>{this._dataViewIdProperty=this.dataView?.getIdPropertyName()||"id"}),this._addonOptions.useSimpleViewportCalc&&this._eventHandler.subscribe(this._grid.onRendered,(r,l)=>{l?.endRow&&(this._visibleRenderedCellCount=l.endRow-l.startRow)})}dispose(){this._eventHandler?.unsubscribeAll()}create(t,r){if(!r.rowDetailView)throw new Error('[Slickgrid-Universal] The Row Detail View requires options to be passed via the "rowDetailView" property of the Grid Options');if(this._addonOptions=(0,d.extend)(!0,{},this._defaults,r.rowDetailView),"function"==typeof this._addonOptions.expandableOverride&&this.expandableOverride(this._addonOptions.expandableOverride),Array.isArray(t)&&r){const l=this.getColumnDefinition();if(!t.some(g=>g.id===l.id)){const S=Array.isArray(t)&&t.find(F=>"selectAndMove"===F?.behavior)||l,N=r?.rowDetailView?.columnIndexPosition??0;N>0?t.splice(N,0,S):t.unshift(S),this.pubSubService.publish("onPluginColumnsChanged",{columns:t,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(t){this._addonOptions=(0,d.extend)(!0,{},this._addonOptions,t),this._addonOptions?.singleRowExpand&&this.collapseAll()}collapseAll(){this.dataView.beginUpdate(),this._expandedRows.forEach(t=>{this.collapseDetailView(t,!0)}),this.dataView.endUpdate()}collapseDetailView(t,r=!1){r||this.dataView.beginUpdate(),this._addonOptions.loadOnce&&this.saveDetailView(t),t[`${this._keyPrefix}collapsed`]=!0;for(let l=1;l<=t[`${this._keyPrefix}sizePadding`];l++)this.dataView.deleteItem(`${t[this._dataViewIdProperty]}.${l}`);t[`${this._keyPrefix}sizePadding`]=0,this.dataView.updateItem(t[this._dataViewIdProperty],t),this._expandedRows=this._expandedRows.filter(l=>l[this._dataViewIdProperty]!==t[this._dataViewIdProperty]),r||this.dataView.endUpdate()}expandDetailView(t){if(this._addonOptions?.singleRowExpand&&this.collapseAll(),t[`${this._keyPrefix}collapsed`]=!1,this._expandedRows.push(t),t[`${this._keyPrefix}detailContent`]||(t[`${this._keyPrefix}detailViewLoaded`]=!1),t[`${this._keyPrefix}detailViewLoaded`]&&!0===this._addonOptions.loadOnce)return this.onAsyncResponse.notify({item:t,itemDetail:t,detailView:t[`${this._keyPrefix}detailContent`],grid:this._grid}),this.applyTemplateNewLineHeight(t),void this.dataView.updateItem(t[this._dataViewIdProperty],t);t[`${this._keyPrefix}detailContent`]=this._addonOptions?.preTemplate?.(t),this.applyTemplateNewLineHeight(t),this.dataView.updateItem(t[this._dataViewIdProperty],t),this._addonOptions.process(t)}saveDetailView(t){const r=document.querySelector(`.${this.gridUid} .innerDetailView_${t[this._dataViewIdProperty]}`);if(r){const l=r.innerHTML;void 0!==l&&(t[`${this._keyPrefix}detailContent`]=l)}}handleOnAsyncResponse(t,r){if(!r||!r.item&&!r.itemDetail)return void console.error('SlickRowDetailView plugin requires the onAsyncResponse() to supply "args.item" property.');const l=r.item||r.itemDetail;l[`${this._keyPrefix}detailContent`]=r.detailView??this._addonOptions?.postTemplate?.(l),l[`${this._keyPrefix}detailViewLoaded`]=!0,this.dataView.updateItem(l[this._dataViewIdProperty],l),this.onAsyncEndUpdate.notify({grid:this._grid,item:l,itemDetail:l},t,this)}expandableOverride(t){this._expandableOverride=t}getExpandableOverride(){return this._expandableOverride}getColumnDefinition(){const t=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:t,field:t,name:"",alwaysRenderColumn:this._addonOptions?.alwaysRenderColumn,cssClass:this._addonOptions.cssClass||"",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,formatter:this.detailSelectionFormatter.bind(this),reorderable:this._addonOptions.reorderable,resizable:!1,sortable:!1,toolTip:this._addonOptions.toolTip,width:this._addonOptions.width}}getExpandedRows(){return this._expandedRows}getOutOfViewportRows(){return this._rowIdsOutOfViewport}getFilterItem(t){return t[`${this._keyPrefix}isPadding`]&&t[`${this._keyPrefix}parent`]&&(t=t[`${this._keyPrefix}parent`]),t}resizeDetailView(t){if(!t)return;const r=document.querySelector(`.${this.gridUid} .detailViewContainer_${t[this._dataViewIdProperty]}`),l=document.querySelector(`.${this.gridUid} .cellDetailView_${t[this._dataViewIdProperty]}`),g=document.querySelector(`.${this.gridUid} .innerDetailView_${t[this._dataViewIdProperty]}`);if(!r||!l||!g)return;for(let i=1;i<=t[`${this._keyPrefix}sizePadding`];i++)this.dataView.deleteItem(`${t[this._dataViewIdProperty]}.${i}`);const S=this.gridOptions.rowHeight;r.style.minHeight="";const F=r.scrollHeight,M=Math.ceil(F/S);t[`${this._keyPrefix}sizePadding`]=Math.ceil(2*M*13/S),t[`${this._keyPrefix}height`]=F;let H=t[`${this._keyPrefix}sizePadding`]*S;void 0!==this._addonOptions.maxRows&&t[`${this._keyPrefix}sizePadding`]>this._addonOptions.maxRows&&(H=this._addonOptions.maxRows*S,t[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows),this.gridOptions.minRowBuffer<t[`${this._keyPrefix}sizePadding`]&&(this.gridOptions.minRowBuffer=t[`${this._keyPrefix}sizePadding`]+3),r.setAttribute("style",`min-height: ${t[this._keyPrefix+"height"]}px`),l&&l.setAttribute("style",`height: ${H}px; top: ${S}px`);const B=this.dataView.getIdxById(t[this._dataViewIdProperty]);for(let i=1;i<=t[`${this._keyPrefix}sizePadding`];i++)this.dataView.insertItem(B+i,this.getPaddingItem(t,i));this.saveDetailView(t)}applyTemplateNewLineHeight(t){t[`${this._keyPrefix}sizePadding`]=Math.ceil(2*this._addonOptions.panelRows*13/this.gridOptions.rowHeight),t[`${this._keyPrefix}height`]=t[`${this._keyPrefix}sizePadding`]*this.gridOptions.rowHeight;const g=this.dataView.getIdxById(t[this._dataViewIdProperty]);for(let S=1;S<=t[`${this._keyPrefix}sizePadding`];S++)this.dataView.insertItem((g||0)+S,this.getPaddingItem(t,S))}calculateOutOfRangeViews(){if(this._grid){let t;const r=this._grid.getRenderedRange();if(this._expandedRows.length>0&&(t="DOWN",this._lastRange)){if(this._lastRange.top===r.top&&this._lastRange.bottom===r.bottom)return;(this._lastRange.top>r.top||0===this._lastRange.top&&0===r.top&&this._lastRange.bottom>r.bottom)&&(t="UP")}this._expandedRows.forEach(l=>{const g=this.dataView.getRowById(l[this._dataViewIdProperty]),S=l[`${this._keyPrefix}sizePadding`],N=this._rowIdsOutOfViewport.some(F=>F===l[this._dataViewIdProperty]);"UP"===t?(this._addonOptions.saveDetailViewOnScroll&&g>=r.bottom-this._gridRowBuffer&&this.saveDetailView(l),N&&g-this._outsideRange<r.top&&g>=r.top?this.notifyBackToViewportWhenDomExist(l,l[this._dataViewIdProperty]):!N&&g+S>r.bottom&&this.notifyOutOfViewport(l,l[this._dataViewIdProperty])):"DOWN"===t&&(this._addonOptions.saveDetailViewOnScroll&&g<=r.top+this._gridRowBuffer&&this.saveDetailView(l),N&&g+S+this._outsideRange>r.bottom&&g<g+S?this.notifyBackToViewportWhenDomExist(l,l[this._dataViewIdProperty]):!N&&g<r.top&&this.notifyOutOfViewport(l,l[this._dataViewIdProperty]))}),this._lastRange=r}}calculateOutOfRangeViewsSimplerVersion(){if(this._grid){const t=this._grid.getRenderedRange();this._expandedRows.forEach(r=>{const l=this.dataView.getRowById(r[this._dataViewIdProperty]),g=this.checkIsRowOutOfViewportRange(l,t);!g&&this._rowIdsOutOfViewport.some(S=>S===r[this._dataViewIdProperty])?this.notifyBackToViewportWhenDomExist(r,r[this._dataViewIdProperty]):g&&this.notifyOutOfViewport(r,r[this._dataViewIdProperty])})}}checkExpandableOverride(t,r,l){return"function"!=typeof this._expandableOverride||this._expandableOverride(t,r,l)}checkIsRowOutOfViewportRange(t,r){return Math.abs(r.bottom-this._gridRowBuffer-t)>2*this._visibleRenderedCellCount}getPaddingItem(t,r){const l={};return Object.keys(this.dataView).forEach(g=>{g&&(l[g]=null)}),l[this._dataViewIdProperty]=`${t[this._dataViewIdProperty]}.${r}`,l[`${this._keyPrefix}collapsed`]=!0,l[`${this._keyPrefix}isPadding`]=!0,l[`${this._keyPrefix}parent`]=t,l[`${this._keyPrefix}offset`]=r,l}detailSelectionFormatter(t,r,l,g,S,N){if(!this.checkExpandableOverride(t,S,N))return"";if(void 0===S[`${this._keyPrefix}collapsed`]&&(S[`${this._keyPrefix}collapsed`]=!0,S[`${this._keyPrefix}sizePadding`]=0,S[`${this._keyPrefix}height`]=0,S[`${this._keyPrefix}isPadding`]=!1,S[`${this._keyPrefix}parent`]=void 0,S[`${this._keyPrefix}offset`]=0),!S[`${this._keyPrefix}isPadding`]){if(S[`${this._keyPrefix}collapsed`]){let F=`${this._addonOptions.cssClass||""} expand `;return this._addonOptions.collapsedClass&&(F+=this._addonOptions.collapsedClass),(0,E.fhB)("div",{className:(0,d.classNameToList)(F).join(" ")})}{const F=this.gridOptions.rowHeight||0;let M=(S[`${this._keyPrefix}sizePadding`]||0)*this.gridOptions.rowHeight;null!==this._addonOptions.maxRows&&(S[`${this._keyPrefix}sizePadding`]||0)>this._addonOptions.maxRows&&(M=this._addonOptions.maxRows*F,S[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows);let H=`${this._addonOptions.cssClass||""} collapse `;this._addonOptions.expandedClass&&(H+=this._addonOptions.expandedClass);const B=(0,E.fhB)("div",{className:`dynamic-cell-detail cellDetailView_${S[this._dataViewIdProperty]}`,style:{height:`${M}px`,top:`${F}px`}}),i=(0,E.fhB)("div",{className:`detail-container detailViewContainer_${S[this._dataViewIdProperty]}`}),s=(0,E.fhB)("div",{className:`innerDetailView_${S[this._dataViewIdProperty]}`});return S[`${this._keyPrefix}detailContent`]instanceof HTMLElement?s.appendChild(S[`${this._keyPrefix}detailContent`]):s.innerHTML=this._grid.sanitizeHtmlString(S[`${this._keyPrefix}detailContent`]),i.appendChild(s),B.appendChild(i),{html:(0,E.fhB)("div",{className:(0,d.classNameToList)(H).join(" ")}),insertElementAfterTarget:B}}}return""}handleAccordionShowHide(t){t&&(t[`${this._keyPrefix}collapsed`]?this.expandDetailView(t):this.collapseDetailView(t))}handleClick(t,r){const l=this._grid.getDataItem(r.row);if(this.checkExpandableOverride(r.row,l,this._grid)){const g=this._grid.getColumns()[r.cell];if(this._addonOptions.useRowClick||g.id===this._addonOptions.columnId&&t.target.classList.contains(this._addonOptions.cssClass||"")){if(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return t.preventDefault(),void t.stopImmediatePropagation();if(!1===this.onBeforeRowDetailToggle.notify({grid:this._grid,item:l},t,this,!0).getReturnValue())return;this.toggleRowSelection(r.row,l),this.onAfterRowDetailToggle.notify({grid:this._grid,item:l,expandedRows:this._expandedRows},t,this),t.stopPropagation(),t.stopImmediatePropagation()}}}handleScroll(){this._addonOptions.useSimpleViewportCalc?this.calculateOutOfRangeViewsSimplerVersion():this.calculateOutOfRangeViews()}notifyOutOfViewport(t,r){const l=t.rowIndex||this.dataView.getRowById(t[this._dataViewIdProperty]);this.onRowOutOfViewportRange.notify({grid:this._grid,item:t,rowId:r,rowIndex:l,expandedRows:this._expandedRows,rowIdsOutOfViewport:this.syncOutOfViewportArray(r,!0)},null,this)}notifyBackToViewportWhenDomExist(t,r){const l=t.rowIndex||this.dataView.getRowById(t[this._dataViewIdProperty]);window.setTimeout(()=>{document.querySelector(`.${this.gridUid} .cellDetailView_${t[this._dataViewIdProperty]}`)&&this.onRowBackToViewportRange.notify({grid:this._grid,item:t,rowId:r,rowIndex:l,expandedRows:this._expandedRows,rowIdsOutOfViewport:this.syncOutOfViewportArray(r,!1)},null,this)},100)}syncOutOfViewportArray(t,r){const l=this._rowIdsOutOfViewport.findIndex(g=>g===t);return r&&l<0?this._rowIdsOutOfViewport.push(t):!r&&l>=0&&this._rowIdsOutOfViewport.splice(l,1),this._rowIdsOutOfViewport}toggleRowSelection(t,r){this.checkExpandableOverride(t,r,this._grid)&&(this.dataView.beginUpdate(),this.handleAccordionShowHide(r),this.dataView.endUpdate())}}var A=u(94366);const v="container_",w="container_loading";class x extends D{constructor(t,r,l,g,S){super(l),this.angularUtilService=t,this.appRef=r,this.eventPubSubService=l,this.gridContainerElement=g,this.rxjs=S,this._views=[],this._subscriptions=[]}get addonOptions(){return this.getOptions()}get datasetIdPropName(){return this.gridOptions.datasetIdPropertyName||"id"}get eventHandler(){return this._eventHandler}set eventHandler(t){this._eventHandler=t}get gridOptions(){return this._grid?.getOptions()||{}}get rowDetailViewOptions(){return this.gridOptions.rowDetailView}addRxJsResource(t){this.rxjs=t}dispose(){this.disposeAllViewComponents(),this._subscriptions=(0,E.Vyf)(this._subscriptions),super.dispose()}disposeAllViewComponents(){this._views.forEach(t=>this.disposeViewComponent(t)),this._views=[]}getAddonInstance(){return this}init(t){this._grid=t,super.init(this._grid),this.register(t?.getSelectionModel())}register(t){if("function"!=typeof this.gridOptions.rowDetailView?.process)throw new Error('[Angular-Slickgrid] You need to provide a "process" function for the Row Detail Extension to work properly');return this._userProcessFn=this.gridOptions.rowDetailView.process,this.addonOptions.process=r=>this.onProcessing(r),this._grid&&this.gridOptions?.rowDetailView&&(this.gridOptions.rowDetailView.preTemplate||(this._preloadComponent=this.gridOptions?.rowDetailView?.preloadComponent,this.addonOptions.preTemplate=()=>this._grid.sanitizeHtmlString(`<div class="${w}"></div>`)),this.gridOptions.rowDetailView.postTemplate||(this._viewComponent=this.gridOptions?.rowDetailView?.viewComponent,this.addonOptions.postTemplate=r=>this._grid.sanitizeHtmlString(`<div class="${v}${r[this.datasetIdPropName]}"></div>`)),(!t||!this._grid.getSelectionModel())&&(t=new E._dX(this.gridOptions.rowSelectionOptions||{selectActiveRow:!0}),this._grid.setSelectionModel(t)),this._grid&&this.rowDetailViewOptions&&(this.rowDetailViewOptions.onExtensionRegistered&&this.rowDetailViewOptions.onExtensionRegistered(this),this.onAsyncResponse&&this.eventHandler.subscribe(this.onAsyncResponse,(r,l)=>{this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onAsyncResponse&&this.rowDetailViewOptions.onAsyncResponse(r,l)}),this.onAsyncEndUpdate&&this.eventHandler.subscribe(this.onAsyncEndUpdate,(r,l)=>{this.renderViewModel(l?.item),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onAsyncEndUpdate&&this.rowDetailViewOptions.onAsyncEndUpdate(r,l)}),this.onAfterRowDetailToggle&&this.eventHandler.subscribe(this.onAfterRowDetailToggle,(r,l)=>{this.renderPreloadView(),this.renderAllViewComponents(),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onAfterRowDetailToggle&&this.rowDetailViewOptions.onAfterRowDetailToggle(r,l)}),this.onBeforeRowDetailToggle&&this.eventHandler.subscribe(this.onBeforeRowDetailToggle,(r,l)=>(this.handleOnBeforeRowDetailToggle(r,l),!this.rowDetailViewOptions||"function"!=typeof this.rowDetailViewOptions.onBeforeRowDetailToggle||this.rowDetailViewOptions.onBeforeRowDetailToggle(r,l))),this.onRowBackToViewportRange&&this.eventHandler.subscribe(this.onRowBackToViewportRange,(r,l)=>{this.handleOnRowBackToViewportRange(r,l),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onRowBackToViewportRange&&this.rowDetailViewOptions.onRowBackToViewportRange(r,l)}),this.onRowOutOfViewportRange&&this.eventHandler.subscribe(this.onRowOutOfViewportRange,(r,l)=>{this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onRowOutOfViewportRange&&this.rowDetailViewOptions.onRowOutOfViewportRange(r,l)}),this.eventHandler.subscribe(this._grid.onColumnsReordered,this.redrawAllViewComponents.bind(this)),(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.eventHandler.subscribe(this._grid.onSelectedRowsChanged,this.redrawAllViewComponents.bind(this)),this.eventHandler.subscribe(this._grid.onSort,this.disposeAllViewComponents.bind(this)),this._subscriptions.push(this.eventPubSubService?.subscribe("onFilterChanged",this.redrawAllViewComponents.bind(this)),this.eventPubSubService?.subscribe("onGridMenuClearAllFilters",()=>window.setTimeout(()=>this.redrawAllViewComponents())),this.eventPubSubService?.subscribe("onGridMenuClearAllSorting",()=>window.setTimeout(()=>this.redrawAllViewComponents()))))),this}redrawAllViewComponents(){this._views.forEach(t=>{this.redrawViewComponent(t)})}renderAllViewComponents(){this._views.forEach(t=>{t?.dataContext&&this.renderViewModel(t.dataContext)})}redrawViewComponent(t){this.gridContainerElement.getElementsByClassName(`${v}${t.id}`)?.length>=0&&this.renderViewModel(t.dataContext)}renderPreloadView(){const t=this.gridContainerElement.getElementsByClassName(`${w}`);this._preloadComponent&&t?.length>=0&&this.angularUtilService.createAngularComponentAppendToDom(this._preloadComponent,t[t.length-1])}renderViewModel(t){const r=this.gridContainerElement.getElementsByClassName(`${v}${t[this.datasetIdPropName]}`);if(this._viewComponent&&r?.length>0){const l=this.angularUtilService.createAngularComponentAppendToDom(this._viewComponent,r[r.length-1],{model:t,addon:this,grid:this._grid,dataView:this.dataView,parent:this.rowDetailViewOptions?.parent});if(l?.componentRef){const g=this._views.find(S=>S.id===t[this.datasetIdPropName]);return g&&(g.componentRef=l.componentRef),g}}}disposeViewComponent(t){const r=t?.componentRef;if(r)return this.appRef.detachView(r.hostView),r?.destroy&&r.destroy(),t}notifyTemplate(t){this.onAsyncResponse&&this.onAsyncResponse.notify({item:t,itemDetail:t},void 0,this)}onProcessing(t){var r=this;return(0,f.A)(function*(){if(t&&"function"==typeof r._userProcessFn){let l;const S=yield r._userProcessFn(t);if(r.datasetIdPropName in S?l=S:(S&&S instanceof A.c||S instanceof Promise)&&(l=yield(0,E.ljw)(r.rxjs,S)),!l||!(r.datasetIdPropName in l))throw new Error(`[Angular-Slickgrid] could not process the Row Detail, you must make sure that your "process" callback\n          (a Promise or an HttpClient call returning an Observable) returns an item object that has an "${r.datasetIdPropName}" property`);r.notifyTemplate(l||{})}})()}handleOnBeforeRowDetailToggle(t,r){if(r?.item?.__collapsed)(0,E.DUb)(this._views,{id:r.item[this.datasetIdPropName],dataContext:r.item},this.gridOptions.datasetIdPropertyName||"id");else{const l=this._views.findIndex(g=>g.id===r.item[this.datasetIdPropName]);if(l>=0&&l in this._views){const g=this._views[l].componentRef;g&&(this.appRef.detachView(g.hostView),g.destroy()),this._views.splice(l,1)}}}handleOnRowBackToViewportRange(t,r){r?.item&&this.redrawAllViewComponents()}}},75467:(U,L,u)=>{"use strict";u.d(L,{Lo$:()=>x.L,WIl:()=>E.W,$fu:()=>f.$fu,PUO:()=>f.PUO,_tQ:()=>f._tQ,yG0:()=>f.yG0,jVR:()=>d});var f=u(54581),E=u(21720);function d(m){if(Array.isArray(m)){let t=m.pop();for(;t;)"function"==typeof t.unsubscribe&&t.unsubscribe(),t=m.pop()}return m}u(41882),u(41610),u(86030);var x=u(80277)},80197:function(U,L){var u,E;void 0!==(E="function"==typeof(u=function(){"use strict";function D(t,r,l){var g=new XMLHttpRequest;g.open("GET",t),g.responseType="blob",g.onload=function(){m(g.response,r,l)},g.onerror=function(){console.error("could not download file")},g.send()}function A(t){var r=new XMLHttpRequest;r.open("HEAD",t,!1);try{r.send()}catch{}return 200<=r.status&&299>=r.status}function v(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var w="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,x=w.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=w.saveAs||("object"!=typeof window||window!==w?function(){}:"download"in HTMLAnchorElement.prototype&&!x?function(t,r,l){var g=w.URL||w.webkitURL,S=document.createElement("a");S.download=r=r||t.name||"download",S.rel="noopener","string"==typeof t?(S.href=t,S.origin===location.origin?v(S):A(S.href)?D(t,r,l):v(S,S.target="_blank")):(S.href=g.createObjectURL(t),setTimeout(function(){g.revokeObjectURL(S.href)},4e4),setTimeout(function(){v(S)},0))}:"msSaveOrOpenBlob"in navigator?function(t,r,l){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function d(t,r){return typeof r>"u"?r={autoBom:!1}:"object"!=typeof r&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,l),r);else if(A(t))D(t,r,l);else{var g=document.createElement("a");g.href=t,g.target="_blank",setTimeout(function(){v(g)})}}:function(t,r,l,g){if((g=g||open("","_blank"))&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof t)return D(t,r,l);var S="application/octet-stream"===t.type,N=/constructor/i.test(w.HTMLElement)||w.safari,F=/CriOS\/[\d]+/.test(navigator.userAgent);if((F||S&&N||x)&&typeof FileReader<"u"){var M=new FileReader;M.onloadend=function(){var i=M.result;i=F?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=i:location=i,g=null},M.readAsDataURL(t)}else{var H=w.URL||w.webkitURL,B=H.createObjectURL(t);g?g.location=B:location.href=B,g=null,setTimeout(function(){H.revokeObjectURL(B)},4e4)}});w.saveAs=m.saveAs=m,U.exports=m})?u.apply(L,[]):u)&&(U.exports=E)},80277:(U,L,u)=>{"use strict";u.d(L,{L:()=>v});var f=u(43357),E=u(96336),d=u(21720),D=u(28716),A=u(96598);let v=(()=>{class w{static forRoot(m={}){return{ngModule:w,providers:[{provide:"config",useValue:m},{provide:"externalService",useValue:null},d.W,D.J]}}static{this.\u0275fac=function(t){return new(t||w)}}static{this.\u0275mod=A.$C({type:w})}static{this.\u0275inj=A.G2t({imports:[f.MD,E.h]})}}return w})()},86030:(U,L,u)=>{"use strict";u.d(L,{K:()=>ne});var f=u(96598),E=u(94366),d=u(54581),D=u(38465);class A{constructor(){this._isPreviouslyShown=!1,this._warningLeftElement=null,this._warningRightElement=null}get gridOptions(){return this._grid?.getOptions()??{}}init(a,e){this._grid=a,this._translaterService=e.get("TranslaterService")}dispose(){this._warningLeftElement?.remove(),this._warningRightElement?.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(a=!0,e){if(!this._grid||!this.gridOptions||this._isPreviouslyShown===a)return!1;this._isPreviouslyShown=a;const n=this._grid.getUID(),h={message:"No data to display.",...this.gridOptions.emptyDataWarning,...e},_=h?.className??"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${n} .${_}`);const I=document.querySelector(`.${n} .grid-canvas.grid-canvas-left`),P=document.querySelector(`.${n} .grid-canvas.grid-canvas-right`),G=h.leftViewportMarginLeft??0,k=h.rightViewportMarginLeft??0,j=h.frozenLeftViewportMarginLeft??0,W=h.frozenRightViewportMarginLeft??0,ee=void 0!==this.gridOptions?.frozenColumn&&this.gridOptions.frozenColumn>=0,ae="string"==typeof G?G:`${G}px`,re="string"==typeof k?k:`${k}px`;if(this.gridOptions.autoHeight){const X=document.querySelector(`.${n} .slick-pane.slick-pane-top.slick-pane-left`);if(X&&X.style&&I&&I.style){const J=parseInt(X.style.height,10)||0,oe=this.gridOptions?.rowHeight??0;if(a){let ie=null!==J&&J<100?J:100;ie+=(this.gridOptions.enableFiltering?this.gridOptions?.headerRowHeight??0:0)+(this.gridOptions.createPreHeaderPanel?this.gridOptions?.preHeaderPanelHeight??0:0),X.style.minHeight=`${ie}px`,I.style.minHeight=`${oe}px`}}}let te=h.message;if(this.gridOptions.enableTranslate&&this._translaterService&&h?.messageKey&&(te=this._translaterService.translate(h.messageKey)),!this._warningLeftElement&&I&&P&&(this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(...(0,d.tGf)(_)),this._warningLeftElement.classList.add("left"),this._grid.applyHtmlCode(this._warningLeftElement,te),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),P.appendChild(this._warningRightElement),I.appendChild(this._warningLeftElement)),this._warningLeftElement){let X=a?"flex":"none";ee&&a&&(X=h.hideFrozenLeftWarning?"none":"flex"),this._warningLeftElement.style.display=X,this._warningLeftElement.style.marginLeft=ee?"string"==typeof j?j:`${j}px`:ae}if(this._warningRightElement){let X=a?"flex":"none";ee&&a&&(X=h.hideFrozenRightWarning?"none":"flex"),this._warningRightElement.style.display=X,this._warningRightElement.style.marginLeft=ee?"string"==typeof W?W:`${W}px`:re}return a}}var v=u(22073);class w{constructor(a){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=a,this._property=a.property||"",this._elementBindings=[],this._value=a.property&&a.variable&&(a.variable.hasOwnProperty(a.property)||a.property in a.variable)?a.variable[a.property]:a.variable,"object"==typeof a.variable&&Object.defineProperty(a.variable,a.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(a){if(this._value=a,Array.isArray(this._elementBindings))for(const e of this._elementBindings)e?.element&&e?.attribute&&(e.element[e.attribute]=a)}bind(a,e,n,o){return a&&a.forEach?a.forEach(h=>this.bindSingleElement(h,e,n,o)):a&&this.bindSingleElement(a,e,n,o),this}unbind(a,e,n,o,h){if(a){a.removeEventListener(e,n,o);const _=this._boundedEventWithListeners.findIndex(I=>I.uid===h);_>=0&&this._boundedEventWithListeners.splice(_,1)}}unbindAll(){let a=this._boundedEventWithListeners.pop();for(;a;){const{element:e,eventName:n,listener:o,uid:h}=a;this.unbind(e,n,o,void 0,h),a=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(a,e,n,o){const h={element:a,attribute:e};if(a){if(n){const _=()=>{let I=a[e];if(this.hasData(I)&&"number"===a?.type&&(I=+I),this.valueSetter(I),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),"function"==typeof o)return o(this.valueGetter())};h.event=n,h.listener=_,a.addEventListener(n,_),this._boundedEventWithListeners.push({element:a,eventName:n,listener:_,uid:this.generateUuidV4()})}this._elementBindings.push(h),a[e]=this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const e=16*Math.random()|0;return("x"===a?e:3&e|8).toString(16)})}hasData(a){return null!=a&&""!==a}}class x{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(a){this._querySelectorPrefix=a}get observers(){return this._observers}dispose(){let a=this._observers.pop();for(;a;)a.dispose(),a=this._observers.pop();this._observers=[]}addElementBinding(a,e,n,o,h,_){const I=document.querySelectorAll(`${this.querySelectorPrefix}${n}`);let P=this._observers.find(G=>G.property===a);P||(P=new w({variable:a,property:e})),Array.isArray(h)?h.forEach(G=>P?.bind(I,o,G,_)):P?.bind(I,o,h,_),this._observers.push(P)}bindEventHandler(a,e,n,o){document.querySelectorAll(`${this.querySelectorPrefix}${a}`).forEach(_=>{_?.addEventListener&&_.addEventListener(e,n,o)})}setElementAttributeValue(a,e,n){document.querySelectorAll(`${this.querySelectorPrefix}${a}`).forEach(h=>{h.textContent="",h&&e in h&&(h[e]=n)})}}class m{get eventHandler(){return this._eventHandler}get gridUid(){return this.grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){return this.grid?.getOptions()??{}}get locales(){return this.gridOptions?.locales??d.YMJ.locales}set metrics(a){this.renderMetrics(a)}get leftFooterText(){return document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`)?.textContent??""}set leftFooterText(a){this.renderLeftFooterText(a)}get rightFooterText(){return document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`)?.textContent??""}set rightFooterText(a){this.renderRightFooterText(a)}constructor(a,e,n,o){if(this.grid=a,this.customFooterOptions=e,this.pubSubService=n,this.translaterService=o,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new x,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new d.JD8,this._enableTranslate=this.gridOptions?.enableTranslate??!1,this._isLeftFooterOriginallyEmpty=!this.gridOptions.customFooterOptions?.leftFooterText,this._isRightFooterOriginallyEmpty=!this.gridOptions.customFooterOptions?.rightFooterText,this.registerOnSelectedRowsChangedWhenEnabled(e),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.translateCustomFooterTexts(),this._enableTranslate&&this.pubSubService?.subscribe&&this._subscriptions.push(this.pubSubService.subscribe(this.translaterService?.eventName??"onLanguageChange",()=>this.translateCustomFooterTexts()))}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._footerElement?.remove()}renderFooter(a){this.translateCustomFooterTexts(),this.createFooterContainer(a)}renderMetrics(a){const e=a?.endTime?(0,v.GP)(a.endTime,this.customFooterOptions.dateFormat,"en-US"):"";this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",e),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",a.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",a.totalItemCount),this.customFooterOptions.metricTexts?.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(a){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",a)}renderRightFooterText(a){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",a)}translateCustomFooterTexts(){if(this.gridOptions.enableTranslate&&this.translaterService?.translate){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(const a of Object.keys(this.customFooterOptions.metricTexts))if(a.lastIndexOf("Key")>0){const e=a.substring(0,a.lastIndexOf("Key"));this.customFooterOptions.metricTexts[e]=this.translaterService.translate(this.customFooterOptions.metricTexts[a]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||this.locales?.TEXT_LAST_UPDATE||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||this.locales?.TEXT_ITEMS||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||this.locales?.TEXT_ITEMS_SELECTED||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||this.locales?.TEXT_OF||"TEXT_OF")}createFooterContainer(a){const e=(0,d.fhB)("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}}),n=(0,d.fhB)("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`});this.grid.applyHtmlCode(n,this.customFooterOptions.leftFooterText),e.appendChild(n),e.appendChild(this.createFooterRightContainer()),this._footerElement=e,a?.appendChild&&this._footerElement&&a.appendChild(this._footerElement)}createFooterRightContainer(){const a=(0,d.fhB)("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(this._isRightFooterOriginallyEmpty){if(!this.customFooterOptions.hideMetrics){a.classList.add("metrics");const e=(0,d.fhB)("span",{className:"timestamp"},a);if(!this.customFooterOptions.hideLastUpdateTimestamp){const n=this.createFooterLastUpdate();n&&e.appendChild(n)}a.appendChild((0,d.fhB)("span",{className:"item-count",textContent:`${this.metrics?.itemCount??"0"}`})),this.customFooterOptions.hideTotalItemCount||(a.appendChild(document.createTextNode("\r\n")),a.appendChild((0,d.fhB)("span",{className:"text-of",textContent:` ${this.customFooterOptions.metricTexts?.of??"of"} `})),a.appendChild(document.createTextNode("\r\n")),a.appendChild((0,d.fhB)("span",{className:"total-count",textContent:`${this.metrics?.totalItemCount??"0"}`}))),a.appendChild(document.createTextNode("\r\n")),a.appendChild((0,d.fhB)("span",{className:"text-items",textContent:` ${this.customFooterOptions.metricTexts?.items??"items"} `}))}}else this.grid.applyHtmlCode(a,this.customFooterOptions.rightFooterText);return a}createFooterLastUpdate(){const a=this.customFooterOptions?.metricTexts?.lastUpdate??"Last Update",e=this.metrics?.endTime?(0,v.GP)(this.metrics?.endTime,this.customFooterOptions.dateFormat,"en-US"):"",n=(0,d.fhB)("span");return n.appendChild((0,d.fhB)("span",{className:"text-last-update",textContent:a})),n.appendChild(document.createTextNode("\r\n")),n.appendChild((0,d.fhB)("span",{className:"last-update-timestamp",textContent:e})),n.appendChild((0,d.fhB)("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),n}registerOnSelectedRowsChangedWhenEnabled(a){(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&a&&!a.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty&&(this._isLeftFooterDisplayingSelectionRowCount=!0,a.leftFooterText=`0 ${a.metricTexts?.itemsSelected??this.locales?.TEXT_ITEMS_SELECTED??"TEXT_ITEMS_SELECTED"}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,(o,h)=>{this._selectedRowCount=h.rows.length,this.leftFooterText=`${this._selectedRowCount} ${a.metricTexts?.itemsSelected??this.locales?.TEXT_ITEMS_SELECTED??"TEXT_ITEMS_SELECTED"}`}))}}var t=u(69390);class r{constructor(a,e,n,o){if(this.paginationService=a,this.pubSubService=e,this.sharedService=n,this.translaterService=o,this._enableTranslate=!1,this._subscriptions=[],this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new x,this._bindingEventService=new t.P,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this.currentPagination=this.paginationService.getFullPagination(),this._enableTranslate=this.gridOptions?.enableTranslate??!1,this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.translatePaginationTexts(),this._enableTranslate&&this.pubSubService?.subscribe&&this._subscriptions.push(this.pubSubService.subscribe(this.translaterService?.eventName??"onLanguageChange",()=>this.translatePaginationTexts())),this._subscriptions.push(this.pubSubService.subscribe("onPaginationRefreshed",h=>{for(const _ of Object.keys(h))this.currentPagination[_]=h[_];this.updatePageButtonsUsability(),this._spanInfoFromToElm?.style&&(this._spanInfoFromToElm.style.display=0===this.currentPagination.totalItems?"none":"")}),this.pubSubService.subscribe("onPaginationSetCursorBased",()=>{this.dispose(),this.renderPagination(this._gridParentContainerElm)}))}get availablePageSizes(){return this.paginationService.availablePageSizes||[]}get dataFrom(){return this.paginationService.dataFrom}get dataTo(){return this.paginationService.dataTo}get itemsPerPage(){return this.paginationService.itemsPerPage}set itemsPerPage(a){this.paginationService.changeItemPerPage(a)}get pageCount(){return this.paginationService.pageCount}get pageNumber(){return this.paginationService.pageNumber}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions}get gridUid(){return this.grid?.getUID()??""}get locales(){return this.gridOptions?.locales??d.YMJ.locales}get totalItems(){return this.paginationService.totalItems}get isLeftPaginationDisabled(){return 1===this.pageNumber||0===this.totalItems}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||0===this.totalItems}dispose(){this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(a){this._gridParentContainerElm=a;const e=this.createPaginationContainer(),n=(0,d.fhB)("div",{className:"slick-pagination-nav"}),o=(0,d.fhB)("nav",{ariaLabel:"Page navigation"}),h=(0,d.fhB)("ul",{className:"pagination"});this._seekFirstElm=(0,d.fhB)("li",{className:"page-item seek-first"},h),this._seekFirstElm.appendChild((0,d.fhB)("a",{className:"page-link icon-seek-first",ariaLabel:"First Page",role:"button"})),this._seekPrevElm=(0,d.fhB)("li",{className:"page-item seek-prev"},h),this._seekPrevElm.appendChild((0,d.fhB)("a",{className:"page-link icon-seek-prev",ariaLabel:"Previous Page",role:"button"})),o.appendChild(h);const _=this.createPageNumberSection(),I=(0,d.fhB)("nav",{ariaLabel:"Page navigation"}),P=(0,d.fhB)("ul",{className:"pagination"});this._seekNextElm=(0,d.fhB)("li",{className:"page-item seek-next"},P),this._seekNextElm.appendChild((0,d.fhB)("a",{className:"page-link icon-seek-next",ariaLabel:"Next Page",role:"button"})),this._seekEndElm=(0,d.fhB)("li",{className:"page-item seek-end"},P),this._seekEndElm.appendChild((0,d.fhB)("a",{className:"page-link icon-seek-end",ariaLabel:"Last Page",role:"button"})),I.appendChild(P),e.appendChild(n),n.appendChild(o),n.appendChild(_),n.appendChild(I);const G=this.createPaginationSettingsSection();e.appendChild(n),e.appendChild(G),this._paginationElement.appendChild(e),a?.appendChild&&this._paginationElement&&a.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){if(this._itemPerPageElm&&Array.isArray(this.availablePageSizes))for(const a of this.availablePageSizes)this._itemPerPageElm.appendChild((0,d.fhB)("option",{value:`${a}`,text:`${a}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this.paginationService.isCursorBased?this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","span.page-number","textContent"):this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingEventService.bind(this._seekFirstElm,"click",this.changeToFirstPage.bind(this)),this._bindingEventService.bind(this._seekEndElm,"click",this.changeToLastPage.bind(this)),this._bindingEventService.bind(this._seekNextElm,"click",this.changeToNextPage.bind(this)),this._bindingEventService.bind(this._seekPrevElm,"click",this.changeToPreviousPage.bind(this)),this._bindingEventService.bind(this._itemPerPageElm,"change",this.updateItemsPerPage.bind(this))}changeToFirstPage(a){this.isLeftPaginationDisabled||this.paginationService.goToFirstPage(a)}changeToLastPage(a){this.isRightPaginationDisabled||this.paginationService.goToLastPage(a)}changeToNextPage(a){this.isRightPaginationDisabled||this.paginationService.goToNextPage(a)}changeToPreviousPage(a){this.isLeftPaginationDisabled||this.paginationService.goToPreviousPage(a)}changeToCurrentPage(a){this.paginationService.goToPageNumber(+a)}updateItemsPerPage(a){this.itemsPerPage=+(a?.target?.value??0)}translatePaginationTexts(){if(this._enableTranslate&&this.translaterService?.translate){const a=(0,d.mVi)(this.gridOptions);this.textItemsPerPage=this.translaterService.translate(`${a}ITEMS_PER_PAGE`),this.textItems=this.translaterService.translate(`${a}ITEMS`),this.textOf=this.translaterService.translate(`${a}OF`),this.textPage=this.translaterService.translate(`${a}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){const a=(0,d.fhB)("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),e=(0,d.fhB)("div",{className:"slick-pagination"});return a.appendChild(e),this._paginationElement=a,e}createPageNumberSection(){const a=(0,d.fhB)("div",{className:"slick-page-number"});return(0,d.fhB)("span",{className:"text-page",textContent:"Page"},a),a.appendChild(document.createTextNode(" ")),this.paginationService.isCursorBased?(0,d.fhB)("span",{className:"page-number",ariaLabel:"Page Number",dataset:{test:"page-number-label"},textContent:"1"},a):(0,d.fhB)("input",{type:"text",className:"form-control page-number",ariaLabel:"Page Number",value:"1",size:1,dataset:{test:"page-number-input"}},a),a.appendChild(document.createTextNode(" ")),(0,d.fhB)("span",{className:"text-of",textContent:"of"},a),a.appendChild(document.createTextNode(" ")),(0,d.fhB)("span",{className:"page-count",dataset:{test:"page-count"}},a),a}createPaginationSettingsSection(){const a=(0,d.fhB)("span",{className:"slick-pagination-settings"});this._itemPerPageElm=(0,d.fhB)("select",{id:"items-per-page-label",ariaLabel:"Items per Page",className:"items-per-page"},a),a.appendChild(document.createTextNode(" ")),(0,d.fhB)("span",{className:"text-item-per-page",textContent:"items per page"},a),a.appendChild(document.createTextNode(", "));const e=(0,d.fhB)("span",{className:"slick-pagination-count"},a);this._spanInfoFromToElm=(0,d.fhB)("span",{className:"page-info-from-to"},e),(0,d.fhB)("span",{className:"item-from",ariaLabel:"Page Item From",dataset:{test:"item-from"}},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode("-")),(0,d.fhB)("span",{className:"item-to",ariaLabel:"Page Item To",dataset:{test:"item-to"}},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode(" ")),(0,d.fhB)("span",{className:"text-of",textContent:"of"},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode(" "));const n=(0,d.fhB)("span",{className:"page-info-total-items"},e);return(0,d.fhB)("span",{className:"total-items",ariaLabel:"Total Items",dataset:{test:"total-items"}},n),n.appendChild(document.createTextNode(" ")),(0,d.fhB)("span",{className:"text-items",textContent:"items"},n),n.appendChild(document.createTextNode(" ")),a}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}}var l=u(23364),g=u(43794),S=u(77224),N=u(36649),M=u(52021),H=u(30054),B=u(3177),i=u(79358);class s{constructor(){this.className="RxJsResource"}get EMPTY(){return l.w}createObservable(){return new E.c}createSubject(){return new g.B}firstValueFrom(a){return(0,S._)(a)}iif(a,e,n){return function F(V,a,e){return(0,N.v)(()=>V()?a:e)}(a,e,n)}isObservable(a){return(0,M.A)(a)}of(...a){return(0,H.of)(...a)}switchMap(a){return(0,B.n)(a)}takeUntil(a){return(0,i.Q)(a)}}var c=u(34475),b=u(8108);let p=(()=>{class V{static{this.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NO_ELEMENTS_FOUND:"Aucun \xe9l\xe9ment trouv\xe9",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_DARK_MODE:"Toggle Dark Mode",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"}}static{this.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"}}static{this.VALIDATION_REQUIRED_FIELD="Field is required"}static{this.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number"}static{this.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number"}static{this.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}"}static{this.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}"}static{this.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}"}static{this.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}"}static{this.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}"}static{this.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}"}static{this.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}"}static{this.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}"}static{this.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}"}static{this.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}"}static{this.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals"}static{this.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters"}static{this.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters"}static{this.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters"}static{this.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)"}static{this.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)"}}return V})();var C=u(41610),R=u(74523),O=u(96336);let T=(()=>{class V{constructor(e){this.translateService=e}getCurrentLanguage(){return this.translateService?.currentLang??""}use(e){var n=this;return(0,R.A)(function*(){return n.translateService?.use?.(e)})()}translate(e){return this.translateService?.instant?.(e||" ")}static{this.\u0275fac=function(n){return new(n||V)(f.KVO(O.c$,8))}}static{this.\u0275prov=f.jDH({token:V,factory:V.\u0275fac})}}return V})();var y=u(21720),Q=u(41882),z=u(43767),K=u(28716),$=u(43357);const Y=["slickgridHeader"],q=["slickgridFooter"];function Z(V,a){1&V&&f.eu8(0)}function se(V,a){1&V&&f.eu8(0)}let ne=(()=>{class V{get paginationOptions(){return this._paginationOptions}set paginationOptions(e){this._paginationOptions=e&&this._paginationOptions?{...this.gridOptions.pagination,...this._paginationOptions,...e}:e,this.gridOptions.pagination=this._paginationOptions??this.gridOptions.pagination,this.paginationService.updateTotalItems(this.gridOptions.pagination?.totalItems??0,!0)}set columnDefinitions(e){this._columnDefinitions=e,this._isGridInitialized&&this.updateColumnDefinitionsList(e),e.length>0&&this.copyColumnWidthsReference(e)}get columnDefinitions(){return this._columnDefinitions}get dataset(){return(this.customDataView?this.slickGrid?.getData?.():this.dataView?.getItems())||[]}set dataset(e){const n=this._currentDatasetLength,o=(0,b.j)(e,this._dataset||[]);let h=e;this.slickGrid&&this.gridOptions?.enableTreeData&&Array.isArray(e)&&(e.length>0||e.length!==n||!o)&&(this._isDatasetHierarchicalInitialized=!1,h=this.sortTreeDataset(e,!o)),this._dataset=h,this.refreshGridData(h||[]),this._currentDatasetLength=(e||[]).length}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}set datasetHierarchical(e){if(this.sharedService.hierarchicalDataset=e,e&&this.columnDefinitions&&this.filterService?.clearFilters&&this.filterService.clearFilters(),e&&this.slickGrid&&this.sortService?.processTreeDataInitialSort&&(queueMicrotask(()=>{this.dataView.getItemCount()>0&&this.filterService.refreshTreeDataFilters()}),this._isDatasetHierarchicalInitialized=!0),e&&this.slickGrid&&this.dataView&&this.sortService&&this.sortService.processTreeDataInitialSort&&this.gridOptions&&this.gridOptions.enableTreeData){this.dataView.setItems([],this.gridOptions.datasetIdPropertyName);const h=[];this.Dataconvert(this.sharedService.hierarchicalDataset,h),this.refreshGridData(h)}}reLoadData(e){if(this.sharedService.hierarchicalDataset=e,e&&this.columnDefinitions&&this.filterService?.clearFilters&&this.filterService.clearFilters(),e&&this.slickGrid&&this.sortService?.processTreeDataInitialSort&&(queueMicrotask(()=>{this.dataView.getItemCount()>0&&this.filterService.refreshTreeDataFilters()}),this._isDatasetHierarchicalInitialized=!0),e&&this.slickGrid&&this.dataView&&this.sortService&&this.sortService.processTreeDataInitialSort&&this.gridOptions&&this.gridOptions.enableTreeData){this.dataView.setItems([],this.gridOptions.datasetIdPropertyName);const h=[];this.Dataconvert(this.sharedService.hierarchicalDataset,h),this.refreshGridData(h)}}Dataconvert(e,n){if(Array.isArray(e))for(const o of e)o&&(n.find(_=>_.id===o.id)||n.push(o),Array.isArray(o.Children)&&this.Dataconvert(o.Children,n))}get elementRef(){return this.elm}get backendService(){return this.gridOptions?.backendServiceApi?.service}get eventHandler(){return this._eventHandler}get gridContainerElement(){return document.querySelector(`#${this.gridOptions.gridContainerId||""}`)}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(e){this._isDatasetInitialized=e}set isDatasetHierarchicalInitialized(e){this._isDatasetHierarchicalInitialized=e}get registeredResources(){return this._registeredResources}constructor(e,n,o,h,_,I,P,G,k){this.angularUtilService=e,this.appRef=n,this.cd=o,this.containerService=h,this.elm=_,this.translate=I,this.translaterService=P,this.forRootConfig=G,this._currentDatasetLength=0,this._darkMode=!1,this._eventHandler=new d.JD8,this._hideHeaderRowAfterPageLoad=!1,this._isAutosizeColsCalled=!1,this._isGridInitialized=!1,this._isDatasetInitialized=!1,this._isDatasetHierarchicalInitialized=!1,this._isPaginationInitialized=!1,this._isLocalGrid=!0,this._registeredResources=[],this._scrollEndCalled=!1,this.groupingDefinition={},this.showPagination=!1,this.serviceList=[],this.totalItems=0,this.subscriptions=[],this.gridId="",this.columnDefinitionsChange=new f.bkB(!0);const j=new d.lmq;this._eventPubSubService=k?.eventPubSubService??new D.n(this.elm.nativeElement),this._eventPubSubService.eventNamingStyle=d.iKL.camelCase,this.backendUtilityService=k?.backendUtilityService??new d.OQz,this.gridEventService=k?.gridEventService??new d.u54,this.sharedService=k?.sharedService??new d.dB6,this.collectionService=k?.collectionService??new d.YDW(this.translaterService),this.extensionUtility=k?.extensionUtility??new d.kqS(this.sharedService,this.backendUtilityService,this.translaterService),this.filterFactory=new d.VV6(j,this.translaterService,this.collectionService),this.filterService=k?.filterService??new d.E(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=k?.resizerService??new d.oF$(this._eventPubSubService),this.sortService=k?.sortService??new d.ay(this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=k?.treeDataService??new d.y_D(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=k?.paginationService??new d.mch(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=k?.extensionService??new d.r7U(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.translaterService,()=>this.gridService),this.gridStateService=k?.gridStateService??new d.h_9(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=k?.gridService??new d.Gip(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.groupingService=k?.groupingAndColspanService??new d.YBK(this.extensionUtility,this._eventPubSubService),this.serviceList=[this.containerService,this.extensionService,this.filterService,this.gridEventService,this.gridService,this.gridStateService,this.groupingService,this.paginationService,this.resizerService,this.sortService,this.treeDataService],this.containerService.registerInstance("ExtensionUtility",this.extensionUtility),this.containerService.registerInstance("FilterService",this.filterService),this.containerService.registerInstance("CollectionService",this.collectionService),this.containerService.registerInstance("ExtensionService",this.extensionService),this.containerService.registerInstance("GridEventService",this.gridEventService),this.containerService.registerInstance("GridService",this.gridService),this.containerService.registerInstance("GridStateService",this.gridStateService),this.containerService.registerInstance("GroupingAndColspanService",this.groupingService),this.containerService.registerInstance("PaginationService",this.paginationService),this.containerService.registerInstance("ResizerService",this.resizerService),this.containerService.registerInstance("SharedService",this.sharedService),this.containerService.registerInstance("SortService",this.sortService),this.containerService.registerInstance("EventPubSubService",this._eventPubSubService),this.containerService.registerInstance("PubSubService",this._eventPubSubService),this.containerService.registerInstance("TranslaterService",this.translaterService),this.containerService.registerInstance("TreeDataService",this.treeDataService)}ngAfterViewInit(){if(!this.gridOptions||!this.columnDefinitions)throw new Error("Using `<angular-slickgrid>` requires [gridOptions] and [columnDefinitions], it seems that you might have forgot to provide them since at least of them is undefined.");this.initialization(this._eventHandler),this._isGridInitialized=!0,this.gridOptions?.enableEmptyDataWarningMessage&&Array.isArray(this.dataset)&&this.displayEmptyDataWarning(this.dataset.length<1),this.gridOptions.darkMode&&this.setDarkMode(!0)}getStyle(){let e={};return e=!z.J0.IsEmpty(this.gridOptions.gridHeight)&&z.J0.Int(this.gridOptions.gridHeight)>0?{height:`${this.gridOptions.gridHeight}px`}:{height:"calc(100%)"},e}ngOnDestroy(){this._eventPubSubService.publish("onBeforeGridDestroy",this.slickGrid),this.destroy(),this._eventPubSubService.publish("onAfterGridDestroyed",!0)}destroy(e=!1){}disposeExternalResources(){if(Array.isArray(this._registeredResources))for(;this._registeredResources.length>0;){const e=this._registeredResources.pop();e?.dispose&&e.dispose()}this._registeredResources=[]}emptyGridContainerElm(){const n=document.querySelector(`#${this.gridOptions?.gridContainerId??"grid1"}`);(0,d.i3Z)(n)}createBackendApiInternalPostProcessCallback(e){const n=e?.backendServiceApi;if(n?.service){const o=n.service;"function"==typeof o.getDatasetName&&(n.internalPostProcess=h=>{const _=n&&o&&"function"==typeof o.getDatasetName?o.getDatasetName():"";h?.data[_]&&this.refreshGridData("nodes"in h.data[_]?h.data[_].nodes:h.data[_],("totalCount"in h.data[_]?h.data[_].totalCount:h.data[_].length)||0)})}}initialization(e){if(this.gridOptions.translater=this.translaterService,this._eventHandler=e,this._isAutosizeColsCalled=!1,this.gridOptions&&(void 0!==this.gridOptions.frozenRow&&this.gridOptions.frozenRow>=0||void 0!==this.gridOptions.frozenColumn&&this.gridOptions.frozenColumn>=0)&&void 0===this.gridOptions.enableMouseWheelScrollHandler&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this._eventPubSubService.eventNamingStyle=this.gridOptions?.eventNamingStyle??d.iKL.camelCase,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._dataset=this._dataset||[],this.gridOptions=this.mergeGridOptions(this.gridOptions),this._paginationOptions=this.gridOptions?.pagination,this.locales=this.gridOptions?.locales??p.locales,this.backendServiceApi=this.gridOptions?.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this.gridOptions.backendServiceApi&&!this.gridOptions.backendServiceApi?.disableInternalPostProcess&&this.createBackendApiInternalPostProcessCallback(this.gridOptions),!this.customDataView){let h={...this.gridOptions.dataView,inlineFilters:this.gridOptions?.dataView?.inlineFilters??!1};(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new d.nF4,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,h={...h,groupItemMetadataProvider:this.groupItemMetadataProvider}),this.dataView=new d.GHb(h,this._eventPubSubService),this._eventPubSubService.publish("onDataviewCreated",this.dataView)}this.preRegisterResources(),this._columnDefinitions=this.loadSlickGridEditors(this._columnDefinitions||[]),this.gridOptions.autoAddCustomEditorFormatter&&(0,d.dT3)(this._columnDefinitions,this.gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.subscriptions.push(this._eventPubSubService.subscribe("onPluginColumnsChanged",o=>{this._columnDefinitions=o.columns,this.columnDefinitionsChange.emit(this._columnDefinitions)})),this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this.gridOptions),this.gridOptions.presets?.pinning&&(this.gridOptions={...this.gridOptions,...this.gridOptions.presets.pinning}),this.slickGrid=new d.jO9(`#${this.gridId}`,this.customDataView||this.dataView,this._columnDefinitions,this.gridOptions,this._eventPubSubService),this.sharedService.dataView=this.dataView,this.sharedService.slickGrid=this.slickGrid,this.sharedService.gridContainerElement=this.elm.nativeElement,this.groupItemMetadataProvider&&this.slickGrid.registerPlugin(this.groupItemMetadataProvider),this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.slickGrid,this.gridOptions,this.dataView);const n=void 0!==this.gridOptions.frozenColumn?this.gridOptions.frozenColumn:-1;if(n>=0&&n<=this._columnDefinitions.length&&(this.sharedService.frozenVisibleColumnId=this._columnDefinitions[n].id||""),this.registerResources(),this.slickGrid.init(),this.gridContainerElement&&this.resizerService.init(this.slickGrid,this.gridContainerElement),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&this.gridContainerElement&&(this.slickFooter=new m(this.slickGrid,this.gridOptions.customFooterOptions,this._eventPubSubService,this.translaterService),this.slickFooter.renderFooter(this.gridContainerElement)),!this.customDataView&&this.dataView){const o=this.gridOptions?.enableTreeData?this.sortTreeDataset(this._dataset):this._dataset;if(this.dataView.beginUpdate(),this.dataView.setItems(o||[],this.gridOptions.datasetIdPropertyName??"id"),this.dataView.endUpdate(),this.slickGrid?.getSelectionModel()&&this.gridOptions?.dataView&&"syncGridSelection"in this.gridOptions.dataView){let _=!1;this.gridOptions.backendServiceApi&&"syncGridSelectionWithBackendService"in this.gridOptions.dataView&&(_=this.gridOptions.dataView.syncGridSelectionWithBackendService);const I=this.gridOptions.dataView.syncGridSelection;if("boolean"==typeof I){let P=I;this._isLocalGrid||(P=I&&_),this.dataView.syncGridSelection(this.slickGrid,P)}else"object"==typeof I&&this.dataView.syncGridSelection(this.slickGrid,I.preserveHidden,I.preserveHiddenOnSelectionChange)}(this.dataView.getLength()||this._dataset?.length||0)>0&&(!this._isDatasetInitialized&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this._eventPubSubService.publish("onGridCreated",this.slickGrid),this.customDataView||this.executeAfterDataviewCreated(this.slickGrid,this.gridOptions),this.bindResizeHook(this.slickGrid,this.gridOptions),this.gridOptions?.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions),this.gridOptions?.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(this.dataset)),this._angularGridInstances={dataView:this.dataView,slickGrid:this.slickGrid,extensions:this.extensionService?.extensionList,reLoadData:this.reLoadData.bind(this),destroy:this.destroy.bind(this),backendService:this.backendService,eventPubSubService:this._eventPubSubService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingService,extensionService:this.extensionService,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService},this._eventPubSubService.publish("onAngularGridCreated",this._angularGridInstances)}paginationChanged(e){const n=this.gridStateService?.needToPreserveRowSelection()??!1;this.slickGrid&&!n&&this.gridOptions?.backendServiceApi&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.slickGrid.setSelectedRows([]);const{pageNumber:o,pageSize:h}=e;this.sharedService&&void 0!==h&&void 0!==o&&(this.sharedService.currentPagination={pageNumber:o,pageSize:h}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:o,pageSize:h},type:d.yf6.pagination},gridState:this.gridStateService.getCurrentGridState()}),this.cd.markForCheck()}refreshGridData(e,n){if(this.gridOptions?.enableEmptyDataWarningMessage&&Array.isArray(e)&&this.displayEmptyDataWarning((n||e.length)<1),Array.isArray(e)&&this.slickGrid&&this.dataView?.setItems){if(this.dataView.setItems(e,this.gridOptions.datasetIdPropertyName??"id"),!this.gridOptions.backendServiceApi&&!this.gridOptions.enableTreeData&&this.dataView.reSort(),e.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this.gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),e&&this.slickGrid.invalidate(),this.showPagination=!(!this.gridOptions||!(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi&&void 0===this.gridOptions.enablePagination)),this._paginationOptions&&this.gridOptions?.pagination&&this.gridOptions?.backendServiceApi){const o=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions),h=void 0!==n?n:this.gridOptions?.pagination?.totalItems;void 0!==h&&h!==this.totalItems&&(this.totalItems=+h),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(o)}this.slickGrid&&this.gridOptions.enableAutoResize&&this.resizerService.resizeGrid(this.gridOptions.autoResize&&this.gridOptions.autoResize.delay||10)}}setData(e,n=!1){n&&(this._isAutosizeColsCalled=!1,this._currentDatasetLength=0),this.dataset=e||[]}setPaginationOptionsWhenPresetDefined(e,n){return e.presets?.pagination&&n&&!this._isPaginationInitialized&&(this.hasBackendInfiniteScroll()?console.warn("[Angular-Slickgrid] `presets.pagination` is not supported with Infinite Scroll, reverting to first page."):(n.pageSize=e.presets.pagination.pageSize,n.pageNumber=e.presets.pagination.pageNumber)),n}setDarkMode(e=!1){e?this.sharedService.gridContainerElement?.classList.add("slick-dark-mode"):this.sharedService.gridContainerElement?.classList.remove("slick-dark-mode")}updateColumnDefinitionsList(e){e=this.loadSlickGridEditors(e),this.gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(void 0,e):this.extensionService.renderColumnHeaders(e,!0),this.gridOptions?.enableAutoSizeColumns?this.slickGrid.autosizeColumns():this.gridOptions?.enableAutoResizeColumnsByCellContent&&this.resizerService?.resizeColumnsByCellContent&&this.resizerService.resizeColumnsByCellContent()}showHeaderRow(e=!0){return this.slickGrid.setHeaderRowVisibility(e),!0===e&&this._isGridInitialized&&this.slickGrid.setColumns(this.columnDefinitions),e}copyColumnWidthsReference(e){e.forEach(n=>n.originalWidth=n.width)}displayEmptyDataWarning(e=!0){this.slickEmptyWarning?.showEmptyDataMessage(e)}bindDifferentHooks(e,n,o){if(this.translate?.onLangChange&&(n.enableTranslate&&this.extensionService.translateAllExtensions(),this.subscriptions.push(this.translate.onLangChange.subscribe(({lang:h})=>{this._eventPubSubService.publish("onLanguageChange"),n.enableTranslate&&(this.extensionService.translateAllExtensions(h),(n.createPreHeaderPanel&&n.createTopHeaderPanel||n.createPreHeaderPanel&&!n.enableDraggableGrouping)&&this.groupingService.translateGroupingAndColSpan())}))),n.backendServiceApi){const h=n.backendServiceApi;h?.service?.init&&h.service.init(h.options,n.pagination,this.slickGrid,this.sharedService)}o&&e&&(this.gridEventService.bindOnCellChange(e),this.gridEventService.bindOnClick(e),n.enableSorting&&(n.backendServiceApi&&!n.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(e):this.sortService.bindLocalOnSort(e)),n.enableFiltering&&(this.filterService.init(e),n.backendServiceApi&&!n.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(e):this.filterService.bindLocalOnFilter(e)),this._eventHandler.subscribe(e.onColumnsReordered,(h,_)=>{this.sharedService.hasColumnsReordered=!0,this.sharedService.visibleColumns=_.impactedColumns}),this._eventHandler.subscribe(e.onSetOptions,(h,_)=>{_.optionsBefore.darkMode!==_.optionsAfter.darkMode&&this.gridContainerElement&&this.setDarkMode(_.optionsAfter.darkMode)}),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized(),this._eventHandler.subscribe(o.onRowCountChanged,()=>{e.invalidate(),this.handleOnItemCountChanged(o.getFilteredItemCount()||0,o.getItemCount()||0)}),this._eventHandler.subscribe(o.onSetItemsCalled,(h,_)=>{this.handleOnItemCountChanged(o.getFilteredItemCount()||0,_.itemCount),_.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!this.gridOptions?.resizeByContentOnlyOnFirstLoad)}),n?.enableFiltering&&!n.enableRowDetailView&&this._eventHandler.subscribe(o.onRowsChanged,(h,_)=>{Array.isArray(_?.rows)&&(_.rows.forEach(I=>e.updateRow(I)),e.render())})),n?.colspanCallback&&o&&o.getItem&&o.getItemMetadata&&(o.getItemMetadata=h=>{let _=null;return n.colspanCallback&&(_=n.colspanCallback(o.getItem(h))),_})}bindBackendCallbackFunctions(e){const n=e.backendServiceApi,o=n?.service,h=o?.options??{},_=!!h&&(!h||!("executeProcessCommandOnInit"in h)||h.executeProcessCommandOnInit);if(o){if(e?.presets){if(o.updateFilters&&Array.isArray(e.presets.filters)&&e.presets.filters.length>0&&o.updateFilters(e.presets.filters,!0),o.updateSorters&&Array.isArray(e.presets.sorters)&&e.presets.sorters.length>0){const I=this.gridOptions.multiColumnSort?e.presets.sorters:e.presets.sorters.slice(0,1);o.updateSorters(void 0,I)}if(o.updatePagination&&e.presets.pagination&&!this.hasBackendInfiniteScroll()){const{pageNumber:I,pageSize:P}=e.presets.pagination;o.updatePagination(I,P)}}else{const I=this.filterService.getColumnFilters();I&&o.updateFilters&&o.updateFilters(I,!1)}if(n&&o&&(n.onInit||_)){const I="function"==typeof o.buildQuery?o.buildQuery():"",P=_?n.process&&n.process(I)||null:n.onInit&&n.onInit(I)||null;queueMicrotask(()=>{const G=this.backendUtilityService,k=new Date;n.preProcess&&n.preProcess();const j=this.gridOptions?.pagination?.totalItems??0;P instanceof Promise?P.then(W=>G.executeBackendProcessesCallback(k,W,n,j)).catch(W=>G.onBackendError(W,n)):P&&this.rxjs?.isObservable(P)&&this.subscriptions.push(P.subscribe({next:W=>G.executeBackendProcessesCallback(k,W,n,j),error:W=>G.onBackendError(W,n)}))})}n.service.options?.infiniteScroll&&this.addBackendInfiniteScrollCallback()}}addBackendInfiniteScrollCallback(){if(this.slickGrid&&this.gridOptions.backendServiceApi&&this.hasBackendInfiniteScroll()&&!this.gridOptions.backendServiceApi?.onScrollEnd){const e=()=>{this.backendUtilityService.setInfiniteScrollBottomHit(!0),this.paginationService.goToNextPage().then(o=>{o||this.backendUtilityService.setInfiniteScrollBottomHit(!1)})};this.gridOptions.backendServiceApi.onScrollEnd=e,this._eventHandler.subscribe(this.slickGrid.onScroll,(o,h)=>{const _=h.grid.getViewportNode();["mousewheel","scroll"].includes(h.triggeredBy||"")&&this.paginationService?.totalItems&&h.scrollTop>0&&Math.ceil(_.offsetHeight+h.scrollTop)>=h.scrollHeight&&(this._scrollEndCalled||(e(),this._scrollEndCalled=!0))});const n=this.gridOptions.backendServiceApi.postProcess;this.gridOptions.backendServiceApi.postProcess=o=>{this._scrollEndCalled=!1,n&&n(o)}}}bindResizeHook(e,n){if(n.autoFitColumnsOnFirstLoad&&n.autosizeColumnsByCellContentOnFirstLoad||n.enableAutoSizeColumns&&n.enableAutoResizeColumnsByCellContent)throw new Error('[Angular-Slickgrid] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');n.gridHeight||n.gridWidth?this.resizerService.resizeGrid(0,{height:n.gridHeight,width:n.gridWidth}):this.resizerService.resizeGrid(),e&&n?.enableAutoResize&&n.autoFitColumnsOnFirstLoad&&n.enableAutoSizeColumns&&!this._isAutosizeColsCalled&&(e.autosizeColumns(),this._isAutosizeColsCalled=!0)}executeAfterDataviewCreated(e,n){if(n.enableSorting&&Array.isArray(n.presets?.sorters)){const o=this.gridOptions.multiColumnSort?n.presets.sorters:n.presets.sorters.slice(0,1);this.sortService.loadGridSorters(o)}}handleOnItemCountChanged(e,n){this._currentDatasetLength=n,this.metrics={startTime:new Date,endTime:new Date,itemCount:e,totalItemCount:n},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&this.gridOptions?.enableEmptyDataWarningMessage&&this.displayEmptyDataWarning(0===e)}initializePaginationService(e){this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.slickGrid,e,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",n=>{this.paginationChanged(n)}),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",n=>{this.showPagination=n?.visible??!1,this.gridOptions?.backendServiceApi&&this.backendUtilityService?.refreshBackendDataset(this.gridOptions),this.renderPagination(this.showPagination)})),this.renderPagination(),this._isPaginationInitialized=!0),this.cd.detectChanges()}loadEditorCollectionAsync(e){if(e?.editor){const n=e.editor.collectionAsync;e.editor.disabled=!0,n instanceof E.c?this.subscriptions.push(n.subscribe(o=>this.updateEditorCollection(e,o))):n instanceof Promise&&n.then(o=>{Array.isArray(o)&&this.updateEditorCollection(e,o)})}}insertDynamicPresetColumns(e,n){if(this._columnDefinitions){const o=this._columnDefinitions.findIndex(h=>h.id===e);if(o>=0){const h=this._columnDefinitions[o];h?.id===e&&!n.some(_=>_.id===e)&&(o>0?n.splice(o,0,h):n.unshift(h))}}}loadColumnPresetsWhenDatasetInitialized(){if(Array.isArray(this.gridOptions.presets?.columns)&&this.gridOptions.presets.columns.length>0){const e=this.gridStateService.getAssociatedGridColumns(this.slickGrid,this.gridOptions.presets.columns);Array.isArray(e)&&e.length>0&&Array.isArray(this._columnDefinitions)&&(this.gridOptions.enableRowMoveManager&&this.insertDynamicPresetColumns(this.gridOptions?.rowMoveManager?.columnId??"_move",e),this.gridOptions.enableCheckboxSelector&&this.insertDynamicPresetColumns(this.gridOptions?.checkboxSelector?.columnId??"_checkbox_selector",e),this.gridOptions.enableRowDetailView&&this.insertDynamicPresetColumns(this.gridOptions?.rowDetailView?.columnId??"_detail_selector",e),e.forEach(n=>n.originalWidth=n.width),this.slickGrid.setColumns(e),this.sharedService.visibleColumns=e)}}loadFilterPresetsWhenDatasetInitialized(){this.gridOptions&&!this.customDataView&&(Array.isArray(this.gridOptions.presets?.filters)||Array.isArray(this.gridOptions.presets?.treeData?.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets(this.gridOptions.presets?.filters||[])}loadLocalGridPagination(e){if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(e)?e.length:0,this._paginationOptions&&this.dataView?.getPagingInfo){const o=this.dataView.getPagingInfo();o&&"totalRows"in o&&this._paginationOptions.totalItems!==o.totalRows&&(this.totalItems=o.totalRows||0)}this._paginationOptions.totalItems=this.totalItems;const n=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(n)}}loadRowSelectionPresetWhenExists(){const e=this.gridOptions?.presets;if(this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.slickGrid?.getSelectionModel()&&e?.rowSelection&&(Array.isArray(e.rowSelection.gridRowIndexes)||Array.isArray(e.rowSelection.dataContextIds))){let o=e.rowSelection.dataContextIds,h=e.rowSelection.gridRowIndexes;Array.isArray(o)&&o.length>0?h=this.dataView.mapIdsToRows(o)||[]:Array.isArray(h)&&h.length>0&&(o=this.dataView.mapRowsToIds(h)||[]),this.slickGrid&&Array.isArray(h)&&(this.slickGrid.setSelectedRows(h),this.dataView.setSelectedIds(o||[],{isRowBeingAdded:!0,shouldTriggerEvent:!1,applyRowSelectionToGrid:!0}))}}hasBackendInfiniteScroll(e){return!!(e||this.gridOptions).backendServiceApi?.service.options?.infiniteScroll}mergeGridOptions(e){e.gridId=this.gridId,e.gridContainerId=`slickGridContainer-${this.gridId}`;const n=(0,c.extend)(!0,{},C.a,this.forRootConfig,e);return this.hasBackendInfiniteScroll(e)||(e.enablePagination=!!(e.backendServiceApi&&void 0===e.enablePagination||e.enablePagination)),n?.pagination&&(e.enablePagination||e.backendServiceApi)&&(this.forRootConfig.pagination||e.pagination)&&(n.pagination.pageSize=e.pagination?.pageSize??this.forRootConfig.pagination?.pageSize??C.a.pagination.pageSize,n.pagination.pageSizes=e.pagination?.pageSizes??this.forRootConfig.pagination?.pageSizes??C.a.pagination.pageSizes),this._hideHeaderRowAfterPageLoad=!1===n.showHeaderRow,n.enableFiltering&&!n.showHeaderRow&&(n.showHeaderRow=n.enableFiltering),n&&!n.enableFiltering&&n.enablePagination&&this._isLocalGrid&&(n.enableFiltering=!0,n.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),n}registerExternalResources(e,n=!1){n&&this.disposeExternalResources(),e.forEach(o=>this._registeredResources.push(o)),this.initializeExternalResources(e)}resetExternalResources(){this._registeredResources=[]}preRegisterResources(){this._registeredResources=this.gridOptions?.externalResources||[],this.registerRxJsResource(new s),this.gridOptions.enableRowDetailView&&(this.slickRowDetailView=new Q.v(this.angularUtilService,this.appRef,this._eventPubSubService,this.elm.nativeElement,this.rxjs),this.slickRowDetailView.create(this.columnDefinitions,this.gridOptions),this.extensionService.addExtensionToList(d.$fu.rowDetailView,{name:d.$fu.rowDetailView,instance:this.slickRowDetailView}))}initializeExternalResources(e){if(Array.isArray(e))for(const n of e)this.slickGrid&&"function"==typeof n.init&&n.init(this.slickGrid,this.containerService)}registerResources(){Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),(this.gridOptions.createPreHeaderPanel&&this.gridOptions.createTopHeaderPanel||this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping)&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new A,this._registeredResources.push(this.slickEmptyWarning),this.initializeExternalResources(this._registeredResources),this.gridOptions.enableRowDetailView&&this.slickRowDetailView&&this.slickRowDetailView.init(this.slickGrid)}registerRxJsResource(e){this.rxjs=e,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.containerService.registerInstance("RxJsResource",this.rxjs)}renderPagination(e=!0){this.gridOptions?.enablePagination&&!this._isPaginationInitialized&&e?(this.slickPagination=new r(this.paginationService,this._eventPubSubService,this.sharedService,this.translaterService),this.slickPagination.renderPagination(this.gridContainerElement),this._isPaginationInitialized=!0):e||(this.slickPagination?.dispose(),this._isPaginationInitialized=!1)}sortTreeDataset(e,n=!1){const o=this._currentDatasetLength;let h,_=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(h=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),_=h.flat):Array.isArray(e)&&e.length>0&&(h=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(e,this._columnDefinitions,this.gridOptions),this.sharedService.hierarchicalDataset=h.hierarchical,_=h.flat),e.length>0&&(n||e.length!==o)&&this.filterService.refreshTreeDataFilters(_),_}loadSlickGridEditors(e){return e.some(n=>`${n.id}`.includes("."))&&console.error('[Angular-Slickgrid] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),e.map(n=>(n?.editor?.collectionAsync&&this.loadEditorCollectionAsync(n),{...n,editorClass:n.editor?.model}))}updateEditorCollection(e,n){if(this.slickGrid&&e.editor){e.editor.collection=n,e.editor.disabled=!1;const o=this.slickGrid.getCellEditor();o?.disable&&o?.renderDomElement&&(o.destroy(),o.disable(!1),o.renderDomElement(n))}}static{this.\u0275fac=function(n){return new(n||V)(f.rXU(y.W),f.rXU(f.o8S),f.rXU(f.gRc),f.rXU(K.J),f.rXU(f.aKT),f.rXU(O.c$,8),f.rXU(T,8),f.rXU("config"),f.rXU("externalService"))}}static{this.\u0275cmp=f.VBU({type:V,selectors:[["angular-slickgrid"]],contentQueries:function(n,o,h){if(1&n&&(f.wni(h,Y,7),f.wni(h,q,7)),2&n){let _;f.mGM(_=f.lsd())&&(o.slickgridHeader=_.first),f.mGM(_=f.lsd())&&(o.slickgridFooter=_.first)}},inputs:{customDataView:"customDataView",gridId:"gridId",gridOptions:"gridOptions",paginationOptions:"paginationOptions",columnDefinitions:"columnDefinitions",dataset:"dataset",datasetHierarchical:"datasetHierarchical"},outputs:{columnDefinitionsChange:"columnDefinitionsChange"},standalone:!1,features:[f.Jv_([y.W,T])],decls:9,vars:6,consts:[[1,"gridPane",3,"id","ngStyle"],[4,"ngTemplateOutlet"],[1,"slickgrid-container"]],template:function(n,o){1&n&&(f.j41(0,"div",0),f.EFF(1,"\n  "),f.DNE(2,Z,1,0,"ng-container",1),f.EFF(3,"\n  "),f.j41(4,"div",2),f.EFF(5,"\n  "),f.k0s(),f.EFF(6,"\n  "),f.DNE(7,se,1,0,"ng-container",1),f.EFF(8,"\n"),f.k0s()),2&n&&(f.Mz_("id","slickGridContainer-",o.gridId,""),f.Y8G("ngStyle",o.getStyle()),f.R7$(2),f.Y8G("ngTemplateOutlet",o.slickgridHeader),f.R7$(2),f.BMQ("id",o.gridId),f.R7$(3),f.Y8G("ngTemplateOutlet",o.slickgridFooter))},dependencies:[$.T3,$.B3],encapsulation:2})}}return V})()}}]);
"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[4628],{69883:(w,P,I)=>{I.d(P,{n:()=>s});var b=I(43767);class s{get ParentID(){return b.J0.IsEmpty(this.Parent)?null:this.Parent.Id}set ParentID(d){this.parentID=d}get NodeID(){return this.Id}constructor(){this.RowForeColor="Black",this._index=-1,this._isExpanded=!1,this.IsSelected=!1,this.FontWeight="Normal",this.Text=[]}CallPropertyChange(){}get Collapsed(){return!this._isExpanded}set Collapsed(d){d==this.IsExpanded&&(this.IsExpanded=!d)}static{this.NodeCollection=class extends Array{constructor(){super()}NodeCollection_1(d){return this._owner=d,this}push(...d){return this.InsertItem(this.length+1,d[0]),0}ClearItems(){for(;0!=this.length;)this.RemoveAt(this.length-1)}InsertItem(d,f){if(null==f)throw"item";if(f.Parent!=this._owner){null!=f.Parent&&f.Parent.Children.Remove(f),f._parent=this._owner,f._index=d;for(let m=d;m<this.length;m++)this[m]._index++;super.push(f)}return 0}RemoveAt(d){let f=this[d];f._parent=null,f._index=-1;for(let m=d+1;m<length;m++)this[m]._index--;super.RemoveAt(d)}SetItem(d,f){if(null==f)throw"item";this.RemoveAt(d),this.InsertAt(d,f)}}}OnPropertyChanged(d){}get Index(){return this._index}get IsVisible(){let d=this._parent;for(;null!=d;){if(!d.IsExpanded)return!1;d=d.Parent}return!0}get IsExpanded(){return this._isExpanded}set IsExpanded(d){d!=this.IsExpanded&&this.Tree.SetIsExpanded(this,d)}AssignIsExpanded(d){this._isExpanded=d}get IsExpandable(){return this.IsGroup}get Parent(){return this._parent}set Parent(d){this._parent=d}get Level(){let d=this.Tree;return null!=d&&d.IsDynamicTree?this.LevelNo:null==this._parent?-1:this._parent.Level+1}get PreviousNode(){if(null!=this._parent){let d=this.Index;if(d>0)return this._parent.Nodes[d-1].IsGroup?this.GetLastNode(this._parent.Nodes[d-1]):this._parent.Nodes[d-1];if(this.Parent.Text.length>0)return this.Parent}return this}GetLastNode(d){return d.Children.length>0?d.Nodes[d.Nodes.length-1].IsGroup?this.GetLastNode(d.Nodes[d.Nodes.length-1]):d.Nodes[d.Nodes.length-1]:d}get NextNode(){if(null!=this._parent){let d=this.Index;if(d<this._parent.Nodes.length-1)return this._parent.Nodes[d]}return null}get NextTreeNode(){return null!=this._parent?this.IsGroup&&this.Children.length>0?this.Nodes[0]:this.GetNextParent(this):this}GetNextParent(d){if(0==d._parent.Text.length)return d;let f=d.Index;return f<d._parent.Nodes.length-1?d._parent.Nodes[f+1]:this.GetNextParent(d.Parent)}get Next(){if(this.Nodes.length>0)return this.Nodes[0];if(null!=this._parent){let d=this.Index;if(d<this._parent.Nodes.length-1)return this._parent.Nodes[d+1];if(d==this._parent.Nodes.length&&null!=this._parent._parent&&this._parent.Index<this._parent._parent.Nodes.length-1)return this._parent._parent.Nodes[this._parent.Index+1]}return null}get BottomNode(){let d=this.Parent;return null!=d?null!=d.NextNode?d.NextNode:d.BottomNode:null}get NextVisibleNode(){return this.IsExpanded&&this.Nodes.length>0?this.Nodes[0]:this.NextNode??this.BottomNode}get VisibleChildrenCount(){return this.AllVisibleChildren?this.AllVisibleChildren.length:0}get AllVisibleChildren(){let d=this.Level,f=this,m=[];for(;f=f.NextVisibleNode,null!=f&&f.Level>d;)m.push(f);return m}get Tag(){return this._tag}set Tag(d){this._tag=d}get Children(){return this._children}set Children(d){this._children=d}get Nodes(){return this._nodes}set Nodes(d){this._nodes=d}ChildrenChanged(d,f){switch(f.Action){case"Add":break;case"Remove":this.Children.length>f.OldStartingIndex&&this.RemoveChildAt(f.OldStartingIndex);break;case"Move":case"Replace":case"Reset":for(;this.Children.length>0;)this.RemoveChildAt(0)}this.HasChildren=this.Children.length>0}RemoveChildAt(d){this.ClearChildrenSource(this.Children[d]),this.Children.RemoveAt(d)}ClearChildrenSource(d){d.ChildrenSource=null,d.Children.forEach(f=>this.ClearChildrenSource(f))}}},72247:(w,P,I)=>{I.d(P,{T:()=>E});var b=I(74523),s=I(32040),h=I(43767),d=I(54581),f=I(58170),m=I(69883),S=I(58941),N=I(27730),x=I(84151),y=I(98580),V=I(23458),A=I(84833),B=I(95615);class E extends y.g{get ListBoxValue(){return this._ListBoxValue}set ListBoxValue(e){e!=this._ListBoxValue&&(this._ListBoxValue=e,this.SearchList())}get GridViewID(){return this.gridviewid}set GridViewID(e){this.gridviewid=e}get RefreshData(){return this._Refresh}set RefreshData(e){this._Refresh=e,this.IsDynamicTree?this.LoadData_3(-1,!1,0):this.GetData(),this.RefreshSelectionText()}refreshUI(){this.treecomp&&this.treecomp.angularGrid&&this.treecomp.angularGrid.resizerService.resizeGrid()}get getMobileTileParents(){return h.J0.IsEmpty(this.Rows)?[]:this.Rows.filter(e=>0!=e._children.length)}getMobileGroupChildrens(e){return e._children.filter(t=>0==t.IsGroup)}onMobileInput(e){const t=e.target;h.J0.IsEmpty(t.value)?this.isMobileSearched=!1:(this.searchList=[],this.isMobileSearched=!0,this.getMobileTileParents.forEach(i=>{var n=[];if(i._children.map(l=>{l.Text[0].toLowerCase().includes(t.value.toLowerCase())&&n.push(l)}),0!=n.length){var r=Object.assign({},i);r._children=n,this.searchList.push(r)}}))}mobileStyleObject(e){let t;return t={height:"auto"},t}onMenuClick(e){this.SelectedNode=e,this.Parent.CommandController("MouseDoubleClick")}get ChildNodes(){return this.Data.filter(e=>0==e.IsGroup)}get SelectedNodes(){return this._SelectedNodes}set SelectedNodes(e){this._SelectedNodes!=e&&(this._SelectedNodes=e,null!=this.Parent&&(this.Parent.SelectedNodes=e))}get SelectedIndex(){return this._SelectedIndex}set SelectedIndex(e){this._SelectedIndex!=e&&(this._SelectedIndex=e)}get SelectedNode(){return this._selectedNode}set SelectedNode(e){this._selectedNode!=e&&(this._selectedNode=e,null!=this.Parent&&(this.Parent.SelectedNode=e))}get BtnSelectionVisibility(){return this._BtnSelectionVisibility}set BtnSelectionVisibility(e){e!=this._BtnSelectionVisibility&&(this._BtnSelectionVisibility=e,e&&(this.IsNodesBySelection=!1))}get Root(){return this._root}set Root(e){this._root=e}get SetFocusNodeID(){return this._SetFocusNodeID}set SetFocusNodeID(e){if(this._SetFocusNodeID!=e&&(this._SetFocusNodeID=e,this.treecomp.angularGrid)){this.treecomp.gridObj.getData().refresh();let t=this.treecomp.gridObj.getData().getRowById(e);h.J0.IsEmpty(t)||this.treecomp.gridObj.setActiveCell(t,0)}}constructor(){super(),this.OnResize=new f.Yk,this.CallBackDelegate=new f.Yk,this.btnFilterVisibility=!1,this.OnbtnClick=new f.Yk,this.ClickIkon=new f.Yk,this.ContextMenuOpening=new f.Yk,this.ContextMenu=[],this.oSelectViewCallBack=null,this.DynamicCommand=new f.Yk,this.DefaultGridViewID=0,this.ChunkCount=1e3,this.RowCount=0,this.SearchDDL=new V.y$(0),this.OnInputKeyDown=new f.Yk,this._ListBoxValue=0,this.btnSortVisibility=!1,this.SearchTextVisibility=!0,this.LookupTypeID=0,this.WhereCondition="",this.isMobileSearched=!1,this.searchList=[],this.MobIcon="./assets/icons/document.png",this.IsQuickNodeDefined=!1,this.IsQuickGroupDefined=!1,this.SearchViewID=0,this.ItemColor="",this.OnNodeSelected=null,this.Rows=null,this.ColumnsSource=[],this.AllNodes=[],this.lstParents=[],this.CodeIndex=-1,this.NameIndex=-1,this.NumberIndex=-1,this.ReportAssignedViews=[],this.IsDynamicTree=!1,this.left=0,this.SearchSeqNo=0,this.direction=0,this.inActiveID=0,this.LVhgt=0,this.Loca="",this.duedate="",this.div="",this.linkDef="",this.SelectedDOcs=[],this.PendingList=!1,this.IsFilterClick=!1,this.IsReportDB=!1,this.WidgetConfig=[],this.ColumnDef=[],this.DataColumns=[],this.treeDbCall=0,this.temprows=[],this.tmrSearch=new h.M4,this.collapsedParents=[],this.PactGridColumn=new B.h,s.d.IsMobile&&!s.d.IsAndroid&&(this.MobIcon=this.MobIcon.replace("./assets",s.d.SessionManager.config.apiURL+"images"))}TreeViewModel_11(e,t,i,n){this.ScreenName="",this.DynamicCommand.Subscribe(this,"CommandController"),this.ClickIkon.Subscribe(this,"OnClick"),this.altColor1="Red",this.altColor2="",this.SelectedItemColor="LightYellow",this.MovingItemColor="Red",this.GroupItemColor="Black",this.ItemColor="Black",this.RowHeight=25,this.VerticalLine=!1,this.HorizontalLine=!1,this.TreeConstructor(e,t,this.gridviewid,i,null,n,-1)}TreeViewModel(e,t,i,n,r,l,a,u,o,C){this.docdate=r,this.duedate=l,this.Loca=a,this.div=u,this.SelectedDOcs=C.split(","),this.linkDef=o,"SearchDocumentViewModel"==t.ClassName?.toString()&&(this.PendingList=t.PendingList),this.TreeConstructor(e,t,i,n,null,null,-1)}TreeViewModel_5(e,t,i,n,r){this.TreeViewModel_Web(e,t,i,n,r,-1)}TreeViewModel_6(e,t,i,n,r,l){this.TreeConstructor(e,t,i,n,l,r,-1)}TreeViewModel_3(e,t,i){this.TreeViewModel_4(e,t,i,"")}TreeViewModel_4(e,t,i,n){this.ScreenName=i,this.DynamicCommand.Subscribe(this,"CommandController"),this.ClickIkon.Subscribe(this,"OnClick"),this.altColor1="Red",this.altColor2="",this.SelectedItemColor="LightYellow",this.MovingItemColor="Red",this.GroupItemColor="Black",this.ItemColor="Black",this.RowHeight=25,this.VerticalLine=!1,this.HorizontalLine=!1,this.TreeConstructor(e,t,this.gridviewid,n,null,null,-1)}TreeViewModel_7(e,t,i,n){this.ScreenName="",this.DynamicCommand.Subscribe(this,"CommandController"),this.ClickIkon.Subscribe(this,"OnClick"),this.altColor1="Red",this.altColor2="",this.SelectedItemColor="LightYellow",this.MovingItemColor="Red",this.GroupItemColor="Black",this.ItemColor="Black",this.RowHeight=25,this.VerticalLine=!1,this.HorizontalLine=!1,this.TreeConstructor(e,t,this.gridviewid,i,null,n,-1)}TreeViewModel_Web(e,t,i,n,r,l){this.TreeConstructor(e,t,i,n,r,null,l)}TreeViewModel_WebByPage(e,t,i,n,r,l,a,u){let o;""!=n&&null!=n&&(this.ReportAssignedViews=n.split(",")),this.CostCenterID=e,this.WhereCondition=i,this.GridViewID=t,this.left=l,this.direction=a,this.SearchSeqNo=u,this.IsDynamicTree=!0,7==e&&(this.IsDynamicTree=!1,this.direction=0,r=1e3),o=this.GetDataset(1,r),this.Data=o.Tables[0],o.Tables.length>1&&o.Tables[1].length>0&&(this.RowCount=parseInt(o.Tables[1][0][Object.keys(this.Dataset.Tables[1])[0]]))}TreeConstructor(e,t,i,n,r,l,a){if(""!=r&&null!=r&&(this.ReportAssignedViews=r.split(",")),null!=t&&("StaticReportFilterViewModel"==t.ClassName?.toString()||t.ClassName?.toString()),this.InitTreeViewModel(e,t),this.SelectedNodes=l,-1!=a&&(this.ChunkCount=a),1==this.Dataset.Tables.length&&this.Dataset.Tables[0].length>0?this.DisplayMessage=this.Dataset.Tables[0][0].ErrorMessage.toString():this.DefaultGridViewID=i,200==this.CostCenterID&&(this.DefaultCollapse=!0),null!=this.Dataset&&null!=this.Dataset&&this.Dataset.Tables.length>6&&this.Dataset.Tables[6].length>0&&null!=this.Dataset.Tables[6][0].Value){let u=[];if(u=this.Dataset.Tables[6].find(o=>"DefaultCollapse"==o.Name),null!=u&&""!=u.Value.toString()){let o=u.Value.toString();this.DefaultCollapse="true"==o.toLowerCase()}u=this.Dataset.Tables[6].find(o=>"SearchView"==o.Name),null!=u&&""!=u.Value.toString()&&(this.SearchViewID=parseInt(u.Value))}if(null!=this.Dataset&&null!=this.Dataset&&this.Dataset.Tables.length>7&&this.Dataset.Tables[7].length>0&&null==this.Dataset.Tables[7][0].ErrorMessage&&""!=this.Dataset.Tables[7][0][Object.keys(this.Dataset.Tables[7][0])[0]].toString()&&parseInt(this.Dataset.Tables[7][0][Object.keys(this.Dataset.Tables[7][0])[0]].toString())>0?h.J0.StringIsNullOrEmpty(this.Dataset.Tables[7][0].EnableQuickAdd)||"1"!=this.Dataset.Tables[7][0].EnableQuickAdd.toString()?h.J0.StringIsNullOrEmpty(this.Dataset.Tables[7][0].EnableQuickAdd)||"2"!=this.Dataset.Tables[7][0].EnableQuickAdd.toString()?(this.IsQuickNodeDefined=!0,this.IsQuickGroupDefined=!0):this.IsQuickGroupDefined=!0:this.IsQuickNodeDefined=!0:(this.IsQuickNodeDefined=!1,this.IsQuickGroupDefined=!1),this.WhereCondition=n,this.GridViewID=i,(278==this.GridViewID||this.PendingList)&&this.LoadDefaultView(),null!=s.d.SessionManager.Preferences.DynamicTrees&&s.d.SessionManager.StringIsNullOrEmpty("DynamicTrees")){let u=[];u=s.d.SessionManager.Preferences.DynamicTrees.split(","),this.IsDynamicTree=u.indexOf(this.CostCenterID.toString())>-1}this.LoadViews(),this.SearchDDL.SelectionChangedCommand.Subscribe(this,"OnListChange")}OnListChange(e){this.ListBoxValue=e.SelectedValue}InitTreeViewModel(e,t){var i;this.CostCenterID=e,this.Parent=t,this.SearchDDL.CCID=e,this.SearchDDL.TypeID=2==e||92==e||93==e||94==e?2:3==e?10:1,null!=this.Dataset&&null!=this.Dataset&&this.Dataset.Tables.length>8&&this.Dataset.Tables[8].length>0&&null!=this.Dataset.Tables[8][0].Value&&""!=this.Dataset.Tables[8][0].Value.toString()&&(this.UpdateImageVisible="true"==this.Dataset.Tables[8][0].Value.toString().toLowerCase()),this.tmrSearch.Tick(this,"tmrSearch_Tick"),this.tmrSearch.Interval=350,this.ButtonAssign=new S.v,this.ButtonLevel=new S.v,this.ButtonLoad=new S.v,this.ButtonAdd=new S.v,this.ButtonClose=new S.v,this.ButtonGroup=new S.v,this.ButtonEdit=new S.v,this.ButtonDelete=new S.v,this.ButtonConvert=new S.v,this.ButtonMove=new S.v,this.ButtonPrint=new S.v,this.ButtonBarcode=new S.v,this.ButtonExport=new S.v,this.ButtonEmail=new S.v,this.ButtonSMS=new S.v,this.ButtonSettings=new S.v,this.ButtonCustomize=new S.v,this.ButtonQuery=new S.v,this.ButtonImport=new S.v,this.ButtonCopy=new S.v,this.ButtonMultiBOM=new S.v,this.ButtonReplace=new S.v,this.ButtonUnitCalendar=new S.v,this.ButtonChange=new S.v,this.ButtonParent=new S.v,this.btnEmpDocsPrint=new S.v,this.ButtonLedger=new S.v,this.ButtonSubContract=new S.v,this.ButtonBulkEdit=new S.v,this.ButtonFilter=new S.v,117==this.CostCenterID||199==this.CostCenterID?s.d.SessionManager.HideUnathorizedAccess?this.ButtonImport.Visible=s.d.SessionManager.IsActionAssigned(e,"Import"):this.ButtonImport.Enable=s.d.SessionManager.IsActionAssigned(e,"Import"):s.d.SessionManager.HideUnathorizedAccess?this.ButtonImport.Visible=s.d.SessionManager.IsActionAssigned(e,"Import layout"):this.ButtonImport.Enable=s.d.SessionManager.IsActionAssigned(e,"Import layout"),s.d.SessionManager.Preferences.POSItemCodeDimension&&s.d.SessionManager.Preferences.POSItemCodeDimension==e.toString()?(this.ButtonAssign.Visible=!1,this.ButtonAdd.Visible=!1,this.ButtonGroup.Visible=!1,this.ButtonEdit.Visible=!1,this.ButtonDelete.Visible=!1,this.ButtonMove.Visible=!1,this.ButtonFilter.Visible=!0):(this.ButtonFilter.Visible=!0,s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(e,"Map"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(e,"Map"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonAdd.Visible=s.d.SessionManager.IsActionAssigned(e,"Create"):this.ButtonAdd.Enable=s.d.SessionManager.IsActionAssigned(e,"Create"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonGroup.Visible=s.d.SessionManager.IsActionAssigned(e,"Create Group"):this.ButtonGroup.Enable=s.d.SessionManager.IsActionAssigned(e,"Create Group"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonEdit.Visible=s.d.SessionManager.IsActionAssigned(e,"Update"):this.ButtonEdit.Enable=s.d.SessionManager.IsActionAssigned(e,"Update"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonDelete.Visible=s.d.SessionManager.IsActionAssigned(e,"Delete"):this.ButtonDelete.Enable=s.d.SessionManager.IsActionAssigned(e,"Delete"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonMove.Visible=s.d.SessionManager.IsActionAssigned(e,"Move"):this.ButtonMove.Enable=s.d.SessionManager.IsActionAssigned(e,"Move")),s.d.SessionManager.HideUnathorizedAccess?this.ButtonPrint.Visible=s.d.SessionManager.IsActionAssigned(e,"Print"):this.ButtonPrint.Enable=s.d.SessionManager.IsActionAssigned(e,"Print"),86==this.CostCenterID?s.d.SessionManager.HideUnathorizedAccess?this.ButtonClose.Visible=s.d.SessionManager.IsActionAssigned(e,"Close"):this.ButtonClose.Enable=s.d.SessionManager.IsActionAssigned(e,"Close"):this.ButtonClose.Visible=!1,2==this.CostCenterID||3==this.CostCenterID||72==this.CostCenterID||this.CostCenterID>=50001&&this.CostCenterID<=50050?(2==this.CostCenterID||3==this.CostCenterID||72==this.CostCenterID?s.d.SessionManager.HideUnathorizedAccess?this.ButtonBarcode.Visible=s.d.SessionManager.IsActionAssigned(e,"Barcode"):this.ButtonBarcode.Enable=s.d.SessionManager.IsActionAssigned(e,"Barcode"):s.d.SessionManager.HideUnathorizedAccess?this.ButtonBarcode.Visible=s.d.SessionManager.IsActionAssigned(e,"Label"):this.ButtonBarcode.Enable=s.d.SessionManager.IsActionAssigned(e,"Label"),this.ButtonBarcode.Label=s.d.SessionManager.translate.instant(3==this.CostCenterID?"Barcode":"Labels")):this.ButtonBarcode.Visible=!1,s.d.SessionManager.HideUnathorizedAccess?this.ButtonExport.Visible=s.d.SessionManager.IsActionAssigned(e,"Export"):this.ButtonExport.Enable=s.d.SessionManager.IsActionAssigned(e,"Export"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonEmail.Visible=s.d.SessionManager.IsActionAssigned(e,"Email"):this.ButtonEmail.Enable=s.d.SessionManager.IsActionAssigned(e,"Email"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonSMS.Visible=s.d.SessionManager.IsActionAssigned(e,"SMS"):this.ButtonSMS.Enable=s.d.SessionManager.IsActionAssigned(e,"SMS"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonSettings.Visible=s.d.SessionManager.IsActionAssigned(e,"Settings"):this.ButtonSettings.Enable=s.d.SessionManager.IsActionAssigned(e,"Settings"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonCustomize.Visible=s.d.SessionManager.IsActionAssigned(e,"Customize"):this.ButtonCustomize.Enable=s.d.SessionManager.IsActionAssigned(e,"Customize"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonConvert.Visible=s.d.SessionManager.IsActionAssigned(e,"Convert"):this.ButtonConvert.Enable=s.d.SessionManager.IsActionAssigned(e,"Convert"),this.ButtonLevel.Visible=!1,101==e&&(s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(e,"Assign"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(e,"Assign")),i=s.d.SessionManager.IntTryParse(s.d.SessionManager.Preferences["Report Template Dimension"]),this.ButtonCopy.Visible=!1,i>0&&e==i?(this.ButtonCopy.ComParam="Copy",this.ButtonCopy.Label=s.d.SessionManager.translate.instant("Copy"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonCopy.Visible=s.d.SessionManager.IsActionAssigned(e,"Copy"):this.ButtonCopy.Enable=s.d.SessionManager.IsActionAssigned(e,"Copy")):76==this.CostCenterID?(this.ButtonCopy.ComParam="Replace",this.ButtonCopy.Label=s.d.SessionManager.translate.instant("Replace"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonCopy.Visible=s.d.SessionManager.IsActionAssigned(e,"Replace"):this.ButtonCopy.Enable=s.d.SessionManager.IsActionAssigned(e,"Replace")):2==this.CostCenterID?(this.ButtonLevel.ComParam="Level",this.ButtonLevel.Label="Level",this.ButtonLevel.Visible=!0):86==this.CostCenterID?(this.ButtonCopy.ComParam="Call",this.ButtonCopy.Label="Call",s.d.SessionManager.HideUnathorizedAccess?this.ButtonCopy.Visible=s.d.SessionManager.IsActionAssigned(e,"Call"):this.ButtonCopy.Enable=s.d.SessionManager.IsActionAssigned(e,"Call")):7==e&&(this.ButtonCopy.ComParam="Clone",this.ButtonCopy.Label="Clone",s.d.SessionManager.HideUnathorizedAccess?this.ButtonCopy.Visible=s.d.SessionManager.IsActionAssigned(e,"Update"):this.ButtonCopy.Enable=s.d.SessionManager.IsActionAssigned(e,"Update")),2==e||3==e||72==e||83==e||92==e||e>5e4||93==e||94==e||95==e||103==e||104==e||129==e?(this.ButtonQuery.Visible=!0,(2==e||3==e||72==e||83==e||92==e||e>5e4||93==e||94==e||95==e||103==e||104==e||129==e)&&(s.d.SessionManager.HideUnathorizedAccess?this.ButtonQuery.Visible=s.d.SessionManager.IsActionAssigned(e,"Query"):this.ButtonQuery.Enable=s.d.SessionManager.IsActionAssigned(e,"Query")),2==e&&s.d.SessionManager.LicenseSettings.ContainsKey("AccountQuery")&&"FALSE"==s.d.SessionManager.LicenseSettings.AccountQuery.toUpperCase()&&(this.ButtonQuery.Visible=!1),3==e&&s.d.SessionManager.LicenseSettings.ContainsKey("ProductQuery")&&"FALSE"==s.d.SessionManager.LicenseSettings.ProductQuery.toUpperCase()&&(this.ButtonQuery.Visible=!1),this.ButtonQuery.Label=s.d.SessionManager.translate.instant(92==e?"REN_Console":"Reports_LblQuery"),this.ButtonUnitCalendar.Visible=93==e):40==e||45==e?(s.d.SessionManager.HideUnathorizedAccess?this.ButtonConvert.Visible=s.d.SessionManager.IsActionAssigned(e,"Search"):this.ButtonConvert.Enable=s.d.SessionManager.IsActionAssigned(e,"Search"),this.ButtonQuery.Visible=!0,this.ButtonQuery.Label=s.d.SessionManager.translate.instant("Search")):49==e?(s.d.SessionManager.HideUnathorizedAccess?this.ButtonAdd.Visible=s.d.SessionManager.IsActionAssigned(49,"Create Definition"):this.ButtonAdd.Enable=s.d.SessionManager.IsActionAssigned(49,"Create Definition"),this.ButtonEdit.Visible=this.ButtonAdd.Visible,this.ButtonEdit.Enable=this.ButtonAdd.Enable,s.d.SessionManager.HideUnathorizedAccess?this.ButtonDelete.Visible=s.d.SessionManager.IsActionAssigned(49,"Delete Definition"):this.ButtonDelete.Enable=s.d.SessionManager.IsActionAssigned(49,"Delete Definition"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonImport.Visible=s.d.SessionManager.IsActionAssigned(49,"Bulk Edit"):this.ButtonImport.Enable=s.d.SessionManager.IsActionAssigned(49,"Bulk Edit"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(49,"Assign Definition"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(49,"Assign Definition")):162==e?(s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(162,"Create"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(162,"Create"),this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(162,"Update"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(162,"Assign Definition"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(162,"Assign Definition"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(162,"Import"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(162,"Import"),s.d.SessionManager.HideUnathorizedAccess?this.ButtonAssign.Visible=s.d.SessionManager.IsActionAssigned(162,"Assign"):this.ButtonAssign.Enable=s.d.SessionManager.IsActionAssigned(162,"Assign")):this.ButtonQuery.Visible=!1,this.Views=N.y$.PactComboBoxData1(0),this.SearchColumns=N.y$.PactComboBoxData1(0),this.SearchText=x.Dw.PactTextBoxData_1(0),this.SearchText.TextChangedCommand.Subscribe(this,"OnSearchTextChange"),this.Options=N.y$.PactComboBoxData1(0),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Com_Equals"),"1")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Com_NotEquals"),"2")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Com_BeginsWith"),"3")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Com_EndsWith"),"4")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Com_Contains"),"5")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Com_NotContains"),"6")),this.CostCenterID>4e4&&this.CostCenterID<5e4&&(this.Options.Items.push(N._p.ComboBoxItems_2(s.d.GetResource("Reports_Greaterthan"),"7")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.GetResource("Reports_GreaterthanOrEqual"),"8")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.GetResource("Reports_Lessthan"),"9")),this.Options.Items.push(N._p.ComboBoxItems_2(s.d.GetResource("Reports_LessthanOrEqual"),"10"))),this.Options.SelectedValue="5",this.Options.SelectedIndex=4,this.Options.SelectionChangedCommand.Subscribe(this,"OnSelectionChanged"),this.SearchColumns.SelectionChangedCommand.Subscribe(this,"OnSelectionChanged"),this.SearchDDL.Visible=!1;let n=this.CostCenterID;-502==this.CostCenterID&&(n=502),this._GetCostCenterGridViewList(n),null!=this.Dataset&&null!=this.Dataset&&null!=this.Dataset.Tables[0]&&this.Dataset.Tables[0].length>0&&!h.J0.IsEmpty(this.Dataset.Tables[0][0].ChunkCount)&&(this.ChunkCount=parseInt(this.Dataset.Tables[0][0].ChunkCount.toString()))}_GetCostCenterGridViewList(e){let t=s.d.common.GetCostCenterGridViewList(e,this.IsReportDB);this.Dataset=t}LoadDefaultView(){this._GetCostCenterGridViewList(this.PendingList&&278!=this.GridViewID?this.CostCenterID:40011),null!=this.Dataset&&null!=this.Dataset&&this.Dataset.Tables.length>0&&null!=this.Dataset.Tables[0][0].ChunkCount&&this.Dataset.Tables[0].length>0&&""!=this.Dataset.Tables[0][0].ChunkCount.toString()&&(this.ChunkCount=parseInt(this.Dataset.Tables[0][0].ChunkCount.toString()))}LoadMobileViewData(){var e=this;return(0,b.A)(function*(){let t=s.d.common.GetMobileGridView(230,e.GridViewID);null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&(e.setColumnDefinition(),e.Config=t.Tables[0].map(i=>({...i,gridArea:`${i.RowNo} / ${i.ColNo} / span ${i.RowSpan} / span ${i.ColSpan}`})),e.WidgetConfig=t.Tables[0].map(i=>({...i,gridArea:`${i.RowNo} / ${i.ColNo} / span ${i.RowSpan} / span ${i.ColSpan}`,field:e.ColumnsSource.find(n=>h.J0.Int(n.id)==i.CostCenterColID)?.DBName})))})()}setColumnDefinition(){}LoadViews(){this.SearchDDL.InActiveItems=1,null!=this.Dataset&&null!=this.Dataset&&null!=this.Dataset.Tables[0]&&(this.Views.SelectedValue=null,this.Dataset.Tables[0].forEach(e=>{(0==this.ReportAssignedViews.length||this.ReportAssignedViews.Contains[e.GridViewID.toString()])&&(this.Views.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant(e.ViewName.toString()),h.J0.String(e.GridViewID))),this.DefaultGridViewID==parseInt(e.GridViewID)&&(this.Views.SelectedValue=this.Views.Items[this.Views.Items.length-1].Value,this.Views.SelectedItem=this.Views.Items[this.Views.Items.length-1]))}),this.Views.Items.length>0&&(null==this.Views.SelectedValue&&(this.Views.SelectedValue=this.Views.Items[0].Value,this.Views.SelectedItem=this.Views.Items[0]),-1100!=this.ChunkCount&&this.OnViewChange("")))}OnOptionChanged(e){}OnSelectionChanged(e){if("Option"==e.command||"Column"==e.command){if("Option"==e.command){let t=e.event.target.selectedIndex;this.Options.SelectedValue=e.event.target.options[t].value,this.Options.SelectedIndex=t,this.Options.Text=e.event.target.options[t].value}else{let t=e.event.target.selectedIndex;this.SearchColumns.SelectedValue=e.event.target.options[t].value,this.SearchColumns.SelectedIndex=t,this.SearchColumns.Text=e.event.target.options[t].value}null==this.SearchColumns.SelectedValue||"238"!=this.SearchColumns.SelectedValue&&"239"!=this.SearchColumns.SelectedValue&&"261"!=this.SearchColumns.SelectedValue&&"262"!=this.SearchColumns.SelectedValue&&"24198"!=this.SearchColumns.SelectedValue&&"24399"!=this.SearchColumns.SelectedValue&&"24317"!=this.SearchColumns.SelectedValue&&"25400"!=this.SearchColumns.SelectedValue&&"24200"!=this.SearchColumns.SelectedValue&&"24201"!=this.SearchColumns.SelectedValue&&"24322"!=this.SearchColumns.SelectedValue&&"24323"!=this.SearchColumns.SelectedValue||"1"!=this.Options.SelectedValue&&"2"!=this.Options.SelectedValue?(this.SearchDDL.Visible=!1,this.SearchText.Visible=!0):(this.SearchDDL.Visible=!0,this.SearchText.Visible=!1)}}TreeViewModel_0(){}GetDataset(e,t){var i=this;return(0,b.A)(function*(){var n="",r="";if("1"!=s.d.SessionManager.RoleID&&""!=s.d.SessionManager.DivisionWhere){let a=!1;switch(i.CostCenterID){case 2:null!=s.d.SessionManager.Preferences["DW Accounts"]&&"true"==s.d.SessionManager.Preferences["DW Accounts"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 3:null!=s.d.SessionManager.Preferences["DW Products"]&&"true"==s.d.SessionManager.Preferences["DW Products"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 6:case 7:null!=s.d.SessionManager.Preferences.DWRole&&"true"==s.d.SessionManager.Preferences.DWRole.toString().toLowerCase()&&(a=!0);break;case 16:null!=s.d.SessionManager.Preferences["dW Batches"]&&"true"==s.d.SessionManager.Preferences["dW Batches"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 40:null!=s.d.SessionManager.Preferences["DW PChart"]&&"true"==s.d.SessionManager.Preferences["DW PChart"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 72:null!=s.d.SessionManager.Preferences["DW Assets"]&&"true"==s.d.SessionManager.Preferences["DW Assets"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 86:null!=s.d.SessionManager.Preferences["DW Leads"]&&"true"==s.d.SessionManager.Preferences["DW Leads"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 83:null!=s.d.SessionManager.Preferences["DW Customers"]&&"true"==s.d.SessionManager.Preferences["DW Customers"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 65:null!=s.d.SessionManager.Preferences["DW Contacts"]&&"true"==s.d.SessionManager.Preferences["DW Contacts"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 73:null!=s.d.SessionManager.Preferences["DW Cases"]&&"true"==s.d.SessionManager.Preferences["DW Cases"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 89:null!=s.d.SessionManager.Preferences["DW Opportunities"]&&"true"==s.d.SessionManager.Preferences["DW Opportunities"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 92:s.d.SessionManager.Preferences.ContainsKey("DW Property")&&"true"==s.d.SessionManager.Preferences["DW Property"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 93:s.d.SessionManager.Preferences.ContainsKey("DW Units")&&"true"==s.d.SessionManager.Preferences["DW Units"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 94:s.d.SessionManager.Preferences.ContainsKey("DW Tenants")&&"true"==s.d.SessionManager.Preferences["DW Tenants"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 95:s.d.SessionManager.Preferences.ContainsKey("DW Contracts")&&"true"==s.d.SessionManager.Preferences["DW Contracts"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 104:s.d.SessionManager.Preferences.ContainsKey("DW PurchaseContracts")&&"true"==s.d.SessionManager.Preferences["DW PurchaseContracts"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 103:s.d.SessionManager.Preferences.ContainsKey("DW Quatations")&&"true"==s.d.SessionManager.Preferences["DW Quatations"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 129:s.d.SessionManager.Preferences.ContainsKey("DW Reservations")&&"true"==s.d.SessionManager.Preferences["DW Reservations"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 76:null!=s.d.SessionManager.Preferences["DW Boms"]&&"true"==s.d.SessionManager.Preferences["DW Boms"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["DW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["DW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 101:s.d.SessionManager.Preferences.ContainsKey("DW Budget")&&"true"==h.J0.String(s.d.SessionManager.Preferences["DW Budget"]).toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("DW TreeFilter")&&"true"==h.J0.String(s.d.SessionManager.Preferences["DW TreeFilter"]).toLowerCase()&&(a=!0);break;case 50001:a=!0}i.CostCenterID>4e4&&i.CostCenterID<5e4&&(a=!0),a&&(n=null!=i.Parent&&"CopyDocumentViewModel"==i.Parent.ClassName&&i.Parent.Parent.ScreenObject.DivisionID>0?i.Parent.Parent.ScreenObject.DivisionID.toString():s.d.SessionManager.DivisionID>0&&50001!=i.CostCenterID?s.d.SessionManager.DivisionID.toString():s.d.SessionManager.DivisionWhere)}if("1"!=s.d.SessionManager.RoleID&&""!=s.d.SessionManager.LocationWhere){let a=!1;switch(i.CostCenterID){case 2:null!=s.d.SessionManager.Preferences["LW Accounts"]&&"true"==s.d.SessionManager.Preferences["LW Accounts"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 3:null!=s.d.SessionManager.Preferences["LW Products"]&&"true"==s.d.SessionManager.Preferences["LW Products"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 6:case 7:null!=s.d.SessionManager.Preferences.LWRole&&"true"==s.d.SessionManager.Preferences.LWRole.toString().toLowerCase()&&(a=!0);break;case 16:null!=s.d.SessionManager.Preferences["LW Batches"]&&"true"==s.d.SessionManager.Preferences["LW Batches"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 40:null!=s.d.SessionManager.Preferences["LW PChart"]&&"true"==s.d.SessionManager.Preferences["LW PChart"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 47:case 48:null!=s.d.SessionManager.Preferences.LWEmailSMS&&"true"==s.d.SessionManager.Preferences.LWEmailSMS.toString().toLowerCase()&&(a=!0);break;case 72:null!=s.d.SessionManager.Preferences["LW Assets"]&&"true"==s.d.SessionManager.Preferences["LW Assets"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 86:null!=s.d.SessionManager.Preferences["LW Leads"]&&"true"==s.d.SessionManager.Preferences["LW Leads"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 83:null!=s.d.SessionManager.Preferences["LW Customers"]&&"true"==s.d.SessionManager.Preferences["LW Customers"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 65:null!=s.d.SessionManager.Preferences["LW Contacts"]&&"true"==s.d.SessionManager.Preferences["LW Contacts"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 73:null!=s.d.SessionManager.Preferences["LW Cases"]&&"true"==s.d.SessionManager.Preferences["LW Cases"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 89:null!=s.d.SessionManager.Preferences["LW Opportunities"]&&"true"==s.d.SessionManager.Preferences["LW Opportunities"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 92:null!=s.d.SessionManager.Preferences["LW Property"]&&"true"==s.d.SessionManager.Preferences["LW Property"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 93:null!=s.d.SessionManager.Preferences["LW Units"]&&"true"==s.d.SessionManager.Preferences["LW Units"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 94:s.d.SessionManager.Preferences.ContainsKey("LW Tenants")&&"true"==s.d.SessionManager.Preferences["LW Tenants"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 95:null!=s.d.SessionManager.Preferences["LW Contracts"]&&"true"==s.d.SessionManager.Preferences["LW Contracts"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 104:null!=s.d.SessionManager.Preferences["LW PurchaseContracts"]&&"true"==s.d.SessionManager.Preferences["LW PurchaseContracts"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 76:null!=s.d.SessionManager.Preferences["LW Boms"]&&"true"==s.d.SessionManager.Preferences["LW Boms"].toString().toLowerCase()&&null!=s.d.SessionManager.Preferences["LW TreeFilter"]&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 103:s.d.SessionManager.Preferences.ContainsKey("LW Quatations")&&"true"==s.d.SessionManager.Preferences["LW Quatations"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 129:s.d.SessionManager.Preferences.ContainsKey("LW Reservations")&&"true"==s.d.SessionManager.Preferences["LW Reservations"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0);break;case 101:s.d.SessionManager.Preferences.ContainsKey("LW Budget")&&"true"==h.J0.String(s.d.SessionManager.Preferences["LW Budget"]).toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==h.J0.String(s.d.SessionManager.Preferences["LW TreeFilter"]).toLowerCase()&&(a=!0);break;case 50002:a=!0;break;default:i.CostCenterID>5e4&&s.d.SessionManager.Preferences.ContainsKey("LocationWiseDimension")&&s.d.SessionManager.Preferences.LocationWiseDimension.split(",").Contains(i.CostCenterID.toString())&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&(a=!0)}i.CostCenterID>4e4&&i.CostCenterID<5e4&&(a=!0),(!a&&(92==i.CostCenterID||94==i.CostCenterID)&&s.d.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&(0,d.yG0)(s.d.SessionManager.Preferences.EnableLocationWise)&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("TFDim")&&!h.J0.IsEmpty(s.d.SessionManager.Preferences.TFDim)&&s.d.SessionManager.Preferences.TFDim.toString()==i.CostCenterID.toString()&&s.d.SessionManager.Preferences.ContainsKey("Dimension List")&&s.d.SessionManager.Preferences["Dimension List"].split(",").Contains(i.CostCenterID.toString())&&s.d.SessionManager.Preferences.ContainsKey("TFUserAssignedDims")&&s.d.SessionManager.Preferences.TFUserAssignedDims.split(",").Contains("50002")||!a&&s.d.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&(0,d.yG0)(s.d.SessionManager.Preferences.EnableLocationWise)&&s.d.SessionManager.Preferences.ContainsKey("LW TreeFilter")&&"true"==s.d.SessionManager.Preferences["LW TreeFilter"].toString().toLowerCase()&&s.d.SessionManager.Preferences.ContainsKey("TFDim")&&!h.J0.IsEmpty(s.d.SessionManager.Preferences.TFDim)&&s.d.SessionManager.Preferences.TFDim.toString()==i.CostCenterID.toString()&&s.d.SessionManager.Preferences.ContainsKey("Dimension List")&&s.d.SessionManager.Preferences["Dimension List"].split(",").Contains(i.CostCenterID.toString())&&s.d.SessionManager.Preferences.ContainsKey("TFUserAssignedDims")&&s.d.SessionManager.Preferences.TFUserAssignedDims.split(",").Contains("50002"))&&(a=!0),a&&(r=null!=i.Parent&&"CopyDocumentViewModel"==i.Parent.ClassName&&i.Parent.Parent.ScreenObject.LocationID>0?i.Parent.Parent.ScreenObject.LocationID.toString():s.d.SessionManager.LocationID>0&&50002!=i.CostCenterID?s.d.SessionManager.GetLocations(s.d.SessionManager.LocationID):s.d.SessionManager.LocationWhere)}59==i.CostCenterID&&(s.d.SessionManager.LocationID>0?i.WhereCondition="a.locationid="+s.d.SessionManager.LocationID:""!=s.d.SessionManager.LocationWhere&&(i.WhereCondition="a.locationid in ("+s.d.SessionManager.LocationWhere+")")),i.CostCenterID>4e4&&i.CostCenterID<5e4&&""!=i.Loca&&(r=i.Loca),i.CostCenterID>4e4&&i.CostCenterID<5e4&&""!=i.div&&(n=i.div),95==i.CostCenterID?(null==i.WhereCondition||""==i.WhereCondition||-1==i.WhereCondition.indexOf("RefContractID=0"))&&(s.d.SessionManager.StringIsNullOrEmpty(i.WhereCondition)?i.WhereCondition=" A.RefContractID=0 ":i.WhereCondition+="  and A.RefContractID=0 "):103==i.CostCenterID||129==i.CostCenterID?(null==i.WhereCondition||""==i.WhereCondition||-1==i.WhereCondition.indexOf("RefQuotation=0"))&&(s.d.SessionManager.StringIsNullOrEmpty(i.WhereCondition)?i.WhereCondition=" A.RefQuotation=0 ":i.WhereCondition+="  and A.RefQuotation=0 "):93==i.CostCenterID?(null==i.WhereCondition||""==i.WhereCondition||-1==i.WhereCondition.indexOf("ContractID=0"))&&(s.d.SessionManager.StringIsNullOrEmpty(i.WhereCondition)?i.WhereCondition=" A.ContractID=0 ":i.WhereCondition+="  and A.ContractID=0 "):50051==i.CostCenterID&&(i.WhereCondition=" 1=1 ",s.d.SessionManager.LocationID>0&&null!=s.d.SessionManager.Preferences.LocationWiseDimension&&s.d.SessionManager.Preferences.LocationWiseDimension.split(",").Contains("50051")&&(i.WhereCondition+=" AND A.NODEID IN ( Select NodeID From Com_CCCCData with(nolock) where CostCenterID=50051 and CCNID2="+s.d.SessionManager.LocationID+")"),s.d.SessionManager.StringIsNullOrEmpty(s.d.SessionManager.sWHEmpFilteredEmpSeqNos)||(i.WhereCondition+="  AND A.NODEID in("+s.d.SessionManager.sWHEmpFilteredEmpSeqNos+")")),i.IsDynamicTree&&0==i.direction&&(i.direction=1),0==t&&(t=i.ChunkCount);let l=yield s.d.common.GetCostCenterSummaryNew(i.GridViewID,e,t,i.WhereCondition,n,r,i.left,i.docdate,i.duedate,i.linkDef,i.direction,i.SearchSeqNo,i.PendingList,i.IsReportDB);if(7==i.CostCenterID&&i.SetUserDs(l),i.dataset=l,null!=l&&l.Tables.length>0&&l.Columns[0].Contains("lft")&&l.Tables[0].length>0&&""!=l.Tables[0][l.Tables[0].length-1].lft.toString()&&(i.left=parseInt(l.Tables[0][l.Tables[0].length-1].lft.toString())),!h.J0.StringIsNullOrEmpty(i.linkDef)){for(let u=0;u<l.Tables[0].length;u++)l.Tables[0][u].Depth=1,l.Tables[0][u].ParentID=1;let a={};a[l.Columns[0][0]]=0,a[l.Columns[0][1]]="Vouchers",a.statusID=0,a.Depth=0,a.IsGroup=!0,a.ParentID=0,a.NodeID=1,a.TypeID=0,l.Tables[0].InsertAt(a,0)}return null!=l&&l.Tables.length>2&&l.Columns[2].Contains("StatusID")&&l.Tables[2].length>0&&(i.inActiveID=parseInt(l.Tables[2][0].StatusID.toString())),l})()}SetUserDs(e){e.Tables[0].forEach(n=>{n.Depth=2});let t={lft:0,NodeID:0,UserName:"Users",StatusID:1,Depth:0,ParentID:0,IsGroup:1};e.Tables[0].InsertAt(t,0),t={},t.lft=0,t.NodeID=-100,t.UserName="General",t.StatusID=1,t.Depth=1,t.ParentID=0,t.IsGroup=1,e.Tables[0].InsertAt(t,1),e.Tables[0].filter(n=>0==n.RoleType).forEach(n=>{t.ParentID=-100});let i=e.Tables[0].filter(n=>1==n.RoleType);i.Length>0&&(t={},t.lft=0,t.NodeID=-1,t.UserName="Employee",t.StatusID=1,t.Depth=1,t.ParentID=0,t.IsGroup=1,e.Tables[0].InsertAt(t,e.Tables[0].IndexOf(i[0])),i.forEach(n=>{t.ParentID=-1})),i=e.Tables[0].filter(n=>2==n.RoleType),i.Length>0&&(t={},t.lft=0,t.NodeID=-2,t.UserName="Vendor",t.StatusID=1,t.Depth=1,t.ParentID=0,t.IsGroup=1,e.Tables[0].InsertAt(t,e.Tables[0].IndexOf(i[0])),i.forEach(n=>{t.ParentID=-2})),i=e.Tables[0].filter(n=>3==n.RoleType),i.Length>0&&(t={},t.lft=0,t.NodeID=-3,t.UserName="Customer",t.StatusID=1,t.Depth=1,t.ParentID=0,t.IsGroup=1,e.Tables[0].InsertAt(t,e.Tables[0].IndexOf(i[0])),i.forEach(n=>{t.ParentID=-3})),this.ChunkCount=e.Tables[0].length+100}GetDataCallBack(e){if(null!=e&&e.Tables.length>1&&e.Tables[1].length>0)this.RowCount=parseInt(e.Tables[1][0][Object.keys(e.Tables[1][0])[0]]);else if(1==e.Tables.length){if(null!=e.Tables[0][0].ErrorMessage)return void(e.Tables[0].length>0&&(this.DisplayMessage=e.Tables[0][0].ErrorMessage.toString()));this.RowCount=e.Tables[0].length}e.Tables.length>0&&(this.Data=e.Tables[0],this.DataColumns=e.Columns[0]),this.ClearData=!0,this.treecomp.angularGrid&&(this.treecomp.gridObj.setColumns(this.treecomp.setColumnDefinitions()),this.Rows.forEach(t=>{const i=t;i.IsExpandedTree=!1,"0"===t.Id.toString().split("_")[0]?(i.id="-999999",i.ParentID="1"):i.id=t.Id.toString().split("_")[0]}),this.treecomp.angularGrid.gridService.addItems(this.Rows,{position:"bottom",highlightRow:!1,selectRow:!1,triggerEvent:!1}),this.Rows&&this.Rows.length>0&&this.treecomp.gridObj.setActiveCell(0,0)),this.treeDbCall<=this.RowCount/this.ChunkCount&&(setTimeout(()=>{this.GetDataset(this.treeDbCall*this.ChunkCount,this.ChunkCount)},100),this.treeDbCall++)}CheckLicense(e){}GetData(){var e=this;return(0,b.A)(function*(){if(e.left=0,null!=s.d.SessionManager.LandingPageCache&&s.d.SessionManager.LandingPageCache.ContainsKey(e.GridViewID)){if(e.Data=s.d.SessionManager.LandingPageCache[e.GridViewID],e.RowCount=e.Data.length,e.ClearData=!0,e.LoadData(),null!=e.Rows&&e.Rows.length>0&&null==e.SelectedNode&&(e._selectedNode=e.Rows[0],null!=e.Parent))try{e.Parent._SelectedNode=e._selectedNode}catch{}}else{let t=yield e.GetDataset(-1,e.ChunkCount);if(8==e.CostCenterID&&null!=t&&t.Tables.length>0&&s.d.SessionManager.LicenseSettings.ContainsKey("MaxDimensions")){let i;if(i=h.J0.IntTryParse(s.d.SessionManager.LicenseSettings.MaxDimensions),i>0)for(let n=t.Tables[0].length-1;n>=i;n--)parseInt(t.Tables[0][n].NodeID)>=50058&&parseInt(t.Tables[0][n].NodeID)<=50067||t.Tables[0].RemoveAt(n)}if(null!=t&&t.Tables.length>1&&t.Tables[1].length>0)e.RowCount=parseInt(t.Tables[1][0][t.Columns[1][0]]);else if(1==t.Tables.length){if(t.Columns[0].Contains("ErrorMessage"))return void(t.Tables[0].length>0&&(e.DisplayMessage=t.Tables[0][0].ErrorMessage.toString()));e.RowCount=t.Tables[0].length}if(t.Tables.length>0&&(e.Data=t.Tables[0],e.DataColumns=t.Columns[0]),e.ClearData=!0,198==e.GridViewID?e.LoadDocsTree():(e.PendingList&&e.AddPendinglistTotals(),e.LoadData()),null!=e.Rows&&e.Rows.length>0&&null==e.SelectedNode&&(e._selectedNode=e.Rows[0],e._selectedNode._isExpanded=!0,e._selectedNode=e.Rows[0],e._selectedNode._isExpanded=!0,null!=e.Parent))try{e.Parent._SelectedNode=e._selectedNode}catch{}e.IsDynamicTree||(yield e.process_DoWork("",""),e.process_RunWorkerCompleted(null,null)),e.Rows.length>0&&(e.Rows[0]._isExpanded=!0)}})()}process_DoWork(e,t){var i=this;return(0,b.A)(function*(){i.LoadingMessage=s.d.GetResource("Loading");let n=!1;for(let r=1;r<=i.RowCount/i.ChunkCount;r++){let l=yield i.GetDataset(r*i.ChunkCount,i.ChunkCount);null!=l&&l.Tables.length>0&&!l.Columns[0].Contains("ErrorMessage")&&(n=!0,i.Data=i.Data.concat(l.Tables[0]),i.ClearData=!1)}n&&(yield i.LoadData())})()}AddPendinglistTotals(){try{if(this.PendingList&&null!=this.Data&&this.Data.length>1){let r=!1;for(let l=0;l<this.ColumnsSource.length;l++){let a=this.ColumnsSource[l].DisplayMember.replace("Text[","").replace("]","");if(null!=this.ColumnsSource[l]){var t=this.dataset.ColumnsTypes[0][parseInt(a)+1];if(null!=t&&"double"==t.toLowerCase()){r=!0;break}}}if(r||this.Dataset.Tables[1].filter(a=>"Numeric"==a.UserColumnType).length>0&&(r=!0),r){let l={},a="",u="",o="",C=0;s.d.SessionManager.Preferences.ContainsKey("DecimalsinAmount")&&!h.J0.IsEmpty(s.d.SessionManager.Preferences.DecimalsinAmount.toString())&&(o=s.d.SessionManager.Preferences.DecimalsinAmount);for(let p=0;p<this.ColumnsSource.length;p++){let T=this.ColumnsSource[p].DisplayMember.replace("Text[","").replace("]","");if(null!=this.ColumnsSource[p]){a=this.ColumnsSource[p].DBName;var n=this.dataset.ColumnsTypes[0][parseInt(T)+1];if(null!=n&&(u=n),"double"==u.toLowerCase()){let D=this.Data.filter(c=>c.rowno>0).Compute("sum",a);null==D&&(D=0),l[a]="quantity"==a.toLowerCase()||"qty"==a.toLowerCase()?h.J0.DoubleTryParse(D):""!=o?h.J0.DoubleTryParse(D).ToString("N"+o):h.J0.DoubleTryParse(D)}else if("VoucherNo"==a&&this.DataColumns.Contains("VoucherNo"))l[a]="Total";else if(this.DataColumns.Contains(a)&&!h.J0.IsEmpty(this.Data[0][a]))l[a]="int32"==u.toLowerCase()?parseInt(this.Data[0][a].toString()):"datetime"==u.toLowerCase()||"date"==u.toLowerCase()?new Date(this.Data[0][a]).ToString("yyyyMMddhhmmss"):h.J0.String(this.Data[0][a]);else if(this.Dataset.Tables[1].filter(c=>"Numeric"==c.UserColumnType&&c.SysColumnName==this.ColumnsSource[p].DBName).length>0){C=0;for(let c=0;c<this.Data.length;c++)!h.J0.IsEmpty(this.Data[c][a])&&!h.J0.IsNullOrWhiteSpace(this.Data[c][a].toString())&&(C=h.J0.DoubleTryParse(C)+h.J0.DoubleTryParse(this.Data[c][a].toString()));l[a]=h.J0.String(""!=o?C.ToString("N"+o):C)}}}this.DataColumns.Contains("NodeID")&&(l.NodeID=-100),this.Data.InsertAt(l,this.Data.length+1)}}}catch{}}AddSelectedPendinglistTotals(){try{let l="";if(this.PendingList&&null!=this.Data&&this.Data.length>1){if(null!=this.SelectedNodes&&this.SelectedNodes.length>0)for(let a=0;a<this.SelectedNodes.length;a++)l=h.J0.IsEmpty(l)?this.SelectedNodes[a].Id.toString():l+","+this.SelectedNodes[a].Id.toString();var e=this.AllNodes.find(a=>-100==a.Id);if(!h.J0.IsEmpty(e)){let a=!1;for(let u=0;u<this.ColumnsSource.length;u++){let o=this.ColumnsSource[u].DisplayMember.replace("Text[","").replace("]","");if(null!=this.ColumnsSource[u]){var i=this.dataset.ColumnsTypes[0][parseInt(o)+1];if(null!=i&&"double"==i.toLowerCase()){a=!0;break}}}if(a||this.Dataset.Tables[1].filter(o=>"Numeric"==o.UserColumnType).length>0&&(a=!0),a){let u="",o="",C="",p=0;s.d.SessionManager.Preferences.ContainsKey("DecimalsinAmount")&&!h.J0.IsEmpty(s.d.SessionManager.Preferences.DecimalsinAmount.toString())&&(C=s.d.SessionManager.Preferences.DecimalsinAmount);for(let T=0;T<this.ColumnsSource.length;T++){let D=this.ColumnsSource[T].DisplayMember.replace("Text[","").replace("]","");if(null!=this.ColumnsSource[T]){u=this.ColumnsSource[T].DBName;var r=this.dataset.ColumnsTypes[0][parseInt(D)+1];if(null!=r&&(o=r),"double"==o.toLowerCase()){let c;c=h.J0.IsEmpty(l)?this.Data.filter(g=>g.rowno>0).Compute("sum",u):this.Data.filter(g=>g.rowno>0&&l.Contains(g.rowno)).Compute("sum",u),null==c&&(c=0),e.Text[D]="quantity"==u.toLowerCase()||"qty"==u.toLowerCase()?parseFloat(c):""!=C?parseFloat(c).ToString("N"+C):parseFloat(c)}else if("VoucherNo"==u&&this.DataColumns.Contains("VoucherNo"))e.Text[D]="Total";else if(this.DataColumns.Contains(u)&&!h.J0.IsEmpty(this.Data[0][u]))e.Text[D]="int32"==o.toLowerCase()?parseInt(this.Data[0][u].toString()):"datetime"==o.toLowerCase()||"date"==o.toLowerCase()?new Date(this.Data[0][u]).ToString("yyyyMMddhhmmss"):h.J0.String(this.Data[0][u]);else if(this.Dataset.Tables[1].filter(g=>"Numeric"==g.UserColumnType&&g.SysColumnName==this.ColumnsSource[T].DBName).length>0){if(p=0,h.J0.IsEmpty(l))for(let g=0;g<this.Data.length;g++)!h.J0.IsEmpty(this.Data[g][u])&&!h.J0.IsNullOrWhiteSpace(this.Data[g][u].toString())&&(p=h.J0.DoubleTryParse(p)+h.J0.DoubleTryParse(this.Data[g][u].toString()));else{let g=this.Data.filter(L=>L.rowno>0&&l.Contains(L.rowno));if(g.length>0)for(let L=0;L<g.length;L++)!h.J0.IsEmpty(g[L][u])&&!h.J0.IsNullOrWhiteSpace(g[L][u].toString())&&(p=h.J0.DoubleTryParse(p)+h.J0.DoubleTryParse(g[L][u].toString()))}e.Text[D]=h.J0.String(""!=C?p.ToString("N"+C):p)}}}}}}}catch{}}Dataconvert(e,t,i=0,n){if(Array.isArray(e))for(const r of e)r&&(t.find(a=>a.id===r.id)||t.push(r),Array.isArray(r.Children)&&(i++,this.Dataconvert(r.Children,t,i,r.id),i--,r.__hasChildren=!0,delete r.Children))}process_RunWorkerCompleted(e,t){if(this.LoadingMessage="",this.SetFocusNodeID){var i=this.AllNodes.find(n=>n.Id==this.SetFocusNodeID);i&&this.SelectSearchNode(i),this.SetFocusNodeID=null}null!=this.SelectedNodes&&this.SelectedNodes.length>0&&this.RefreshSelectionText()}CommandController(e){if(null==this.SelectedNode||null==e||"Sort"!=e.toString()&&"SortCodeN"!=e.toString()&&"SortCode"!=e.toString()&&"SortName"!=e.toString()&&"SortNumber"!=e.toString()&&"SortDESC"!=e.toString()&&"SortCodeNDESC"!=e.toString()&&"SortCodeDESC"!=e.toString()&&"SortNameDESC"!=e.toString()&&"SortNumberDESC"!=e.toString())this.Parent.CommandController(e);else{let t="";"SortCode"==e.toString()||"SortCodeDESC"==e.toString()?(t="Code",2==this.CostCenterID?t="AccountCode":3==this.CostCenterID?t="ProductCode":94==this.CostCenterID?t="TenantCode":83==this.CostCenterID?t="CustomerCode":73==this.CostCenterID?t="CaseNumber":16==this.CostCenterID?t="ProductCode":76==this.CostCenterID?t="BOMCode":72==this.CostCenterID&&(t="AssetCode")):"SortCodeN"==e.toString()||"SortCodeNDESC"==e.toString()?(t="Code",2==this.CostCenterID?t="AccountCode":3==this.CostCenterID?t="ProductCode":94==this.CostCenterID?t="TenantCode":83==this.CostCenterID?t="CustomerCode":73==this.CostCenterID?t="CaseNumber":76==this.CostCenterID?t="BOMCode":72==this.CostCenterID&&(t="AssetCode")):"SortName"==e.toString()||"SortNameDESC"==e.toString()?(t="Name",2==this.CostCenterID?t="AccountName":3==this.CostCenterID?t="ProductName":94==this.CostCenterID?t="FirstName":83==this.CostCenterID?t="CustomerName":65==this.CostCenterID?t="ContactName":86==this.CostCenterID||89==this.CostCenterID?t="Company":16==this.CostCenterID?t="ProductName":76==this.CostCenterID?t="BOMName":72==this.CostCenterID?t="AssetName":200==this.CostCenterID&&(t="ReportName")):"SortNumber"==e.toString()||"SortNumberDESC"==e.toString()?16==this.CostCenterID&&(t="BatchNumber"):("Sort"==e.toString()||"SortDESC"==e.toString())&&117==this.CostCenterID&&(t="DashBoardName");let i="ASC";e.toString().startsWith("Sort")&&e.toString().endsWith("DESC")&&(i="DESC"),this.DisplayMessage="SortCodeN"==e.toString()||"SortCodeNDESC"==e.toString()?s.d.common.SortCostcenterNumeric(this.CostCenterID,this.SelectedNode.Id,t,i):s.d.common.SortCostCenter(this.CostCenterID,this.SelectedNode.Id,t,i),this.Parent.Refresh()}}OnClick(e){"Previous"==e.toString()?null!=this.SelectedNode&&(this.SelectedNode=this.SelectedNode.PreviousNode):"Next"==e.toString()?null!=this.SelectedNode&&(this.SelectedNode=this.SelectedNode.NextTreeNode):"Refresh"==e.toString()?(null!=s.d.SessionManager.LandingPageCache&&s.d.SessionManager.LandingPageCache.ContainsKey(this.GridViewID)&&s.d.SessionManager.LandingPageCache.Remove(this.GridViewID),this.Parent.Refresh()):"Print"==e.toString()||"Barcode"==e.toString()||("Parent"==e.toString()?null!=this.SelectedNode&&this.SelectedNode.Parent.Text.length>0&&(this.SelectedNode=this.SelectedNode.Parent):"Collapse"==e.toString()?null!=this.SelectedNode&&(this.SelectedNode.IsExpanded=!1):"Expand"==e.toString()?null!=this.SelectedNode&&(this.SelectedNode.IsExpanded=!0):"Add"==e.toString()||"Assign"==e.toString()||"Export"==e.toString()?this.Parent.CommandController(e):(this.DisplayMessage="",null!=this.SelectedNode&&""!=this.SelectedNode.Id.toString()?this.Parent.CommandController(e):this.DisplayMessage="Please select record"))}CreateNode(e,t,i,n,r,l){let a=new m.n;if(a.Tree=this,a.Children=(new m.n.NodeCollection).NodeCollection_1(a),a.Nodes=a.Children,this.DefaultCollapse||(a.IsExpandedOnce=!0,a.AssignIsExpanded(!0)),a.Id=e,a.id=e,a.StatusID=0,a.TypeID=0,a.IsGroup=t,a.LevelNo=i,a.Text.push(n),a.Text.push(r),this.AllNodes.push(a),l.push(a),null!=this.SelectedNodes&&this.SelectedNodes.length>0){var u=this.SelectedNodes.filter(o=>o.Id==a.Id)[0];(null!=u||this.lstParents.length>0&&a.LevelNo>this.lstParents[this.lstParents.length-1].LevelNo&&this.lstParents[this.lstParents.length-1].IsSelected)&&(null!=u&&(this.SelectedNodes.Remove(u),a.Tag=u.Tag),a.FontWeight="Bold",a.IsSelected=!0,this.SelectedNodes.push(a))}return a}LoadDocsTree(){if(s.d.SessionManager.IsWebApplication&&null!=this.Data&&this.DataColumns.Contains("NodeID")){this.Rows=[],this.AllNodes=[],this._root=new m.n,this._root.Tree=this,this._root.Children=(new m.n.NodeCollection).NodeCollection_1(this._root),this._root.Nodes=this._root.Children,this.lstParents=[];let e=[],t=this.CreateNode(-1,!0,0,"Accounting","",e),i=this.CreateNode(-2,!0,1,"Reciept And Payments","",e),n=this.Data.filter(r=>[15,18,23,22,14,19].Contains(r.TypeID));n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),i=this.CreateNode(-3,!0,1,"Journal","",e),n=this.Data.filter(r=>[28,20,29,21,17,16,40,41,42,43].Contains(r.TypeID)),n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),this.Root.Children.push(t),t=this.CreateNode(-4,!0,0,"Inventory","",e),i=this.CreateNode(-5,!0,1,"Sales","",e),n=this.Data.filter(r=>[12,38,39,9,24,11,7,6].Contains(r.TypeID)),n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),i=this.CreateNode(-6,!0,1,"Purchase","",e),n=this.Data.filter(r=>[1,2,4,10,25,26,27].Contains(r.TypeID)),n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),i=this.CreateNode(-7,!0,1,"Stock","",e),n=this.Data.filter(r=>[3,13,32,31,8,30,5].Contains(r.TypeID)),n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),i=this.CreateNode(-8,!0,1,"Production","",e),n=this.Data.filter(r=>[33,36,37,34].Contains(r.TypeID)),n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),i=this.CreateNode(-9,!0,1,"Others","",e),n=this.Data.filter(r=>[45,35].Contains(r.TypeID)),n.forEach(r=>{i.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),t.Children.push(i),this.Root.Children.push(t),t=this.CreateNode(-10,!0,0,"Payroll","",e),n=this.Data.filter(r=>h.J0.IntTryParse(r.TypeID)>50),n.forEach(r=>{t.Children.push(this.CreateNode(parseInt(r.NodeID.toString()),!1,2,r.DocumentName.toString(),r.DocumentAbbr.toString(),e))}),this.Root.Children.push(t),this.Rows=e}}LoadData(){if(s.d.SessionManager.IsWebApplication&&null!=this.Data&&(this.DataColumns.Contains("NodeID")||this.DataColumns.Contains("MapID"))){let e=this.AddRows(this.Data,this.ClearData);e.InsertRange(0,this.Rows),this.Rows=e}}LoadData_3(e,t,i){if(e>0){var n=this.Rows.find(u=>u.Id==e);if(n)return void(this.SelectedNode=n);this.SearchSeqNo=e}this.direction=t?2:1,-1==e&&this.Rows.length>0?this.left=this.Rows[0].lft-1:5==i?this.left=this.SelectedNode.lft:t&&this.Rows.length>0?this.left=this.Rows[0].lft:this.Rows.length>0&&(this.left=this.Rows[this.Rows.length-1].lft);let r=this.GetDataset(-1,i);if(0==r.Tables.length||r.Tables.length>0&&(0==r.Tables[0].length||!r.Columns[0].Contains("lft")))return;let l=this.AddRows(r.Tables[0],!1);if(!(-1==e||e>0)&&l.length!=this.ChunkCount)if(t&&this.Rows.length<this.ChunkCount)l.AddRange(this.Rows);else{let u=l.length;this.Rows.RemoveRange(t?this.Rows.length-u:0,u),l.AddRange(this.Rows)}if(this.Rows=l,1==i&&(t?this.SelectedIndex-=1:this.SelectedIndex+=1),0==i&&-1!=e&&(this.SelectedIndex=0),this.SearchSeqNo=0,this.IsDynamicTree&&this.SetFocusNodeID){var a=this.Rows.filter(u=>u.Id==this.SetFocusNodeID);a&&this.SelectSearchNode(a),this.SetFocusNodeID=null}}AddRows(e,t){(t||null==this.Rows)&&(this.Rows=[],this.AllNodes=[],this._root=new m.n,this._root.Tree=this,this._root.Children=(new m.n.NodeCollection).NodeCollection_1(this._root),this._root.Nodes=this._root.Children,this.lstParents=[]);let i=[],n=this.DataColumns.length-7;n<0&&(n=this.DataColumns.length-1);let r=this.AllNodes.length,l=1e4;for(this.IsDynamicTree&&(n-=1);r<e.length;r++){let o=new m.n;o.Tree=this,o.Children=(new m.n.NodeCollection).NodeCollection_1(o),o.Nodes=o.Children,this.DefaultCollapse||(o.IsExpandedOnce=!0,o.AssignIsExpanded(!0)),o.Id=this.DataColumns.Contains("MapID")?parseInt(e[r].MapID):parseInt(e[r].NodeID),o.id=o.Id,this.DataColumns.Contains("StatusID")&&(h.J0.IsEmpty(e[r].StatusID)||(o.StatusID=parseInt(e[r].StatusID))),this.DataColumns.Contains("TypeID")&&(h.J0.IsEmpty(e[r].TypeID)||(o.TypeID=parseInt(e[r].TypeID))),this.DataColumns.Contains("IsGroup")&&(o.IsGroup=(0,d.yG0)(e[r].IsGroup)),this.DataColumns.Contains("Depth")&&(o.LevelNo=parseInt(e[r].Depth));for(let C=0;C<n;C++)o.Text.push(h.J0.StringValue(e[r][this.DataColumns[C+1]]));if(this.DataColumns.Contains("CreatedDate_Key")&&o.Text.push(h.J0.ParseDate(e[r].CreatedDate_Key).ToString("yyyyMMddhhmmss")),95==this.CostCenterID&&(428==o.TypeID&&(o.RowForeColor="Red"),465==o.TypeID?o.RowForeColor="PaleVioletRed":451==o.TypeID?o.RowForeColor="Blue":450==o.TypeID?o.RowForeColor="Green":480==o.TypeID?o.RowForeColor="Orange":477==o.TypeID&&(o.RowForeColor="MediumVioletRed")),(129==this.CostCenterID||103==this.CostCenterID)&&469==o.StatusID&&(o.RowForeColor="Blue"),49==this.CostCenterID&&o.IsGroup&&r>0&&(o.Id=l++,o.id=o.Id),7==this.CostCenterID&&2==o.StatusID&&(o.RowForeColor="Red"),50051==this.CostCenterID&&(251==o.StatusID?o.RowForeColor="Red":(1001==o.StatusID||1002==o.StatusID)&&(o.RowForeColor="DarkOrange"),this.DataColumns.Contains("DORelieve")&&null!=e[r].DORelieve&&null!=e[r].DORelieve&&""!=e[r].DORelieve.toString()&&h.J0.ParseDate(e[r].DORelieve).Date<(new Date).Date&&(o.RowForeColor="DarkViolet")),s.d.SessionManager.Preferences.ContainsKey("DimensionColourList")&&""!=s.d.SessionManager.Preferences.DimensionColourList.toString()&&s.d.SessionManager.Preferences.DimensionColourList.toString().split(",").Contains(this.CostCenterID.toString())&&(1e3==o.StatusID?o.RowForeColor="Green":1001==o.StatusID?o.RowForeColor="DarkOrange":1003==o.StatusID?o.RowForeColor="PaleVioletRed":o.StatusID==this.inActiveID&&(o.RowForeColor="Red")),o.CallPropertyChange(),null!=this.SelectedNodes&&this.SelectedNodes.length>0){var a=this.SelectedNodes.find(C=>C.Id==o.Id);(null!=a||this.lstParents.length>0&&o.LevelNo>this.lstParents[this.lstParents.length-1].LevelNo&&this.lstParents[this.lstParents.length-1].IsSelected)&&(null!=a&&(this.SelectedNodes.Remove(a),o.Tag=a.Tag),o.FontWeight="Bold",o.IsSelected=!0,this.SelectedNodes.push(o))}if(this.IsDynamicTree)this.DataColumns.Contains("lft")&&(o.lft=parseInt(e[r].lft)),this.DataColumns.Contains("rgt")&&(o.rgt=parseInt(e[r].rgt)),this.DataColumns.Contains("ParentID")&&(o.parentID=parseInt(e[r].ParentID)),null!=this.SelectedNodes&&this.SelectedNodes.length>0&&this.SelectedNodes.find(C=>1==C.IsGroup&&o.lft>C.lft&&C.rgt>o.lft)&&(o.FontWeight="Bold"),2==this.direction&&i.length>0?i.InsertAt(o,0):i.push(o);else{if((!this.DefaultCollapse||o.LevelNo<2||this.lstParents.length<2)&&(!h.J0.IsEmpty(this.Parent.ClassName)&&"SearchDocumentViewModel"==this.Parent?.ClassName.toString()&&null!=this.SelectedDOcs&&this.SelectedDOcs.Contains(o.Id.ToString())?((278==this.GridViewID||this.PendingList)&&o.Text.push("Yes"),i.InsertAt(o,0)):((278==this.GridViewID||this.PendingList)&&o.Text.push("NO"),i.push(o))),this.AllNodes.push(o),o.IsGroup){if(this.lstParents.length>0){if(o.LevelNo>this.lstParents[this.lstParents.length-1].LevelNo)this.lstParents[this.lstParents.length-1].Children.push(o),this.lstParents.push(o);else if(o.LevelNo==this.lstParents[this.lstParents.length-1].LevelNo)this.lstParents.RemoveAt(this.lstParents.length-1),this.lstParents.length>0&&this.lstParents[this.lstParents.length-1].Children.push(o),this.lstParents.push(o);else if(o.LevelNo<this.lstParents[this.lstParents.length-1].LevelNo){for(let C=this.lstParents.length-1;C>=0&&o.LevelNo<=this.lstParents[C].LevelNo;C--)this.lstParents.RemoveAt(this.lstParents.length-1);this.lstParents.length>0&&this.lstParents[this.lstParents.length-1].Children.push(o),this.lstParents.push(o)}}else this.lstParents.push(o);this.DefaultCollapse&&this.lstParents.length<=2&&!i.Contains(o)&&(this.CostCenterID<4e4||this.CostCenterID>5e4)&&i.push(o)}else if(this.lstParents.length>0)if(o.LevelNo>this.lstParents[this.lstParents.length-1].LevelNo)this.lstParents.length>0&&this.lstParents[this.lstParents.length-1].Children.push(o);else if(o.LevelNo==this.lstParents[this.lstParents.length-1].LevelNo){for(let C=this.lstParents.length-1;C>=0&&o.LevelNo<=this.lstParents[C].LevelNo;C--)this.lstParents.RemoveAt(this.lstParents.length-1);this.lstParents.length>0&&this.lstParents[this.lstParents.length-1].Children.push(o)}else if(o.LevelNo<this.lstParents[this.lstParents.length-1].LevelNo){for(let C=this.lstParents.length-1;C>=0&&o.LevelNo<=this.lstParents[C].LevelNo;C--)this.lstParents.RemoveAt(this.lstParents.length-1);this.lstParents.length>0&&this.lstParents[this.lstParents.length-1].Children.push(o)}0==this.Root.Children.length&&this.lstParents.length>0&&this.Root.Children.push(this.lstParents[0])}}return i}OnViewChange(e){var t=this;return(0,b.A)(function*(){h.J0.IsEmpty(t.Views.SelectedValue)||(null!=t.Views.SelectedValue&&(t.gridviewid=parseInt(t.Views.SelectedValue),t.CreateColumns(),!h.J0.IsEmpty(t.treecomp)&&t.treecomp.angularGrid&&t.treecomp.gridObj.setColumns(t.treecomp.setColumnDefinitions()),!s.d.SessionManager.IsWebApplication&&t.IsDynamicTree&&(t.ChunkCount=t.LVhgt/20),yield t.GetData(),null!=t.oSelectViewCallBack&&t.oSelectViewCallBack(),s.d.IsMobile&&s.d.IsNativeMobile&&(yield t.LoadMobileViewData())),s.d.page.RefreshSlickGridUI())})()}OnSearchTextChange(e){!h.J0.IsEmpty(this.SearchText.Text)&&!this.SearchText.Text.Contains("Search...")&&(this.tmrSearch.Enabled&&(this.tmrSearch.Enabled=!1),this.tmrSearch.Enabled=!0)}tmrSearch_Tick(e,t){try{this.Search(!0)}catch{}this.tmrSearch.Enabled=!1}OnSearchListChange(e){h.J0.IsEmpty(this.SearchDDL.Text)||this.SearchList()}CreateColumns(){this.CodeIndex=-1,this.NameIndex=-1,this.NumberIndex=-1;let e=[],t=[];t=this.Dataset.Tables[1].filter(40011==this.CostCenterID&&280==this.GridViewID?n=>n.GridViewID==this.gridviewid.toString()&&1==n.ColumnType:n=>n.GridViewID==this.gridviewid.toString());let i=new A.i;this.SearchColumns.Items.Clear(),this.SearchColumns.Items.push(N._p.ComboBoxItems_2(s.d.SessionManager.translate.instant("Tree_Fulltext"),"")),this.SearchColumns.SelectedValue="",(278==this.GridViewID||this.PendingList)&&(i.align="left",i.width="80",i.HeaderText="Linked",i.DisplayMember="Text["+t.length.toString()+"]",i.DisplayIndex=t.length.toString(),i.id="0",e.push(i));for(let n=0;n<t.length;n++){i=new A.i,i.id=t[n].CostCenterColID.toString(),i.DBName=h.J0.String(t[n].SysColumnName),h.J0.IsEmpty(i.DBName)&&(i.DBName=h.J0.String(t[n].UserColumnName)),i.width=t[n].ColumnWidth,i.HeaderText=t[n].ResourceData.toString();let r="STRING";s.d.SessionManager.StringIsNullOrEmpty(t[n].ColumnDataType)||(r=h.J0.String(t[n].ColumnDataType)),i.DataType=r,i.DisplayMember="Text["+n+"]",i.DisplayIndex=n.toString(),null==t[n].UserColumnType||null==t[n].UserColumnType||""==t[n].UserColumnType.toString()||"numeric"!=t[n].UserColumnType.toString().toLowerCase()&&"int"!=t[n].UserColumnType.toString().toLowerCase()&&"float"!=t[n].UserColumnType.toString().toLowerCase()?this.Dataset.Columns[1].Contains("DataAlignment")&&null!=t[n].DataAlignment&&""!=t[n].DataAlignment.toString()?"Left"==t[n].DataAlignment.toString()?i.align="left":"Center"==t[n].DataAlignment.toString()?i.align="center":"Right"==t[n].DataAlignment.toString()&&(i.align="right"):i.align="2"==s.d.SessionManager.LangID?"right":"left":i.align="2"==s.d.SessionManager.LangID?"left":"right",this.Dataset.Columns[1].Contains("HeaderAlignment")&&null!=t[n].HeaderAlignment&&""!=t[n].HeaderAlignment.toString()&&("Left"==t[n].HeaderAlignment.toString()?i.Headeralign="left":"Center"==t[n].HeaderAlignment.toString()?i.Headeralign="center":"Right"==t[n].HeaderAlignment.toString()&&(i.Headeralign="right")),16==this.CostCenterID&&"batchnumber"==t[n].SysColumnName.toString().toLowerCase()&&(this.NumberIndex=n),(2==this.CostCenterID&&"accountcode"==t[n].SysColumnName.toString().toLowerCase()||3==this.CostCenterID&&"productcode"==t[n].SysColumnName.toString().toLowerCase()||76==this.CostCenterID&&"bomcode"==t[n].SysColumnName.toString().toLowerCase()||72==this.CostCenterID&&"assetcode"==t[n].SysColumnName.toString().toLowerCase()||(this.CostCenterID>5e4||92==this.CostCenterID||93==this.CostCenterID||88==this.CostCenterID||89==this.CostCenterID||86==this.CostCenterID)&&"code"==t[n].SysColumnName.toString().toLowerCase()||94==this.CostCenterID&&"tenantcode"==t[n].SysColumnName.toString().toLowerCase()||73==this.CostCenterID&&"casenumber"==t[n].SysColumnName.toString().toLowerCase()||83==this.CostCenterID&&"customercode"==t[n].SysColumnName.toString().toLowerCase()||16==this.CostCenterID&&"productcode"==t[n].UserColumnName.toString().toLowerCase()&&"productid"==t[n].SysColumnName.toString().toLowerCase())&&(this.CodeIndex=n),(2==this.CostCenterID&&"accountname"==t[n].SysColumnName.toString().toLowerCase()||3==this.CostCenterID&&"productname"==t[n].SysColumnName.toString().toLowerCase()||200==this.CostCenterID&&"reportname"==t[n].SysColumnName.toString().toLowerCase()||76==this.CostCenterID&&"bomname"==t[n].SysColumnName.toString().toLowerCase()||72==this.CostCenterID&&"assetname"==t[n].SysColumnName.toString().toLowerCase()||(this.CostCenterID>5e4||92==this.CostCenterID||93==this.CostCenterID||88==this.CostCenterID)&&"name"==t[n].SysColumnName.toString().toLowerCase()||(94==this.CostCenterID||65==this.CostCenterID)&&"firstname"==t[n].SysColumnName.toString().toLowerCase()||(86==this.CostCenterID||89==this.CostCenterID)&&"company"==t[n].SysColumnName.toString().toLowerCase()||83==this.CostCenterID&&"customername"==t[n].SysColumnName.toString().toLowerCase()||16==this.CostCenterID&&"product name"==t[n].UserColumnName.toString().toLowerCase()&&"productid"==t[n].SysColumnName.toString().toLowerCase())&&(this.NameIndex=n),this.SearchColumns.Items.push(N._p.ComboBoxItems_2(h.J0.String(t[n].ResourceData),h.J0.String(t[n].CostCenterColID))),e.push(i)}if(this.SearchColumns.SelectedIndex=0,t=this.Dataset.Tables[0].filter(n=>n.GridViewID==this.GridViewID.toString()),null!=t&&t.length>0){"0"!=t[0].DefaultColID.toString()&&(this.SearchColumns.SelectedValue="-1"==t[0].DefaultColID.toString()?"":t[0].DefaultColID.toString()),"0"!=t[0].DefaultFilterID.toString()&&(this.Options.SelectedValue=t[0].DefaultFilterID.toString());let n=0;n=s.d.SessionManager.IntTryParse(h.J0.StringValue(t[0].DefaultListViewID)),""!=h.J0.StringValue(t[0].DefaultListViewID)&&n>0&&(this.SearchDDL.TypeID=n)}else{this.Dataset.Tables[0].length>0&&"0"!=this.Dataset.Tables[0][0].DefaultColID.toString()&&(this.SearchColumns.SelectedValue="-1"==this.Dataset.Tables[0].Rows[0].DefaultColID.toString()?"":this.Dataset.Tables[0][0].DefaultColID.toString()),this.Dataset.Tables[0].length>0&&"0"!=this.Dataset.Tables[0][0].DefaultFilterID.toString()&&(this.Options.SelectedValue=this.Dataset.Tables[0][0].DefaultFilterID.toString());let n=0;n=s.d.SessionManager.IntTryParse(t[0].DefaultListViewID.toString()),this.Dataset.Tables[0].length>0&&""!=this.Dataset.Tables[0][0].DefaultListViewID.toString()&&n>0&&(this.SearchDDL.TypeID=n)}this.IsDynamicTree?(this.SearchDDL.Visible=!0,this.SearchText.Visible=!1,this.Options.Visible=!1,this.SearchColumns.Visible=!1):null==this.SearchColumns.SelectedValue||"238"!=this.SearchColumns.SelectedValue&&"239"!=this.SearchColumns.SelectedValue&&"261"!=this.SearchColumns.SelectedValue&&"262"!=this.SearchColumns.SelectedValue||"1"!=this.Options.SelectedValue&&"2"!=this.Options.SelectedValue?(this.SearchDDL.Visible=!1,this.SearchText.Visible=!0):(this.SearchDDL.Visible=!0,this.SearchText.Visible=!1),this.ColumnsSource=e}SortList(e){if(95==this.CostCenterID||103==this.CostCenterID||6==this.CostCenterID||7==this.CostCenterID){let t=null;t=this.Rows.sort("Ascending"==this.sortDirection?(i,n)=>i.Text[e]>n.Text[e]?-1:1:(i,n)=>i.Text[e]>n.Text[e]?1:-1),this.Rows.Clear(),this.Rows.AddRange(t)}else this.Rows.Clear(),this.AllNodes.Clear(),this.Sort(this.Root,e)}Sort(e,t){let i=this.Rows.indexOf(e);e._isExpanded=!0;let n=null;n=e.Children.sort("Ascending"==this.sortDirection?(r,l)=>r.Text[t]>l.Text[t]?-1:1:(r,l)=>r.Text[t]>l.Text[t]?1:-1),this.AllNodes.InsertRange(i+1,n),this.Rows.InsertRange(i+1,n);for(let r=0;r<e.Children.length;r++)e.Children[r].IsGroup&&this.Sort(e.Children[r],t)}Search(e){let t=this.IsFilterClick?this.Rows:this.AllNodes,i=null,n=0;null!=this.SelectedNode&&(n=t.indexOf(this.SelectedNode)),-1==n&&(n=0);for(let r=0;r<t.length;r++)if(e?n<t.length-1?n++:n=0:0==n?n=t.length-1:n--,i=t[n],this.SearchColumns.SelectedIndex>0){if(null!=this.Options.SelectedValue){if("1"==this.Options.SelectedValue.toString()&&i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase()==this.SearchText.Text.toLowerCase())return void this.SelectSearchNode(i);if("2"==this.Options.SelectedValue.toString()&&i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase()!=this.SearchText.Text.toLowerCase())return void this.SelectSearchNode(i);if("3"==this.Options.SelectedValue.toString()&&i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().startsWith(this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i);if("4"==this.Options.SelectedValue.toString()&&i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().endsWith(this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i);if("5"==this.Options.SelectedValue.toString()&&i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().Contains(this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i);if("6"==this.Options.SelectedValue.toString()&&!i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().Contains(this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i)}else if(i.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().Contains(this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i)}else if(null!=this.Options.SelectedValue){if("1"==this.Options.SelectedValue.toString()&&i.Text.some(l=>h.J0.StringValue(l).toLowerCase()==this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i);if("2"==this.Options.SelectedValue.toString()&&i.Text.some(l=>h.J0.StringValue(l).toLowerCase()!=this.SearchText.Text.toLowerCase()))return void this.SelectSearchNode(i);if("3"==this.Options.SelectedValue.toString()&&i.Text.some(l=>h.J0.StringValue(l).toLowerCase().startsWith(this.SearchText.Text.toLowerCase())))return void this.SelectSearchNode(i);if("4"==this.Options.SelectedValue.toString()&&i.Text.some(l=>h.J0.StringValue(l).toLowerCase().endsWith(this.SearchText.Text.toLowerCase())))return void this.SelectSearchNode(i);if("5"==this.Options.SelectedValue.toString()&&i.Text.some(l=>h.J0.StringValue(l).toLowerCase().Contains(this.SearchText.Text.toLowerCase())))return void this.SelectSearchNode(i);if("6"==this.Options.SelectedValue.toString()&&!i.Text.some(l=>h.J0.StringValue(l).toLowerCase().Contains(this.SearchText.Text.toLowerCase())))return void this.SelectSearchNode(i)}else if(i.Text.some(l=>h.J0.StringValue(l).toLowerCase().Contains(this.SearchText.Text.toLowerCase())))return void this.SelectSearchNode(i)}SearchList(){if(this.SearchDDL.Visible&&0!=this.ListBoxValue&&null!=this.AllNodes)try{var e=this.AllNodes.find(t=>t.Id==this.ListBoxValue);if(!h.J0.IsEmpty(e))return void this.SelectSearchNode(e)}catch(t){Logger.ErrorLog("TreeViewModel::SearchList:"+t.Message)}else this.SelectedNode=this.AllNodes.length>0?this.AllNodes[0]:null}SelectSearchNode(e){if(!this.IsFilterClick&&!this.Rows.Contains(e)&&(this.collapsedParents.Clear(),this.SetVisible(e)),this.SelectedNode=e,this.treecomp?.angularGrid){this.treecomp.gridObj.getData().refresh();let t=this.treecomp.gridObj.getData().getRowById(this.SelectedNode.Id);h.J0.IsEmpty(t)||this.treecomp.gridObj.setActiveCell(t,0)}}SetVisible(e){if(this.collapsedParents.InsertAt(e,0),null!=e.Parent)if(this.Rows.Contains(e.Parent)){e.Parent.IsExpanded||this.SetIsExpanded(e.Parent,!0);for(let t=0;t<this.collapsedParents.length;t++)null!=this.collapsedParents[t].IsExpanded&&!this.collapsedParents[t].IsExpanded&&this.SetIsExpanded(this.collapsedParents[t],!0)}else this.SetVisible(e.Parent);else{this.SetIsExpanded(this.Root,!0);for(let t=0;t<this.collapsedParents.length;t++)null!=this.collapsedParents[t].IsExpanded&&!this.collapsedParents[t].IsExpanded&&this.SetIsExpanded(this.collapsedParents[t],!0)}}SetIsExpanded(e,t){t?(e.AssignIsExpanded(t),this.CreateChildrenRows(e)):(this.DropChildrenRows(e,!1,!1),e.AssignIsExpanded(t))}CreateChildrenRows(e){if(0==e.Level)for(let i=0;i<e.Children.length;i++)e.Children[i].IsGroup&&!e.Children[i]._isExpanded&&(e.Children[i]._isExpanded=!0,this.CreateChildrenRows(e.Children[i]));else{let i=this.Rows.indexOf(e);(i>=0||e==this.Root)&&this.Rows.InsertRange(i+1,e.AllVisibleChildren)}}DropChildrenRows(e,t,i){if(0!=e.Level||i){let n=this.Rows.indexOf(e);if(n>=0||e==this.Root){let r=e.VisibleChildrenCount+1;t?r++:n++,this.Rows.splice(n,r)}}else for(let n=0;n<e.Children.length;n++)e.Children[e.Children.length-n-1].IsGroup&&e.Children[e.Children.length-n-1]._isExpanded&&(this.DropChildrenRows(e.Children[e.Children.length-n-1],t,i),e.Children[e.Children.length-n-1]._isExpanded=!1)}Filter(){null==this.Parent||86!=this.CostCenterID&&89!=this.CostCenterID?this.FilterData():("ListOfLeads"==this.Parent.ClassName||"ListOfOpportunity"==this.Parent.ClassName||"ListOfCasesViewModel"==this.Parent.ClassName)&&(this.Parent.ShowReportFilter=!0)}FilterData(){let e=null;this.IsFilterClick&&null!=this.Parent&&"ReportFilterDialog"==this.Parent.ClassName||h.J0.IsEmpty(this.SearchText.Text)||"Search..."==this.SearchText.Text?(this.IsFilterClick=!1,e=this.AllNodes,this.AllNodes.length>0&&(this.SelectedNode=this.AllNodes[0])):(this.IsFilterClick=!0,this.SearchColumns.SelectedIndex>0?"1"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text[this.SearchColumns.SelectedIndex-1].toLowerCase()==this.SearchText.Text.toLowerCase()):"2"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text[this.SearchColumns.SelectedIndex-1].toLowerCase()!=this.SearchText.Text.toLowerCase()):"3"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().startsWith(this.SearchText.Text.toLowerCase())):"4"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().endsWith(this.SearchText.Text.toLowerCase())):"5"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&this.SqlLike("%"+this.SearchText.Text.toLowerCase().Replace(" ","%")+"%",t.Text[this.SearchColumns.SelectedIndex-1].toLowerCase())):"6"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&!t.Text[this.SearchColumns.SelectedIndex-1].toLowerCase().Contains(this.SearchText.Text.toLowerCase())):"7"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&h.J0.ParseDate(t.Text[this.SearchColumns.SelectedIndex-1])>h.J0.ParseDate(this.SearchText.Text)):"8"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&h.J0.ParseDate(t.Text[this.SearchColumns.SelectedIndex-1])>=h.J0.ParseDate(this.SearchText.Text)):"9"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&h.J0.ParseDate(t.Text[this.SearchColumns.SelectedIndex-1])<h.J0.ParseDate(this.SearchText.Text)):"10"==this.Options.SelectedValue&&(e=this.AllNodes.filter(t=>0==t.IsGroup&&h.J0.ParseDate(t.Text[this.SearchColumns.SelectedIndex-1])<=h.J0.ParseDate(this.SearchText.Text))):"1"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text.some(i=>i.toLowerCase()==this.SearchText.Text.toLowerCase())):"2"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text.some(i=>i.toLowerCase()!=this.SearchText.Text.toLowerCase())):"3"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text.some(i=>i.toLowerCase().startsWith(this.SearchText.Text.toLowerCase()))):"4"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text.some(i=>i.toLowerCase().endsWith(this.SearchText.Text.toLowerCase()))):"5"==this.Options.SelectedValue?e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text.some(i=>this.SqlLike("%"+this.SearchText.Text.toLowerCase().Replace(" ","%")+"%",i.toLowerCase()))):"6"==this.Options.SelectedValue&&(e=this.AllNodes.filter(t=>0==t.IsGroup&&t.Text.some(i=>!i.toLowerCase().Contains(this.SearchText.Text.toLowerCase()))))),this.Rows.Clear(),this.Rows.InsertRange(0,e),this.treecomp?.angularGrid&&(null!=this.Rows&&this.treecomp?.angularGrid.reLoadData(this.Rows),this.treecomp.gridObj.getData().refresh(),this.treecomp.gridObj.invalidate())}SqlLike(e,t){let i=!0,n=!1,r=!1,l=!1,a=!1,u=!1,o=-1,C=0,p=[],T="\0";for(let D=0;D<t.length;D++){let c=t[D];if(u=C>=e.length,!u)if(T=e[C],n||"%"!=T){if("_"==T)r=!0,C++;else if("["==T){if("^"==e[++C]?(a=!0,C++):l=!0,p.Clear(),"-"==e[C+1]&&"]"==e[C+3]){let g=e[C].toUpperCase();C+=2;let L=e[C].toUpperCase();if(g<=L)for(let M=g;M<=L;M++)p.push(M);C++}for(;C<e.length&&"]"!=e[C];)p.push(e[C]),C++;C++}}else{for(o=C,n=!0;C<e.length&&"%"==e[C];)C++;T=C>=e.length?"\0":e[C]}if(n)c.toUpperCase()==T.toUpperCase()&&(n=!1,C++);else if(r)r=!1;else if(l||a){let g=p.Contains(c.toUpperCase());if(a&&g||l&&!g){if(!(o>=0)){i=!1;break}C=o}a=l=!1}else if(c.toUpperCase()==T.toUpperCase())C++;else{if(!(o>=0)){i=!1;break}C=o}}if(u=C>=e.length,i&&!u){let D=!0;for(let c=C;c<e.length;c++)if("%"!=e[c]){D=!1;break}D&&(u=!0)}return i&&u}ShowNodesByLevels(e=3){let t=null;t=-1==e?this.AllNodes:this.AllNodes.filter(i=>i.Level<=e),this.Rows.Clear(),this.Rows.InsertRange(0,t),this.treecomp?.angularGrid&&(this.treecomp.gridObj.getData().setItems(this.Rows),this.treecomp.gridObj.getData().refresh(),this.treecomp.gridObj.invalidate())}ShowNodesBySelection(){let e=null;e=this.IsNodesBySelection?this.AllNodes:this.SelectedNodes,this.IsNodesBySelection=!this.IsNodesBySelection,this.Rows.Clear(),this.Rows.InsertRange(0,e),this.treecomp?.angularGrid&&(this.treecomp.gridObj.getData().setItems(this.Rows),this.treecomp.gridObj.getData().refresh(),this.treecomp.gridObj.invalidate())}SelectNode(){if(null!=this.SelectedNode){if("Bold"==this.SelectedNode.FontWeight){if(this.IsDynamicTree&&this.CheckNodes(this.SelectedNode))return;this.SelectNode_1(this.SelectedNode,!1),this.IsDynamicTree?this.CheckChildNodes(this.SelectedNode,!1):this.unselectParent(this.SelectedNode)}else this.SelectNode_1(this.SelectedNode,!0),this.IsDynamicTree&&(this.UnSelectChildNodes(this.SelectedNode),this.CheckChildNodes(this.SelectedNode,!0));this.RefreshSelectionText()}null!=this.OnNodeSelected&&this.OnNodeSelected.Call()}UnSelectChildNodes(e){}CheckNodes(e){return!!this.SelectedNodes.find(i=>1==i.IsGroup&&e.lft>i.lft&&i.rgt>e.lft)}CheckChildNodes(e,t){e.IsGroup&&this.Rows.forEach(i=>{i.lft>e.lft&&i.lft<e.rgt&&(i.FontWeight=t?"Bold":"Normal")})}SelectNode_1(e,t){e.IsGroup&&e.Children.forEach(i=>{this.SelectNode_1(i,t)}),t?(this.AllNodes.Contains(e)&&(this.AllNodes[this.AllNodes.findIndex(i=>i==e)].FontWeight="Bold"),e.FontWeight="Bold",null==this.SelectedNodes&&(this.SelectedNodes=[]),this.SelectedNodes.Contains(e)||this.SelectedNodes.push(e)):(this.AllNodes.Contains(e)&&(this.AllNodes[this.AllNodes.findIndex(i=>i==e)].FontWeight="Normal"),e.FontWeight="Normal",null!=this.SelectedNodes&&this.SelectedNodes.Contains(e)&&this.SelectedNodes.Remove(e)),e.IsSelected=t}unselectParent(e){null!=e.Parent&&(this.SelectedNodes.Contains(e.Parent)&&this.SelectedNodes.Remove(e.Parent),e.Parent.FontWeight="Normal",e.Parent.IsSelected=!1,this.unselectParent(e.Parent))}RefreshSelectionText(){null!=this.Parent&&"PACT.VIEWMODEL.ReportFilterDialog"==this.Parent.toString()||(null!=this.SelectedNodes&&this.SelectedNodes.length>0?(this.BtnSelectionVisibility=!0,this.BtnSelectionText="CLEAR SELECTION ("+this.SelectedNodes.filter(e=>!e.IsGroup).length.toString()+")"):this.BtnSelectionVisibility=!1,this.PendingList&&this.AddSelectedPendinglistTotals())}ViewFilterData(e,t){if("ClearFilter"==e||"CancelFilter"==e)"CancelFilter"==e&&(this.Parent.ViewFilterVisibility=!1,this.Parent.DetailsVisibility=!0,this.Parent.isqukpnlopen=!0),this.LoadData(),null!=this.Rows&&this.Rows.length>0&&null==this.SelectedNode&&(this._selectedNode=this.Rows[0]);else{let i=this.Data;i=this.FilterCCData(i,t);let n=this.AddRows(i,!0);n.InsertRange(0,this.Rows),this.Rows=n}}FilterCCData(e,t){for(let i=0;i<t.length;i++){let n=t[i];if("None"!=n.Condition.SelectedValue)if("DATE"==n.DataType)switch(n.Condition.SelectedItem.Parent){case" BETWEEN ":e=e.filter(r=>+r[n.ColumnName].ToServerDate()>=+n.FromDate.Date.OnlyDate()&&+r[n.ColumnName].ToServerDate()<=+n.ToDate.Date.OnlyDate());break;case" NOT BETWEEN ":e=e.filter(r=>r[n.ColumnName].ToServerDate()<+n.FromDate.Date.OnlyDate()&&r[n.ColumnName].ToServerDate()>n.ToDate.Date.OnlyDate());break;case"=":e=e.filter(r=>+r[n.ColumnName].ToServerDate()==+n.FromDate.Date.OnlyDate());break;case"<>":e=e.filter(r=>+r[n.ColumnName].ToServerDate()!=+n.FromDate.Date.OnlyDate());break;case"<":e=e.filter(r=>r[n.ColumnName].ToServerDate()<n.FromDate.Date.OnlyDate());break;case"<=":e=e.filter(r=>+r[n.ColumnName].ToServerDate()<=+n.FromDate.Date.OnlyDate());break;case">":e=e.filter(r=>r[n.ColumnName].ToServerDate()>n.FromDate.Date.OnlyDate());break;case">=":e=e.filter(r=>+r[n.ColumnName].ToServerDate()>=+n.FromDate.Date.OnlyDate())}else if(n.FromDropDown.Visible){if(!n.FromDropDown.Items[0].IsChecked){let r=[];n.FromDropDown.Items.forEach(l=>{l.IsChecked&&((""==l.Name||"[NULL]"==l.Name)&&r.push(null),r.push(l.Name))}),e=0==r.length?[]:e.filter("Equal"==n.Condition.SelectedValue?l=>r.Contains(h.J0.String(l[n.ColumnName])):l=>!r.Contains(h.J0.String(l[n.ColumnName])))}}else switch(n.Condition.SelectedItem.Parent){case" BETWEEN ":e=e.filter("FLOAT"==n.DataType?r=>parseFloat(r[n.ColumnName])>=parseFloat(n.FromValue.TextBox.Text)&&parseFloat(r[n.ColumnName])<=parseFloat(n.ToValue.Text):"INT"==n.DataType?r=>parseInt(r[n.ColumnName])>=parseInt(n.FromValue.TextBox.Text)&&parseInt(r[n.ColumnName])<=parseInt(n.ToValue.Text):r=>r[n.ColumnName]>=n.FromValue.TextBox.Text&&r[n.ColumnName]<=n.ToValue.Text);break;case" NOT BETWEEN ":e=e.filter("FLOAT"==n.DataType?r=>parseFloat(r[n.ColumnName])<parseFloat(n.FromValue.TextBox.Text)||parseFloat(r[n.ColumnName])>parseFloat(n.ToValue.Text):"INT"==n.DataType?r=>parseInt(r[n.ColumnName])<parseInt(n.FromValue.TextBox.Text)||parseInt(r[n.ColumnName])>parseInt(n.ToValue.Text):r=>r[n.ColumnName]<n.FromValue.TextBox.Text||r[n.ColumnName]>n.ToValue.Text);break;case" LIKE ":e=e.filter(r=>!h.J0.IsEmpty(r[n.ColumnName])&&-1!=r[n.ColumnName].toLowerCase().indexOf(n.FromValue.TextBox.Text.toLowerCase()));break;case" NOT LIKE ":e=e.filter(r=>!h.J0.IsEmpty(r[n.ColumnName])&&-1==r[n.ColumnName].toLowerCase().indexOf(n.FromValue.TextBox.Text.toLowerCase()));break;case"BeginsWith":e=e.filter(r=>!h.J0.IsEmpty(r[n.ColumnName])&&r[n.ColumnName].toLowerCase().startsWith(n.FromValue.TextBox.Text.toLowerCase()));break;case"EndsWith":e=e.filter(r=>!h.J0.IsEmpty(r[n.ColumnName])&&r[n.ColumnName].toLowerCase().endsWith(n.FromValue.TextBox.Text.toLowerCase()));break;case"=":e=e.filter("FLOAT"==n.DataType?r=>r[n.ColumnName]==parseFloat(n.FromValue.TextBox.Text):"INT"==n.DataType?r=>r[n.ColumnName]==parseInt(n.FromValue.TextBox.Text):r=>r[n.ColumnName]==n.FromValue.TextBox.Text);break;case"<>":e=e.filter("FLOAT"==n.DataType?r=>r[n.ColumnName]!=parseFloat(n.FromValue.TextBox.Text):"INT"==n.DataType?r=>r[n.ColumnName]!=parseInt(n.FromValue.TextBox.Text):r=>r[n.ColumnName]!=n.FromValue.TextBox.Text);break;case"<":"FLOAT"==n.DataType?e=e.filter(r=>r[n.ColumnName]<parseFloat(n.FromValue.TextBox.Text)):"INT"==n.DataType&&(e=e.filter(r=>r[n.ColumnName]<parseInt(n.FromValue.TextBox.Text)));break;case"<=":"FLOAT"==n.DataType?e=e.filter(r=>r[n.ColumnName]<=parseFloat(n.FromValue.TextBox.Text)):"INT"==n.DataType&&(e=e.filter(r=>r[n.ColumnName]<=parseInt(n.FromValue.TextBox.Text)));break;case">":"FLOAT"==n.DataType?e=e.filter(r=>r[n.ColumnName]>parseFloat(n.FromValue.TextBox.Text)):"INT"==n.DataType&&(e=e.filter(r=>r[n.ColumnName]>parseInt(n.FromValue.TextBox.Text)));break;case">=":"FLOAT"==n.DataType?e=e.filter(r=>r[n.ColumnName]>=parseFloat(n.FromValue.TextBox.Text)):"INT"==n.DataType&&(e=e.filter(r=>r[n.ColumnName]>=parseInt(n.FromValue.TextBox.Text)))}}return e}}},84833:(w,P,I)=>{I.d(P,{i:()=>b});class b{constructor(){this.HeaderText="",this.DisplayMember="",this.DBName="",this.DataType="",this.width="",this.align="",this.Headeralign="left",this.id="",this.Visible=!0}}}}]);
"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[8744],{26363:(d,n,c)=>{c.r(n),c.d(n,{MoveSelectedAccountViewModel:()=>g});var l=c(32040),h=c(98580),a=c(58170),r=c(23458),i=c(71009),u=c(27730);class g extends h.g{constructor(){super(...arguments),this.Move=new a.Yk,this._TargetAccountID=new r.y$(0),this.IsAbove=!1,this.Group=[]}get TargetAccount(){return this._TargetAccountID}set TargetAccount(e){e!=this._TargetAccountID&&(this._TargetAccountID=e)}get SelectedNode(){return this._lblSelectedNodeName}set SelectedNode(e){e!=this._lblSelectedNodeName&&(this._lblSelectedNodeName=e)}MoveSelectedAccountViewModel(e,s,t,A,o){if(console.log("ccid",o),this.IsAbove=A,Logger.InfoLog("MoveSelectedAccountViewModel::Entering MoveSelectedAccountViewModel with AccountID="+e+",AccName="+s),this.SelectedAccount=s,this.CCID=o,this.IsAbove?(this.TargetAccount.Label="Move Above",this.lblTarget="Move Above"):(this.TargetAccount.Label="Move After",this.lblTarget="Move After"),(3==o||2==o)&&(this.AccountID=e,this.TargetAccount.CCID=o,this.TargetAccount.TypeID=105,this.MoveLabel="Select"),200==o&&(this.AccountID=e,this.TargetAccount.CCID=o,this.TargetAccount.TypeID=1,this.MoveLabel="Selected Report",this.Title="Move Report"),3==o)this.Title="Move Product",this.MoveLabel="Selected Product",this.TargetAccount.CustomWhere=" a.parentid="+t+" and a.ProductID<> "+e+" ";else if(2==o)this.Title="Move Account",this.MoveLabel="Selected Account",this.TargetAccount.CustomWhere=" a.parentid="+t+" and a.accountid<> "+e+" ";else if(o>5e4){if(1==e)return this.DisplayMessage=l.d.GetResource("Root_Mve"),void(this.MessageVisibility=!0);this.SelectedNode=s,this.NodeID=e,this.CCID=o,this.FillControls()}this.Move.Subscribe(this,"OnMove"),this.DisplayMessage="",this.MessageVisibility=!1,Logger.InfoLog("MoveSelectedAccountViewModel::Exiting MoveSelectedAccountViewModel")}FillControls(){this.Group=[],this.Title="Move Dimension",this.MoveLabel=l.d.GetResource("Dmn_Sel");let e=l.d.common.GetSameLevelCostCenterNodes(this.NodeID,this.CCID);if(null!=e&&e.Tables.length>1)for(let s=0;s<e.Tables[0].length;s++){const t=e.Tables[0][s];this.Group.push(u._p.ComboBoxItems_2(t[e.Columns[0][1]],t[e.Columns[0][0]]))}Logger.InfoLog("MoveAfterCostCenterViewModel::Exiting FillControls")}OnMove(e){if(null!=e&&"Cancel"==e.toString())l.d.page.HideDialog(this.PopUpGUID),this.Parent.MoveSelectedAccountVisibility=!1;else{Logger.InfoLog("MoveSelectedAccountViewModel::Entering OnMove");try{let t,s="";if(2==this.CCID||3==this.CCID){if(null==this.TargetAccount.SelectedValue||this.TargetAccount.SelectedValue<1||0==this.TargetAccount.SelectedValue)return this.DisplayMessage=l.d.GetResource("Select")+" "+l.d.GetResource("Move_Target"),void(this.MessageVisibility=!0)}else if(this.CCID>=5e4){if(this.SelectedGroup<=0)return this.DisplayMessage=l.d.GetResource("Select")+" "+this.lblTarget,void(this.MessageVisibility=!0);this.IsAbove?(t=(new i.b).MoveAboveSelectedAccount(this.NodeID.toString(),this.SelectedGroup,4,this.CCID),s=t.Message):(t=(new i.b).MoveAfterSelectedAccount(this.NodeID.toString(),this.SelectedGroup,5,this.CCID),s=t.Message)}2==this.TargetAccount.CCID&&(this.IsAbove?(t=(new i.b).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,1,this.CCID),s=t.Message):(t=(new i.b).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,0,this.CCID),s=t.Message)),200==this.TargetAccount.CCID?this.IsAbove?(t=(new i.b).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,7,this.CCID),s=t.Message):(t=(new i.b).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,6,this.CCID),s=t.Message):3==this.TargetAccount.CCID&&(this.IsAbove?(t=(new i.b).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,2,this.CCID),s=t.Message):(t=(new i.b).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,3,this.CCID),s=t.Message)),this.DisplayMessage=s,this.MessageVisibility=!0,this.Parent.obj.SetFocusNodeID=this.NextFocusNodeID,this.Parent.Refresh(),this.Parent.ClearSelectedNodes=!0,Logger.InfoLog("MoveSelectedAccountViewModel::Exiting OnMove")}catch(s){Logger.ErrorLog("MoveSelectedAccountViewModel:: OnMove"+s.stack)}}}}}}]);
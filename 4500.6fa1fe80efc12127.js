"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[4500],{84500:(S,m,o)=>{o.r(m),o.d(m,{CommonFieldPopupViewModel:()=>b});var s=o(32040),l=o(43767),D=o(27730),g=o(98580),c=o(21774),p=o(7321),C=o(61301),V=o(34475);class b extends g.g{get ColumnSource(){return this.GridObj.Columns}set ColumnSource(t){this.GridObj.Columns=t}get GridData(){return this.GridObj.Table}set GridData(t){this.GridObj.Table=t}get SelectedRow(){return this.GridObj.SelectedItem}set SelectedRow(t){this.GridObj.SelectedItem=t}constructor(t,r=!1,h=!1,n=!1,i=!1,I=0){if(super(),this.BudgetProfile=new D.y$(0),this.JVDocs=new D.y$(0),this.ReverseType=new D.y$(0),this.IsBudgetProfileDoc=!1,this.IsJVVoucher=!1,this.IsViewReverseDocument=!1,this.IsReverseDocument=!1,this.GridObj=new p.vv,this.parent=t,this.IsBudgetProfileDoc=r,this.IsJVVoucher=h,this.IsBudgetProfileDoc)this.IsBudgetProfileDoc=!0,this.IsJVVoucher=!1,this.IsReverseDocument=!1,this.IsViewReverseDocument=!1,this.BindBudgetProfiles();else if(n){this.IsBudgetProfileDoc=!1,this.IsJVVoucher=!1,this.IsReverseDocument=!0,this.IsViewReverseDocument=!1,this.ReverseType.Items.push(D._p.ComboBoxItems_2("Document Wise","0")),this.ReverseType.Items.push(D._p.ComboBoxItems_2("Line Wise","1")),this.ReverseType.SelectedValue="1";let u=[],a=new c.O7;a.Header="\u221a",a.DisplayMember="Select",a.DataType="CheckBox",a.Width=25,u.push(a),this.GridObj.Columns=[],this.GridObj.Table=[],t.ColumnSource.forEach(e=>{u.push(e)}),u.forEach(e=>{this.ColumnSource.push(e)}),this.GridData=t.ScreenObject.GridData.Copy(),this.GridObj.TableColumns.push("Select");for(let e=0;e<this.GridData.length;e++)this.GridData[e].select="False"}else if(i){this.IsBudgetProfileDoc=!1,this.IsJVVoucher=!1,this.IsReverseDocument=!1,this.IsViewReverseDocument=!0;let a=[];this.GridObj=new p.vv,this.GridObj.OnLinkClick.Subscribe(this,"OnLinkClickEvent");let e=new c.O7;e.Header="Document",e.DisplayMember="DocumentName",e.ReadOnly=!0,e.DisableTab=!0,e.Width=100,a.push(e),e=new c.O7,e.Header="VoucherNo",e.DisplayMember="VoucherNo",e.ReadOnly=!0,e.DataType="LINK",e.DisableTab=!0,e.Width=125,a.push(e),e=new c.O7,e.Header="CCID",e.DisplayMember="CostCenterID",e.ReadOnly=!0,e.DisableTab=!0,e.IsVisible=!1,e.Width=100,a.push(e),this.GridObj.Columns=a;let d,f=0;this.parent.ScreenObject.Preferences.ContainsKey("ReverseDocument")&&!l.J0.IsEmpty(this.parent.ScreenObject.Preferences.ReverseDocument)&&(f=parseInt(this.parent.ScreenObject.Preferences.ReverseDocument)),d=this.parent.ScreenObject.IsInventory?s.d.common.GetDataSet3("RVINVDOC",l.J0.String(I),l.J0.String(this.parent.ScreenObject.CostCenterID),l.J0.String(f)):s.d.common.GetDataSet("RVACCDOC",l.J0.String(I)),null!=d&&d.Tables.length>0&&(this.GridObj.Table=d.Tables[0])}else this.IsJVVoucher&&(this.IsBudgetProfileDoc=!1,this.IsJVVoucher=!0,this.IsReverseDocument=!1,this.IsViewReverseDocument=!1,this.BindJVDocs())}BindBudgetProfiles(){this.BudgetProfile.Items.Clear();let t=s.d.common.GetDataSet("BDP01","");null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&t.Tables[0].forEach(r=>{this.BudgetProfile.Items.push(D._p.ComboBoxItems_2(r.BudgetName.toString(),r.BudgetDefID.toString()))})}BindJVDocs(){this.JVDocs.Items.Clear();let t=s.d.common.GetDataSet("JVD01","");null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&t.Tables[0].forEach(r=>{this.JVDocs.Items.push(D._p.ComboBoxItems_2(r.DocName.toString(),r.CostCenterID.toString()))})}OnLinkClickEvent(t,r,h){try{C.RibbonExtViewModel.LoadDocument_VoucherNo(l.J0.String(t.VoucherNo)),this.parent.sJVDtls="",s.d.page.HideDialog(this.PopUpGUID)}catch(n){Logger.ErrorLog("CommonFieldPopupViewModel","OnLinkClickEvent",n)}}onSave(t){if("BudgetProfile"==t)l.J0.IsEmpty(this.BudgetProfile.SelectedValue)||(this.parent.iBudgetProfileID=parseInt(this.BudgetProfile.SelectedValue),s.d.page.HideDialog(this.PopUpGUID));else if("Cancel"==t)this.parent.iBudgetProfileID=0,s.d.page.HideDialog(this.PopUpGUID);else if("JVSave"==t)l.J0.IsEmpty(this.JVDocs.SelectedValue)||(this.parent.sJVDtls=this.parent.sJVDtls+"~"+this.JVDocs.SelectedValue,s.d.page.HideDialog(this.PopUpGUID));else if("JVCancel"==t)this.parent.sJVDtls="",s.d.page.HideDialog(this.PopUpGUID);else if("ReverseSave"==t){let h="",n="";if(this.GridData.length>0)for(let i=0;i<this.GridData.length;i++)!l.J0.IsEmpty(this.GridData[i].Select)&&(0,V.parseBoolean)(this.GridData[i].Select)&&(this.GridData[i].Select=!1,l.J0.IsEmpty(h)?(h=this.GridData[i].DocDetailsID.toString(),n=this.GridData[i].DocSeqNo.toString()):(h=h+","+this.GridData[i].DocDetailsID.toString(),n=n+","+this.GridData[i].DocSeqNo.toString()));this.parent.sJVDtls=this.ReverseType.SelectedValue+"~"+h+"~"+n,s.d.page.HideDialog(this.PopUpGUID)}else("ReverseCancel"==t||"ViewReverseCancel"==t)&&(this.parent.sJVDtls="",s.d.page.HideDialog(this.PopUpGUID))}}}}]);
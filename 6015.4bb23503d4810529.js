"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[6015],{3330:(S,_,d)=>{d.d(_,{f:()=>i});var h=d(11798),n=d(32040),u=d(43767),e=d(96598);function p(r,m){if(1&r){const a=e.RV6();e.j41(0,"span",17),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(a);const c=e.XpG(4);return e.Njj(c.obj.OnPrefetchButtonClick("RefreshReport"))}),e.nrm(2,"i",18),e.k0s()}2&r&&e.FS9("title",e.bMT(1,1,"Refresh"))}function T(r,m){if(1&r){const a=e.RV6();e.j41(0,"span",17),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(a);const c=e.XpG(4);return e.Njj(c.obj.OnPrefetchButtonClick("RegenerateReport"))}),e.nrm(2,"i",19),e.k0s()}2&r&&e.FS9("title",e.bMT(1,1,"Regenerate"))}function D(r,m){if(1&r){const a=e.RV6();e.j41(0,"span",4),e.bIt("click",function(){e.eBV(a);const c=e.XpG(4);return e.Njj(c.obj.OnPrefetchButtonClick("SelectAllReportRows"))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&r&&(e.R7$(),e.JRh(e.bMT(2,1,"Reports_UNselectAll")))}function C(r,m){if(1&r&&(e.j41(0,"div",13),e.EFF(1,"\n            "),e.eu8(2,14),e.EFF(3,"\n            "),e.DNE(4,p,3,3,"span",15),e.EFF(5,"\n            "),e.DNE(6,T,3,3,"span",15),e.EFF(7,"\n            "),e.DNE(8,D,3,3,"span",16),e.EFF(9,"\n          "),e.k0s()),2&r){const a=e.XpG(3);e.R7$(2),e.Y8G("obj",a.obj.CostCenters)("group",a.form),e.R7$(2),e.Y8G("ngIf",!a.obj.TreeVisibility),e.R7$(2),e.Y8G("ngIf",!a.obj.TreeVisibility),e.R7$(2),e.Y8G("ngIf",!a.obj.TreeVisibility)}}function s(r,m){if(1&r){const a=e.RV6();e.j41(0,"div",20),e.EFF(1,"\n            "),e.j41(2,"input",21),e.mxI("ngModelChange",function(c){e.eBV(a);const I=e.XpG(3);return e.DH7(I.obj.SelectAllDocuments,c)||(I.obj.SelectAllDocuments=c),e.Njj(c)}),e.bIt("change",function(c){e.eBV(a);const I=e.XpG(3);return e.Njj(I.OnCheckValue(c))}),e.k0s(),e.EFF(3,"\n            "),e.EFF(4,"\n            "),e.j41(5,"label",22),e.bIt("click",function(c){e.eBV(a);const I=e.XpG(3);return e.Njj(I.OnCheckValue(c))}),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.EFF(8,"\n        "),e.k0s()}if(2&r){const a=e.XpG(3);e.R7$(2),e.R50("ngModel",a.obj.SelectAllDocuments),e.Y8G("value",a.obj.SelectAllDocuments),e.R7$(4),e.JRh(e.bMT(7,3,"Selectall"))}}function l(r,m){if(1&r&&(e.j41(0,"div",9),e.EFF(1,"\n        "),e.j41(2,"app-pact-tree",10),e.EFF(3,"\n          "),e.DNE(4,C,10,5,"div",11),e.EFF(5,"\n          "),e.DNE(6,s,9,5,"div",12),e.EFF(7,"\n        "),e.k0s(),e.EFF(8,"\n      "),e.k0s()),2&r){const a=e.XpG(2);e.R7$(2),e.Y8G("obj",a.obj.treevm),e.R7$(2),e.Y8G("ngIf",a.obj.CostCenters.Visible),e.R7$(2),e.Y8G("ngIf",a.obj.SelectAllDocVisible)}}function o(r,m){if(1&r&&(e.j41(0,"div",7),e.EFF(1,"\n      "),e.DNE(2,l,9,3,"div",8),e.EFF(3,"\n    "),e.k0s()),2&r){const a=e.XpG();e.R7$(2),e.Y8G("ngIf",a.obj.tree.length>0)}}function t(r,m){1&r&&(e.j41(0,"div",23),e.EFF(1,"\n      "),e.j41(2,"div"),e.EFF(3,"Loading . . ."),e.k0s(),e.EFF(4,"\n    "),e.k0s())}let i=(()=>{class r{get IsMobile(){return n.d.IsMobile}constructor(){this.form=new h.gE({})}ngOnInit(){u.J0.IsEmpty(this.params)||(this.obj=this.params?.obj)}OnButtonClick(a){"OK"==a&&n.d.page.removeActiveTab()}static{this.\u0275fac=function(f){return new(f||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-filter-tree-view"]],inputs:{obj:"obj"},standalone:!1,decls:22,vars:5,consts:[[1,"rptfilter",2,"display","block","flex-direction","column","overflow","auto","padding","5px"],[1,"rpttree_div",2,"display","flex","flex-direction","column"],[1,"CostCenters_select","CCSelect","NoLabel",2,"text-align","right","max-width","100%"],[1,"rptfooterdiv",2,"margin-top","auto"],[1,"primary-btn-wicon",3,"click"],["style","height: 100%;",4,"ngIf"],["class","PACTControl","style","z-index: 20;height: 100%;",4,"ngIf"],[2,"height","100%"],["style","padding-right: 0px !important;height: 100%;",4,"ngIf"],[2,"padding-right","0px !important","height","100%"],[3,"obj"],["class","CostCenters_select mobilerptfilter NoLabel","style","margin: 5px;",4,"ngIf"],["class","divChk treecontent","style","padding: 5px",4,"ngIf"],[1,"CostCenters_select","mobilerptfilter","NoLabel",2,"margin","5px"],["FieldDirective","",3,"obj","group"],["class","primary-btn-wicon",3,"title","click",4,"ngIf"],["class","primary-btn-wicon",3,"click",4,"ngIf"],[1,"primary-btn-wicon",3,"click","title"],[1,"fa-light","fa-arrows-rotate"],[1,"fa-light","fa-gears"],[1,"divChk","treecontent",2,"padding","5px"],["type","checkbox",1,"input_checkbox",3,"ngModelChange","change","ngModel","value"],[1,"input_checkbox_label",3,"click"],[1,"PACTControl",2,"z-index","20","height","100%"]],template:function(f,c){1&f&&(e.EFF(0,"\n"),e.j41(1,"div",0),e.EFF(2,"\n  "),e.j41(3,"div",1),e.EFF(4,"\n    "),e.EFF(5,"\n\n    "),e.j41(6,"div",2),e.EFF(7,"\n      "),e.j41(8,"div",3),e.EFF(9,"\n        "),e.j41(10,"button",4),e.bIt("click",function(){return c.OnButtonClick("OK")}),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.EFF(13,"\n        "),e.EFF(14,"\n      "),e.k0s(),e.EFF(15,"\n    "),e.k0s(),e.EFF(16,"\n  \n\n    "),e.DNE(17,o,4,1,"div",5),e.EFF(18,"\n    \n    "),e.DNE(19,t,5,0,"div",6),e.EFF(20,"\n  "),e.k0s(),e.EFF(21,"\n  \n"),e.k0s()),2&f&&(e.R7$(11),e.JRh(e.bMT(12,3,"Com_OK")),e.R7$(6),e.Y8G("ngIf",c.obj.TreeVisibility),e.R7$(2),e.Y8G("ngIf",!c.obj.TreeVisibility&&!c.obj.ReportLoaded))},encapsulation:2})}}return r})()},17970:(S,_,d)=>{d.d(_,{e3:()=>p,eg:()=>T,mn:()=>D});var h=d(58170),n=d(27730),u=d(84151),e=d(26336);class p extends h.MI{constructor(s=0){super(),this.TextBox=u.Dw.PactTextBoxData_1(0),this.Prefixes=new e.bT,this.onGetData=new h.Yk,this.ComboBox=n.y$.PactComboBoxData1(0),this.RevisionCombo=n.y$.PactComboBoxData1(0),this.NextVisibility=!0,this.PreviousVisibility=!0,this.LoadVisibility=!0,this.DBColumnID=s,this.Mandatory=!1,this.RevisionCombo.Visible=!1}}class T extends h.MI{constructor(s){super(),this.TextBox=u.Dw.PactTextBoxData_1(0),this.ComboBox=n.y$.PactComboBoxData1(0),this.DBColumnID=s}}class D extends h.MI{constructor(){super(),this.ExchangeRate=u.Dw.PactTextBoxData_1(0),this.Currency=n.y$.PactComboBoxData1(0)}}},33784:(S,_,d)=>{d.d(_,{d:()=>D});var h=d(98580),n=d(58170),u=d(32040),e=d(43767),p=d(62099),T=d(61488);class D extends h.g{set ClearSelectedNodes(s){this.tree.length>0&&(this.tree[0].ClearAllSelectedNodes=!this.tree[0].ClearAllSelectedNodes)}constructor(){super(),this.CheckChanged=new n.Yk,this.SelectedNodes=null,this.SelectedNode=null,this.SelectAllDocuments=!1,this.SelectAllDocVisible=!0,this.IReportTree=!0,this.NodeSelectedCallBack=null,this.ReportLoaded=!0,this.ReportWidth="480",this.ReportHeight="430",this.PrefetchReportType=0,this.CheckChanged.Subscribe(this,"onCheckChange")}CommandController(s){"MouseDoubleClick"==s.toString()&&null!=this.SelectedNode&&this.tree[0].SelectNode()}Refresh(){null!=this.tree&&this.tree.length>0&&(this.tree[0].RefreshData=!0)}OnNodeSelected(){let s=null;this.CostCenterFilters.forEach(l=>{l.CostCenterID==this.tree[0].CostCenterID&&l.LookupTypeID==this.tree[0].LookupTypeID&&(s=l)});try{if(null==s&&(s=new p.x(this.tree[0].CostCenterID,this.CostCenters.SelectedItem.Parent,this.CostCenters.SelectedItem.Name,this),this.CostCenterFilters.push(s)),"1"!=u.d.SessionManager.UserID&&"1"!=u.d.SessionManager.RoleID&&this.tree[0].Rows.length>0&&92==this.tree[0].CostCenterID&&(this.SelectedNodes=[],this.tree[0].Rows.forEach(l=>{l.IsSelected&&(l.Text[0]=l.Id.ToString(),this.SelectedNodes.push(l))})),0==this.SelectedNodes.length)s.SelectedNodesTag="",s.DeleteButtonVisibility&&this.CostCenterFilters.Contains(s)&&(s.IsPrePocessFilter||this.CostCenterFilters.Remove(s));else{s.SelectedNodes=this.SelectedNodes;let l="";for(let o=0;o<this.SelectedNodes.length;o++){let t=this.SelectedNodes[o];if(t.Text.length>0&&!e.J0.IsEmpty(t.Text[0])&&(l=""!=l?l+", "+t.Text[0]:t.Text[0],l.length>140)){l+=" . . .";break}}0==l.length&&(l="["+u.d.GetResource("Filter").toString().toUpperCase()+"]"),s.SelectedNodesTag=l}}catch{}null!=this.NodeSelectedCallBack&&this.NodeSelectedCallBack.IsSubscribed&&this.NodeSelectedCallBack.Call()}AddCostCenterFilter(s){try{let l=this.CostCenters.Items.find(i=>i.Value==s.toString()),t=new p.x(s,"",l?l.Name:"",this);this.CostCenterFilters.push(t)}catch{}}onCheckChange(s){if("SelectAllDocuments"==s.toString()||"UnSelectAllDocuments"==s.toString()){if(null!=this.tree&&this.tree.length>0){var l=this.CostCenterFilters.find(t=>t.CostCenterID==this.tree[0].CostCenterID);if(l)l.SelectedNodes.Clear();else{var o=this.CostCenters.Items.find(t=>t.Value==this.tree[0].CostCenterID.toString());l=new p.x(this.tree[0].CostCenterID,"0",o.Name,this),null!=this.tree[0].SelectedNodes?this.SelectedNodes=this.tree[0].SelectedNodes:null==this.SelectedNodes&&(this.SelectedNodes=[]),l.SelectedNodes=this.SelectedNodes,null==this.tree[0].SelectedNodes&&(this.tree[0].SelectedNodes=this.SelectedNodes),this.CostCenterFilters.push(l)}"SelectAllDocuments"==s.toString()?this.tree[0].Rows.forEach(t=>{this.tree[0].SelectNode_1(t,!0)}):this.tree[0].Rows.forEach(t=>{this.tree[0].SelectNode_1(t,!1)}),l.RefreshSelectedNodesText(),this.tree[0].RefreshSelectionText()}this.tree[0].treecomp.gridObj.invalidate()}}static convertFromStringToDate(s){let l=s.split("T"),o=l[0].split("-"),t=l[1].split(":");return new Date(o[0],o[1]-1,o[2],t[0],t[1],t[2])}static FilterData(s,l){for(let o=0;o<l.length;o++){let t=l[o];if("None"!=t.Condition.SelectedValue)if("DATE"==t.DataType)switch(t.Condition.SelectedItem.Parent){case" BETWEEN ":s=s.filter(i=>+i[t.ColumnName].ToServerDate()>=+t.FromDate.Date.OnlyDate()&&+i[t.ColumnName].ToServerDate()<=+t.ToDate.Date.OnlyDate());break;case" NOT BETWEEN ":s=s.filter(i=>i[t.ColumnName].ToServerDate()<+t.FromDate.Date.OnlyDate()&&i[t.ColumnName].ToServerDate()>t.ToDate.Date.OnlyDate());break;case"=":s=s.filter(i=>+i[t.ColumnName].ToServerDate()==+t.FromDate.Date.OnlyDate());break;case"<>":s=s.filter(i=>+i[t.ColumnName].ToServerDate()!=+t.FromDate.Date.OnlyDate());break;case"<":s=s.filter(i=>i[t.ColumnName].ToServerDate()<t.FromDate.Date.OnlyDate());break;case"<=":s=s.filter(i=>+i[t.ColumnName].ToServerDate()<=+t.FromDate.Date.OnlyDate());break;case">":s=s.filter(i=>i[t.ColumnName].ToServerDate()>t.FromDate.Date.OnlyDate());break;case">=":s=s.filter(i=>+i[t.ColumnName].ToServerDate()>=+t.FromDate.Date.OnlyDate())}else if("TIME"==t.DataType)switch(t.Condition.SelectedItem.Parent){case" BETWEEN ":s=s.filter(i=>+e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])>=+t.FromDateTime.Date&&+e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])<=+t.ToDateTime.Date);break;case" NOT BETWEEN ":s=s.filter(i=>e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])<t.FromDateTime.Date&&e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])>t.ToDateTime.Date);break;case"=":s=s.filter(i=>+e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])==+t.FromDateTime.Date);break;case"<>":s=s.filter(i=>+e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])!=+t.FromDateTime.Date);break;case"<":s=s.filter(i=>e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])<t.FromDateTime.Date);break;case"<=":s=s.filter(i=>+e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])<=+t.FromDateTime.Date);break;case">":s=s.filter(i=>e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])>t.FromDateTime.Date);break;case">=":s=s.filter(i=>+e.J0.ParseDate("12/31/1899 "+i[t.ColumnName])>=+t.FromDateTime.Date)}else if(t.FromDropDown.Visible){if(!t.FromDropDown.Items[0].IsChecked){let i=[];t.FromDropDown.Items.forEach(r=>{r.IsChecked&&((""==r.Name||"[NULL]"==r.Name)&&i.push(null),i.push(r.Name))}),s=0==i.length?[]:s.filter("Equal"==t.Condition.SelectedValue?r=>i.Contains(e.J0.String(r[t.ColumnName])):r=>!i.Contains(e.J0.String(r[t.ColumnName])))}}else switch(t.Condition.SelectedItem.Parent){case" BETWEEN ":s=s.filter("FLOAT"==t.DataType?i=>parseFloat(i[t.ColumnName])>=parseFloat(t.FromValue.TextBox.Text)&&parseFloat(i[t.ColumnName])<=parseFloat(t.ToValue.Text):"INT"==t.DataType?i=>parseInt(i[t.ColumnName])>=parseInt(t.FromValue.TextBox.Text)&&parseInt(i[t.ColumnName])<=parseInt(t.ToValue.Text):i=>i[t.ColumnName]>=t.FromValue.TextBox.Text&&i[t.ColumnName]<=t.ToValue.Text);break;case" NOT BETWEEN ":s=s.filter("FLOAT"==t.DataType?i=>parseFloat(i[t.ColumnName])<parseFloat(t.FromValue.TextBox.Text)||parseFloat(i[t.ColumnName])>parseFloat(t.ToValue.Text):"INT"==t.DataType?i=>parseInt(i[t.ColumnName])<parseInt(t.FromValue.TextBox.Text)||parseInt(i[t.ColumnName])>parseInt(t.ToValue.Text):i=>i[t.ColumnName]<t.FromValue.TextBox.Text||i[t.ColumnName]>t.ToValue.Text);break;case" LIKE ":s=s.filter(i=>-1!=e.J0.String(i[t.ColumnName]).toLowerCase().indexOf(t.FromValue.TextBox.Text.toLowerCase()));break;case" NOT LIKE ":s=s.filter(i=>-1==e.J0.String(i[t.ColumnName]).toLowerCase().indexOf(t.FromValue.TextBox.Text.toLowerCase()));break;case"BeginsWith":s=s.filter(i=>e.J0.String(i[t.ColumnName]).toLowerCase().startsWith(t.FromValue.TextBox.Text.toLowerCase()));break;case"EndsWith":s=s.filter(i=>e.J0.String(i[t.ColumnName]).toLowerCase().endsWith(t.FromValue.TextBox.Text.toLowerCase()));break;case"=":s=s.filter("FLOAT"==t.DataType?i=>i[t.ColumnName]==parseFloat(t.FromValue.TextBox.Text):"INT"==t.DataType?i=>i[t.ColumnName]==parseInt(t.FromValue.TextBox.Text):i=>i[t.ColumnName]==t.FromValue.TextBox.Text);break;case"<>":s=s.filter("FLOAT"==t.DataType?i=>i[t.ColumnName]!=parseFloat(t.FromValue.TextBox.Text):"INT"==t.DataType?i=>i[t.ColumnName]!=parseInt(t.FromValue.TextBox.Text):i=>i[t.ColumnName]!=t.FromValue.TextBox.Text);break;case"<":"FLOAT"==t.DataType?s=s.filter(i=>i[t.ColumnName]<parseFloat(t.FromValue.TextBox.Text)):"INT"==t.DataType&&(s=s.filter(i=>i[t.ColumnName]<parseInt(t.FromValue.TextBox.Text)));break;case"<=":"FLOAT"==t.DataType?s=s.filter(i=>i[t.ColumnName]<=parseFloat(t.FromValue.TextBox.Text)):"INT"==t.DataType&&(s=s.filter(i=>i[t.ColumnName]<=parseInt(t.FromValue.TextBox.Text)));break;case">":"FLOAT"==t.DataType?s=s.filter(i=>i[t.ColumnName]>parseFloat(t.FromValue.TextBox.Text)):"INT"==t.DataType&&(s=s.filter(i=>i[t.ColumnName]>parseInt(t.FromValue.TextBox.Text)));break;case">=":"FLOAT"==t.DataType?s=s.filter(i=>i[t.ColumnName]>=parseFloat(t.FromValue.TextBox.Text)):"INT"==t.DataType&&(s=s.filter(i=>i[t.ColumnName]>=parseInt(t.FromValue.TextBox.Text)))}}return s}OnPrefetchButtonClick(s){"RefreshReport"==s?null!=this.CostCenters.SelectedItem&&50==parseInt(this.CostCenters.SelectedValue)&&this.Report.length>0&&this.Report[0].Refresh():"RegenerateReport"==s?null!=this.CostCenters.SelectedItem&&50==parseInt(this.CostCenters.SelectedValue)&&this.Report.length>0&&(this.ReportWidth="",this.ReportHeight="505",this.Report[0].OnButtonClick("Regenerate")):"SelectAllReportRows"==s&&null!=this.CostCenters.SelectedItem&&50==parseInt(this.CostCenters.SelectedValue)&&this.Report.length>0&&this.Report[0].OnRowDoubleClick(new T.Ji(1),-100)}}},62099:(S,_,d)=>{d.d(_,{x:()=>D});var h=d(69883),n=d(32040),u=d(11592),e=d(43767),p=d(3330),T=d(78751);class D{get CostCenter(){return this._CostCenter.toUpperCase()}set CostCenter(s){s!=this._CostCenter&&(this._CostCenter=s)}get IsGroupLevel(){return this._IsGroupLevel}set IsGroupLevel(s){if(this._IsGroupLevel=s,s&&3==this.CostCenterID&&1==this.SelectedNodes.length){let l,o=n.d.report.GetSubNodeNames(this.CostCenterID,this.SelectedNodes[0].Id.toString()),t="";this.SelectedNodes.Clear(),null!=o&&null!=o[0].PK&&(o.forEach(r=>{l=new h.n,l.Id=parseInt(r.PK),l.Text.push(r.Name.toString()),this.SelectedNodes.push(l),t.length<140&&(""!=t&&(t+=", "),t+=l.Text[0])}),t.length>=140&&(t+=" . . .")),0==this.SelectedNodes.length&&(l=new h.n,l.Id=-12342,l.Text.push("["+n.d.GetResource("Filter").toString().toUpperCase()+"]"),this.SelectedNodes.push(l)),this.SelectedNodesTag=t}}constructor(s,l,o,t){this.ClassName="CostCenterFilter",this.CostCenterID=0,this.LookupTypeID=0,this.ParentReportFilterCostCenterID=0,this.Tag=null,this.SelectedNodes=null,this.ViewModel=null,this.DeleteButtonVisibility=!0,this.IsVisible=!0,this._IsGroupLevel=!1,this.IsGroupLevelVisible=!1,this.IsPrePocessFilter=!1,this.PrePocessFilterVisible=!1,this.IsPreProcessQueryVisible=!1,this.SelectedNodesTag=null,this.IsDynamicTree=!1,this.IsOneSelected=!1,this.IsGroupExists=!1,this.HideFilter=new u.c(0),this.HideFilter.Visible=!1,"AddEditFilterViewModel"==t.ClassName&&(t.IsReportViewScreen||(this.HideFilter.Visible=!0)),this.CostCenterID=s,this.CostCenter=o,this.ViewModel=t,e.J0.IsEmpty(l)||(this.LookupTypeID=e.J0.Int(l)),""!=n.d.SessionManager.Preferences.DynamicTrees&&("AddEditFilterViewModel"==t.ClassName&&-1==t.ParentViewModel.StaticReportType||"ReOrderLevelNewViewModel"==t.ClassName&&t.ApplyDefaultTreeViewFilter?this.IsDynamicTree=!1:n.d.SessionManager.Preferences.DynamicTrees.split(",").Contains(s.toString())&&(this.IsDynamicTree=!0))}OnButtonClick(s,l=null){if(l&&(l.preventDefault(),l.stopPropagation()),"Delete"==s){let o=0;if(null!=this.ViewModel.CostCenters.SelectedItem&&!e.J0.IsEmpty(this.ViewModel.CostCenters.SelectedItem.Parent)&&(o=e.J0.Int(this.ViewModel.CostCenters.SelectedItem.Parent)),50==this.CostCenterID){if(this.SelectedNodesTag="","ReOrderLevelNewViewModel"==this.ViewModel.ClassName&&this.ViewModel.Report.length>0){let t=this.ViewModel;for(let i=this.SelectedNodes.length-1;i>=0;i--)t.Report[0].OnRowDoubleClick(this.SelectedNodes[i].Tag,-1);t.Report[0].Preferences.ContainsKey("UseBomInReorder")&&(t.BOMGrid.Visible=!1)}else"AddEditFilterViewModel"==this.ViewModel.ClassName&&this.ViewModel.CostCenterFilters.Remove(this);return void this.SelectedNodes.Clear()}parseInt(this.ViewModel.CostCenters.SelectedValue)==this.CostCenterID&&o==this.LookupTypeID&&this.ViewModel.tree.length>0&&(null!=this.ViewModel.tree[0].SelectedNodes&&this.ViewModel.tree[0].SelectedNodes.Clear(),this.SelectedNodesTag="",this.ViewModel.tree[0].RefreshData=!0),"AddEditFilterViewModel"==this.ViewModel.ClassName?n.d.IsMobile?(this.SelectedNodesTag="",this.SelectedNodes.Clear(),this.ViewModel.CostCenterFilters.Remove(this)):this.ViewModel.IsReportViewScreen?(this.SelectedNodesTag="",this.SelectedNodes.Clear()):this.ViewModel.CostCenterFilters.Remove(this):"StaticReportFilterViewModel"==this.ViewModel.ClassName?(this.SelectedNodesTag="",this.SelectedNodes.Clear()):null!=this.ViewModel&&"AddPriceChartNewViewModel"==this.ViewModel.ClassName||null!=this.ViewModel&&"AddTaxChartNewViewModel"==this.ViewModel.ClassName?0==this.ViewModel.ProfileID?this.ViewModel.CostCenterFilters.Remove(this):(this.SelectedNodesTag="",this.SelectedNodes.Clear()):this.ViewModel.CostCenterFilters.Remove(this)}else{let o=0;if(null!=this.ViewModel.CostCenters.SelectedItem&&!e.J0.IsEmpty(this.ViewModel.CostCenters.SelectedItem.Parent)&&(o=e.J0.Int(this.ViewModel.CostCenters.SelectedItem.Parent)),parseInt(this.ViewModel.CostCenters.SelectedValue)!=this.CostCenterID||o!=this.LookupTypeID)if(44==this.CostCenterID||50==this.CostCenterID){let t=this.ViewModel.CostCenters.Items.find(i=>i.Value==this.CostCenterID.toString()&&i.Parent==this.LookupTypeID.toString());t&&(this.ViewModel.CostCenters.SelectedValue=this.CostCenterID.toString(),this.ViewModel.CostCenters.SelectedItem=t)}else this.ViewModel.CostCenters.SelectedValue=this.CostCenterID.toString();else if(0==this.ViewModel.tree.length)("StaticReportFilterViewModel"==this.ViewModel.ClassName||"AddEditFilterViewModel"==this.ViewModel.ClassName)&&this.ViewModel.OnCostCenterChange(this.ViewModel.CostCenters.SelectedValue);else if(null!=this.SelectedNodes&&this.SelectedNodes.length>0&&null!=this.ViewModel.tree&&this.ViewModel.tree.length>0){this.ViewModel.tree[0].SelectedNode=null;let t=this.ViewModel.tree[0].AllNodes.filter(i=>i.Id==this.SelectedNodes[0].Id);t.length>0&&this.ViewModel.tree[0].SelectSearchNode(t)}n.d.IsMobile&&("StaticReportFilterViewModel"==this.ViewModel.ClassName?n.d.page.addNewTab({title:this._CostCenter,component:T.j,params:{obj:this.ViewModel}}):"AddEditFilterViewModel"==this.ViewModel.ClassName&&n.d.page.addNewTab({title:this._CostCenter,component:p.f,params:{obj:this.ViewModel}}))}}RefreshSelectedNodesText(){let s="";for(let l=0;l<this.SelectedNodes.length;l++){let o=this.SelectedNodes[l];if(o.Text.length>0&&!e.J0.IsEmpty(o.Text[0])&&(s=""!=s?s+", "+o.Text[0]:o.Text[0],s.length>140)){s+=" . . .";break}}this.SelectedNodesTag=s}GetSeqNosListWithRoots(s=!1){if(this.IsOneSelected=this.IsGroupExists=!1,null==this.SelectedNodes)return"";let l="";return this.IsDynamicTree?this.SelectedNodes.forEach(o=>{s?o.IsGroup||(l+=o.Id+","):(o.IsGroup&&(this.IsGroupExists=!0),l+=o.Id+",")}):(this.SelectedNodes.forEach(o=>{null!=o.Parent&&o.Parent.IsSelected?this.IsGroupExists=!0:l+=o.Id+","}),0==this.SelectedNodes.length&&s&&null!=this.ViewModel.tree&&this.ViewModel.tree.length>0&&this.ViewModel.tree[0].Rows.forEach(o=>{null!=o.Parent&&o.Parent.IsSelected?this.IsGroupExists=!0:o.IsGroup||(l+=o.Id+",")})),l.length>0&&(l=l.substr(0,l.length-1),this.SelectedNodes.filter(o=>1==o.Id).length>0&&(this.IsOneSelected=!0)),l.toString()}SetSelectedNodes(s){this.SelectedNodes=[];let l,o=e.VB.SelectSingleNodeText(s,"DefaultValues");if(o.length>0){l=o.split(",");let r,t=e.VB.SelectSingleNode(s,"GroupNodes"),i=null;null!=t?(r=t.innerHTML.split(","),null==t.attributes.IsStatic&&(i=n.d.report.GetGrouplft_rgt(this.CostCenterID,e.VB.SelectSingleNodeText(s,"GroupNodes")))):r=[];for(let m=0;m<l.length;m++){let a=new h.n;if(a.Id=parseInt(l[m]),a.IsSelected=!0,r.Contains(l[m])&&(a.IsGroup=!0,null!=i)){let f=i.filter(c=>c.ID==l[m]);f.length>0&&(a.lft=parseInt(f[0].lft),a.rgt=parseInt(f[0].rgt))}a.Text.push(l[m]),this.SelectedNodes.push(a)}}else if(7==this.CostCenterID){l=[n.d.SessionManager.UserID.toString()];let t=new h.n;t.Id=parseInt(l[0]),t.IsSelected=!0,t.Text.push(n.d.SessionManager.UserName),this.SelectedNodes.push(t)}else l=[];if("AddEditFilterViewModel"!=this.ViewModel.ClassName||"AddEditReportViewModel"!=this.ViewModel.ParentViewModel.ClassName)if(50001==this.CostCenterID){if("True"==n.d.SessionManager.Preferences.EnableDivisionWise.toString()&&"True"==n.d.SessionManager.Preferences["DW Reports"]&&(!n.d.SessionManager.IsEmpUser||!n.d.SessionManager.IsActionAssigned(50051,"Override Division wise"))&&(this.DeleteButtonVisibility=!1,0==this.SelectedNodes.length&&n.d.SessionManager.DivisionID>0)){let t=new h.n;t.Id=n.d.SessionManager.DivisionID,t.IsSelected=!0,t.Text.push(n.d.SessionManager.DivisionName),this.SelectedNodes.push(t),this.SelectedNodesTag=n.d.SessionManager.DivisionName}}else if(50002==this.CostCenterID){let t=!1;try{"StaticReportFilterViewModel"==this.ViewModel.ClassName?t=this.ViewModel.ViewModel.ShowLocationFilter:"AddEditFilterViewModel"==this.ViewModel.ClassName&&(t=this.ViewModel.oReport.ShowLocationFilter)}catch{}if(("True"==n.d.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==n.d.SessionManager.Preferences["LW Reports"]||t)&&(!n.d.SessionManager.IsEmpUser||!n.d.SessionManager.IsActionAssigned(50051,"Override Location wise"))&&(this.DeleteButtonVisibility=!1,0==this.SelectedNodes.length&&n.d.SessionManager.LocationID>0)){let i=new h.n;i.Id=n.d.SessionManager.LocationID,i.IsSelected=!0,i.Text.push(n.d.SessionManager.LocationName),this.SelectedNodes.push(i),this.SelectedNodesTag=n.d.SessionManager.LocationName}}if(this.SelectedNodes.length>0&&(this.SelectedNodesTag="["+n.d.GetResource("Filter").toString().toUpperCase()+"]",7==this.CostCenterID&&e.VB.SelectSingleNodeText(s,"DefaultValues").length>0)){let t=n.d.report.GetUsers(e.VB.SelectSingleNodeText(s,"DefaultValues"));this.SelectedNodes.Clear(),t.forEach(i=>{let r=new h.n;r.Id=parseInt(i.UserID),r.IsSelected=!0,r.Text.push(i.UserName.toString()),this.SelectedNodes.push(r)}),this.RefreshSelectedNodesText()}null!=e.VB.SelectSingleNode(s,"HideInReport")&&"1"==e.VB.SelectSingleNodeText(s,"HideInReport")?(this.HideFilter.IsChecked=!0,("AddEditFilterViewModel"!=this.ViewModel.ClassName||"AddEditFilterViewModel"==this.ViewModel.ClassName&&this.ViewModel.IsReportViewScreen)&&(this.IsVisible=!1)):this.HideFilter.IsChecked=!1,"AddEditFilterViewModel"==this.ViewModel.ClassName&&this.ViewModel.IsReportViewScreen&&this.ViewModel.ParentViewModel.IsPreProcessQuery&&null==e.VB.SelectSingleNode(s,"IsPrePocessFilter")&&(this.IsVisible=!1),this.IsPrePocessFilter=null!=e.VB.SelectSingleNode(s,"IsPrePocessFilter")}}},78751:(S,_,d)=>{d.d(_,{j:()=>D});var h=d(11798),n=d(32040),u=d(43767),e=d(96598);function p(C,s){1&C&&(e.j41(0,"app-pact-tree",8),e.EFF(1,"\n      "),e.k0s()),2&C&&e.Y8G("obj",s.$implicit)}function T(C,s){if(1&C&&(e.j41(0,"div",6),e.EFF(1,"\n      "),e.DNE(2,p,2,1,"app-pact-tree",7),e.EFF(3,"\n    "),e.k0s()),2&C){const l=e.XpG();e.R7$(2),e.Y8G("ngForOf",l.obj.tree)}}let D=(()=>{class C{get IsMobile(){return n.d.IsMobile}constructor(){this.form=new h.gE({})}ngOnInit(){u.J0.IsEmpty(this.params)||(this.obj=this.params?.obj)}OnButtonClick(l){"OK"==l&&n.d.page.removeActiveTab()}static{this.\u0275fac=function(o){return new(o||C)}}static{this.\u0275cmp=e.VBU({type:C,selectors:[["app-static-filter-tree-view"]],inputs:{obj:"obj"},standalone:!1,decls:17,vars:4,consts:[[1,"rptfilter",2,"display","block","flex-direction","column","overflow","auto","padding","5px"],[1,"rpttree_div",2,"display","flex","flex-direction","column"],[1,"CostCenters_select","CCSelect","NoLabel",2,"text-align","right","max-width","100%"],[1,"rptfooterdiv",2,"margin-top","auto"],[1,"primary-btn-wicon",3,"click"],["style","padding-right: 0px !important;height: calc(100% - 35px);width: 100%;",4,"ngIf"],[2,"padding-right","0px !important","height","calc(100% - 35px)","width","100%"],[3,"obj",4,"ngFor","ngForOf"],[3,"obj"]],template:function(o,t){1&o&&(e.j41(0,"div",0),e.EFF(1,"\n  "),e.j41(2,"div",1),e.EFF(3,"\n\n\n    "),e.j41(4,"div",2),e.EFF(5,"\n      "),e.j41(6,"div",3),e.EFF(7,"\n        "),e.j41(8,"button",4),e.bIt("click",function(){return t.OnButtonClick("OK")}),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.EFF(11,"\n      "),e.k0s(),e.EFF(12,"\n    "),e.k0s(),e.EFF(13,"\n\n\n    "),e.DNE(14,T,4,1,"div",5),e.EFF(15,"\n  "),e.k0s(),e.EFF(16,"\n\n"),e.k0s()),2&o&&(e.R7$(9),e.JRh(e.bMT(10,2,"Com_OK")),e.R7$(5),e.Y8G("ngIf",t.obj.tree.length>0))},encapsulation:2})}}return C})()}}]);
"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[7555],{87555:(m,h,e)=>{e.r(h),e.d(h,{QuickAddBudgetViewModel:()=>B});var t=e(32040),n=e(98580),D=e(71434),r=e(84151),a=e(27730),c=e(33358),g=e(7074);class B extends n.g{constructor(s,i,_,o,S){super(),this.BudgetDefID=0,this.SelectedNodeID=0,this.ParentID=0,this.DataCollection=null,this.DetailButtonVisibility=!1,this.Name=new r.Dw(0),this.Status=new a.y$(0),this.Group=new a.y$(0),this.DataCollection=new D.t,this.BudgetDefID=s,this.DataCollection.isGroup=o,this.SelectedNodeID=i,this.parent=_,this.ParentID=S,this.Status.Items.push(a._p.ComboBoxItems_2(t.d.GetResource("Budget_InActive"),"0")),this.Status.Items.push(a._p.ComboBoxItems_2(t.d.GetResource("Budget_Active"),"1")),this.Status.SelectedValue="1",this.DetailButtonVisibility=!o,this.Title=t.d.GetResource(o?s>0?"Budget_EditGroup":"Budget_AddGroup":s>0?"Budget_EditBudget":"Budget_AddBudget"),this.Name.Label=t.d.GetResource("Budget_Name"),this.Status.Label=t.d.GetResource("Budget_Status"),this.Group.Label=t.d.GetResource("Budget_Group");let l=this.DataCollection.GetBudgetScreenDetails(0,0);if(l.Tables.length>1&&l.Tables[1].length>0)for(let d=0;d<l.Tables[1].length;d++)this.Group.Items.push(a._p.ComboBoxItems_2(l.Tables[1][d].BudgetName.toString(),l.Tables[1][d].BudgetDefID.toString()));this.Group.SelectedValue=this.ParentID.toString(),"0"==this.SelectedNodeID.toString()&&(this.Group.SelectedValue="1");let u=this.DataCollection.GetBudgetScreenDetails(0,this.BudgetDefID);s>0&&(this.Name.Text=u.Tables[0][0].BudgetName.toString(),this.Status.SelectedValue=u.Tables[0][0].StatusID.toString(),this.DataCollection.NumDimensions=parseInt(u.Tables[0][0].NumDimensions))}OnSaveBudget(s){if("Cancel"==s.toString())this.parent.AddEditBudgetVisibility=!1,this.parent.DetailsVisibility=!0;else if("Save"==s.toString()){if(""==this.Name.Text||null==this.Name.Text)return void(this.DisplayMessage="Enter Name");this.DataCollection.BudgetName=this.Name.Text,this.DataCollection.StartYear=Date.Today(),this.DataCollection.Status=parseInt(this.Status.SelectedValue),this.DataCollection.Budgetid=this.BudgetDefID,this.DataCollection.BudgetTypeID=parseInt("0"),this.DataCollection.BudgetType="Annual",this.DataCollection.SelectedNodeID=this.SelectedNodeID;let i=this.DataCollection.SaveBudgetScreenDetails();this.DisplayMessage=i.Message,i.RetValue>0&&(this.Name.Text="",this.Status.SelectedValue="1",this.parent.Refresh())}else{let i=new c.AddEditBudgetViewModel(this.BudgetDefID,this.SelectedNodeID,this.DataCollection.isGroup,this.ParentID);t.d.page.addNewTab({title:this.ScreenName,component:g.AddEditBudgetComponent,params:{obj:i}})}}}}}]);
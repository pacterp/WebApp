"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[3883],{51502:(L,c,h)=>{h.r(c),h.d(c,{DimensionWiseLockViewModel:()=>M});var p=h(74523),l=h(32040),a=h(43767),g=h(67557),I=h(7321),b=h(27730),y=h(21774),f=h(98580),C=h(1387),T=h(42607);class M extends f.g{constructor(){super(),this.DateText="",this.UpdateVisible=!1,this.Filter=0,this.Locations="",this.SortOn="",this.FilterOn="",this.Status="0",this.DocumentPicked="",this.FromDate=new Date,this.ToDate=new Date,this.strSelect="",this.strJoin="",this.dt=[],this.RetVal=0,this.lstBasicColumns=[],this.ScreenObject=new g.a(130,0),Logger.InfoLog("DimensionWiseLockViewModel:: Inside onLoad  "),this.DisplayName=l.d.GetResource("DimensionWiseLock"),this.DimensionLockGrid=new I.vv,this.DimensionLockGrid.IsReadOnly=!0,this.DimensionLockGrid.Width="",this.DimensionLockGrid.OnLinkClick.Subscribe(this,"OnGridLinkClick"),this.DimensionLockGrid.Columns=[],this.DimensionLockGrid.SearchVisible=!0,this.DimensionLockGrid.SearchColStartIndex=1,this.EntryGrid=new I.vv,this.EntryGrid.Width="",this.EntryGrid.OnLinkClick.Subscribe(this,"OnEntryGridLinkClick"),this.EntryGrid.OnBeginEdit.Subscribe(this,"OnEntryGridBeginEdit"),this.EntryGrid.CanUserDeleteRows=!0,this.EntryGrid.Columns=[],this.UpdateVisible=l.d.SessionManager.IsActionAssigned(130,"Edit"),this.InitControls(),this.LoadData(),Logger.InfoLog("DimensionWiseLockViewModel:: Exiting onLoad  ")}InitControls(){Logger.InfoLog("DimensionWiseLockViewModel:: Inside InitColumns");let i=l.d.common.SetDimensionWiseLockData(1,"");this.ds=i,this.RetVal=i.obj,this.DimensionLockGrid.TableColumns.push("NodeID"),this.DimensionLockGrid.TableColumns.push("Sno"),this.DimensionLockGrid.TableColumns.push("Action"),this.DimensionLockGrid.TableColumns.push("Option"),this.DimensionLockGrid.TableColumns.push("Delete"),this.DimensionLockGrid.TableColumns.push("FromDate"),this.DimensionLockGrid.TableColumns.push("FromDate_Key"),this.DimensionLockGrid.TableColumns.push("ToDate"),this.DimensionLockGrid.TableColumns.push("ToDate_Key"),this.DimensionLockGrid.TableColumns.push("DocumentID"),this.DimensionLockGrid.TableColumns.push("isEnable");let e,n=new Array,s=new Array;if(l.d.SessionManager.Preferences.ContainsKey("DimensionWiseLockData Screen Widths")&&""!=l.d.SessionManager.Preferences["DimensionWiseLockData Screen Widths"]){let o=new a.VB;o.LoadXml(l.d.SessionManager.Preferences["DimensionWiseLockData Screen Widths"]),o.DocumentElement.childNodes.forEach(D=>{e=new y.O7,e.Header=D.attributes.Header.value,e.DisplayMember=D.attributes.Name.value,e.DisplayIndex=parseInt(D.attributes.index.value),e.Width=parseInt(D.attributes.WIDTH.value),n.push(e)})}e=new y.O7,e.Header=l.d.GetResource("DocumentDesigner_Sno"),e.DisplayMember="Sno",e.ReadOnly=!0,e.IsFrozen=!0,e.Width=45;var t=n.find(o=>o.DisplayMember==e.DisplayMember);null!=t&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("Service_Action"),e.DisplayMember="Action",e.DataType="LINK",e.ReadOnly=!0,e.IsFrozen=!0,e.Width=50,null!=(t=n.find(o=>o.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("Unapprove/Approve Docs"),e.DisplayMember="Option",e.DataType="LINK",e.ReadOnly=!0,e.IsFrozen=!0,e.Width=50,null!=(t=n.find(o=>o.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("Delete"),e.DisplayMember="Delete",e.ID="Delete",e.DataType="LINK",e.IsVisible=!1,e.ReadOnly=!0,e.IsFrozen=!0,e.Width=50,null!=(t=n.find(o=>o.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("Vehicle_Enable"),e.ValueBinding="isEnable",e.DisplayMember="Name",e.ValueMember="Value",e.ReadOnly=!1,e.DataType="ComboBox",e.Width=50;let d=new Array;d.push(b._p.ComboBoxItems_2(l.d.GetResource("Com_Yes"),"True")),d.push(b._p.ComboBoxItems_2(l.d.GetResource("Com_No"),"False")),e.ComboData=d,null!=(t=n.find(o=>o.DisplayMember==e.ValueBinding))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("FromDate"),e.DisplayMember="FromDate",e.ReadOnly=!1,e.DataType="DATE",e.Width=80,null!=(t=n.find(o=>o.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("ToDate"),e.DisplayMember="ToDate",e.ReadOnly=!1,e.DataType="DATE",e.Width=80,null!=(t=n.find(o=>o.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),e=new y.O7,e.Header=l.d.GetResource("Doc_Document"),e.DisplayMember="Name",e.ValueMember="Value",e.ValueBinding="DocumentID",e.DataType="ComboBox";let u=new Array;if(u.push(b._p.ComboBoxItems_2("","1")),null!=this.ds&&this.ds.Tables.length>1)for(let o=0;o<this.ds.Tables[1].length;o++)u.push(b._p.ComboBoxItems_2(this.ds.Tables[1][o].DocumentName.toString(),this.ds.Tables[1][o].CostCenterID.toString()));e.ComboData=u,e.Width=80,null!=(t=n.find(o=>o.DisplayMember==e.ValueBinding))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e);let m=new a.VB;m.LoadXml(l.d.SessionManager.Preferences["DimensionWiseLockData Customize Screen"]),m.DocumentElement.childNodes.forEach(o=>{"DIM"==o.attributes.Type.value?(e=new y.O7,e.Header=o.attributes.Header.value,e.DisplayMember="DIM"+o.attributes.ID.value,e.ValueMember="DIM"+o.attributes.ID.value+"_Key",e.CostCenterID=parseInt(o.attributes.ID.value),e.ReadOnly=!1,e.Width=100,e.DataType="LISTBOX",e.TypeID=1,null!=(t=n.find(D=>D.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),this.DimensionLockGrid.TableColumns.push("DIM"+o.attributes.ID.value),this.DimensionLockGrid.TableColumns.push("DIM"+o.attributes.ID.value+"_Key")):("2"==o.attributes.ID.value||"3"==o.attributes.ID.value)&&(e=new y.O7,e.Header=o.attributes.Header.value,e.DisplayMember=o.attributes.Header.value+"ID",e.ValueMember=o.attributes.Header.value+"ID_Key",e.CostCenterID=parseInt(o.attributes.ID.value),2==parseInt(o.attributes.ID.value)?e.TypeID=105:3==parseInt(o.attributes.ID.value)&&(e.TypeID=10),e.DataType="LISTBOX",e.ReadOnly=!1,e.Width=150,null!=(t=n.find(D=>D.DisplayMember==e.DisplayMember))&&null!=t?(e.DisplayIndex=t.DisplayIndex,e.Width=t.Width):n.length>0&&(e.IsVisible=!1),s.push(e),this.DimensionLockGrid.TableColumns.push(o.attributes.Header.value+"ID"),this.DimensionLockGrid.TableColumns.push(o.attributes.Header.value+"ID_Key"))}),s.sort((o,D)=>o.DisplayIndex-D.DisplayIndex).forEach(o=>{this.lstBasicColumns.push(o)});for(let o=0;o<20;o++){let D=this.DimensionLockGrid.NewRow();this.DimensionLockGrid.addRow(D)}Logger.InfoLog("DimensionWiseLockViewModel:: Exiting InitColumns")}LoadData(){if(this.AddColumns(),null!=this.ds&&this.ds.Tables.length>0)for(let i=0;i<this.ds.Tables[0].length;i++)this.DimensionLockGrid.Table.length-1<=i&&(this.DimensionLockGrid.addEmptyRow(),this.DimensionLockGrid.addEmptyRow(),this.DimensionLockGrid.addEmptyRow()),this.DimensionLockGrid.Table[i].NodeID=this.ds.Tables[0][i].NodeID,this.DimensionLockGrid.Table[i].Sno=(i+1).toString(),this.DimensionLockGrid.Table[i].Action="Edit",this.DimensionLockGrid.Table[i].Delete="Delete",this.DimensionLockGrid.Table[i].isEnable=this.ds.Tables[0][i].isEnable,a.J0.IsEmpty(this.ds.Tables[0][i].FromDate)||(this.DimensionLockGrid.Table[i].FromDate=!l.d.SessionManager.Preferences.ContainsKey("Date Format")||a.J0.IsEmpty(l.d.SessionManager.Preferences["Date Format"])||a.J0.IsEmpty(this.ds.Tables[0][i].FromDate)?a.J0.ParseDate(this.ds.Tables[0][i].FromDate_Key.toString()).ToString("dd/MMM/yyyy"):a.J0.ParseDate(this.ds.Tables[0][i].FromDate_Key.toString()).ToString(l.d.SessionManager.Preferences["Date Format"]),this.DimensionLockGrid.Table[i].FromDate_Key=this.ds.Tables[0][i].FromDate_Key),a.J0.IsEmpty(this.ds.Tables[0][i].ToDate)||(this.DimensionLockGrid.Table[i].ToDate=!l.d.SessionManager.Preferences.ContainsKey("Date Format")||a.J0.IsEmpty(l.d.SessionManager.Preferences["Date Format"])||a.J0.IsEmpty(this.ds.Tables[0][i].ToDate)?a.J0.ParseDate(this.ds.Tables[0][i].ToDate_Key.toString()).ToString("dd/MMM/yyyy"):a.J0.ParseDate(this.ds.Tables[0][i].ToDate_Key.toString()).ToString(l.d.SessionManager.Preferences["Date Format"]),this.DimensionLockGrid.Table[i].ToDate_Key=this.ds.Tables[0][i].ToDate_Key),"1"!=a.J0.String(this.ds.Tables[0][i].DocumentID)&&(this.DimensionLockGrid.Table[i].DocumentID=this.ds.Tables[0][i].DocumentID.toString()),this.DimensionLockGrid.Columns.forEach(e=>{2==e.CostCenterID?"1"!=this.ds.Tables[0][i].AccountID.toString()&&(this.DimensionLockGrid.Table[i].AccountID_Key=this.ds.Tables[0][i].AccountID.toString()):3==e.CostCenterID?"1"!=this.ds.Tables[0][i].ProductID.toString()&&(this.DimensionLockGrid.Table[i].ProductID_Key=this.ds.Tables[0][i].ProductID.toString()):e.CostCenterID>5e4&&(this.DimensionLockGrid.Table[i]["DIM"+e.CostCenterID.toString()+"_Key"]=this.ds.Tables[0][i]["CCNID"+(e.CostCenterID-5e4)].toString())});this.DimensionLockGrid.RefreshGrid=!this.DimensionLockGrid.RefreshGrid}AddColumns(){let i=[];for(let n=0;n<this.lstBasicColumns.length;n++)i.push(this.lstBasicColumns[n]);let e=[];i.forEach(n=>{let s=new y.O7;s.ID=n.ID,s.Header=n.Header,s.DisplayMember=n.DisplayMember,s.ValueMember=n.ValueMember,s.ValueBinding=n.ValueBinding,s.ComboData=n.ComboData,s.ReadOnly=n.ReadOnly,s.DataType=n.DataType,s.CostCenterID=n.CostCenterID,s.Width=n.Width,s.DecimalPoints=n.DecimalPoints,s.TypeID=n.TypeID,s.ShowRootDimension=!0,s.IsVisible=n.IsVisible,e.push(s),this.UpdateVisible&&"Delete"!=n.DisplayMember&&"Action"!=n.DisplayMember&&"Option"!=n.DisplayMember&&"Sno"!=n.DisplayMember?s.ReadOnly=!1:s.ReadOnly||(s.ReadOnly=!0),"Delete"==s.ID&&(s.IsVisible=!0)}),this.DimensionLockGrid.Columns=e,this.EntryGrid.Columns=i,this.ClearEntryGrid()}EntryGrid_RowDeleted(i,e){let n=this.EntryGrid.NewRow();n.Action="Submit",n.Option="View",this.EntryGrid.addRow(n),this.EntryGrid.SelectedIndex=this.EntryGrid.Table.indexOf(n)}ButtonSave(i){if(this.EntryGrid.angularGrid&&this.EntryGrid.angularGrid.slickGrid.getEditorLock().commitCurrentEdit(),Logger.InfoLog("DimensionWiseLockViewModel:: Inside ButtonSave sender ="+i.toString()),"Customize"!=i&&"Update"==i){let e="";e+="<DimensionWiseLockXML>";let n=this.DimensionLockGrid.Table;for(let t=0;t<n.length;t++)!a.J0.IsEmpty(n[t].FromDate_Key)&&!a.J0.IsEmpty(n[t].ToDate_Key)&&(e+="<Rows ",e+='NodeID="'+a.J0.String(n[t].NodeID)+'" ',this.DimensionLockGrid.TableColumns.Contains("isEnable")&&!a.J0.IsEmpty(n[t].isEnable)?e+='isEnable="'+a.J0.String(n[t].isEnable)+'" ':e+='isEnable="1" ',this.DimensionLockGrid.TableColumns.Contains("FromDate_Key")&&!a.J0.IsEmpty(n[t].FromDate_Key)?e+='FromDate="'+a.J0.ParseDate(n[t].FromDate_Key).ToString("dd/MMM/yyyy")+'" ':e+='FromDate="'+this.FromDate.ToString("dd/MMM/yyyy")+'" ',this.DimensionLockGrid.TableColumns.Contains("ToDate_Key")&&!a.J0.IsEmpty(n[t].ToDate_Key)?e+='ToDate="'+a.J0.ParseDate(n[t].ToDate_Key).ToString("dd/MMM/yyyy")+'" ':e+='ToDate="'+this.ToDate.ToString("dd/MMM/yyyy")+'" ',this.DimensionLockGrid.TableColumns.Contains("DocumentID")&&!a.J0.IsEmpty(n[t].DocumentID)?e+=' DocumentID="'+a.J0.String(n[t].DocumentID)+'" ':e+=' DocumentID="1" ',this.DimensionLockGrid.Columns.forEach(d=>{if(d.CostCenterID>0)if(d.CostCenterID>5e4){if("1"!=l.d.SessionManager.UserID&&(50001==d.CostCenterID||50002==d.CostCenterID)&&l.d.SessionManager.Preferences.ContainsKey("Dimension List")&&!a.J0.IsEmpty(l.d.SessionManager.Preferences["Dimension List"])&&(l.d.SessionManager.Preferences.ContainsKey("Dimension List")&&l.d.SessionManager.Preferences["Dimension List"].toString().Contains(d.CostCenterID.toString())||l.d.SessionManager.Preferences.ContainsKey("RoleDimension List")&&l.d.SessionManager.Preferences["RoleDimension List"].toString().Contains(d.CostCenterID.toString()))&&""==n[t][d.DisplayMember+"_Key"].toString())return this.DisplayMessage="Please select "+d.Header,void(this.MessageVisibility=!0);a.J0.IsEmpty(n[t][d.DisplayMember+"_Key"])||(e+=" CCNID"+(d.CostCenterID-5e4)+'="'+n[t][d.DisplayMember+"_Key"].toString()+'" ')}else 2!=d.CostCenterID||a.J0.IsEmpty(n[t][d.DisplayMember+"_Key"])?3==d.CostCenterID&&!a.J0.IsEmpty(n[t][d.DisplayMember+"_Key"])&&(e+=' ProductID="'+n[t][d.DisplayMember+"_Key"].toString()+'" '):e+=' AccountID="'+n[t][d.DisplayMember+"_Key"].toString()+'" '}),e+="/>");e+="</DimensionWiseLockXML>";let s=l.d.common.SetDimensionWiseLockData(2,e.toString());this.ds=s,this.RetVal=s.obj,null!=this.ds&&this.ds.Tables.length>0&&this.ds.Tables[this.ds.Tables.length-1].length>0&&this.ds.Columns[this.ds.Columns.length-1].Contains("ErrorMessage")&&(this.DisplayMessage=this.ds.Tables[this.ds.Tables.length-1][0].ErrorMessage.toString()),this.MessageVisibility=!0}Logger.InfoLog("DimensionWiseLockViewModel:: exiting ButtonSave sender ="+i.toString())}OnEntryGridLinkClick(i,e,n){var s=this;return(0,p.A)(function*(){if(s.DisplayMessage="",s.EntryGrid.angularGrid&&s.EntryGrid.angularGrid.slickGrid.getEditorLock().commitCurrentEdit(),!("Action"!=e&&"Option"!=e||a.J0.IsEmpty(i.FromDate_Key)||a.J0.IsEmpty(i.ToDate_Key))){let t="",d=parseInt(s.EntryGrid.Table[0].Sno),u=parseInt(s.EntryGrid.Table[0].NodeID),m="";if(m+="<DimensionWiseLockXML>",t+="DATEDIFF(day,CONVERT(DATETIME,DocDate),CONVERT(DATETIME,'"+a.J0.ParseDate(i.FromDate_Key).ToString("dd MMM yyyy")+"'))<=0 AND DATEDIFF(day,CONVERT(DATETIME,DocDate),CONVERT(DATETIME,'"+a.J0.ParseDate(i.ToDate_Key).ToString("dd MMM yyyy")+"'))>=0 AND ",m+="<Rows ",u>0&&(m+='NodeID="'+u+'" '),s.DimensionLockGrid.TableColumns.Contains("isEnable")&&!a.J0.IsEmpty(i.isEnable)?m+='isEnable="'+i.isEnable.toString()+'" ':m+='isEnable="1" ',s.DimensionLockGrid.TableColumns.Contains("FromDate_Key")&&!a.J0.IsEmpty(i.FromDate_Key)?m+='FromDate="'+a.J0.ParseDate(i.FromDate_Key).ToString("dd/MMM/yyyy")+'" ':m+='FromDate="'+s.FromDate.ToString("dd/MMM/yyyy")+'" ',s.DimensionLockGrid.TableColumns.Contains("ToDate_Key")&&!a.J0.IsEmpty(i.ToDate_Key)?m+='ToDate="'+a.J0.ParseDate(i.ToDate_Key).ToString("dd/MMM/yyyy")+'" ':m+='ToDate="'+s.ToDate.ToString("dd/MMM/yyyy")+'" ',s.DimensionLockGrid.TableColumns.Contains("DocumentID")&&!a.J0.IsEmpty(i.DocumentID)?(m+=' DocumentID="'+a.J0.String(i.DocumentID)+'" ',t+="Option"==e?"a.CostCenterID="+a.J0.String(i.DocumentID)+" AND ":"CostCenterID="+a.J0.String(i.DocumentID)+" AND "):m+=' DocumentID="1" ',s.DimensionLockGrid.Columns.forEach(r=>{if(r.CostCenterID>0)if(r.CostCenterID>5e4){if("1"!=l.d.SessionManager.UserID&&(50001==r.CostCenterID||50002==r.CostCenterID)&&l.d.SessionManager.Preferences.ContainsKey("Dimension List")&&!a.J0.IsEmpty(l.d.SessionManager.Preferences["Dimension List"])&&(l.d.SessionManager.Preferences.ContainsKey("Dimension List")&&l.d.SessionManager.Preferences["Dimension List"].toString().Contains(r.CostCenterID.toString())||l.d.SessionManager.Preferences.ContainsKey("RoleDimension List")&&l.d.SessionManager.Preferences["RoleDimension List"].toString().Contains(r.CostCenterID.toString()))&&""==i[r.DisplayMember+"_Key"].toString())return s.DisplayMessage="Please select "+r.Header,void(s.MessageVisibility=!0);a.J0.IsEmpty(i[r.DisplayMember+"_Key"])||(m+=" CCNID"+(r.CostCenterID-5e4)+'="'+i[r.DisplayMember+"_Key"].toString()+'" ',t+="dcCCNID"+(r.CostCenterID-5e4)+"="+i[r.DisplayMember+"_Key"].toString()+" AND ")}else 2!=r.CostCenterID||a.J0.IsEmpty(i[r.DisplayMember+"_Key"])?3==r.CostCenterID&&!a.J0.IsEmpty(i[r.DisplayMember+"_Key"])&&(m+=' ProductID="'+i[r.DisplayMember+"_Key"].toString()+'" ',t+="ProductID="+i[r.DisplayMember+"_Key"].toString()+" AND "):(m+=' AccountID="'+i[r.DisplayMember+"_Key"].toString()+'" ',t+="(DebitAccount="+i[r.DisplayMember+"_Key"].toString()+" OR CreditAccount="+i[r.DisplayMember+"_Key"].toString()+") AND ")}),m+="/>",m+="</DimensionWiseLockXML>",t.length>0&&s.DimensionLockGrid.TableColumns.Contains("isEnable")&&(""==a.J0.String(i.isEnable)||"True"==a.J0.String(i.isEnable))){t=t.substr(0,t.length-4);let r="DWLVM001";"Option"==e&&(r="DWLVM002");let o=l.d.common.GetDataTable(r,t);if(null!=o&&o.length>0&&!Object.keys(o[0]).Contains("ErrorMessage")){if("Option"==e){let D=new C.WebConfigViewModel;D.WebConfigViewModel_2("UnApproved/Approved Documents",o),yield l.d.page.openDialog(D,T.WebConfigComponent,{Title:"UnApproved/Approved Documents",ShowCenter:!0,HideHeader:!0,HideClose:!0})}else if(!confirm("Based on your selected Criteria, we found some Unapproved/Approved documents. Do you want to Proceed.?"))return}else if("Option"==e)return s.DisplayMessage="No Unapprove/Approve Docs exist",void(s.MessageVisibility=!0)}if("Option"==e)return;if(u>0){let r=l.d.common.SetDimensionWiseLockData(2,m.toString());s.ds=r,s.RetVal=r.obj}else{let r=l.d.common.SetDimensionWiseLockData(0,m.toString());s.ds=r,s.RetVal=r.obj}if(s.DisplayMessage=s.ds.Tables[0][0][s.ds.Columns[0][0]].toString(),s.MessageVisibility=!0,s.RetVal>0){let r=null,o=0;if(0==d){for(let D=0;D<s.DimensionLockGrid.Table.length;D++)if(""==a.J0.String(s.DimensionLockGrid.Table[D].Sno)){r=s.DimensionLockGrid.Table[D],o=D+1;break}}else for(let D=0;D<s.DimensionLockGrid.Table.length;D++)if(s.DimensionLockGrid.Table[D].Sno.toString()==i.Sno.toString()){r=s.DimensionLockGrid.Table[D];break}null==r&&(r=s.DimensionLockGrid.NewRow(),s.DimensionLockGrid.addRow(r),o=s.DimensionLockGrid.Table.length);for(let D=0;D<Object.keys(i).length;D++)"id"!=Object.keys(i)[D]&&(r[Object.keys(i)[D]]=i[Object.keys(i)[D]]);0==d&&(r.NodeID=s.RetVal,r.Sno=o),r.Action="Edit",r.Delete="Delete",s.DimensionLockGrid.updateRow(r),s.ClearEntryGrid()}}})()}OnEntryGridBeginEdit(i,e,n){return!1}OnGridLinkClick(i,e,n){if(this.DisplayMessage="","Action"==e){for(let s=0;s<Object.keys(i).length;s++)"id"!=Object.keys(i)[s]&&(this.EntryGrid.Table[0][Object.keys(i)[s]]=i[Object.keys(i)[s]]);this.EntryGrid.Table[0].Action="Submit",this.EntryGrid.Table[0].Option="View",this.EntryGrid.updateRow(this.EntryGrid.Table[0])}else"Delete"==e&&confirm(l.d.GetResource("DeleteMessage"))&&this.OnDeleteCallBack()}ClearEntryGrid(){this.EntryGrid.Clear();let i=this.EntryGrid.NewRow();i.Sno="0",i.NodeID="0",i.Action="Submit",i.Option="View",this.EntryGrid.SelectedIndex=0,this.EntryGrid.addRow(i)}OnDeleteCallBack(){let i=this.DimensionLockGrid.SelectedItem;try{this.DisplayMessage="";let e=l.d.common.SetDimensionWiseLockData(3,i.NodeID.toString());if(this.ds=e,this.RetVal=e.obj,this.RetVal>0){this.DimensionLockGrid.Table.Remove(i),this.DisplayMessage=this.ds.Tables[0][0][this.ds.Columns[0][0]].toString(),this.MessageVisibility=!0;for(let n=0;n<this.DimensionLockGrid.Table.length;n++)this.DimensionLockGrid.updateRow(this.DimensionLockGrid.Table[n])}}catch(e){Logger.ErrorLog("DimensionWiseLockWiewModel: OnDeleteCallBack', message="+e.Message)}}}}}]);
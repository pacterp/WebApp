(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[784],{425:(ze,Oe,n)=>{"use strict";n.d(Oe,{H:()=>oe});var C=n(36369),x=n(63322),G=n(17593);function X(F,N=0){return(0,G.N)((te,v)=>{v.add(F.schedule(()=>te.subscribe(v),N))})}var z=n(94366),w=n(27142),he=n(20452),k=n(67606);function le(F,N){if(!F)throw new Error("Iterable cannot be null");return new z.c(te=>{(0,k.N)(te,N,()=>{const v=F[Symbol.asyncIterator]();(0,k.N)(te,N,()=>{v.next().then(S=>{S.done?te.complete():te.next(S.value)})},0,!0)})})}var R=n(77436),V=n(37477),ge=n(69822),E=n(7778),b=n(60334),p=n(72972),j=n(92815);function oe(F,N){return N?function I(F,N){if(null!=F){if((0,R.l)(F))return function W(F,N){return(0,C.Tg)(F).pipe(X(N),(0,x.Q)(N))}(F,N);if((0,ge.X)(F))return function Z(F,N){return new z.c(te=>{let v=0;return N.schedule(function(){v===F.length?te.complete():(te.next(F[v++]),te.closed||this.schedule())})})}(F,N);if((0,V.y)(F))return function ne(F,N){return(0,C.Tg)(F).pipe(X(N),(0,x.Q)(N))}(F,N);if((0,b.T)(F))return le(F,N);if((0,E.x)(F))return function me(F,N){return new z.c(te=>{let v;return(0,k.N)(te,N,()=>{v=F[w.l](),(0,k.N)(te,N,()=>{let S,B;try{({value:S,done:B}=v.next())}catch(O){return void te.error(O)}B?te.complete():te.next(S)},0,!0)}),()=>(0,he.T)(v?.return)&&v.return()})}(F,N);if((0,j.U)(F))return function T(F,N){return le((0,j.C)(F),N)}(F,N)}throw(0,p.L)(F)}(F,N):(0,C.Tg)(F)}},1236:function(ze,Oe,n){var C;ze.exports=(C=n(95275),function(x){var G=C,X=G.lib,W=X.WordArray,ne=X.Hasher,z=G.algo,Z=[];!function(){for(var R=0;R<64;R++)Z[R]=4294967296*x.abs(x.sin(R+1))|0}();var w=z.MD5=ne.extend({_doReset:function(){this._hash=new W.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(R,V){for(var ge=0;ge<16;ge++){var E=V+ge,b=R[E];R[E]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8)}var p=this._hash.words,j=R[V+0],T=R[V+1],I=R[V+2],oe=R[V+3],F=R[V+4],N=R[V+5],te=R[V+6],v=R[V+7],S=R[V+8],B=R[V+9],O=R[V+10],ae=R[V+11],se=R[V+12],fe=R[V+13],_=R[V+14],K=R[V+15],ee=p[0],U=p[1],ie=p[2],J=p[3];ee=he(ee,U,ie,J,j,7,Z[0]),J=he(J,ee,U,ie,T,12,Z[1]),ie=he(ie,J,ee,U,I,17,Z[2]),U=he(U,ie,J,ee,oe,22,Z[3]),ee=he(ee,U,ie,J,F,7,Z[4]),J=he(J,ee,U,ie,N,12,Z[5]),ie=he(ie,J,ee,U,te,17,Z[6]),U=he(U,ie,J,ee,v,22,Z[7]),ee=he(ee,U,ie,J,S,7,Z[8]),J=he(J,ee,U,ie,B,12,Z[9]),ie=he(ie,J,ee,U,O,17,Z[10]),U=he(U,ie,J,ee,ae,22,Z[11]),ee=he(ee,U,ie,J,se,7,Z[12]),J=he(J,ee,U,ie,fe,12,Z[13]),ie=he(ie,J,ee,U,_,17,Z[14]),ee=k(ee,U=he(U,ie,J,ee,K,22,Z[15]),ie,J,T,5,Z[16]),J=k(J,ee,U,ie,te,9,Z[17]),ie=k(ie,J,ee,U,ae,14,Z[18]),U=k(U,ie,J,ee,j,20,Z[19]),ee=k(ee,U,ie,J,N,5,Z[20]),J=k(J,ee,U,ie,O,9,Z[21]),ie=k(ie,J,ee,U,K,14,Z[22]),U=k(U,ie,J,ee,F,20,Z[23]),ee=k(ee,U,ie,J,B,5,Z[24]),J=k(J,ee,U,ie,_,9,Z[25]),ie=k(ie,J,ee,U,oe,14,Z[26]),U=k(U,ie,J,ee,S,20,Z[27]),ee=k(ee,U,ie,J,fe,5,Z[28]),J=k(J,ee,U,ie,I,9,Z[29]),ie=k(ie,J,ee,U,v,14,Z[30]),ee=me(ee,U=k(U,ie,J,ee,se,20,Z[31]),ie,J,N,4,Z[32]),J=me(J,ee,U,ie,S,11,Z[33]),ie=me(ie,J,ee,U,ae,16,Z[34]),U=me(U,ie,J,ee,_,23,Z[35]),ee=me(ee,U,ie,J,T,4,Z[36]),J=me(J,ee,U,ie,F,11,Z[37]),ie=me(ie,J,ee,U,v,16,Z[38]),U=me(U,ie,J,ee,O,23,Z[39]),ee=me(ee,U,ie,J,fe,4,Z[40]),J=me(J,ee,U,ie,j,11,Z[41]),ie=me(ie,J,ee,U,oe,16,Z[42]),U=me(U,ie,J,ee,te,23,Z[43]),ee=me(ee,U,ie,J,B,4,Z[44]),J=me(J,ee,U,ie,se,11,Z[45]),ie=me(ie,J,ee,U,K,16,Z[46]),ee=le(ee,U=me(U,ie,J,ee,I,23,Z[47]),ie,J,j,6,Z[48]),J=le(J,ee,U,ie,v,10,Z[49]),ie=le(ie,J,ee,U,_,15,Z[50]),U=le(U,ie,J,ee,N,21,Z[51]),ee=le(ee,U,ie,J,se,6,Z[52]),J=le(J,ee,U,ie,oe,10,Z[53]),ie=le(ie,J,ee,U,O,15,Z[54]),U=le(U,ie,J,ee,T,21,Z[55]),ee=le(ee,U,ie,J,S,6,Z[56]),J=le(J,ee,U,ie,K,10,Z[57]),ie=le(ie,J,ee,U,te,15,Z[58]),U=le(U,ie,J,ee,fe,21,Z[59]),ee=le(ee,U,ie,J,F,6,Z[60]),J=le(J,ee,U,ie,ae,10,Z[61]),ie=le(ie,J,ee,U,I,15,Z[62]),U=le(U,ie,J,ee,B,21,Z[63]),p[0]=p[0]+ee|0,p[1]=p[1]+U|0,p[2]=p[2]+ie|0,p[3]=p[3]+J|0},_doFinalize:function(){var R=this._data,V=R.words,ge=8*this._nDataBytes,E=8*R.sigBytes;V[E>>>5]|=128<<24-E%32;var b=x.floor(ge/4294967296),p=ge;V[15+(E+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),V[14+(E+64>>>9<<4)]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),R.sigBytes=4*(V.length+1),this._process();for(var j=this._hash,T=j.words,I=0;I<4;I++){var oe=T[I];T[I]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8)}return j},clone:function(){var R=ne.clone.call(this);return R._hash=this._hash.clone(),R}});function he(R,V,ge,E,b,p,j){var T=R+(V&ge|~V&E)+b+j;return(T<<p|T>>>32-p)+V}function k(R,V,ge,E,b,p,j){var T=R+(V&E|ge&~E)+b+j;return(T<<p|T>>>32-p)+V}function me(R,V,ge,E,b,p,j){var T=R+(V^ge^E)+b+j;return(T<<p|T>>>32-p)+V}function le(R,V,ge,E,b,p,j){var T=R+(ge^(V|~E))+b+j;return(T<<p|T>>>32-p)+V}G.MD5=ne._createHelper(w),G.HmacMD5=ne._createHmacHelper(w)}(Math),C.MD5)},3177:(ze,Oe,n)=>{"use strict";n.d(Oe,{n:()=>X});var C=n(36369),x=n(17593),G=n(31979);function X(W,ne){return(0,x.N)((z,Z)=>{let w=null,he=0,k=!1;const me=()=>k&&!w&&Z.complete();z.subscribe((0,G._)(Z,le=>{w?.unsubscribe();let R=0;const V=he++;(0,C.Tg)(W(le,V)).subscribe(w=(0,G._)(Z,ge=>Z.next(ne?ne(le,ge,V,R++):ge),()=>{w=null,me()}))},()=>{k=!0,me()}))})}},4192:(ze,Oe,n)=>{"use strict";n.r(Oe),n.d(Oe,{PactRichTextBoxComponent:()=>me});var C=n(74523),x=n(15524),G=n(32040),X=n(43767),W=n(86234),ne=n(96598),z=n(11798),Z=n(46183),w=n(96336);const he=()=>({height:"200px"});let k=document,me=(()=>{class le extends x.P{constructor(V){super(),this.elementRef=V,this.sizearray=["6pt","7pt","8pt","9pt","10pt","11pt","12pt","13pt","14pt","15pt","16pt","18pt","20pt","22pt","24pt","30pt","32pt","36pt"],this.options={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:this.sizearray}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:["sans serif","serif","monospace","times new roman","arial","calibri"]}],[{align:[]}],["clean"],["link","image"]]},this.objText="",this.CtrlTFontSize="10",this.CtrlTFontName="Times New Roman",this.setUpFonts(),this.calig(),this.Indent()}ngOnInit(){G.d.SessionManager.Preferences.ContainsKey("CtrlTFontSize")&&(this.CtrlTFontSize=G.d.SessionManager.Preferences.CtrlTFontSize),G.d.SessionManager.Preferences.ContainsKey("CtrlTFontName")&&(this.CtrlTFontName=G.d.SessionManager.Preferences.CtrlTFontName),this.onLoad(),this.Init()}get Element(){return this.elementRef.nativeElement}setUpIndentStyle(){}setDefaultmargings(V,ge){}customHeader(){}Indent(){}calig(){}formatHtml(V){var E="",b="";return V.split(/>\s*</).forEach(function(p){p.match(/^\/\w/)&&(b=b.substring(1)),E+=b+"<"+p+">\r\n",p.match(/^<?\w[^>]*[^\/]$/)&&!p.startsWith("input")&&(b+="\t")}),E.substring(1,E.length-3)}setUpFonts(){const V=k.fonts.entries();let ge=[],E=!1;for(;!E;){const b=V.next();b.done?E=b.done:ge.push(b.value[0].family)}return[...new Set(ge)]}onLoad(){var V=this;return(0,C.A)(function*(){if(X.J0.IsEmpty(V.obj.Xaml)||null==V.obj.Xaml)if(V.obj instanceof W.Y){let ge=V.obj.$input.val();if(X.J0.IsEmpty(V.obj.Tag))V.htmlcontent=ge;else{ge=V.obj.Tag;let E=yield G.d.common.ConvertXamlToHtml(ge);V.htmlcontent=E.HtmlText}}else("PactTextBoxData"==V.obj.ClassName||"PactTextAreaData"==V.obj.ClassName)&&(V.objText=V.obj.Text,V.htmlcontent=V.obj.Text);else{V.objText=V.obj.Text;let ge=yield G.d.common.ConvertXamlToHtml(V.obj.Xaml);V.htmlcontent=ge.HtmlText}})()}OnClick(V,ge){var E=this;return(0,C.A)(function*(){if("Ok"==V){let b;b=E.htmlcontent.startsWith("<HTML><HEAD>")&&!X.J0.IsEmpty(E._htmlcontent)?yield G.d.common.ConvertHtmlToXaml(E._htmlcontent):yield G.d.common.ConvertHtmlToXaml(E.htmlcontent),E.obj instanceof W.Y?(E.obj.Tag=b.xamlText,!X.J0.IsEmpty(E.obj.collection.Binding)&&!X.J0.IsEmpty(E.obj.args.item)&&(E.obj.args.item[E.obj.collection.Binding]="Formula"==E.obj.collection.Binding||E.obj.collection.Binding.Contains("Formula")?E.objText:E.obj.Tag.toString(),E.obj.save())):(E.obj.Xaml=b.xamlText,E.obj.Tag=b.xamlText,E.obj.Text=E.objText)}G.d.page.HideDialog(E.PopUpGUID)})()}changeEditor(V){this.objText=V.editor.root.innerText,X.J0.IsEmpty(V.html)||(this._htmlcontent=V.html)}setUpQuill1(){}Init(){}ngAfterViewInit(){setTimeout(()=>{Array.from(this.Element.getElementsByClassName("ql-size")).forEach(V=>{null!=V.getElementsByClassName("ql-picker-label")[0]&&V.getElementsByClassName("ql-picker-label")[0].setAttribute("data-value",this.CtrlTFontSize+"pt")}),Array.from(this.Element.getElementsByClassName("ql-font")).forEach(V=>{null!=V.getElementsByClassName("ql-picker-label")[0]&&V.getElementsByClassName("ql-picker-label")[0].setAttribute("data-value",""+this.CtrlTFontName)})},0)}static{this.\u0275fac=function(ge){return new(ge||le)(ne.rXU(ne.aKT))}}static{this.\u0275cmp=ne.VBU({type:le,selectors:[["app-PactRichTextBox"]],inputs:{obj:"obj"},standalone:!1,features:[ne.Vt3],decls:19,vars:10,consts:[["editor",""],[3,"onEditorChanged","ngModelChange","styles","modules","ngModel"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(ge,E){if(1&ge){const b=ne.RV6();ne.EFF(0,"\n   "),ne.j41(1,"quill-editor",1,0),ne.bIt("onEditorChanged",function(j){return ne.eBV(b),ne.Njj(E.changeEditor(j))}),ne.mxI("ngModelChange",function(j){return ne.eBV(b),ne.DH7(E.htmlcontent,j)||(E.htmlcontent=j),ne.Njj(j)}),ne.k0s(),ne.EFF(3,"\n  "),ne.j41(4,"div",2),ne.EFF(5,"\n      "),ne.j41(6,"div"),ne.EFF(7,"\n        "),ne.j41(8,"button",3),ne.bIt("click",function(){ne.eBV(b);const j=ne.sdS(2);return ne.Njj(E.OnClick("Ok",j))}),ne.EFF(9),ne.nI1(10,"translate"),ne.k0s(),ne.EFF(11,"        \n        "),ne.j41(12,"button",4),ne.bIt("click",function(){ne.eBV(b);const j=ne.sdS(2);return ne.Njj(E.OnClick("Cancel",j))}),ne.nrm(13,"i",5),ne.EFF(14),ne.nI1(15,"translate"),ne.k0s(),ne.EFF(16," \n      "),ne.k0s(),ne.EFF(17,"       \n  "),ne.k0s(),ne.EFF(18,"\n  ")}2&ge&&(ne.R7$(),ne.Y8G("styles",ne.lJ4(9,he))("modules",E.options),ne.R50("ngModel",E.htmlcontent),ne.R7$(8),ne.JRh(ne.bMT(10,5,"Ok")),ne.R7$(5),ne.JRh(ne.bMT(15,7,"Cancel")))},dependencies:[z.BC,z.vS,Z.i9,w.D9],styles:['.ql-snow[_ngcontent-%COMP%]   .ql-picker.ql-size[_ngcontent-%COMP%]   .ql-picker-item[data-value="14px"][_ngcontent-%COMP%]:before{content:"Normal";font-size:14px!important}.ql-snow[_ngcontent-%COMP%]   .ql-picker.ql-size[_ngcontent-%COMP%]   .ql-picker-item[data-value="16px"][_ngcontent-%COMP%]:before{content:"Large";font-size:16px!important}.ql-snow[_ngcontent-%COMP%]   .ql-picker.ql-size[_ngcontent-%COMP%]   .ql-picker-item[data-value="18px"][_ngcontent-%COMP%]:before{content:"Huge";font-size:18px!important}quill-editor[_ngcontent-%COMP%]{display:block}.ql-editor[_ngcontent-%COMP%]:focus{border:1px solid #80bdff!important;box-shadow:0 0 0 .2rem #007bff40!important}.ng-invalid[_ngcontent-%COMP%]{border:1px dashed red}[quill-editor-toolbar][_ngcontent-%COMP%]   .ql-font[_ngcontent-%COMP%]   span[data-label="Aref Ruqaa"][_ngcontent-%COMP%]:before{font-family:Aref Ruqaa}[quill-editor-toolbar][_ngcontent-%COMP%]   .ql-font[_ngcontent-%COMP%]   span[data-label=Mirza][_ngcontent-%COMP%]:before{font-family:Mirza}[quill-editor-toolbar][_ngcontent-%COMP%]   .ql-font[_ngcontent-%COMP%]   span[data-label=Roboto][_ngcontent-%COMP%]:before{font-family:Roboto}.ql-font-mirza[_ngcontent-%COMP%]{font-family:Mirza}.ql-font-aref[_ngcontent-%COMP%]{font-family:Aref Ruqaa}.ql-font-roboto[_ngcontent-%COMP%]{font-family:Roboto}']})}}return le})()},4234:(ze,Oe,n)=>{"use strict";function C(x){const X=x(W=>{Error.call(W),W.stack=(new Error).stack});return X.prototype=Object.create(Error.prototype),X.prototype.constructor=X,X}n.d(Oe,{L:()=>C})},5011:(ze,Oe,n)=>{"use strict";n.d(Oe,{P:()=>x});const x=(0,n(37464).F3)("Browser",{web:()=>n.e(4786).then(n.bind(n,2405)).then(G=>new G.BrowserWeb)})},5087:(ze,Oe,n)=>{"use strict";n.d(Oe,{p:()=>Z});var C=n(94366),x=n(15454),G=n(36369),X=n(86945),W=n(31979),ne=n(84069),z=n(13734);function Z(...w){const he=(0,X.ms)(w),{args:k,keys:me}=(0,x.D)(w),le=new C.c(R=>{const{length:V}=k;if(!V)return void R.complete();const ge=new Array(V);let E=V,b=V;for(let p=0;p<V;p++){let j=!1;(0,G.Tg)(k[p]).subscribe((0,W._)(R,T=>{j||(j=!0,b--),ge[p]=T},()=>E--,void 0,()=>{(!E||!j)&&(b||R.next(me?(0,z.e)(me,ge):ge),R.complete())}))}});return he?le.pipe((0,ne.I)(he)):le}},5135:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.pad.Iso10126={pad:function(x,G){var X=4*G,W=X-x.sigBytes%X;x.concat(C.lib.WordArray.random(W-1)).concat(C.lib.WordArray.create([W<<24],1))},unpad:function(x){x.sigBytes-=255&x.words[x.sigBytes-1>>>2]}},C.pad.Iso10126)},7724:(ze,Oe,n)=>{"use strict";function C(){}n.d(Oe,{l:()=>C})},7778:(ze,Oe,n)=>{"use strict";n.d(Oe,{x:()=>G});var C=n(27142),x=n(20452);function G(X){return(0,x.T)(X?.[C.l])}},8108:(ze,Oe,n)=>{"use strict";n.d(Oe,{j:()=>x});var C=Object.prototype.hasOwnProperty;function x(G,X){var W,ne;if(G===X)return!0;if(G&&X&&(W=G.constructor)===X.constructor){if(W===Date)return G.getTime()===X.getTime();if(W===RegExp)return G.toString()===X.toString();if(W===Array){if((ne=G.length)===X.length)for(;ne--&&x(G[ne],X[ne]););return-1===ne}if(!W||"object"==typeof G){for(W in ne=0,G)if(C.call(G,W)&&++ne&&!C.call(X,W)||!(W in X)||!x(G[W],X[W]))return!1;return Object.keys(X).length===ne}}return G!=G&&X!=X}},8510:(ze,Oe,n)=>{"use strict";n.d(Oe,{U:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},10522:(ze,Oe,n)=>{"use strict";n.d(Oe,{M:()=>W});var C=n(20452),x=n(17593),G=n(31979),X=n(56050);function W(ne,z,Z){const w=(0,C.T)(ne)||z||Z?{next:ne,error:z,complete:Z}:ne;return w?(0,x.N)((he,k)=>{var me;null===(me=w.subscribe)||void 0===me||me.call(w);let le=!0;he.subscribe((0,G._)(k,R=>{var V;null===(V=w.next)||void 0===V||V.call(w,R),k.next(R)},()=>{var R;le=!1,null===(R=w.complete)||void 0===R||R.call(w),k.complete()},R=>{var V;le=!1,null===(V=w.error)||void 0===V||V.call(w,R),k.error(R)},()=>{var R,V;le&&(null===(R=w.unsubscribe)||void 0===R||R.call(w)),null===(V=w.finalize)||void 0===V||V.call(w)}))}):X.D}},11204:function(ze,Oe,n){var C;ze.exports=(C=n(95275),function(){if("function"==typeof ArrayBuffer){var X=C.lib.WordArray,W=X.init,ne=X.init=function(z){if(z instanceof ArrayBuffer&&(z=new Uint8Array(z)),(z instanceof Int8Array||typeof Uint8ClampedArray<"u"&&z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array)&&(z=new Uint8Array(z.buffer,z.byteOffset,z.byteLength)),z instanceof Uint8Array){for(var Z=z.byteLength,w=[],he=0;he<Z;he++)w[he>>>2]|=z[he]<<24-he%4*8;W.call(this,w,Z)}else W.apply(this,arguments)};ne.prototype=X}}(),C.lib.WordArray)},11345:(ze,Oe,n)=>{"use strict";n.d(Oe,{R:()=>he});var C=n(36369),x=n(94366),G=n(53778),X=n(69822),W=n(20452),ne=n(84069);const z=["addListener","removeListener"],Z=["addEventListener","removeEventListener"],w=["on","off"];function he(V,ge,E,b){if((0,W.T)(E)&&(b=E,E=void 0),b)return he(V,ge,E).pipe((0,ne.I)(b));const[p,j]=function R(V){return(0,W.T)(V.addEventListener)&&(0,W.T)(V.removeEventListener)}(V)?Z.map(T=>I=>V[T](ge,I,E)):function me(V){return(0,W.T)(V.addListener)&&(0,W.T)(V.removeListener)}(V)?z.map(k(V,ge)):function le(V){return(0,W.T)(V.on)&&(0,W.T)(V.off)}(V)?w.map(k(V,ge)):[];if(!p&&(0,X.X)(V))return(0,G.Z)(T=>he(T,ge,E))((0,C.Tg)(V));if(!p)throw new TypeError("Invalid event target");return new x.c(T=>{const I=(...oe)=>T.next(1<oe.length?oe:oe[0]);return p(I),()=>j(I)})}function k(V,ge){return E=>b=>V[E](ge,b)}},11771:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.mode.CFB=function(){var x=C.lib.BlockCipherMode.extend();function G(X,W,ne,z){var Z,w=this._iv;w?(Z=w.slice(0),this._iv=void 0):Z=this._prevBlock,z.encryptBlock(Z,0);for(var he=0;he<ne;he++)X[W+he]^=Z[he]}return x.Encryptor=x.extend({processBlock:function(X,W){var ne=this._cipher,z=ne.blockSize;G.call(this,X,W,z,ne),this._prevBlock=X.slice(W,W+z)}}),x.Decryptor=x.extend({processBlock:function(X,W){var ne=this._cipher,z=ne.blockSize,Z=X.slice(W,W+z);G.call(this,X,W,z,ne),this._prevBlock=Z}}),x}(),C.mode.CFB)},11798:(ze,Oe,n)=>{"use strict";n.d(Oe,{BC:()=>be,Fm:()=>Yt,JD:()=>Uo,MJ:()=>wo,Q0:()=>Dr,R_:()=>ln,X1:()=>gl,YN:()=>fl,YS:()=>$s,Zm:()=>k,cV:()=>Fo,cb:()=>He,cz:()=>b,gE:()=>li,j4:()=>Vi,k0:()=>T,kq:()=>w,l_:()=>Is,me:()=>V,ok:()=>Cs,qT:()=>Bd,vO:()=>ve,vS:()=>Ft,wz:()=>xs,xH:()=>xr,y7:()=>Mr});var C=n(96598),x=n(73667),G=n(425),X=n(5087),W=n(43794),ne=n(73973);let z=(()=>{class re{_renderer;_elementRef;onChange=H=>{};onTouched=()=>{};constructor(H,ue){this._renderer=H,this._elementRef=ue}setProperty(H,ue){this._renderer.setProperty(this._elementRef.nativeElement,H,ue)}registerOnTouched(H){this.onTouched=H}registerOnChange(H){this.onChange=H}setDisabledState(H){this.setProperty("disabled",H)}static \u0275fac=function(ue){return new(ue||re)(C.rXU(C.sFG),C.rXU(C.aKT))};static \u0275dir=C.FsC({type:re})}return re})(),Z=(()=>{class re extends z{static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,features:[C.Vt3]})}return re})();const w=new C.nKC(""),he={provide:w,useExisting:(0,C.Rfq)(()=>k),multi:!0};let k=(()=>{class re extends Z{writeValue(H){this.setProperty("checked",H)}static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("change",function(Xt){return Fe.onChange(Xt.target.checked)})("blur",function(){return Fe.onTouched()})},standalone:!1,features:[C.Jv_([he]),C.Vt3]})}return re})();const me={provide:w,useExisting:(0,C.Rfq)(()=>V),multi:!0},R=new C.nKC("");let V=(()=>{class re extends z{_compositionMode;_composing=!1;constructor(H,ue,Fe){super(H,ue),this._compositionMode=Fe,null==this._compositionMode&&(this._compositionMode=!function le(){const re=(0,x.rb)()?(0,x.rb)().getUserAgent():"";return/android (\d+)/.test(re.toLowerCase())}())}writeValue(H){this.setProperty("value",H??"")}_handleInput(H){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(H)}_compositionStart(){this._composing=!0}_compositionEnd(H){this._composing=!1,this._compositionMode&&this.onChange(H)}static \u0275fac=function(ue){return new(ue||re)(C.rXU(C.sFG),C.rXU(C.aKT),C.rXU(R,8))};static \u0275dir=C.FsC({type:re,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("input",function(Xt){return Fe._handleInput(Xt.target.value)})("blur",function(){return Fe.onTouched()})("compositionstart",function(){return Fe._compositionStart()})("compositionend",function(Xt){return Fe._compositionEnd(Xt.target.value)})},standalone:!1,features:[C.Jv_([me]),C.Vt3]})}return re})();function ge(re){return null==re||0===E(re)}function E(re){return null==re?null:Array.isArray(re)||"string"==typeof re?re.length:re instanceof Set?re.size:null}const b=new C.nKC(""),p=new C.nKC(""),j=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class T{static min(ce){return function I(re){return ce=>{if(null==ce.value||null==re)return null;const H=parseFloat(ce.value);return!isNaN(H)&&H<re?{min:{min:re,actual:ce.value}}:null}}(ce)}static max(ce){return function oe(re){return ce=>{if(null==ce.value||null==re)return null;const H=parseFloat(ce.value);return!isNaN(H)&&H>re?{max:{max:re,actual:ce.value}}:null}}(ce)}static required(ce){return F(ce)}static requiredTrue(ce){return function N(re){return!0===re.value?null:{required:!0}}(ce)}static email(ce){return function te(re){return ge(re.value)||j.test(re.value)?null:{email:!0}}(ce)}static minLength(ce){return function v(re){return ce=>{const H=ce.value?.length??E(ce.value);return null===H||0===H?null:H<re?{minlength:{requiredLength:re,actualLength:H}}:null}}(ce)}static maxLength(ce){return function S(re){return ce=>{const H=ce.value?.length??E(ce.value);return null!==H&&H>re?{maxlength:{requiredLength:re,actualLength:H}}:null}}(ce)}static pattern(ce){return B(ce)}static nullValidator(ce){return null}static compose(ce){return U(ce)}static composeAsync(ce){return J(ce)}}function F(re){return ge(re.value)?{required:!0}:null}function B(re){if(!re)return O;let ce,H;return"string"==typeof re?(H="","^"!==re.charAt(0)&&(H+="^"),H+=re,"$"!==re.charAt(re.length-1)&&(H+="$"),ce=new RegExp(H)):(H=re.toString(),ce=re),ue=>{if(ge(ue.value))return null;const Fe=ue.value;return ce.test(Fe)?null:{pattern:{requiredPattern:H,actualValue:Fe}}}}function O(re){return null}function ae(re){return null!=re}function se(re){return(0,C.jNT)(re)?(0,G.H)(re):re}function fe(re){let ce={};return re.forEach(H=>{ce=null!=H?{...ce,...H}:ce}),0===Object.keys(ce).length?null:ce}function _(re,ce){return ce.map(H=>H(re))}function ee(re){return re.map(ce=>function K(re){return!re.validate}(ce)?ce:H=>ce.validate(H))}function U(re){if(!re)return null;const ce=re.filter(ae);return 0==ce.length?null:function(H){return fe(_(H,ce))}}function ie(re){return null!=re?U(ee(re)):null}function J(re){if(!re)return null;const ce=re.filter(ae);return 0==ce.length?null:function(H){const ue=_(H,ce).map(se);return(0,X.p)(ue).pipe((0,ne.T)(fe))}}function Ce(re){return null!=re?J(ee(re)):null}function Y(re,ce){return null===re?[ce]:Array.isArray(re)?[...re,ce]:[re,ce]}function Ee(re){return re._rawValidators}function Te(re){return re._rawAsyncValidators}function Le(re){return re?Array.isArray(re)?re:[re]:[]}function tt(re,ce){return Array.isArray(re)?re.includes(ce):re===ce}function Ue(re,ce){const H=Le(ce);return Le(re).forEach(Fe=>{tt(H,Fe)||H.push(Fe)}),H}function ke(re,ce){return Le(ce).filter(H=>!tt(re,H))}class Be{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(ce){this._rawValidators=ce||[],this._composedValidatorFn=ie(this._rawValidators)}_setAsyncValidators(ce){this._rawAsyncValidators=ce||[],this._composedAsyncValidatorFn=Ce(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(ce){this._onDestroyCallbacks.push(ce)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ce=>ce()),this._onDestroyCallbacks=[]}reset(ce=void 0){this.control&&this.control.reset(ce)}hasError(ce,H){return!!this.control&&this.control.hasError(ce,H)}getError(ce,H){return this.control?this.control.getError(ce,H):null}}class xe extends Be{name;get formDirective(){return null}get path(){return null}}class ve extends Be{_parent=null;name=null;valueAccessor=null}class A{_cd;constructor(ce){this._cd=ce}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let be=(()=>{class re extends A{constructor(H){super(H)}static \u0275fac=function(ue){return new(ue||re)(C.rXU(ve,2))};static \u0275dir=C.FsC({type:re,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ue,Fe){2&ue&&C.AVh("ng-untouched",Fe.isUntouched)("ng-touched",Fe.isTouched)("ng-pristine",Fe.isPristine)("ng-dirty",Fe.isDirty)("ng-valid",Fe.isValid)("ng-invalid",Fe.isInvalid)("ng-pending",Fe.isPending)},standalone:!1,features:[C.Vt3]})}return re})(),He=(()=>{class re extends A{constructor(H){super(H)}static \u0275fac=function(ue){return new(ue||re)(C.rXU(xe,10))};static \u0275dir=C.FsC({type:re,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ue,Fe){2&ue&&C.AVh("ng-untouched",Fe.isUntouched)("ng-touched",Fe.isTouched)("ng-pristine",Fe.isPristine)("ng-dirty",Fe.isDirty)("ng-valid",Fe.isValid)("ng-invalid",Fe.isInvalid)("ng-pending",Fe.isPending)("ng-submitted",Fe.isSubmitted)},standalone:!1,features:[C.Vt3]})}return re})();const $t="VALID",cn="INVALID",Nn="PENDING",xt="DISABLED";class Ni{}class en extends Ni{value;source;constructor(ce,H){super(),this.value=ce,this.source=H}}class fs extends Ni{pristine;source;constructor(ce,H){super(),this.pristine=ce,this.source=H}}class Ts extends Ni{touched;source;constructor(ce,H){super(),this.touched=ce,this.source=H}}class Wt extends Ni{status;source;constructor(ce,H){super(),this.status=ce,this.source=H}}class mi extends Ni{source;constructor(ce){super(),this.source=ce}}class yn extends Ni{source;constructor(ce){super(),this.source=ce}}function ri(re){return(ct(re)?re.validators:re)||null}function Tt(re,ce){return(ct(ce)?ce.asyncValidators:re)||null}function ct(re){return null!=re&&!Array.isArray(re)&&"object"==typeof re}function vn(re,ce,H){const ue=re.controls;if(!(ce?Object.keys(ue):ue).length)throw new C.wOt(1e3,"");if(!ue[H])throw new C.wOt(1001,"")}function On(re,ce,H){re._forEachChild((ue,Fe)=>{if(void 0===H[Fe])throw new C.wOt(1002,"")})}class Li{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(ce,H){this._assignValidators(ce),this._assignAsyncValidators(H)}get validator(){return this._composedValidatorFn}set validator(ce){this._rawValidators=this._composedValidatorFn=ce}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ce){this._rawAsyncValidators=this._composedAsyncValidatorFn=ce}get parent(){return this._parent}get status(){return(0,C.O8t)(this.statusReactive)}set status(ce){(0,C.O8t)(()=>this.statusReactive.set(ce))}_status=(0,C.EWP)(()=>this.statusReactive());statusReactive=(0,C.vPA)(void 0);get valid(){return this.status===$t}get invalid(){return this.status===cn}get pending(){return this.status==Nn}get disabled(){return this.status===xt}get enabled(){return this.status!==xt}errors;get pristine(){return(0,C.O8t)(this.pristineReactive)}set pristine(ce){(0,C.O8t)(()=>this.pristineReactive.set(ce))}_pristine=(0,C.EWP)(()=>this.pristineReactive());pristineReactive=(0,C.vPA)(!0);get dirty(){return!this.pristine}get touched(){return(0,C.O8t)(this.touchedReactive)}set touched(ce){(0,C.O8t)(()=>this.touchedReactive.set(ce))}_touched=(0,C.EWP)(()=>this.touchedReactive());touchedReactive=(0,C.vPA)(!1);get untouched(){return!this.touched}_events=new W.B;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ce){this._assignValidators(ce)}setAsyncValidators(ce){this._assignAsyncValidators(ce)}addValidators(ce){this.setValidators(Ue(ce,this._rawValidators))}addAsyncValidators(ce){this.setAsyncValidators(Ue(ce,this._rawAsyncValidators))}removeValidators(ce){this.setValidators(ke(ce,this._rawValidators))}removeAsyncValidators(ce){this.setAsyncValidators(ke(ce,this._rawAsyncValidators))}hasValidator(ce){return tt(this._rawValidators,ce)}hasAsyncValidator(ce){return tt(this._rawAsyncValidators,ce)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ce={}){const H=!1===this.touched;this.touched=!0;const ue=ce.sourceControl??this;this._parent&&!ce.onlySelf&&this._parent.markAsTouched({...ce,sourceControl:ue}),H&&!1!==ce.emitEvent&&this._events.next(new Ts(!0,ue))}markAllAsTouched(ce={}){this.markAsTouched({onlySelf:!0,emitEvent:ce.emitEvent,sourceControl:this}),this._forEachChild(H=>H.markAllAsTouched(ce))}markAsUntouched(ce={}){const H=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const ue=ce.sourceControl??this;this._forEachChild(Fe=>{Fe.markAsUntouched({onlySelf:!0,emitEvent:ce.emitEvent,sourceControl:ue})}),this._parent&&!ce.onlySelf&&this._parent._updateTouched(ce,ue),H&&!1!==ce.emitEvent&&this._events.next(new Ts(!1,ue))}markAsDirty(ce={}){const H=!0===this.pristine;this.pristine=!1;const ue=ce.sourceControl??this;this._parent&&!ce.onlySelf&&this._parent.markAsDirty({...ce,sourceControl:ue}),H&&!1!==ce.emitEvent&&this._events.next(new fs(!1,ue))}markAsPristine(ce={}){const H=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const ue=ce.sourceControl??this;this._forEachChild(Fe=>{Fe.markAsPristine({onlySelf:!0,emitEvent:ce.emitEvent})}),this._parent&&!ce.onlySelf&&this._parent._updatePristine(ce,ue),H&&!1!==ce.emitEvent&&this._events.next(new fs(!0,ue))}markAsPending(ce={}){this.status=Nn;const H=ce.sourceControl??this;!1!==ce.emitEvent&&(this._events.next(new Wt(this.status,H)),this.statusChanges.emit(this.status)),this._parent&&!ce.onlySelf&&this._parent.markAsPending({...ce,sourceControl:H})}disable(ce={}){const H=this._parentMarkedDirty(ce.onlySelf);this.status=xt,this.errors=null,this._forEachChild(Fe=>{Fe.disable({...ce,onlySelf:!0})}),this._updateValue();const ue=ce.sourceControl??this;!1!==ce.emitEvent&&(this._events.next(new en(this.value,ue)),this._events.next(new Wt(this.status,ue)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ce,skipPristineCheck:H},this),this._onDisabledChange.forEach(Fe=>Fe(!0))}enable(ce={}){const H=this._parentMarkedDirty(ce.onlySelf);this.status=$t,this._forEachChild(ue=>{ue.enable({...ce,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ce.emitEvent}),this._updateAncestors({...ce,skipPristineCheck:H},this),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors(ce,H){this._parent&&!ce.onlySelf&&(this._parent.updateValueAndValidity(ce),ce.skipPristineCheck||this._parent._updatePristine({},H),this._parent._updateTouched({},H))}setParent(ce){this._parent=ce}getRawValue(){return this.value}updateValueAndValidity(ce={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const ue=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$t||this.status===Nn)&&this._runAsyncValidator(ue,ce.emitEvent)}const H=ce.sourceControl??this;!1!==ce.emitEvent&&(this._events.next(new en(this.value,H)),this._events.next(new Wt(this.status,H)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ce.onlySelf&&this._parent.updateValueAndValidity({...ce,sourceControl:H})}_updateTreeValidity(ce={emitEvent:!0}){this._forEachChild(H=>H._updateTreeValidity(ce)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ce.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xt:$t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ce,H){if(this.asyncValidator){this.status=Nn,this._hasOwnPendingAsyncValidator={emitEvent:!1!==H};const ue=se(this.asyncValidator(this));this._asyncValidationSubscription=ue.subscribe(Fe=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(Fe,{emitEvent:H,shouldHaveEmitted:ce})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const ce=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,ce}return!1}setErrors(ce,H={}){this.errors=ce,this._updateControlsErrors(!1!==H.emitEvent,this,H.shouldHaveEmitted)}get(ce){let H=ce;return null==H||(Array.isArray(H)||(H=H.split(".")),0===H.length)?null:H.reduce((ue,Fe)=>ue&&ue._find(Fe),this)}getError(ce,H){const ue=H?this.get(H):this;return ue&&ue.errors?ue.errors[ce]:null}hasError(ce,H){return!!this.getError(ce,H)}get root(){let ce=this;for(;ce._parent;)ce=ce._parent;return ce}_updateControlsErrors(ce,H,ue){this.status=this._calculateStatus(),ce&&this.statusChanges.emit(this.status),(ce||ue)&&this._events.next(new Wt(this.status,H)),this._parent&&this._parent._updateControlsErrors(ce,H,ue)}_initObservables(){this.valueChanges=new C.bkB,this.statusChanges=new C.bkB}_calculateStatus(){return this._allControlsDisabled()?xt:this.errors?cn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nn)?Nn:this._anyControlsHaveStatus(cn)?cn:$t}_anyControlsHaveStatus(ce){return this._anyControls(H=>H.status===ce)}_anyControlsDirty(){return this._anyControls(ce=>ce.dirty)}_anyControlsTouched(){return this._anyControls(ce=>ce.touched)}_updatePristine(ce,H){const ue=!this._anyControlsDirty(),Fe=this.pristine!==ue;this.pristine=ue,this._parent&&!ce.onlySelf&&this._parent._updatePristine(ce,H),Fe&&this._events.next(new fs(this.pristine,H))}_updateTouched(ce={},H){this.touched=this._anyControlsTouched(),this._events.next(new Ts(this.touched,H)),this._parent&&!ce.onlySelf&&this._parent._updateTouched(ce,H)}_onDisabledChange=[];_registerOnCollectionChange(ce){this._onCollectionChange=ce}_setUpdateStrategy(ce){ct(ce)&&null!=ce.updateOn&&(this._updateOn=ce.updateOn)}_parentMarkedDirty(ce){return!ce&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ce){return null}_assignValidators(ce){this._rawValidators=Array.isArray(ce)?ce.slice():ce,this._composedValidatorFn=function Fi(re){return Array.isArray(re)?ie(re):re||null}(this._rawValidators)}_assignAsyncValidators(ce){this._rawAsyncValidators=Array.isArray(ce)?ce.slice():ce,this._composedAsyncValidatorFn=function pt(re){return Array.isArray(re)?Ce(re):re||null}(this._rawAsyncValidators)}}class li extends Li{constructor(ce,H,ue){super(ri(H),Tt(ue,H)),this.controls=ce,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(ce,H){return this.controls[ce]?this.controls[ce]:(this.controls[ce]=H,H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange),H)}addControl(ce,H,ue={}){this.registerControl(ce,H),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl(ce,H={}){this.controls[ce]&&this.controls[ce]._registerOnCollectionChange(()=>{}),delete this.controls[ce],this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}setControl(ce,H,ue={}){this.controls[ce]&&this.controls[ce]._registerOnCollectionChange(()=>{}),delete this.controls[ce],H&&this.registerControl(ce,H),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains(ce){return this.controls.hasOwnProperty(ce)&&this.controls[ce].enabled}setValue(ce,H={}){On(this,0,ce),Object.keys(ce).forEach(ue=>{vn(this,!0,ue),this.controls[ue].setValue(ce[ue],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(ce,H={}){null!=ce&&(Object.keys(ce).forEach(ue=>{const Fe=this.controls[ue];Fe&&Fe.patchValue(ce[ue],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(ce={},H={}){this._forEachChild((ue,Fe)=>{ue.reset(ce?ce[Fe]:null,{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this._reduceChildren({},(ce,H,ue)=>(ce[ue]=H.getRawValue(),ce))}_syncPendingControls(){let ce=this._reduceChildren(!1,(H,ue)=>!!ue._syncPendingControls()||H);return ce&&this.updateValueAndValidity({onlySelf:!0}),ce}_forEachChild(ce){Object.keys(this.controls).forEach(H=>{const ue=this.controls[H];ue&&ce(ue,H)})}_setUpControls(){this._forEachChild(ce=>{ce.setParent(this),ce._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ce){for(const[H,ue]of Object.entries(this.controls))if(this.contains(H)&&ce(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(H,ue,Fe)=>((ue.enabled||this.disabled)&&(H[Fe]=ue.value),H))}_reduceChildren(ce,H){let ue=ce;return this._forEachChild((Fe,Ct)=>{ue=H(ue,Fe,Ct)}),ue}_allControlsDisabled(){for(const ce of Object.keys(this.controls))if(this.controls[ce].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ce){return this.controls.hasOwnProperty(ce)?this.controls[ce]:null}}class gs extends li{}const Ii=new C.nKC("",{providedIn:"root",factory:()=>xi}),xi="always";function oo(re,ce){return[...ce.path,re]}function ms(re,ce,H=xi){wt(re,ce),ce.valueAccessor.writeValue(re.value),(re.disabled||"always"===H)&&ce.valueAccessor.setDisabledState?.(re.disabled),function Dn(re,ce){ce.valueAccessor.registerOnChange(H=>{re._pendingValue=H,re._pendingChange=!0,re._pendingDirty=!0,"change"===re.updateOn&&rn(re,ce)})}(re,ce),function ps(re,ce){const H=(ue,Fe)=>{ce.valueAccessor.writeValue(ue),Fe&&ce.viewToModelUpdate(ue)};re.registerOnChange(H),ce._registerOnDestroy(()=>{re._unregisterOnChange(H)})}(re,ce),function Yi(re,ce){ce.valueAccessor.registerOnTouched(()=>{re._pendingTouched=!0,"blur"===re.updateOn&&re._pendingChange&&rn(re,ce),"submit"!==re.updateOn&&re.markAsTouched()})}(re,ce),function Jn(re,ce){if(ce.valueAccessor.setDisabledState){const H=ue=>{ce.valueAccessor.setDisabledState(ue)};re.registerOnDisabledChange(H),ce._registerOnDestroy(()=>{re._unregisterOnDisabledChange(H)})}}(re,ce)}function ut(re,ce,H=!0){const ue=()=>{};ce.valueAccessor&&(ce.valueAccessor.registerOnChange(ue),ce.valueAccessor.registerOnTouched(ue)),Qt(re,ce),re&&(ce._invokeOnDestroyCallbacks(),re._registerOnCollectionChange(()=>{}))}function st(re,ce){re.forEach(H=>{H.registerOnValidatorChange&&H.registerOnValidatorChange(ce)})}function wt(re,ce){const H=Ee(re);null!==ce.validator?re.setValidators(Y(H,ce.validator)):"function"==typeof H&&re.setValidators([H]);const ue=Te(re);null!==ce.asyncValidator?re.setAsyncValidators(Y(ue,ce.asyncValidator)):"function"==typeof ue&&re.setAsyncValidators([ue]);const Fe=()=>re.updateValueAndValidity();st(ce._rawValidators,Fe),st(ce._rawAsyncValidators,Fe)}function Qt(re,ce){let H=!1;if(null!==re){if(null!==ce.validator){const Fe=Ee(re);if(Array.isArray(Fe)&&Fe.length>0){const Ct=Fe.filter(Xt=>Xt!==ce.validator);Ct.length!==Fe.length&&(H=!0,re.setValidators(Ct))}}if(null!==ce.asyncValidator){const Fe=Te(re);if(Array.isArray(Fe)&&Fe.length>0){const Ct=Fe.filter(Xt=>Xt!==ce.asyncValidator);Ct.length!==Fe.length&&(H=!0,re.setAsyncValidators(Ct))}}}const ue=()=>{};return st(ce._rawValidators,ue),st(ce._rawAsyncValidators,ue),H}function rn(re,ce){re._pendingDirty&&re.markAsDirty(),re.setValue(re._pendingValue,{emitModelToViewChange:!1}),ce.viewToModelUpdate(re._pendingValue),re._pendingChange=!1}function Gn(re,ce){wt(re,ce)}function Ro(re,ce){if(!re.hasOwnProperty("model"))return!1;const H=re.model;return!!H.isFirstChange()||!Object.is(ce,H.currentValue)}function No(re,ce){re._syncPendingControls(),ce.forEach(H=>{const ue=H.control;"submit"===ue.updateOn&&ue._pendingChange&&(H.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}function bt(re,ce){if(!ce)return null;let H,ue,Fe;return Array.isArray(ce),ce.forEach(Ct=>{Ct.constructor===V?H=Ct:function oa(re){return Object.getPrototypeOf(re.constructor)===Z}(Ct)?ue=Ct:Fe=Ct}),Fe||ue||H||null}const Er={provide:xe,useExisting:(0,C.Rfq)(()=>Fo)},js=Promise.resolve();let Fo=(()=>{class re extends xe{callSetDisabledState;get submitted(){return(0,C.O8t)(this.submittedReactive)}_submitted=(0,C.EWP)(()=>this.submittedReactive());submittedReactive=(0,C.vPA)(!1);_directives=new Set;form;ngSubmit=new C.bkB;options;constructor(H,ue,Fe){super(),this.callSetDisabledState=Fe,this.form=new li({},ie(H),Ce(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(H){js.then(()=>{const ue=this._findContainer(H.path);H.control=ue.registerControl(H.name,H.control),ms(H.control,H,this.callSetDisabledState),H.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(H)})}getControl(H){return this.form.get(H.path)}removeControl(H){js.then(()=>{const ue=this._findContainer(H.path);ue&&ue.removeControl(H.name),this._directives.delete(H)})}addFormGroup(H){js.then(()=>{const ue=this._findContainer(H.path),Fe=new li({});Gn(Fe,H),ue.registerControl(H.name,Fe),Fe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(H){js.then(()=>{const ue=this._findContainer(H.path);ue&&ue.removeControl(H.name)})}getFormGroup(H){return this.form.get(H.path)}updateModel(H,ue){js.then(()=>{this.form.get(H.path).setValue(ue)})}setValue(H){this.control.setValue(H)}onSubmit(H){return this.submittedReactive.set(!0),No(this.form,this._directives),this.ngSubmit.emit(H),this.form._events.next(new mi(this.control)),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H=void 0){this.form.reset(H),this.submittedReactive.set(!1),this.form._events.next(new yn(this.form))}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(H){return H.pop(),H.length?this.form.get(H):this.form}static \u0275fac=function(ue){return new(ue||re)(C.rXU(b,10),C.rXU(p,10),C.rXU(Ii,8))};static \u0275dir=C.FsC({type:re,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("submit",function(Xt){return Fe.onSubmit(Xt)})("reset",function(){return Fe.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[C.Jv_([Er]),C.Vt3]})}return re})();function Lo(re,ce){const H=re.indexOf(ce);H>-1&&re.splice(H,1)}function Vd(re){return"object"==typeof re&&null!==re&&2===Object.keys(re).length&&"value"in re&&"disabled"in re}const wo=class extends Li{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(ce=null,H,ue){super(ri(H),Tt(ue,H)),this._applyFormState(ce),this._setUpdateStrategy(H),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ct(H)&&(H.nonNullable||H.initialValueIsDefault)&&(this.defaultValue=Vd(ce)?ce.value:ce)}setValue(ce,H={}){this.value=this._pendingValue=ce,this._onChange.length&&!1!==H.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==H.emitViewToModelChange)),this.updateValueAndValidity(H)}patchValue(ce,H={}){this.setValue(ce,H)}reset(ce=this.defaultValue,H={}){this._applyFormState(ce),this.markAsPristine(H),this.markAsUntouched(H),this.setValue(this.value,H),this._pendingChange=!1}_updateValue(){}_anyControls(ce){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ce){this._onChange.push(ce)}_unregisterOnChange(ce){Lo(this._onChange,ce)}registerOnDisabledChange(ce){this._onDisabledChange.push(ce)}_unregisterOnDisabledChange(ce){Lo(this._onDisabledChange,ce)}_forEachChild(ce){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ce){Vd(ce)?(this.value=this._pendingValue=ce.value,ce.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ce}},Ws={provide:ve,useExisting:(0,C.Rfq)(()=>Ft)},al=Promise.resolve();let Ft=(()=>{class re extends ve{_changeDetectorRef;callSetDisabledState;control=new wo;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new C.bkB;constructor(H,ue,Fe,Ct,Xt,Qn){super(),this._changeDetectorRef=Xt,this.callSetDisabledState=Qn,this._parent=H,this._setValidators(ue),this._setAsyncValidators(Fe),this.valueAccessor=bt(0,Ct)}ngOnChanges(H){if(this._checkForErrors(),!this._registered||"name"in H){if(this._registered&&(this._checkName(),this.formDirective)){const ue=H.name.previousValue;this.formDirective.removeControl({name:ue,path:this._getPath(ue)})}this._setUpControl()}"isDisabled"in H&&this._updateDisabled(H),Ro(H,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ms(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(H){al.then(()=>{this.control.setValue(H,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(H){const ue=H.isDisabled.currentValue,Fe=0!==ue&&(0,C.L39)(ue);al.then(()=>{Fe&&!this.control.disabled?this.control.disable():!Fe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(H){return this._parent?oo(H,this._parent):[H]}static \u0275fac=function(ue){return new(ue||re)(C.rXU(xe,9),C.rXU(b,10),C.rXU(p,10),C.rXU(w,10),C.rXU(C.gRc,8),C.rXU(Ii,8))};static \u0275dir=C.FsC({type:re,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[C.Jv_([Ws]),C.Vt3,C.OA$]})}return re})(),Bd=(()=>{class re{static \u0275fac=function(ue){return new(ue||re)};static \u0275dir=C.FsC({type:re,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return re})();const aa={provide:w,useExisting:(0,C.Rfq)(()=>Dr),multi:!0};let Dr=(()=>{class re extends Z{writeValue(H){this.setProperty("value",H??"")}registerOnChange(H){this.onChange=ue=>{H(""==ue?null:parseFloat(ue))}}static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("input",function(Xt){return Fe.onChange(Xt.target.value)})("blur",function(){return Fe.onTouched()})},standalone:!1,features:[C.Jv_([aa]),C.Vt3]})}return re})();const Nh={provide:w,useExisting:(0,C.Rfq)(()=>Yt),multi:!0};let Sr=(()=>{class re{_accessors=[];add(H,ue){this._accessors.push([H,ue])}remove(H){for(let ue=this._accessors.length-1;ue>=0;--ue)if(this._accessors[ue][1]===H)return void this._accessors.splice(ue,1)}select(H){this._accessors.forEach(ue=>{this._isSameGroup(ue,H)&&ue[1]!==H&&ue[1].fireUncheck(H.value)})}_isSameGroup(H,ue){return!!H[0].control&&H[0]._parent===ue._control._parent&&H[1].name===ue.name}static \u0275fac=function(ue){return new(ue||re)};static \u0275prov=C.jDH({token:re,factory:re.\u0275fac,providedIn:"root"})}return re})(),Yt=(()=>{class re extends Z{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=(0,C.WQX)(Ii,{optional:!0})??xi;constructor(H,ue,Fe,Ct){super(H,ue),this._registry=Fe,this._injector=Ct}ngOnInit(){this._control=this._injector.get(ve),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(H){this._state=H===this.value,this.setProperty("checked",this._state)}registerOnChange(H){this._fn=H,this.onChange=()=>{H(this.value),this._registry.select(this)}}setDisabledState(H){(this.setDisabledStateFired||H||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",H),this.setDisabledStateFired=!0}fireUncheck(H){this.writeValue(H)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(ue){return new(ue||re)(C.rXU(C.sFG),C.rXU(C.aKT),C.rXU(Sr),C.rXU(C.zZn))};static \u0275dir=C.FsC({type:re,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("change",function(){return Fe.onChange()})("blur",function(){return Fe.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[C.Jv_([Nh]),C.Vt3]})}return re})();const $n=new C.nKC(""),dl={provide:ve,useExisting:(0,C.Rfq)(()=>Is)};let Is=(()=>{class re extends ve{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(H){}model;update=new C.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(H,ue,Fe,Ct,Xt){super(),this._ngModelWarningConfig=Ct,this.callSetDisabledState=Xt,this._setValidators(H),this._setAsyncValidators(ue),this.valueAccessor=bt(0,Fe)}ngOnChanges(H){if(this._isControlChanged(H)){const ue=H.form.previousValue;ue&&ut(ue,this,!1),ms(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ro(H,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ut(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_isControlChanged(H){return H.hasOwnProperty("form")}static \u0275fac=function(ue){return new(ue||re)(C.rXU(b,10),C.rXU(p,10),C.rXU(w,10),C.rXU($n,8),C.rXU(Ii,8))};static \u0275dir=C.FsC({type:re,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[C.Jv_([dl]),C.Vt3,C.OA$]})}return re})();const Hd={provide:xe,useExisting:(0,C.Rfq)(()=>Vi)};let Vi=(()=>{class re extends xe{callSetDisabledState;get submitted(){return(0,C.O8t)(this._submittedReactive)}set submitted(H){this._submittedReactive.set(H)}_submitted=(0,C.EWP)(()=>this._submittedReactive());_submittedReactive=(0,C.vPA)(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new C.bkB;constructor(H,ue,Fe){super(),this.callSetDisabledState=Fe,this._setValidators(H),this._setAsyncValidators(ue)}ngOnChanges(H){H.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(H){const ue=this.form.get(H.path);return ms(ue,H,this.callSetDisabledState),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(H),ue}getControl(H){return this.form.get(H.path)}removeControl(H){ut(H.control||null,H,!1),function ol(re,ce){const H=re.indexOf(ce);H>-1&&re.splice(H,1)}(this.directives,H)}addFormGroup(H){this._setUpFormContainer(H)}removeFormGroup(H){this._cleanUpFormContainer(H)}getFormGroup(H){return this.form.get(H.path)}addFormArray(H){this._setUpFormContainer(H)}removeFormArray(H){this._cleanUpFormContainer(H)}getFormArray(H){return this.form.get(H.path)}updateModel(H,ue){this.form.get(H.path).setValue(ue)}onSubmit(H){return this._submittedReactive.set(!0),No(this.form,this.directives),this.ngSubmit.emit(H),this.form._events.next(new mi(this.control)),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H=void 0){this.form.reset(H),this._submittedReactive.set(!1),this.form._events.next(new yn(this.form))}_updateDomValue(){this.directives.forEach(H=>{const ue=H.control,Fe=this.form.get(H.path);ue!==Fe&&(ut(ue||null,H),(re=>re instanceof wo)(Fe)&&(ms(Fe,H,this.callSetDisabledState),H.control=Fe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(H){const ue=this.form.get(H.path);Gn(ue,H),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(H){if(this.form){const ue=this.form.get(H.path);ue&&function Gs(re,ce){return Qt(re,ce)}(ue,H)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wt(this.form,this),this._oldForm&&Qt(this._oldForm,this)}static \u0275fac=function(ue){return new(ue||re)(C.rXU(b,10),C.rXU(p,10),C.rXU(Ii,8))};static \u0275dir=C.FsC({type:re,selectors:[["","formGroup",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("submit",function(Xt){return Fe.onSubmit(Xt)})("reset",function(){return Fe.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[C.Jv_([Hd]),C.Vt3,C.OA$]})}return re})();const Ud={provide:ve,useExisting:(0,C.Rfq)(()=>Uo)};let Uo=(()=>{class re extends ve{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(H){}model;update=new C.bkB;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(H,ue,Fe,Ct,Xt){super(),this._ngModelWarningConfig=Xt,this._parent=H,this._setValidators(ue),this._setAsyncValidators(Fe),this.valueAccessor=bt(0,Ct)}ngOnChanges(H){this._added||this._setUpControl(),Ro(H,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}get path(){return oo(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(ue){return new(ue||re)(C.rXU(xe,13),C.rXU(b,10),C.rXU(p,10),C.rXU(w,10),C.rXU($n,8))};static \u0275dir=C.FsC({type:re,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[C.Jv_([Ud]),C.Vt3,C.OA$]})}return re})();const zn={provide:w,useExisting:(0,C.Rfq)(()=>xs),multi:!0};function Ir(re,ce){return null==re?`${ce}`:(ce&&"object"==typeof ce&&(ce="Object"),`${re}: ${ce}`.slice(0,50))}let xs=(()=>{class re extends Z{value;_optionMap=new Map;_idCounter=0;set compareWith(H){this._compareWith=H}_compareWith=Object.is;writeValue(H){this.value=H;const Fe=Ir(this._getOptionId(H),H);this.setProperty("value",Fe)}registerOnChange(H){this.onChange=ue=>{this.value=this._getOptionValue(ue),H(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(H){for(const ue of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ue),H))return ue;return null}_getOptionValue(H){const ue=function vt(re){return re.split(":")[0]}(H);return this._optionMap.has(ue)?this._optionMap.get(ue):H}static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("change",function(Xt){return Fe.onChange(Xt.target.value)})("blur",function(){return Fe.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[C.Jv_([zn]),C.Vt3]})}return re})(),xr=(()=>{class re{_element;_renderer;_select;id;constructor(H,ue,Fe){this._element=H,this._renderer=ue,this._select=Fe,this._select&&(this.id=this._select._registerOption())}set ngValue(H){null!=this._select&&(this._select._optionMap.set(this.id,H),this._setElementValue(Ir(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._setElementValue(H),this._select&&this._select.writeValue(this._select.value)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(ue){return new(ue||re)(C.rXU(C.aKT),C.rXU(C.sFG),C.rXU(xs,9))};static \u0275dir=C.FsC({type:re,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return re})();const Go={provide:w,useExisting:(0,C.Rfq)(()=>Zt),multi:!0};function ca(re,ce){return null==re?`${ce}`:("string"==typeof ce&&(ce=`'${ce}'`),ce&&"object"==typeof ce&&(ce="Object"),`${re}: ${ce}`.slice(0,50))}let Zt=(()=>{class re extends Z{value;_optionMap=new Map;_idCounter=0;set compareWith(H){this._compareWith=H}_compareWith=Object.is;writeValue(H){let ue;if(this.value=H,Array.isArray(H)){const Fe=H.map(Ct=>this._getOptionId(Ct));ue=(Ct,Xt)=>{Ct._setSelected(Fe.indexOf(Xt.toString())>-1)}}else ue=(Fe,Ct)=>{Fe._setSelected(!1)};this._optionMap.forEach(ue)}registerOnChange(H){this.onChange=ue=>{const Fe=[],Ct=ue.selectedOptions;if(void 0!==Ct){const Xt=Ct;for(let Qn=0;Qn<Xt.length;Qn++){const Xo=this._getOptionValue(Xt[Qn].value);Fe.push(Xo)}}else{const Xt=ue.options;for(let Qn=0;Qn<Xt.length;Qn++){const Pr=Xt[Qn];if(Pr.selected){const Xo=this._getOptionValue(Pr.value);Fe.push(Xo)}}}this.value=Fe,H(Fe)}}_registerOption(H){const ue=(this._idCounter++).toString();return this._optionMap.set(ue,H),ue}_getOptionId(H){for(const ue of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ue)._value,H))return ue;return null}_getOptionValue(H){const ue=function jo(re){return re.split(":")[0]}(H);return this._optionMap.has(ue)?this._optionMap.get(ue)._value:H}static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ue,Fe){1&ue&&C.bIt("change",function(Xt){return Fe.onChange(Xt.target)})("blur",function(){return Fe.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[C.Jv_([Go]),C.Vt3]})}return re})(),Mr=(()=>{class re{_element;_renderer;_select;id;_value;constructor(H,ue,Fe){this._element=H,this._renderer=ue,this._select=Fe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(H){null!=this._select&&(this._value=H,this._setElementValue(ca(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._select?(this._value=H,this._setElementValue(ca(this.id,H)),this._select.writeValue(this._select.value)):this._setElementValue(H)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}_setSelected(H){this._renderer.setProperty(this._element.nativeElement,"selected",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(ue){return new(ue||re)(C.rXU(C.aKT),C.rXU(C.sFG),C.rXU(Zt,9))};static \u0275dir=C.FsC({type:re,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return re})(),Bi=(()=>{class re{_validator=O;_onChange;_enabled;ngOnChanges(H){if(this.inputName in H){const ue=this.normalizeInput(H[this.inputName].currentValue);this._enabled=this.enabled(ue),this._validator=this._enabled?this.createValidator(ue):O,this._onChange&&this._onChange()}}validate(H){return this._validator(H)}registerOnValidatorChange(H){this._onChange=H}enabled(H){return null!=H}static \u0275fac=function(ue){return new(ue||re)};static \u0275dir=C.FsC({type:re,features:[C.OA$]})}return re})();const ho={provide:b,useExisting:(0,C.Rfq)(()=>$s),multi:!0};let $s=(()=>{class re extends Bi{required;inputName="required";normalizeInput=C.L39;createValidator=H=>F;enabled(H){return H}static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(ue,Fe){2&ue&&C.BMQ("required",Fe._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[C.Jv_([ho]),C.Vt3]})}return re})();const Xi={provide:b,useExisting:(0,C.Rfq)(()=>ln),multi:!0};let ln=(()=>{class re extends Bi{pattern;inputName="pattern";normalizeInput=H=>H;createValidator=H=>B(H);static \u0275fac=(()=>{let H;return function(Fe){return(H||(H=C.xGo(re)))(Fe||re)}})();static \u0275dir=C.FsC({type:re,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(ue,Fe){2&ue&&C.BMQ("pattern",Fe._enabled?Fe.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[C.Jv_([Xi]),C.Vt3]})}return re})(),Yo=(()=>{class re{static \u0275fac=function(ue){return new(ue||re)};static \u0275mod=C.$C({type:re});static \u0275inj=C.G2t({})}return re})();class pi extends Li{constructor(ce,H,ue){super(ri(H),Tt(ue,H)),this.controls=ce,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(ce){return this.controls[this._adjustIndex(ce)]}push(ce,H={}){this.controls.push(ce),this._registerControl(ce),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}insert(ce,H,ue={}){this.controls.splice(ce,0,H),this._registerControl(H),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt(ce,H={}){let ue=this._adjustIndex(ce);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:H.emitEvent})}setControl(ce,H,ue={}){let Fe=this._adjustIndex(ce);Fe<0&&(Fe=0),this.controls[Fe]&&this.controls[Fe]._registerOnCollectionChange(()=>{}),this.controls.splice(Fe,1),H&&(this.controls.splice(Fe,0,H),this._registerControl(H)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ce,H={}){On(this,0,ce),ce.forEach((ue,Fe)=>{vn(this,!1,Fe),this.at(Fe).setValue(ue,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(ce,H={}){null!=ce&&(ce.forEach((ue,Fe)=>{this.at(Fe)&&this.at(Fe).patchValue(ue,{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(ce=[],H={}){this._forEachChild((ue,Fe)=>{ue.reset(ce[Fe],{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H,this),this._updateTouched(H,this),this.updateValueAndValidity(H)}getRawValue(){return this.controls.map(ce=>ce.getRawValue())}clear(ce={}){this.controls.length<1||(this._forEachChild(H=>H._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ce.emitEvent}))}_adjustIndex(ce){return ce<0?ce+this.length:ce}_syncPendingControls(){let ce=this.controls.reduce((H,ue)=>!!ue._syncPendingControls()||H,!1);return ce&&this.updateValueAndValidity({onlySelf:!0}),ce}_forEachChild(ce){this.controls.forEach((H,ue)=>{ce(H,ue)})}_updateValue(){this.value=this.controls.filter(ce=>ce.enabled||this.disabled).map(ce=>ce.value)}_anyControls(ce){return this.controls.some(H=>H.enabled&&ce(H))}_setUpControls(){this._forEachChild(ce=>this._registerControl(ce))}_allControlsDisabled(){for(const ce of this.controls)if(ce.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ce){ce.setParent(this),ce._registerOnCollectionChange(this._onCollectionChange)}_find(ce){return this.at(ce)??null}}function Ci(re){return!!re&&(void 0!==re.asyncValidators||void 0!==re.validators||void 0!==re.updateOn)}let Cs=(()=>{class re{useNonNullable=!1;get nonNullable(){const H=new re;return H.useNonNullable=!0,H}group(H,ue=null){const Fe=this._reduceControls(H);let Ct={};return Ci(ue)?Ct=ue:null!==ue&&(Ct.validators=ue.validator,Ct.asyncValidators=ue.asyncValidator),new li(Fe,Ct)}record(H,ue=null){const Fe=this._reduceControls(H);return new gs(Fe,ue)}control(H,ue,Fe){let Ct={};return this.useNonNullable?(Ci(ue)?Ct=ue:(Ct.validators=ue,Ct.asyncValidators=Fe),new wo(H,{...Ct,nonNullable:!0})):new wo(H,ue,Fe)}array(H,ue,Fe){const Ct=H.map(Xt=>this._createControl(Xt));return new pi(Ct,ue,Fe)}_reduceControls(H){const ue={};return Object.keys(H).forEach(Fe=>{ue[Fe]=this._createControl(H[Fe])}),ue}_createControl(H){return H instanceof wo||H instanceof Li?H:Array.isArray(H)?this.control(H[0],H.length>1?H[1]:null,H.length>2?H[2]:null):this.control(H)}static \u0275fac=function(ue){return new(ue||re)};static \u0275prov=C.jDH({token:re,factory:re.\u0275fac,providedIn:"root"})}return re})(),fl=(()=>{class re{static withConfig(H){return{ngModule:re,providers:[{provide:Ii,useValue:H.callSetDisabledState??xi}]}}static \u0275fac=function(ue){return new(ue||re)};static \u0275mod=C.$C({type:re});static \u0275inj=C.G2t({imports:[Yo]})}return re})(),gl=(()=>{class re{static withConfig(H){return{ngModule:re,providers:[{provide:$n,useValue:H.warnOnNgModelWithFormControl??"always"},{provide:Ii,useValue:H.callSetDisabledState??xi}]}}static \u0275fac=function(ue){return new(ue||re)};static \u0275mod=C.$C({type:re});static \u0275inj=C.G2t({imports:[Yo]})}return re})()},13734:(ze,Oe,n)=>{"use strict";function C(x,G){return x.reduce((X,W,ne)=>(X[W]=G[ne],X),{})}n.d(Oe,{e:()=>C})},14583:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.pad.ZeroPadding={pad:function(x,G){var X=4*G;x.clamp(),x.sigBytes+=X-(x.sigBytes%X||X)},unpad:function(x){var G=x.words,X=x.sigBytes-1;for(X=x.sigBytes-1;X>=0;X--)if(G[X>>>2]>>>24-X%4*8&255){x.sigBytes=X+1;break}}},C.pad.ZeroPadding)},15152:(ze,Oe,n)=>{"use strict";n.d(Oe,{m:()=>G});var C=n(43794),x=n(8510);class G extends C.B{constructor(W=1/0,ne=1/0,z=x.U){super(),this._bufferSize=W,this._windowTime=ne,this._timestampProvider=z,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ne===1/0,this._bufferSize=Math.max(1,W),this._windowTime=Math.max(1,ne)}next(W){const{isStopped:ne,_buffer:z,_infiniteTimeWindow:Z,_timestampProvider:w,_windowTime:he}=this;ne||(z.push(W),!Z&&z.push(w.now()+he)),this._trimBuffer(),super.next(W)}_subscribe(W){this._throwIfClosed(),this._trimBuffer();const ne=this._innerSubscribe(W),{_infiniteTimeWindow:z,_buffer:Z}=this,w=Z.slice();for(let he=0;he<w.length&&!W.closed;he+=z?1:2)W.next(w[he]);return this._checkFinalizedStatuses(W),ne}_trimBuffer(){const{_bufferSize:W,_timestampProvider:ne,_buffer:z,_infiniteTimeWindow:Z}=this,w=(Z?1:2)*W;if(W<1/0&&w<z.length&&z.splice(0,z.length-w),!Z){const he=ne.now();let k=0;for(let me=1;me<z.length&&z[me]<=he;me+=2)k=me;k&&z.splice(0,k+1)}}}},15381:(ze,Oe,n)=>{"use strict";n.d(Oe,{L:()=>x});const x=(0,n(37464).F3)("Geolocation",{web:()=>n.e(2920).then(n.bind(n,70539)).then(G=>new G.GeolocationWeb)})},15454:(ze,Oe,n)=>{"use strict";n.d(Oe,{D:()=>W});const{isArray:C}=Array,{getPrototypeOf:x,prototype:G,keys:X}=Object;function W(z){if(1===z.length){const Z=z[0];if(C(Z))return{args:Z,keys:null};if(function ne(z){return z&&"object"==typeof z&&x(z)===G}(Z)){const w=X(Z);return{args:w.map(he=>Z[he]),keys:w}}}return{args:z,keys:null}}},15487:function(ze,Oe,n){var C,ne;ze.exports=(C=n(95275),ne=C.enc.Utf8,void(C.algo.HMAC=C.lib.Base.extend({init:function(w,he){w=this._hasher=new w.init,"string"==typeof he&&(he=ne.parse(he));var k=w.blockSize,me=4*k;he.sigBytes>me&&(he=w.finalize(he)),he.clamp();for(var le=this._oKey=he.clone(),R=this._iKey=he.clone(),V=le.words,ge=R.words,E=0;E<k;E++)V[E]^=1549556828,ge[E]^=909522486;le.sigBytes=R.sigBytes=me,this.reset()},reset:function(){var w=this._hasher;w.reset(),w.update(this._iKey)},update:function(w){return this._hasher.update(w),this},finalize:function(w){var he=this._hasher,k=he.finalize(w);return he.reset(),he.finalize(this._oKey.clone().concat(k))}})))},15524:(ze,Oe,n)=>{"use strict";n.d(Oe,{P:()=>C});class C{constructor(){}}},17593:(ze,Oe,n)=>{"use strict";n.d(Oe,{N:()=>G,S:()=>x});var C=n(20452);function x(X){return(0,C.T)(X?.lift)}function G(X){return W=>{if(x(W))return W.lift(function(ne){try{return X(ne,this)}catch(z){this.error(z)}});throw new TypeError("Unable to lift unknown Observable type")}}},18645:(ze,Oe,n)=>{"use strict";n.d(Oe,{$:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},19078:(ze,Oe,n)=>{"use strict";n.d(Oe,{s:()=>X});var C=n(23364),x=n(17593),G=n(31979);function X(W){return W<=0?()=>C.w:(0,x.N)((ne,z)=>{let Z=0;ne.subscribe((0,G._)(z,w=>{++Z<=W&&(z.next(w),W<=Z&&z.complete())}))})}},20028:(ze,Oe,n)=>{"use strict";n.d(Oe,{u:()=>W});var C=n(36369),x=n(43794),G=n(70088),X=n(17593);function W(z={}){const{connector:Z=()=>new x.B,resetOnError:w=!0,resetOnComplete:he=!0,resetOnRefCountZero:k=!0}=z;return me=>{let le,R,V,ge=0,E=!1,b=!1;const p=()=>{R?.unsubscribe(),R=void 0},j=()=>{p(),le=V=void 0,E=b=!1},T=()=>{const I=le;j(),I?.unsubscribe()};return(0,X.N)((I,oe)=>{ge++,!b&&!E&&p();const F=V=V??Z();oe.add(()=>{ge--,0===ge&&!b&&!E&&(R=ne(T,k))}),F.subscribe(oe),!le&&ge>0&&(le=new G.Ms({next:N=>F.next(N),error:N=>{b=!0,p(),R=ne(j,w,N),F.error(N)},complete:()=>{E=!0,p(),R=ne(j,he),F.complete()}}),(0,C.Tg)(I).subscribe(le))})(me)}}function ne(z,Z,...w){if(!0===Z)return void z();if(!1===Z)return;const he=new G.Ms({next:()=>{he.unsubscribe(),z()}});return(0,C.Tg)(Z(...w)).subscribe(he)}},20452:(ze,Oe,n)=>{"use strict";function C(x){return"function"==typeof x}n.d(Oe,{T:()=>C})},20855:(ze,Oe,n)=>{"use strict";n.d(Oe,{E:()=>G,b:()=>X});var C=n(74399);const G=new(n(62068).q)(C.R),X=G},21272:function(ze,Oe,n){var C,X;ze.exports=(C=n(95275),X=C.lib.WordArray,C.enc.Base64={stringify:function(Z){var w=Z.words,he=Z.sigBytes,k=this._map;Z.clamp();for(var me=[],le=0;le<he;le+=3)for(var E=(w[le>>>2]>>>24-le%4*8&255)<<16|(w[le+1>>>2]>>>24-(le+1)%4*8&255)<<8|w[le+2>>>2]>>>24-(le+2)%4*8&255,b=0;b<4&&le+.75*b<he;b++)me.push(k.charAt(E>>>6*(3-b)&63));var p=k.charAt(64);if(p)for(;me.length%4;)me.push(p);return me.join("")},parse:function(Z){var w=Z.length,he=this._map,k=this._reverseMap;if(!k){k=this._reverseMap=[];for(var me=0;me<he.length;me++)k[he.charCodeAt(me)]=me}var le=he.charAt(64);if(le){var R=Z.indexOf(le);-1!==R&&(w=R)}return function z(Z,w,he){for(var k=[],me=0,le=0;le<w;le++)if(le%4){var R=he[Z.charCodeAt(le-1)]<<le%4*2,V=he[Z.charCodeAt(le)]>>>6-le%4*2;k[me>>>2]|=(R|V)<<24-me%4*8,me++}return X.create(k,me)}(Z,w,k)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},C.enc.Base64)},21376:(ze,Oe,n)=>{"use strict";n.d(Oe,{v:()=>X});var C=n(32040),x=n(58170),G=n(98580);class X extends G.g{get Direction(){return this._Direction}set Direction(ne){this._Direction!=ne&&(this._Direction=ne,this.Language=C.d.GetResource(ne?"ComLanguageArabic":"ComLanguageEnglish"))}get IsMinimized(){return this._IsMinimized}set IsMinimized(ne){this._IsMinimized!=ne&&(this._IsMinimized=ne)}get Language(){return this._Language}set Language(ne){this._Language!=ne&&(this._Language=ne)}get TabDataCollection(){return this._tabDataCollection}set TabDataCollection(ne){this._tabDataCollection=ne}constructor(){super(),this.cmdLoadPage=new x.Yk,this.OnChange=new x.Yk,this.AssignUserToCompanyVisibility="1"==C.d.SessionManager.UserID,this.OfflineAdmin=!(!C.d.SessionManager.IsOffline||"1"!=C.d.SessionManager.RoleID),this.ArabicVisibility=!(C.d.SessionManager.LicenseSettings.ContainsKey("Arabic")&&"FALSE"==C.d.SessionManager.LicenseSettings.Arabic.toUpperCase())}ClearMenu(){try{null!=this._tabDataCollection&&this._tabDataCollection.Clear()}catch{this._tabDataCollection.Clear()}}}},22073:(ze,Oe,n)=>{"use strict";n.d(Oe,{J7:()=>_,GP:()=>Y,cY:()=>se,qg:()=>ke,so:()=>J});var C=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function X(xe){if(xe||(xe=new Date),xe instanceof Date){const ve=new Date(xe);return ve.setMilliseconds(0),ve}if(function x(xe){const ve=xe.match(C);if(ve){const A=Number(ve[2]);if(A<1||A>12)return!1;if(void 0!==typeof ve[3]){const Se=Number(ve[3]);if(Se<1||Se>31)return!1}if(void 0!==typeof ve[4]){const Se=Number(ve[4]);if(Se<0||Se>23)return!1}return!0}return!1}(xe=xe.trim()))return new Date(function G(xe){const ve=xe.match(C);return ve&&typeof ve[4]>"u"?xe+="T00:00:00":xe}(xe));throw new Error(`Non ISO 8601 compliant date (${xe}).`)}var W="1999-03-04T02:05:01.000Z",ne=new Map,z=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],Z=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],w=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],he={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function k(xe){if(/^[+-]\d{2}:\d{2}/.test(xe))return 6;if(/^[+-]\d{4}/.test(xe))return 5;throw new Error("Invalid offset format")}var me=["MMMM","MMM","dddd","ddd"],le=new Map([...z,...Z,...w].map(xe=>[xe[0],xe])),R=new Map,V=["full","long","medium","short"],ge=xe=>String(xe).padStart(2,"0"),E=xe=>String(xe).padStart(2,"0");function b(xe){return"literal"===xe.type&&(xe.value=xe.value.normalize("NFKC")),xe}function T(xe,ve="Z"){const A=String(Math.floor(Math.abs(xe/60))).padStart(2,"0"),Se=String(Math.abs(xe%60)).padStart(2,"0"),Re=xe<0?"-":"+";return"ZZ"===ve?`${Re}${A}${Se}`:`${Re}${A}:${Se}`}function oe(xe,ve="Z"){if(!(Se=>{switch(Se){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(xe);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(xe)}})(ve))throw new Error(`Invalid offset: ${xe}`);return xe}function N(xe){return["numeric","2-digit"].includes(xe.partValue)}function S(xe,ve){const A=R.get(ve);if(A&&A[xe])return A[xe];const Se=new Date(W);Se.setUTCHours("am"===xe?5:20);const be=new Intl.DateTimeFormat(ve,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(Se).map(b).find(He=>"dayPeriod"===He.type);return be?(R.set(ve,Object.assign(A||{},{[xe]:be.value})),be.value):xe}function O(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function ae(xe,ve){const A=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:ve,hourCycle:"h23"}).formatToParts(xe).map(b),Se={};return A.forEach(Re=>{Se[Re.type]=Re.value}),new Date(`${Se.year}-${Se.month}-${Se.day}T${Se.hour}:${Se.minute}:${Se.second}Z`)}function se(xe,ve="UTC",A="device",Se="Z"){var Re;A="device"===A?null!=(Re=O())?Re:"utc":A;const be=X(xe),He=ae(be,ve),Ne=ae(be,A);return T(Math.round((Ne.getTime()-He.getTime())/1e3/60),Se)}function _(xe){const ve=X(xe);return ve.setHours(0,0,0),ve}function K(xe,ve){if(V.includes(xe)||"object"==typeof xe)return function ee(xe,ve){const A={timeZone:"UTC"};"string"==typeof xe?A.dateStyle=xe:("date"in xe&&(A.dateStyle=xe.date),"time"in xe&&(A.timeStyle=xe.time));const Se=new Intl.DateTimeFormat(ve,A),Re=Se.formatToParts(new Date(W)).map(b),He=Se.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(b).find(Ke=>"hour"===Ke.type),Ne=He&&"23"===He.value?24:12;return Re.map(Ke=>{const De=Ke.type,Ae=function U(xe,ve,A,Se,Re){const be=ve.length,He=!isNaN(Number(ve));let Ne;switch(xe){case"year":return le.get(2===be?"YY":"YYYY");case"month":return He?le.get(1===be?"M":"MM"):"long"===(Ne=ie(A,xe,ve),Ne)?le.get("MMMM"):le.get("MMM");case"day":return le.get(1===be?"D":"DD");case"weekday":switch(Ne=ie(A,xe,ve),Ne){case"narrow":return le.get("d");case"short":return le.get("ddd");default:return le.get("dddd")}case"hour":return le.get(12===Se?1===be?"h":"hh":1===be?"H":"HH");case"minute":return le.get(1===be?"m":"mm");case"second":return le.get(1===be?"s":"ss");case"dayPeriod":return/^[A-Z]+$/u.test(ve)?le.get("A"):le.get("a");case"literal":return[ve,{literal:ve},new RegExp("")];case"timeZoneName":return le.get("full"===Re.timeStyle?"Z":"ZZ");default:return}}(Ke.type,Ke.value,ve,"hour"===Ke.type?Ne:void 0,A);if(void 0===Ae)return;const je=Ae[1][De];return je?(Ae[2]||(Ae[2]=new RegExp(`${Ae[0]}`,"g")),{option:{[De]:je},partName:De,partValue:je,token:Ae[0],pattern:Ae[2],hour12:12===Ne}):void 0}).filter(Ke=>!!Ke)}(xe,ve);let A=xe,Se=0;const Re=Ae=>{if(Ae[2]||(Ae[2]=new RegExp(`(.)?(${Ae[0]})`,"g")),Ae[2].test(A)){let je=0;return A=A.replace(Ae[2],($e,nt,gt)=>"\\"===nt?gt:`${"string"==typeof nt?nt:""}{!${je++?Se:Se++}!}`),!!je}return!1};function He(Ae,[je,$e,nt]){const gt=Object.keys($e)[0];return{option:$e,partName:gt,partValue:$e[gt],token:je,pattern:nt,hour12:Ae}}const Ke=function be(Ae){const je=Ae.map(nt=>nt.partName),$e=new Set(je);if(je.length>$e.size)throw new Error("Cannot reuse format tokens.");return Ae}(z.filter(Re).concat(Z.filter(Re)).map(He.bind(null,!1)).concat(w.filter(Re).map(He.bind(null,!0)))),De=/^\{!(\d+)!\}$/;return A.split(/(\{!\d+!\})/).map(Ae=>{const je=Ae.match(De);return je?Ke[Number(je[1])]:{option:{literal:Ae},partName:"literal",partValue:Ae,token:Ae,pattern:new RegExp(""),hour12:!1}}).filter(Ae=>!("literal"===Ae.partName&&""===Ae.partValue))}function ie(xe,ve,A){if(!ne.has(xe)){const Re=new Date(W),be=[3,8,9,7,6,4,3],He=["weekday","month","dayPeriod"],Ne=["long","short","narrow"],Ke={};for(let De=0;De<12;De++){Re.setMonth(0+De),De in be&&Re.setDate(be[De]),Re.setUTCHours(8+De);for(const Ae of Ne){const je=new Intl.DateTimeFormat(xe,He.reduce(($e,nt)=>Object.assign($e,{[nt]:Ae}),{hour12:!0,timeZone:"UTC"})).formatToParts(Re).map(b);if("long"===Ae||"short"===Ae){const nt=new Intl.DateTimeFormat(xe,{dateStyle:"short"===Ae?"medium":"long",timeZone:"UTC"}).formatToParts(Re).map(b).find(Qe=>"month"===Qe.type),gt=je.findIndex(Qe=>"month"===Qe.type);gt>-1&&nt&&(je[gt]=nt)}je.forEach($e=>{if("literal"===$e.type)return;const nt=$e.type;Ke[nt]=Object.assign(Ke[nt]||{},{[$e.value]:Ae})})}}ne.set(xe,Ke)}const Se=ne.get(xe);return Se?Se[ve][A]:void 0}function J(xe,ve="+00:00"){const A="+"===ve.slice(0,1);return function B(xe,ve="+00:00"){const A=X(xe),Se=(()=>{switch(k(ve)){case 5:return"ZZ";case 6:return"Z"}})(),Re=function I(xe,ve){oe(xe,ve);const[A,Se,Re,be]=xe.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),He=60*Number(Re)+Number(be);return"+"===Se?He:-He}(ve,Se);return new Date(A.getTime()+1e3*Re*60)}(xe,ve.replace(A?"+":"-",A?"-":"+"))}function Y(xe,ve="long",A="device",Se=!1,Re){let be,He;return"object"==typeof xe&&!(xe instanceof Date)&&({date:xe,format:ve,locale:A,genitive:Se,partFilter:Re,tz:be}=xe),"ISO8601"===ve?X(xe).toISOString():(be&&(He=se(xe,"utc",be,function v(xe){return"string"==typeof xe?xe.includes("ZZ")?"ZZ":"Z":"time"in xe&&"full"===xe.time?"Z":"ZZ"}(ve))),be??(be=O()),"utc"!==be?.toLowerCase()&&(xe=J(xe,se(xe,be,"utc"))),(!A||"device"===A)&&(A=function Ce(){return Intl.DateTimeFormat().resolvedOptions().locale}()),function p(xe,ve,A,Se=!1,Re=null){const be=function j(xe,ve,A,Se=!1){const Re=X(xe),be=ve.filter(Ae=>Ae.hour12),He=ve.filter(Ae=>!Ae.hour12),Ne=[],Ke=[];function De(Ae,je=!1){const $e=`${A}-u-hc-${je?"h12":"h23"}`;if(Ne.push(...new Intl.DateTimeFormat($e,Ae.reduce((nt,gt)=>"literal"===gt.partName?nt:(Se&&me.includes(gt.token)&&Ke.push(gt),Object.assign(nt,gt.option)),{timeZone:"UTC"})).formatToParts(Re).map(b)),Se&&Ke.length)for(const nt of Ke){let gt=[];switch(nt.token){case"MMMM":gt=new Intl.DateTimeFormat($e,{dateStyle:"long",timeZone:"UTC"}).formatToParts(Re).map(b);break;case"MMM":gt=new Intl.DateTimeFormat($e,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(Re).map(b)}const Qe=gt.find(at=>at.type===nt.partName),mt=Ne.findIndex(at=>at.type===nt.partName);Qe&&mt>-1&&(Ne[mt]=Qe)}}return be.length&&De(be,!0),He.length&&De(He),Ne.reduce((Ae,je)=>(Ae[je.type]=je.value,Ae),{})}(xe,ve,A,Se),He=X(xe);function Ne({partName:Ke,partValue:De,token:Ae}){if("literal"===Ke)return De;const je=be[Ke];if("hour"===Ke&&"H"===Ae)return je.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(Ae)&&1===je.length)return`0${je}`;if("dayPeriod"===Ke){const $e=S(He.getUTCHours()<12?"am":"pm",A);return"A"===Ae?$e.toUpperCase():$e.toLowerCase()}return"timeZoneName"===Ke?Re??T(-1*He.getTimezoneOffset(),Ae):je}return ve.map(Ke=>({...Ke,value:Ne(Ke)}))}(xe,K(ve,A).filter(Re??(()=>!0)),A,Se,He).map(Ne=>Ne.value).join(""))}function Le(xe,ve="en",A=!1){const Se=(Re,be)=>Array(Re).fill("").map((He,Ne)=>`${be(Ne)}`);if("M"===xe)return Se(12,Re=>Re+1);if("MM"===xe)return Se(12,Re=>{const be=Re+1;return be<10?`0${be}`:be});if(xe.startsWith("M"))return Le("MM").map(Re=>Y(`2000-${Re}-05`,xe,ve,A));if(xe.startsWith("d"))return Se(7,Re=>`0${Re+2}`).map(Re=>Y(`2022-10-${Re}`,xe,ve));if("a"===xe)return[S("am",ve).toLowerCase(),S("pm",ve).toLowerCase()];if("A"===xe)return[S("am",ve).toUpperCase(),S("pm",ve).toUpperCase()];if(xe.startsWith("Y")){const Re=(new Date).getFullYear();return Se(120,be=>be+1).reduce((be,He)=>("120"!==He&&be.push(Y(`${Re+Number(He)}-06-06`,xe,ve)),be.unshift(Y(Re-Number(He)+"-06-06",xe,ve)),be),[Y(`${Re}-06-06`,xe,ve)])}return xe.startsWith("D")?Se(31,Re=>`${"DD"===xe&&Re<9?"0":""}${Re+1}`):xe.startsWith("H")?Se(24,Re=>`${"HH"===xe&&Re<10?"0":""}${Re}`):xe.startsWith("h")?Se(12,Re=>`${"hh"===xe&&Re<9?"0":""}${Re+1}`):xe.startsWith("m")||xe.startsWith("s")?Se(60,Re=>`${xe.length>1&&Re<10?"0":""}${Re}`):[]}function ke(xe,ve="ISO8601",A="device"){let Re,Se=()=>!0,be="backward";if("object"==typeof xe?({date:Re,format:ve="ISO8601",locale:A="device",dateOverflow:be="backward",partFilter:Se=()=>!0}=xe):Re=xe,!Re)throw new Error("parse() requires a date string.");const He=()=>{throw new Error(`Date (${Re}) does not match format (${function Ee(xe,ve="en",A=!1,Se=()=>!0){return K(xe,ve).filter(Se).reduce((Re,be)=>Re+(A&&"literal"===be.partName?function F(xe){return z.concat(Z).concat(w).sort((ve,A)=>ve[0].length>A[0].length?1:-1).reduce((ve,A)=>ve.replace(A[0],`\\${A[0]}`),xe)}(be.token):be.token),"").normalize("NFKC")}(ve,A)})`)};if("ISO8601"===ve)return X(Re);const Ne=V.includes(ve)||"object"==typeof ve,Ke=function te(xe){let ve;for(const A of xe){if("literal"===A.partName&&!isNaN(parseFloat(A.partValue)))throw new Error(`Numbers in format (${A.partValue}).`);if(ve&&"literal"!==ve.partName&&"literal"!==A.partName&&!(ve.token in he)&&!(A.token in he)&&(!N(ve)||"a"!==A.token.toLowerCase()))throw new Error(`Illegal adjacent tokens (${ve.token}, ${A.token})`);ve=A}return xe}(K(ve,A).filter(Se));if(!Ke.length)throw new Error("parse() requires a pattern.");let De;try{De=function Be(xe,ve){let A=0;const Se=Ne=>[Ne[A++],Ne[A]];let Re=0;const be=[];let He;do{const[Ne,Ke]=Se(ve);He=Ke;let De=1;if("literal"===Ne.partName)De=Ne.partValue.length;else if("timeZoneName"===Ne.partName)De=k(xe.substring(Re));else if(Ne.token in he)De=he[Ne.token];else if(Ke)if("literal"===Ke.partName){if(De=xe.indexOf(Ke.partValue,Re)-Re,De<0)throw new Error}else if("dayPeriod"===Ke.partName){for(let Ae=1;Ae<=4;Ae++)if(isNaN(Number(xe.charAt(Re+Ae)))){De=Ae;break}}else{const Ae=xe.substring(Re).search(/\d/);-1!==Ae&&(De=Re+Ae)}else De=xe.length;be.push({...Ne,value:xe.substring(Re,Re+De)}),Re+=De}while(He);return be}(Re,Ke)}catch{return He()}const Ae=new Date,je=new Map([["YYYY",Ae.getFullYear()],["MM",Ae.getMonth()+1],["DD",Ae.getDate()],["HH",0],["mm",0],["ss",0]]);let $e=null,nt="";De.forEach(_t=>{if("literal"===_t.partName)return;if(_t.token===_t.value)return He();const $t=Number(_t.value);if(je.has(_t.token))je.set(_t.token,$t);else if("YY"===_t.token)je.set("YYYY",function Te(xe){const ve=(new Date).getFullYear(),A=ve%100,Se=Math.floor(ve/100),Re=Number(xe);return 100*(Se+(Re>A+20?-1:0))+Re}(_t.value));else{const cn=_t.token;if(cn.startsWith("d"))return;if("D"===cn)je.set("DD",$t);else if("H"===cn||cn.startsWith("h"))je.set("HH",$t);else if("M"===cn)je.set("MM",$t);else if("a"===cn||"A"===cn)$e=_t.value.toLowerCase()===S("am",A).toLowerCase();else if("Z"===cn||"ZZ"===cn)nt=oe(_t.value,cn);else{const xt=Le(cn,A,Ne).indexOf(_t.value);if(-1!==xt)switch(cn){case"MMM":case"MMMM":je.set("MM",xt+1)}}}});let gt=je.get("HH")||0;!1===$e?(gt+=12===gt?0:12,je.set("HH",24===gt?0:gt)):!0===$e&&12===gt&&je.set("HH",0),je.set("MM",(je.get("MM")||1)-1);let[Qe,mt,at,Et,St,dn]=Array.from(je.values());const Ut=function Ue(xe){return function tt(xe){const ve=X(xe);return ve.setDate(1),ve.setMonth(ve.getMonth()+1),ve.setDate(0),ve}(xe).getDate()}(new Date(`${E(Qe)}-${ge(mt+1)}-10`));if(Ut<at&&"throw"===be)throw new Error(`Invalid date ${E(Qe)}-${ge(mt+1)}-${ge(at)}`);at="backward"===be?Math.min(at,Ut):at;const Ht=`${E(Qe)}-${ge(mt+1)}-${ge(at)}T${ge(Et)}:${ge(St)}:${ge(dn)}${nt}`,xn=new Date(Ht);return isFinite(+xn)?xn:He()}},22287:(ze,Oe,n)=>{"use strict";n.d(Oe,{t:()=>G});var C=n(15152),x=n(20028);function G(X,W,ne){let z,Z=!1;return X&&"object"==typeof X?({bufferSize:z=1/0,windowTime:W=1/0,refCount:Z=!1,scheduler:ne}=X):z=X??1/0,(0,x.u)({connector:()=>new C.m(z,W,ne),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Z})}},22726:(ze,Oe,n)=>{"use strict";n.d(Oe,{hE:()=>W,up:()=>j});var C=n(81742),x=n(96598);let W=(()=>{class se{_doc;constructor(_){this._doc=_}getTitle(){return this._doc.title}setTitle(_){this._doc.title=_||""}static \u0275fac=function(K){return new(K||se)(x.KVO(C.q))};static \u0275prov=x.jDH({token:se,factory:se.\u0275fac,providedIn:"root"})}return se})(),j=(()=>{class se{static \u0275fac=function(K){return new(K||se)};static \u0275prov=x.jDH({token:se,factory:function(K){let ee=null;return ee=K?new(K||se):x.KVO(T),ee},providedIn:"root"})}return se})(),T=(()=>{class se extends j{_doc;constructor(_){super(),this._doc=_}sanitize(_,K){if(null==K)return null;switch(_){case x.WPN.NONE:return K;case x.WPN.HTML:return(0,x.ZF7)(K,"HTML")?(0,x.rcV)(K):(0,x.h9k)(this._doc,String(K)).toString();case x.WPN.STYLE:return(0,x.ZF7)(K,"Style")?(0,x.rcV)(K):K;case x.WPN.SCRIPT:if((0,x.ZF7)(K,"Script"))return(0,x.rcV)(K);throw new x.wOt(5200,!1);case x.WPN.URL:return(0,x.ZF7)(K,"URL")?(0,x.rcV)(K):(0,x.$MX)(String(K));case x.WPN.RESOURCE_URL:if((0,x.ZF7)(K,"ResourceURL"))return(0,x.rcV)(K);throw new x.wOt(5201,!1);default:throw new x.wOt(5202,!1)}}bypassSecurityTrustHtml(_){return(0,x.Kcf)(_)}bypassSecurityTrustStyle(_){return(0,x.cWb)(_)}bypassSecurityTrustScript(_){return(0,x.UyX)(_)}bypassSecurityTrustUrl(_){return(0,x.osQ)(_)}bypassSecurityTrustResourceUrl(_){return(0,x.e5t)(_)}static \u0275fac=function(K){return new(K||se)(x.KVO(C.q))};static \u0275prov=x.jDH({token:se,factory:se.\u0275fac,providedIn:"root"})}return se})()},22953:(ze,Oe,n)=>{"use strict";n.d(Oe,{m:()=>G});var C=n(18645),x=n(96889);function G(X){x.f.setTimeout(()=>{const{onUnhandledError:W}=C.$;if(!W)throw X;W(X)})}},23364:(ze,Oe,n)=>{"use strict";n.d(Oe,{w:()=>x});const x=new(n(94366).c)(W=>W.complete())},23458:(ze,Oe,n)=>{"use strict";n.d(Oe,{bQ:()=>Z,cM:()=>k,gH:()=>w,nx:()=>z,o9:()=>he,y$:()=>ne});var C=n(58170),x=n(43767),G=n(32040),X=n(54189),W=n(84151);class ne extends C.MI{constructor(le=0){super(),this.OnRefresh=new C.Yk,this.OnPactListBoxValueChanged=new C.Yk,this.OnPactListBoxCodeTextChanged=new C.Yk,this.ValueSelected=new C.Yk,this.OnSelectButton=new C.Yk,this.t=new x.M4,this.SelectionChangedCommand=new C.Yk,this.onFocusCommand=new C.Yk,this.onFocusOutCommand=new C.Yk,this.IsRendred=!1,this.GridViewID=0,this.SearchVisible=!1,this.DivisionId=0,this.LocationID=0,this.PreviousSelectedValue=0,this._selectedvalue=0,this.OnSelectionChange=new C.Yk,this.QtyWhere="",this.IsAutoLoad=!1,this._SelectedValueText="",this.SelectedIndex=0,this.CCID=0,this.InActiveItems=0,this.RefreshData=!1,this.ExcludeFilter=!1,this.TypeID=0,this._SelectedValueChanged=!1,this.IsPartiralData=!0,this.DBColumnID=le,this.t.Tick(this,"t_Tick"),this.SelectionChangedCommand.Subscribe(this,"onchanged"),this.t.Interval=2e3,this.t.Tick(this,"t_Tick")}static PactListBoxData_1(le){let R=new ne;return R.DBColumnID=le,R}static PactListBoxData_2(le,R,V){let ge=new ne;return ge.DBColumnID=R,ge.DBColumnName=le,ge.GroupName=V,ge.FeatureID=R,ge}static PactListBoxData_3(le,R){let V=new ne;return V.DBColumnID=R,V.DBColumnName=le,V.FeatureID=R,V}t_Tick(le,R){this.t.Enabled=!1,this.OnPactListBoxValueChanged.Call(this)}onchanged(le){null!=this.OnPactListBoxValueChanged&&null!=le&&this.PreviousSelectedValue!=this.SelectedValue&&(this.t.Enabled=!1,this.PreviousSelectedValue=this.SelectedValue,this.t.Enabled=!0)}SetTimeToZero(le=200){this.t.Interval=le}GetValidationError(le){return this.Mandatory&&(this.SelectedValue<1||""==this.Text&&this.Visible)?x.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||x.J0.StringIsNullOrEmpty(this.tabname)?G.d.translate.instant("Select")+" "+this.Label:G.d.translate.instant("Select")+" "+this.Label+" at "+this.tabname:""}get SelectedValue(){return this._selectedvalue}set SelectedValue(le){this._selectedvalue!=le&&(this._selectedvalue=le,this.IsAutoLoad||(this.SelectedValueChanged=!this.SelectedValueChanged),null==this.SelectionChangedCommand&&null!=this.OnPactListBoxValueChanged&&this.PreviousSelectedValue!=this.SelectedValue&&(this.t.Enabled=!1,this.PreviousSelectedValue=this.SelectedValue,this.t.Enabled=!0),0==le&&this.onchanged(this))}get CodeText(){return this._CodeText}set CodeText(le){this._CodeText!=le&&(this._CodeText=le,null!=this.OnPactListBoxCodeTextChanged&&this.OnPactListBoxCodeTextChanged.Call(this))}get SelectedValueText(){return this._SelectedValueText}set SelectedValueText(le){this._SelectedValueText!=le&&(this._SelectedValueText=le,this.SelectedValueChanged=!this.SelectedValueChanged,!this.IsAutoLoad&&this.CCID>5e4&&(this.SelectedValueChanged=!this.SelectedValueChanged))}Refresh(){this.RefreshData=!this.RefreshData,this.OnRefresh.Call(this)}get SelectedValueChanged(){return this._SelectedValueChanged}set SelectedValueChanged(le){this._SelectedValueChanged!=le&&(this._SelectedValueChanged=le,this.ValueSelected.IsSubscribed&&this.ValueSelected.Call())}}class z extends ne{constructor(){super()}static UOMPactListBoxData_1(le){let R=new z;return R.DBColumnID=le,R}}class Z extends C.MI{constructor(le){super(),this.SelectionChangedCommand=new C.Yk,this.ClickCommand=new C.Yk,this.Text=null,this.Dialog=null,this.drrEdit=null,this.dtEditHistory=null,this.drwControl=null,this.DivisionId=0,this.LocationID=0,this.PreviousSelectedValue=0,this.SelectedValue=0,this.ParentCostCenterID=0,this.CCID=0,this.HistoryCCID=0,this.RefreshData=!1,this.ExcludeFilter=!1,this.TypeID=0,this.EditData=null,this.DBColumnID=le}GetValidationError(le){return this.Mandatory&&(this.SelectedValue<1||""==this.Text&&this.Visible)?x.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||x.J0.StringIsNullOrEmpty(this.tabname)?G.d.translate.instant("Select")+" "+this.Label:this.SelectedValue>0?"":G.d.translate.instant("Select")+" "+this.Label+" at "+this.tabname:""}SetValue(le){if(this.SelectedValue=le,0==le)this.Text="";else{let R=Z.GetCodeName(this.CCID,le);null!=R&&R.Tables.length>0&&R.Tables[0].length>0&&(this.Text=R.Tables[0][0][R.Columns[0][2]])}}SetValue_2(le,R){this.SelectedValue=le,this.Text=R}Clear(le){this.XML=null,this.drrEdit=null,this.Text="",null!=this.Dialog&&this.Dialog.Clear(),x.J0.IsEmpty(le)||this.SetValue(le)}static GetCodeName(le,R){return G.d.common.GetCodeName(le,R)}}class w extends C.MI{constructor(le){super(),this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.IgnoreSpaces=!1,this.PrevSelValu=0,this.ListVisible=!1,this.TextVisible=!1,this.SelectedValueChanged=!1,this.TypeID=0,this.CCID=0,this.DBColumnID=le,this.Code=ne.PactListBoxData_1(le)}ValidateData(){if(this.Mandatory){if(this.TextVisible&&x.J0.IsNullOrWhiteSpace(this.Text))return G.d.translate.instant("Enter")+" "+this.Label;if(this.Code.Visible&&x.J0.IsNullOrWhiteSpace(this.Code.Text))return G.d.translate.instant("Enter")+" "+this.Label}return""}}class he extends C.MI{constructor(){super(...arguments),this.Unit=new ne(0),this.UnitCheckStatus=new X.B(0),this.MultiUnits=new X.B(0),this.IsMultiunit=!1,this.multiVisi=!1,this.MultipleUnits=new W.Dw(0)}}class k extends C.MI{constructor(){super(),this.Customer=new ne(24238),this.CustomerChagne=new X.B(0),this.ChangeVisible=!1,this.Customer.RefreshDataDel=new C.Yk}}},25436:(ze,Oe,n)=>{"use strict";n.d(Oe,{A:()=>w,aF:()=>z});var C=n(32040),x=n(54581),G=n(43767),X=n(27730),W=n(75679);class z{constructor(){this.ISDoctype=0}}class w{GetRibbonView(){return C.d.common.getRibbonView().toPromise()}setRibbon(k){w.setRibbon(k.Table,C.d.SessionManager,k),C.d.admin.GetAllListViewsDef()}static setRibbon(k,me,le=null){let R=[],V=k,ge=0;if(me.Is_SIMPLE_License&&this.GetSIMPLELicenseRibbon(k),this.UpdateDimensionGroups(k),null!=le){Logger.InfoLog("RibbonGenerator:: Start Ribbon Binding for User :"+C.d.SessionManager.UserName);let N=!0;!G.J0.IsEmpty(le.Table2)&&le.Table2.length>0&&(C.d.SessionManager.RoleActions=le.Table2),null!=le&&!G.J0.IsEmpty(le.Table1)&&le.Table1.length>0&&(C.d.SessionManager.LoadPreferences(le.Table1),C.d.SessionManager.Is_SIMPLE_License&&(C.d.SessionManager.CheckSimpleLicensedGlobalPreferences(),C.d.SessionManager.CheckSimpleLicenseGP(le.Table1))),G.J0.SetPayrollMonth(new Date,C.d.SessionManager),C.d.SessionManager.Preferences.ContainsKey("Header Menu")&&"1"==C.d.SessionManager.Preferences["Header Menu"]&&(N=!1),!G.J0.IsEmpty(le.Table5)&&le.Table5.length>0&&C.d.SessionManager.Preferences.ContainsKey("Hijri Date")&&""!=C.d.SessionManager.Preferences["Hijri Date"]&&(0,x.yG0)(C.d.SessionManager.Preferences["Hijri Date"])&&(C.d.SessionManager.HijriTable=le.Table5),C.d.SessionManager.Preferences.ContainsKey("ReportDate")&&"FinancialYear"==C.d.SessionManager.Preferences.ReportDate&&(C.d.SessionManager.ReportsFromDate=C.d.SessionManager.FinancialYearStartDate)}if(me.IsVAT=me.Preferences.ContainsKey("VATVersion"),("True"==G.J0.String(me.LicenseSettings.GST)||me.IsVAT)&&0==me.RoleType&&"1"==me.UserID&&(Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4868)]).then(n.bind(n,94868)).then(({})=>{}),"True"==G.J0.String(me.LicenseSettings.GST)&&["GSTR-1","GSTR-1 Summary","GSTR-2","GSTR-3","ANX-1"].forEach(te=>{V.push({DrpID:1,DrpName:te,FARMID:-9e3+ge,FeatureActionID:-9e3+ge,FeatureActionName:te,FeatureActionTypeID:-9e3+ge,FeatureID:9e3,GroupID:9e3,GroupKeyTip:null,GroupName:"GST",GroupOrder:9e3,HasAccess:1,ImagePath:"REP_List-of-reports.png",ImageType:0,IsMobile:0,ItemCount:1,RibbonViewID:-1e4+ge,ScreenName:te,TabID:6,TabName:"BI Tool",TabOrder:6,ToolTipDesc:te,ToolTipImg:"REP_List-of-reports.png",ToolTipTitle:te}),ge++}),me.IsVAT)){let N=C.d.report.GetReport(2,0);ge=20,N.Tables&&N.Tables.length>0&&N.Tables[0].forEach(te=>{V.push({DrpID:1,DrpName:te.ReportName,FARMID:-9e3+ge,FeatureActionID:te.ReportID,FeatureActionName:te.ReportName,FeatureActionTypeID:-9e3+ge,FeatureID:9001,GroupID:9001,GroupKeyTip:null,GroupName:"VAT",GroupOrder:9001,HasAccess:1,ImagePath:"REP_List-of-reports.png",ImageType:0,IsMobile:0,ItemCount:1,RibbonViewID:-1e4+ge,ScreenName:te.ReportName,TabID:6,TabName:"BI Tool",TabOrder:6,ToolTipDesc:te.ReportName,ToolTipImg:"REP_List-of-reports.png",ToolTipTitle:te.ReportName}),ge++})}let E=C.d.report.GetDashBoard(2,0),b=null,p=2e4,j={};if(E.Tables.length>0&&E.Tables[0].forEach(N=>{let te=V.find(v=>499==v.FeatureID&&v.FeatureActionTypeID==N.DashBoardID);te&&V.Remove(te)}),2==C.d.SessionManager.RoleType){let N=V.find(te=>2==te.FeatureID);N&&V.Remove(N)}let I,oe,F,T=V.find(N=>3681==N.FeatureActionID);T?(C.d.SessionManager.DocFlowMenu=new z,Object.assign(C.d.SessionManager.DocFlowMenu,T),V.Remove(T)):C.d.SessionManager.DocFlowMenu=null,T=V.find(N=>3682==N.FeatureActionID),T?(C.d.SessionManager.StickyNotes=new z,Object.assign(C.d.SessionManager.StickyNotes,T),V.Remove(T)):C.d.SessionManager.StickyNotes=null,T=V.find(N=>3769==N.FeatureActionID),T?(C.d.SessionManager.ResetPassword=new z,Object.assign(C.d.SessionManager.ResetPassword,T),V.Remove(T)):C.d.SessionManager.ResetPassword=null,E.Tables.length>0&&E.Tables[0].forEach(N=>{b=N.GroupName.toString(),j[b]||(j[b]=++p);let te={DrpID:1,DrpName:N.DashBoardName,FARMID:-9e3+ge,FeatureActionID:parseInt(N.DashBoardID),FeatureActionName:N.DashBoardName,FeatureActionTypeID:parseInt(N.DashBoardID),FeatureID:499,GroupID:j[b],GroupKeyTip:null,GroupName:N.GroupName.toString(),GroupOrder:j[b],HasAccess:1,ImagePath:"REP_List-of-reports.png",WebIcon:"fa-chart-pie-simple fa-thin",ImageType:0,IsMobile:0,ItemCount:1,RibbonViewID:-1e4+ge,ScreenName:N.DashBoardName,TabID:1,TabName:"Home",TabOrder:1,ToolTipDesc:N.DashBoardName,ToolTipImg:"REP_List-of-reports.png",ToolTipTitle:N.DashBoardName};V.push(te)}),me.MenuTabs=[];try{let N=me.ModsTemp.split("~");me.RoleType>1&&(V.forEach(te=>{498==te.FeatureID||50==te.FeatureID?(te.GroupID=40,te.MOrder=40):499==te.FeatureID?(te.GroupID=0,te.MOrder=0):te.FeatureID>4e4&&te.FeatureID<5e4?(te.GroupID=20,te.MOrder=20):(te.GroupID=10,te.MOrder=10)}),V.SortBy(["MOrder"])),V.forEach(te=>{(N.Contains(te.TabID.toString())||null!=me.SplitMods&&me.SplitMods.Contains(te.TabID.toString()))&&(I=0!=me.RoleType&&R.length>0?R[0]:R.find(S=>S.TabID==te.TabID),I||(I={},I.TabID=te.TabID,I.TabName=1==me.RoleType?"Employee Portal":2==me.RoleType?"Vendor Portal":3==me.RoleType?"Customer Portal":5==me.RoleType?"Vendor KYC":te.TabName,1==te.TabID?I.Icon="fa-thin fa-chart-tree-map":2==te.TabID?I.Icon="fa-thin fa-coins":3==te.TabID||3001==te.TabID||3002==te.TabID||3003==te.TabID?I.Icon="fa-thin fa-cart-flatbed-boxes":4==te.TabID?I.Icon="fa-thin fa-gear":5==te.TabID?I.Icon="fa-thin fa-hand-holding-hand":6==te.TabID?I.Icon="fa-thin fa-chart-bar":7==te.TabID?I.Icon="fa-thin fa-ruler-combined":9==te.TabID?(I.Icon="fa-thin fa-gear",I.TabName="Admin"):I.Icon=12==te.TabID?"fa-thin fa-building":13==te.TabID?"fa-thin fa-users":14==te.TabID?"fa-thin fa-torii-gate":"fa-thin fa-user",I.Groups=[],R.push(I)),oe=I.Groups.find(S=>S.GroupID==te.GroupID),oe||(oe={},oe.GroupID=te.GroupID,oe.GroupName=te.GroupName,oe.WebIcon=te.WebIcon,oe.IsCollapse=!1,oe.Items=[],oe.IsVisible=!0,I.Groups.push(oe)),F=new z,F.ScreenName=te.ScreenName,G.J0.IsEmpty(te.RDrpName)||(F.DisplayName=te.RDrpName),F.FeatureActionID=te.FeatureActionID,F.FeatureActionTypeID=te.FeatureActionTypeID,F.FeatureID=te.FeatureID,F.RibbonViewID=te.RibbonViewID,F.ImagePath="assets/images/menu/"+te.ImagePath,F.WebIcon=te.WebIcon,F.WebIcon||(F.WebIcon="fa-file fa-thin"),F.ToolTipTitle=te.ToolTipTitle,F.ScreenType=te.TabID,te.DocumentType&&(F.ISDoctype=te.DocumentType),F.KeyTip=te.ButtonKeyTip,oe.Items.find(S=>S.ScreenName==te.ScreenName)||(13==te.TabID&&113==te.GroupID?C.d.SessionManager.Preferences.ContainsKey("EnableIncomeTax")&&(0,x.yG0)(C.d.SessionManager.Preferences.EnableIncomeTax)&&oe.Items.push(F):oe.Items.push(F)))})}catch(N){me.Logger.ErrorLog(N.stack)}R.forEach(N=>{N.TabIDSort=N.TabID,(3001==N.TabID||3002==N.TabID||3003==N.TabID)&&(N.TabIDSort=3)}),R.SortBy(["TabIDSort","TabID"]),me.MenuTabs=R,C.d.page.QuickDocumentData=new W.uI,C.d.IsNativeMobile||this.FillFavourites(V)}static FillFavourites(k){C.d.SessionManager.FavouritesMenu.Visible=!1,C.d.SessionManager.FavouritesMenu.Items.Clear();let me=k.find(le=>3136==le.FeatureActionID);if(me){Object.assign(C.d.SessionManager.FavouritesMenu,me);let le=!1;C.d.SessionManager.MenuTabs.forEach(R=>{le||R.Groups.forEach(V=>{le||V.Items.find(E=>3136==E.FeatureActionID)&&(le=!0)})}),k.Remove(me),C.d.SessionManager.FavouritesMenu.Visible=!0,C.d.admin.GetFavorite("GETLIST"+C.d.SessionManager.LocationID,0,!0).subscribe(R=>{if(null!=R&&R.Tables.length>0&&R.Tables[0].length>0){let V,ge,E;0==C.d.SessionManager.RoleType&&C.d.IsMobile&&(V={},V.TabID=1234,V.TabName="Favourites",V.Icon="fa-light fa-star",V.Groups=[],ge={},ge.GroupID=123456,ge.GroupName="Favourites",ge.IsCollapse=!1,ge.Items=[],ge.IsVisible=!0,V.Groups.push(ge)),R.Tables[0].forEach(b=>{C.d.SessionManager.FavouritesMenu.Items.push(X._p.ComboBoxItems_2(b.FavName.toString(),b.ID.toString())),ge&&(E=new z,E.ScreenName=b.FavName.toString(),E.FeatureActionID=3136,E.FeatureActionTypeID=b.ID.toString(),E.FeatureID=5,E.RibbonViewID=0,E.ImagePath="assets/images/menu/ADM_Favorite.png",ge.Items.push(E))}),V&&(C.d.SessionManager.MenuTabs.length>1?C.d.SessionManager.MenuTabs.InsertAt(V,1):C.d.SessionManager.MenuTabs.push(V))}})}}static UpdateDimensionGroups(k){}static GetSIMPLELicenseRibbon(k){let me,le;if(!G.J0.IsEmpty(k.length>0&&k[0].LicSIMPLE)&&k.length>0){me=k.filter(R=>3==R.TabID&&6==R.GroupID&&R.LicSIMPLE),null!=me&&me.length>0&&(le=JSON.parse(JSON.stringify(me[0])),le.TabName="Purchase",le.TabID=3002,le.GroupID=3006,le.FARMID="0",k.push(le));for(let R=k.length-1;R>=0;R--)!G.J0.IsEmpty(k[R].FeatureActionName)&&("Accounts Receivable"==k[R].FeatureActionName.ToString()||"Accounts Payable"==k[R].FeatureActionName.ToString())&&("Accounts Receivable"==k[R].FeatureActionName.toString()?(k[R].TabName="Sales",k[R].TabID=3001,k[R].GroupID=3001,k[R].LicSIMPLE="True"):"Accounts Payable"==k[R].FeatureActionName.toString()&&(k[R].TabName="Purchase",k[R].TabID=3002,k[R].GroupID=3002,k[R].LicSIMPLE="True")),null==k[R].LicSIMPLE||null==k[R].LicSIMPLE||""==k[R].LicSIMPLE.toString()||0==(0,x.yG0)(k[R].LicSIMPLE)?k.RemoveAt(R):3==parseInt(k[R].TabID)&&(19==parseInt(k[R].GroupID)?(k[R].TabName="Purchase",k[R].TabID=3002):31==parseInt(k[R].GroupID)&&115==parseInt(k[R].DrpID)?(k[R].TabName="Purchase",k[R].TabID=3002,k[R].GroupID=1115):28==parseInt(k[R].GroupID)?(k[R].TabName="Inventory",k[R].TabID=3003):31==parseInt(k[R].GroupID)&&113==parseInt(k[R].DrpID)?(k[R].TabName="Inventory",k[R].TabID=3003,k[R].GroupID=1113):31==parseInt(k[R].GroupID)&&114==parseInt(k[R].DrpID)?(k[R].TabName="Sales",k[R].TabID=3001,k[R].GroupID=1114):(k[R].TabName="Sales",k[R].TabID=3001))}C.d.SessionManager.SplitMods="3001~3002~3003".split("~"),k.SortBy(["TabOrder","GroupOrder","groupid","Columnorder","RibbonViewID"])}}},26336:(ze,Oe,n)=>{"use strict";n.d(Oe,{D3:()=>G,G9:()=>x,bT:()=>C});class C{constructor(){this.keys=[],this.values=[]}get length(){return this.keys.length}Add(W,ne){this[W]=ne,this.keys.push(W),this.values.push(ne)}push(W,ne){this[W]=ne,this.keys.push(W),this.values.push(ne)}Remove(W){let ne=this.keys.indexOf(W);delete this[W],this.keys.splice(ne,1),this.values.splice(ne,1)}ContainsKey(W){return this.keys.includes(W)}Clear(){this.keys=[],this.values=[]}GetItemByValue(W){let ne=this.values.indexOf(W);return-1!=ne?{Key:this.keys[ne],Value:this.values[ne]}:null}SetValue(W,ne){let z=this.keys.indexOf(W);z>=0&&(this.values[z]=ne),this[W]=ne}}class x{constructor(){this.keys=[],this.values=[]}get length(){return this.keys.length}Add(W,ne){this[W]=ne,this.keys.push(W),this.values.push(ne)}push(W,ne){this[W]=ne,this.keys.push(W),this.values.push(ne)}Remove(W){let ne=this.keys.indexOf(W);delete this[W],this.keys.splice(ne,1),this.values.splice(ne,1)}ContainsKey(W){return this.keys.includes(W)}Clear(){this.keys=[],this.values=[]}}class G{constructor(){this.keys=[],this.values=[]}get length(){return this.keys.length}Add(W,ne){this.keys.push(W),this.values.push(ne)}push(W,ne){this.keys.push(W),this.values.push(ne)}Remove(W){let ne=this.keys.indexOf(W);this.keys.splice(ne,1),this.values.splice(ne,1)}GetValue(W){let ne=this.keys.indexOf(W);return this.values[ne]}ContainsKey(W){return this.keys.includes(W)}Clear(){this.keys=[],this.values=[]}}},26528:function(ze,Oe,n){var x,G,X,W,ne,Z,C;ze.exports=(C=n(95275),n(57605),n(15487),W=(G=(x=C).lib).WordArray,Z=(ne=x.algo).EvpKDF=(X=G.Base).extend({cfg:X.extend({keySize:4,hasher:ne.MD5,iterations:1}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,he){for(var k,me=this.cfg,le=me.hasher.create(),R=W.create(),V=R.words,ge=me.keySize,E=me.iterations;V.length<ge;){k&&le.update(k),k=le.update(w).finalize(he),le.reset();for(var b=1;b<E;b++)k=le.finalize(k),le.reset();R.concat(k)}return R.sigBytes=4*ge,R}}),x.EvpKDF=function(w,he,k){return Z.create(k).compute(w,he)},C.EvpKDF)},27142:(ze,Oe,n)=>{"use strict";n.d(Oe,{l:()=>x});const x=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},27405:(ze,Oe,n)=>{"use strict";n.d(Oe,{Y:()=>G,l:()=>X});var C=n(18645);let x=null;function G(W){if(C.$.useDeprecatedSynchronousErrorHandling){const ne=!x;if(ne&&(x={errorThrown:!1,error:null}),W(),ne){const{errorThrown:z,error:Z}=x;if(x=null,z)throw Z}}else W()}function X(W){C.$.useDeprecatedSynchronousErrorHandling&&x&&(x.errorThrown=!0,x.error=W)}},27730:(ze,Oe,n)=>{"use strict";n.d(Oe,{BZ:()=>k,Es:()=>ne,ZK:()=>me,_p:()=>Z,oN:()=>w,tO:()=>z,v4:()=>he,y$:()=>W});var C=n(58170),x=n(43767),G=n(32040),X=n(54581);class W extends C.MI{constructor(R=0){super(),this.DisplayMember="Name",this.ValueMember="Value",this._SelectedValue=null,this.Items=[],this.SelectionChangedCommand=new C.Yk,this.LostFocusCommand=new C.Yk,this.OptionsSize=1,this.Text="",this.DBColumnID=R}static PactComboBoxData1(R){let V=new W;return V.DBColumnID=R,V}static PactComboBoxData2(R,V,ge){let E=new W;return E.DBColumnName=R,E.DBColumnID=V,E.GroupName=ge,E}static PactComboBoxData3(R,V){let ge=new W;return ge.DBColumnName=R,ge.FeatureID=V,ge}static PactComboBoxData4(R,V){let ge=new W;return ge.Visible=V,ge.DBColumnID=R,ge}AddItem(R,V){this.Items.forEach(ge=>{}),this.Items.push(Z.ComboBoxItems_2(R,V))}GetValidationError(R){if("SelectedValue"==R&&this.Mandatory){if(x.J0.StringIsNullOrEmpty(this.SelectedValue))return x.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||x.J0.StringIsNullOrEmpty(this.tabname)?G.d.translate.instant("Select")+" "+this.Label:G.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if("-399"!=this.SelectedValue.toString()&&isFinite(this.SelectedValue)&&parseInt(this.SelectedValue)<0)return G.d.translate.instant("Select")+" "+this.Label}return""}get SelectedValue(){return this._SelectedValue}set SelectedValue(R){if(this._SelectedValue!=R){if(this._SelectedValue=R,!x.J0.IsEmpty(this.Items)&&this.Items.length>0){let V=this.Items.find(ge=>ge[this.ValueMember]==this.SelectedValue);V&&(this.SelectedItem=V,this.SetSelectedIndex())}this.IsRendred&&this.SelectionChangedCommand.Call(this)}}GetText(){let R=this.Items.find(V=>V[this.ValueMember]==this.SelectedValue);return R?R[this.DisplayMember]:""}GetselectedItem(){return this.Items.find(R=>R[this.ValueMember]==this.SelectedValue)}Getvalue(R){let V=this.Items.find(ge=>ge[this.DisplayMember]==R);return V?V[this.ValueMember]:""}GetParentText(){return this.Items.forEach(R=>R.Value==this.SelectedValue?R.Parent:null),""}SetSelectedIndex(){let R=this.Items.find(V=>V[this.ValueMember]==this._SelectedValue);this.SelectedIndex=R?this.Items.indexOf(R):-1}SetSelectedItem(R){let V=this.Items.find(ge=>ge[this.ValueMember]==R);V&&(this.SelectedItem=V,this.SelectedValue!=R&&(this.SelectedValue=R))}SetSelectedItem_2(R,V){let ge=this.Items.find(E=>E[this.ValueMember]==V&&E.Name==R);ge&&(this.SelectedItem=ge,this.SelectedValue!=V&&(this.SelectedValue=V))}static FillComboWithDefaultOption(R,V){this.FillComboWithDefaultOption_3(R,V,!1)}static FillComboWithDefaultOption_3(R,V,ge){Logger.InfoLog("Administration:: Inside FillComboWithDefaultOption");try{ge&&V.Items.Add(Z.ComboBoxItems_2("","0")),null!=R&&R.length>0?R.forEach(E=>{V.Items.push(Z.ComboBoxItems_2(E.Name.toString(),E.NodeID.toString())),x.J0.StringIsNullOrEmpty(E.IsDefault)||(0,X.yG0)(E.IsDefault)&&(V.SelectedValue=E.NodeID.toString(),V.DefaultValue=E.NodeID.toString())}):ge&&(V.SelectedValue="0",V.DefaultValue="0")}catch{Logger.InfoLog("Administration:: Leaving FillComboWithDefaultOption")}Logger.InfoLog("Administration:: Leaving FillComboWithDefaultOption")}}class ne extends W{constructor(R){super(R),this.ButtonClick=new C.Yk}}class z extends W{constructor(R=0){super(),this.DBColumnID=R}static PactUOMBoxData_1(R){let V=new z;return V.DBColumnID=R,V}static PactUOMBoxData_2(R,V){let ge=new z;return ge.DBColumnName=R,ge.DBColumnID=V,ge}}class Z{constructor(){this.Name="",this.Parent="",this.Value="",this.Status=!1,this.Aliasname="",this.CurrID=0,this.ExchgRate=0,this.Seq=0}static ComboBoxItems_1(R){let V=new Z;return V.Name=R,V.Value=R,V}static ComboBoxItems_2(R,V){let ge=new Z;return ge.Name=R,ge.Value=V,ge}static ComboBoxItems_3(R,V,ge){let E=new Z;return E.Name=R,E.Value=V,E.Parent=ge,E}static ComboBoxItems_4(R,V,ge,E){let b=new Z;return b.Name=R,b.Value=V,b.Parent=ge,b.Aliasname=E,b}static ComboBoxItems_5(R,V,ge,E){let b=new Z;return b.Name=R,b.Value=V,b.Status=ge,b.Aliasname=E,b}static ComboBoxItems_6(R,V,ge,E,b){let p=new Z;return p.Name=R,p.Value=V,p.Status=ge,p.Aliasname=E,p.Parent=b,p}static ComboBoxItems_7(R,V,ge,E,b){let p=new Z;return p.Name=R,p.Value=V,p.Parent=ge,p.Aliasname=E,p.CurrID=b,p}static ComboBoxItems_8(R,V,ge,E,b,p,j){let T=new Z;return T.Name=R,T.Value=V,T.Status=ge,T.Aliasname=E,T.CurrID=b,T.ExchgRate=p,T.Seq=j,T}static ComboBoxItems_9(R,V,ge,E,b){let p=new Z;return p.Name=R,p.Value=V,p.Parent=ge,p.Aliasname=E,p.obj=b,p}}class w extends C.MI{constructor(R=""){super(),this.Name="",this.Code="",this.Value="",this.Parent="",this.IsChecked=!1,this.Type=0,this.Name=R}static CheckedListBoxItem_1(R){let V=new w;return V.Name=R,V.Value=R,V}static CheckedListBoxItem_2(R,V){let ge=new w;return ge.Name=R,ge.Value=R,ge.IsChecked=V,ge}static CheckedListBoxItem_3(R,V){let ge=new w;return ge.Name=R,ge.Value=V,ge}static CheckedListBoxItem_4(R,V,ge){let E=new w;return E.Name=R,E.Value=V,E.Parent=ge,E}static CheckedListBoxItem_5(R,V,ge){let E=new w;return E.Name=R,E.Value=V,E.IsChecked=ge,E}static CheckedListBoxItem_6(R,V,ge,E){let b=new w;return b.Name=R,b.Value=V,b.IsChecked=ge,b.Type=E,b}static CheckedListBoxItem_7(R,V,ge,E,b){let p=new w;return p.Name=R,p.Code=V,p.Value=ge,p.IsChecked=E,p.Type=b,p}}class he extends C.MI{constructor(R=0){super(),this.CheckedChangedCommand=new C.Yk,this.cmnItem_Click=new C.Yk,this.Height=200,this._SelectedValue=null,this.SelectedIndex=0,this.OnlyGroup=!1,this.Items=[],this._SelectAll=!1,this.DBColumnID=R}static CheckedListBoxData_1(R,V){let ge=new he(0);return ge.DBColumnName=R,ge.FeatureID=V,ge}get SelectedValue(){return this._SelectedValue}set SelectedValue(R){this._SelectedValue!=R&&(this._SelectedValue=R,this.SetSelectedIndex())}get SelectAll(){return this._SelectAll}set SelectAll(R){this._SelectAll!=R&&(this._SelectAll=R,this.Items.map(V=>V.IsChecked=R))}SetSelectedIndex(){let R=this.Items.find(V=>V.Value==this.SelectedValue);this.SelectedIndex=R?this.Items.indexOf(R):-1}GetSelectedSting(){let R="";return this.Items.filter(V=>V.IsChecked).forEach(V=>{R.length>0&&(R+=","),R+=V.Value}),R}}class k extends he{constructor(){super(...arguments),this.CheckedChangedCommand=new C.Yk}CheckedListBoxComboData(){this.CodeNameCombo=new W(0),this.CodeNameCombo.Items.push(Z.ComboBoxItems_2("Code","Code")),this.CodeNameCombo.Items.push(Z.ComboBoxItems_2("Name","Name")),this.CodeNameCombo.SelectedValue="Name"}CheckedListBoxComboData_1(R){this.CodeNameCombo=new W(0),this.CodeNameCombo.Items.push(Z.ComboBoxItems_2("Code","Code")),this.CodeNameCombo.Items.push(Z.ComboBoxItems_2("Name","Name")),this.CodeNameCombo.SelectedValue="Name",this.DBColumnID=R}}class me extends W{constructor(){super(...arguments),this.ClickCommand=new C.Yk}static PactStausComboData_1(R){let V=new me;return V.DBColumnID=R,V}}},30054:(ze,Oe,n)=>{"use strict";n.d(Oe,{of:()=>G});var C=n(86945),x=n(425);function G(...X){const W=(0,C.lI)(X);return(0,x.H)(X,W)}},31051:(ze,Oe,n)=>{"use strict";n.d(Oe,{EQ:()=>Z,NP:()=>k,Y6:()=>w,ii:()=>V,mr:()=>le,ph:()=>z,yg:()=>me});var C=n(32040),x=n(43767),G=n(26336),X=n(89731),W=n(23458);class z{constructor(){this.ComponentID=0,this.TaxMap=0,this.DrAccount=0,this.CrAccount=0,this.Type=0,this.SNo=0,this.IsEditable=1,this.IsReadOnly=0,this.IsVisible=1,this.Decimals=0,this.ComponentName="",this.Formula="",this.AddToNet="",this.FieldType="",this.Applicable="",this.Behaviour="",this.Expression="",this.CarryForward="",this.IncludeRExclude="",this.Message="",this.Action="",this.CalculateArrears="",this.CalculateAdjustments="",this.MaxOTHrs=0,this.ROff=0,this.Percentage=0,this.MaxLeaves=0,this.AtATime=0,this.MaxCarryForwardDays=0,this.MaxEncashDays=0,this.dOTDailyValue=0,this.dPrevAccEar=0,this.dPrevAccAdj=0,this.dActual="0",this.dEarned="0",this.dArrear="0",this.dAdjusted="0",this.LoanSlNo="",this.LoanDocNo="",this.LoanInvDocDetailsID="",this.LoanApprovedAmt="",this.LoanInstNo="",this.LoanActInstNo="",this.LoanActInstAmt="",this.LoanInstAmt="",this.LoanBalAmt="",this.LoanPayStatus="",this.LoanNodeNo="",this.LeaveTotOPBal="",this.LeaveMonOPBal="",this.ActLeaveTaken="",this.LeaveTaken="",this.LeaveNetBal="",this.EncashLeavetaken="",this.ExtraFieldSNo="",this.ExtraFieldDataType="",this.ExtraFieldUserColumnType="",this.ExtraFieldName="",this.ExtraFieldCaption="",this.ExtraFieldValue="",this.sEarDedType="0",this.IsAccrualType=!1,this.isArrCalculated=!1}}class Z{constructor(){this.GradeID=1,this.EmpGradeID=1,this.CurrencyID=1,this.DocID=0,this.StatusID=0,this.VacationComponentID=-1,this.EmpSeqNo="",this.EmpCode="",this.EmpName="",this.DocNo="",this.DocStatus="",this.sErrorMessage="",this.totOTHours="0.00",this.sRemarks="",this.sResignType="",this.sEmpWorkingCountry="",this.sArrCalcMonthPaydays="",this.sArrsCalcMonths="",this.sAdjCalcMonthPaydays="",this.sAdjsCalcMonths="",this.DaysAttended=0,this.PaidLeaves=0,this.TotalLeaves=0,this.WeeklyOffs=0,this.Holidays=0,this.LOPDays=0,this.UnpaidDays=0,this.PaidDays=0,this.TotalDays=0,this.MonthDays=0,this.dServiceDays=0,this.dServiceYears=0,this.dblLeavesLOP=0,this.dblTotVacDays=0,this.dblTotMVacDays=0,this.dblTotVacAmount=0,this.dblTotVacEncashDays=0,this.dblTotVacEncashAmount=0,this.dblTotVacExcessDays=0,this.dblTotVacExcessAmount=0,this.dblTotVacNetAmount=0,this.ActDaysAttended=0,this.UnPaidWeeklyOffs=0,this.UnPaidHolidays=0,this.GratuityAmount=0,this.NetSalary=0,this.dPTApplicableAmt=0,this.BasicMonthly=0,this.dblGrossSalary=0,this.totEarnings=0,this.totEarArrears=0,this.totEarAdjustments=0,this.totOTAmount=0,this.totDeductions=0,this.totDedArrears=0,this.totDedAdjustments=0,this.totActEarnings=0,this.totActDeductions=0,this.totLoans=0,this.totOPBalLeaves=0,this.totLeavesTaken=0,this.totNetBalLeaves=0,this.totAccrualsAct=0,this.totAccrualsEar=0,this.totAccrualsArr=0,this.totAccrualsAdj=0,this.dVacDaysUptoLastMonth=0,this.dGosi=0,this.PreviousMonthPaidDays=0,this.PreviousMonthVacationDays=0,this.PTIndex=-1,this.WID=0,this.iExtLoansCnt=0,this.DateOfJoining=x.J0.GetEmptyDate(),this.DateOfRelieve=x.J0.GetEmptyDate(),this.AppraisalMonth=x.J0.GetEmptyDate(),this.IsAlreadyProcessed=!1,this.IsAllowOT=!1,this.IsFinalSettlement=!1}}class w{constructor(){this.EmpSeqNo=0,this.AppliedDays=0,this.NotAttendedDays=0,this.Salary=0,this.Encash=0,this.LOP=0,this.Deductions=0,this.Loans=0,this.OpSalary=0,this.NetSalary=0,this.LOPDays=0,this.EncashDays=0,this.ClosingBalance=0,this.PaidDays=0,this.CreditDays=0,this.ExcessDays=0,this.IsEncashDays=!1,this.PayExcessDaysboolean=!1,this.IsEncashVacationboolean=!1,this.IsLeaveboolean=!1,this.ActRejoinDate=""}}class he{constructor(){this.ID=0,this.SNo=0,this.EmpNode=0,this.TypeId=0,this.ComponentID=0,this.EnCash=0,this.ExcessdaysSalary=0,this.SName="",this.TypeName="",this.ComponentName="",this.Formula="",this.Percentage="",this.Amount="",this.ActualAmount="",this.PercActualAmount=""}}class k{constructor(){this.EmpNode=1,this.ShiftNode=1,this.ADocID=0}}class me{constructor(){this.fldDict=new G.bT,this.arrLstCPFields=Array(),this.sEmpSeqNo="0",this.dtAsonDate=new Date,this.dAdjDays=0,this.dsAllEmpsData=null,this.oVacAmountField=null,this.iDocID=0,this.lstAccrAccumulateSNos=new Array,this.isValidGWSlabs=!1,this.isValidBulkAppraisal=!1,this.sEmpType="",this.sGender="",this.sMaritalStatus="",this.sNationality="",this.sReligion="",this.oCPField=null,this.lstHolidays=new Array,this.dGosi=0,this.dtHolidayDef=null,this.arrLstOthMPFields=new Array,this.arrLstCPFields=Array(7),this.arrLstCPFields[0]=Array(),this.arrLstCPFields[1]=Array(),this.arrLstCPFields[2]=Array(),this.arrLstCPFields[3]=Array(),this.arrLstCPFields[4]=Array(),this.arrLstCPFields[5]=Array(),this.arrLstCPFields[6]=Array(),this.othMPField=new Z,this.arrLstOthMPFields.push(this.othMPField)}Intialize(){this.LoadStructure()}LoadStructure(){if(""!=this.sEmpSeqNo&&parseInt(this.sEmpSeqNo)>0&&(this.dsAllEmpsData=C.d.empService.LoadStructure(this.sEmpSeqNo,this.PayrollMonth.ToString("dd/MMM/yyyy"),this.PayrollMonthStart.ToString("dd/MMM/yyyy"),this.PayrollMonthEnd.ToString("dd/MMM/yyyy")),this.dsData=C.d.empService.LoadStructure_1(this.PayrollMonthEnd.ToString("dd/MMM/yyyy"),"AND EmpSeqNo IN("+this.sEmpSeqNo+")"),this.dsData1=C.d.empService.GetQueryData(0,"dvDimsData","","",""),null!=this.dsAllEmpsData&&this.dsAllEmpsData.Tables.length>0&&this.dsAllEmpsData.Tables[0].length>0)){this.drcAllEmpsData=this.dsAllEmpsData.Tables[0].filter(J=>J.EmpSeqNo=this.sEmpSeqNo),this.dtStructure=this.othMPField.IsFinalSettlement?this.dsAllEmpsData.Tables[37]:this.dsAllEmpsData.Tables[1],this.drcEmpPay=this.dsAllEmpsData.Tables[2].filter(J=>J.EmpSeqNo=this.sEmpSeqNo),this.drcEmpPay.length>0&&(this.othMPField.BasicMonthly=x.J0.StringIsNullOrEmpty(this.drcEmpPay[0].BasicMonthly)?0:parseFloat(this.drcEmpPay[0].BasicMonthly)),this.drcEmpGrades=this.dsAllEmpsData.Tables[12].filter(J=>J.EmpSeqNo==this.sEmpSeqNo),this.drcPTDimension=this.dsAllEmpsData.Tables[13].filter(J=>J.EmpSeqNo==this.sEmpSeqNo),this.drcAssLeaves=this.dsAllEmpsData.Tables[8].filter(J=>J.EmpSeqNo==this.sEmpSeqNo);let j,E=C.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),b=" 1=1 ",p="";if(this.drcWOffDef=this.dsAllEmpsData.Tables[4],j=this.dsAllEmpsData.Tables[4],null!=E&&E.length>0)for(let J=0;J<E.length;J++)null!=E[J]&&""!=E[J]&&(p="CCNID"+(parseInt(E[J])-5e4),this.drcCCData=this.dsData.Tables[0].filter(Ce=>Ce.EmpSeqNo=this.sEmpSeqNo),null!=this.drcCCData&&this.drcCCData.length>0&&(p.Contains("CCNID51")?(b+=" AND ( "+p+"="+this.drcCCData[0].EmpSeqNo+" OR "+p+"= 1)",j=j.filter(Ce=>Ce[p]==this.drcCCData[0].EmpSeqNo||1==Ce[p])):(b+=" AND ( "+p+"="+this.drcCCData[0][p]+" OR "+p+"= 1)",j=j.filter(Ce=>Ce[p]==this.drcCCData[0][p]||1==Ce[p]))));" 1=1 "!=b&&(this.drcWOffDef=j);let T=this.dsAllEmpsData.Tables[5];if(E=C.d.SessionManager.Preferences.HolidaysBasedOn.split(","),b=" 1=1 ",p="",null!=E&&E.length>0)for(let J=0;J<E.length;J++)null!=E[J]&&""!=E[J]&&(p="CCNID"+(parseInt(E[J])-5e4),this.drcCCData=this.dsData.Tables[0].filter(Ce=>Ce.EmpSeqNo==this.sEmpSeqNo),null!=this.drcCCData&&this.drcCCData.length>0&&(p.Contains("CCNID51")?(b+=" AND ( "+p+"="+this.drcCCData[0].EmpSeqNo+" OR "+p+"= 1)",T=T.filter(Ce=>Ce[p]==this.drcCCData[0].EmpSeqNo||1==Ce[p])):(b+=" AND ( "+p+"="+this.drcCCData[0][p]+" OR "+p+"= 1)",T=T.filter(Ce=>Ce[p]==this.drcCCData[0][p]||1==Ce[p]))));if(" 1=1 "!=b&&(this.drcHolidayDef=T),this.drcDependentInfo=this.dsAllEmpsData.Tables[23].filter(J=>J.EmpSeqNo==this.sEmpSeqNo),this.drcLatesProc=this.dsAllEmpsData.Tables[31].filter(J=>J.EmpSeqNo==this.sEmpSeqNo),this.drcApprisal=this.dsAllEmpsData.Tables[34].filter(J=>J.EmpSeqNo==this.sEmpSeqNo),this.drcApprisal.length>0&&(this.AppraisalMonth=x.J0.ParseDate(this.drcApprisal[0].CEffectFrom)),this.drcAllApprisal=this.dsAllEmpsData.Tables[35].filter(J=>J.EmpSeqNo==this.sEmpSeqNo),null!=this.drcAllApprisal&&this.drcAllApprisal.length>0&&(this.drcAllApprisal=this.dsAllEmpsData.Tables[35].filter(J=>J.CEffectFrom<=this.PayrollMonthEnd.ToString("dd MMM yyyy")),null!=this.drcAllApprisal&&this.drcAllApprisal.length>1&&(this.drcStructure=this.dtStructure.filter(J=>1==J.Type&&"Yes"==J.Applicable&&J.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)))for(let J=0;J<this.drcStructure.length;J++)!x.J0.IsEmpty(C.d.SessionManager.Preferences.GosiComponent)&&C.d.SessionManager.Preferences.GosiComponent==this.drcStructure[J].ComponentID.toString()&&(this.dGosi=parseFloat(this.drcAllApprisal[1]["Earning"+parseInt(this.drcStructure[J].SNo)]));let I=0,oe=0,F=0;this.lstAccrAccumulateSNos=new Array;let se,N=0,te=0,v=0,S=0,B=0,O=0,ae=0;if(this.othMPField.dPTApplicableAmt=this.othMPField.dblGrossSalary=0,"Actual Days"==C.d.SessionManager.Preferences.PayDays){let J=x.J0.GetDateDifference(this.PayrollMonthEnd,this.PayrollMonthStart);I=parseInt(J.toString())+1}else I=parseInt(C.d.SessionManager.Preferences.PayDays);if(this.othMPField.MonthDays=I,this.othMPField.DateOfJoining=x.J0.ParseDate(this.drcAllEmpsData[0].CDOJ),this.othMPField.DateOfRelieve=x.J0.ParseDate(null==this.drcAllEmpsData[0].CDORelieve||null==this.drcAllEmpsData[0].CDORelieve?"01-Jan-9000":this.drcAllEmpsData[0].CDORelieve),this.othMPField.dServiceDays=x.J0.GetDateDifference(this.dtAsonDate,this.othMPField.DateOfJoining)+1,this.othMPField.IsAllowOT=!(null==this.drcAllEmpsData[0].IsAllowOT||null==this.drcAllEmpsData[0].IsAllowOT||"No"==this.drcAllEmpsData[0].IsAllowOT.toString()),this.othMPField.GradeID="True"==C.d.SessionManager.Preferences.GradeWiseMonthlyPayroll.toString()&&null!=this.drcEmpGrades&&this.drcEmpGrades.length>0?parseInt(this.drcEmpGrades[0].GradeID):1,this.LeaveYearStartmonth=new Date(parseInt(this.PayrollMonthStart.ToString("yyyy")),parseInt(C.d.SessionManager.Preferences.LeaveYear.toString()),1),this.LeaveYearEndmonth=this.LeaveYearStartmonth.AddMonths(12).AddDays(-1),C.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==C.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&(this.drLeaveYear=this.dsAllEmpsData.Tables[40].filter(J=>"LeaveYear"==J.Name&&J.GradeID==this.othMPField.GradeID),null!=this.drLeaveYear&&this.drLeaveYear.length>0&&(this.LeaveYearStartmonth=new Date(parseInt(this.PayrollMonthStart.ToString("yyyy")),parseInt(this.drLeaveYear[0].Value.toString()),1),this.LeaveYearEndmonth=this.LeaveYearStartmonth.AddMonths(12).AddDays(-1))),this.drcStructure=this.dtStructure.filter(J=>J.GradeID==this.othMPField.GradeID),se=this.drcStructure,this.drcStructure=this.dtStructure.filter(J=>1==J.Type&&"Yes"==J.Applicable&&"OverTime"!=J.FieldType&&J.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let J=0;J<this.drcStructure.length;J++)this.oCPField=new z,this.oCPField.SNo=parseInt(this.drcStructure[J].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[J].ComponentID),this.oCPField.ComponentName=this.drcStructure[J].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[J].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[J].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[J].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[J].ROff),this.oCPField.Behaviour=x.J0.IsEmpty(this.drcStructure[J].Behaviour)?"":this.drcStructure[J].Behaviour.toString(),("Accruals"==this.oCPField.Behaviour||"Accruals-AccumulateForPreviousYears"==this.oCPField.Behaviour)&&(this.oCPField.IsAccrualType=!0,"Accruals-AccumulateForPreviousYears"==this.oCPField.Behaviour&&this.lstAccrAccumulateSNos.push(this.oCPField.SNo)),"EmployeeMaster"==this.oCPField.FieldType?(this.oCPField.dActual=this.drcEmpPay.length>0?parseFloat(this.drcEmpPay[0]["Earning"+this.oCPField.SNo]).ToString(C.d.SessionManager.sPayrollDecimals):C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=this.oCPField.dActual):(this.oCPField.dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals)),this.oCPField.dArrear=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[0].push(this.oCPField);if(this.drcStructure=se,this.drcStructure=this.dtStructure.filter(J=>1==J.Type&&"Yes"==J.Applicable&&"OverTime"==J.FieldType&&J.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let J=0;J<this.drcStructure.length;J++){if(this.oCPField=new z,this.oCPField.SNo=parseInt(this.drcStructure[J].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[J].ComponentID),this.oCPField.ComponentName=this.drcStructure[J].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[J].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[J].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[J].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[J].ROff),this.othMPField.IsAllowOT)if("True"==C.d.SessionManager.Preferences.GetDailyAttendanceDataInMonthlyPayroll){let Ce=x.J0.DTComputeSUM(this.dsAllEmpsData.Tables[14].filter(Y=>Y.EmpSeqNo==+this.sEmpSeqNo),"OT"+(J+1),!0);this.oCPField.dActual=Ce.ToString(C.d.SessionManager.sPayrollDecimals2)}else this.oCPField.dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals);else this.oCPField.dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals);this.oCPField.dArrear=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[1].push(this.oCPField)}if(this.drcStructure=se,this.drcStructure=this.dtStructure.filter(J=>2==J.Type&&"Yes"==J.Applicable&&"OverTime"!=J.FieldType&&J.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let J=0;J<this.drcStructure.length;J++)this.oCPField=new z,this.oCPField.SNo=parseInt(this.drcStructure[J].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[J].ComponentID),this.oCPField.ComponentName=this.drcStructure[J].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[J].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[J].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[J].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[J].ROff),"PT"==this.oCPField.ComponentName&&(this.othMPField.PTIndex=J),"EmployeeMaster"==this.oCPField.FieldType?(this.oCPField.dActual=C.d.SessionManager.Round(this.drcEmpPay.length>0?parseFloat(this.drcEmpPay[0]["Deduction"+this.oCPField.SNo]):0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=this.oCPField.dActual):(this.oCPField.dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals)),this.oCPField.dArrear=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2].push(this.oCPField);if(this.drcStructure=se,this.drcStructure=this.dtStructure.filter(J=>2==J.Type&&"Yes"==J.Applicable&&"OverTime"==J.FieldType&&J.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let J=0;J<this.drcStructure.length;J++)this.oCPField=new z,this.oCPField.SNo=parseInt(this.drcStructure[J].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[J].ComponentID),this.oCPField.ComponentName=this.drcStructure[J].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[J].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[J].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[J].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[J].ROff),this.oCPField.dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dArrear=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[3].push(this.oCPField);this.othMPField.iExtLoansCnt=0;let ee,fe=0,_=0,K=0;if(this.drcStructure=se,this.drcStructure=this.dtStructure.filter(J=>3==J.Type&&J.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&null!=this.drcStructure&&this.drcStructure.length>0){let J=0;for(let Ce=0;Ce<this.drcStructure.length;Ce++){if(this.oCPField=new z,this.oCPField.SNo=parseInt(this.drcStructure[Ce].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Ce].ComponentID),this.oCPField.ComponentName=this.drcStructure[Ce].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Ce].Formula,this.oCPField.AddToNet=this.drcStructure[Ce].AddToNet,this.oCPField.FieldType=this.drcStructure[Ce].FieldType,this.oCPField.ROff=null==this.drcStructure[Ce].ROff||null==this.drcStructure[Ce].ROff||""==this.drcStructure[Ce].ROff.toString()?0:parseFloat(this.drcStructure[Ce].ROff),this.oCPField.IsEditable=0,this.oCPField.IsReadOnly=1,this.oCPField.IsVisible=1,ee=this.dsAllEmpsData.Tables[10].filter(Y=>Y.EmpSeqNo==this.sEmpSeqNo&&Y.LoanCompID==this.oCPField.ComponentID&&Y.InstBalance>0&&Y.DeductionMonth<=this.PayrollMonth.ToString("dd/MMM/yyyy")),null!=ee&&null!=ee&&ee.length>0){J++,_=K=0,this.oCPField.LoanSlNo=J.toString(),this.oCPField.LoanDocNo=ee[0].DocNo.toString(),this.oCPField.LoanInvDocDetailsID=ee[0].InvDocDetailsID.toString(),this.oCPField.LoanApprovedAmt=ee[0].ApprovedAmt.toString();let Y="";1==ee.length?(this.oCPField.LoanInstNo=ee[0].InstallmentNo.toString()+"/"+ee[0].NoOfInstallments.toString(),this.oCPField.LoanActInstNo=ee[0].InstallmentNo.toString(),Y=ee[0].InstallmentNo.toString()):(this.oCPField.LoanInstNo=ee[ee.length-1].InstallmentNo.toString()+"/"+ee[0].NoOfInstallments.toString(),this.oCPField.LoanActInstNo=ee[ee.length-1].InstallmentNo.toString(),Y=ee[ee.length-1].InstallmentNo.toString());let Ee=this.dsAllEmpsData.Tables[10].filter(Te=>Te.EmpSeqNo==this.sEmpSeqNo&&Te.LoanCompID==this.oCPField.ComponentID&&Te.InstallmentNo<=Y).Compute("sum","Paid");null!=Ee&&null!=Ee&&(_=parseFloat(Ee)),fe=parseFloat(this.oCPField.LoanApprovedAmt)-_,Ee=this.dsAllEmpsData.Tables[10].filter(Te=>Te.EmpSeqNo==this.sEmpSeqNo&&Te.LoanCompID==this.oCPField.ComponentID&&Te.InstallmentNo<=Y).Compute("sum","InstBalance"),null!=Ee&&null!=Ee&&(K=parseFloat(Ee)),this.oCPField.LoanActInstAmt=K.toString(),this.oCPField.LoanInstAmt=K.ToString(C.d.SessionManager.sPayrollDecimals),this.oCPField.LoanBalAmt=fe.ToString(C.d.SessionManager.sPayrollDecimals),this.oCPField.LoanPayStatus="0",this.oCPField.dActual=parseFloat(this.oCPField.LoanActInstAmt).ToString(C.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=parseFloat(this.oCPField.LoanInstAmt).ToString(C.d.SessionManager.sPayrollDecimals),this.othMPField.iExtLoansCnt++}else this.oCPField.IsVisible=0,this.oCPField.dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals);this.oCPField.dArrear=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[4].push(this.oCPField)}}if(this.drcStructure=se,this.drcStructure=this.dtStructure.filter(J=>4==J.Type&&J.GradeID==+this.othMPField.GradeID&&"Yes"==J.IsCalculate),null!=this.drcStructure&&this.drcStructure.length>0){let J=0,Ce=0,Y=0,Ee=0;for(let Te=0;Te<this.drcStructure.length;Te++){this.oCPField=new z,this.oCPField.SNo=parseInt(this.drcStructure[Te].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Te].ComponentID),this.oCPField.ComponentName=this.drcStructure[Te].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Te].Formula,this.oCPField.AddToNet=this.drcStructure[Te].AddToNet,this.oCPField.FieldType=this.drcStructure[Te].FieldType,this.oCPField.ROff=null==this.drcStructure[Te].ROff||null==this.drcStructure[Te].ROff||""==this.drcStructure[Te].ROff.toString()?0:parseFloat(this.drcStructure[Te].ROff),this.oCPField.Percentage=parseFloat(this.drcStructure[Te].Percentage),this.drcAssLeaves=this.dsAllEmpsData.Tables[8].filter(tt=>tt.EmpSeqNo==this.sEmpSeqNo&&tt.LeaveType==this.oCPField.ComponentName),this.drcAssLeaves.length>0&&(J=parseFloat(this.drcAssLeaves[0].Total));let Le={dTaken:Y,dAvail:Ee};x.J0.ParseDate(this.PayrollMonthStart)<=x.J0.ParseDate(this.LeaveYearEndmonth)&&x.J0.ParseDate(this.PayrollMonthStart)!=x.J0.ParseDate(this.LeaveYearStartmonth)&&(this.GetLeavesTaken(this.LeaveYearStartmonth.ToString("dd/MMM/yyyy"),this.PayrollMonthStart.AddDays(-1).ToString("dd/MMM/yyyy"),this.oCPField.ComponentID.toString(),Le),Y=Le.dTaken,Ee=Le.dAvail),Le={dTaken:Ce,dAvail:Ee},this.GetLeavesTaken(this.PayrollMonthStart.ToString("dd/MMM/yyyy"),this.PayrollMonthEnd.ToString("dd/MMM/yyyy"),this.oCPField.ComponentID.toString(),Le),Ce=Le.dTaken,Ee=Le.dAvail,-1!=this.oCPField.MaxLeaves?(this.oCPField.LeaveTotOPBal=(J-Y).ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveMonOPBal=Ee.ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveTaken=Ce.ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveNetBal=(J-Y-Ce).ToString(C.d.SessionManager.sPayrollDecimals2)):(this.oCPField.LeaveTotOPBal=(0).ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveMonOPBal=(0).ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveTaken=Ce.ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveNetBal=(0).ToString(C.d.SessionManager.sPayrollDecimals2)),B+=parseFloat(this.oCPField.LeaveTaken),this.oCPField.dActual=(0).ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=(0).ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.dArrear=(0).ToString(C.d.SessionManager.sPayrollDecimals2),this.oCPField.dAdjusted=(0).ToString(C.d.SessionManager.sPayrollDecimals2),parseFloat(this.oCPField.LeaveTaken)>0&&this.oCPField.Percentage>0&&(O+=parseFloat(this.oCPField.LeaveTaken)*this.oCPField.Percentage/100),this.arrLstCPFields[5].push(this.oCPField)}}if(this.lstHolidays.Clear(),null!=this.dtHolidayDef&&this.dtHolidayDef.length>0)for(let J=0;J<this.dtHolidayDef.length;J++)this.lstHolidays.push(x.J0.ParseDate(this.dtHolidayDef[J].HolidayDate));v+=this.GetUnpaidDays();let U=this.othMPField.DateOfJoining>this.PayrollMonthStart?this.othMPField.DateOfJoining:this.PayrollMonthStart,ie=this.othMPField.DateOfRelieve<this.PayrollMonthEnd?this.othMPField.DateOfRelieve:this.PayrollMonthEnd;if(oe=-1,F=-1,this.drcWOffDef.length>0)N=this.CalculateWeeklyOffsFromDef();else{let J="",Ce="";switch(J="NONE"!=this.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?this.drcAllEmpsData[0].WeeklyOff1.toString():C.d.SessionManager.Preferences.WeeklyOff1.toString(),"NONE"!=this.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?this.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=J.toUpperCase()&&(Ce=this.drcAllEmpsData[0].WeeklyOff2.toString()):Ce=C.d.SessionManager.Preferences.WeeklyOff2.toString(),J){case"Sunday":oe=0;break;case"Monday":oe=1;break;case"Tuesday":oe=2;break;case"Wednesday":oe=3;break;case"Thursday":oe=4;break;case"Friday":oe=5;break;case"Saturday":oe=6}switch(Ce){case"Sunday":F=0;break;case"Monday":F=1;break;case"Tuesday":F=2;break;case"Wednesday":F=3;break;case"Thursday":F=4;break;case"Friday":F=5;break;case"Saturday":F=6}if(-1!=oe){let Y=U;for(parseInt(Y.getDay().toString())<oe?Y=Y.AddDays(oe-parseInt(Y.getDay().toString())):parseInt(Y.getDay().toString())>oe&&(Y=Y.AddDays(7-(parseInt(Y.getDay().toString())-oe)));Y<=ie;)this.lstHolidays.Contains(Y)||N++,Y=Y.AddDays(7)}if(-1!=F&&oe!=F){let Y=U;for(parseInt(Y.getDay().toString())<F?Y=Y.AddDays(F-parseInt(Y.getDay().toString())):parseInt(Y.getDay().toString())>F&&(Y=Y.AddDays(7-(parseInt(Y.getDay().toString())-F)));Y<=ie;)this.lstHolidays.Contains(Y)||N++,Y=Y.AddDays(7)}}for(let J=0;J<this.lstHolidays.length;J++)this.lstHolidays[J]>=this.othMPField.DateOfJoining&&this.lstHolidays[J]<=this.othMPField.DateOfRelieve&&te++;ae=N+te,S=I-(ae+B+v),this.othMPField.DaysAttended=ae,this.othMPField.TotalLeaves=B,this.othMPField.PaidLeaves=O,this.othMPField.WeeklyOffs=N,this.othMPField.Holidays=te,this.othMPField.LOPDays=S,this.othMPField.UnpaidDays=v,this.othMPField.TotalDays=ae+B+S+v,this.othMPField.PaidDays=ae+O}}ExecuteAllFormulas(){try{if(Logger.InfoLog("CommonMonthlyPayroll::Entering ExecuteAllFormulas()"),this.othMPField.dblGrossSalary=0,this.ExecuteFormulas(!0),this.ExecuteFormulas(!1),this.ExecuteFormulas(!1),this.ExecuteFormulas(!0),this.ExecuteFormulas(!1),this.ExecuteFormulas(!1),this.othMPField.dblGrossSalary=this.othMPField.totEarnings,this.othMPField.PTIndex>=0){let j=this.dsAllEmpsData.Tables[3];if(this.drcPTDimension.length>0){let T=this.dsAllEmpsData.Tables[3];if(T=T.filter(I=>I.NodeID==x.J0.String(this.drcPTDimension[0].PTDimension)&&""!=I.Formula),null!=T&&T.length>0&&!x.J0.IsEmpty(T[0].Formula)){let I=this.fldDict,oe=parseFloat(C.d.eval.EvaluateExpression(T[0].Formula.toString(),I));this.arrLstCPFields[2][this.othMPField.PTIndex].dEarned=oe.ToString(C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2][this.othMPField.PTIndex].dActual=oe.ToString(C.d.SessionManager.sPayrollDecimals)}else j=j.filter(I=>I.NodeID==x.J0.String(this.drcPTDimension[0].PTDimension)&&I.FromSlab<=this.othMPField.dPTApplicableAmt&&I.ToSlab>=this.othMPField.dPTApplicableAmt),j.length>0?(this.arrLstCPFields[2][this.othMPField.PTIndex].dEarned=parseFloat(j[0].Amount).ToString(C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2][this.othMPField.PTIndex].dActual=parseFloat(j[0].Amount).ToString(C.d.SessionManager.sPayrollDecimals)):(this.arrLstCPFields[2][this.othMPField.PTIndex].dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2][this.othMPField.PTIndex].dActual=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals))}}this.othMPField.totEarnings=this.othMPField.totDeductions=this.othMPField.totActEarnings=0,this.othMPField.totActDeductions=this.othMPField.totLoans=this.othMPField.totOPBalLeaves=0,this.othMPField.totLeavesTaken=this.othMPField.totNetBalLeaves=0,this.othMPField.totEarArrears=this.othMPField.totDedArrears=0,this.othMPField.totEarAdjustments=this.othMPField.totDedAdjustments=0,this.othMPField.totOTAmount=0;for(let j=0;j<this.arrLstCPFields[0].length;j++)""!=this.arrLstCPFields[0][j].SNo.toString()&&null!=this.arrLstCPFields[0][j].AddToNet&&""!=this.arrLstCPFields[0][j].AddToNet&&("Net"==this.arrLstCPFields[0][j].AddToNet||"NetAndTax"==this.arrLstCPFields[0][j].AddToNet)&&(this.othMPField.totActEarnings+=parseFloat(this.arrLstCPFields[0][j].dActual),this.othMPField.totEarnings+=parseFloat(this.arrLstCPFields[0][j].dEarned),this.othMPField.totEarArrears+=parseFloat(this.arrLstCPFields[0][j].dArrear),this.othMPField.totEarAdjustments+=parseFloat(this.arrLstCPFields[0][j].dAdjusted));let b,E=new Date(1,1,1,0,0,0);for(let j=0;j<this.arrLstCPFields[1].length;j++)""!=this.arrLstCPFields[1][j].SNo.toString()&&null!=this.arrLstCPFields[1][j].AddToNet&&""!=this.arrLstCPFields[1][j].AddToNet&&("Net"==this.arrLstCPFields[1][j].AddToNet||"NetAndTax"==this.arrLstCPFields[1][j].AddToNet)&&(b=this.arrLstCPFields[1][j].dActual.toString().split("."),E=E.AddHours(parseFloat(b[0])),b.length>1&&(1==b[1].length&&(b[1]=b[1]+"0"),E=E.AddMinutes(parseFloat(b[1]))),this.othMPField.totOTAmount+=parseFloat(this.arrLstCPFields[1][j].dEarned));let p=E.getMinutes().toString();1==p.length&&(p="0"+p),this.othMPField.totOTHours=E.getHours()+"."+p;for(let j=0;j<this.arrLstCPFields[2].length;j++)""!=this.arrLstCPFields[2][j].SNo.toString()&&null!=this.arrLstCPFields[2][j].AddToNet&&""!=this.arrLstCPFields[2][j].AddToNet&&("Net"==this.arrLstCPFields[2][j].AddToNet||"NetAndTax"==this.arrLstCPFields[2][j].AddToNet)&&(this.othMPField.totActDeductions+=parseFloat(this.arrLstCPFields[2][j].dActual),this.othMPField.totDeductions+=parseFloat(this.arrLstCPFields[2][j].dEarned),this.othMPField.totDedArrears+=parseFloat(this.arrLstCPFields[2][j].dArrear),this.othMPField.totDedAdjustments+=parseFloat(this.arrLstCPFields[2][j].dAdjusted));for(let j=0;j<this.arrLstCPFields[4].length;j++)""!=this.arrLstCPFields[4][j].SNo.toString()&&1==this.arrLstCPFields[4][j].IsVisible&&null!=this.arrLstCPFields[4][j].LoanInstAmt&&""!=this.arrLstCPFields[4][j].LoanInstAmt.toString()&&parseFloat(this.arrLstCPFields[4][j].LoanInstAmt)>0&&(this.othMPField.totLoans+=parseFloat(this.arrLstCPFields[4][j].LoanInstAmt));for(let j=0;j<this.arrLstCPFields[5].length;j++)""!=this.arrLstCPFields[5][j].SNo.toString()&&(null!=this.arrLstCPFields[5][j].LeaveTotOPBal&&""!=this.arrLstCPFields[5][j].LeaveTotOPBal.toString()&&(this.othMPField.totOPBalLeaves+=parseFloat(this.arrLstCPFields[5][j].LeaveTotOPBal)),null!=this.arrLstCPFields[5][j].LeaveTaken&&""!=this.arrLstCPFields[5][j].LeaveTaken.toString()&&(this.othMPField.totLeavesTaken+=parseFloat(this.arrLstCPFields[5][j].LeaveTaken)),null!=this.arrLstCPFields[5][j].LeaveNetBal&&""!=this.arrLstCPFields[5][j].LeaveNetBal.toString()&&(this.othMPField.totNetBalLeaves+=parseFloat(this.arrLstCPFields[5][j].LeaveNetBal)));this.othMPField.NetSalary=parseFloat(x.J0.GetAmountsBasedOnPref(this.othMPField.totEarnings+this.othMPField.totEarArrears+this.othMPField.totEarAdjustments+this.othMPField.totOTAmount-(this.othMPField.totDeductions+this.othMPField.totDedArrears+this.othMPField.totDedAdjustments+this.othMPField.totLoans),C.d.SessionManager.sPayrollDecimals.replace("N",""))),Logger.InfoLog("CommonMonthlyPayroll::Exiting ExecuteAllFormulas()")}catch(E){Logger.ErrorLog("CommonMonthlyPayroll::EXCEPTION ExecuteAllFormulas()"+E.stack)}}ExecuteFormulas(E){try{Logger.InfoLog("CommonMonthlyPayroll::Entering ExecuteFormulas()"),this.fldDict=new G.bT;let p,b="0";this.othMPField.totEarnings=this.othMPField.totDeductions=this.othMPField.totActEarnings=0,this.othMPField.totActDeductions=this.othMPField.totLoans=this.othMPField.totOPBalLeaves=0,this.othMPField.totLeavesTaken=this.othMPField.totNetBalLeaves=0,this.othMPField.totEarArrears=this.othMPField.totDedArrears=0,this.othMPField.totEarAdjustments=this.othMPField.totDedAdjustments=0,this.othMPField.totOTAmount=0,p=new X.Nl("Basic",""),this.fldDict.push("Basic",p),this.fldDict.Basic.setFieldValue(this.othMPField.BasicMonthly),p=new X.Nl("Gross",""),this.fldDict.push("Gross",p),this.fldDict.Gross.setFieldValue(this.othMPField.dblGrossSalary),p=new X.Nl("ServiceDays",""),this.fldDict.push("ServiceDays",p),this.fldDict.ServiceDays.setFieldValue(this.othMPField.dServiceDays),p=new X.Nl("ServiceYears",""),this.fldDict.push("ServiceYears",p),this.fldDict.ServiceYears.setFieldValue(this.othMPField.dServiceYears),p=new X.Nl("ResignType",""),this.fldDict.push("ResignType",p),this.fldDict.ResignType.setFieldValue(this.othMPField.sResignType),p=new X.Nl("GratuityAmount",""),this.fldDict.push("GratuityAmount",p),this.fldDict.GratuityAmount.setFieldValue(this.othMPField.GratuityAmount),p=new X.Nl("WeeklyOffs",""),this.fldDict.push("WeeklyOffs",p),this.fldDict.WeeklyOffs.setFieldValue(this.othMPField.WeeklyOffs),p=new X.Nl("LeavesTaken",""),this.fldDict.push("LeavesTaken",p),this.fldDict.LeavesTaken.setFieldValue(this.othMPField.TotalLeaves),p=new X.Nl("VacDaysTaken",""),this.fldDict.push("VacDaysTaken",p),this.fldDict.VacDaysTaken.setFieldValue(this.othMPField.dblTotVacDays),p=new X.Nl("VacDays",""),this.fldDict.push("VacDays",p),this.fldDict.VacDays.setFieldValue(this.othMPField.dblTotMVacDays),p=new X.Nl("VacAmount",""),this.fldDict.push("VacAmount",p),this.fldDict.VacAmount.setFieldValue(this.othMPField.dblTotVacAmount),p=new X.Nl("VacEncashDays",""),this.fldDict.push("VacEncashDays",p),this.fldDict.VacEncashDays.setFieldValue(this.othMPField.dblTotVacEncashDays),p=new X.Nl("VacEncashAmount",""),this.fldDict.push("VacEncashAmount",p),this.fldDict.VacEncashAmount.setFieldValue(this.othMPField.dblTotVacEncashAmount),p=new X.Nl("VacExcessDays",""),this.fldDict.push("VacExcessDays",p),this.fldDict.VacExcessDays.setFieldValue(this.othMPField.dblTotVacExcessDays),p=new X.Nl("VacExcessAmount",""),this.fldDict.push("VacExcessAmount",p),this.fldDict.VacExcessAmount.setFieldValue(this.othMPField.dblTotVacExcessAmount),p=new X.Nl("VacNetAmount",""),this.fldDict.push("VacNetAmount",p),this.fldDict.VacNetAmount.setFieldValue(this.othMPField.dblTotVacNetAmount),p=new X.Nl("TotalDays",""),this.fldDict.push("TotalDays",p),this.fldDict.TotalDays.setFieldValue(this.othMPField.TotalDays),p=new X.Nl("DaysAttended",""),this.fldDict.push("DaysAttended",p),this.fldDict.DaysAttended.setFieldValue(E?this.othMPField.TotalDays:this.othMPField.DaysAttended+this.othMPField.TotalLeaves),p=new X.Nl("UnpaidDays",""),this.fldDict.push("UnpaidDays",p),this.fldDict.UnpaidDays.setFieldValue(this.othMPField.UnpaidDays),p=new X.Nl("LOPDays",""),this.fldDict.push("LOPDays",p),this.fldDict.LOPDays.setFieldValue(this.othMPField.LOPDays),p=new X.Nl("Holidays",""),this.fldDict.push("Holidays",p),this.fldDict.Holidays.setFieldValue(this.othMPField.Holidays),p=new X.Nl("AdjDays",""),this.fldDict.push("AdjDays",p),this.fldDict.AdjDays.setFieldValue(this.dAdjDays),p=new X.Nl("EmpType",""),this.fldDict.push("EmpType",p),this.fldDict.EmpType.setFieldValue(this.drcAllEmpsData[0].sEmpType.toString()),p=new X.Nl("Gender",""),this.fldDict.push("Gender",p),this.fldDict.Gender.setFieldValue(this.drcAllEmpsData[0].sGender.toString()),p=new X.Nl("MaritalStatus",""),this.fldDict.push("MaritalStatus",p),this.fldDict.MaritalStatus.setFieldValue(this.drcAllEmpsData[0].sMaritalStatus.toString()),p=new X.Nl("Nationality",""),this.fldDict.push("Nationality",p),this.fldDict.Nationality.setFieldValue(this.drcAllEmpsData[0].sNationality.toString()),p=new X.Nl("Religion",""),this.fldDict.push("Religion",p),this.fldDict.Religion.setFieldValue(this.drcAllEmpsData[0].sReligion.toString()),this.isValidGWSlabs&&(this.fldDict.EmpType.setFieldValue(this.sEmpType),this.fldDict.Gender.setFieldValue(this.sGender),this.fldDict.MaritalStatus.setFieldValue(this.sMaritalStatus),this.fldDict.Nationality.setFieldValue(this.sNationality),this.fldDict.Religion.setFieldValue(this.sReligion)),p=new X.Nl("ChildrenCount",""),this.fldDict.push("ChildrenCount",p),null!=this.drcDependentInfo?(this.drcDependentInfo.RowFilter="EmpSeqNo="+this.sEmpSeqNo+" AND Relation='Children'",this.fldDict.ChildrenCount.setFieldValue(this.drcDependentInfo.length)):this.fldDict.ChildrenCount.setFieldValue(0),p=new X.Nl("ChildrenDays",""),this.fldDict.push("ChildrenDays",p);let j=0;if(null!=this.drcDependentInfo&&null!=this.drcDependentInfo&&(this.drcDependentInfo=this.drcDependentInfo.filter(U=>U.EmpSeqNo=this.sEmpSeqNo&&"Children"==U.Relation)),null!=this.drcDependentInfo&&this.drcDependentInfo.length>0){let U=this.drcDependentInfo;for(let ie=0;ie<U.length;ie++)if(x.J0.ParseDate(U.Rows[ie].ChildDOB)>=this.PayrollMonthStart&&x.J0.ParseDate(U.Rows[ie].ChildDOB)<=this.PayrollMonthEnd)j+=x.J0.GetDateDifference(this.PayrollMonthEnd,x.J0.ParseDate(U.Rows[ie].ChildDOB))+1;else{let J=0,Ce=0,Y=0,Ee={iY:J,iM:Ce,iD:Y};x.J0.GetYearsMonthsDays(x.J0.ParseDate(U.Rows[ie].ChildDOB),this.PayrollMonthEnd,Ee),J=Ee.iY,Ce=Ee.iM,Y=Ee.iD,18==J&&0==Ce?j+=x.J0.GetDateDifference(this.PayrollMonthEnd,this.PayrollMonthStart)+1-Y:J<18&&(j+=x.J0.GetDateDifference(this.PayrollMonthEnd,this.PayrollMonthStart)+1)}}this.fldDict.ChildrenDays.setFieldValue(j),p=new X.Nl("PayrollMonthNo",""),this.fldDict.push("PayrollMonthNo",p),this.fldDict.PayrollMonthNo.setFieldValue(this.PayrollMonth.iMonth()),p=new X.Nl("PayrollYearNo",""),this.fldDict.push("PayrollYearNo",p),this.fldDict.PayrollYearNo.setFieldValue(this.PayrollMonth.getFullYear()),p=new X.Nl("DOJMonth",""),this.fldDict.push("DOJMonth",p),this.fldDict.DOJMonth.setFieldValue(x.J0.ParseDate(this.drcAllEmpsData[0].CDOJ).iMonth()),p=new X.Nl("DOJYear",""),this.fldDict.push("DOJYear",p),this.fldDict.DOJYear.setFieldValue(x.J0.ParseDate(this.drcAllEmpsData[0].CDOJ).getFullYear()),p=new X.Nl("DORMonth",""),this.fldDict.push("DORMonth",p),x.J0.IsEmpty(this.drcAllEmpsData[0].CDORelieve)?this.fldDict.DORMonth.setFieldValue(1):this.fldDict.DORMonth.setFieldValue(x.J0.ParseDate(this.drcAllEmpsData[0].CDORelieve).iMonth()),p=new X.Nl("DORYear",""),this.fldDict.push("DORYear",p),x.J0.IsEmpty(this.drcAllEmpsData[0].CDORelieve)?this.fldDict.DORYear.setFieldValue(2200):this.fldDict.DORYear.setFieldValue(x.J0.ParseDate(this.drcAllEmpsData[0].CDORelieve).getFullYear()),p=new X.Nl("EmpConfirmationDate",""),this.fldDict.Add("EmpConfirmationDate",p);let T=new Date;x.J0.isValidDate(this.drcAllEmpsData[0].CDOC)&&(T=x.J0.ParseDate(this.drcAllEmpsData[0].CDOC)),this.fldDict.EmpConfirmationDate.setFieldValue(T),p=new X.Nl("LeaveFromDate",""),this.fldDict.Add("LeaveFromDate",p),this.fldDict.LeaveFromDate.setFieldValue(new Date),p=new X.Nl("LeaveNoOfDays",""),this.fldDict.Add("LeaveNoOfDays",p),this.fldDict.LeaveNoOfDays.setFieldValue(0),p=new X.Nl("EmpVacationDays",""),this.fldDict.Add("EmpVacationDays",p),this.fldDict.EmpVacationDays.setFieldValue(this.drcAllEmpsData[0].VacDaysPerMonth),p=new X.Nl("AppraisalMonthNo",""),this.fldDict.push("AppraisalMonthNo",p),this.fldDict.AppraisalMonthNo.setFieldValue(this.drcApprisal.length>0?this.AppraisalMonth.iMonth():0),this.isValidBulkAppraisal&&this.fldDict.AppraisalMonthNo.setFieldValue(this.EffectFrom.iMonth()),p=new X.Nl("VacDaysPayYes",""),this.fldDict.push("VacDaysPayYes",p),this.fldDict.VacDaysPayYes.setFieldValue(0),p=new X.Nl("VacDaysPayNo",""),this.fldDict.push("VacDaysPayNo",p),this.fldDict.VacDaysPayNo.setFieldValue(0),p=new X.Nl("PreviousGosiValue",""),this.fldDict.push("PreviousGosiValue",p),this.fldDict.PreviousGosiValue.setFieldValue(this.dGosi),p=new X.Nl("ActDaysAttended",""),this.fldDict.push("ActDaysAttended",p),this.fldDict.ActDaysAttended.setFieldValue(this.othMPField.ActDaysAttended),p=new X.Nl("PreviousMonthPaidDays",""),this.fldDict.push("PreviousMonthPaidDays",p),this.fldDict.PreviousMonthPaidDays.setFieldValue(this.othMPField.PreviousMonthPaidDays),p=new X.Nl("PaidDays",""),this.fldDict.push("PaidDays",p),this.fldDict.PaidDays.setFieldValue(this.othMPField.PaidDays),p=new X.Nl("PreviousMonthVacationDays",""),this.fldDict.push("PreviousMonthVacationDays",p),this.fldDict.PreviousMonthVacationDays.setFieldValue(this.othMPField.PreviousMonthVacationDays),p=new X.Nl("DailyAttExists",""),this.fldDict.push("DailyAttExists",p),this.fldDict.DailyAttExists.setFieldValue(0);let I=0;I=this.PayrollMonthEnd.Subtract(this.othMPField.DateOfJoining).Days+1,p=new X.Nl("ServiceDaysTPME",""),this.fldDict.push("ServiceDaysTPME",p),this.fldDict.ServiceDaysTPME.setFieldValue(I);let oe=0,F=0,N=0,te=0,v=0,S=0,B=0,O=0,ae=0,se=0,fe=0;null!=this.drcLatesProc&&(this.drcLatesProc=this.drcLatesProc.filter(U=>U.EmpSeqNo==this.sEmpSeqNo),this.drcLatesProc.length>0&&(oe=parseFloat(this.drcLatesProc[0].TotCheckInLateMins),F=parseFloat(this.drcLatesProc[0].TotCheckOutEarlyMins),N=parseFloat(this.drcLatesProc[0].TotBreak1MoreMins),te=parseFloat(this.drcLatesProc[0].TotBreak2MoreMins),v=parseFloat(this.drcLatesProc[0].TotBreak3MoreMins),S=parseFloat(this.drcLatesProc[0].TotBreak4MoreMins),B=parseFloat(this.drcLatesProc[0].TotBreak5MoreMins),O=parseFloat(this.drcLatesProc[0].TotLateHrsToDeduct),ae=parseFloat(this.drcLatesProc[0].TotLateLeavesToDeduct),se=parseFloat(this.drcLatesProc[0].TotWorkingMinsLessBy),fe=parseFloat(this.drcLatesProc[0].TotAbsentMinsLessBy))),p=new X.Nl("TotCheckInLateMins",""),this.fldDict.push("TotCheckInLateMins",p),this.fldDict.TotCheckInLateMins.setFieldValue(oe),p=new X.Nl("TotCheckOutEarlyMins",""),this.fldDict.push("TotCheckOutEarlyMins",p),this.fldDict.TotCheckOutEarlyMins.setFieldValue(F),p=new X.Nl("TotBreak1MoreMins",""),this.fldDict.push("TotBreak1MoreMins",p),this.fldDict.TotBreak1MoreMins.setFieldValue(N),p=new X.Nl("TotBreak2MoreMins",""),this.fldDict.push("TotBreak2MoreMins",p),this.fldDict.TotBreak2MoreMins.setFieldValue(te),p=new X.Nl("TotBreak3MoreMins",""),this.fldDict.push("TotBreak3MoreMins",p),this.fldDict.TotBreak3MoreMins.setFieldValue(v),p=new X.Nl("TotBreak4MoreMins",""),this.fldDict.push("TotBreak4MoreMins",p),this.fldDict.TotBreak4MoreMins.setFieldValue(S),p=new X.Nl("TotBreak5MoreMins",""),this.fldDict.push("TotBreak5MoreMins",p),this.fldDict.TotBreak5MoreMins.setFieldValue(B),p=new X.Nl("TotLateHrsToDeduct",""),this.fldDict.push("TotLateHrsToDeduct",p),this.fldDict.TotLateHrsToDeduct.setFieldValue(O),p=new X.Nl("TotLateLeavesToDeduct",""),this.fldDict.push("TotLateLeavesToDeduct",p),this.fldDict.TotLateLeavesToDeduct.setFieldValue(ae),p=new X.Nl("TotWorkingMinsLessBy",""),this.fldDict.push("TotWorkingMinsLessBy",p),this.fldDict.TotWorkingMinsLessBy.setFieldValue(se),p=new X.Nl("TotAbsentMinsLessBy",""),this.fldDict.push("TotAbsentMinsLessBy",p),this.fldDict.TotAbsentMinsLessBy.setFieldValue(fe),this.drcCCData=this.dsData.Tables[0].filter(U=>U.EmpSeqNo==this.sEmpSeqNo);let _="",K="";if(p=new X.Nl("RptManagerCode",""),this.fldDict.push("RptManagerCode",p),p=new X.Nl("RptManagerName",""),this.fldDict.push("RptManagerName",p),this.drcCCData.length>0&&!x.J0.IsEmpty(this.drcCCData[0].RptManager)){let U=this.dsData1.filter(ie=>"RptManager"==ie.SysColName&&ie.NodeID==this.drcCCData[0].RptManager.toString());U.length>0&&(_=U[0].Code.toString(),K=U[0].Name.toString())}if(this.fldDict.RptManagerCode.setFieldValue(_),this.fldDict.RptManagerName.setFieldValue(K),this.drcCCData.length>0)for(let U=0;U<Object.keys(this.dsData.Tables[0][0]).length;U++){const ie=Object.keys(this.dsData.Tables[0][0])[U];if(!ie.Contains("CCNID"))continue;let J=this.dsData1.filter(Ce=>Ce.SysColName==ie);if(J.length>0){let Ce=J[0].UserColumnName.toString();if(p=new X.Nl(J[0].UserColumnName.toString()+"Code",""),this.fldDict.push(J[0].UserColumnName.toString()+"Code",p),p=new X.Nl(J[0].UserColumnName.toString()+"Name",""),this.fldDict.push(J[0].UserColumnName.toString()+"Name",p),J=this.dsData1.filter(Y=>Y.SysColName==ie&&Y.NodeID==this.drcCCData[0][ie].toString()),J.length>0?(this.fldDict[J[0].UserColumnName.toString()+"Code"].setFieldValue(J[0].Code.toString()),this.fldDict[J[0].UserColumnName.toString()+"Name"].setFieldValue(J[0].Name.toString())):(this.fldDict[Ce+"Code"].setFieldValue(""),this.fldDict[Ce+"Name"].setFieldValue("")),this.isValidGWSlabs){let Y=this.Parent.ScreenObject.GetCustomField(ie);if(null!=Y&&null!=Y){let Ee="";(Y instanceof W.y$||Y instanceof W.bQ)&&(Ee=Y.SelectedValue.toString()),"0"==Ee&&(Ee="1"),J=this.dsData1.filter(Te=>Te.SysColName==ie&&Te.NodeID==Ee),J.length>0?(this.fldDict[J[0].UserColumnName.toString()+"Code"].setFieldValue(J[0].Code.toString()),this.fldDict[J[0].UserColumnName.toString()+"Name"].setFieldValue(J[0].Name.toString())):(this.fldDict[Ce+"Code"].setFieldValue(""),this.fldDict[Ce+"Name"].setFieldValue(""))}}}}p=new X.Nl("Vac_EMPLOYEE_BASIC",""),this.fldDict.push("Vac_EMPLOYEE_BASIC",p),this.fldDict.Vac_EMPLOYEE_BASIC.setFieldValue(0),p=new X.Nl("VacEncash_EMPLOYEE_BASIC",""),this.fldDict.push("VacEncash_EMPLOYEE_BASIC",p),this.fldDict.VacEncash_EMPLOYEE_BASIC.setFieldValue(0),p=new X.Nl("VacExcess_EMPLOYEE_BASIC",""),this.fldDict.push("VacExcess_EMPLOYEE_BASIC",p),this.fldDict.VacExcess_EMPLOYEE_BASIC.setFieldValue(0),p=new X.Nl("UnPaidWeeklyOffs",""),this.fldDict.push("UnPaidWeeklyOffs",p),this.fldDict.UnPaidWeeklyOffs.setFieldValue(0),p=new X.Nl("UnPaidHolidays",""),this.fldDict.push("UnPaidHolidays",p),this.fldDict.UnPaidHolidays.setFieldValue(0);for(let U=0;U<this.arrLstCPFields[0].length;U++)x.J0.IsEmpty(this.arrLstCPFields[0][U].SNo)||(p=new X.Nl(this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push(this.arrLstCPFields[0][U].ComponentName,p),this.fldDict[this.arrLstCPFields[0][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][U].dActual).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Calc"+this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push("Calc"+this.arrLstCPFields[0][U].ComponentName,p),this.fldDict["Calc"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Arr_"+this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push("Arr_"+this.arrLstCPFields[0][U].ComponentName,p),this.fldDict["Arr_"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][U].dArrear).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Adj_"+this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push("Adj_"+this.arrLstCPFields[0][U].ComponentName,p),this.fldDict["Adj_"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][U].dAdjusted).ToString(C.d.SessionManager.sPayrollDecimals)),"DailyAttendance"==this.arrLstCPFields[0][U].Behaviour&&(this.fldDict.ContainsKey(this.arrLstCPFields[0][U].Formula)||(p=new X.Nl(this.arrLstCPFields[0][U].Formula,""),this.fldDict.push(this.arrLstCPFields[0][U].Formula,p),this.fldDict[this.arrLstCPFields[0][U].Formula].setFieldValue(0))),p=new X.Nl("Vac_"+this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push("Vac_"+this.arrLstCPFields[0][U].ComponentName,p),this.fldDict["Vac_"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(0),p=new X.Nl("VacEncash_"+this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push("VacEncash_"+this.arrLstCPFields[0][U].ComponentName,p),this.fldDict["VacEncash_"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(0),p=new X.Nl("VacExcess_"+this.arrLstCPFields[0][U].ComponentName,""),this.fldDict.push("VacExcess_"+this.arrLstCPFields[0][U].ComponentName,p),this.fldDict["VacExcess_"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(0));for(let U=0;U<this.arrLstCPFields[1].length;U++)x.J0.IsEmpty(this.arrLstCPFields[1][U].SNo)||(p=new X.Nl(this.arrLstCPFields[1][U].ComponentName,""),this.fldDict.push(this.arrLstCPFields[1][U].ComponentName,p),this.fldDict[this.arrLstCPFields[1][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][U].dActual).ToString(C.d.SessionManager.sPayrollDecimals2)),p=new X.Nl("Calc"+this.arrLstCPFields[1][U].ComponentName,""),this.fldDict.push("Calc"+this.arrLstCPFields[1][U].ComponentName,p),this.fldDict["Calc"+this.arrLstCPFields[1][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Arr_"+this.arrLstCPFields[1][U].ComponentName,""),this.fldDict.push("Arr_"+this.arrLstCPFields[1][U].ComponentName,p),this.fldDict["Arr_"+this.arrLstCPFields[1][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][U].dArrear).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Adj_"+this.arrLstCPFields[1][U].ComponentName,""),this.fldDict.push("Adj_"+this.arrLstCPFields[1][U].ComponentName,p),this.fldDict["Adj_"+this.arrLstCPFields[1][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][U].dAdjusted).ToString(C.d.SessionManager.sPayrollDecimals)));for(let U=0;U<this.arrLstCPFields[2].length;U++)""!=this.arrLstCPFields[2][U].SNo.toString()&&(p=new X.Nl(this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push(this.arrLstCPFields[2][U].ComponentName,p),this.fldDict[this.arrLstCPFields[2][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][U].dActual).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Calc"+this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push("Calc"+this.arrLstCPFields[2][U].ComponentName,p),this.fldDict["Calc"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Arr_"+this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push("Arr_"+this.arrLstCPFields[2][U].ComponentName,p),this.fldDict["Arr_"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][U].dArrear).ToString(C.d.SessionManager.sPayrollDecimals)),p=new X.Nl("Adj_"+this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push("Adj_"+this.arrLstCPFields[2][U].ComponentName,p),this.fldDict["Adj_"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][U].dAdjusted).ToString(C.d.SessionManager.sPayrollDecimals)),"DailyAttendance"==this.arrLstCPFields[2][U].Behaviour&&(this.fldDict.ContainsKey(this.arrLstCPFields[2][U].Formula)||(p=new X.Nl(this.arrLstCPFields[2][U].Formula,""),this.fldDict.push(this.arrLstCPFields[2][U].Formula,p),this.fldDict[this.arrLstCPFields[2][U].Formula].setFieldValue(0))),p=new X.Nl("Vac_"+this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push("Vac_"+this.arrLstCPFields[2][U].ComponentName,p),this.fldDict["Vac_"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(0),p=new X.Nl("VacEncash_"+this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push("VacEncash_"+this.arrLstCPFields[2][U].ComponentName,p),this.fldDict["VacEncash_"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(0),p=new X.Nl("VacExcess_"+this.arrLstCPFields[2][U].ComponentName,""),this.fldDict.push("VacExcess_"+this.arrLstCPFields[2][U].ComponentName,p),this.fldDict["VacExcess_"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(0));for(let U=0;U<this.arrLstCPFields[4].length;U++)""!=this.arrLstCPFields[4][U].SNo.toString()&&(p=new X.Nl(this.arrLstCPFields[4][U].ComponentName,""),this.fldDict.push(this.arrLstCPFields[4][U].ComponentName,p),p=new X.Nl(this.arrLstCPFields[4][U].ComponentName+"BalAmt",""),this.fldDict.push(this.arrLstCPFields[4][U].ComponentName+"BalAmt",p)),1==this.arrLstCPFields[4][U].IsVisible&&null!=this.arrLstCPFields[4][U].LoanInstAmt&&""!=this.arrLstCPFields[4][U].LoanInstAmt.toString()&&parseFloat(this.arrLstCPFields[4][U].LoanInstAmt)>0?(this.fldDict[this.arrLstCPFields[4][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[4][U].LoanInstAmt).ToString(C.d.SessionManager.sPayrollDecimals)),this.fldDict[this.arrLstCPFields[4][U].ComponentName+"BalAmt"].setFieldValue(parseFloat(this.arrLstCPFields[4][U].LoanBalAmt).ToString(C.d.SessionManager.sPayrollDecimals))):(this.fldDict[this.arrLstCPFields[4][U].ComponentName].setFieldValue(0),this.fldDict[this.arrLstCPFields[4][U].ComponentName+"BalAmt"].setFieldValue(0)),p=new X.Nl("Vac_"+this.arrLstCPFields[4][U].ComponentName,""),this.fldDict.push("Vac_"+this.arrLstCPFields[4][U].ComponentName,p),this.fldDict["Vac_"+this.arrLstCPFields[4][U].ComponentName].setFieldValue(0),p=new X.Nl("VacEncash_"+this.arrLstCPFields[4][U].ComponentName,""),this.fldDict.push("VacEncash_"+this.arrLstCPFields[4][U].ComponentName,p),this.fldDict["VacEncash_"+this.arrLstCPFields[4][U].ComponentName].setFieldValue(0),p=new X.Nl("VacExcess_"+this.arrLstCPFields[4][U].ComponentName,""),this.fldDict.push("VacExcess_"+this.arrLstCPFields[4][U].ComponentName,p),this.fldDict["VacExcess_"+this.arrLstCPFields[4][U].ComponentName].setFieldValue(0);for(let U=0;U<this.arrLstCPFields[5].length;U++)""!=this.arrLstCPFields[5][U].SNo.toString()&&(p=new X.Nl(this.arrLstCPFields[5][U].ComponentName,""),this.fldDict.push(this.arrLstCPFields[5][U].ComponentName,p),this.fldDict[this.arrLstCPFields[5][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[5][U].LeaveTaken).ToString(C.d.SessionManager.sPayrollDecimals2)),p=new X.Nl(this.arrLstCPFields[5][U].ComponentName+"_Bal",""),this.fldDict.push(this.arrLstCPFields[5][U].ComponentName+"_Bal",p),this.fldDict[this.arrLstCPFields[5][U].ComponentName+"_Bal"].setFieldValue(parseFloat(this.arrLstCPFields[5][U].LeaveTotOPBal).ToString(C.d.SessionManager.sPayrollDecimals2)));for(let U=0;U<this.arrLstCPFields[6].length;U++)""!=this.arrLstCPFields[6][U].SNo.toString()&&(p=new X.Nl(this.arrLstCPFields[6][U].ComponentName,""),this.fldDict.push(this.arrLstCPFields[6][U].ComponentName,p),this.fldDict[this.arrLstCPFields[6][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[6][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)));let ee=this.fldDict;for(let U=0;U<this.arrLstCPFields[0].length;U++)""!=this.arrLstCPFields[0][U].SNo.toString()&&null!=this.arrLstCPFields[0][U].Formula&&""!=this.arrLstCPFields[0][U].Formula&&(this.arrLstCPFields[0][U].dEarned=parseFloat(C.d.eval.EvaluateExpression(this.arrLstCPFields[0][U].Formula,ee)).ToString(C.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict["Calc"+this.arrLstCPFields[0][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)),E&&"Formula"==this.arrLstCPFields[0][U].FieldType&&(this.arrLstCPFields[0][U].dActual=this.arrLstCPFields[0][U].dEarned.Replace(",",""),this.fldDict[this.arrLstCPFields[0][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][U].dActual).ToString(C.d.SessionManager.sPayrollDecimals))));for(let U=0;U<this.arrLstCPFields[1].length;U++)""!=this.arrLstCPFields[1][U].SNo.toString()&&null!=this.arrLstCPFields[1][U].Formula&&""!=this.arrLstCPFields[1][U].Formula&&(this.arrLstCPFields[1][U].dEarned=parseFloat(C.d.eval.EvaluateExpression(this.arrLstCPFields[1][U].Formula,ee)).ToString(C.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict["Calc"+this.arrLstCPFields[1][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)));for(let U=0;U<this.arrLstCPFields[2].length;U++)""!=this.arrLstCPFields[2][U].SNo.toString()&&null!=this.arrLstCPFields[2][U].Formula&&""!=this.arrLstCPFields[2][U].Formula&&("ESI"==this.arrLstCPFields[2][U].ComponentName?this.arrLstCPFields[2][U].dEarned=Math.ceil(parseFloat(C.d.eval.EvaluateExpression(this.arrLstCPFields[2][U].Formula,ee))).ToString(C.d.SessionManager.sPayrollDecimals).Replace(",",""):(b=parseFloat(C.d.eval.EvaluateExpression(this.arrLstCPFields[2][U].Formula,ee)).ToString(C.d.SessionManager.sPayrollDecimals),"PT"==this.arrLstCPFields[2][U].ComponentName?(this.othMPField.dPTApplicableAmt=parseFloat(b),this.arrLstCPFields[2][U].dEarned=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals)):this.arrLstCPFields[2][U].dEarned=parseFloat(b).ToString(C.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict["Calc"+this.arrLstCPFields[2][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals))),E&&"Formula"==this.arrLstCPFields[2][U].FieldType&&(this.arrLstCPFields[2][U].dActual="PT"==this.arrLstCPFields[2][U].ComponentName?C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals):this.arrLstCPFields[2][U].dEarned.Replace(",",""),this.fldDict[this.arrLstCPFields[2][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][U].dActual).ToString(C.d.SessionManager.sPayrollDecimals))));for(let U=0;U<this.arrLstCPFields[6].length;U++)""!=this.arrLstCPFields[6][U].SNo.toString()&&null!=this.arrLstCPFields[6][U].Formula&&""!=this.arrLstCPFields[6][U].Formula&&(this.arrLstCPFields[6][U].dEarned=parseFloat(C.d.eval.EvaluateExpression(this.arrLstCPFields[6][U].Formula,ee)).ToString(C.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict[this.arrLstCPFields[6][U].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[6][U].dEarned).ToString(C.d.SessionManager.sPayrollDecimals)));Logger.InfoLog("CommonMonthlyPayroll::Exiting ExecuteFormulas()")}catch(b){Logger.ErrorLog("CommonMonthlyPayroll::EXCEPTION ExecuteFormulas()"+b.stack)}}CalculateWeeklyOffsFromDef(){Logger.InfoLog("CommonMonthlyPayroll::Entering CalculateWeeklyOffsFromDef()");let E=0;try{if(null!=this.drcWOffDef&&this.drcWOffDef.length>0){let oe,p=1,T=this.othMPField.DateOfRelieve<this.PayrollMonthEnd?this.othMPField.DateOfRelieve:this.PayrollMonthEnd,I=this.othMPField.DateOfJoining>this.PayrollMonthStart?this.othMPField.DateOfJoining:this.PayrollMonthStart;for(;I<=T;){for(oe=I.AddDays(6);I<=oe&&I<=T;){if(x.J0.StringIsNullOrEmpty(this.drcWOffDef[0]["Week"+p.toString()+"_W1"].toString())||I.getDay().toString().toLowerCase()!=this.drcWOffDef[0]["Week"+p.toString()+"_W1"].toString().toLowerCase()){if(!x.J0.StringIsNullOrEmpty(this.drcWOffDef[0]["Week"+p.toString()+"_W2"].toString())&&I.getDay().toString().toLowerCase()==this.drcWOffDef[0]["Week"+p.toString()+"_W2"].toString().toLowerCase()){if(this.lstHolidays.Contains(I)){I=I.AddDays(1);continue}E++}}else{if(this.lstHolidays.Contains(I)){I=I.AddDays(1);continue}E++}I=I.AddDays(1)}p++}}Logger.InfoLog("CommonMonthlyPayroll::Exiting CalculateWeeklyOffsFromDef()")}catch(b){Logger.ErrorLog("CommonMonthlyPayroll::EXCEPTION CalculateWeeklyOffsFromDef()"+b.stack)}return E}GetLeavesTaken(E,b,p,j){Logger.InfoLog("CommonMonthlyPayroll::Entering GetLeavesTaken()"),j.dTaken=j.dAvail=0;let T=C.d.empService.GetLeavesTaken(this.sEmpSeqNo,E,b,p);null!=T&&T.Tables.length>0&&T.Tables[0].length>0&&(null!=T.Tables[0][0].LeavesTaken&&null!=T.Tables[0][0].LeavesTaken&&""!=T.Tables[0][0].LeavesTaken.toString()&&(j.dTaken=parseFloat(T.Tables[0][0].LeavesTaken)),null!=T.Tables[0][0].AvailableLeaves&&null!=T.Tables[0][0].AvailableLeaves&&""!=T.Tables[0][0].AvailableLeaves.toString()&&(j.dAvail=parseFloat(T.Tables[0][0].AvailableLeaves))),Logger.InfoLog("CommonMonthlyPayroll::Exiting GetLeavesTaken()")}GetUnpaidDays(){let E,b,p=0,j=0;if(this.othMPField.DateOfJoining.getDate(),this.PayrollMonth.DaysInMonth(),this.othMPField.DateOfJoining>this.PayrollMonthStart)if("Actual Days"!=C.d.SessionManager.Preferences.PayDays){let oe=parseInt(C.d.SessionManager.Preferences.PayDays);for(E=this.PayrollMonthStart,b=this.othMPField.DateOfJoining;E<b;)E.getDate()!=E.DaysInMonth()?(E.getDate()>oe||p++,E=E.AddDays(1)):(p+=oe-E.getDate()+1,E=E.AddDays(1));if(this.othMPField.DateOfRelieve<this.PayrollMonthEnd)for(E=this.othMPField.DateOfRelieve.AddDays(1),b=this.PayrollMonthEnd;E<=b&&!(C.d.SessionManager.Preferences.ContainsKey("ConsiderUnpaidDaysBasedOnPayDays")&&"TRUE"==C.d.SessionManager.Preferences.ConsiderUnpaidDaysBasedOnPayDays.toString().toUpperCase()&&(j=x.J0.GetDateDifference(E,this.PayrollMonthStart)+1,j>oe));)E.getDate()!=E.DaysInMonth()?(E.getDate()>oe||p++,E=E.AddDays(1)):(p+=oe-E.getDate()+1,E=E.AddDays(1))}else p+=x.J0.GetDateDifference(this.othMPField.DateOfJoining,this.PayrollMonthStart),this.othMPField.DateOfRelieve<this.PayrollMonthEnd&&(p+=x.J0.GetDateDifference(this.PayrollMonthEnd,this.othMPField.DateOfRelieve));else if(this.othMPField.DateOfRelieve<this.PayrollMonthEnd)if("Actual Days"!=C.d.SessionManager.Preferences.PayDays){let oe=parseInt(C.d.SessionManager.Preferences.PayDays);for(E=this.othMPField.DateOfRelieve.AddDays(1),b=this.PayrollMonthEnd;E<=b&&!(C.d.SessionManager.Preferences.ContainsKey("ConsiderUnpaidDaysBasedOnPayDays")&&"TRUE"==C.d.SessionManager.Preferences.ConsiderUnpaidDaysBasedOnPayDays.toString().toUpperCase()&&(j=x.J0.GetDateDifference(E,this.PayrollMonthStart)+1,j>oe));)E.getDate()!=E.DaysInMonth()?(E.getDate()>oe||p++,E=E.AddDays(1)):(p+=oe-E.getDate()+1,E=E.AddDays(1))}else p+=x.J0.GetDateDifference(this.PayrollMonthEnd,this.othMPField.DateOfRelieve);return p}GetVacationAmountDetails(E,b){Logger.InfoLog("CommonMonthlyPayroll::Entering GetVacationAmountDetails()"),this.arrLstVacAmountFields=new Array;let p,F,I=0,oe=0;if(null!=E&&null!=E&&E.Tables.length>0&&E.Tables[2].length>0){let N=E.Tables[2],te=E.Tables[3];if(p=E.Tables[4],null!=N&&N.length>0)for(let v=0;v<N.length;v++){if(this.oVacAmountField=new he,this.oVacAmountField.ID=parseInt(N[v].ID),this.oVacAmountField.SNo=parseInt(N[v].SNO),this.oVacAmountField.TypeId=parseInt(N[v].TYPEID),2==this.oVacAmountField.TypeId?(this.oVacAmountField.SName="Earning"+this.oVacAmountField.SNo,this.oVacAmountField.TypeName="Earnings"):3==this.oVacAmountField.TypeId?(this.oVacAmountField.SName="",this.oVacAmountField.TypeName="Deductions"):4==this.oVacAmountField.TypeId&&(this.oVacAmountField.SName="",this.oVacAmountField.TypeName="Loans"),this.oVacAmountField.EmpNode=parseInt(N[v].EMPNODE),this.oVacAmountField.ComponentID=parseInt(N[v].COMPONENTID),this.oVacAmountField.ComponentName=N[v].COMPONENTNAME.toString(),this.oVacAmountField.Percentage=parseFloat(N[v].PERCENTAGE).ToString(C.d.SessionManager.sPayrollDecimals),this.oVacAmountField.EnCash=parseInt(N[v].ENCASH),this.oVacAmountField.ExcessdaysSalary=parseInt(N[v].EXCESSDAYSSALARY),this.oVacAmountField.Formula=N[v].FORMULA.toString().replace("Field",N[v].COMPONENTNAME.toString()),this.oVacAmountField.ActualAmount="EMPLOYEE_BASIC"==this.oVacAmountField.ComponentName&&2==this.oVacAmountField.TypeId?parseFloat(te[0].BasicMonthly).ToString(C.d.SessionManager.sPayrollDecimals):"EMPLOYEE_BASIC"!=this.oVacAmountField.ComponentName.toString()&&2==this.oVacAmountField.TypeId?parseFloat(te[0]["Earning"+this.oVacAmountField.SNo]).ToString(C.d.SessionManager.sPayrollDecimals):C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.oVacAmountField.PercActualAmount=parseFloat(this.oVacAmountField.ActualAmount)>0&&parseFloat(this.oVacAmountField.Percentage)>0?(parseFloat(this.oVacAmountField.ActualAmount)*parseFloat(this.oVacAmountField.Percentage)/100).ToString(C.d.SessionManager.sPayrollDecimals):C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),I=oe=0,-1==parseFloat(this.oVacAmountField.Percentage)){let S=C.d.empService.GetQueryData(1,"AllowencesData",this.iDocID,this.oVacAmountField.ComponentID,this.oVacAmountField.EmpNode);S&&S.length>0&&(oe=parseFloat(S[0][Object.keys(S[0])[0]])),F=C.d.empService.GetQueryData(1,"AllowencesData1",this.oVacAmountField.SNo.toString(),this.oVacAmountField.EmpNode,""),F&&F.length>0&&(I=parseFloat(F[0][Object.keys(F[0])[0]])),this.oVacAmountField.ActualAmount=(I-oe).ToString(C.d.SessionManager.sPayrollDecimals)}else-3==parseFloat(this.oVacAmountField.Percentage)&&(F=C.d.empService.GetQueryData(1,"AllowencesData2",this.oVacAmountField.SNo.toString(),this.oVacAmountField.EmpNode,""),F&&F.length>0&&(I=parseFloat(F[0][Object.keys(F[0])[0]])),this.oVacAmountField.ActualAmount=I.ToString(C.d.SessionManager.sPayrollDecimals));4==this.oVacAmountField.TypeId&&b?(p.RowFilter="",null!=p&&p.length>0&&(p.RowFilter="LoanTypeID="+this.oVacAmountField.ComponentID,p.length>0&&(this.oVacAmountField.Amount=parseFloat(p[0].LoanAmount).ToString(C.d.SessionManager.sPayrollDecimals),this.oVacAmountField.ActualAmount=parseFloat(p[0].LoanAmount).ToString(C.d.SessionManager.sPayrollDecimals)))):this.oVacAmountField.Amount=C.d.SessionManager.Round(0,C.d.SessionManager.sPayrollDecimals),this.arrLstVacAmountFields.push(this.oVacAmountField)}}Logger.InfoLog("CommonMonthlyPayroll::Exiting GetVacationAmountDetails()")}}class le{constructor(){this.lstPrevAdj=Array()}AggregateLeaves(E,b,p,j,T,I,oe,F=0,N=!1,te=!1){let ae,se,ee,v=0,S=0,B=0,O=0,fe=C.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),_=" 1=1 ",K="";if(ee=b.Tables[2],null!=fe&&null!=fe&&fe.length>0)for(let Y=0;Y<fe.length;Y++)x.J0.IsEmpty(fe[Y])||(K="CCNID"+(parseInt(fe[Y])-5e4),ae=T.Tables[0].filter(Ee=>Ee.EmpSeqNo==E),null!=ae&&ae.length>0&&(K.Contains("CCNID51")?(_+=" AND ( "+K+"="+ae[0].EmpSeqNo+" OR "+K+"= 1)",ee=ee.filter(Ee=>Ee[K]==ae[0].EmpSeqNo||1==Ee[K])):(_+=" AND ( "+K+"="+ae[0][K]+" OR "+K+"= 1)",ee=ee.filter(Ee=>Ee[K]==ae[0][K]||1==Ee[K]))));" 1=1 "!=_&&(this.drcWOffAdjDef=ee);let ie,J,Ce,U=b.Tables[3];if(fe=C.d.SessionManager.Preferences.HolidaysBasedOn.split(","),_=" 1=1 ",K="",null!=fe&&null!=fe&&fe.length>0)for(let Y=0;Y<fe.length;Y++)x.J0.IsEmpty(fe[Y])||(K="CCNID"+(parseInt(fe[Y])-5e4),ae=T.Tables[0].filter(Ee=>Ee.EmpSeqNo==E),null!=ae&&ae.length>0&&(K.Contains("CCNID51")?(_+=" AND ( "+K+"="+ae[0].EmpSeqNo+" OR "+K+"= 1)",U=U.filter(Ee=>Ee[K]==ae[0].EmpSeqNo||1==Ee[K])):(_+=" AND ( "+K+"="+ae[0][K]+" OR "+K+"= 1)",U=U.filter(Ee=>Ee[K]==ae[0][K]||1==Ee[K]))));if(" 1=1 "!=_&&(se=U),null!=se&&se.length>0&&(this.dtHolidayAdjDef=se),Ce=b.Tables[0].filter(N?Y=>Y.EmpSeqNo==E&&Y.ComponentID==F:Y=>Y.EmpSeqNo==E&&Y.ComponentID!=F),!x.J0.IsEmpty(Ce)&&null!=Ce&&Ce.length>0)for(let Y=0;Y<Ce.length;Y++){ie=x.J0.ParseDate(Ce[Y].FromDate),J=x.J0.ParseDate(Ce[Y].ToDate),O=parseInt(Ce[Y].ComponentID);let Ee=C.d.SessionManager.Preferences.ConsiderLOPBasedOn.toString(),Te=null;Ee.length>0&&(Te=Ee.split(","));let Le=b.Tables[1].filter(tt=>tt.GradeID==oe&&4==tt.Type&&tt.ComponentID==O);if(null!=Le&&Le.length>0&&(B=x.J0.Double(Le[0].Percentage)),ie>=p)J<=j?(S=parseFloat(Ce[Y].NoOfDays),null==Te||null!=Te&&!Te.Contains(O.toString())?(B>0&&B<100||te)&&(S=te?S*B/100:S*(100-B)/100,v+=S):v+=S):ie<=j&&(S=this.GetNoOfDays(ie,j,O,b,I,oe),null==Te||null!=Te&&!Te.Contains(O.toString())?(B>0&&B<100||te)&&(S=te?S*B/100:S*(100-B)/100,v+=S):v+=S);else if(J<=j?J>=p&&(S=this.GetNoOfDays(p,J,O,b,I,oe),null==Te||null!=Te&&!Te.Contains(O.toString())?(B>0&&B<100||te)&&(S=te?S*B/100:S*(100-B)/100,v+=S):v+=S):(S=this.GetNoOfDays(p,j,O,b,I,oe),null==Te||null!=Te&&!Te.Contains(O.toString())?(B>0&&B<100||te)&&(S=te?S*B/100:S*(100-B)/100,v+=S):v+=S),ie<=p&&!te){let tt,Ue,ke,Be,ve,xe={PayrollMonth:tt,PayrollMonthStart:Ue,PayrollMonthEnd:ke};if(x.J0.SetPayrollDate_1(x.J0.ParseDate(ie),xe),tt=xe.PayrollMonth,Ue=xe.PayrollMonthStart,ke=xe.PayrollMonthEnd,ve=this.GetPrevAdj(ie,J,Ue,ke,Te,B,O,te,I,oe,b,Ce[Y]),Be=ke.AddMonths(1),J>ke)do{let A={PayrollMonth:tt,PayrollMonthStart:Ue,PayrollMonthEnd:ke};x.J0.SetPayrollDate_1(x.J0.ParseDate(Be),A),tt=A.PayrollMonth,Ue=A.PayrollMonthStart,ke=A.PayrollMonthEnd,ve=this.GetPrevAdj(ie,J,Ue,ke,Te,B,O,te,I,oe,b,Ce[Y]),Be=Be.AddMonths(1)}while(Be<=J)}}return v}GetPrevAdj(E,b,p,j,T,I,oe,F,N,te,v,S){let B=0,O=0;E>=p?b<=j?(O=parseFloat(S.NoOfDays),null==T||null!=T&&!T.Contains(oe.toString())?(I>0&&I<100||F)&&(O=F?O*I/100:O*(100-I)/100,B+=O):B+=O):E<=j&&(O=this.GetNoOfDays(E,j,oe,v,N,te),null==T||null!=T&&!T.Contains(oe.toString())?(I>0&&I<100||F)&&(O=F?O*I/100:O*(100-I)/100,B+=O):B+=O):b<=j?b>=p&&(O=this.GetNoOfDays(p,b,oe,v,N,te),null==T||null!=T&&!T.Contains(oe.toString())?(I>0&&I<100||F)&&(O=F?O*I/100:O*(100-I)/100,B+=O):B+=O):(O=this.GetNoOfDays(p,j,oe,v,N,te),null==T||null!=T&&!T.Contains(oe.toString())?(I>0&&I<100||F)&&(O=F?O*I/100:O*(100-I)/100,B+=O):B+=O);let ae=new R,se=!1;if(null!=this.lstPrevAdj&&this.lstPrevAdj.length>0)for(let fe=0;fe<this.lstPrevAdj.length;fe++)if(this.lstPrevAdj[fe].PrevMonth.ToString("dd MMM yyyy")==p.ToString("dd MMM yyyy")){se=!0,this.lstPrevAdj[fe].dDays=this.lstPrevAdj[fe].dDays-B;break}return se||(ae.dDays=-B,ae.PrevMonth=p,this.lstPrevAdj.push(ae)),B}GetNoOfDays(E,b,p,j,T,I){let oe=0,F=0,N=0,te=null,v=j.Tables[1].filter(S=>S.GradeID==I&&4==S.Type&&S.ComponentID==p);if(null!=v&&v.length>0){let S=E,B=v[0].IncludeRExclude.toString();if(oe=x.J0.GetDateDifference(b,E)+1,"IncludeBoth"==B||""==B)return oe;if("IncludeWeeklyOffs"==B)for(;S<=b;)x.J0.IsEmpty(this.dtHolidayAdjDef)||(te=this.dtHolidayAdjDef.filter(O=>O.HolidayDate==S.ToString("dd/MMM/yyyy"))),null!=te&&te.length>0&&N++,S=S.AddDays(1);else if("IncludeHolidays"==B)for(;S<=b;)null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0?this.CheckIsWeeklyOffFromDef(S,j,E,b,T)&&F++:("NONE"!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?S.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff1.toString()&&F++:S.getDay().toString()==C.d.SessionManager.Preferences.WeeklyOff1&&F++,"NONE"!=T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()&&S.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff2.toString()&&F++:S.getDay().toString()==C.d.SessionManager.Preferences.WeeklyOff2&&F++),S=S.AddDays(1);else if("ExcludeBoth"==B)for(;S<=b;){let O=!1;x.J0.IsEmpty(this.dtHolidayAdjDef)||(te=this.dtHolidayAdjDef.filter(ae=>ae.HolidayDate==S.ToString("dd/MMM/yyyy"))),null!=te&&te.length>0&&(N++,O=!0),null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0?this.CheckIsWeeklyOffFromDef(S,j,E,b,T)&&!O&&F++:("NONE"!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?S.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff1.toString()&&!O&&F++:S.getDay().toString()==C.d.SessionManager.Preferences.WeeklyOff1&&!O&&F++,"NONE"!=T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()&&S.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff2.toString()&&!O&&F++:S.getDay().toString()==C.d.SessionManager.Preferences.WeeklyOff2&&!O&&F++),S=S.AddDays(1)}else if("ExcludeWeeklyOffs"==B)for(;S<=b;)null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0?this.CheckIsWeeklyOffFromDef(S,j,E,b,T)&&F++:("NONE"!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?S.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff1.toString()&&F++:S.getDay().toString()==C.d.SessionManager.Preferences.WeeklyOff1&&F++,"NONE"!=T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()&&S.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff2.toString()&&F++:S.getDay().toString()==C.d.SessionManager.Preferences.WeeklyOff2&&F++),S=S.AddDays(1);else if("ExcludeHolidays"==B)for(;S<=b;)x.J0.IsEmpty(this.dtHolidayAdjDef)||(te=this.dtHolidayAdjDef.filter(O=>O.HolidayDate==S.ToString("dd/MMM/yyyy"))),null!=te&&te.length>0&&N++,S=S.AddDays(1)}return oe-(F+N)}CheckIsWeeklyOffFromDef(E,b,p,j,T){if(null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0){let te,I=1,F=T.DateOfRelieve<j?T.DateOfRelieve:j,N=T.DateOfJoining>p?T.DateOfJoining:p;for(;N<=F;){for(te=N.AddDays(6);N<=te&&N<=F;){if(b.Columns[2].Contains("Week"+I.toString()+"_W1")&&!x.J0.IsEmpty(this.drcWOffAdjDef[0]["Week"+I.toString()+"_W1"].toString())&&N.getDayName().toString().toLowerCase()==this.drcWOffAdjDef[0]["Week"+I.toString()+"_W1"].toString().toLowerCase()){if(N.ToString("dd MMM yyyy")==E.ToString("dd MMM yyyy"))return!0}else if(b.Columns[2].Contains("Week"+I.toString()+"_W2")&&!x.J0.IsEmpty(this.drcWOffAdjDef[0]["Week"+I.toString()+"_W2"].toString())&&N.getDayName().toString().toLowerCase()==this.drcWOffAdjDef[0]["Week"+I.toString()+"_W2"].toString().toLowerCase()&&N.ToString("dd MMM yyyy")==E.ToString("dd MMM yyyy"))return!0;N=N.AddDays(1)}I++}}return!1}}class R{constructor(){this.dDays=0}}class V{constructor(){this.sEmpIds="",this.lstGradeEmps=new Array,this.GradePayrollMonth=x.J0.GetEmptyDate(),this.GradePayrollMonthStart=x.J0.GetEmptyDate(),this.GradePayrollMonthEnd=x.J0.GetEmptyDate(),this.GradedtFF=x.J0.GetEmptyDate(),this.GradedtTT=x.J0.GetEmptyDate()}}},31979:(ze,Oe,n)=>{"use strict";n.d(Oe,{_:()=>x});var C=n(70088);function x(X,W,ne,z,Z){return new G(X,W,ne,z,Z)}class G extends C.vU{constructor(W,ne,z,Z,w,he){super(W),this.onFinalize=w,this.shouldUnsubscribe=he,this._next=ne?function(k){try{ne(k)}catch(me){W.error(me)}}:super._next,this._error=Z?function(k){try{Z(k)}catch(me){W.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=z?function(){try{z()}catch(k){W.error(k)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var W;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(W=this.onFinalize)||void 0===W||W.call(this))}}}},32040:(ze,Oe,n)=>{"use strict";n.d(Oe,{d:()=>X});var C=n(74523),x=n(96598);class G{constructor(){this._gridid=0,this._rowid=0}get gridid(){return++this._gridid}get rowid(){return++this._rowid}setRowid(ne){ne.forEach(Z=>{Z.id=this.rowid})}emptyObj(){return{id:this.rowid}}}class X{static{this.IsMobile=!1}static{this.IsAndroid=!1}static{this.IsNativeMobile=!1}static{this.IsCustMobileApp=!1}static{this.EnableSettings=!1}static{this.HidePactLogo=!1}static{this.IsMac=!1}static{this.slick=new G}static{this.DeviceOS=""}static{this.ListViewDialogEnabled=!1}constructor(){}static getDateText(ne){return X.datepipe.transform(ne,this.SessionManager.Preferences["Date Format"])}static getDateQry(ne){return X.datepipe.transform(ne,"dd/MMM/yyyy")}static GetResource(ne,z="#"){return X.translate.instant(ne)}static ShowLoader(){X.loader.startLoading()}static HideLoader(){X.loader.stopLoading()}static getDocDetails(ne){let z=null,Z=!1;X.SessionManager.MobilePreferences.ContainsKey("FmSupervisorDocumentConfiguration")&&(Z="string"==typeof X.SessionManager.MobilePreferences.FmSupervisorDocumentConfiguration?JSON.parse(X.SessionManager.MobilePreferences.FmSupervisorDocumentConfiguration.toString()).MultipleTechnicians:X.SessionManager.MobilePreferences.FmSupervisorDocumentConfiguration.MultipleTechnicians);var w=" inv.docid = "+ne+" ";return z=4==X.SessionManager.FmUserType||6==X.SessionManager.FmUserType?X.report.ReportDataSet("FAC004",!1,X.SessionManager.LoginDimension+"~10~"+Z,X.SessionManager.LoginDimID+"",w):X.report.ReportDataSet(1==X.SessionManager.FmUserType?"FAC012":"FAC013",!1,X.SessionManager.LoginDimID+"~10~"+Z,w),null!=z&&z.Tables.length>0&&z.Tables[0].length>0?z.Tables[0][0]:[]}static OnNotificationClick(){var ne=this;return(0,C.A)(function*(){var z=X.NotificationData.CostCenterID;if(40201==z||40203==z){let Z="Service Request Details";ne.SelectedItem=ne.getDocDetails(X.NotificationData.NodeID);let w=X.page.tabs.find(he=>he.title==Z);if(w)w.params.obj=ne,X.page.SetActiveTab(w);else{const{ServiceRequestDetailsComponent:he}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,2670));X.page.addNewTab({title:Z,component:he,params:{obj:ne,DocID:X.NotificationData.NodeID}})}}else{const{RibbonExtViewModel:Z}=yield Promise.resolve().then(n.bind(n,61301));Z.LoadDocument_VoucherNo(X.NotificationData.VoucherNo)}})()}static{this.\u0275fac=function(z){return new(z||X)}}static{this.\u0275prov=x.jDH({token:X,factory:X.\u0275fac,providedIn:"root"})}}},32828:function(ze,Oe,n){var C;ze.exports=(C=n(95275),function(){var G=C,X=G.lib,W=X.WordArray,ne=X.Hasher,z=G.algo,Z=W.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),w=W.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),he=W.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),k=W.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),me=W.create([0,1518500249,1859775393,2400959708,2840853838]),le=W.create([1352829926,1548603684,1836072691,2053994217,0]),R=z.RIPEMD160=ne.extend({_doReset:function(){this._hash=W.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,I){for(var oe=0;oe<16;oe++){var F=I+oe,N=T[F];T[F]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8)}var fe,_,K,ee,U,ie,J,Ce,Y,Ee,Te,te=this._hash.words,v=me.words,S=le.words,B=Z.words,O=w.words,ae=he.words,se=k.words;for(ie=fe=te[0],J=_=te[1],Ce=K=te[2],Y=ee=te[3],Ee=U=te[4],oe=0;oe<80;oe+=1)Te=fe+T[I+B[oe]]|0,Te+=oe<16?V(_,K,ee)+v[0]:oe<32?ge(_,K,ee)+v[1]:oe<48?E(_,K,ee)+v[2]:oe<64?b(_,K,ee)+v[3]:p(_,K,ee)+v[4],Te=(Te=j(Te|=0,ae[oe]))+U|0,fe=U,U=ee,ee=j(K,10),K=_,_=Te,Te=ie+T[I+O[oe]]|0,Te+=oe<16?p(J,Ce,Y)+S[0]:oe<32?b(J,Ce,Y)+S[1]:oe<48?E(J,Ce,Y)+S[2]:oe<64?ge(J,Ce,Y)+S[3]:V(J,Ce,Y)+S[4],Te=(Te=j(Te|=0,se[oe]))+Ee|0,ie=Ee,Ee=Y,Y=j(Ce,10),Ce=J,J=Te;Te=te[1]+K+Y|0,te[1]=te[2]+ee+Ee|0,te[2]=te[3]+U+ie|0,te[3]=te[4]+fe+J|0,te[4]=te[0]+_+Ce|0,te[0]=Te},_doFinalize:function(){var T=this._data,I=T.words,oe=8*this._nDataBytes,F=8*T.sigBytes;I[F>>>5]|=128<<24-F%32,I[14+(F+64>>>9<<4)]=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8),T.sigBytes=4*(I.length+1),this._process();for(var N=this._hash,te=N.words,v=0;v<5;v++){var S=te[v];te[v]=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8)}return N},clone:function(){var T=ne.clone.call(this);return T._hash=this._hash.clone(),T}});function V(T,I,oe){return T^I^oe}function ge(T,I,oe){return T&I|~T&oe}function E(T,I,oe){return(T|~I)^oe}function b(T,I,oe){return T&oe|I&~oe}function p(T,I,oe){return T^(I|~oe)}function j(T,I){return T<<I|T>>>32-I}G.RIPEMD160=ne._createHelper(R),G.HmacRIPEMD160=ne._createHmacHelper(R)}(Math),C.RIPEMD160)},34475:(ze,Oe,n)=>{"use strict";function C(De){let Ae=0,je=0,$e=0,nt=0;const gt=window.innerHeight||0,Qe=window.innerWidth||0,mt=E(),at=mt.top,Et=mt.left,St=Z(De);if(St){const dn=St.top,Ut=St.left;je=dn-at,$e=Ut-Et,Ae=gt-(dn-at+De.clientHeight),nt=Qe-(Ut-Et+De.clientWidth)}return{top:je,bottom:Ae,left:$e,right:nt}}function x(De,Ae,je){const $e=document.createElement(De);return Ae&&Object.keys(Ae).forEach(nt=>{"innerHTML"===nt&&console.warn(`[Slickgrid-Universal] For better CSP (Content Security Policy) support, do not use "innerHTML" directly in "createDomElement('${De}', { innerHTML: 'some html'})", it is better as separate assignment: "const elm = createDomElement('span'); elm.innerHTML = 'some html';"`);const gt=Ae[nt];"object"==typeof gt?Object.assign($e[nt],gt):$e[nt]=Ae[nt]}),je?.appendChild&&je.appendChild($e),$e}function G(De=""){return De.split(" ").filter(Ae=>Ae)}function X(De){"object"==typeof De&&Object.keys(De).forEach(Ae=>{Array.isArray(De[Ae])&&X(De[Ae]),De[Ae]instanceof HTMLElement&&(De[Ae]=null)})}function W(De){for(;De?.firstChild;)De.removeChild(De.firstChild);return De}function ne(De,Ae="innerHTML"){return De instanceof DocumentFragment?[].map.call(De.childNodes,je=>je[Ae]).join("")||De.textContent||"":De instanceof HTMLElement?De[Ae]:String(De??"")}function z(De,Ae){if(!De||!Ae)return;const je=De.getBoundingClientRect(),$e=Ae.getBoundingClientRect();return{top:$e.top-je.top,right:$e.right-je.right,bottom:$e.bottom-je.bottom,left:$e.left-je.left}}function Z(De){let Ae=0,je=0,$e=0,nt=0;if(!De||!De.getBoundingClientRect)return{top:Ae,bottom:$e,left:je,right:nt};const gt=De.getBoundingClientRect(),Qe=document.documentElement;return void 0!==gt?.top&&void 0!==gt.left&&(Ae=gt.top+window.pageYOffset-Qe.clientTop,je=gt.left+window.pageXOffset-Qe.clientLeft,nt=gt.right,$e=gt.bottom),{top:Ae,left:je,bottom:$e,right:nt}}function w(De,Ae){let je=0;if(De){const nt="height"===Ae?["top","bottom"]:["left","right"];je=De["height"===Ae?"clientHeight":"clientWidth"];for(const gt of nt)je-=parseFloat(he(De,`padding-${gt}`)||"")||0}return je}function he(De,Ae){return De?window.getComputedStyle(De).getPropertyValue(Ae):null}function k(De,Ae){if(De)for(const je of Ae){const $e=De.getAttribute(je);if($e)return $e}return null}function me(De,Ae="auto"){return(/^[0-9]+$/i.test(`${De}`)?+De+"px":De)||Ae}function le(De){const Ae="string"==typeof De?De:String(De),je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(Ae||"").toString().replace(/[&<>"']/g,$e=>je[$e])}function R(De){return De.replace(/&#(\d+);/g,(Ae,je)=>String.fromCharCode(je))}function V(De,Ae){const je=De.length;let $e=le(De);if(je<Ae)for(let nt=je;nt<Ae;nt++)$e+="&nbsp;";return $e}function ge(De,Ae){De.parentNode?.insertBefore(Ae,De.nextSibling)}function E(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}n.r(Oe),n.d(Oe,{addToArrayWhenNotExists:()=>v,addWhiteSpaces:()=>S,arrayRemoveItemByIndex:()=>B,calculateAvailableSpace:()=>C,classNameToList:()=>G,createDomElement:()=>x,deepCopy:()=>O,deepMerge:()=>ae,destroyAllElementProps:()=>X,emptyElement:()=>W,emptyObject:()=>se,extend:()=>te,findFirstAttribute:()=>k,findWidthOrDefault:()=>me,getFunctionDetails:()=>fe,getHtmlStringOutput:()=>ne,getInnerSize:()=>w,getOffset:()=>Z,getOffsetRelativeToParent:()=>z,getStyleProp:()=>he,htmlEncode:()=>le,htmlEncodeWithPadding:()=>V,htmlEntityDecode:()=>R,insertAfterElement:()=>ge,isDefined:()=>K,isDefinedNumber:()=>ee,isEmptyObject:()=>_,isNumber:()=>Ce,isObject:()=>U,isObjectEmpty:()=>Y,isPrimitiveOrHTML:()=>J,isPrimitiveValue:()=>ie,parseBoolean:()=>Ee,removeAccentFromText:()=>Te,setDeepValue:()=>Le,stripTags:()=>Ke,titleCase:()=>tt,toCamelCase:()=>Ue,toKebabCase:()=>ke,toSentenceCase:()=>Be,toSnakeCase:()=>xe,uniqueArray:()=>ve,uniqueObjectArray:()=>A,windowScrollPosition:()=>E});const b=Object.prototype.hasOwnProperty,p=Object.prototype.toString,j=Object.defineProperty,T=Object.getOwnPropertyDescriptor,I=function(Ae){return"function"==typeof Array.isArray?Array.isArray(Ae):"[object Array]"===p.call(Ae)},oe=function(Ae){if(!Ae||"[object Object]"!==p.call(Ae))return!1;const je=b.call(Ae,"constructor"),$e=Ae.constructor&&Ae.constructor.prototype&&b.call(Ae.constructor.prototype,"isPrototypeOf");if(Ae.constructor&&!je&&!$e)return!1;let nt;for(nt in Ae);return typeof nt>"u"||b.call(Ae,nt)},F=function(Ae,je){j&&"__proto__"===je.name?j(Ae,je.name,{enumerable:!0,configurable:!0,value:je.newValue,writable:!0}):Ae[je.name]=je.newValue},N=function(Ae,je){if("__proto__"===je){if(!b.call(Ae,je))return;if(T)return T(Ae,je).value}return Ae[je]};function te(...De){let Ae,je,$e,nt,gt,Qe,mt=De[0],at=1;const Et=De.length;let St=!1;for("boolean"==typeof mt&&(St=mt,mt=De[1]||{},at=2),(null==mt||"object"!=typeof mt&&"function"!=typeof mt)&&(mt={});at<Et;++at)if(Ae=De[at],null!=Ae)for(je in Ae)$e=N(mt,je),nt=N(Ae,je),mt!==nt&&(St&&nt&&(oe(nt)||(gt=I(nt)))?(gt?(gt=!1,Qe=$e&&I($e)?$e:[]):Qe=$e&&oe($e)?$e:{},F(mt,{name:je,newValue:te(St,Qe,nt)})):typeof nt<"u"&&F(mt,{name:je,newValue:nt}));return mt}function v(De,Ae,je="id"){let $e=-1;$e=De.findIndex(Ae&&"object"==typeof Ae&&je in Ae?nt=>nt[je]===Ae[je]:nt=>nt===Ae),$e<0&&De.push(Ae)}function S(De,Ae=" "){let je="";for(let $e=0;$e<De;$e++)je+=Ae;return je}function B(De,Ae){return De.filter((je,$e)=>Ae!==$e)}function O(De){return Array.isArray(De)||U(De)?te(!0,Array.isArray(De)?[]:{},De):De}function ae(De,...Ae){if(!Ae.length)return De;const je=Ae.shift();return De=!U(De)&&U(je)?{}:De,U(De)&&U(je)&&Object.keys(je).forEach($e=>{je.hasOwnProperty($e)&&(De[$e]=$e in De?"object"!=typeof De[$e]||"object"!=typeof je[$e]?je[$e]:De[$e].concat&&je[$e].concat?De[$e].concat(je[$e]):ae(De[$e],je[$e]):je[$e])}),ae(De,...Ae)}function se(De){return U(De)&&Object.keys(De).forEach(Ae=>{De.hasOwnProperty(Ae)&&delete De[Ae]}),De=null,De={}}function fe(De,Ae=!0){let je=!1;return{params:(gt=>{const at=gt.toString().replace(/(\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s*=[^,)]*(('(?:\\'|[^'\r\n])*')|("(?:\\"|[^"\r\n])*"))|(\s*=[^,)]*))/gm,"");return at.slice(at.indexOf("(")+1,at.indexOf(")")).match(/([^\s,]+)/g)??[]})(De),body:(gt=>{const Qe=gt.toString();if(je=Qe.includes("async "),Qe.replaceAll(" ","").includes("=>({")){const Et=Qe.match(/(({.*}))/g)||[];return Et.length>=1?`return ${Et[0].trimStart()}`:Qe}const mt=!Qe.includes("{")&&Qe.includes("=>"),at=Qe.substring(Qe.indexOf("{")+1||Qe.indexOf("=>")+2,Qe.includes("}")?Qe.lastIndexOf("}"):Qe.length);return Ae&&mt&&!at.startsWith("return")?"return "+at.trimStart():at})(De),isAsync:je}}function _(De){return null==De||0===Object.entries(De).length}function K(De){return null!=De&&""!==De}function ee(De){return null!==De&&!isNaN(De)&&""!==De}function U(De){return!(null===De||"object"!=typeof De||Array.isArray(De)||De instanceof Date)}function ie(De){return"boolean"==typeof De||"number"==typeof De||"string"==typeof De||null==De}function J(De){return De instanceof HTMLElement||De instanceof DocumentFragment||ie(De)}function Ce(De,Ae=!1){return Ae?null!=De&&"string"!=typeof De&&!isNaN(De):null!=De&&""!==De&&!isNaN(+De)}function Y(De){return!De||De&&"object"==typeof De&&0===Object.keys(De).length}function Ee(De){return/(true|1)/i.test(De+"")}function Te(De,Ae=!1){const je="function"==typeof De.normalize?De.normalize("NFD").replace(/[\u0300-\u036f]/g,""):De;return Ae?je.toLowerCase():je}function Le(De,Ae,je){if("string"==typeof Ae&&(Ae=Ae.split(".")),Ae.length>1){const $e=Ae.shift();De&&void 0!==$e&&Le(De[$e]=K(De[$e])&&(Array.isArray(De[$e])||"[object Object]"===Object.prototype.toString.call(De[$e]))?De[$e]:{},Ae,je)}else De&&Ae[0]&&(De[Ae[0]]=je)}function tt(De,Ae=!1){return"string"==typeof De?Ae?De.replace(/\w\S*/g,je=>je.charAt(0).toUpperCase()+je.substring(1).toLowerCase()):De.charAt(0).toUpperCase()+De.slice(1):De}function Ue(De){return"string"==typeof De?De.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_/])/g,(Ae,je)=>/[\s+\-_/]/.test(Ae)?"":0===je?Ae.toLowerCase():Ae.toUpperCase()):De}function ke(De){return"string"==typeof De?Ue(De).replace(/([A-Z])|([-_])/g,"-$1").toLowerCase():De}function Be(De){if("string"==typeof De){const Ae=De.replace(/([A-Z])|([-_])/g," $1").replace(/\s+/g," ").trim();return Ae.charAt(0).toUpperCase()+Ae.slice(1)}return De}function xe(De){return"string"==typeof De?Ue(De).replace(/([A-Z])/g,"_$1").toLowerCase():De}function ve(De){return Array.isArray(De)&&De.length>0?De.filter((Ae,je)=>De.indexOf(Ae)>=je):De}function A(De,Ae="id"){if(Array.isArray(De)&&De.length>0){const je=[],$e=new Map;for(const nt of De)nt&&!$e.has(nt[Ae])&&($e.set(nt[Ae],!0),je.push({id:nt[Ae],name:nt.name}));return je}return De}const Se=Symbol("plaintext"),Re=Symbol("html"),be=Symbol("comment"),He=/<(\w*)>/g,Ne=/<\/?([^\s/>]+)/;function Ke(De,Ae,je){function Qe(at){let Et=new Set;if("string"==typeof at){let St;for(;St=He.exec(at);)Et.add(St[1])}else"function"==typeof at[Symbol.iterator]&&(Et=new Set(at));return Et}function mt(at){const Et=Ne.exec(at);return Et?Et[1].toLowerCase():null}return function $e(at,Et,St){if("string"!=typeof at&&(Ce(at)||"boolean"==typeof at))return String(at);if(at instanceof HTMLElement&&(at=at.innerHTML),"string"!=typeof at&&null!=at)throw new TypeError("'html' parameter must be a string");return function gt(at,Et){const St=Et.allowable_tags,dn=Et.tag_replacement;let Ut=Et.state,Ht=Et.tag_buffer,xn=Et.depth,_t=Et.in_quote_char,$t="";for(let cn=0,Nn=at.length;cn<Nn;cn++){const xt=at[cn];if(Ut===Se)"<"===xt?(Ut=Re,Ht+=xt):$t+=xt;else if(Ut===Re)switch(xt){case"<":if(_t)break;xn++;break;case">":if(_t)break;if(xn){xn--;break}_t="",Ut=Se,Ht+=">",St.has(mt(Ht))?$t+=Ht:$t+=dn,Ht="";break;case'"':case"'":_t=xt===_t?"":_t||xt,Ht+=xt;break;case"-":"<!-"===Ht&&(Ut=be),Ht+=xt;break;case" ":case"\n":if("<"===Ht){Ut=Se,$t+="< ",Ht="";break}Ht+=xt;break;default:Ht+=xt}else Ut===be&&(">"===xt?("--"===Ht.slice(-2)&&(Ut=Se),Ht=""):Ht+=xt)}return Et.state=Ut,Et.tag_buffer=Ht,Et.depth=xn,Et.in_quote_char=_t,$t}(at||"",function nt(at,Et){return{allowable_tags:Qe(at),tag_replacement:Et,state:Se,tag_buffer:"",depth:0,in_quote_char:""}}(Et||"",St||""))}(De,Ae,je)}},35527:(ze,Oe,n)=>{"use strict";function C(x,G){if(x){const X=x.indexOf(G);0<=X&&x.splice(X,1)}}n.d(Oe,{o:()=>C})},36369:(ze,Oe,n)=>{"use strict";n.d(Oe,{Tg:()=>le});var C=n(54016),x=n(69822),G=n(37477),X=n(94366),W=n(77436),ne=n(60334),z=n(72972),Z=n(7778),w=n(92815),he=n(20452),k=n(22953),me=n(81113);function le(T){if(T instanceof X.c)return T;if(null!=T){if((0,W.l)(T))return function R(T){return new X.c(I=>{const oe=T[me.s]();if((0,he.T)(oe.subscribe))return oe.subscribe(I);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(T);if((0,x.X)(T))return function V(T){return new X.c(I=>{for(let oe=0;oe<T.length&&!I.closed;oe++)I.next(T[oe]);I.complete()})}(T);if((0,G.y)(T))return function ge(T){return new X.c(I=>{T.then(oe=>{I.closed||(I.next(oe),I.complete())},oe=>I.error(oe)).then(null,k.m)})}(T);if((0,ne.T)(T))return b(T);if((0,Z.x)(T))return function E(T){return new X.c(I=>{for(const oe of T)if(I.next(oe),I.closed)return;I.complete()})}(T);if((0,w.U)(T))return function p(T){return b((0,w.C)(T))}(T)}throw(0,z.L)(T)}function b(T){return new X.c(I=>{(function j(T,I){var oe,F,N,te;return(0,C.sH)(this,void 0,void 0,function*(){try{for(oe=(0,C.xN)(T);!(F=yield oe.next()).done;)if(I.next(F.value),I.closed)return}catch(v){N={error:v}}finally{try{F&&!F.done&&(te=oe.return)&&(yield te.call(oe))}finally{if(N)throw N.error}}I.complete()})})(T,I).catch(oe=>I.error(oe))})}},36649:(ze,Oe,n)=>{"use strict";n.d(Oe,{v:()=>G});var C=n(94366),x=n(36369);function G(X){return new C.c(W=>{(0,x.Tg)(X()).subscribe(W)})}},37464:(ze,Oe,n)=>{"use strict";n.d(Oe,{EA:()=>te,E_:()=>E,F3:()=>R,I9:()=>w,Ii:()=>le});var C=n(74523);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var Z=function(B){return B.Unimplemented="UNIMPLEMENTED",B.Unavailable="UNAVAILABLE",B}(Z||{});class w extends Error{constructor(O,ae,se){super(O),this.message=O,this.code=ae,this.data=se}}const k=B=>{var O,ae,se,fe,_;const K=B.CapacitorCustomPlatform||null,ee=B.Capacitor||{},U=ee.Plugins=ee.Plugins||{},ie=B.CapacitorPlatforms,Ce=(null===(O=ie?.currentPlatform)||void 0===O?void 0:O.getPlatform)||(()=>null!==K?K.name:(B=>{var O,ae;return B?.androidBridge?"android":null!==(ae=null===(O=B?.webkit)||void 0===O?void 0:O.messageHandlers)&&void 0!==ae&&ae.bridge?"ios":"web"})(B)),Ee=(null===(ae=ie?.currentPlatform)||void 0===ae?void 0:ae.isNativePlatform)||(()=>"web"!==Ce()),Le=(null===(se=ie?.currentPlatform)||void 0===se?void 0:se.isPluginAvailable)||(Se=>{const Re=xe.get(Se);return!(!Re?.platforms.has(Ce())&&!Ue(Se))}),Ue=(null===(fe=ie?.currentPlatform)||void 0===fe?void 0:fe.getPluginHeader)||(Se=>{var Re;return null===(Re=ee.PluginHeaders)||void 0===Re?void 0:Re.find(be=>be.name===Se)}),xe=new Map,A=(null===(_=ie?.currentPlatform)||void 0===_?void 0:_.registerPlugin)||((Se,Re={})=>{const be=xe.get(Se);if(be)return console.warn(`Capacitor plugin "${Se}" already registered. Cannot register plugins twice.`),be.proxy;const He=Ce(),Ne=Ue(Se);let Ke;const De=function(){var mt=(0,C.A)(function*(){return!Ke&&He in Re?Ke=Ke="function"==typeof Re[He]?yield Re[He]():Re[He]:null!==K&&!Ke&&"web"in Re&&(Ke=Ke="function"==typeof Re.web?yield Re.web():Re.web),Ke});return function(){return mt.apply(this,arguments)}}(),je=mt=>{let at;const Et=(...St)=>{const dn=De().then(Ut=>{const Ht=((mt,at)=>{var Et,St;if(!Ne){if(mt)return null===(St=mt[at])||void 0===St?void 0:St.bind(mt);throw new w(`"${Se}" plugin is not implemented on ${He}`,Z.Unimplemented)}{const dn=Ne?.methods.find(Ut=>at===Ut.name);if(dn)return"promise"===dn.rtype?Ut=>ee.nativePromise(Se,at.toString(),Ut):(Ut,Ht)=>ee.nativeCallback(Se,at.toString(),Ut,Ht);if(mt)return null===(Et=mt[at])||void 0===Et?void 0:Et.bind(mt)}})(Ut,mt);if(Ht){const xn=Ht(...St);return at=xn?.remove,xn}throw new w(`"${Se}.${mt}()" is not implemented on ${He}`,Z.Unimplemented)});return"addListener"===mt&&(dn.remove=(0,C.A)(function*(){return at()})),dn};return Et.toString=()=>`${mt.toString()}() { [capacitor code] }`,Object.defineProperty(Et,"name",{value:mt,writable:!1,configurable:!1}),Et},$e=je("addListener"),nt=je("removeListener"),gt=(mt,at)=>{const Et=$e({eventName:mt},at),St=function(){var Ut=(0,C.A)(function*(){const Ht=yield Et;nt({eventName:mt,callbackId:Ht},at)});return function(){return Ut.apply(this,arguments)}}(),dn=new Promise(Ut=>Et.then(()=>Ut({remove:St})));return dn.remove=(0,C.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield St()}),dn},Qe=new Proxy({},{get(mt,at){switch(at){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ne?gt:$e;case"removeListener":return nt;default:return je(at)}}});return U[Se]=Qe,xe.set(Se,{name:Se,proxy:Qe,platforms:new Set([...Object.keys(Re),...Ne?[He]:[]])}),Qe});return ee.convertFileSrc||(ee.convertFileSrc=Se=>Se),ee.getPlatform=Ce,ee.handleError=Se=>B.console.error(Se),ee.isNativePlatform=Ee,ee.isPluginAvailable=Le,ee.pluginMethodNoop=(Se,Re,be)=>Promise.reject(`${be} does not have an implementation of "${Re}".`),ee.registerPlugin=A,ee.Exception=w,ee.DEBUG=!!ee.DEBUG,ee.isLoggingEnabled=!!ee.isLoggingEnabled,ee.platform=ee.getPlatform(),ee.isNative=ee.isNativePlatform(),ee},le=(B=>B.Capacitor=k(B))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),R=le.registerPlugin;class E{constructor(O){this.listeners={},this.windowListeners={},O&&(console.warn(`Capacitor WebPlugin "${O.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=O)}addListener(O,ae){var se=this;this.listeners[O]||(this.listeners[O]=[]),this.listeners[O].push(ae);const _=this.windowListeners[O];_&&!_.registered&&this.addWindowListener(_);const K=function(){var U=(0,C.A)(function*(){return se.removeListener(O,ae)});return function(){return U.apply(this,arguments)}}(),ee=Promise.resolve({remove:K});return Object.defineProperty(ee,"remove",{value:(U=(0,C.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield K()}),function(){return U.apply(this,arguments)})}),ee;var U}removeAllListeners(){var O=this;return(0,C.A)(function*(){O.listeners={};for(const ae in O.windowListeners)O.removeWindowListener(O.windowListeners[ae]);O.windowListeners={}})()}notifyListeners(O,ae){const se=this.listeners[O];se&&se.forEach(fe=>fe(ae))}hasListeners(O){return!!this.listeners[O].length}registerWindowListener(O,ae){this.windowListeners[ae]={registered:!1,windowEventName:O,pluginEventName:ae,handler:se=>{this.notifyListeners(ae,se)}}}unimplemented(O="not implemented"){return new le.Exception(O,Z.Unimplemented)}unavailable(O="not available"){return new le.Exception(O,Z.Unavailable)}removeListener(O,ae){var se=this;return(0,C.A)(function*(){const fe=se.listeners[O];if(!fe)return;const _=fe.indexOf(ae);se.listeners[O].splice(_,1),se.listeners[O].length||se.removeWindowListener(se.windowListeners[O])})()}addWindowListener(O){window.addEventListener(O.windowEventName,O.handler),O.registered=!0}removeWindowListener(O){O&&(window.removeEventListener(O.windowEventName,O.handler),O.registered=!1)}}const p=B=>encodeURIComponent(B).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),j=B=>B.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class T extends E{getCookies(){return(0,C.A)(function*(){const O=document.cookie,ae={};return O.split(";").forEach(se=>{if(se.length<=0)return;let[fe,_]=se.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");fe=j(fe).trim(),_=j(_).trim(),ae[fe]=_}),ae})()}setCookie(O){return(0,C.A)(function*(){try{const ae=p(O.key),se=p(O.value),fe=`; expires=${(O.expires||"").replace("expires=","")}`,_=(O.path||"/").replace("path=",""),K=null!=O.url&&O.url.length>0?`domain=${O.url}`:"";document.cookie=`${ae}=${se||""}${fe}; path=${_}; ${K};`}catch(ae){return Promise.reject(ae)}})()}deleteCookie(O){return(0,C.A)(function*(){try{document.cookie=`${O.key}=; Max-Age=0`}catch(ae){return Promise.reject(ae)}})()}clearCookies(){return(0,C.A)(function*(){try{const O=document.cookie.split(";")||[];for(const ae of O)document.cookie=ae.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(O){return Promise.reject(O)}})()}clearAllCookies(){var O=this;return(0,C.A)(function*(){try{yield O.clearCookies()}catch(ae){return Promise.reject(ae)}})()}}R("CapacitorCookies",{web:()=>new T});const oe=function(){var B=(0,C.A)(function*(O){return new Promise((ae,se)=>{const fe=new FileReader;fe.onload=()=>{const _=fe.result;ae(_.indexOf(",")>=0?_.split(",")[1]:_)},fe.onerror=_=>se(_),fe.readAsDataURL(O)})});return function(ae){return B.apply(this,arguments)}}(),te=(B,O={})=>{const ae=Object.assign({method:B.method||"GET",headers:B.headers},O),fe=((B={})=>{const O=Object.keys(B);return Object.keys(B).map(fe=>fe.toLocaleLowerCase()).reduce((fe,_,K)=>(fe[_]=B[O[K]],fe),{})})(B.headers)["content-type"]||"";if("string"==typeof B.data)ae.body=B.data;else if(fe.includes("application/x-www-form-urlencoded")){const _=new URLSearchParams;for(const[K,ee]of Object.entries(B.data||{}))_.set(K,ee);ae.body=_.toString()}else if(fe.includes("multipart/form-data")||B.data instanceof FormData){const _=new FormData;if(B.data instanceof FormData)B.data.forEach((ee,U)=>{_.append(U,ee)});else for(const ee of Object.keys(B.data))_.append(ee,B.data[ee]);ae.body=_;const K=new Headers(ae.headers);K.delete("content-type"),ae.headers=K}else(fe.includes("application/json")||"object"==typeof B.data)&&(ae.body=JSON.stringify(B.data));return ae};class v extends E{request(O){return(0,C.A)(function*(){const ae=te(O,O.webFetchExtra),se=((B,O=!0)=>B?Object.entries(B).reduce((se,fe)=>{const[_,K]=fe;let ee,U;return Array.isArray(K)?(U="",K.forEach(ie=>{ee=O?encodeURIComponent(ie):ie,U+=`${_}=${ee}&`}),U.slice(0,-1)):(ee=O?encodeURIComponent(K):K,U=`${_}=${ee}`),`${se}&${U}`},"").substr(1):null)(O.params,O.shouldEncodeUrlParams),fe=se?`${O.url}?${se}`:O.url,_=yield fetch(fe,ae),K=_.headers.get("content-type")||"";let U,ie,{responseType:ee="text"}=_.ok?O:{};switch(K.includes("application/json")&&(ee="json"),ee){case"arraybuffer":case"blob":ie=yield _.blob(),U=yield oe(ie);break;case"json":U=yield _.json();break;default:U=yield _.text()}const J={};return _.headers.forEach((Ce,Y)=>{J[Y]=Ce}),{data:U,headers:J,status:_.status,url:_.url}})()}get(O){var ae=this;return(0,C.A)(function*(){return ae.request(Object.assign(Object.assign({},O),{method:"GET"}))})()}post(O){var ae=this;return(0,C.A)(function*(){return ae.request(Object.assign(Object.assign({},O),{method:"POST"}))})()}put(O){var ae=this;return(0,C.A)(function*(){return ae.request(Object.assign(Object.assign({},O),{method:"PUT"}))})()}patch(O){var ae=this;return(0,C.A)(function*(){return ae.request(Object.assign(Object.assign({},O),{method:"PATCH"}))})()}delete(O){var ae=this;return(0,C.A)(function*(){return ae.request(Object.assign(Object.assign({},O),{method:"DELETE"}))})()}}R("CapacitorHttp",{web:()=>new v})},37477:(ze,Oe,n)=>{"use strict";n.d(Oe,{y:()=>x});var C=n(20452);function x(G){return(0,C.T)(G?.then)}},38465:(ze,Oe,n)=>{"use strict";n.d(Oe,{i:()=>x,n:()=>G});var C=n(34475),x=function(X){return X.camelCase="camelCase",X.kebabCase="kebabCase",X.lowerCase="lowerCase",X.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix",X}(x||{});class G{get elementSource(){return this._elementSource}set elementSource(W){this._elementSource=W}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(W=>W.name)}constructor(W){this._subscribedEvents=[],this.eventNamingStyle=x.camelCase,this._elementSource=W||document.createElement("div")}dispose(){this.unsubscribeAll(),this._subscribedEvents=[],window.clearTimeout(this._timer),this._elementSource?.remove(),this._elementSource=null}dispatchCustomEvent(W,ne,z=!0,Z=!0,w){const he={bubbles:z,cancelable:Z};ne&&(he.detail=ne);const k=new CustomEvent(W,he);return"function"==typeof w&&w(k),this._elementSource?.dispatchEvent(k)}getEventNameByNamingConvention(W,ne){let z="";switch(this.eventNamingStyle){case x.camelCase:z=""!==ne?`${ne}${(0,C.titleCase)(W)}`:W;break;case x.kebabCase:z=""!==ne?`${ne}-${(0,C.toKebabCase)(W)}`:(0,C.toKebabCase)(W);break;case x.lowerCase:z=`${ne}${W}`.toLowerCase();break;case x.lowerCaseWithoutOnPrefix:z=`${ne}${W.replace(/^on/,"")}`.toLowerCase()}return z}publish(W,ne,z,Z){const w=this.getEventNameByNamingConvention(W,"");return z?new Promise(he=>{window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>he(this.dispatchCustomEvent(w,ne,!0,!0,Z)),z)}):this.dispatchCustomEvent(w,ne,!0,!0,Z)}subscribe(W,ne){const z=this.getEventNameByNamingConvention(W,"");return this._elementSource.addEventListener(z,Z=>ne.call(null,Z.detail)),this._subscribedEvents.push({name:z,listener:ne}),{unsubscribe:()=>this.unsubscribe(z,ne)}}subscribeEvent(W,ne){const z=this.getEventNameByNamingConvention(W,"");return this._elementSource.addEventListener(z,ne),this._subscribedEvents.push({name:z,listener:ne}),{unsubscribe:()=>this.unsubscribe(z,ne)}}unsubscribe(W,ne,z=!0){const Z=this.getEventNameByNamingConvention(W,"");this._elementSource.removeEventListener(Z,ne),z&&this.removeSubscribedEventWhenFound(W,ne)}unsubscribeAll(W){if(Array.isArray(W)){let ne;do{ne=W.pop(),ne?.dispose?ne.dispose():ne?.unsubscribe&&ne.unsubscribe()}while(ne)}else{let ne=this._subscribedEvents.pop();for(;ne;)this.unsubscribe(ne.name,ne.listener,!1),ne=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(W,ne){const z=this._subscribedEvents.findIndex(Z=>Z.name===W&&Z.listener===ne);z>=0&&this._subscribedEvents.splice(z,1)}}},40740:(ze,Oe,n)=>{"use strict";n.d(Oe,{Kn:()=>ne,yU:()=>W,Uv:()=>z});var C=n(20452);const G=(0,n(4234).L)(w=>function(k){w(this),this.message=k?`${k.length} errors occurred during unsubscription:\n${k.map((me,le)=>`${le+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=k});var X=n(35527);class W{constructor(he){this.initialTeardown=he,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let he;if(!this.closed){this.closed=!0;const{_parentage:k}=this;if(k)if(this._parentage=null,Array.isArray(k))for(const R of k)R.remove(this);else k.remove(this);const{initialTeardown:me}=this;if((0,C.T)(me))try{me()}catch(R){he=R instanceof G?R.errors:[R]}const{_finalizers:le}=this;if(le){this._finalizers=null;for(const R of le)try{Z(R)}catch(V){he=he??[],V instanceof G?he=[...he,...V.errors]:he.push(V)}}if(he)throw new G(he)}}add(he){var k;if(he&&he!==this)if(this.closed)Z(he);else{if(he instanceof W){if(he.closed||he._hasParent(this))return;he._addParent(this)}(this._finalizers=null!==(k=this._finalizers)&&void 0!==k?k:[]).push(he)}}_hasParent(he){const{_parentage:k}=this;return k===he||Array.isArray(k)&&k.includes(he)}_addParent(he){const{_parentage:k}=this;this._parentage=Array.isArray(k)?(k.push(he),k):k?[k,he]:he}_removeParent(he){const{_parentage:k}=this;k===he?this._parentage=null:Array.isArray(k)&&(0,X.o)(k,he)}remove(he){const{_finalizers:k}=this;k&&(0,X.o)(k,he),he instanceof W&&he._removeParent(this)}}W.EMPTY=(()=>{const w=new W;return w.closed=!0,w})();const ne=W.EMPTY;function z(w){return w instanceof W||w&&"closed"in w&&(0,C.T)(w.remove)&&(0,C.T)(w.add)&&(0,C.T)(w.unsubscribe)}function Z(w){(0,C.T)(w)?w():w.unsubscribe()}},40784:(ze,Oe,n)=>{"use strict";n.r(Oe),n.d(Oe,{POSExitViewModel:()=>I});var C=n(74523),x=n(76199),G=n(35789),X=n(89211),W=n(1077),ne=n(4884),z=n(29702),Z=n(23538),w=n(9659),he=n(99393),k=n(21376),me=n(39107),le=n(76962),R=n(66148),V=n(2468),ge=n(89938),E=n(16645),b=n(61301),p=n(74290),j=n(75842),T=n(14848);class I extends x.g{get Parent(){return this._parent}get DTPayModes(){return this.DTPayModesObj.Table}get DtReport(){return this.DtReportObj.Table}constructor(){super(),this.ButtonClick=new G.Yk,this.DayClose=new X.c(0),this.HoldVisibility=!1,this.DraftVisibility=!1,this.ExitVisible=!1,this.OptionsVisible=!1,this.GridVisible=!1,this.PrintVisibility=!1,this.Shift=new W.y$,this.PrintDate=new ne.P6(0),this.CancelVisible=!0,this.BackVisible=!1,this.ShowDenomHelp=!1,this.NumericPADView=null,this.TouchVisibility=!1,this.LoginVisi=!1,this.ReportVisibility=!1,this.DtExit=[],this.IsPayMode=!1,this.IsShiftClose=!1,this.IsDiff=!1,this.ManagerLoggedin=!1,this.oReport=null,this.Denom=null,this.DenomXML="",this.RegName="",this.CloseType=0,this.DtDiffPosting=new R.VB,this.ClassName="POSExitViewModel"}POSExitViewModel_1(F,N,te,v){this.DayClose.Visible=!1,this._parent=F,this.OptionsVisible=N,this.HoldVisibility=te,this.DraftVisibility=v,this.DayClose.Label="Day Close",!N&&!te&&!v&&(this.ExitVisible=!0),this.OptionsVisible?(this.Title="Options",this.Options_CashIN=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Options - Cash In"),this.Options_CashOut=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Options - Cash Out"),this.Options_CashRegister=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Options - Cash Register"),w.d.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=w.d.SessionManager.Preferences.PosShifts.toString()&&parseInt(w.d.SessionManager.Preferences.PosShifts.toString())>5e4&&(this.Options_ShiftClose=!0),this.Options_ShiftClose&&(this.Shift.CCID=parseInt(w.d.SessionManager.Preferences.PosShifts.toString()),this.Shift.TypeID=1),this.Options_DayClose=!0):this.Title=this.HoldVisibility?w.d.GetResource("Com_SaveAsHold"):v?w.d.GetResource("Remarks"):"Exit",this.ButtonClick.Subscribe(this,"OnButtonClick"),this.ExitVisible&&this.InitGrid()}InitGrid(){this.Exit_UserExit=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"User Exit"),this.Exit_UserClose=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"User Close"),this.Exit_ShiftClose=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Shift Close"),this.Exit_DayClose=w.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Day Close"),this.DTPayModesObj=new z.vv,this.DTPayModesObj.Columns=[],this.DTPayModesObj.Table=[],this.DTPayModesObj.TableColumns.push("Name"),this.DTPayModesObj.TableColumns.push("NameWithKey"),this.DTPayModesObj.TableColumns.push("Amount"),this.DTPayModesObj.DataTypes.Double.push("Amount"),this.DTPayModesObj.TableColumns.push("Type"),this.DTPayModesObj.TableColumns.push("SysColumnName"),this.DTPayModesObj.TableColumns.push("DenomXML"),this.DtReportObj=new z.vv,this.DtReportObj.Columns=[],this.DtReportObj.Table=[],this.DtReportObj.TableColumns.push("NameWithKey"),this.DtReportObj.TableColumns.push("Amount"),this.DtReportObj.TableColumns.push("AmountActual"),this.DtReportObj.DataTypes.Double.push("AmountActual"),this.DtReportObj.TableColumns.push("SysColumnName"),this.DtReportObj.TableColumns.push("Type"),this.DtReportObj.TableColumns.push("StyleIsBold"),this.DtReportObj.TableColumns.push("Row_Background"),this.Parent.ScreenObject.Preferences.ContainsKey("PosPostings")&&"true"==this.Parent.ScreenObject.Preferences.PosPostings.toLowerCase()&&this.DtReportObj.TableColumns.push("PostJV"),this.ExitGrid=new z.vv,this.ExitGrid.Columns=[],this.ExitGrid.Table=[],this.ExitGrid.Width="",this.ExitGrid.Height=250,this.ExitGrid.RowHeight=this.Parent.GridRowHeight,this.ExitGrid.BeginEdit.Subscribe(this,"OnExitGridBeginEdit");let F=[],N=new he.O7;N.Header="Name",N.DisplayMember="NameWithKey",N.DisableTab=!0,N.Width=220,N.ReadOnly=!0,N.DisableTab=!0,F.push(N),N=new he.O7,N.Header="Value",N.DisplayMember="Amount",N.DataType="FLOAT",N.DecimalPoints=w.d.SessionManager.Preferences.DecimalsinAmount,N.Width=180,F.push(N),this.ExitGrid.Columns=F}IsHoldDocsExits(){let F=w.d.document.GetDocumentDrafts(this.Parent.ScreenObject.RegisterNodeID,this.Parent.CostCenterID,2,!1,!0,this.Parent.ScreenObject.LocationID,this.Parent.ScreenObject.DivisionID);return!R.J0.IsEmpty(F)&&F.Tables.length>0&&F.Tables[0].length>0}OnButtonClick(F){var N=this;return(0,C.A)(function*(){if(null!=F){let te=0;!R.J0.IsEmpty(N.ExitGrid)&&N.ExitGrid.gridObj&&null!=N.ExitGrid.gridObj.getActiveCellNode()&&N.ExitGrid.gridObj.getEditorLock().commitCurrentEdit();const{LoginViewModel:v}=yield Promise.resolve().then(n.bind(n,44258)),{LoginScreenComponent:S}=yield Promise.resolve().then(n.bind(n,72069));switch(F.toString()){case"Login":let B=yield new v(N.router);B.IsPosMangr=!0,B.ShowRememberMe=!1,B.ShowDefaultCompany=!1;const{ReportViewModel:O}=yield Promise.resolve().then(n.bind(n,16645));w.d.page.ShowDialog(B,S).subscribe(()=>{if(B.IsLoggedIn){N.BackVisible=!0,N.LoginVisi=!1;let K=new O;K.ReportViewModel_1(18),K.ShowHeaderButtons=!1,K.SearchVisibility=!1,N.Report=K,N.ReportVisibility=!0}});break;case"Cancel":case"Back":w.d.page.HideDialog(N.PopUpGUID);break;case"DayClose":if(te=yield N.ValidatePosUser(),0==te){if(w.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSDayClose")&&!R.J0.IsEmpty(w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose.toString())&&"None"!=w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose&&N.IsHoldDocsExits()){if("Stop"==w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose)return void alert("There are some Hold documents exits, can not allow Day Close.");{let K=yield new j.MessageDialogViewModel;if(K.MessageDialogViewModel_6(N,"Confirmation","There are some Hold documents exits, do you want to proceed to Day Close.?","Yes","No"),yield w.d.page.openDialog(K,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:K.lblTitle}),"Yes"!=K.res)return}}if(w.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSDayClose")&&!R.J0.IsEmpty(w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose.toString())&&"None"!=w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose&&N.IsHoldDocsExits()){if("Stop"==w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose)return void alert("There are some Hold documents exits, can not allow Day Close.");{let K=yield new j.MessageDialogViewModel;if(K.MessageDialogViewModel_6(N,"Confirmation","There are some Hold documents exits, do you want to proceed to Day Close.?","Yes","No"),yield w.d.page.openDialog(K,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:K.lblTitle}),"Yes"!=K.res)return}}if(w.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(w.d.SessionManager.Preferences.PosShifts)>5e4&&N.Parent.ScreenObject.ShiftNodeID>0){let K;if(K=w.d.admin.POSLogin(N.Parent.ScreenObject.RegisterNodeID,N.Parent.ScreenObject.ShiftNodeID,N.Parent.DocumentDate,104,"","","").obj,K<0)return N.DisplayMessage="Close all shifts before DayClose",void(N.MessageVisibility=!0)}if(N.CloseType=1,w.d.SessionManager.Preferences.ContainsKey("DontShowPaymodeWhileDayClose")&&""!=w.d.SessionManager.Preferences.DontShowPaymodeWhileDayClose&&(0,le.yG0)(w.d.SessionManager.Preferences.DontShowPaymodeWhileDayClose)){let K,ee={RetVal:0};ge.a.POSLogin(N.Parent.ScreenObject.RegisterNodeID,N.Parent.ScreenObject.ShiftNodeID,N.Parent.DocumentDate,N.CloseType,"","","",ee),K=ee.RetVal,w.d.page.HideDialog(N.PopUpGUID),w.d.page.removeActiveTab()}else N.ExitVisible=!1,N.GridVisible=!0,N.IsShiftClose=!1,N.Paymodes(null)}break;case"ShiftClose":if(te=yield N.ValidatePosUser(),0==te){if(w.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSShiftClose")&&!R.J0.IsEmpty(w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose.toString())&&"None"!=w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose&&N.IsHoldDocsExits()){if("Stop"==w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose)return void alert("There are some Hold documents exits, can not allow Shift Close.");{let K=yield new j.MessageDialogViewModel;if(K.MessageDialogViewModel_6(N,"Confirmation","There are some Hold documents exits, do you want to proceed to Shift Close.?","Yes","No"),yield w.d.page.openDialog(K,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:K.lblTitle}),"Yes"!=K.res)return}}if(w.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSShiftClose")&&!R.J0.IsEmpty(w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose.toString())&&"None"!=w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose&&N.IsHoldDocsExits()){if("Stop"==w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose)return void alert("There are some Hold documents exits, can not allow Shift Close.");{let K=yield new j.MessageDialogViewModel;if(K.MessageDialogViewModel_6(N,"Confirmation","There are some Hold documents exits, do you want to proceed to Shift Close.?","Yes","No"),yield w.d.page.openDialog(K,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:K.lblTitle}),"Yes"!=K.res)return}}if(N.CloseType=2,w.d.SessionManager.Preferences.ContainsKey("DontShowPaymodeWhileShiftClose")&&""!=w.d.SessionManager.Preferences.DontShowPaymodeWhileShiftClose&&(0,le.yG0)(w.d.SessionManager.Preferences.DontShowPaymodeWhileShiftClose)){let K,ee={RetVal:0};ge.a.POSLogin(N.Parent.ScreenObject.RegisterNodeID,N.Parent.ScreenObject.ShiftNodeID,N.Parent.DocumentDate,N.CloseType,"","","",ee),K=ee.RetVal,w.d.page.HideDialog(N.PopUpGUID),w.d.page.removeActiveTab()}else N.ExitVisible=!1,N.GridVisible=!0,N.IsShiftClose=!0,N.Paymodes(null)}break;case"UserClose":if(te=yield N.ValidatePosUser(),0==te){if(w.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSUserClose")&&!R.J0.IsEmpty(w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose.toString())&&"None"!=w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose&&N.IsHoldDocsExits()){if("Stop"==w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose)return void alert("There are some Hold documents exits, can not allow User Close.");{let K=yield new j.MessageDialogViewModel;if(K.MessageDialogViewModel_6(N,"Confirmation","There are some Hold documents exits, do you want to proceed to User Close.?","Yes","No"),yield w.d.page.openDialog(K,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:K.lblTitle}),"Yes"!=K.res)return}}if(w.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSUserClose")&&!R.J0.IsEmpty(w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose.toString())&&"None"!=w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose&&N.IsHoldDocsExits()){if("Stop"==w.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose)return void alert("There are some Hold documents exits, can not allow User Close.");{let K=yield new j.MessageDialogViewModel;if(K.MessageDialogViewModel_6(N,"Confirmation","There are some Hold documents exits, do you want to proceed to User Close.?","Yes","No"),yield w.d.page.openDialog(K,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:K.lblTitle}),"Yes"!=K.res)return}}if(N.CloseType=3,w.d.SessionManager.Preferences.ContainsKey("DontShowPaymodeWhileUserClose")&&""!=w.d.SessionManager.Preferences.DontShowPaymodeWhileUserClose&&(0,le.yG0)(w.d.SessionManager.Preferences.DontShowPaymodeWhileUserClose)){let K;K=w.d.admin.POSLogin(N.Parent.ScreenObject.RegisterNodeID,N.Parent.ScreenObject.ShiftNodeID,N.Parent.DocumentDate,N.CloseType,"","","").obj,w.d.page.HideDialog(N.PopUpGUID),w.d.page.removeActiveTab()}else N.ExitVisible=!1,N.GridVisible=!0,N.IsShiftClose=!1,N.Paymodes(null)}break;case"UserExit":if(te=yield N.ValidatePosUser(),0==te&&confirm("Do you really want to exit?")){let ee=new k.v;N.CloseType=0,N.CloseSession(),ee.OnChange.Subscribe(b.RibbonExtViewModel,"OnTabItemClick")}break;case"LockScreen":if(confirm("Do you really want to lock?")){let K=yield new v(N.router);K.IsUserLock=!0,K.CancelVisiblity=!1,K.ShowRememberMe=!1,K.ShowDefaultCompany=!1,K.Title="Un Lock",w.d.page.HideDialog(N.PopUpGUID),w.d.page.ShowDialog(K,S)}break;case"CashOut":if(w.d.SessionManager.Preferences.ContainsKey("CashOut")&&""!=w.d.SessionManager.Preferences.CashOut&&"0"!=w.d.SessionManager.Preferences.CashOut){w.d.page.HideDialog(N.PopUpGUID);const{PostVoucherSaveViewModel:K}=yield Promise.resolve().then(n.bind(n,92371)),{PostVoucherSaveComponent:ee}=yield Promise.resolve().then(n.bind(n,9020));let U=new K(N.Parent,parseInt(w.d.SessionManager.Preferences.CashOut),0,0,1,1,!1,!1);w.d.page.ShowDialog(U,ee,{ShowCenter:!0,NoWidth:!1})}break;case"CashIN":if(w.d.SessionManager.Preferences.ContainsKey("CashIn")&&""!=w.d.SessionManager.Preferences.CashIn&&"0"!=w.d.SessionManager.Preferences.CashIn){w.d.page.HideDialog(N.PopUpGUID);const{PostVoucherSaveViewModel:K}=yield Promise.resolve().then(n.bind(n,92371)),{PostVoucherSaveComponent:ee}=yield Promise.resolve().then(n.bind(n,9020));let U=new K(N.Parent,parseInt(w.d.SessionManager.Preferences.CashIn),0,0,1,1,!1,!1);w.d.page.ShowDialog(U,ee,{ShowCenter:!0,NoWidth:!1})}break;case"CashRegister":w.d.page.HideDialog(N.PopUpGUID);const{POSCashRegisterViewModel:se}=yield n.e(1963).then(n.bind(n,51963)),{POSCashRegisterComponent:fe}=yield n.e(6717).then(n.bind(n,6717));let _=new se(N.Parent);w.d.page.ShowDialog(_,fe,{ShowCenter:!0,NoWidth:!1});break;case"HoldDoc":if(0!=N.Parent.DocID)return N.DisplayMessage=w.d.GetResource("Documentalreadysaved"),void(N.MessageVisibility=!0);if(null==N.Parent.HoldDocName||""==N.Parent.HoldDocName.Text.trim())return N.DisplayMessage="Enter Name",void(N.MessageVisibility=!0);N.Parent.SaveDraft(!1,!1),w.d.page.HideDialog(N.PopUpGUID);break;case"OK":if(N.IsPayMode)2==N.CloseType&&(N.DayClose.IsChecked=!1,N.DayClose.Visible=!0),N.TouchVisibility=!1,N.FillGrid(!1),N.BackVisible=w.d.SessionManager.IsActionAssigned(N.Parent.CostCenterID,"CanEditPayMode"),N.IsDiff&&(N.LoginVisi=!0);else{if("1"!=w.d.SessionManager.UserID&&N.IsDiff&&w.d.SessionManager.IsActionAssigned(N.Parent.CostCenterID,"DonotcloseifDiffinPayMode"))return N.DisplayMessage="Difference in PayModes",void(N.MessageVisibility=!0);4==N.CloseType?(N.CallPrint(N.Parent.ScreenObject.ShiftNodeID),w.d.page.HideDialog(N.PopUpGUID)):N.CloseSession()}break;case"Previous":N.BackVisible=!1,N.CancelVisible=!0,N.ShowDenomHelp=!0,N.LoginVisi=!1,N.ReportVisibility=!1,N.IsPayMode=!0,N.IsDiff=!1,N.ExitGrid.Columns[1].ReadOnly=!1,N.ExitGrid.Height=250,N.ExitGrid.RefreshColumns(),N.ExitGrid.Table=N.DtExit,N.DtReport.Clear(),N.TouchVisibility=N.Parent.FooterTouchVisible,N.DayClose.Visible&&(N.DayClose.Visible=!1);break;case"PrintDayClose":N.PrintVisibility=!0,N.OptionsVisible=!1,N.Shift.Visible=!1,N.PrintDate.Label=w.d.GetResource("Doc_Date");break;case"PrintShiftClose":N.PrintVisibility=!0,N.OptionsVisible=!1,N.Shift.Visible=!0,N.Shift.Label="Shift",N.PrintDate.Label=w.d.GetResource("Doc_Date");break;case"PrintOK":if(!N.PrintDate.Date)return N.DisplayMessage="select Date",void(N.MessageVisibility=!0);if(N.Shift.Visible&&0==N.Shift.SelectedValue)return N.DisplayMessage="select shift",void(N.MessageVisibility=!0);N.CloseType=N.Shift.Visible?5:4,N.InitGrid(),N.GridVisible=!0,N.PrintVisibility=!1,N.FillGrid(!0)}}})()}ValidatePosUser(){return(0,C.A)(function*(){let F=0,N=!1,te=w.d.page.tabs.find(v=>v.params?.obj instanceof p.POSDocumentViewModel);if(null!=te){let S,v=te.params?.obj;if(S=v.ScreenObject.GridData.filter(B=>B.ProductID_Key>0),S.length>0)return N=yield v.CheckingPosRows(),N||(F=1),F}return w.d.page.tabs.forEach(v=>{if(null!=v.params.obj&&"POSDocumentViewModel"==v.params.obj.ClassName)for(let S=0;S<v.params.obj.ScreenObject.GridData.length;S++)v.params.obj.ScreenObject.GridDataColumns.Contains("ProductID_Key")&&!R.J0.IsEmpty(v.params.obj.ScreenObject.GridData[S].ProductID_Key)&&(v.params.obj.CheckingPosRows(),F++)}),F})()}OnExitGridBeginEdit(F,N,te){return!(!this.IsPayMode||"Amount"!=N||"5"!=F.Type.toString()||0==F.DenomXML.toString().length)||(this.IsPayMode&&"Amount"==N&&null!=this.NumericPADView&&""!=F[N].toString()&&(this.NumericPADView.txt.Text=F[N].toString()),!1)}Paymodes(F){let N=null;null==F?(this.ShowDenomHelp=!0,this.IsPayMode=!0):F.Tables.length>10&&F.Columns[10].Contains("DetailsXML")&&F.Tables[10].length>0&&""!=F.Tables[10][0].DetailsXML.toString()&&N.ReadXml(F.Tables[10][0].DetailsXML.toString()),this.DTPayModesObj.Clear();let te=this.Parent.ScreenObject.Data.Tables[0].filter(S=>S.SectionID>4&&11!=S.SectionID,"SectionID");if(te.length>0){let S=2;for(let B=0;B<te.length;B++){const O=te[B];if(O.SysColumnName.toString().toLowerCase().Contains("currid")||O.SysColumnName.toString().toLowerCase().Contains("exchrt"))continue;let ae={};if(ae.Name=O.ResourceData.toString(),ae.NameWithKey=S<=10?O.ResourceData.toString()+" (F"+S+")":O.ResourceData.toString(),ae.SysColumnName=O.SysColumnName.toString(),ae.Type=O.SectionID.toString(),!R.J0.IsEmpty(N)&&N.Tables.length>0&&N.Columns[0].Contains("SysColName")){var v=N.Tables[0].filter(se=>se.SysColName==O.SysColumnName.toString());v.length>0&&!R.J0.IsEmpty(v[0].Amount)&&(ae.Amount=v[0].Amount.toString())}this.DTPayModes.push(ae),S++}}null==F&&(this.ExitGrid.Table=this.DTPayModes),this.ExitGrid.ColumnNo=1,this.ExitGrid.LineNo=0,this.ExitGrid.SetFocusongrid=!0,this.TouchVisibility=this.Parent.FooterTouchVisible}FillGrid(F){!F&&this.Parent.ScreenObject.Preferences.ContainsKey("POSDiffJVFields")&&""!=this.Parent.ScreenObject.Preferences.POSDiffJVFields&&this.DtDiffPosting.ReadXml(this.Parent.ScreenObject.Preferences.POSDiffJVFields);let te=window.innerHeight-320;te<400&&(te=400),this.ExitGrid.Columns[1].ReadOnly=!0,this.ExitGrid.Height=te,this.ExitGrid.RefreshColumns(),this.CancelVisible=!!(F||this.Parent.ScreenObject.Preferences.ContainsKey("Cancelinclose")&&"true"==this.Parent.ScreenObject.Preferences.Cancelinclose.toLowerCase()),this.ShowDenomHelp=!1,this.IsPayMode=!1;let v,S=0;if(F)v=this.PrintDate.Date,this.Shift.Visible&&(S=this.Shift.SelectedValue);else{this.IsShiftClose&&(S=this.Parent.ScreenObject.ShiftNodeID);let O=this.Parent.ScreenObject.HeaderFields.find(ae=>ae instanceof ne.Lc&&"docdate"==ae.DBColumnName.toLowerCase());v=null!=O&&""!=O.DefaultValue?R.J0.ParseDate(O.DefaultValue):this.Parent.DocumentDate}let B=ge.a.GetPOSDetails(this.Parent.PosSessionID,v,this.CloseType,this.Parent.ScreenObject.RegisterNodeID,S,"");if(B.Tables.length>1&&B.Columns[1].Contains("Prefix")&&F){if(B.Tables.length>10&&B.Columns[10].Contains("Isclose")&&B.Tables[10].length>0&&"Not close"==B.Tables[10][0].Isclose.toString())return this.DisplayMessage=4==this.CloseType?"Day not closed":"Shift not closed",this.MessageVisibility=!0,this.GridVisible=!1,void(this.PrintVisibility=!0);this.Paymodes(B)}this.DtExit=JSON.parse(JSON.stringify(this.ExitGrid.Table)),this.CloseData(B)}CloseData(F){var N=this;return(0,C.A)(function*(){if(null==N.oReport){const{ReportViewModel:v}=yield Promise.resolve().then(n.bind(n,16645));N.oReport=new v,N.oReport.ReportViewModel_1(190)}else N.oReport.Data.Clear();if(F.Tables.length>1&&F.Columns[1].Contains("Prefix")){F.Columns[F.Tables.length-1].Contains("Name")&&F.Tables[F.Tables.length-1].length>0&&(N.RegName=F.Tables[F.Tables.length-1][0].Name.toString());let v=N.Parent.ScreenObject.Preferences.POSFields.toString().split(","),S=null;N.Parent.ScreenObject.Preferences.ContainsKey("POSJVFields")&&(S=N.Parent.ScreenObject.Preferences.POSJVFields.toString().split(","));let B,O=0,ae=null,se=null;F.Tables[1].length>0&&""!=F.Tables[1][0].orders.toString()&&(ae=F.Tables[1][0].orders.toString().split(",")),F.Tables[1].length>0&&""!=F.Tables[1][0].GiftVSale.toString()&&(se=F.Tables[1][0].GiftVSale.toString().split(",")),B=N.AddRow("Sales(vouchers)","",!1,!0);let fe=F.Tables[1].filter(_=>38==_.documenttype);for(let _=0;_<fe.length;_++)null!=ae&&ae.Contains(fe[_].costcenterid.toString())||null!=se&&se.Contains(fe[_].costcenterid.toString())||(N.AddRow(fe[_].DocumentName.toString()+"-Starting No",fe[_].Prefix.toString()+fe[_].MinNumber.toString(),!1,!1),N.AddRow(fe[_].DocumentName.toString()+"-Ending No",fe[_].Prefix.toString()+fe[_].MAXNumber.toString(),!1,!1),""!=fe[_].cnt.toString()&&(O+=parseInt(fe[_].cnt.toString())));B.Amount=O;for(let _=0;_<v.length;_++){let K=N.Parent.ScreenObject.ColumnSource.find(ee=>ee.DisplayMember.toLowerCase()==v[_].toLowerCase());null!=K&&(B=N.AddRow(K.Header,F.Tables[0].length>0?F.Tables[0][0][_].toString():"FLOAT"==K.DataType?"0":"","FLOAT"==K.DataType,!1),N.DtReportObj.TableColumns.Contains("PostJV")&&null!=S&&S.Contains(v[_])&&(B.SysColumnName=v[_],B.PostJV=1))}if(null!=ae&&ae.length>0){N.AddRow("","",!1,!0),O=0,B=N.AddRow("Orders(vouchers)","",!1,!0);for(let _=0;_<fe.length;_++)ae.Contains(fe[_].costcenterid.toString())&&(N.AddRow(fe[_].DocumentName.toString()+"-Starting No",fe[_].Prefix.toString()+fe[_].MinNumber.toString(),!1,!1),N.AddRow(fe[_].DocumentName.toString()+"-Ending No",fe[_].Prefix.toString()+fe[_].MAXNumber.toString(),!1,!1),""!=fe[_].cnt.toString()&&(O+=parseInt(fe[_].cnt.toString())));if(B.Amount=O,F.Tables.length>8&&F.Tables[8].length>0)for(let _=0;_<v.length;_++){let K=N.Parent.ScreenObject.ColumnSource.find(ee=>ee.DisplayMember.toLowerCase()==v[_].toLowerCase());null!=K&&(B=N.AddRow(K.Header,F.Tables[8][0][_].toString(),"FLOAT"==K.DataType,!1))}}if(null!=se&&se.length>0){N.AddRow("","",!1,!0),O=0,B=N.AddRow("Gift (vouchers)","",!1,!0);for(let _=0;_<fe.length;_++)se.Contains(fe[_].costcenterid.toString())&&(N.AddRow(fe[_].DocumentName.toString()+"-Starting No",fe[_].Prefix.toString()+fe[_].MinNumber.toString(),!1,!1),N.AddRow(fe[_].DocumentName.toString()+"-Ending No",fe[_].Prefix.toString()+fe[_].MAXNumber.toString(),!1,!1),""!=fe[_].cnt.toString()&&(O+=parseInt(fe[_].cnt.toString())));if(B.Amount=O,F.Tables.length>9&&F.Tables[9].length>0)for(let _=0;_<v.length;_++){let K=N.Parent.ScreenObject.ColumnSource.filter(ee=>ee.DisplayMember.toLowerCase()==v[_].toLowerCase());null!=K&&(B=N.AddRow(K.Header,F.Tables[9][0][_].toString(),"FLOAT"==K.DataType,!1))}}N.AddRow("","",!1,!1),O=0,B=N.AddRow("Return(vouchers)","",!1,!0),fe=F.Tables[1].filter(_=>39==_.documenttype);for(let _=0;_<fe.length;_++)N.AddRow(fe[_].DocumentName.toString()+"-Starting No",fe[_].Prefix.toString()+fe[_].MinNumber.toString(),!1,!1),N.AddRow(fe[_].DocumentName.toString()+"-Ending No",fe[_].Prefix.toString()+fe[_].MAXNumber.toString(),!1,!1),""!=fe[_].cnt.toString()&&(O+=parseInt(fe[_].cnt.toString()));if(B.Amount=O,F.Tables.length>4&&F.Tables[4].length>0)for(let _=0;_<v.length;_++){let K=N.Parent.ScreenObject.ColumnSource.find(ee=>ee.DisplayMember.toLowerCase()==v[_].toLowerCase());null!=K&&(B=N.AddRow(K.Header,F.Tables[4][0][_].toString(),"FLOAT"==K.DataType,!1))}if(N.AddRow("","",!1,!1),N.Parent.ScreenObject.Preferences.ContainsKey("POSFields")&&""!=N.Parent.ScreenObject.Preferences.POSFields)for(let _=0;_<v.length;_++)if(null==N.Parent.ScreenObject.ColumnSource.find(ee=>ee.DisplayMember.toLowerCase()==v[_].toLowerCase())){let ee=N.DTPayModes.filter(U=>U.SysColumnName.toLowerCase()==v[_].toLowerCase());if(ee.length>0){N.AddRow(ee[0].Name.toString(),"",!1,!0),ee[0].Name="  "+ee[0].Name;let ie,U=0;if("5"==ee[0].Type.toString()){if(F.Tables.length>2&&F.Tables[2].length>0&&F.Columns[2].Contains("Amount"))for(let J=0;J<F.Tables[2].length;J++)B="300"==F.Tables[2][J].RefCCID.toString()?N.AddRow("  Opening "+ee[0].Name.toString(),F.Tables[2][J].Amount.toString(),!0,!1):N.AddRow(ee[0].Name.toString()+" IN",F.Tables[2][J].Amount.toString(),!0,!1),B.SysColumnName=ee[0].SysColumnName.toString(),B.Type=ee[0].Type.toString(),""!=F.Tables[2][J].Amount.toString()&&(!N.Parent.ScreenObject.Preferences.ContainsKey("DonotConsiderOpeningInPaymode")||""==N.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode||!(0,le.yG0)(N.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode)||"300"!=F.Tables[2][J].RefCCID.toString())&&(U+=parseFloat(F.Tables[2][J].Amount.toString()));F.Tables.length>3&&F.Tables[3].length>0&&F.Columns[3].Contains("Amount")&&""!=F.Tables[3][0].Amount.toString()&&(B=N.AddRow(ee[0].Name.toString()+" OUT",F.Tables[3][0].Amount.toString(),!0,!1),B.SysColumnName=ee[0].SysColumnName.toString(),B.Type=ee[0].Type.toString(),""!=F.Tables[3][0].Amount.toString()&&(U-=parseFloat(F.Tables[3][0].Amount.toString())))}if("5"==ee[0].Type.toString()?(ie=0,F.Tables[0].length>0&&""!=F.Tables[0][0][F.Columns[0][_]].toString()&&(ie+=parseFloat(F.Tables[0][0][F.Columns[0][_]].toString())),F.Tables.length>5&&F.Tables[5].length>0&&""!=F.Tables[5][0][F.Columns[0][0]].toString()&&(ie-=parseFloat(F.Tables[5][0][F.Columns[0][0]].toString())),U+=ie,B=N.AddRow(ee[0].Name.toString()+" Sales",ie.toString(),!0,!1),N.DtReportObj.TableColumns.Contains("PostJV")&&null!=S&&S.Contains(v[_])&&(B.SysColumnName=v[_],B.PostJV=1)):(B=N.AddRow(ee[0].Name.toString(),F.Tables[0].length>0?F.Tables[0][0][F.Columns[0][_]].toString():"0",!0,!1),F.Tables[0].length>0&&""!=F.Tables[0][0][F.Columns[0][_]].toString()&&(U+=parseFloat(F.Tables[0][0][F.Columns[0][_]].toString())),N.DtReportObj.TableColumns.Contains("PostJV")&&null!=S&&S.Contains(v[_])&&(B.SysColumnName=v[_],B.PostJV=1)),B.SysColumnName=ee[0].SysColumnName.toString(),B.Type=ee[0].Type.toString(),F.Tables.length>7&&F.Tables[7].length>0&&""!=F.Tables[7][0][F.Columns[0][_]].toString()&&(B=N.AddRow(ee[0].Name.toString()+" Reciept",F.Tables[7][0][F.Columns[0][_]].toString(),!0,!1),U+=parseFloat(F.Tables[7][0][F.Columns[0][_]].toString())),F.Tables.length>8&&F.Tables[8].length>0&&""!=F.Tables[8][0][F.Columns[0][_]].toString()&&(B=N.AddRow(ee[0].Name.toString()+" Orders",F.Tables[8][0][F.Columns[0][_]].toString(),!0,!1),U+=parseFloat(F.Tables[8][0][F.Columns[0][_]].toString())),F.Tables.length>9&&F.Tables[9].length>0&&""!=F.Tables[9][0][F.Columns[0][_]].toString()&&(B=N.AddRow(ee[0].Name.toString()+" Gift vouchers",F.Tables[9][0][F.Columns[0][_]].toString(),!0,!1),U+=parseFloat(F.Tables[9][0][F.Columns[0][_]].toString())),F.Tables.length>4&&F.Tables[4].length>0&&""!=F.Tables[4][0][F.Columns[0][_]].toString()&&("5"==ee[0].Type.toString()?(ie=0,""!=F.Tables[4][0][_].toString()&&(ie+=parseFloat(F.Tables[4][0][F.Columns[0][_]].toString())),F.Tables.length>6&&F.Tables[6].length>0&&""!=F.Tables[6][0][F.Columns[0][0]].toString()&&(ie-=parseFloat(F.Tables[6][0][F.Columns[0][0]].toString())),U-=ie,null!=B&&N.DtReportObj.TableColumns.Contains("PostJV")&&"1"==B.PostJV.toString()&&""!=B.AmountActual.toString()&&ie>0&&(B.AmountActual=parseFloat(B.AmountActual.toString())-ie),B=N.AddRow("  Sales Return",ie.toString(),!0,!1)):(null!=B&&N.DtReportObj.TableColumns.Contains("PostJV")&&"1"==B.PostJV.toString()&&""!=B.AmountActual.toString()&&""!=F.Tables[4][0][F.Columns[0][_]].toString()&&(B.AmountActual=parseFloat(B.AmountActual.toString())-parseFloat(F.Tables[4][0][F.Columns[0][_]].toString())),B=N.AddRow("  Sales Return",F.Tables[4][0][F.Columns[0][_]].toString(),!0,!1),U-=parseFloat(F.Tables[4][0][_].toString())),B.SysColumnName=ee[0].SysColumnName.toString(),B.Type=ee[0].Type.toString()),B=N.AddRow(ee[0].Name.toString()+" @Register",R.J0.IsEmpty(ee[0].Amount)?"0":ee[0].Amount.toString(),!0,!1),B.SysColumnName=ee[0].SysColumnName.toString(),B.Type=ee[0].Type.toString(),N.DtDiffPosting.Tables.length>0&&N.DtDiffPosting.Columns[0].Contains("Name")){var te=N.DtDiffPosting.Tables[0].filter(J=>J.Name==-B.Type.toString());N.DtReportObj.TableColumns.Contains("PostJV")&&te.length>0&&(B.SysColumnName="RegPOs",B.PostJV=1)}if(U=R.J0.IsEmpty(ee[0].Amount)?-U:parseFloat(ee[0].Amount.toString())-U,U=parseFloat(U.ToString("N"+w.d.SessionManager.Preferences.DecimalsinAmount)),0!=U&&!N.IsDiff&&(N.IsDiff=!0),B=N.AddRow(ee[0].Name.toString()+" Diff",U.toString(),!0,!1),B.SysColumnName=ee[0].SysColumnName.toString(),B.Type=ee[0].Type.toString(),N.DtDiffPosting.Tables.length>0&&N.DtDiffPosting.Columns[0].Contains("Name")){let J=N.DtDiffPosting.Tables[0].filter(Ce=>Ce.Name==B.Type);N.DtReportObj.TableColumns.Contains("PostJV")&&J.length>0&&(B.SysColumnName="DiffPOs",B.PostJV=1)}}else{let U=N.Parent.ScreenObject.Data.Tables[0].filter(ie=>ie.SysColumnName.toLowerCase()==v[_].toLowerCase());U.length>0&&(F.Tables[0].length>0&&(B=N.AddRow(U[0].ResourceData.toString(),F.Tables[0][0][F.Columns[0][_]].toString(),!1,!1)),N.DtReportObj.TableColumns.Contains("PostJV")&&null!=S&&S.Contains(v[_])&&(B.SysColumnName=v[_],B.PostJV=1))}}if(null!=N.Denom&&null!=N.Denom.GrdDenomination&&null!=N.Denom.GrdDenomination.Table&&N.Denom.GrdDenomination.Table.length>0&&N.Denom.GrdDenomination.TableColumns.Contains("Notes")&&N.Denom.GrdDenomination.TableColumns.Contains("NotesTender")){B=N.AddRow("Denominations","",!1,!0);for(let _=0;_<N.Denom.GrdDenomination.Table.length;_++)!R.J0.IsEmpty(N.Denom.GrdDenomination.Table[_].Notes.toString())&&!R.J0.IsEmpty(N.Denom.GrdDenomination.Table[_].NotesTender.toString())&&(B=N.AddRow(N.Denom.GrdDenomination.Table[_].Notes.toString()+" X "+N.Denom.GrdDenomination.Table[_].NotesTender.toString(),(parseFloat(N.Denom.GrdDenomination.Table[_].Notes.toString())*parseFloat(N.Denom.GrdDenomination.Table[_].NotesTender.toString())).toString(),!1,!1));N.AddRow("Total",N.Denom.GetTotal().toString(),!1,!1)}}N.ExitGrid.Table=N.DtReport,N.ExitGrid.refreshDatawithIDs()})()}AddRow(F,N,te,v){let S=new me.Ji(this.oReport.ReportColumns.length);v&&(S.Cells[0].IsNormal=!1,S.Cells[0].CellAppearance=this.oReport.ReportColumns[0].DataAppearance.Clone(),S.Cells[0].CellAppearance.IsBold=!0,S.Cells[0].IsNormal=!1,S.Cells[1].CellAppearance=this.oReport.ReportColumns[1].DataAppearance.Clone(),S.Cells[1].CellAppearance.IsBold=!0),S.Cells[0].Text=F;let B=0;te?(B=R.J0.DoubleTryParse(N),this.oReport.SetCellValue(B,this.oReport.ReportColumns[1].DataFormat,"FLOAT",S.Cells[1])):S.Cells[1].Text=N,this.oReport.Data.push(S);let O=this.DtReportObj.NewRow();return O.NameWithKey=F,v&&(O.StyleIsBold="1"),te?(O.Amount=S.Cells[1].Text,O.AmountActual=B,F.Contains("Diff")&&(B>0&&(O.Row_Background="GREEN"),B<0&&(O.Row_Background="RED"))):O.Amount=N,this.DtReport.push(O),O}GetJVXML(F,N){if(N.IsValid=!0,!this.DtReportObj.TableColumns.Contains("PostJV"))return"";let v=this.Parent.ScreenObject.GenerateQueryfromList(this.Parent.ScreenObject._CCFields,!0,{message:""},!1,!1);w.d.SessionManager.RegisterCCID>0&&this.Parent.ScreenObject.RegisterNodeID>0&&!v.toString().Contains("dcCCNID"+(w.d.SessionManager.RegisterCCID-5e4).toString()+"=")&&(v+=" dcCCNID"+(w.d.SessionManager.RegisterCCID-5e4).toString()+"="+this.Parent.ScreenObject.RegisterNodeID.toString()+", "),this.Parent.ScreenObject.Preferences.ContainsKey("PosJVOn")&&"2"==this.Parent.ScreenObject.Preferences.PosJVOn&&w.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(w.d.SessionManager.Preferences.PosShifts)>5e4&&this.Parent.ScreenObject.ShiftNodeID>0&&!v.toString().Contains("dcCCNID"+(parseInt(w.d.SessionManager.Preferences.PosShifts)-5e4).toString()+"=")&&(v+=" dcCCNID"+(parseInt(w.d.SessionManager.Preferences.PosShifts)-5e4).toString()+"="+this.Parent.ScreenObject.ShiftNodeID.toString()+", ");let S,B,ae,O="";for(let K=0;K<this.DtReport.length;K++)if("1"==R.J0.StringValue(this.DtReport[K].PostJV)&&!R.J0.IsEmpty(this.DtReport[K].AmountActual)&&(ae="DiffPOs"==this.DtReport[K].SysColumnName.toString()?this.DtDiffPosting.Tables[0].filter(ee=>ee.Name==this.DtReport[K].Type.toString()):"RegPOs"==this.DtReport[K].SysColumnName.toString()?this.DtDiffPosting.Tables[0].filter(ee=>ee.Name="-"+this.DtReport[K].Type.toString()):this.Parent.ScreenObject.Data.Tables[0].filter(ee=>ee.SysColumnName==this.DtReport[K].SysColumnName.toString()),ae.length>0)){if(S=R.J0.IntTryParse(ae[0].DebitAccount.toString()),B=R.J0.IntTryParse(ae[0].CreditAccount.toString()),S<=0&&ae[0].Table.Columns.Contains("DrRefColID")&&""!=ae[0].DrRefColID.toString()&&parseInt(ae[0].DrRefColID.toString())>0){let ee=this.Parent.ScreenObject._CCFields.find(U=>U.DBColumnName.toLowerCase()==ae[0].DRSysColumnName.toString().toLowerCase());null!=ee&&ee instanceof W.y$&&ee.SelectedValue>0&&(S=this.Parent.ScreenObject.GetAccountByRef(parseInt(ae[0].DrRefID.toString()),parseInt(ae[0].DrRefColID.toString()),ee.SelectedValue))}if(B<=0&&ae[0].Table.Columns.Contains("CrRefColID")&&""!=ae[0].CrRefColID.toString()&&parseInt(ae[0].CrRefColID.toString())>0){let ee=this.Parent.ScreenObject._CCFields.find(U=>U.DBColumnName.toLowerCase()==ae[0].CRSysColumnName.toString().toLowerCase());null!=ee&&ee instanceof W.y$&&ee.SelectedValue>0&&(B=this.Parent.ScreenObject.GetAccountByRef(parseInt(ae[0].CrRefID.toString()),parseInt(ae[0].CrRefColID.toString()),ee.SelectedValue))}if(this.DtReportObj.TableColumns.Contains("DebitAccount")||this.DtReportObj.TableColumns.push("DebitAccount"),this.DtReportObj.TableColumns.Contains("CreditAccount")||this.DtReportObj.TableColumns.push("CreditAccount"),!(S>0))return N.IsValid=!1,this.DisplayMessage="DebitAccount not defined for "+this.DtReport[K].NameWithKey.toString(),this.MessageVisibility=!0,"";if(this.DtReport[K].DebitAccount=S,!(B>0))return N.IsValid=!1,this.DisplayMessage="Credit not defined for "+this.DtReport[K].NameWithKey.toString(),this.MessageVisibility=!0,"";this.DtReport[K].CreditAccount=B,O+=S+",",O+=B+","}O.length>1&&(O=O.Remove(0,O.length));let se=this.Parent.ScreenObject.CheckIsBillWise(O),fe=1,_="";for(let K=0;K<this.DtReport.length;K++)"1"==R.J0.StringValue(this.DtReport[K].PostJV)&&R.J0.IsEmpty(this.DtReport[K].AmountActual)&&0!=parseFloat(this.DtReport[K].AmountActual.toString())&&(_+='<Row><Transactions   DocDetailsID="0"  DocSeqNo="'+fe+'" Amount="'+this.DtReport[K].AmountActual.toString().Replace("-","")+'" ',_+=' AmtFc="'+this.DtReport[K].AmountActual.toString().Replace("-","")+'"  CurrencyID="1"  ExchangeRate="1" ',parseFloat(this.DtReport[K].AmountActual.toString())>0?_+='DebitAccount="'+this.DtReport[K].DebitAccount.toString()+'" CreditAccount="-99" ></Transactions> ':_+='CreditAccount="'+this.DtReport[K].DebitAccount.toString()+'" DebitAccount="-99" ></Transactions> ',_+=' <Numeric /> <Alpha /> <CostCenters  Query="'+v+'"  /> <EXTRAXML>',null!=se&&se.Tables.length>0&&se.Columns[0].Contains("AccountId")&&(ae=se.Tables[0].filter(ee=>ee.AccountId==this.DtReport[K].DebitAccount.toString()),ae.length>0&&"true"==ae[0].IsBillwise.toString().toLowerCase()&&(_+='<BillWise> <Row DocSeqNo="'+fe+'" AccountID="'+this.DtReport[K].DebitAccount.toString(),_+='" AmountFC="'+this.DtReport[K].AmountActual.toString()+'" AdjAmount="'+this.DtReport[K].AmountActual.toString()+'"',_+=' AdjCurrID="1" AdjExchRT="1" Narration=""  IsDocPDC="0" IsNewReference="1" ></Row></BillWise>')),_+="   </EXTRAXML>  </Row>",fe++,_+='<Row><Transactions   DocDetailsID="0"  DocSeqNo="'+fe+'" Amount="'+this.DtReport[K].AmountActual.toString().Replace("-","")+'" ',_+=' AmtFc="'+this.DtReport[K].AmountActual.toString().Replace("-","")+'"  CurrencyID="1"  ExchangeRate="1" ',parseFloat(this.DtReport[K].AmountActual.toString())>0?_+='DebitAccount="-99" CreditAccount="'+this.DtReport[K].CreditAccount.toString()+'" ></Transactions> ':_+='CreditAccount="-99" DebitAccount="'+this.DtReport[K].CreditAccount.toString()+'" ></Transactions> ',_+=' <Numeric /> <Alpha /> <CostCenters  Query="'+v+'"  /> <EXTRAXML>',null!=se&&se.Tables.length>0&&se.Columns[0].Contains("AccountId")&&(ae=se.Tables[0].filter(ee=>ee.AccountId==this.DtReport[K].CreditAccount.toString()),ae.length>0&&"true"==ae[0].IsBillwise.toString().toLowerCase()&&(_+='<BillWise> <Row DocSeqNo="'+fe+'" AccountID="'+this.DtReport[K].CreditAccount.toString(),_+='" AmountFC="-'+this.DtReport[K].AmountActual.toString()+'" AdjAmount="-'+this.DtReport[K].AmountActual.toString()+'"',_+=' AdjCurrID="1" AdjExchRT="1" Narration=""  IsDocPDC="0" IsNewReference="1" ></Row></BillWise>')),_+="   </EXTRAXML>  </Row>",fe++);return _.length>0&&(_="<DocumentXML>"+_+"</DocumentXML>"),_.toString()}CloseSession(){let F,N,v="",S="";if(this.CloseType>0&&(S+="<XML>",this.DTPayModes.forEach(ae=>{S+='<Row Type="'+R.J0.String(ae.Type),S+='" SysColName="'+R.J0.String(ae.SysColumnName),S+='" Name="'+R.J0.String(ae.Name),S+='" Amount="'+R.J0.String(ae.Amount)+'" />',"5"==ae.Type.toString()&&0!=R.J0.String(ae.DenomXML).length&&(this.DenomXML=ae.DenomXML.toString())}),S+="</XML>"),1==this.CloseType&&this.Parent.ScreenObject.Preferences.ContainsKey("PosJVOn")&&"1"==this.Parent.ScreenObject.Preferences.PosJVOn||2==this.CloseType&&this.Parent.ScreenObject.Preferences.ContainsKey("PosJVOn")&&"2"==this.Parent.ScreenObject.Preferences.PosJVOn){let ae={IsValid:""};if(v=this.GetJVXML(!0,ae),F=ae.IsValid,!F)return this.Parent.DisplayMessage=this.DisplayMessage,this.Parent.MessageVisibility=!0,void w.d.page.HideDialog(this.PopUpGUID)}let B=this.Parent.ScreenObject.ShiftNodeID;5==this.CloseType&&this.Shift.Visible&&this.Shift.SelectedValue>0&&(B=this.Shift.SelectedValue),N=w.d.admin.POSLogin(this.Parent.ScreenObject.RegisterNodeID,B,this.Parent.DocumentDate,this.CloseType,this.DenomXML,v,S.toString()).obj,(N>0||-100==N)&&(this.DayClose.IsChecked&&this.DayClose.Visible?N=w.d.admin.POSLogin(this.Parent.ScreenObject.RegisterNodeID,B,this.Parent.DocumentDate,1,"","","").obj:-100==N&&(confirm("All shifts are closed.Closing the Day.")||w.d.admin.POSLogin(this.Parent.ScreenObject.RegisterNodeID,B,this.Parent.DocumentDate,1,"","","")),this.CloseType>0&&(this.Parent.ScreenObject.Preferences.ContainsKey("DonotConsiderOpeningInPaymode")&&""!=this.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode&&(0,le.yG0)(this.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode)&&(this.ExitGrid.SelectedItem=null,this.Denom=new Z.AddDenominationViewModel(this,null),this.Denom.Currency.Label="Closing Imprest",w.d.page.ShowDialog(this.Denom,V.AddDenominationComponent)),this.CallPrint(B)),w.d.page.HideDialog(this.PopUpGUID),w.d.page.removeActiveTab())}AddDenom(){this.ExitGrid.SelectedItem.DenomXML=this.Denom.GetXML(),this.ExitGrid.SelectedItem.Amount=this.Denom.GetTotal(),w.d.page.HideDialog(this.PopUpGUID)}CallPrint(F){this.NewPrintCode(F)}ExportFile(F,N,te){this.DisplayMessage="Print"==F?"Printing data please wait...":"Exporting data please wait...";let v={};N.InitPrintOrExport(v),v.Type=F;let S="";S=null!=N.FromDatePicker?N.FromDatePicker.Date.ToString("dd/MMM/yyyy"):this.Parent.DocumentDate.ToString("dd/MMM/yyyy"),v.PrintDataOnSeperatePageBy=w.d.SessionManager.Preferences.ContainsKey("PrintDataOnSeperatePageBy")?w.d.SessionManager.Preferences.PrintDataOnSeperatePageBy:"",v.DimensionFiltersKeys.Clear(),v.DimensionFiltersValues.Clear(),v.DimensionFiltersKeys.push(w.d.SessionManager.RegisterCCID),v.DimensionFiltersValues.push(this.Parent.ScreenObject.RegisterNodeID.toString()),w.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(w.d.SessionManager.Preferences.PosShifts)>5e4&&(v.DimensionFiltersKeys.push(w.d.SessionManager.Preferences.PosShifts),v.DimensionFiltersValues.push(te.toString())),w.d.SessionManager.DivisionID>0&&(v.DimensionFiltersKeys.push(50001),v.DimensionFiltersValues.push(w.d.SessionManager.DivisionID.toString())),w.d.SessionManager.LocationID>0&&(v.DimensionFiltersKeys.push(50002),v.DimensionFiltersValues.push(w.d.SessionManager.LocationID.toString())),"PDF"==F?v.lst=[]:"Print"==F?(v.lst=[],v.Type="PDF"):("Excel"==F||"OpenXML"==F)&&(v.lst=[]),v.al="al",w.d.report.ExportReport(N.Data,N.ReportColumns,v,"POSEXIT",[],[],S).subscribe(B=>{"Print"==F?w.d.SessionManager.printTab(B.FileName):(w.d.SessionManager.Download(B.FileName,"khasim"),R.J0.IsEmpty(B.Message)&&!R.J0.IsEmpty(B.FileName)&&(this.DisplayMessage="Exported Successfully"))},B=>{console.log(B)})}NewPrintCode(F){let N="<XML><Row ColID='FROMDATE' Value='"+this.Parent.DocumentDate.ToString("dd MMM yyyy")+"'/>";N+="<Row ColID='TODATE' Value='"+this.Parent.DocumentDate.ToString("dd MMM yyyy")+"'/>",N+="<Row ColID='"+w.d.SessionManager.RegisterCCID+"' Value='"+this.Parent.ScreenObject.RegisterNodeID+"'/>",this.Parent.ScreenObject.LocationID>0&&(N+="<Row ColID='50002' Value='"+this.Parent.ScreenObject.LocationID+"'/>"),w.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(w.d.SessionManager.Preferences.PosShifts)>5e4&&F>0&&(N+="<Row ColID='"+w.d.SessionManager.Preferences.PosShifts+"' Value='"+F+"'/>"),N+="</XML>";let te=new E.ReportViewModel;return te.RecordCount="",te.PostFilterData=[],te.ReportSummaryData=[],te.ReportSummaryDataColumns=[],te.ReportViewModel_Document(50,N,190,!0,this,null),this.ExportFile("Print",te,F),""}GetReportDataTable(){let N=[];return this.ExitGrid.Table.forEach(te=>{let v={};v.RegID=this.Parent.ScreenObject.RegisterNodeID,v.RegName=this.Parent.ScreenObject.RegisterNodeID.toString(),v.Name=te.NameWithKey,v.StyleIsBold=te.StyleIsBold,v.Value=v[this.Parent.DocumentDate.ToString("ddMMMyyyy")]=te.Amount.toString(),N.push(v)}),N.length>0&&(N[0].CloseType=3==this.CloseType?"UserClose":2==this.CloseType?"ShiftClose":"DAY CLOSE"),N}OnPreviewKeyDown(F){if(this.IsPayMode)if(112==F.keyCode)this.IsPayMode&&(null!=this.ExitGrid.SelectedItem&&"5"==this.ExitGrid.SelectedItem.Type.toString()?(this.Denom.Currency.Label="Cash Collection",this.Denom=new Z.AddDenominationViewModel(this,this.ExitGrid.SelectedItem.DenomXML.toString()),w.d.page.ShowDialog(this.Denom,V.AddDenominationComponent)):this.ExitGrid.Table.forEach(N=>{"5"==N.Type.toString()&&(this.ExitGrid.SelectedItem=N,this.Denom.Currency.Label="Cash Collection",this.Denom=new Z.AddDenominationViewModel(this,this.ExitGrid.SelectedItem.DenomXML.toString()),w.d.page.ShowDialog(this.Denom,V.AddDenominationComponent))}));else if(F.keyCode>=91&&F.keyCode<=101){let N=F.keyCode-91;N<this.ExitGrid.Table.length&&(this.ExitGrid.ColumnNo=1,this.ExitGrid.LineNo=N+1,this.ExitGrid.SetFocusongrid=!0)}}}},42183:function(ze,Oe,n){var C,W,z;ze.exports=(C=n(95275),n(90033),W=C.lib.CipherParams,z=C.enc.Hex,C.format.Hex={stringify:function(he){return he.ciphertext.toString(z)},parse:function(he){var k=z.parse(he);return W.create({ciphertext:k})}},C.format.Hex)},43266:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(46882),function(){var x=C,X=x.lib.Hasher,W=x.x64,ne=W.Word,z=W.WordArray,Z=x.algo;function w(){return ne.create.apply(ne,arguments)}var he=[w(1116352408,3609767458),w(1899447441,602891725),w(3049323471,3964484399),w(3921009573,2173295548),w(961987163,4081628472),w(1508970993,3053834265),w(2453635748,2937671579),w(2870763221,3664609560),w(3624381080,2734883394),w(310598401,1164996542),w(607225278,1323610764),w(1426881987,3590304994),w(1925078388,4068182383),w(2162078206,991336113),w(2614888103,633803317),w(3248222580,3479774868),w(3835390401,2666613458),w(4022224774,944711139),w(264347078,2341262773),w(604807628,2007800933),w(770255983,1495990901),w(1249150122,1856431235),w(1555081692,3175218132),w(1996064986,2198950837),w(2554220882,3999719339),w(2821834349,766784016),w(2952996808,2566594879),w(3210313671,3203337956),w(3336571891,1034457026),w(3584528711,2466948901),w(113926993,3758326383),w(338241895,168717936),w(666307205,1188179964),w(773529912,1546045734),w(1294757372,1522805485),w(1396182291,2643833823),w(1695183700,2343527390),w(1986661051,1014477480),w(2177026350,1206759142),w(2456956037,344077627),w(2730485921,1290863460),w(2820302411,3158454273),w(3259730800,3505952657),w(3345764771,106217008),w(3516065817,3606008344),w(3600352804,1432725776),w(4094571909,1467031594),w(275423344,851169720),w(430227734,3100823752),w(506948616,1363258195),w(659060556,3750685593),w(883997877,3785050280),w(958139571,3318307427),w(1322822218,3812723403),w(1537002063,2003034995),w(1747873779,3602036899),w(1955562222,1575990012),w(2024104815,1125592928),w(2227730452,2716904306),w(2361852424,442776044),w(2428436474,593698344),w(2756734187,3733110249),w(3204031479,2999351573),w(3329325298,3815920427),w(3391569614,3928383900),w(3515267271,566280711),w(3940187606,3454069534),w(4118630271,4000239992),w(116418474,1914138554),w(174292421,2731055270),w(289380356,3203993006),w(460393269,320620315),w(685471733,587496836),w(852142971,1086792851),w(1017036298,365543100),w(1126000580,2618297676),w(1288033470,3409855158),w(1501505948,4234509866),w(1607167915,987167468),w(1816402316,1246189591)],k=[];!function(){for(var le=0;le<80;le++)k[le]=w()}();var me=Z.SHA512=X.extend({_doReset:function(){this._hash=new z.init([new ne.init(1779033703,4089235720),new ne.init(3144134277,2227873595),new ne.init(1013904242,4271175723),new ne.init(2773480762,1595750129),new ne.init(1359893119,2917565137),new ne.init(2600822924,725511199),new ne.init(528734635,4215389547),new ne.init(1541459225,327033209)])},_doProcessBlock:function(le,R){for(var V=this._hash.words,ge=V[0],E=V[1],b=V[2],p=V[3],j=V[4],T=V[5],I=V[6],oe=V[7],F=ge.high,N=ge.low,te=E.high,v=E.low,S=b.high,B=b.low,O=p.high,ae=p.low,se=j.high,fe=j.low,_=T.high,K=T.low,ee=I.high,U=I.low,ie=oe.high,J=oe.low,Ce=F,Y=N,Ee=te,Te=v,Le=S,tt=B,Ue=O,ke=ae,Be=se,xe=fe,ve=_,A=K,Se=ee,Re=U,be=ie,He=J,Ne=0;Ne<80;Ne++){var Ke,De,Ae=k[Ne];if(Ne<16)De=Ae.high=0|le[R+2*Ne],Ke=Ae.low=0|le[R+2*Ne+1];else{var je=k[Ne-15],$e=je.high,nt=je.low,Qe=(nt>>>1|$e<<31)^(nt>>>8|$e<<24)^(nt>>>7|$e<<25),mt=k[Ne-2],at=mt.high,Et=mt.low,dn=(Et>>>19|at<<13)^(Et<<3|at>>>29)^(Et>>>6|at<<26),Ut=k[Ne-7],_t=k[Ne-16],cn=_t.low;Ae.high=De=(De=(De=(($e>>>1|nt<<31)^($e>>>8|nt<<24)^$e>>>7)+Ut.high+((Ke=Qe+Ut.low)>>>0<Qe>>>0?1:0))+((at>>>19|Et<<13)^(at<<3|Et>>>29)^at>>>6)+((Ke+=dn)>>>0<dn>>>0?1:0))+_t.high+((Ke+=cn)>>>0<cn>>>0?1:0),Ae.low=Ke}var Tt,Nn=Be&ve^~Be&Se,xt=xe&A^~xe&Re,Ni=Ce&Ee^Ce&Le^Ee&Le,Ts=(Y>>>28|Ce<<4)^(Y<<30|Ce>>>2)^(Y<<25|Ce>>>7),yn=he[Ne],Fi=yn.low,pt=be+((Be>>>14|xe<<18)^(Be>>>18|xe<<14)^(Be<<23|xe>>>9))+((Tt=He+((xe>>>14|Be<<18)^(xe>>>18|Be<<14)^(xe<<23|Be>>>9)))>>>0<He>>>0?1:0),ct=Ts+(Y&Te^Y&tt^Te&tt);be=Se,He=Re,Se=ve,Re=A,ve=Be,A=xe,Be=Ue+(pt=(pt=(pt=pt+Nn+((Tt+=xt)>>>0<xt>>>0?1:0))+yn.high+((Tt+=Fi)>>>0<Fi>>>0?1:0))+De+((Tt+=Ke)>>>0<Ke>>>0?1:0))+((xe=ke+Tt|0)>>>0<ke>>>0?1:0)|0,Ue=Le,ke=tt,Le=Ee,tt=Te,Ee=Ce,Te=Y,Ce=pt+(((Ce>>>28|Y<<4)^(Ce<<30|Y>>>2)^(Ce<<25|Y>>>7))+Ni+(ct>>>0<Ts>>>0?1:0))+((Y=Tt+ct|0)>>>0<Tt>>>0?1:0)|0}N=ge.low=N+Y,ge.high=F+Ce+(N>>>0<Y>>>0?1:0),v=E.low=v+Te,E.high=te+Ee+(v>>>0<Te>>>0?1:0),B=b.low=B+tt,b.high=S+Le+(B>>>0<tt>>>0?1:0),ae=p.low=ae+ke,p.high=O+Ue+(ae>>>0<ke>>>0?1:0),fe=j.low=fe+xe,j.high=se+Be+(fe>>>0<xe>>>0?1:0),K=T.low=K+A,T.high=_+ve+(K>>>0<A>>>0?1:0),U=I.low=U+Re,I.high=ee+Se+(U>>>0<Re>>>0?1:0),J=oe.low=J+He,oe.high=ie+be+(J>>>0<He>>>0?1:0)},_doFinalize:function(){var le=this._data,R=le.words,V=8*this._nDataBytes,ge=8*le.sigBytes;return R[ge>>>5]|=128<<24-ge%32,R[30+(ge+128>>>10<<5)]=Math.floor(V/4294967296),R[31+(ge+128>>>10<<5)]=V,le.sigBytes=4*R.length,this._process(),this._hash.toX32()},clone:function(){var le=X.clone.call(this);return le._hash=this._hash.clone(),le},blockSize:32});x.SHA512=X._createHelper(me),x.HmacSHA512=X._createHmacHelper(me)}(),C.SHA512)},43767:(ze,Oe,n)=>{"use strict";n.d(Oe,{dd:()=>N,n_:()=>b,VV:()=>oe,M4:()=>F,J0:()=>p,VB:()=>I});var W,C=n(74523),x=n(32040),G=n(26336),X=n(15381),ne=new Uint8Array(16);function z(){if(!W&&!(W=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(ne)}const Z=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var k=[],me=0;me<256;++me)k.push((me+256).toString(16).substr(1));const R=function le(te){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,S=(k[te[v+0]]+k[te[v+1]]+k[te[v+2]]+k[te[v+3]]+"-"+k[te[v+4]]+k[te[v+5]]+"-"+k[te[v+6]]+k[te[v+7]]+"-"+k[te[v+8]]+k[te[v+9]]+"-"+k[te[v+10]]+k[te[v+11]]+k[te[v+12]]+k[te[v+13]]+k[te[v+14]]+k[te[v+15]]).toLowerCase();if(!function w(te){return"string"==typeof te&&Z.test(te)}(S))throw TypeError("Stringified UUID is invalid");return S},ge=function V(te,v,S){var B=(te=te||{}).random||(te.rng||z)();if(B[6]=15&B[6]|64,B[8]=63&B[8]|128,v){S=S||0;for(var O=0;O<16;++O)v[S+O]=B[O];return v}return R(B)};var E=n(53852);class b{static GetLogPath(v){return b.GetLogPath_3(v,!1,!1)}static GetLogPath_3(v,S,B){let O;try{if(!(!B&&x.d.SessionManager.IsWebApplication&&x.d.SessionManager.ServerMapPath.length>0))return x.d.SessionManager.IsWinServiceCall?(O=x.d.SessionManager.api_url,O.Combine(v)):(O=x.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"==x.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath?x.d.SessionManager.Preferences["File Upload Path"]:"","");if(x.d.SessionManager.Preferences.ContainsKey("webfileurl")&&!p.IsEmpty(x.d.SessionManager.Preferences.webfileurl)?(O=x.d.SessionManager.Preferences.webfileurl,O.endsWith("/")||O.endsWith("\\")||O.Contains("http:")?O+=v:(O.Contains("\\192"),O=O+'"'+v)):(O=x.d.SessionManager.api_url,O.endsWith("/")||O.endsWith("\\")||O.Contains("http:")?O+=v:(O.Contains("\\192"),O=O+'"'+v)),!O.toLowerCase().startsWith("ftp")&&!O.toLowerCase().startsWith("http"))return O}catch(ae){Logger.ErrorLog("GetLogPath:"+ae.Message)}return""}}class p{static GetPrimaryKey(v){return 2==v?"AccountID":3==v?"ProductID":"NodeID"}static GetTableName(v){return 2==v?"ACC_Accounts":3==v?"INV_Product":50001==v?"COM_Division":50002==v?"COM_Location":50003==v?"COM_Branch":50004==v?"COM_Department":50005==v?"COM_Salesman":50006==v?"COM_Category":50007==v?"COM_Area":50008==v?"COM_Teritory":"COM_CC"+v}static WriteErrorsToFile(v,S){}static GetRegistryValues(v,S,B){throw new Error("Method not implemented.")}static{this.key=E.enc.Utf8.parse("9090909090909090")}static{this.iv=E.enc.Utf8.parse("8080808080808080")}static generateGUID(){return this.GUID=ge(),this.GUID}static GetGUID(){return(0,C.A)(function*(){return yield x.d.common.Getguid()})()}static NewGuid(){return this.generateGUID()}static CurrentTimeZoneName(){return""}static GetAmount(v){return v.toString().Replace(",","")}static GetPath(v,S=""){let B,O="";try{x.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"===p.String(x.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath)&&!p.IsEmpty(x.d.SessionManager.Preferences["File Upload Path"])?O=p.String(x.d.SessionManager.Preferences["File Upload Path"]):x.d.SessionManager.Preferences.ContainsKey("webfileuploadpath")&&!p.IsEmpty(x.d.SessionManager.Preferences.webfileuploadpath)&&(O=x.d.SessionManager.Preferences.webfileuploadpath),!p.IsEmpty(S)&&x.d.SessionManager.Preferences.ContainsKey("isYearMonthWiseFolder")&&"TRUE"==x.d.SessionManager.Preferences.isYearMonthWiseFolder.toUpperCase()||(S=""),x.d.SessionManager.Preferences.ContainsKey("isSftp")&&"TRUE"==x.d.SessionManager.Preferences.isSftp.toUpperCase()?(x.d.common.GetUploadedImage(v,O,"isSftp",S),B=(x.d.SessionManager.config.apiURL+"Attachments/"+v).length>20?x.d.SessionManager.config.apiURL+"Attachments/"+v:x.d.SessionManager.config.apiURL+"fonts/NOImageAvailable.png"):O.toLowerCase().Contains("ftp")?B=x.d.common.GetUploadedImage(v,O,"ftp",S).length>20?x.d.SessionManager.config.apiURL+"Attachments/"+v:x.d.SessionManager.config.apiURL+"fonts/NOImageAvailable.png":(O=x.d.SessionManager.Preferences.webfileurl,B=O+v)}catch{}return B}static GetFmFilePath(v){let S,B="";try{x.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"==x.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath&&!p.IsEmpty(x.d.SessionManager.Preferences["File Upload Path"])?B=x.d.SessionManager.Preferences["File Upload Path"]:x.d.SessionManager.Preferences.ContainsKey("webfileuploadpath")&&!p.IsEmpty(x.d.SessionManager.Preferences.webfileuploadpath)&&(B=x.d.SessionManager.Preferences.webfileuploadpath),B.toLowerCase().Contains("ftp")||B.toLowerCase().Contains("issftp")?S=x.d.SessionManager.config.apiURL+"Attachments/"+v:(B=x.d.SessionManager.Preferences.webfileurl,S=B+v)}catch{}return S}static haversineDistance(v,S){const O=(S.latitude-v.latitude)*Math.PI/180,ae=(S.longitude-v.longitude)*Math.PI/180,se=Math.cos(v.latitude*Math.PI/180)*Math.cos(S.latitude*Math.PI/180)*Math.sin(ae/2)*Math.sin(ae/2)+Math.sin(O/2)*Math.sin(O/2);return 2*Math.atan2(Math.sqrt(se),Math.sqrt(1-se))*6371}static GetTagTableName(v){return 2==v?"ACC_Accounts":3==v?"INV_Product":7==v?"ADM_Users":50001==v?"COM_Division":50002==v?"COM_Location":50003==v?"COM_Branch":50004==v?"COM_Department":50005==v?"COM_Salesman":50006==v?"COM_Category":50007==v?"COM_Area":50008==v?"COM_Teritory":"COM_CC"+v}static GetPrimarkyKey(v,S=!1){return 2==v?"AccountID":3==v?"ProductID":S?"CCNID"+(v-5e4):"NodeID"}static SetRegistryValues(v){localStorage.setItem("RegistryValues",JSON.stringify(v))}static EncryptString(v){return(0,C.A)(function*(){return yield x.d.admin.EncryptString(v)})()}static DecryptString(v){return(0,C.A)(function*(){return yield x.d.admin.DecryptString(v)})()}static ValidatePassword(v){return x.d.SessionManager.Preferences.ContainsKey("PwdHardning")&&"TRUE"==x.d.SessionManager.Preferences.PwdHardning.toString().toUpperCase()&&!new RegExp("^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[~!@#$%^&*?-_]).{8,}$").test(v)?"Pasword should have atleast one capital alphabet,one number and one special character.":""}static ConvertNumberToText(v,S,B,O,ae){let se,fe,_=v.Replace(",","");if(v.Contains(".")){let K=_.split(".");se=K[0],fe=K[1]}else se=_,fe="00";return"Arabic"!=ae&&(O+=" Only"),"1"==S?0!=parseInt(se)&&0!=parseInt(fe)?B+" "+this.Converter(parseInt(se)).Trim()+" And "+this.Converter(parseInt(fe)).Trim()+" "+O:0!=parseInt(se)&&0==parseInt(fe)?B+" "+this.Converter(parseInt(se)).Trim()+" Only":0==parseInt(se)&&0!=parseInt(fe)?this.Converter(parseInt(fe)).Trim()+" "+O:" ":0!=parseInt(se)&&0!=parseInt(fe)?"Arabic"==ae?B+" "+this.ConvertNumberAmericanFormatArabic(se)+" \u0648 "+this.ConvertNumberAmericanFormatArabic(fe)+" "+O:B+" "+this.NumberToText(parseInt(se)).Trim()+" And "+this.NumberToText(parseInt(fe)).Trim()+" "+O:0!=parseInt(se)&&0==parseInt(fe)?"Arabic"==ae?B+" "+this.ConvertNumberAmericanFormatArabic(se):B+" "+this.NumberToText(parseInt(se)).Trim()+" Only":0==parseInt(se)&&0!=parseInt(fe)?"Arabic"==ae?this.ConvertNumberAmericanFormatArabic(fe).Trim()+" "+O:this.NumberToText(parseInt(fe)).Trim()+" "+O:" "}static Converter(v){if(0==v)return"Zero";if(-2147483648==v)return"Minus Two Hundred and Fourteen Crore Seventy Four Lakh Eighty Three Thousand Six Hundred and Forty Eight";let O,ae,se,S=[],B=0,fe="";v<0&&(fe+="Minus ",v=-v);let _=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "],K=["Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],ee=["Twenty ","Thirty ","Forty ","Fifty ","Sixty ","Seventy ","Eighty ","Ninety "],U=["Thousand ","Lakh ","Crore "];S[0]=v%1e3,S[1]=v/1e3,S[2]=v/1e5,S[1]=S[1]-100*S[2],S[3]=v/1e7,S[2]=S[2]-100*S[3];for(let ie=3;ie>0;ie--)if(0!=S[ie]){B=ie;break}for(let ie=B;ie>=0;ie--)0!=S[ie]&&(O=S[ie]%10,se=S[ie]/10,ae=S[ie]/100,se-=10*ae,ae>0&&(fe+=_[ae]+"Hundred "),(O>0||se>0)&&(fe+=0==se?_[O]:1==se?K[O]:ee[se-2]+_[O]),0!=ie&&(fe+=U[ie-1]));return fe.toString().startsWith("and")&&fe.Replace("and ",""),fe.toString().TrimEnd(fe.toString())}static NumberToText(v){return v<0?"Minus "+this.NumberToText(-v):0==v?"":v<=19?["One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"][v-1]+" ":v<=99?["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"][v/10-2]+" "+this.NumberToText(v%10):v<=199?"One Hundred "+this.NumberToText(v%100):v<=999?this.NumberToText(v/100)+"Hundred "+this.NumberToText(v%100):v<=1999?"One Thousand "+this.NumberToText(v%1e3):v<=999999?this.NumberToText(v/1e3)+"Thousand "+this.NumberToText(v%1e3):v<=1999999?"One Million "+this.NumberToText(v%1e6):v<=999999999?this.NumberToText(v/1e6)+"Million "+this.NumberToText(v%1e6):v<=1999999999?"One Billion "+this.NumberToText(v%1e9):this.NumberToText(v/1e9)+"Billion "+this.NumberToText(v%1e9)}static NumberToTextArabic(v){return v<0?"\u0646\u0627\u0642\u0635 "+this.NumberToTextArabic(-v):0==v?"":v<=19?["\u0648\u0627\u062d\u062f","\u0627\u062b\u0646\u0627\u0646","\u062b\u0644\u0627\u062b\u0629","\u0627\u0631\u0628\u0639\u0629","\u062e\u0645\u0633\u0629","\u0633\u062a\u0629","\u0633\u0628\u0639\u0629","\u062b\u0645\u0627\u0646\u064a\u0629","\u062a\u0633\u0639\u0629","\u0639\u0634\u0631\u0629","\u0627\u062d\u062f \u0639\u0634\u0631","\u0627\u062b\u0646\u0627 \u0639\u0634\u0631","\u062b\u0644\u0627\u062b\u0629 \u0639\u0634\u0631","\u0627\u0631\u0628\u0639\u0629 \u0639\u0634\u0631","\u062e\u0645\u0633\u0629 \u0639\u0634\u0631","\u0633\u062a\u0629 \u0639\u0634\u0631","\u0633\u0628\u0639\u0629 \u0639\u0634\u0631","\u062b\u0645\u0627\u0646\u064a\u0629 \u0639\u0634\u0631","\u062a\u0633\u0639\u0629 \u0639\u0634\u0631"][v-1]+" ":v<=99?["\u0639\u0634\u0631\u0648\u0646","\u062b\u0644\u0627\u062b\u0648\u0646","\u0627\u0631\u0628\u0639\u0648\u0646","\u062e\u0645\u0633\u0648\u0646","\u0633\u062a\u0648\u0646","\u0633\u0628\u0639\u0648\u0646","\u062b\u0645\u0627\u0646\u0648\u0646","\u062a\u0633\u0639\u0648\u0646"][v/10-2]+" "+this.NumberToTextArabic(v%10):v<=199?"\u0645\u0627\u0626\u0629 "+this.NumberToTextArabic(v%100):v<=999?this.NumberToTextArabic(v/100)+"\u0645\u0627\u0626\u0629 "+this.NumberToTextArabic(v%100):v<=1999?"\u0627\u0644\u0641 "+this.NumberToTextArabic(v%1e3):v<=999999?this.NumberToTextArabic(v/1e3)+"\u0627\u0644\u0641 "+this.NumberToTextArabic(v%1e3):v<=1999999?"\u0645\u0644\u064a\u0648\u0646 "+this.NumberToTextArabic(v%1e6):v<=999999999?this.NumberToTextArabic(v/1e6)+"\u0645\u0644\u064a\u0648\u0646 "+this.NumberToTextArabic(v%1e6):v<=1999999999?"\u0645\u0644\u064a\u0627\u0631 "+this.NumberToTextArabic(v%1e9):this.NumberToTextArabic(v/1e9)+"\u0645\u0644\u064a\u0627\u0631 "+this.NumberToTextArabic(v%1e9)}static ConvertNumberThreeDigitAmericanFormatArabic(v,S){let B=v.length;if(B<=0)return"";let O=["\u0635\u0640\u0641\u0631","\u0648\u0627\u062d\u062f","\u0627\u062b\u0646\u0627\u0646","\u062b\u0644\u0627\u062b\u0629","\u0627\u0631\u0628\u0639\u0629","\u062e\u0645\u0633\u0629","\u0633\u062a\u0629","\u0633\u0628\u0639\u0629","\u062b\u0645\u0627\u0646\u064a\u0629","\u062a\u0633\u0639\u0629"],se=["","","\u0639\u0634\u0631\u0648\u0646","\u062b\u0644\u0627\u062b\u0648\u0646","\u0627\u0631\u0628\u0639\u0648\u0646","\u062e\u0645\u0633\u0648\u0646","\u0633\u062a\u0648\u0646","\u0633\u0628\u0639\u0648\u0646","\u062b\u0645\u0627\u0646\u0648\u0646","\u062a\u0633\u0639\u0648\u0646"],fe=["","\u0645\u0627\u0626\u0629","\u0645\u0626\u062a\u0627\u0646","\u062b\u0644\u0627\u062b\u0645\u0627\u0626\u0629","\u0627\u0631\u0628\u0639\u0645\u0627\u0626\u0629","\u062e\u0645\u0633\u0645\u0627\u0626\u0629","\u0633\u062a\u0645\u0627\u0626\u0629","\u0633\u0628\u0639\u0645\u0627\u0626\u0629","\u062b\u0645\u0627\u0646\u0645\u0627\u0626\u0629","\u062a\u0633\u0639\u0645\u0627\u0626\u0629"],_=" \u0648 ",K="",ee=0,U=0,ie=0,J="",Ce="";if(3==B){let Ee=v[0].toString(),Te=parseInt(Ee);Te>=0&&Te<=9&&(K=fe[Te]),J=v[2].toString(),U=parseInt(J),Ce=v[1].toString(),ee=parseInt(Ce);let Le=v.substr(1,2);ie=parseInt(Le)}else 2==B?(J=v[1].toString(),U=parseInt(J),Ce=v[0].toString(),ee=parseInt(Ce),ie=parseInt(v)):1==B&&(J=v[0].toString(),U=parseInt(J),ee=0,ie=parseInt(v));return ie<=0||(ie>0&&ie<=9?(""!=K&&(K+=_),(""==S||ie>1)&&(K+=O[ie])):ie>=10&&ie<=19?(""!=K&&(K+=_),K+=["\u0639\u0634\u0631\u0629","\u0623\u062d\u062f\u0649 \u0639\u0634\u0631\u0629","\u0623\u062b\u0646\u0649 \u0639\u0634\u0631\u0629","\u062b\u0644\u0627\u062b\u0629 \u0639\u0634\u0631\u0629","\u0627\u0631\u0628\u0639\u0629 \u0639\u0634\u0631\u0629","\u062e\u0645\u0633\u0629 \u0639\u0634\u0631\u0629","\u0633\u062a\u0629 \u0639\u0634\u0631\u0629","\u0633\u0628\u0639\u0629 \u0639\u0634\u0631\u0629","\u062b\u0645\u0627\u0646\u064a\u0629 \u0639\u0634\u0631\u0629","\u062a\u0633\u0639\u0629 \u0639\u0634\u0631\u0629"][ie-10]):((ee<0||ee>9)&&(ee=0),(U<0||U>9)&&(U=0),""!=K&&(K+=_),K+=ie%10==0?se[ee]:O[U]+_+se[ee])),K+S}static ConvertNumberAmericanFormatArabic(v){if(0==p.Double(v))return"Zero";let O=["","","","","",""],ae=0,se=(v=this.StringReverse(v)).length;if(se>18)return"Max Number Limit reached";let fe=0;for(;ae<se;){let U=ae+3;U>se?(U=se,O[fe]=v.substr(ae)):O[fe]=v.substr(ae,3),ae=U,fe++}let _=[""," \u0627\u0644\u0641 "," \u0645\u0644\u064a\u0648\u0646 "," \u0628\u0644\u064a\u0648\u0646 ","\u0628\u0644\u064a\u0648\u0646\u0627\u0646"],ee="";for(let U=fe-1;U>=0;--U)O[U]=this.StringReverse(O[U]),O[U]=this.ConvertNumberThreeDigitAmericanFormatArabic(O[U],_[U]),""!=ee&&""!=O[U]&&" "!=O[U]&&(ee+=" \u0648 "),ee+=O[U];return ee}static StringReverse(v){let S="";for(let B=v.length-1;B>=0;B--)S+=v[B].toString();return S}static EncodeXML(v){return p.IsEmpty(v)?"":v.Replace("&","&amp;").Replace("<","&lt;").Replace(">","&gt;").Replace('"',"&quot;")}static DecodeXML(v){return p.IsEmpty(v)||(v=(v=(v=(v=v.Replace("&amp;","&")).Replace("&quot;",'"')).Replace("&lt;","<")).Replace("&gt;",">")),v}static IsValidID(v){return v>0||v<-1e4}static hasprop(v,S){return Object.prototype.hasOwnProperty.call(v,S)}static GetAmountsBasedOnPref(v,S){let B=0;try{B=parseFloat(v)}catch{}return""!=S?(x.d.SessionManager.Preferences.ContainsKey("Commas"),B.ToString("N"+S)):(x.d.SessionManager.Preferences.ContainsKey("Commas"),B.toString())}static SetPayrollMonth(v,S=x.d.SessionManager,B=0){let O=0,ae=0;if(x.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==x.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&B>0&&null!=x.d.SessionManager.dtPayrollPreferences&&x.d.SessionManager.dtPayrollPreferences.Tables[0].length>0){let se=x.d.SessionManager.dtPayrollPreferences.Tables[0].filter(_=>"ProcessPayrollbeforeCalanderdays"==_.Name&&_.GradeID==B);null!=se&&se.length>0&&null!=se[0].Value&&null!=se[0].Value&&""!=se[0].Value.toString()&&(O=parseInt(se[0].Value)),se=x.d.SessionManager.dtPayrollPreferences.Tables[0].filter(_=>"PayDayStart"==_.Name&&_.GradeID==B),null!=se&&se.length>0&&(ae=parseInt(se[0].Value))}if(S.Preferences.ContainsKey("ProcessPayrollbeforeCalanderdays")&&""!=S.Preferences.ProcessPayrollbeforeCalanderdays&&parseInt(S.Preferences.ProcessPayrollbeforeCalanderdays)>0){let se;se=S.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==S.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&O>0?O:parseInt(S.Preferences.ProcessPayrollbeforeCalanderdays);let fe=new Date;if(S.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),fe=S.PayrollMonth.AddMonths(1).AddDays(-1),S.PayrollMonthStart=S.PayrollMonth.AddDays(-se),S.PayrollMonthEnd=fe.AddDays(-se),!(v>=S.PayrollMonthStart&&v<=S.PayrollMonthEnd)){let _=new Date;_=v.AddMonths(1),S.PayrollMonth=new Date(_.getFullYear(),_.getMonth(),1),fe=S.PayrollMonth.AddMonths(1).AddDays(-1),S.PayrollMonthStart=S.PayrollMonth.AddDays(-se),S.PayrollMonthEnd=fe.AddDays(-se)}}else if(x.d.SessionManager.Preferences.ContainsKey("PayDayStart")&&!p.IsEmpty(x.d.SessionManager.Preferences.PayDayStart)&&parseInt(x.d.SessionManager.Preferences.PayDayStart)>0){let se,fe;if(se=S.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==S.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&ae>0?ae:parseInt(S.Preferences.PayDayStart),v.getDay()<=se?S.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1):(fe=v.AddMonths(1),S.PayrollMonth=new Date(fe.getFullYear(),fe.getMonth(),1)),se<=15)fe=v,S.PayrollMonthStart=new Date(fe.getFullYear(),fe.getMonth(),se),S.PayrollMonthEnd=S.PayrollMonthStart.AddMonths(1).AddDays(-1);else{fe=v,fe.getDay()<se&&(fe=v.AddMonths(-1));let _=se;for(;;)try{S.PayrollMonthStart=new Date(fe.getFullYear(),fe.getMonth(),_);break}catch{_--}S.PayrollMonthEnd=S.PayrollMonthStart.AddMonths(1).AddDays(-1),_=new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth()).getDate(),se>=28&&(S.PayrollMonthEnd=_<se?new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),_-1):new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),se-1))}S.PayrollMonth=S.PayrollMonthStart.getMonth()==S.PayrollMonthEnd.getMonth()?new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),1):new Date(S.PayrollMonthStart.getFullYear(),S.PayrollMonthStart.getMonth()).getDate()-S.PayrollMonthStart.getDay()>=S.PayrollMonthEnd.getDay()?new Date(S.PayrollMonthStart.getFullYear(),S.PayrollMonthStart.getMonth(),1):new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),1),S.Preferences.ContainsKey("SetPayrollMonthToEndDateMonth")&&"TRUE"==S.Preferences.SetPayrollMonthToEndDateMonth.toUpperCase()&&(S.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),S.PayrollMonthStart=new Date(v.AddMonths(-1).getFullYear(),v.AddMonths(-1).getMonth(),se),S.PayrollMonthEnd=S.PayrollMonthStart.AddMonths(1).AddDays(-1)),S.dtPayrollYearFrom=new Date(S.PayrollMonth.getFullYear(),S.AccountingFromMonth-1,1),S.dtPayrollYearTo=new Date(S.dtPayrollYearFrom.AddYears(1).AddDays(-1).getFullYear(),S.dtPayrollYearFrom.AddYears(1).AddDays(-1).getMonth(),new Date(S.dtPayrollYearFrom.AddYears(1).AddDays(-1).getFullYear(),S.dtPayrollYearFrom.AddYears(1).AddDays(-1).getMonth()+1,0).getDate())}if(x.d.SessionManager.Preferences.ContainsKey("LatesPeriodStart")&&""!=x.d.SessionManager.Preferences.LatesPeriodStart&&parseInt(x.d.SessionManager.Preferences.LatesPeriodStart)>0){let se=parseInt(x.d.SessionManager.Preferences.LatesPeriodStart);if(x.d.SessionManager.Preferences.ContainsKey("LoadLatesROAmonthsbeforetoPayrollMonth")&&""!=x.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth&&parseInt(x.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth)>0){let fe=parseInt(x.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth);x.d.SessionManager.LatesMonth=x.d.SessionManager.PayrollMonth.AddMonths(-fe),se!=x.d.SessionManager.PayrollMonthStart.getDay()?(x.d.SessionManager.LatesMonthStart=new Date(x.d.SessionManager.LatesMonth.getFullYear(),x.d.SessionManager.LatesMonth.getMonth(),se),x.d.SessionManager.LatesMonthStart=x.d.SessionManager.LatesMonthStart.AddMonths(-1),x.d.SessionManager.LatesMonthEnd=x.d.SessionManager.LatesMonthStart.AddMonths(1).AddDays(-1)):(x.d.SessionManager.LatesMonthStart=x.d.SessionManager.PayrollMonthStart.AddMonths(-fe),x.d.SessionManager.LatesMonthEnd=x.d.SessionManager.LatesMonthStart.AddMonths(1).AddDays(-1))}else x.d.SessionManager.LatesMonth=x.d.SessionManager.PayrollMonth,x.d.SessionManager.LatesMonthStart=x.d.SessionManager.PayrollMonthStart,x.d.SessionManager.LatesMonthEnd=x.d.SessionManager.PayrollMonthEnd,se!=x.d.SessionManager.PayrollMonthStart.getDay()&&(x.d.SessionManager.LatesMonthStart=new Date(x.d.SessionManager.PayrollMonth.getFullYear(),S.PayrollMonth.getMonth(),se),x.d.SessionManager.LatesMonthStart=x.d.SessionManager.LatesMonthStart.AddMonths(-1),x.d.SessionManager.LatesMonthEnd=x.d.SessionManager.LatesMonthStart.AddMonths(1).AddDays(-1))}}static SetPayrollDate(v,S,B){let O=0,ae=0;if(x.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==x.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&B>0&&null!=x.d.SessionManager.dtPayrollPreferences&&x.d.SessionManager.dtPayrollPreferences.length>0){let se=x.d.SessionManager.dtPayrollPreferences.Tables[0].filter(_=>"ProcessPayrollbeforeCalanderdays"==_.Name&&_.GradeID==B);null!=se&&se.length>0&&null!=se[0].Value&&null!=se[0].Value&&""!=se[0].Value.toString()&&(O=parseInt(se[0].Value)),se=x.d.SessionManager.dtPayrollPreferences.Tables[0].filter(_=>"PayDayStart"==_.Name&&_.GradeID==B),null!=se&&se.length>0&&(ae=parseInt(se[0].Value))}if(x.d.SessionManager.Preferences.ContainsKey("ProcessPayrollbeforeCalanderdays")&&""!=x.d.SessionManager.Preferences.ProcessPayrollbeforeCalanderdays&&parseInt(x.d.SessionManager.Preferences.ProcessPayrollbeforeCalanderdays)>0){let se;se=x.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==x.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&O>0?O:parseInt(x.d.SessionManager.Preferences.ProcessPayrollbeforeCalanderdays);let fe=new Date;if(S.LatesMonth=new Date,S.LatesMonthStart=new Date,S.LatesMonthEnd=new Date,S.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),fe=S.PayrollMonth.AddMonths(1).AddDays(-1),S.PayrollMonthStart=S.PayrollMonth.AddDays(-se),S.PayrollMonthEnd=fe.AddDays(-se),!(v>=S.PayrollMonthStart&&v<=S.PayrollMonthEnd)){let _=new Date;_=v.AddMonths(1),S.PayrollMonth=new Date(_.getFullYear(),_.getMonth(),1),fe=S.PayrollMonth.AddMonths(1).AddDays(-1),S.PayrollMonthStart=S.PayrollMonth.AddDays(-se),S.PayrollMonthEnd=fe.AddDays(-se)}}else{let fe,se=new Date;if(fe=x.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==x.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&ae>0?ae:parseInt(x.d.SessionManager.Preferences.PayDayStart),v.getDate()<=fe?S.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1):(se=v.AddMonths(1),S.PayrollMonth=new Date(se.getFullYear(),se.getMonth(),1)),fe<=15)se=v,S.PayrollMonthStart=new Date(se.getFullYear(),se.getMonth(),fe),S.PayrollMonthEnd=S.PayrollMonthStart.AddMonths(1).AddDays(-1);else{se=v;let _=v.DaysInMonth();se.getDate()<fe&&se.getDate()!=_&&(se=v.AddMonths(-1));let K=fe;for(;;)try{S.PayrollMonthStart=new Date(se.getFullYear(),se.getMonth(),K);break}catch{K--}S.PayrollMonthEnd=S.PayrollMonthStart.AddMonths(1).AddDays(-1),K=S.PayrollMonthEnd.DaysInMonth(),fe>=28&&(S.PayrollMonthEnd=K<fe?new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),K-1):new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),fe-1))}S.PayrollMonth=S.PayrollMonthStart.getMonth()==S.PayrollMonthEnd.getMonth()?new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),1):S.PayrollMonthStart.DaysInMonth()-S.PayrollMonthStart.getDate()>=S.PayrollMonthEnd.getDate()?new Date(S.PayrollMonthStart.getFullYear(),S.PayrollMonthStart.getMonth(),1):new Date(S.PayrollMonthEnd.getFullYear(),S.PayrollMonthEnd.getMonth(),1),"TRUE"==x.d.SessionManager.Preferences.SetPayrollMonthToEndDateMonth.toUpperCase()&&(S.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),S.PayrollMonthStart=new Date(v.AddMonths(-1).getFullYear(),v.AddMonths(-1).getMonth(),fe),S.PayrollMonthEnd=S.PayrollMonthStart.AddMonths(1).AddDays(-1))}if(x.d.SessionManager.Preferences.ContainsKey("LatesPeriodStart")&&""!=x.d.SessionManager.Preferences.LatesPeriodStart&&parseInt(x.d.SessionManager.Preferences.LatesPeriodStart)>0){let se=parseInt(x.d.SessionManager.Preferences.LatesPeriodStart);if(x.d.SessionManager.Preferences.ContainsKey("LoadLatesROAmonthsbeforetoPayrollMonth")&&""!=x.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth&&parseInt(x.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth)>0){let fe=parseInt(x.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth);S.LatesMonth=S.PayrollMonth.AddMonths(-fe),se!=S.PayrollMonthStart.getDate()?(S.LatesMonthStart=new Date(S.LatesMonth.getFullYear(),S.LatesMonth.getMonth(),se),S.LatesMonthStart=S.LatesMonthStart.AddMonths(-1),S.LatesMonthEnd=S.LatesMonthStart.AddMonths(1).AddDays(-1)):(S.LatesMonthStart=S.PayrollMonthStart.AddMonths(-fe),S.LatesMonthEnd=S.LatesMonthStart.AddMonths(1).AddDays(-1))}else S.LatesMonth=S.PayrollMonth,S.LatesMonthStart=S.PayrollMonthStart,S.LatesMonthEnd=S.PayrollMonthEnd,se!=S.PayrollMonthStart.getDate()&&(S.LatesMonthStart=new Date(S.PayrollMonth.getFullYear(),S.PayrollMonth.getMonth(),se),S.LatesMonthStart=S.LatesMonthStart.AddMonths(-1),S.LatesMonthEnd=S.LatesMonthStart.AddMonths(1).AddDays(-1))}}static SetPayrollDate_1(v,S,B=0){this.SetPayrollDate(v,S,B)}static CheckIsWeeklyOffFromDef(v,S,B,O){if(null!=O&&O.length>0){let fe,ae=1,se=S;for(;se<=B;){for(fe=se.AddDays(6);se<=fe&&se<=B;){if(p.IsEmpty(O[0]["Week"+ae.toString()+"_W1"].toString())||se.getDayName().toString().toLowerCase()!=O[0]["Week"+ae.toString()+"_W1"].toString().toLowerCase()){if(!p.IsEmpty(O[0]["Week"+ae.toString()+"_W2"].toString())&&se.getDayName().toString().toLowerCase()==O[0]["Week"+ae.toString()+"_W2"].toString().toLowerCase()&&se.ToString("dd MMM yyyy")==v.ToString("dd MMM yyyy"))return!0}else if(se.ToString("dd MMM yyyy")==v.ToString("dd MMM yyyy"))return!0;se=se.AddDays(1)}ae++}}return!1}static GetPayrollStructureBasedonEmployee(v,S){let B,O,ae,se={PayrollMonth:B,PayrollMonthStart:O,PayrollMonthEnd:ae};if(p.SetPayrollDate_1(S,se),B=se.PayrollMonth,O=se.PayrollMonthStart,ae=se.PayrollMonthEnd,x.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==x.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade){let ee=0;if(ee=this.GetEmployeeGrade(v.toString(),B,O,ae),ee>0){let U={PayrollMonth:B,PayrollMonthStart:O,PayrollMonthEnd:ae};p.SetPayrollDate(S,U,ee),B=U.PayrollMonth,O=U.PayrollMonthStart,ae=U.PayrollMonthEnd}}let fe=B.ToString("dd MMM yyyy"),_=O.ToString("dd MMM yyyy"),K=ae.ToString("dd MMM yyyy");return x.d.common.GetDataSet3("PAY049",v.toString(),fe,_+","+K)}static GetEmployeeGrade(v,S,B,O){let ae=x.d.common.GetDataSet3("PAY128",v.toString(),S.ToString("dd MMM yyyy")),se=0;if(null!=ae&&ae.Tables.length>0&&ae.Tables[0].length>0){let fe=ae.Tables[0].filter(_=>_.EmpSeqNo==v.toString());null!=fe&&fe.length>0&&(se=parseInt(fe[0].GradeID))}return se}static _orderByComparator(v,S,B="string"){if(isNaN(parseFloat(v))||!isFinite(v)||isNaN(parseFloat(S))||!isFinite(S)){if(v.toLowerCase()<S.toLowerCase())return-1;if(v.toLowerCase()>S.toLowerCase())return 1}else{if(parseFloat(v)<parseFloat(S))return-1;if(parseFloat(v)>parseFloat(S))return 1}return 0}static OnSort(v,S){if(console.log("calling pipe"),!Array.isArray(v))return v;if(!Array.isArray(S)||Array.isArray(S)&&1==S.length){var B=Array.isArray(S)?S[0]:S,O="-"==B.substr(0,1);if(!B||"-"==B||"+"==B)return O?v.sort().reverse():v.sort();var ae="+"==B.substr(0,1)||"-"==B.substr(0,1)?B.substr(1):B;return v.sort(function(se,fe){return O?-this._orderByComparator(se[ae],fe[ae]):this._orderByComparator(se[ae],fe[ae])})}return v.sort(function(se,fe){for(var _=0;_<S.length;_++){var ee=S[_].name,U="string",ie=S[_].desc?-this._orderByComparator(se[ee],fe[ee],U):this._orderByComparator(se[ee],fe[ee],U);if(0!=ie)return ie}})}static SetPersonalize(v,S,B=parseInt(x.d.SessionManager.CompanyIndex)){let O="PactRevPersonalSettings_"+B;0!=B&&(O+="_"+x.d.SessionManager.UserName);let ae=JSON.parse(localStorage.getItem(O));ae||(ae={}),ae[v]=S,localStorage.setItem(O,JSON.stringify(ae)),x.d.SessionManager.PersonalSettings.ContainsKey(v)?x.d.SessionManager.PersonalSettings[v]=S:x.d.SessionManager.PersonalSettings.Add(v,S)}static UpdatePersonalize(v){x.d.SessionManager.PersonalSettings.Clear();let S="PactRevPersonalSettings_0",B=localStorage.getItem(S),O=B?JSON.parse(B):{};if(O||(O={}),localStorage.setItem(S,JSON.stringify(O)),Object.keys(O).forEach(ae=>{x.d.SessionManager.PersonalSettings.Add(ae,O[ae])}),0!=v){let ae="PactRevPersonalSettings_"+v+"_"+x.d.SessionManager.UserName,se=localStorage.getItem(ae),fe=se?JSON.parse(se):{};fe||(fe={}),localStorage.setItem(ae,JSON.stringify(fe)),Object.keys(fe).forEach(_=>{x.d.SessionManager.PersonalSettings.Add(_,fe[_])})}}static GetEmptyDate(){let v=new Date;return v.setHours(0,0,0,0),v.setMonth(0),v.setDate(1),v.setFullYear(1),v}static DTComputeSUM(v,S,B){let O=0,ae=v;if(B){let se=this.GetEmptyDate(),fe=0;for(let K=0;K<ae.length;K++){let ee=p.Double(ae[K][S]).ToString("00.00").split(".");se=se.AddHours(p.Double(ee[0])),ee.length>1&&(1==ee[1].length&&(ee[1]=ee[1]+"0"),se=se.AddMinutes(p.Double(ee[1])))}let _=se.getMinutes().toString();return 1==_.length&&(_="0"+_),fe=p.Double(24*(se.getDate()-1)+se.getHours()+"."+_),fe}for(let se=0;se<ae.length;se++)p.IsEmpty(ae[se][S])||(O+=p.Double(ae[se][S]));return O}static SUMHoursAndMinutes(v,S){let B=p.GetEmptyDate(),O=0,ae=p.Double(v).ToTime("00.00").split(".");B=B.AddHours(p.Double(ae[0])),ae.length>1&&(1==ae[1].length&&(ae[1]=ae[1]+"0"),B=B.AddMinutes(p.Double(ae[1]))),ae=p.Double(S).ToTime("00.00").split("."),B=B.AddHours(p.Double(ae[0])),ae.length>1&&(1==ae[1].length&&(ae[1]=ae[1]+"0"),B=B.AddMinutes(p.Double(ae[1])));let se=B.getMinutes().toString();return 1==se.length&&(se="0"+se),O=p.Double(24*(B.getDate()-1)+B.getHours()+"."+se),O}static GetYearsMonthsDays1(v,S,B){for(B.iY=0,B.iM=0,B.iD=0,S=S.AddDays(1);;){if(!((v=v.AddYears(1))<=S)){v=v.AddYears(-1);break}B.iY++}for(;;){if(!((v=v.AddMonths(1))<=S)){v=v.AddMonths(-1);break}B.iM++}B.Days=S.Subtract(v).Days}static GetYearsMonthsDays(v,S,B){let O,se,fe;v>(S=S.AddDays(1))?(se=S,fe=v):(se=v,fe=S),O=0,se.getDate()>fe.getDate()&&(O=[31,-1,31,30,31,30,31,31,30,31,30,31][se.getMonth()+1-1]),-1==O&&(O=se.IsLeapYear()?29:28),0!=O?(B.iD=fe.getDate()+O-se.getDate(),O=1):B.iD=fe.getDate()-se.getDate(),se.getMonth()+O>fe.getMonth()?(B.iM=fe.getMonth()+12-(se.getMonth()+O),O=1):(B.iM=fe.getMonth()-(se.getMonth()+O),O=0),B.iY=fe.getFullYear()-(se.getFullYear()+O)}static StringFormat(v,...S){return v.replace(/{(\d+)}/g,(B,O)=>S[O]||"")}static NumArray(v,S){return new Array(v).fill(0).map(()=>new Array(S).fill(0))}static Array(v,S){return new Array(v).fill(null).map(()=>new Array(S).fill(null))}static IntTryParse(v){var S=0;return null==v||null==v||""===v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),S=isNaN(v)?0:parseInt(v)),S}static Int(v){var S=0;return null==v||null==v||""===v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),S=isNaN(v)?0:parseInt(v)),S}static IsNum(v){return null!=v&&null!=v&&""!==v&&(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),isFinite(v))}static DoubleTryParse(v){var S=0;return null==v||null==v||""===v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),S=isNaN(v)?0:parseFloat(v)),S}static Double(v){var S=0;return null==v||null==v||""==v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),S=isNaN(v)?0:parseFloat(v)),S}static DoubleBool(v){var S=!1;return null==v||null==v||""==v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),isNaN(v)?S=!1:(parseFloat(v),S=!0)),S}static Round(v,S){return parseFloat(v.ToString("N"+S))}static StringIsNullOrEmpty(v){return null===v||""===v||void 0===v}static copyToClipboard(v){const S=document.createElement("input");S.value=v,document.body.appendChild(S),S.select(),document.execCommand("copy"),document.body.removeChild(S)}static IsEmpty(v){return null===v||""===v||void 0===v}static GetFileType(v){return["mp4","avi","mov","webm","wmv","flv","gv","mp3","mkv","mpeg-2","mpeg-4","ogg","f4v","avchd","swf"].includes(v.toLowerCase())?"V":["jpg","jpeg","png","gif","bmp","tiff","tif","svg","webp","heic","dng"].includes(v.toLowerCase())?"F":"0"}static convertTime12to24(v){var S=Number(v.match(/^(\d+)/)[1]),B=Number(v.match(/:(\d+)/)[1]),O=v.match(/\s(.*)$/)[1];"PM"==O&&S<12&&(S+=12),"AM"==O&&12===S&&(S-=12);var ae=S.toString(),se=B.toString();return S<10&&(ae="0"+ae),B<10&&(se="0"+se),ae+":"+se}static ParseDate(v){if(p.IsEmpty(v)&&(v=""),v instanceof Date)return v;!x.d.IsAndroid&&x.d.IsNativeMobile&&(v=v.ToString().Replace("/","-"));let S=new Date(v),B=!1;return"number"==typeof v||(isNaN(Date.parse(v))&&(S=new Date(v.Replace("/","-")),isNaN(Date.parse(v.Replace("/","-")))&&(B=!1)),"Invalid Date"!=S.toString()&&(B=!0),B||(v.Contains("AM")?v=v.Replace("AM"," AM"):v.Contains("PM")&&(v=v.Replace("PM"," PM")),S=new Date(v),"Invalid Date"!=S.toString()&&(B=!0))),S}static parseFlexibleDate(v){if(!v)return null;const S=(v=v.trim()).match(/^(\d{1,2}):(\d{2})$/);if(S){const B=new Date;return B.setHours(parseInt(S[1])),B.setMinutes(parseInt(S[2])),B.setSeconds(0),B}return this.ParseDate(v)}static IsNullOrWhiteSpace(v){return null===v||""===v||void 0===v||""==v.toString().trim()}static IsEmptySpace(v){return null===v||""===v||void 0===v||""==v.trim()}static StringValue(v){return null===v||""===v||void 0===v?"":v.toString()}static decryptUsingAES(v){const S=E.AES.decrypt(v,this.key,{iv:this.iv,mode:E.mode.CBC,padding:E.pad.Pkcs7});return JSON.parse(S.toString(E.enc.Utf8))}static String(v){return null===v||""===v||void 0===v?"":v.toString()}static IntegerValue(v){return null===v||""===v||void 0===v?0:v}static LowerCase(v){return null===v||""===v||void 0===v?"":v.toString().toLowerCase()}static Format(v,...S){if(null===v||""===v||void 0===v)return"";for(let B=0;B<S.length;B++)v=v.replace("{"+B+"}",S[B]);return v}static SetComboFilter(v,S,B){return v.startsWith("PARENTID",0)?B=B.filter(O=>O.PARENTID==S):v.startsWith("CostCenterID",0)?B=B.filter(O=>O.CostCenterID==S):v.startsWith("ServiceTypeID",0)&&(B=B.filter(O=>O.ServiceTypeID==S)),B}static stringCompare(v,S,B=!1){return v==S||B&&v.toLowerCase()==S.toLowerCase()?0:-1}static IsDigit(v){return/^[0-9]$/.test(v)}static rgbColor(v){return null!=v&&null!=v&&9==v.length&&v.startsWith("#")&&(v="#00FFFFFF"==v?"#FFFFFF00":"#"+v.substr(3)),v}ValidateInt(v){try{let S=Number(v);return!Number.isNaN(S)}catch{return!1}}ValidateLong(v){try{let S=Number(v);return!Number.isNaN(S)}catch{return!1}}ValidateDecimal(v){try{let S=parseFloat(v);return 0===S||S>0||S<0}catch{return!1}}static GetXamlText(v){if(null==v)return"";let S="";if(v.startsWith("<FlowDocument")){v=v.replace('xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"',"");let B=new I;B.LoadXml(v);let O=B.SelectNodes("FlowDocument/Paragraph");if(null!=B.DocumentElement.ColumnGap&&"1"==B.DocumentElement.ColumnGap.Value)S="[Image]";else if(0==O.length){O=B.SelectNodes("FlowDocument/List/ListItem");for(let ae=0;ae<O.length;ae++)S+=O[ae].textContent}else for(let ae=0;ae<O.length;ae++)S+=O[ae].textContent}else S=v;return S}static IsValidEmailAddress(v){return!1}static ValidateDouble(v){try{let S=parseFloat(v);return 0===S||S>0||S<0}catch{return!1}}static ValidateInt(v){try{let S=parseInt(v);return 0===S||S>0||S<0}catch{return!1}}static isValidDate(v){let S=!1;if(""!==v&&null!=v&&0!=v&&1!=v&&"1"!==v){let B=p.ParseDate(v);isNaN(Date.parse(v))&&(B=p.ParseDate(v.Replace("/","-")),isNaN(Date.parse(v.Replace("/","-")))&&(S=!1)),"Invalid Date"!==B.toString()&&(S=!0),S||(v.Contains("AM")?v=v.Replace("AM"," AM"):v.Contains("PM")&&(v=v.Replace("PM"," PM")),"Invalid Date"!==p.ParseDate(v).toString()&&(S=!0))}return S}static isDateOrNum(v){if(""!==v&&null!=v&&0!=v){if(v.toString()==parseFloat(v).toString())return!1;let B=p.ParseDate(v);return B&&"NaN"!=B.toString()&&"Invalid Date"!==B.toString()}return!1}static DaysInMonth(v,S){return new Date(v,S+1,0).getDate()}static GetSignatureImagePath(v){let S="";try{let B=null,O=null;x.d.SessionManager.Preferences.ContainsKey("DigitalSignGridData")&&""!=x.d.SessionManager.Preferences.DigitalSignGridData&&x.d.SessionManager.Preferences.DigitalSignGridData.length>0&&(B=[],B.ReadXml(x.d.SessionManager.Preferences.DigitalSignGridData),null!=B&&B.Tables[0].length>0&&(O=B.Tables[0].finc(ae=>ae.Name==v),null!=O&&O.length>0&&null!=O[0].ActualFileName&&null!=O[0].ActualFileName&&""!=O[0].ActualFileName.toString()&&(S=b.GetLogPath(O[0].FileName.toString()))))}catch(B){Logger.ErrorLog("EXCEPTION :  Util : GetSignatureImagePath().. While adding Graphic to the Digital Signature.\r\n"+B)}return S}static GetGlobalPrefFilePath(v,S){let B="";return B=x.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"==x.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath?x.d.SessionManager.Preferences["File Upload Path"]:"",""}static GetNoOfDays_1(v,S,B,O,ae,se){let ee,fe=0,_=0,K=0,U=S;if(fe=this.GetDateDifference(B,S)+1,!O)return fe;{let ie=v.Tables[0],J=v.Tables[1],Ce=x.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),Y=" 1=1 ",Ee="",Te="";if(null!=Ce&&Ce.length>0)for(let Le=0;Le<Ce.length;Le++)null!=Ce[Le]&&""!=Ce[Le]&&(Te+="dcCCNID"+(parseInt(Ce[Le])-5e4)+",",Ee="dcCCNID"+(parseInt(Ce[Le])-5e4),Y+=" AND ( "+Ee+"="+ae[Ee+"_Key"]+" OR "+Ee+"= 1)");if(U=S,ie=Y,null!=ie&&ie.length>0)for(;U<=B;)this.CheckIsWeeklyOffFromDef_2(U,ie)&&_++,U=U.AddDays(1);if(Ce=x.d.SessionManager.Preferences.HolidaysBasedOn.split(","),Y=" 1=1 ",Ee="",Te="",null!=Ce&&Ce.length>0)for(let Le=0;Le<Ce.length;Le++)null!=Ce[Le]&&""!=Ce[Le]&&(Te+="dcCCNID"+(parseInt(Ce[Le])-5e4)+",",Ee="dcCCNID"+(parseInt(Ce[Le])-5e4),Y+=" AND ( "+Ee+"="+ae[Ee+"_Key"]+" OR "+Ee+"= 1)");for(U=S;U<=B;)ee=J.find(Le=>Le.HolidayDate==U.ToString("dd/MMM/yyyy")&&Y),null!=ee&&ee.length>0&&K++,U=U.AddDays(1)}return fe-(_+K)}static GetNoOfDays(v,S,B,O,ae,se,fe,_=!1,K=!1){let Ce,Y,ee=10,U=0,ie=18,J=0;if(x.d.SessionManager.Preferences.ContainsKey("PMStartTime")&&""!=x.d.SessionManager.Preferences.PMStartTime&&x.d.SessionManager.Preferences.ContainsKey("PMEndTime")&&""!=x.d.SessionManager.Preferences.PMEndTime){let ke=p.ParseDate("01 Jan 2022 "+x.d.SessionManager.Preferences.PMStartTime),Be=p.ParseDate("01 Jan 2022 "+x.d.SessionManager.Preferences.PMEndTime);ee=ke.getHours(),U=ke.getMinutes(),ie=Be.getHours(),J=Be.getMinutes()}if(K){let ke=p.GetDateDifference(B,S)+1;Ce=new Date(S.getFullYear(),S.iMonth(),S.getDay(),ee,U,0),Y=new Date(S.getFullYear(),S.iMonth(),S.getDay(),ie,J,0),ae.dcAlpha30=parseFloat(Y.Subtract(Ce).Hours+"."+(1==Y.Subtract(Ce).Minutes.toString().length?"0"+Y.Subtract(Ce).Minutes.toString():Y.Subtract(Ce).Minutes.toString())),ae.dcAlpha17=ke.ToString(),ae.dcAlpha31=ke*parseFloat(Y.Subtract(Ce).Hours+"."+(1==Y.Subtract(Ce).Minutes.toString().length?"0"+Y.Subtract(Ce).Minutes.toString():Y.Subtract(Ce).Minutes.toString())),0==S.getHours()&&0==S.getMinutes()&&0==B.getHours()&&0==B.getMinutes()||(ee=S.getHours(),U=S.getMinutes(),ie=B.getHours(),J=B.getMinutes())}Ce=new Date(S.getFullYear(),S.iMonth(),S.getDay(),ee,U,0),Y=new Date(S.getFullYear(),S.iMonth(),S.getDay(),ie,J,0),fe.odWHrs=0,fe.odHrsPerDay=parseFloat(Y.Subtract(Ce).Hours+"."+(1==Y.Subtract(Ce).Minutes.toString().length?"0"+Y.Subtract(Ce).Minutes.toString():Y.Subtract(Ce).Minutes.toString()));let tt,Ee=0,Te=0,Le=0,Ue=S;if(Ee=this.GetDateDifference(B,S)+1,!O){for(;Ue.Date()<=B.Date();)Ce=new Date(Ue.getFullYear(),Ue.iMonth(),Ue.getDay(),ee,U,0),Y=new Date(Ue.getFullYear(),Ue.iMonth(),Ue.getDay(),ie,J,0),S.Date()==Ue.Date()&&B.Date()==Ue.Date()?fe.odWHrs+=parseFloat(B.Subtract(S).Hours+"."+(1==B.Subtract(S).Minutes.toString().length?"0"+B.Subtract(S).Minutes.toString():B.Subtract(S).Minutes.toString())):S.Date()==Ue.Date()?fe.odWHrs+=parseFloat(Y.Subtract(S).Hours+"."+(1==Y.Subtract(S).Minutes.toString().length?"0"+Y.Subtract(S).Minutes.toString():Y.Subtract(S).Minutes.toString())):Y.Date()==B.Date()?fe.odWHrs+=parseFloat(B.Subtract(Ce).Hours+"."+(1==B.Subtract(Ce).Minutes.toString().length?"0"+B.Subtract(Ce).Minutes.toString():B.Subtract(Ce).Minutes.toString())):fe.odWHrs+=parseFloat(Y.Subtract(Ce).Hours+"."+(1==Y.Subtract(Ce).Minutes.toString().length?"0"+Y.Subtract(Ce).Minutes.toString():Y.Subtract(Ce).Minutes.toString())),Ue=Ue.AddDays(1);return Ee}{let ke=v.Tables[0],Be=v.Tables[1],xe=x.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),ve=" 1=1 ",A="",Se="";if(null!=xe&&xe.length>0)for(let Re=0;Re<xe.length;Re++)null!=xe[Re]&&""!=xe[Re]&&(Se+="dcCCNID"+(parseInt(xe[Re])-5e4)+",",A="dcCCNID"+(parseInt(xe[Re])-5e4),ke=ke.filter(_?be=>be[A]==ae[A]||1==be[A]:be=>be[A]==ae[A+"_Key"]||1==be[A]));if(xe=x.d.SessionManager.Preferences.HolidaysBasedOn.split(","),ve=" 1=1 ",A="",Se="",null!=xe&&xe.length>0)for(let Re=0;Re<xe.length;Re++)null!=xe[Re]&&""!=xe[Re]&&(Se+="dcCCNID"+(parseInt(xe[Re])-5e4)+",",A="dcCCNID"+(parseInt(xe[Re])-5e4),Be=Be.filter(_?be=>be[A]==ae[A]||1==be[A]:be=>be[A]==ae[A+"_Key"]||1==be[A]));for(;Ue.Date()<=B.Date();)Ce=new Date(Ue.getFullYear(),Ue.iMonth(),Ue.getDay(),ee,U,0),Y=new Date(Ue.getFullYear(),Ue.iMonth(),Ue.getDay(),ie,J,0),tt=Be.filter(Re=>Re.HolidayDate==Ue.Date().ToString("dd/MMM/yyyy")),null!=tt&&tt.length>0?Le++:this.CheckIsWeeklyOffFromDef_2(Ue.Date(),ke)?Te++:S.Date()==Ue.Date()&&B.Date()==Ue.Date()?fe.odWHrs+=parseFloat(B.Subtract(S).Hours+"."+(1==B.Subtract(S).Minutes.toString().length?"0"+B.Subtract(S).Minutes.toString():B.Subtract(S).Minutes.toString())):S.Date()==Ue.Date()?fe.odWHrs+=parseFloat(Y.Subtract(S).Hours+"."+(1==Y.Subtract(S).Minutes.toString().length?"0"+Y.Subtract(S).Minutes.toString():Y.Subtract(S).Minutes.toString())):Y.Date()==B.Date()?fe.odWHrs+=parseFloat(B.Subtract(Ce).Hours+"."+(1==B.Subtract(Ce).Minutes.toString().length?"0"+B.Subtract(Ce).Minutes.toString():B.Subtract(Ce).Minutes.toString())):fe.odWHrs+=parseFloat(Y.Subtract(Ce).Hours+"."+(1==Y.Subtract(Ce).Minutes.toString().length?"0"+Y.Subtract(Ce).Minutes.toString():Y.Subtract(Ce).Minutes.toString())),Ue=Ue.AddDays(1)}return Ee-(Te+Le)}static CheckImageSize(v,S,B){let O="";try{let ae=0,se=0;x.d.SessionManager.IsWebApplication&&v.length>0&&(ae=S/1048576,"V"!=B&&x.d.SessionManager.Preferences.ContainsKey("AttachmentMaxSize")&&""!=x.d.SessionManager.Preferences.AttachmentMaxSize?(se=p.IntTryParse(x.d.SessionManager.Preferences.AttachmentMaxSize.toString()),se>0&&parseInt(ae.toString())>se&&(O="Image size should be less than "+se.toString()+" MB")):"V"==B&&x.d.SessionManager.Preferences.ContainsKey("VideoAttachmentMaxSize")&&""!=x.d.SessionManager.Preferences.VideoAttachmentMaxSize&&(se=p.IntTryParse(x.d.SessionManager.Preferences.VideoAttachmentMaxSize.toString()),se>0&&parseInt(ae.toString())>se&&(O="Video size should be less than "+se.toString()+" MB")))}catch{}return O}static CheckIsWeeklyOffFromDef_2(v,S){if(null!=S&&S.length>0){let fe,B=1,O=new Date(v.getFullYear(),v.getMonth(),1),ae=new Date(v.getFullYear(),v.getMonth(),v.DaysInMonth()),se=O;for(;se<=ae;){for(fe=se.AddDays(6);se<=fe&&se<=ae;){if(p.hasprop(S,"Week"+B.toString()+"_W1")&&!p.IsEmpty(S[0]["Week"+B.toString()+"_W1"].toString())&&se.getDay().toString().toLowerCase()==S[0]["Week"+B.toString()+"_W1"].toString().toLowerCase()){if(se.Date==v.Date)return!0}else if(p.hasprop(S,"Week"+B.toString()+"_W2")&&!p.IsEmpty(S[0]["Week"+B.toString()+"_W2"].toString())&&se.getDay().toString().toLowerCase()==S[0]["Week"+B.toString()+"_W2"].toString().toLowerCase()&&se.Date==v.Date)return!0;se=se.AddDays(1)}B++}}return!1}static GetDateDifference(v,S){let B=this.diffparseDate(v),O=this.diffparseDate(S);var ae=Math.abs(B-O);return Math.round(ae/864e5)}static GetTimeSpan(v,S){let B=this.diffparseDate(v),O=this.diffparseDate(S);return Math.round((B-O)/864e5)}static addMonths(v,S){const B=new Date(v),O=B.getMonth();return B.setMonth(O+S),B.getMonth()!==(O+S)%12&&B.setDate(0),B}static OnUploadAttachment(v,S){let O="",fe=v.target.files[0],_=v.target.files[0].name.split("."),K=v.target.files[0].name;_.length>1&&(_=_[_.length-1]),p.IsEmpty(_)||(O=p.GetFileType(_));let ee=p.CheckImageSize(v.target.value,v.target.files[0].size,O);if(""!=ee)return void alert(ee);let U=new FormData;U.append("ImageUpload",fe),U.append("FileUpload",fe),U.append("UserName",x.d.SessionManager.UserID),U.append("FolderPath",p.String(S.FolderPath));const ie=new FileReader;ie.onload=J=>{const Ce=new Image;if("pdf"==_||"txt"==_||"doc"==_||"csv"==_||"docx"==_||"doc"==_||"xls"==_||"xlsx"==_)return S.DisplayMessage=x.d.GetResource("File_NoPhoto"),void(S.MessageVisibility=!0);Ce.src=J.target.result,Ce.onload=Y=>{let Ee=J.target.result;v.srcElement.value="",p.IsEmpty(Ee)||setTimeout(()=>{x.d.common.UploadAttachments(U).subscribe(Te=>{let Le=Te;"Error In File Save"==Le&&alert(Le),"AddEditAccountViewModel"==S.ClassName?S.AccountPhoto=p.GetPath(Le,p.String(S.FolderPath)):"AddEditAccountViewModel"==S.ClassName&&(S.ProductPhoto=p.GetPath(Le,p.String(S.FolderPath))),S.ActualFileName=K,S.FileExtension=_,S.IsPhotoChanged=!0,S.PhotoTextVisibility=!1,S.DisplayMessage="",S.MessageVisibility=!1},Te=>{console.log("Error : "+JSON.stringify(Te))})},100)}},ie.readAsDataURL(fe)}static GetDatesTotalMinutes(v,S){return Math.floor((v.getTime()-S.getTime())/1e3/60)}static GetDatesTotalSeconds(v,S){return Math.floor((v.getTime()-S.getTime())/1e3)}static diffparseDate(v){if("dd/MM/yyyy"==x.d.SessionManager.Preferences["Date Format"]){if(!this.StringIsNullOrEmpty(v)&&v.toString().Contains("/")){var O=v.split("/");return p.ParseDate(O[1]+"/"+O[0]+"/"+O[2])}return p.ParseDate(v)}return p.ParseDate(v)}static IsLeapYear(v){try{return v%4==0&&v%100!=0||v%400==0}catch{return!1}}static GeoLocation(){var v=this;return(0,C.A)(function*(){const S=yield X.L.getCurrentPosition();return yield v.GetUsersCurrentAddress(S)})()}static DataUrlToFile(v,S){return(0,C.A)(function*(){const O=yield(yield fetch(v)).blob();return new File([O],S,{type:"image/png"})})()}static UserCurrentLocation(){return(0,C.A)(function*(){try{console.log("UserCurrentLocation:begin");const v=yield X.L.getCurrentPosition();return console.log("UserCurrentLocation end: "+v),v}catch{return""}})()}static GetUsersCurrentAddress(v){return(0,C.A)(function*(){try{console.log("GetUsersCurrentAddress:In");let S=x.d.SessionManager.GOLOC_APIURL+v.coords.latitude+"+"+v.coords.longitude+"&key="+x.d.SessionManager.GOLOC_APIKey;return console.log("Url Opencage Data:"+S),yield x.d.common.GetGeoLocation(S)}catch{return""}})()}static GetGeoLocation(v){return x.d.common.GetGeoLocation(v).promise()}static IsType(v,S){return null!=v&&null!=v&&("AddEditDocumentViewModel"==v.ClassName||"PopupAttachmentsViewModel"==v.ClassName||"AddEditAccountViewModel"==v.ClassName||"AddCostCenterViewModel"==v.ClassName||"AddProductScreenViewModel"==v.ClassName||"AddEditEmpMasterViewModel"==v.ClassName||"ActivitiesViewModel"==v.ClassName||"AddEditRenContractViewModel"==v.ClassName||"DocumentFlowDefination"==v.ClassName)}static PlaySound(v){let S=new Audio;S.src="../../assets/images/menu/"+v,S.load(),S.play()}}class I{constructor(){this.parser=new DOMParser,this.Tables=[],this.Columns=[]}get DocumentElement(){if(this.doc)return this.doc.children[0]}LoadXml(v){this.doc=this.parser.parseFromString(v,"text/xml")}SelectSingleNode(v){if(!this.doc)return null;if(this.doc.evaluate)return this.doc.evaluate(v,this.doc).iterateNext();{let S=this.doc;return S.setProperty("SelectionLanguage","XPath"),S.selectNode(v)}}SelectSingleNodeText(v){let S=this.SelectSingleNode(v);return null!=S?S.innerHTML:null}SelectNodes(v,S=null){let B=[];if(!this.doc)return B;if(this.doc.evaluate){let O=this.doc.evaluate(v,this.doc),ae=O.iterateNext();for(;ae;)B.push(ae),ae=O.iterateNext()}else{let O=this.doc;O.setProperty("SelectionLanguage","XPath"),B=O.selectNodes(v)}return B}getNodeByName(v,S){return v.querySelector(S)}getDateByNodeName(v,S){let B=v.querySelector(S);return null!=B?B.innerHTML:null}getNodeData(v){return null==v?"":v.innerHTML}getNodeXml(v){return v.outerHTML}static SelectSingleNode(v,S){if(!S.Contains("/"))return v.querySelector(S);{let B=I.SelectNodes(v,S);if(B.length>0)return B[0]}return null}static SelectSingleNodeText(v,S){let B="";if(S.Contains("/")){let O=I.SelectNodes(v,S);O.length>0&&(B=O[0].innerHTML)}else{let O=v.querySelector(S);O&&(B=O.innerHTML)}return B}static SelectSingleNodeXml(v,S){let B=v.querySelector(S);return B?B.outerHTML:""}static getNodeData(v){return null==v?"":v.innerHTML}static SelectNodes(v,S){let ae,B=S.Trim("/").split("/"),se=new G.G9;se.Add(0,[v]);for(let fe=0;fe<B.length;fe++){se.Add(fe+1,[]);for(let _=0;_<se[fe].length;_++)ae=I.GetNodes(se[fe][_],B[fe]),ae.length>0&&se[fe+1].AddRange(ae)}return se[B.length]}static RemoveChild(v,S){v.removeChild(S)}static GetNodes(v,S){let B=[];for(let O=0;O<v.children.length;O++)v.children[O].tagName==S&&B.push(v.children[O]);return B}AppendChild(v,S){const B=this.parser.parseFromString(S,"application/xml");v.appendChild(B.firstChild)}static AppendChild(v,S){const B=(new DOMParser).parseFromString(S,"application/xml");v.appendChild(B.firstChild)}ReadXml(v){if(this.Tables.Clear(),this.Columns.Clear(),this.doc=this.parser.parseFromString(v,"text/xml"),this.Tables.push([]),this.Columns.push([]),this.doc.children[0].children.length>0){let S,B,O=this.doc.children[0].children;for(let ae=0;ae<O.length;ae++){S={};for(let se=0;se<O[ae].attributes.length;se++)B=O[ae].attributes[se],this.Columns[0].includes(B.name)||this.Columns[0].push(B.name),S[B.name]=B.value;this.Tables[0].push(S)}}}ReadXmlDataset(v){if(this.Tables.Clear(),this.Columns.Clear(),this.doc=this.parser.parseFromString(v,"text/xml"),this.Tables.push([]),this.Columns.push([]),this.doc.children[0].children.length>0){let S,B,O=this.doc.children[0].children;for(let ae=0;ae<O.length;ae++)S={},this.Columns[0].includes("Row_Id")||this.Columns[0].push("Row_Id"),S.Row_Id=ae,this.Tables[0].push(S);this.Columns[1]=[],this.Tables[1]=[];for(let ae=0;ae<O.length;ae++){S={};for(let se=0;se<O[ae].children[0].attributes.length;se++)B=O[ae].children[0].attributes[se],this.Columns[1].includes(B.name)||this.Columns[1].push(B.name),S[B.name]=B.value;this.Tables[1].push(S)}}}}class oe{static GetFlowString(v){let S="";try{let B,O=this.GetParsedFlowDocument(v);for(let ae=0;ae<O.DocumentElement.childNodes.length;ae++){let fe,se=O.DocumentElement.childNodes[ae];ae>0&&(S+="\r\n"),B=null!=se.attributes.IsTR&&"1"==se.attributes.IsTR.value;for(let _=0;_<se.childNodes.length;_++){let K=se.childNodes[_];if(fe=K.textContent,null!=K.firstChild&&"LineBreak"==K.firstChild.nodeName){let ee=se.CloneNode(!1);for(K.RemoveChild(K.firstChild);_<se.childNodes.length;)ee.AppendChild(se.childNodes[_]);O.DocumentElement.InsertAfter(ee,se);break}if("Floater"==K.tagName){let ee=null;if(null!=K.firstChild&&"BlockUIContainer"==K.firstChild.nodeName&&null!=K.firstChild.firstChild&&"Image"==K.firstChild.firstChild.nodeName&&(ee=K.firstChild.firstChild),null!=ee){let U=0,ie=0;try{if(U=p.Int(ee.attributes.Width.value),ie=p.Int(ee.attributes.Height.value),O.DocumentElement.attributes.ColumnGap&&1==p.Int(O.DocumentElement.attributes.ColumnGap.value)&&!p.IsEmpty(ee.attributes.Source.value)){let J=ee.attributes.Source.value.split("/");return"@@@"+J[J.length-1]+"@@@"}}catch(J){Logger.ErrorLog("RPT:: Rich Text Image Print Error",J)}}}else B&&_>0&&(S+=", "),S+=fe}}}catch{}return S}static GetParsedFlowDocument(v){let S=new I;S.LoadXml(v);try{for(let B=0;B<S.DocumentElement.children.length;B++){let O=S.DocumentElement.children[B];"Table"==O.tagName&&"TableRowGroup"==O.lastChild.nodeName&&(O.lastChild.childNodes.forEach(ae=>{let se='<Paragraph IsTR="1">';se+="</Paragraph>";let fe=(new DOMParser).parseFromString('<Paragraph IsTR="1"></Paragraph>',"application/xml");ae.childNodes.forEach(_=>{}),S.DocumentElement.insertBefore(fe,O)}),B+=O.lastChild.childNodes.length-1,S.DocumentElement.removeChild(O))}}catch{}return S}}class F{constructor(){this.handlerRef=[],this.Tag=null,this.item=null,this._interval=0,this._Enabled=!1,this.obj=null,this.methodname=null}get Interval(){return this._interval}set Interval(v){this._interval=v,this._interval>0?this.start():this.stop()}set Enabled(v){this._Enabled=v,v?this.start():this.stop()}Tick(v,S){this.Elapsed(v,S)}Elapsed(v,S){this.obj=v,this.methodname=S,this.start()}CustomElapsed(v,S,B){this.obj=v,this.methodname=S,this.item=B,this.start()}start(){if(this._interval>0&&this._Enabled&&this.obj&&this.methodname&&this.obj[this.methodname])if(this.stop(),p.IsEmpty(this.item)){let v=setInterval(()=>this.obj[this.methodname](),this._interval);this.handlerRef.push(v)}else{let v=setInterval(()=>this.obj[this.methodname](this.item),this._interval);this.handlerRef.push(v)}}stop(){for(let v=this.handlerRef.length-1;v>=0;v--)clearInterval(this.handlerRef[v]),this.handlerRef.pop()}}class N{constructor(){this.Double=[],this.Int=[],this.Date=[],this.Bool=[]}Clear(){this.Double.Clear(),this.Int.Clear(),this.Date.Clear(),this.Bool.Clear()}}},43794:(ze,Oe,n)=>{"use strict";n.d(Oe,{B:()=>z});var C=n(94366),x=n(40740);const X=(0,n(4234).L)(w=>function(){w(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var W=n(35527),ne=n(27405);let z=(()=>{class w extends C.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(k){const me=new Z(this,this);return me.operator=k,me}_throwIfClosed(){if(this.closed)throw new X}next(k){(0,ne.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(k)}})}error(k){(0,ne.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=k;const{observers:me}=this;for(;me.length;)me.shift().error(k)}})}complete(){(0,ne.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:k}=this;for(;k.length;)k.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var k;return(null===(k=this.observers)||void 0===k?void 0:k.length)>0}_trySubscribe(k){return this._throwIfClosed(),super._trySubscribe(k)}_subscribe(k){return this._throwIfClosed(),this._checkFinalizedStatuses(k),this._innerSubscribe(k)}_innerSubscribe(k){const{hasError:me,isStopped:le,observers:R}=this;return me||le?x.Kn:(this.currentObservers=null,R.push(k),new x.yU(()=>{this.currentObservers=null,(0,W.o)(R,k)}))}_checkFinalizedStatuses(k){const{hasError:me,thrownError:le,isStopped:R}=this;me?k.error(le):R&&k.complete()}asObservable(){const k=new C.c;return k.source=this,k}}return w.create=(he,k)=>new Z(he,k),w})();class Z extends z{constructor(he,k){super(),this.destination=he,this.source=k}next(he){var k,me;null===(me=null===(k=this.destination)||void 0===k?void 0:k.next)||void 0===me||me.call(k,he)}error(he){var k,me;null===(me=null===(k=this.destination)||void 0===k?void 0:k.error)||void 0===me||me.call(k,he)}complete(){var he,k;null===(k=null===(he=this.destination)||void 0===he?void 0:he.complete)||void 0===k||k.call(he)}_subscribe(he){var k,me;return null!==(me=null===(k=this.source)||void 0===k?void 0:k.subscribe(he))&&void 0!==me?me:x.Kn}}},46183:(ze,Oe,n)=>{"use strict";n.d(Oe,{i9:()=>Le,Qs:()=>ke});var C=n(74523),x=n(96598);const G={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},X=new x.nKC("config",{providedIn:"root",factory:()=>({modules:G})});var z=n(81742),Z=n(75406),w=n(22726),he=n(94366),k=n(79358);function me(Be){Be||((0,x.Af3)(me),Be=(0,x.WQX)(x.abz));const xe=new he.c(ve=>Be.onDestroy(ve.next.bind(ve)));return ve=>ve.pipe((0,k.Q)(xe))}var I=n(36649),oe=n(77224),F=n(425),N=n(5087),te=n(30054),v=n(52021),S=n(11345),B=n(40740),O=n(22287),ae=n(73973),se=n(10522),fe=n(53778),_=n(47771),K=n(11798);const ee=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],U=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function ie(Be,xe){1&Be&&x.nrm(0,"div",0)}function J(Be,xe){1&Be&&x.nrm(0,"div",0)}const Ce=(Be,xe)=>Be||xe||"html";let Ee=(()=>{class Be{constructor(){var ve=this;this.config=(0,x.WQX)(X)||{modules:G},this.document=(0,x.WQX)(z.q),this.quill$=(0,I.v)((0,C.A)(function*(){if(!ve.Quill){const A=ve.document.addEventListener;ve.document.addEventListener=ve.document.__zone_symbol__addEventListener||ve.document.addEventListener;const Se=yield n.e(108).then(n.bind(n,7727));ve.document.addEventListener=A,ve.Quill=Se.default?.default??Se.default??Se}return ve.config.customOptions?.forEach(A=>{const Se=ve.Quill.import(A.import);Se.whitelist=A.whitelist,ve.Quill.register(Se,!0,ve.config.suppressGlobalRegisterWarning)}),(0,oe._)(ve.registerCustomModules(ve.Quill,ve.config.customModules,ve.config.suppressGlobalRegisterWarning))})).pipe((0,O.t)({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(ve,A,Se=this.config.beforeRender){const Re=[this.registerCustomModules(ve,A)];return Se&&Re.push((0,F.H)(Se())),(0,N.p)(Re).pipe((0,ae.T)(()=>ve))}registerCustomModules(ve,A,Se){if(!Array.isArray(A))return(0,te.of)(ve);const Re=[];for(const be of A){const{path:He,implementation:Ne}=be;this.registeredModules.has(He)||(this.registeredModules.add(He),(0,v.A)(Ne)?Re.push(Ne.pipe((0,se.M)(Ke=>{ve.register(He,Ke,Se)}))):ve.register(He,Ne,Se))}return Re.length>0?(0,N.p)(Re).pipe((0,ae.T)(()=>ve)):(0,te.of)(ve)}static{this.\u0275fac=function(A){return new(A||Be)}}static{this.\u0275prov=x.jDH({token:Be,factory:Be.\u0275fac,providedIn:"root"})}}return Be})(),Te=(()=>{class Be{constructor(){this.format=(0,x.hFB)(void 0),this.theme=(0,x.hFB)(void 0),this.modules=(0,x.hFB)(void 0),this.debug=(0,x.hFB)(!1),this.readOnly=(0,x.hFB)(!1),this.placeholder=(0,x.hFB)(void 0),this.maxLength=(0,x.hFB)(void 0),this.minLength=(0,x.hFB)(void 0),this.required=(0,x.hFB)(!1),this.formats=(0,x.hFB)(void 0),this.customToolbarPosition=(0,x.hFB)("top"),this.sanitize=(0,x.hFB)(void 0),this.beforeRender=(0,x.hFB)(void 0),this.styles=(0,x.hFB)(null),this.registry=(0,x.hFB)(void 0),this.bounds=(0,x.hFB)(void 0),this.customOptions=(0,x.hFB)([]),this.customModules=(0,x.hFB)([]),this.trackChanges=(0,x.hFB)(void 0),this.classes=(0,x.hFB)(void 0),this.trimOnValidation=(0,x.hFB)(!1),this.linkPlaceholder=(0,x.hFB)(void 0),this.compareValues=(0,x.hFB)(!1),this.filterNull=(0,x.hFB)(!1),this.debounceTime=(0,x.hFB)(void 0),this.defaultEmptyValue=(0,x.hFB)(null),this.onEditorCreated=new x.bkB,this.onEditorChanged=new x.bkB,this.onContentChanged=new x.bkB,this.onSelectionChanged=new x.bkB,this.onFocus=new x.bkB,this.onBlur=new x.bkB,this.onNativeFocus=new x.bkB,this.onNativeBlur=new x.bkB,this.disabled=!1,this.toolbarPosition=(0,x.vPA)("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=(0,x.WQX)(x.aKT),this.document=(0,x.WQX)(z.q),this.cd=(0,x.WQX)(x.gRc),this.domSanitizer=(0,x.WQX)(w.up),this.platformId=(0,x.WQX)(x.Agw),this.renderer=(0,x.WQX)(x.sFG),this.zone=(0,x.WQX)(x.SKi),this.service=(0,x.WQX)(Ee),this.destroyRef=(0,x.WQX)(x.abz),this.valueGetter=(0,x.hFB)(ve=>{let A=ve.getSemanticHTML();this.isEmptyValue(A)&&(A=this.defaultEmptyValue());let Se=A;const Re=Ce(this.format(),this.service.config.format);if("text"===Re)Se=ve.getText();else if("object"===Re)Se=ve.getContents();else if("json"===Re)try{Se=JSON.stringify(ve.getContents())}catch{Se=ve.getText()}return Se}),this.valueSetter=(0,x.hFB)((ve,A)=>{const Se=Ce(this.format(),this.service.config.format);if("html"===Se)return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(A=this.domSanitizer.sanitize(x.WPN.HTML,A)),ve.clipboard.convert({html:A});if("json"===Se)try{return JSON.parse(A)}catch{return[{insert:A}]}return A}),this.selectionChangeHandler=(ve,A,Se)=>{const Re=this.trackChanges()||this.service.config.trackChanges,be=!ve&&!!this.onModelTouched&&("user"===Se||Re&&"all"===Re);!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!be||this.zone.run(()=>{null===ve?this.onBlur.emit({editor:this.quillEditor,source:Se}):null===A&&this.onFocus.emit({editor:this.quillEditor,source:Se}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:A,range:ve,source:Se}),be&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(ve,A,Se)=>{const Re=this.quillEditor.getText(),be=this.quillEditor.getContents();let He=this.quillEditor.getSemanticHTML();this.isEmptyValue(He)&&(He=this.defaultEmptyValue());const Ne=this.trackChanges()||this.service.config.trackChanges,Ke=("user"===Se||Ne&&"all"===Ne)&&!!this.onModelChange;!this.onContentChanged.observed&&!Ke||this.zone.run(()=>{if(Ke){const De=this.valueGetter();this.onModelChange(De(this.quillEditor))}this.onContentChanged.emit({content:be,delta:ve,editor:this.quillEditor,html:He,oldDelta:A,source:Se,text:Re}),this.cd.markForCheck()})},this.editorChangeHandler=(ve,A,Se,Re)=>{if(this.onEditorChanged.observed)if("text-change"===ve){const be=this.quillEditor.getText(),He=this.quillEditor.getContents();let Ne=this.quillEditor.getSemanticHTML();this.isEmptyValue(Ne)&&(Ne=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:He,delta:A,editor:this.quillEditor,event:ve,html:Ne,oldDelta:Se,source:Re,text:be}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:ve,oldRange:Se,range:A,source:Re}),this.cd.markForCheck()})}}static normalizeClassNames(ve){return ve.trim().split(" ").reduce((Se,Re)=>{const be=Re.trim();return be&&Se.push(be),Se},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){(0,Z.Vy)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,fe.Z)(ve=>this.service.beforeRender(ve,this.customModules(),this.beforeRender()))).subscribe(ve=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const A=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),Se=Object.assign({},this.modules()||this.service.config.modules);A?Se.toolbar=A:void 0===Se.toolbar&&(Se.toolbar=G.toolbar);let Re=void 0!==this.placeholder()?this.placeholder():this.service.config.placeholder;void 0===Re&&(Re="Insert text here ...");const be=this.styles();be&&Object.keys(be).forEach(Ae=>{this.renderer.setStyle(this.editorElem,Ae,be[Ae])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(Ae=>{const je=ve.import(Ae.import);je.whitelist=Ae.whitelist,ve.register(je,!0)});let He=this.bounds()&&"self"===this.bounds()?this.editorElem:this.bounds();He||(He=this.service.config.bounds?this.service.config.bounds:this.document.body);let Ne=this.debug();!Ne&&!1!==Ne&&this.service.config.debug&&(Ne=this.service.config.debug);let Ke=this.readOnly();!Ke&&!1!==this.readOnly()&&(Ke=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let De=this.formats();if(!De&&void 0===De&&(De=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new ve(this.editorElem,{bounds:He,debug:Ne,formats:De,modules:Se,placeholder:Re,readOnly:Ke,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){(0,S.R)(this.quillEditor.scroll.domNode,"blur").pipe(me(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));const Ae=this.quillEditor.getModule("toolbar");Ae.container&&(0,S.R)(Ae.container,"mousedown").pipe(me(this.destroyRef)).subscribe(je=>je.preventDefault())}if(this.onNativeFocus.observed&&(0,S.R)(this.quillEditor.scroll.domNode,"focus").pipe(me(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){const je=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");je?.dataset&&(je.dataset.link=this.linkPlaceholder())}}),this.content){if("text"===Ce(this.format(),this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const nt=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(nt,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&new he.c(Be=>{const xe=requestAnimationFrame(()=>{Be.next(),Be.complete()});return()=>cancelAnimationFrame(xe)}).pipe(me(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(ve){if(this.quillEditor){if(ve.readOnly&&this.quillEditor.enable(!ve.readOnly.currentValue),ve.placeholder&&(this.quillEditor.root.dataset.placeholder=ve.placeholder.currentValue),ve.styles){const A=ve.styles.currentValue,Se=ve.styles.previousValue;Se&&Object.keys(Se).forEach(Re=>{this.renderer.removeStyle(this.editorElem,Re)}),A&&Object.keys(A).forEach(Re=>{this.renderer.setStyle(this.editorElem,Re,this.styles()[Re])})}if(ve.classes){const A=ve.classes.currentValue,Se=ve.classes.previousValue;Se&&this.removeClasses(Se),A&&this.addClasses(A)}ve.debounceTime&&this.addQuillEventListeners()}}addClasses(ve){Be.normalizeClassNames(ve).forEach(A=>{this.renderer.addClass(this.editorElem,A)})}removeClasses(ve){Be.normalizeClassNames(ve).forEach(A=>{this.renderer.removeClass(this.editorElem,A)})}writeValue(ve){if(this.filterNull()&&null===ve||(this.content=ve,!this.quillEditor))return;const A=Ce(this.format(),this.service.config.format),Re=this.valueSetter()(this.quillEditor,ve);if(this.compareValues()){const be=this.quillEditor.getContents();if(JSON.stringify(be)===JSON.stringify(Re))return}ve?"text"===A?this.quillEditor.setText(ve):this.quillEditor.setContents(Re):this.quillEditor.setText("")}setDisabledState(ve=this.disabled){this.disabled=ve,this.quillEditor&&(ve?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(ve){this.onModelChange=ve}registerOnTouched(ve){this.onModelTouched=ve}registerOnValidatorChange(ve){this.onValidatorChanged=ve}validate(){if(!this.quillEditor)return null;const ve={};let A=!0;const Se=this.quillEditor.getText(),Re=this.trimOnValidation()?Se.trim().length:1===Se.length&&0===Se.trim().length?0:Se.length-1,be=this.quillEditor.getContents().ops,He=!!be&&1===be.length&&["\n",""].includes(be[0].insert?.toString());return this.minLength()&&Re&&Re<this.minLength()&&(ve.minLengthError={given:Re,minLength:this.minLength()},A=!1),this.maxLength()&&Re>this.maxLength()&&(ve.maxLengthError={given:Re,maxLength:this.maxLength()},A=!1),this.required()&&!Re&&He&&(ve.requiredError={empty:!0},A=!1),A?null:ve}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new B.yU,this.subscription.add((0,S.R)(this.quillEditor,"selection-change").subscribe(([Se,Re,be])=>{this.selectionChangeHandler(Se,Re,be)}));let ve=(0,S.R)(this.quillEditor,"text-change"),A=(0,S.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime()&&(ve=ve.pipe((0,_.B)(this.debounceTime())),A=A.pipe((0,_.B)(this.debounceTime()))),this.subscription.add(ve.subscribe(([Se,Re,be])=>{this.textChangeHandler(Se,Re,be)})),this.subscription.add(A.subscribe(([Se,Re,be,He])=>{this.editorChangeHandler(Se,Re,be,He)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(ve){return"<p></p>"===ve||"<div></div>"===ve||"<p><br></p>"===ve||"<div><br></div>"===ve}static{this.\u0275fac=function(A){return new(A||Be)}}static{this.\u0275dir=x.FsC({type:Be,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},standalone:!1,features:[x.OA$]})}}return Be})(),Le=(()=>{class Be extends Te{static{this.\u0275fac=(()=>{let ve;return function(Se){return(ve||(ve=x.xGo(Be)))(Se||Be)}})()}static{this.\u0275cmp=x.VBU({type:Be,selectors:[["quill-editor"]],features:[x.Jv_([{multi:!0,provide:K.kq,useExisting:(0,x.Rfq)(()=>Be)},{multi:!0,provide:K.cz,useExisting:(0,x.Rfq)(()=>Be)}]),x.Vt3],ngContentSelectors:U,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(A,Se){1&A&&(x.NAR(ee),x.DNE(0,ie,1,0,"div",0),x.SdG(1),x.SdG(2,1),x.SdG(3,2),x.DNE(4,J,1,0,"div",0)),2&A&&(x.vxM("top"!==Se.toolbarPosition()?0:-1),x.R7$(4),x.vxM("top"===Se.toolbarPosition()?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return Be})(),ke=(()=>{class Be{static forRoot(ve){return{ngModule:Be,providers:[{provide:X,useValue:ve}]}}static{this.\u0275fac=function(A){return new(A||Be)}}static{this.\u0275mod=x.$C({type:Be})}static{this.\u0275inj=x.G2t({})}}return Be})()},46717:function(ze,Oe,n){var x,G,C;ze.exports=(C=n(95275),n(90033),C.mode.CTR=(G=(x=C.lib.BlockCipherMode.extend()).Encryptor=x.extend({processBlock:function(X,W){var ne=this._cipher,z=ne.blockSize,Z=this._iv,w=this._counter;Z&&(w=this._counter=Z.slice(0),this._iv=void 0);var he=w.slice(0);ne.encryptBlock(he,0),w[z-1]=w[z-1]+1|0;for(var k=0;k<z;k++)X[W+k]^=he[k]}}),x.Decryptor=G,x),C.mode.CTR)},46882:function(ze,Oe,n){var X,W,ne,z,C;ze.exports=(C=n(95275),W=(X=C.lib).Base,ne=X.WordArray,(z=C.x64={}).Word=W.extend({init:function(he,k){this.high=he,this.low=k}}),z.WordArray=W.extend({init:function(he,k){he=this.words=he||[],this.sigBytes=null!=k?k:8*he.length},toX32:function(){for(var he=this.words,k=he.length,me=[],le=0;le<k;le++){var R=he[le];me.push(R.high),me.push(R.low)}return ne.create(me,this.sigBytes)},clone:function(){for(var he=W.clone.call(this),k=he.words=this.words.slice(0),me=k.length,le=0;le<me;le++)k[le]=k[le].clone();return he}}),C)},47771:(ze,Oe,n)=>{"use strict";n.d(Oe,{B:()=>X});var C=n(20855),x=n(17593),G=n(31979);function X(W,ne=C.E){return(0,x.N)((z,Z)=>{let w=null,he=null,k=null;const me=()=>{if(w){w.unsubscribe(),w=null;const R=he;he=null,Z.next(R)}};function le(){const R=k+W,V=ne.now();if(V<R)return w=this.schedule(void 0,R-V),void Z.add(w);me()}z.subscribe((0,G._)(Z,R=>{he=R,k=ne.now(),w||(w=ne.schedule(le,W),Z.add(w))},()=>{me(),Z.complete()},void 0,()=>{he=w=null}))})}},47893:(ze,Oe,n)=>{"use strict";n.d(Oe,{H:()=>G});var C=n(53778),x=n(20452);function G(X,W){return(0,x.T)(W)?(0,C.Z)(X,W,1):(0,C.Z)(X,1)}},48746:(ze,Oe,n)=>{"use strict";n.d(Oe,{U:()=>G});var C=n(53778),x=n(56050);function G(X=1/0){return(0,C.Z)(x.D,X)}},51174:(ze,Oe,n)=>{"use strict";n.d(Oe,{x:()=>W});var C=n(48746),G=n(86945),X=n(425);function W(...ne){return function x(){return(0,C.U)(1)}()((0,X.H)(ne,(0,G.lI)(ne)))}},51428:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.pad.Iso97971={pad:function(x,G){x.concat(C.lib.WordArray.create([2147483648],1)),C.pad.ZeroPadding.pad(x,G)},unpad:function(x){C.pad.ZeroPadding.unpad(x),x.sigBytes--}},C.pad.Iso97971)},52021:(ze,Oe,n)=>{"use strict";n.d(Oe,{A:()=>G});var C=n(94366),x=n(20452);function G(X){return!!X&&(X instanceof C.c||(0,x.T)(X.lift)&&(0,x.T)(X.subscribe))}},52923:function(ze,Oe,n){var C;ze.exports=(C=n(95275),function(){var X=C.lib.WordArray,W=C.enc;function z(Z){return Z<<8&4278255360|Z>>>8&16711935}W.Utf16=W.Utf16BE={stringify:function(Z){for(var w=Z.words,he=Z.sigBytes,k=[],me=0;me<he;me+=2)k.push(String.fromCharCode(w[me>>>2]>>>16-me%4*8&65535));return k.join("")},parse:function(Z){for(var w=Z.length,he=[],k=0;k<w;k++)he[k>>>1]|=Z.charCodeAt(k)<<16-k%2*16;return X.create(he,2*w)}},W.Utf16LE={stringify:function(Z){for(var w=Z.words,he=Z.sigBytes,k=[],me=0;me<he;me+=2){var le=z(w[me>>>2]>>>16-me%4*8&65535);k.push(String.fromCharCode(le))}return k.join("")},parse:function(Z){for(var w=Z.length,he=[],k=0;k<w;k++)he[k>>>1]|=z(Z.charCodeAt(k)<<16-k%2*16);return X.create(he,2*w)}}}(),C.enc.Utf16)},53778:(ze,Oe,n)=>{"use strict";n.d(Oe,{Z:()=>Z});var C=n(73973),x=n(36369),G=n(17593),X=n(67606),W=n(31979),z=n(20452);function Z(w,he,k=1/0){return(0,z.T)(he)?Z((me,le)=>(0,C.T)((R,V)=>he(me,R,le,V))((0,x.Tg)(w(me,le))),k):("number"==typeof he&&(k=he),(0,G.N)((me,le)=>function ne(w,he,k,me,le,R,V,ge){const E=[];let b=0,p=0,j=!1;const T=()=>{j&&!E.length&&!b&&he.complete()},I=F=>b<me?oe(F):E.push(F),oe=F=>{R&&he.next(F),b++;let N=!1;(0,x.Tg)(k(F,p++)).subscribe((0,W._)(he,te=>{le?.(te),R?I(te):he.next(te)},()=>{N=!0},void 0,()=>{if(N)try{for(b--;E.length&&b<me;){const te=E.shift();V?(0,X.N)(he,V,()=>oe(te)):oe(te)}T()}catch(te){he.error(te)}}))};return w.subscribe((0,W._)(he,I,()=>{j=!0,T()})),()=>{ge?.()}}(me,le,w,k)))}},53852:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(46882),n(11204),n(52923),n(21272),n(84217),n(1236),n(57605),n(92787),n(61606),n(43266),n(61687),n(81371),n(32828),n(15487),n(65357),n(26528),n(90033),n(11771),n(46717),n(93438),n(64319),n(91353),n(67951),n(5135),n(51428),n(14583),n(74980),n(42183),n(70807),n(94896),n(62969),n(95176),n(88952),n(67650),C)},54016:(ze,Oe,n)=>{"use strict";n.d(Oe,{AQ:()=>I,C6:()=>x,Cg:()=>W,Cl:()=>G,Ju:()=>ge,N3:()=>T,Sn:()=>k,YH:()=>le,gz:()=>b,sH:()=>me,xN:()=>F,zs:()=>E});var C=function(ie,J){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ce,Y){Ce.__proto__=Y}||function(Ce,Y){for(var Ee in Y)Object.prototype.hasOwnProperty.call(Y,Ee)&&(Ce[Ee]=Y[Ee])})(ie,J)};function x(ie,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function Ce(){this.constructor=ie}C(ie,J),ie.prototype=null===J?Object.create(J):(Ce.prototype=J.prototype,new Ce)}var G=function(){return G=Object.assign||function(J){for(var Ce,Y=1,Ee=arguments.length;Y<Ee;Y++)for(var Te in Ce=arguments[Y])Object.prototype.hasOwnProperty.call(Ce,Te)&&(J[Te]=Ce[Te]);return J},G.apply(this,arguments)};function W(ie,J,Ce,Y){var Le,Ee=arguments.length,Te=Ee<3?J:null===Y?Y=Object.getOwnPropertyDescriptor(J,Ce):Y;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Te=Reflect.decorate(ie,J,Ce,Y);else for(var tt=ie.length-1;tt>=0;tt--)(Le=ie[tt])&&(Te=(Ee<3?Le(Te):Ee>3?Le(J,Ce,Te):Le(J,Ce))||Te);return Ee>3&&Te&&Object.defineProperty(J,Ce,Te),Te}function k(ie,J){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ie,J)}function me(ie,J,Ce,Y){return new(Ce||(Ce=Promise))(function(Te,Le){function tt(Be){try{ke(Y.next(Be))}catch(xe){Le(xe)}}function Ue(Be){try{ke(Y.throw(Be))}catch(xe){Le(xe)}}function ke(Be){Be.done?Te(Be.value):function Ee(Te){return Te instanceof Ce?Te:new Ce(function(Le){Le(Te)})}(Be.value).then(tt,Ue)}ke((Y=Y.apply(ie,J||[])).next())})}function le(ie,J){var Y,Ee,Te,Ce={label:0,sent:function(){if(1&Te[0])throw Te[1];return Te[1]},trys:[],ops:[]},Le=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return Le.next=tt(0),Le.throw=tt(1),Le.return=tt(2),"function"==typeof Symbol&&(Le[Symbol.iterator]=function(){return this}),Le;function tt(ke){return function(Be){return function Ue(ke){if(Y)throw new TypeError("Generator is already executing.");for(;Le&&(Le=0,ke[0]&&(Ce=0)),Ce;)try{if(Y=1,Ee&&(Te=2&ke[0]?Ee.return:ke[0]?Ee.throw||((Te=Ee.return)&&Te.call(Ee),0):Ee.next)&&!(Te=Te.call(Ee,ke[1])).done)return Te;switch(Ee=0,Te&&(ke=[2&ke[0],Te.value]),ke[0]){case 0:case 1:Te=ke;break;case 4:return Ce.label++,{value:ke[1],done:!1};case 5:Ce.label++,Ee=ke[1],ke=[0];continue;case 7:ke=Ce.ops.pop(),Ce.trys.pop();continue;default:if(!(Te=(Te=Ce.trys).length>0&&Te[Te.length-1])&&(6===ke[0]||2===ke[0])){Ce=0;continue}if(3===ke[0]&&(!Te||ke[1]>Te[0]&&ke[1]<Te[3])){Ce.label=ke[1];break}if(6===ke[0]&&Ce.label<Te[1]){Ce.label=Te[1],Te=ke;break}if(Te&&Ce.label<Te[2]){Ce.label=Te[2],Ce.ops.push(ke);break}Te[2]&&Ce.ops.pop(),Ce.trys.pop();continue}ke=J.call(ie,Ce)}catch(Be){ke=[6,Be],Ee=0}finally{Y=Te=0}if(5&ke[0])throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}([ke,Be])}}}function ge(ie){var J="function"==typeof Symbol&&Symbol.iterator,Ce=J&&ie[J],Y=0;if(Ce)return Ce.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&Y>=ie.length&&(ie=void 0),{value:ie&&ie[Y++],done:!ie}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(ie,J){var Ce="function"==typeof Symbol&&ie[Symbol.iterator];if(!Ce)return ie;var Ee,Le,Y=Ce.call(ie),Te=[];try{for(;(void 0===J||J-- >0)&&!(Ee=Y.next()).done;)Te.push(Ee.value)}catch(tt){Le={error:tt}}finally{try{Ee&&!Ee.done&&(Ce=Y.return)&&Ce.call(Y)}finally{if(Le)throw Le.error}}return Te}function b(){for(var ie=[],J=0;J<arguments.length;J++)ie=ie.concat(E(arguments[J]));return ie}function T(ie){return this instanceof T?(this.v=ie,this):new T(ie)}function I(ie,J,Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,Y=Ce.apply(ie,J||[]),Te=[];return Ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),tt("next"),tt("throw"),tt("return",function Le(A){return function(Se){return Promise.resolve(Se).then(A,xe)}}),Ee[Symbol.asyncIterator]=function(){return this},Ee;function tt(A,Se){Y[A]&&(Ee[A]=function(Re){return new Promise(function(be,He){Te.push([A,Re,be,He])>1||Ue(A,Re)})},Se&&(Ee[A]=Se(Ee[A])))}function Ue(A,Se){try{!function ke(A){A.value instanceof T?Promise.resolve(A.value.v).then(Be,xe):ve(Te[0][2],A)}(Y[A](Se))}catch(Re){ve(Te[0][3],Re)}}function Be(A){Ue("next",A)}function xe(A){Ue("throw",A)}function ve(A,Se){A(Se),Te.shift(),Te.length&&Ue(Te[0][0],Te[0][1])}}function F(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ce,J=ie[Symbol.asyncIterator];return J?J.call(ie):(ie=ge(ie),Ce={},Y("next"),Y("throw"),Y("return"),Ce[Symbol.asyncIterator]=function(){return this},Ce);function Y(Te){Ce[Te]=ie[Te]&&function(Le){return new Promise(function(tt,Ue){!function Ee(Te,Le,tt,Ue){Promise.resolve(Ue).then(function(ke){Te({value:ke,done:tt})},Le)}(tt,Ue,(Le=ie[Te](Le)).done,Le.value)})}}}"function"==typeof SuppressedError&&SuppressedError},54189:(ze,Oe,n)=>{"use strict";n.d(Oe,{B:()=>x});var C=n(58170);class x extends C.MI{constructor(){super(...arguments),this.ClickCommand=new C.Yk}}},54581:(ze,Oe,n)=>{"use strict";n.d(Oe,{OQz:()=>ne,YDW:()=>gl,YMJ:()=>V,IQ1:()=>E,iKL:()=>Qe.i,$fu:()=>b,r7U:()=>pg,kqS:()=>ce,PUO:()=>p,ptE:()=>j,VV6:()=>z0,E:()=>Eg,CuW:()=>Tc,_tQ:()=>Gu,u54:()=>Dg,Gip:()=>Cc,h_9:()=>tu,yf6:()=>I,YBK:()=>nu,huT:()=>oe,mch:()=>iu,oF$:()=>ru,dB6:()=>vo,GHb:()=>es,HXj:()=>ue,JD8:()=>Fe,jO9:()=>Wh,nF4:()=>pl,_dX:()=>Kr,lmq:()=>tm,ay:()=>cr,y_D:()=>jn,Aq$:()=>We,DUb:()=>A.addToArrayWhenNotExists,dT3:()=>gg,ljw:()=>B,tGf:()=>A.classNameToList,fhB:()=>A.createDomElement,i3Z:()=>A.emptyElement,mVi:()=>J,yG0:()=>A.parseBoolean,Vyf:()=>Be});var C={};n.r(C),n.d(C,{BackendUtilityService:()=>ne});var x={};n.r(x),n.d(x,{collectionObserver:()=>z,propertyObserver:()=>Z});var G={};n.r(G),n.d(G,{CancelledException:()=>v,addTreeLevelAndAggregatorsByMutation:()=>ae,addTreeLevelByMutation:()=>O,cancellablePromise:()=>S,castObservableToPromise:()=>B,decimalFormatted:()=>K,findItemInTreeStructure:()=>_,findOrDefault:()=>ke,flattenToParentChildArray:()=>se,formatNumber:()=>ee,getCellValueFromQueryFieldGetter:()=>U,getColumnFieldType:()=>Ce,getDescendantProperty:()=>ie,getTranslationPrefix:()=>J,isColumnDateType:()=>Y,mapOperatorByFieldType:()=>Le,mapOperatorToShorthandDesignation:()=>Te,mapOperatorType:()=>Ee,objectWithoutKey:()=>tt,thousandSeparatorFormatted:()=>Ue,unflattenParentChildArrayToTree:()=>fe,unsubscribeAll:()=>Be});var X={};n.r(X),n.d(X,{sortByFieldType:()=>gt});var W=function(d){return d.local="local",d.remote="remote",d}(W||{});class ne{constructor(e){this.rxjs=e,this._infiniteScrollBottomHit=!1}addRxJsResource(e){this.rxjs=e}executeBackendProcessesCallback(e,s,r,a){const c=new Date;s&&r.service.postProcess&&r.service.postProcess(s),s&&r?.internalPostProcess&&r.internalPostProcess(s),void 0!==r.postProcess&&(s instanceof Object&&(s.metrics={startTime:e,endTime:c,executionTime:c.valueOf()-e.valueOf(),itemCount:a,totalItemCount:a},r.service.options?.infiniteScroll&&(s.infiniteScrollBottomHit=this._infiniteScrollBottomHit,delete s.itemCount)),r.postProcess(s),this.setInfiniteScrollBottomHit(!1))}onBackendError(e,s){if("function"!=typeof s?.onError)throw e;s.onError(e)}executeBackendCallback(e,s,r,a,c,u){if(e){r&&!r.clearFilterTriggered&&!r.clearSortTriggered&&u?.emitActionChangedCallback&&u.emitActionChangedCallback.call(this,W.remote);const g=e.process(s);if(g instanceof Promise&&g.then)g.then(y=>{this.executeBackendProcessesCallback(a,y,e,c),u?.successCallback?.call(this,r)}).catch(y=>{u?.errorCallback?.call(this,r),this.onBackendError(y,e)});else if(this.rxjs?.isObservable(g)){const y=this.rxjs;y.isObservable(u?.httpCancelRequestSubject)&&u?.httpCancelRequestSubject.next(),g.pipe(y.takeUntil(y.iif(()=>y.isObservable(u?.httpCancelRequestSubject),u?.httpCancelRequestSubject,y.EMPTY))).subscribe(M=>{this.executeBackendProcessesCallback(a,M,e,c),u?.successCallback?.call(this,r)},M=>{u?.errorCallback?.call(this,r),this.onBackendError(M,e)})}}}refreshBackendDataset(e){let s="";const r=e?.backendServiceApi;if(!r||!r.service||!r.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(r.service&&(s=r.service.buildQuery()),s&&""!==s){const a=new Date;r.preProcess&&r.preProcess(),this.executeBackendCallback(r,s,null,a,e?.pagination?.totalItems??0)}}setInfiniteScrollBottomHit(e){this._infiniteScrollBottomHit=e}}function z(d,e){["pop","push","reverse","shift","unshift","splice","sort"].forEach(r=>{d[r]=(...a)=>{const c=Array.prototype[r].apply(d,a);return e.apply(d,[d,a]),c}})}function Z(d,e,s){let r=d[e];Object.defineProperty(d,e,{configurable:!0,get:()=>r,set(a){r=a,s.apply(d,[a,d[e]])}})}const me=d=>d;class V{}V.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FILTER_SHORTCUTS:"Filter Shortcuts",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_DARK_MODE:"Toggle Dark Mode",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},V.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},V.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2,V.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2,V.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2,V.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4,V.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0,V.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0,V.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".",V.DEFAULT_NUMBER_THOUSAND_SEPARATOR="",V.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1,V.SLIDER_DEFAULT_MIN_VALUE=0,V.SLIDER_DEFAULT_MAX_VALUE=100,V.SLIDER_DEFAULT_STEP=1,V.VALIDATION_REQUIRED_FIELD="Field is required",V.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",V.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",V.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",V.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",V.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",V.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",V.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",V.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",V.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",V.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",V.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",V.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",V.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",V.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",V.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",V.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",V.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",V.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)";var E=function(d){return d.colon=":",d.comma=",",d.equalSign="=",d.pipe="|",d.semicolon=";",d.space=" ",d.tab="\t",d.doubleColon="::",d.doublePipe="||",d.doubleSemicolon=";;",d}(E||{}),b=function(d){return d.autoTooltip="autoTooltip",d.cellExternalCopyManager="cellExternalCopyManager",d.cellMenu="cellMenu",d.checkboxSelector="checkboxSelector",d.columnPicker="columnPicker",d.contextMenu="contextMenu",d.customTooltip="customTooltip",d.draggableGrouping="draggableGrouping",d.groupItemMetaProvider="groupItemMetaProvider",d.gridMenu="gridMenu",d.headerButton="headerButton",d.headerMenu="headerMenu",d.rowBasedEdit="rowBasedEdit",d.rowDetailView="rowDetailView",d.rowMoveManager="rowMoveManager",d.rowSelection="rowSelection",d}(b||{});const p={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var j=function(d){return d.csv="csv",d.txt="txt",d.xls="xls",d.xlsx="xlsx",d}(j||{}),T=function(d){return d.merge="merge",d.chain="chain",d}(T||{}),I=function(d){return d.columns="columns",d.filter="filter",d.pagination="pagination",d.pinning="pinning",d.rowSelection="rowSelection",d.sorter="sorter",d.treeData="treeData",d}(I||{}),oe=function(d){return d.empty="",d.custom="Custom",d.contains="Contains",d.notContains="Not_Contains",d.lessThan="LT",d.lessThanOrEqual="LE",d.greaterThan="GT",d.greaterThanOrEqual="GE",d.notEqual="NE",d.equal="EQ",d.endsWith="EndsWith",d.rangeInclusive="RangeInclusive",d.rangeExclusive="RangeExclusive",d.startsWith="StartsWith",d.startsWithEndsWith="StartsWithEndsWith",d.in="IN",d.notIn="NOT_IN",d.inContains="IN_CONTAINS",d.notInContains="NOT_IN_CONTAINS",d.inCollection="IN_COLLECTION",d.notInCollection="NOT_IN_COLLECTION",d}(oe||{}),F=function(d){return d.asc="asc",d.ASC="ASC",d.desc="desc",d.DESC="DESC",d}(F||{}),N=function(d){return d[d.asc=1]="asc",d[d.desc=-1]="desc",d[d.neutral=0]="neutral",d}(N||{}),te=function(d){return d.toggleCollapse="toggle-collapse",d.fullExpand="full-expand",d.fullCollapse="full-collapse",d.toggleExpand="toggle-expand",d}(te||{});class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,v.prototype)}}function S(d){let e=!1;return d instanceof Promise?{promise:d.then(s=>{if(e)throw new v("Cancelled Promise");return s}),cancel:()=>e=!0}:d}function B(d,e,s=""){let r=e;if(e instanceof Promise)return e;if(d.isObservable(e)&&(r=d.firstValueFrom(e)),!(r instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${s} is not able to convert the Observable into a Promise.`);return r}function O(d,e,s=0){const r=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP;Array.isArray(d)&&d.forEach(a=>{a&&(Array.isArray(a[r])&&a[r].length>0&&(s++,O(a[r],e,s),s--),a[e.levelPropName]=s)})}function ae(d,e,s=0,r=null){const a=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,{aggregator:c}=e;Array.isArray(d)&&d.forEach(u=>{if(u){const g=Array.isArray(u[a]);Array.isArray(u[a])&&u[a].length>0&&(c.init(u,!0),s++,ae(u[a],e,s,u),s--),r&&c.isInitialized&&"function"==typeof c.accumulate&&!u?.__filteredOut&&(c.accumulate(u,g),c.storeResult(r.__treeTotals)),u[e.levelPropName]=s}})}function se(d,e){const s=e?.identifierPropName??"id",r=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,a=e?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,c=e?.parentPropName??V.treeDataProperties.PARENT_PROP,u=e?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;return e?.shouldAddTreeLevelNumber&&(e?.aggregators?e.aggregators.forEach(y=>{ae(d,{childrenPropName:r,levelPropName:u,aggregator:y})}):O(d,{childrenPropName:r,levelPropName:u})),function le(d,e,s=me,r=()=>{}){const a=d&&d.length?[{pointer:d,offset:0}]:[],c=[];let u;for(;a.length;)for(u=a.pop();u.offset<u.pointer.length;){const g=u.pointer[u.offset],y=r(g),M=e(g);c.push(s(g,u.node,y,u.nodeId)),u.offset+=1,M&&(a.push(u),u={pointer:M,offset:0,node:g,nodeId:y})}return c}(d,y=>y[r],(y,M)=>({[s]:y[s],[c]:void 0!==M?M[s]:null,[a]:!!y[r],...tt(y,r)}))}function fe(d,e){const s=e?.identifierPropName??"id",r=e?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,a=e?.parentPropName??V.treeDataProperties.PARENT_PROP,c=e?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP,u=e?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,y=[],M={};return(d||[]).forEach(L=>M[L[s]]=L),Object.keys(M).forEach(L=>{const q=M[L];if(a in q&&null!=q[a]&&""!==q[a]){if(q[a]in M){const pe=M[q[a]];r in pe||(pe[r]=[]),pe[r].push(q),void 0===pe[u]&&(pe[u]=e?.initiallyCollapsed??!1)}}else y.push(q)}),e?.aggregators?e.aggregators.forEach(L=>{ae(y,{childrenPropName:r,levelPropName:c,aggregator:L},0)}):O(y,{childrenPropName:r,levelPropName:c},0),y}function _(d,e,s){if(!s)throw new Error('findRecursive requires parameter "childrenPropertyName"');const r=d.find(e),a=d.filter(c=>c?.hasOwnProperty(s)&&c[s]);if(r)return r;if(a.length){const c=[];return a.forEach(u=>{u?.hasOwnProperty(s)&&c.push(...u[s])}),_(c,e,s)}}function K(d,e,s,r=".",a=""){if(isNaN(+d))return d;const c=void 0===e?2:e,u=void 0===s?2:s;let g=String(Math.round(+d*Math.pow(10,u))/Math.pow(10,u));for(g.indexOf(".")<0&&c>0&&(g+=".");g.length-g.indexOf(".")<=c;)g+="0";const y=g.split(".");let M,L;M=a?y.length>=1?Ue(y[0],a):void 0:y.length>=1?y[0]:g,y.length>1&&(L=y[1]);let q="";return void 0!==M&&void 0!==L?q=`${M}${r}${L}`:null!=M&&(q=M),q}function ee(d,e,s,r,a="",c="",u=".",g=""){if(isNaN(+d))return d;const y=Math.round(1e6*parseFloat(d))/1e6;if(y<0){const M=Math.abs(y);return r?isNaN(e)&&isNaN(s)?`(${a}${Ue(`${M}`,g)}${c})`:`(${a}${K(M,e,s,u,g)}${c})`:isNaN(e)&&isNaN(s)?`-${a}${Ue(`${M}`,g)}${c}`:`-${a}${K(M,e,s,u,g)}${c}`}return isNaN(e)&&isNaN(s)?`${a}${Ue(`${d}`,g)}${c}`:`${a}${K(d,e,s,u,g)}${c}`}function U(d,e,s){if("function"==typeof d.queryFieldNameGetterFn){const r=d.queryFieldNameGetterFn(e);s=r?.indexOf(".")>=0?ie(e,r):e.hasOwnProperty(r)?e[r]:s}return s}function ie(d,e){return d&&e?e.split(".").reduce((s,r)=>s&&s[r],d):d}function J(d){return d&&d.translationNamespace?d.translationNamespace+(d.translationNamespaceSeparator||""):""}function Ce(d){return d.outputType||d.type||p.string}function Y(d){switch(d){case p.date:case p.dateTime:case p.dateIso:case p.dateTimeIso:case p.dateTimeShortIso:case p.dateTimeIsoAmPm:case p.dateTimeIsoAM_PM:case p.dateEuro:case p.dateEuroShort:case p.dateTimeEuro:case p.dateTimeShortEuro:case p.dateTimeEuroAmPm:case p.dateTimeEuroAM_PM:case p.dateTimeEuroShort:case p.dateTimeEuroShortAmPm:case p.dateTimeEuroShortAM_PM:case p.dateUs:case p.dateUsShort:case p.dateTimeUs:case p.dateTimeShortUs:case p.dateTimeUsAmPm:case p.dateTimeUsAM_PM:case p.dateTimeUsShort:case p.dateTimeUsShortAmPm:case p.dateTimeUsShortAM_PM:case p.dateUtc:return!0;default:return!1}}function Ee(d){let e;switch(d){case"<":case"LT":e=oe.lessThan;break;case"<=":case"LE":e=oe.lessThanOrEqual;break;case">":case"GT":e=oe.greaterThan;break;case">=":case"GE":e=oe.greaterThanOrEqual;break;case"!=":case"NE":e=oe.notEqual;break;case"*":case"a*":case"StartsWith":e=oe.startsWith;break;case"*z":case"EndsWith":e=oe.endsWith;break;case"=":case"==":case"EQ":e=oe.equal;break;case"IN":e=oe.in;break;case"NIN":case"NOT_IN":e=oe.notIn;break;case"<>":case"Not_Contains":case"NOT_CONTAINS":e=oe.notContains;break;default:e=oe.contains}return e}function Te(d){let e="";switch(d){case oe.greaterThan:case">":e=">";break;case oe.greaterThanOrEqual:case">=":e=">=";break;case oe.lessThan:case"<":e="<";break;case oe.lessThanOrEqual:case"<=":e="<=";break;case oe.notEqual:case"<>":e="<>";break;case oe.equal:case"=":case"==":case"EQ":e="=";break;case oe.startsWith:case"a*":case"*":e="a*";break;case oe.endsWith:case"*z":e="*z";break;default:e=d}return e}function Le(d){let e;if(Y(d))e=oe.equal;else switch(d){case p.unknown:case p.string:case p.text:case p.password:case p.readonly:e=oe.contains;break;default:e=oe.equal}return e}function tt(d,e){return Object.keys(d).reduce((s,r)=>(r!==e&&(s[r]=d[r]),s),{})}function Ue(d,e=","){if(null!=d){const s=`${d}`,r=s.split(".");return 2===r.length?`${r[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)}.${r[1]}`:s.replace(/\B(?=(\d{3})+(?!\d))/g,e)}return d}function ke(d,e,s={}){return Array.isArray(d)?d.find(e)||s:d}function Be(d){if(Array.isArray(d))for(;d.length>0;){const e=d.pop();e?.unsubscribe&&e.unsubscribe()}return d}var A=n(34475),be=n(22073);function He(d,e=!1){let s;switch(d){case p.dateTime:case p.dateTimeIso:s="YYYY-MM-DD HH:mm:ss";break;case p.dateTimeIsoAmPm:s="YYYY-MM-DD hh:mm:ss a";break;case p.dateTimeIsoAM_PM:s="YYYY-MM-DD hh:mm:ss A";break;case p.dateTimeShortIso:s="YYYY-MM-DD HH:mm";break;case p.dateEuro:s="DD/MM/YYYY";break;case p.dateEuroShort:s=e?"DD/MM/YY":"D/M/YY";break;case p.dateTimeEuro:s="DD/MM/YYYY HH:mm:ss";break;case p.dateTimeShortEuro:s=e?"DD/MM/YYYY HH:mm":"D/M/YYYY H:m";break;case p.dateTimeEuroAmPm:s="DD/MM/YYYY hh:mm:ss a";break;case p.dateTimeEuroAM_PM:s="DD/MM/YYYY hh:mm:ss A";break;case p.dateTimeEuroShort:s=e?"DD/MM/YY HH:mm:ss":"D/M/YY H:m:s";break;case p.dateTimeEuroShortAmPm:s=e?"DD/MM/YY hh:mm:ss a":"D/M/YY h:m:s a";break;case p.dateTimeEuroShortAM_PM:s=e?"DD/MM/YY hh:mm:ss A":"D/M/YY h:m:s A";break;case p.dateUs:s="MM/DD/YYYY";break;case p.dateUsShort:s=e?"MM/DD/YY":"M/D/YY";break;case p.dateTimeUs:s="MM/DD/YYYY HH:mm:ss";break;case p.dateTimeUsAmPm:s="MM/DD/YYYY hh:mm:ss a";break;case p.dateTimeUsAM_PM:s="MM/DD/YYYY hh:mm:ss A";break;case p.dateTimeUsShort:s=e?"MM/DD/YY HH:mm:ss":"M/D/YY H:m:s";break;case p.dateTimeUsShortAmPm:s=e?"MM/DD/YY hh:mm:ss a":"M/D/YY h:m:s a";break;case p.dateTimeUsShortAM_PM:s=e?"MM/DD/YY hh:mm:ss A":"M/D/YY h:m:s A";break;case p.dateTimeShortUs:s=e?"MM/DD/YYYY HH:mm":"M/D/YYYY H:m";break;case p.dateUtc:s="ISO8601";break;default:s="YYYY-MM-DD"}return s}function Ne(d,e,s){const r=e?He(e):void 0,a=He(s),c=d instanceof Date?d:Ke(d,r);return c&&void 0!==d?s===p.dateUtc?c.toISOString():(0,be.GP)(c,a,"en-US"):""}function Ke(d,e,s=!1){try{return!!d&&(d instanceof Date?d:(0,be.qg)({date:d,format:e,dateOverflow:s?"throw":"backward",locale:"en-US"}))}catch{return!1}}function $e(d){const e=d===p.date?void 0:He(d);return(s,r,a)=>function je(d,e,s,r,a){let c=0;if(d===e)c=0;else{let u=Ke(d,r,a),g=Ke(e,r,a);u||(u=new Date(1001,1,1)),g||(g=new Date(1001,1,1)),c=u.valueOf()-g.valueOf()}return s*c}(s,r,a,e,void 0!==e)}const nt={boolean:(d,e,s=N.neutral)=>{let r=0;return r=d===e?0:null===d?-1:null===e?1:s?d<e?-1:1:d<e?1:-1,s*r},date:$e(p.date),dateIso:$e(p.dateIso),dateUtc:$e(p.dateUtc),dateTime:$e(p.dateTime),dateTimeIso:$e(p.dateTimeIso),dateTimeIsoAmPm:$e(p.dateTimeIsoAmPm),dateTimeIsoAM_PM:$e(p.dateTimeIsoAM_PM),dateTimeShortIso:$e(p.dateTimeShortIso),dateEuro:$e(p.dateEuro),dateEuroShort:$e(p.dateEuroShort),dateTimeShortEuro:$e(p.dateTimeShortEuro),dateTimeEuro:$e(p.dateTimeEuro),dateTimeEuroAmPm:$e(p.dateTimeEuroAmPm),dateTimeEuroAM_PM:$e(p.dateTimeEuroAM_PM),dateTimeEuroShort:$e(p.dateTimeEuroShort),dateTimeEuroShortAmPm:$e(p.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:$e(p.dateTimeEuroShortAM_PM),dateUs:$e(p.dateUs),dateUsShort:$e(p.dateUsShort),dateTimeShortUs:$e(p.dateTimeShortUs),dateTimeUs:$e(p.dateTimeUs),dateTimeUsAmPm:$e(p.dateTimeUsAmPm),dateTimeUsAM_PM:$e(p.dateTimeUsAM_PM),dateTimeUsShort:$e(p.dateTimeUsShort),dateTimeUsShortAmPm:$e(p.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:$e(p.dateTimeUsShortAM_PM),numeric:(d,e,s=N.neutral,r,a)=>{const c=r?.valueCouldBeUndefined??a?.cellValueCouldBeUndefined??!1,u=isNaN(d)||""===d||null===d||c&&void 0===d?-1/0:parseFloat(d),g=isNaN(e)||""===e||null===e||c&&void 0===e?-1/0:parseFloat(e);return s*(u===g?0:u>g?1:-1)},objectString:(d,e,s=N.neutral,r,a)=>{if(!r||!r.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');const c=d?.hasOwnProperty(r.dataKey)?d[r.dataKey]:d,u=e?.hasOwnProperty(r.dataKey)?e[r.dataKey]:e,g=r?.valueCouldBeUndefined??a?.cellValueCouldBeUndefined??!1;let y=0;return y="object"!=typeof d?-1/0:"object"!=typeof e?1/0:null===c||g&&void 0===c?-1:null===u||g&&void 0===u?1:c===u?0:s?c<u?-1:1:c<u?1:-1,s*y},string:(d,e,s=N.neutral,r,a)=>{let c=0;const u=r?.valueCouldBeUndefined??a?.cellValueCouldBeUndefined??!1;return d===e?c=0:null===d||u&&void 0===d?c=-1:null===e||u&&void 0===e?c=1:(a?.ignoreAccentOnStringFilterAndSort&&(d=(0,A.removeAccentFromText)(d,!1),e=(0,A.removeAccentFromText)(e,!1)),c=s?d<e?-1:1:d<e?1:-1),s*c}};function gt(d,e,s,r,a,c){let u=0;switch(d){case p.boolean:u=nt.boolean(e,s,r,a,c);break;case p.float:case p.integer:case p.number:u=nt.numeric(e,s,r,a,c);break;case p.date:case p.dateIso:case p.dateUtc:case p.dateTime:case p.dateTimeIso:case p.dateTimeIsoAmPm:case p.dateTimeIsoAM_PM:case p.dateTimeShortIso:case p.dateEuro:case p.dateEuroShort:case p.dateTimeShortEuro:case p.dateTimeEuro:case p.dateTimeEuroAmPm:case p.dateTimeEuroAM_PM:case p.dateTimeEuroShort:case p.dateTimeEuroShortAmPm:case p.dateTimeEuroShortAM_PM:case p.dateUs:case p.dateUsShort:case p.dateTimeShortUs:case p.dateTimeUs:case p.dateTimeUsAmPm:case p.dateTimeUsAM_PM:case p.dateTimeUsShort:case p.dateTimeUsShortAmPm:case p.dateTimeUsShortAM_PM:u=$e(d).call(this,e,s,r,a,c);break;case p.object:u=nt.objectString(e,s,r,a,c);break;default:u=nt.string(e,s,r,a,c)}return u}var Qe=n(38465),mt=n(74523);const Et=function at(d){var e=document,s=d.container||e.createElement("div"),r=d.preventSubmit||0;s.id=s.id||"autocomplete-"+rt();var pe,Ve,a=s.style,c=d.debounceWaitMs||0,u=d.disableAutoSelect||!1,g=s.parentElement,y=[],M="",L=2,q=d.showOnFocus,Ie=0,Ge=!1,Je=!1;if(void 0!==d.minLength&&(L=d.minLength),!d.input)throw new Error("input undefined");var Xe=d.input;function rt(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function _e(){var Pt=s.parentNode;Pt&&Pt.removeChild(s)}function qe(){Ve&&window.clearTimeout(Ve)}function yt(){return!!s.parentNode}function Bt(){Ie++,y=[],M="",pe=void 0,Xe.setAttribute("aria-activedescendant",""),Xe.setAttribute("aria-expanded","false"),_e()}function Gt(){s.textContent="",Xe.setAttribute("aria-activedescendant","");var Pt=function(zi,gn,Ki){var oi=e.createElement("div");return oi.textContent=zi.label||"",oi};d.render&&(Pt=d.render);var fn=function(zi,gn){var Ki=e.createElement("div");return Ki.textContent=zi,Ki};d.renderGroup&&(fn=d.renderGroup);var Ri=e.createDocumentFragment(),Cn=rt();if(y.forEach(function(zi,gn){if(zi.group&&zi.group!==Cn){Cn=zi.group;var Ki=fn(zi.group,M);Ki&&(Ki.className+=" group",Ri.appendChild(Ki))}var oi=Pt(zi,M,gn);oi&&(oi.id=s.id+"_"+gn,oi.setAttribute("role","option"),oi.addEventListener("click",function(ki){Je=!0;try{d.onSelect(zi,Xe)}finally{Je=!1}Bt(),ki.preventDefault(),ki.stopPropagation()}),zi===pe&&(oi.className+=" selected",oi.setAttribute("aria-selected","true"),Xe.setAttribute("aria-activedescendant",oi.id)),Ri.appendChild(oi))}),s.appendChild(Ri),y.length<1){if(!d.emptyMsg)return void Bt();var Si=e.createElement("div");Si.id=s.id+"_"+rt(),Si.className="empty",Si.textContent=d.emptyMsg,s.appendChild(Si),Xe.setAttribute("aria-activedescendant",Si.id)}(function ft(){s.parentNode||(g||e.body).appendChild(s)})(),function Ot(){if(yt()){Xe.setAttribute("aria-expanded","true"),a.height="auto",a.width=Xe.offsetWidth+"px";var fn,Pt=0;Ri(),Ri(),d.customize&&fn&&d.customize(Xe,fn,s,Pt)}function Ri(){var Cn=e.documentElement,Si=Cn.clientTop||e.body.clientTop||0,zi=Cn.clientLeft||e.body.clientLeft||0,gn=window.pageYOffset||Cn.scrollTop,Ki=window.pageXOffset||Cn.scrollLeft,oi=(fn=Xe.getBoundingClientRect()).top+Xe.offsetHeight+gn-Si,ki=fn.left+Ki-zi;a.top=oi+"px",a.left=ki+"px",(Pt=window.innerHeight-(fn.top+Xe.offsetHeight))<0&&(Pt=0),a.top=oi+"px",a.bottom="",a.left=ki+"px",a.maxHeight=Pt+"px"}}(),ds()}function ii(){yt()&&Gt()}function Yn(){ii()}function fi(Pt){Pt.target!==s?ii():Pt.preventDefault()}function Un(){Je||Hs(0)}function ds(){var Pt=s.getElementsByClassName("selected");if(Pt.length>0){var fn=Pt[0],Ri=fn.previousElementSibling;if(Ri&&-1!==Ri.className.indexOf("group")&&!Ri.previousElementSibling&&(fn=Ri),fn.offsetTop<s.scrollTop)s.scrollTop=fn.offsetTop;else{var Cn=fn.offsetTop+fn.offsetHeight,Si=s.scrollTop+s.offsetHeight;Cn>Si&&(s.scrollTop+=Cn-Si)}}}function $i(Pt){y.length>0&&(function ed(Pt){var fn=e.getElementById(s.id+"_"+Pt);fn&&(fn.classList.remove("selected"),fn.removeAttribute("aria-selected"),Xe.removeAttribute("aria-activedescendant"))}(Pt),function Di(Pt){var fn=e.getElementById(s.id+"_"+Pt);fn&&(fn.classList.add("selected"),fn.setAttribute("aria-selected","true"),Xe.setAttribute("aria-activedescendant",fn.id))}(y.indexOf(pe)),ds())}function gr(Pt){var fn=Pt.key;switch(fn){case"ArrowUp":case"ArrowDown":case"Escape":!function bi(Pt,fn){var Ri=yt();if("Escape"===fn)Bt();else{if(!Ri||y.length<1)return;"ArrowUp"===fn?function cs(){var Pt=y.indexOf(pe);pe=-1===Pt?void 0:y[(Pt+y.length-1)%y.length],$i(Pt)}():function si(){var Pt=y.indexOf(pe);pe=y.length<1?void 0:-1===Pt?y[0]:y[(Pt+1)%y.length],$i(Pt)}()}Pt.preventDefault(),Ri&&Pt.stopPropagation()}(Pt,fn);break;case"Enter":!function Nc(Pt){if(pe){2===r&&Pt.preventDefault(),Je=!0;try{d.onSelect(pe,Xe)}finally{Je=!1}Bt()}1===r&&Pt.preventDefault()}(Pt)}}function $u(){q&&Hs(1)}function Hs(Pt){Xe.value.length>=L||1===Pt?(qe(),Ve=window.setTimeout(function(){return td(Xe.value,Pt,Xe.selectionStart||0)},0===Pt||2===Pt?c:0)):Bt()}function td(Pt,fn,Ri){if(!Ge){var Cn=++Ie;d.fetch(Pt,function(Si){Ie===Cn&&Si&&(M=Pt,pe=(y=Si).length<1||u?void 0:y[0],Gt())},fn,Ri)}}function Fc(Pt){d.keyup?d.keyup({event:Pt,fetch:function(){return Hs(0)}}):!yt()&&"ArrowDown"===Pt.key&&Hs(0)}function Lc(Pt){d.click&&d.click({event:Pt,fetch:function(){return Hs(2)}})}function wc(){setTimeout(function(){e.activeElement!==Xe&&Bt()},200)}return s.className=[s.className,"autocomplete",d.className||""].join(" ").trim(),s.setAttribute("role","listbox"),Xe.setAttribute("role","combobox"),Xe.setAttribute("aria-expanded","false"),Xe.setAttribute("aria-autocomplete","list"),Xe.setAttribute("aria-controls",s.id),Xe.setAttribute("aria-owns",s.id),Xe.setAttribute("aria-activedescendant",""),Xe.setAttribute("aria-haspopup","listbox"),a.position="absolute",s.addEventListener("mousedown",function(Pt){Pt.stopPropagation(),Pt.preventDefault()}),s.addEventListener("focus",function(){return Xe.focus()}),_e(),Xe.addEventListener("keyup",Fc),Xe.addEventListener("click",Lc),Xe.addEventListener("keydown",gr),Xe.addEventListener("input",Un),Xe.addEventListener("blur",wc),Xe.addEventListener("focus",$u),window.addEventListener("resize",Yn),e.addEventListener("scroll",fi,!0),{destroy:function Bc(){Xe.removeEventListener("focus",$u),Xe.removeEventListener("keyup",Fc),Xe.removeEventListener("click",Lc),Xe.removeEventListener("keydown",gr),Xe.removeEventListener("input",Un),Xe.removeEventListener("blur",wc),window.removeEventListener("resize",Yn),e.removeEventListener("scroll",fi,!0),Xe.removeAttribute("role"),Xe.removeAttribute("aria-expanded"),Xe.removeAttribute("aria-autocomplete"),Xe.removeAttribute("aria-controls"),Xe.removeAttribute("aria-activedescendant"),Xe.removeAttribute("aria-owns"),Xe.removeAttribute("aria-haspopup"),qe(),Bt(),Ge=!0},fetch:function Vc(){td(Xe.value,3,Xe.selectionStart||0)}}};var St=n(69390),dn=n(8108);function Ht(d,e,s,r){const{oldVal:a,newVal:c,columnDef:u,selectedSettings:g,updatePickerUI:y}=r;if(a!==c){const M=d.type||u.type,L=u.outputType||d.type||u.type||p.dateUtc,q=Array.isArray(c)?c:[c||""],pe=[],Ie=He(p.dateIso),Ve=M?He(M):void 0;for(const Je of q){const Xe=Je instanceof Date?Je:Ke(Je,Ve);Xe&&pe.push(Xe)}const Ge=g??{dates:[pe.map(Je=>(0,be.GP)(Je,Ie)).join(":")],month:pe[0]?.getMonth(),year:pe[0]?.getFullYear(),time:"ISO8601"===Ve||(Ve||"").toLowerCase().includes("h")?(0,be.GP)(pe[0],"HH:mm"):void 0};(0,dn.j)(s.settings.selected,Ge)||(s.settings.selected=Ge,y&&s?.update&&s.update({dates:!0,month:!0,year:!0,time:!0})),e.value=q.length?pe.map(Je=>Ne(Je,void 0,L)).join(" \u2014 "):""}}function xn(d,e){const s=(0,A.createDomElement)("select",{className:"form-control"});for(const r of d){const a=document.createElement("option");a.value=r.operator,e.applyHtmlCode(a,`${(0,A.htmlEncodeWithPadding)(r.operatorAlt||r.operator,3)}${r.descAlt||r.desc}`),s.appendChild(a)}return s}function $t(d,e,s,r,a){return cn.apply(this,arguments)}function cn(){return(cn=(0,mt.A)(function*(d,e,s,r,a){const c=e?.filter??{},u=c?.collectionOptions??{};let g=null;if(d){const y=r?.isObservable(d)??!1;y&&r&&(g=yield B(r,d));const M=yield d;if(Array.isArray(M)?g=M:M?.status>=200&&M.status<300&&"function"==typeof M.json?g=yield M.json():M&&M.content&&(g=M.content),!Array.isArray(g)&&u?.collectionInsideObjectProperty&&(g=ie(g||M,u.collectionInsideObjectProperty||"")),!Array.isArray(g))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');c.collection=g,s(g),y&&function Nn(d,e,s,r){const a=d?.filter??{},c=s?.createSubject();a.collectionAsync=c,r&&c&&r.push(c.subscribe(u=>function _t(d,e,s){const r=e?.filter??{},a=r?.collectionOptions??{};if(a&&a.collectionInsideObjectProperty&&(d=ie(d,a.collectionInsideObjectProperty)),!Array.isArray(d))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');r.collection=d,s(d)}(u,d,e)))}(e,s,r,a)}return g})).apply(this,arguments)}function xt(d,e,s,r,a){if(r?.enableTranslate&&a?.translate){const u=J(r);return a.translate(`${u}${d}`)}return(r.locales||V.locales)?.[e]??s}function en(d,e){return[{operator:"",desc:""},{operator:"=",desc:xt("EQUAL_TO","TEXT_EQUAL_TO","Equal to",d,e)},{operator:"<",desc:xt("LESS_THAN","TEXT_LESS_THAN","Less than",d,e)},{operator:"<=",desc:xt("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",d,e)},{operator:">",desc:xt("GREATER_THAN","TEXT_GREATER_THAN","Greater than",d,e)},{operator:">=",desc:xt("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",d,e)},{operator:"<>",desc:xt("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",d,e)}]}function fs(d,e,s){if(d.compoundOperatorAltTexts)for(const r of e)if(d.compoundOperatorAltTexts.hasOwnProperty(s)){const a=d.compoundOperatorAltTexts[s][r.operator];r.operatorAlt=a?.operatorAlt||"",r.descAlt=a?.descAlt||""}}var Wt=Object.defineProperty,mi=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable,Fi=(d,e,s)=>e in d?Wt(d,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[e]=s,Tt=(d,e)=>{for(var s in e||(e={}))yn.call(e,s)&&Fi(d,s,e[s]);if(mi)for(var s of mi(e))ri.call(e,s)&&Fi(d,s,e[s]);return d},pt=(d,e,s)=>(Fi(d,"symbol"!=typeof e?e+"":e,s),s);const ct={calendar:"vanilla-calendar",calendarDefault:"vanilla-calendar_default",calendarMultiple:"vanilla-calendar_multiple",calendarMonth:"vanilla-calendar_month",calendarYear:"vanilla-calendar_year",calendarHidden:"vanilla-calendar_hidden",calendarToInput:"vanilla-calendar_to-input",calendarToInputTop:"vanilla-calendar_to-input_top",calendarToInputBottom:"vanilla-calendar_to-input_bottom",controls:"vanilla-calendar-controls",grid:"vanilla-calendar-grid",gridDisabled:"vanilla-calendar-grid_disabled",column:"vanilla-calendar-column",columnMonth:"vanilla-calendar-column_month",columnYear:"vanilla-calendar-column_year",header:"vanilla-calendar-header",headerContent:"vanilla-calendar-header__content",month:"vanilla-calendar-month",monthDisabled:"vanilla-calendar-month_disabled",year:"vanilla-calendar-year",yearDisabled:"vanilla-calendar-year_disabled",arrow:"vanilla-calendar-arrow",arrowPrev:"vanilla-calendar-arrow_prev",arrowNext:"vanilla-calendar-arrow_next",wrapper:"vanilla-calendar-wrapper",content:"vanilla-calendar-content",week:"vanilla-calendar-week",weekDay:"vanilla-calendar-week__day",weekDayWeekend:"vanilla-calendar-week__day_weekend",days:"vanilla-calendar-days",daysSelecting:"vanilla-calendar-days_selecting",months:"vanilla-calendar-months",monthsSelecting:"vanilla-calendar-months_selecting",monthsMonth:"vanilla-calendar-months__month",monthsMonthSelected:"vanilla-calendar-months__month_selected",monthsMonthDisabled:"vanilla-calendar-months__month_disabled",years:"vanilla-calendar-years",yearsSelecting:"vanilla-calendar-years_selecting",yearsYear:"vanilla-calendar-years__year",yearsYearSelected:"vanilla-calendar-years__year_selected",yearsYearDisabled:"vanilla-calendar-years__year_disabled",time:"vanilla-calendar-time",timeContent:"vanilla-calendar-time__content",timeHours:"vanilla-calendar-time__hours",timeMinutes:"vanilla-calendar-time__minutes",timeKeeping:"vanilla-calendar-time__keeping",timeRanges:"vanilla-calendar-time__ranges",timeRange:"vanilla-calendar-time__range",day:"vanilla-calendar-day",dayHoverFirst:"vanilla-calendar-day_hover-first",dayHoverLast:"vanilla-calendar-day_hover-last",dayHoverIntermediate:"vanilla-calendar-day_hover-intermediate",daySelectedFirst:"vanilla-calendar-day_selected-first",daySelectedLast:"vanilla-calendar-day_selected-last",daySelectedIntermediate:"vanilla-calendar-day_selected-intermediate",dayPopup:"vanilla-calendar-day__popup",dayBtn:"vanilla-calendar-day__btn",dayBtnPrev:"vanilla-calendar-day__btn_prev",dayBtnNext:"vanilla-calendar-day__btn_next",dayBtnToday:"vanilla-calendar-day__btn_today",dayBtnSelected:"vanilla-calendar-day__btn_selected",dayBtnHover:"vanilla-calendar-day__btn_hover",dayBtnDisabled:"vanilla-calendar-day__btn_disabled",dayBtnWeekend:"vanilla-calendar-day__btn_weekend",dayBtnHoliday:"vanilla-calendar-day__btn_holiday",weekNumbers:"vanilla-calendar-week-numbers",weekNumbersTitle:"vanilla-calendar-week-numbers__title",weekNumbersContent:"vanilla-calendar-week-numbers__content",weekNumber:"vanilla-calendar-week-number",isFocus:"vanilla-calendar-is-focus"},On=d=>`<div class="${d.controls}"><#ArrowPrev /><#ArrowNext /></div><div class="${d.grid}"><#Multiple><div class="${d.column}"><div class="${d.header}"><div class="${d.headerContent}"><#Month /><#Year /></div></div><div class="${d.wrapper}"><#WeekNumbers /><div class="${d.content}"><#Week /><#Days /></div></div></div><#/Multiple></div><#ControlTime />`,Li=d=>`<div class="${d.header}"><div class="${d.headerContent}"><#Month /><#Year /></div></div><div class="${d.wrapper}"><div class="${d.content}"><#Months /></div></div>`,li=d=>`<div class="${d.header}"><#ArrowPrev /><div class="${d.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${d.wrapper}"><div class="${d.content}"><#Years /></div></div>`;class sa{constructor(){var d;pt(this,"isInit",!1),pt(this,"isInputInit",!1),pt(this,"input",!1),pt(this,"type","default"),pt(this,"months",2),pt(this,"jumpMonths",1),pt(this,"toggleSelected",!0),pt(this,"jumpToSelectedDate",!1),pt(this,"date",{min:"1970-01-01",max:"2470-12-31",today:new Date}),pt(this,"settings",{lang:"en",iso8601:!0,range:{min:this.date.min,max:this.date.max,disablePast:!1,disableGaps:!1,edgesOnly:!1,disableAllDays:!1,disableWeekday:void 0,disabled:void 0,enabled:void 0},selection:{day:"single",month:!0,year:!0,time:!1,controlTime:"all",stepHours:1,stepMinutes:1,cancelableDay:!0},selected:{dates:void 0,month:void 0,year:void 0,holidays:void 0,time:void 0},visibility:{theme:"system",themeDetect:"html[data-theme]",monthShort:!0,weekNumbers:!1,weekend:!0,today:!0,disabled:!1,daysOutside:!0,positionToInput:"left"}}),pt(this,"locale",{months:[],weekday:[]}),pt(this,"sanitizer",e=>e),pt(this,"actions",{clickDay:null,clickWeekNumber:null,clickMonth:null,clickYear:null,clickArrow:null,changeTime:null,changeToInput:null,getDays:null,getMonths:null,getYears:null,initCalendar:null,updateCalendar:null,destroyCalendar:null,showCalendar:null,hideCalendar:null}),pt(this,"popups",{}),pt(this,"CSSClasses",Tt({},ct)),pt(this,"DOMTemplates",{default:(d=this.CSSClasses,`<div class="${d.header}"><#ArrowPrev /><div class="${d.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${d.wrapper}"><#WeekNumbers /><div class="${d.content}"><#Week /><#Days /></div></div><#ControlTime />`),multiple:On(this.CSSClasses),month:Li(this.CSSClasses),year:li(this.CSSClasses)}),pt(this,"HTMLElement"),pt(this,"HTMLOriginalElement"),pt(this,"HTMLInputElement"),pt(this,"rangeMin"),pt(this,"rangeMax"),pt(this,"rangeDisabled"),pt(this,"rangeEnabled"),pt(this,"selectedDates"),pt(this,"selectedHolidays"),pt(this,"selectedMonth"),pt(this,"selectedYear"),pt(this,"selectedHours"),pt(this,"selectedMinutes"),pt(this,"selectedKeeping"),pt(this,"selectedTime"),pt(this,"currentType"),pt(this,"correctMonths"),pt(this,"viewYear"),pt(this,"dateMin"),pt(this,"dateMax")}}const Xn=d=>`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,Mn=d=>new Date(`${d}T00:00:00`),gs=d=>d.reduce((e,s)=>{if(s instanceof Date||"number"==typeof s){const r=s instanceof Date?s:new Date(s);e.push(r.toISOString().substring(0,10))}else s.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(s):s.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,(r,a,c)=>{const u=Mn(a),g=Mn(c),y=new Date(u.getTime());for(;y<=g;y.setDate(y.getDate()+1))e.push(Xn(y));return r});return e},[]),nl=()=>{const d=new Date;return new Date(d.getTime()-6e4*d.getTimezoneOffset()).toISOString().substring(0,10)},Ii=d=>d?{0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(d)]||String(d):"",xi_notInit='The calendar has not been initialized, please initialize it using the "init()" method first.',Qt=d=>{d.currentType=d.type,(d=>{var e;if(d.jumpToSelectedDate&&null!=(e=d.settings.selected.dates)&&e.length&&void 0===d.settings.selected.month&&void 0===d.settings.selected.year){const a=Mn(gs(d.settings.selected.dates)[0]);d.settings.selected.month=a.getMonth(),d.settings.selected.year=a.getFullYear()}const s=void 0!==d.settings.selected.month&&Number(d.settings.selected.month)>=0&&Number(d.settings.selected.month)<12,r=void 0!==d.settings.selected.year&&Number(d.settings.selected.year)>=0&&Number(d.settings.selected.year)<=9999;d.selectedMonth=s?Number(d.settings.selected.month):d.date.today.getMonth(),d.selectedYear=r?Number(d.settings.selected.year):d.date.today.getFullYear(),d.viewYear=d.selectedYear})(d),(d=>{var e,s,r;"today"===d.settings.range.min&&(d.settings.range.min=nl()),"today"===d.settings.range.max&&(d.settings.range.max=nl()),d.settings.range.min=Mn(d.date.min)>=Mn(d.settings.range.min)?d.date.min:d.settings.range.min,d.settings.range.max=Mn(d.date.max)<=Mn(d.settings.range.max)?d.date.max:d.settings.range.max;const a=d.settings.range.disablePast&&!d.settings.range.disableAllDays&&Mn(d.settings.range.min)<d.date.today;d.rangeMin=a||d.settings.range.disableAllDays?Xn(d.date.today):d.settings.range.min,d.rangeMax=d.settings.range.disableAllDays?Xn(d.date.today):d.settings.range.max,d.rangeDisabled=d.settings.range.disabled&&!d.settings.range.disableAllDays?gs(d.settings.range.disabled):d.settings.range.disableAllDays?[d.rangeMin]:[],d.rangeDisabled.length>1&&d.rangeDisabled.sort((c,u)=>+new Date(c)-+new Date(u)),d.rangeEnabled=d.settings.range.enabled?gs(d.settings.range.enabled):[],null!=(e=d.rangeEnabled)&&e[0]&&null!=(s=d.rangeDisabled)&&s[0]&&(d.rangeDisabled=d.rangeDisabled.filter(c=>!d.rangeEnabled.includes(c))),d.rangeEnabled.length>1&&d.rangeEnabled.sort((c,u)=>+new Date(c)-+new Date(u)),null!=(r=d.rangeEnabled)&&r[0]&&d.settings.range.disableAllDays&&(d.rangeMin=d.rangeEnabled[0],d.rangeMax=d.rangeEnabled[d.rangeEnabled.length-1])})(d),(d=>{var e,s;d.selectedDates=null!=(e=d.settings.selected.dates)&&e[0]?gs(d.settings.selected.dates):[],d.selectedHolidays=null!=(s=d.settings.selected.holidays)&&s[0]?gs(d.settings.selected.holidays):[]})(d),(d=>{d.dateMin=Mn(d.settings.visibility.disabled?d.date.min:d.rangeMin),d.dateMax=Mn(d.settings.visibility.disabled?d.date.max:d.rangeMax)})(d),(d=>{const e=!0===d.settings.selection.time||12===d.settings.selection.time;if(e||24===d.settings.selection.time){let s=!1;"string"==typeof d.settings.selected.time&&d.settings.selected.time.replace(e?/^([0-9]|0[1-9]|1[0-2]):([0-5][0-9])|(AM|PM)/g:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])/g,(a,c,u,g)=>(c&&u&&(s=!0,d.selectedHours=c,d.selectedMinutes=u),g&&e?d.selectedKeeping=g:e&&(d.selectedKeeping="AM"),"")),!s&&e?(d.selectedHours=Ii(String(d.date.today.getHours())),d.selectedMinutes=String(d.date.today.getMinutes()),d.selectedKeeping=Number(d.date.today.getHours())>=12?"PM":"AM"):s||(d.selectedHours=String(d.date.today.getHours()),d.selectedMinutes=String(d.date.today.getMinutes())),d.selectedHours=Number(d.selectedHours)<10?`0${Number(d.selectedHours)}`:`${d.selectedHours}`,d.selectedMinutes=Number(d.selectedMinutes)<10?`0${Number(d.selectedMinutes)}`:`${d.selectedMinutes}`,d.selectedTime=`${d.selectedHours}:${d.selectedMinutes}${d.selectedKeeping?` ${d.selectedKeeping}`:""}`}else if(d.settings.selection.time)throw new Error("The value of the time property can be: false, true, 12 or 24.")})(d),(d=>{d.correctMonths="multiple"===d.type?1===d.months?2:d.months>12?12:d.months:1})(d)},Dn=({arrowPrev:d,arrowNext:e,isPrevHidden:s,isNextHidden:r})=>{d.style.visibility=s?"hidden":"",e.style.visibility=r?"hidden":""},Yi=d=>{var e,s;if("month"===d.currentType)return;const r=null==(e=d.HTMLElement)?void 0:e.querySelector(`.${d.CSSClasses.arrowPrev}`),a=null==(s=d.HTMLElement)?void 0:s.querySelector(`.${d.CSSClasses.arrowNext}`);!r||!a||{default:()=>{const c=Mn(Xn(new Date(d.selectedYear,d.selectedMonth,1))),u=new Date(c.getTime()),g=new Date(c.getTime());u.setMonth(u.getMonth()-d.jumpMonths),g.setMonth(g.getMonth()+d.jumpMonths),d.settings.selection.year||(d.dateMin.setFullYear(c.getFullYear()),d.dateMax.setFullYear(c.getFullYear()));const y=!d.settings.selection.month||u.getFullYear()<d.dateMin.getFullYear()||u.getFullYear()===d.dateMin.getFullYear()&&u.getMonth()<d.dateMin.getMonth(),M=!d.settings.selection.month||g.getFullYear()>d.dateMax.getFullYear()||g.getFullYear()===d.dateMax.getFullYear()&&g.getMonth()>d.dateMax.getMonth();Dn({arrowPrev:r,arrowNext:a,isPrevHidden:y,isNextHidden:M})},year:()=>{Dn({arrowPrev:r,arrowNext:a,isPrevHidden:d.dateMin.getFullYear()&&d.viewYear-7<=d.dateMin.getFullYear(),isNextHidden:d.dateMax.getFullYear()&&d.viewYear+7>=d.dateMax.getFullYear()})}}["multiple"===d.currentType?"default":d.currentType]()},rn=(d,e)=>{if(!d)return null;const s=Mn(d),r=e?s.getDay()||7:s.getDay();s.setDate(s.getDate()+4-r);const a=new Date(s.getFullYear(),0,1),c=Math.ceil(((+s-+a)/864e5+1)/7);return{year:s.getFullYear(),week:c}},Gs=(d,e,s,r,a)=>{const c=e[s].querySelector(`.${d.CSSClasses.dayBtn}`),u=rn(c?.dataset.calendarDay,d.settings.iso8601);if(!u)return;const g=r.cloneNode(!0);g.innerText=String(u.week),g.dataset.calendarYearWeek=String(u.year),a.appendChild(g)},bo=(d,e,s,r,a,c,u,g)=>{const y=document.createElement("div");y.className=d.CSSClasses.day;const M=document.createElement("button");M.className=`${d.CSSClasses.dayBtn}${g?` ${g}`:""}`,M.type="button",M.innerText=String(r),M.dataset.calendarDay=c,d.settings.visibility.weekNumbers&&(()=>{const L=rn(c,d.settings.iso8601);L&&(M.dataset.calendarWeekNumber=String(L.week))})(),u?d.settings.visibility.daysOutside&&y.appendChild(M):y.appendChild(M),((d,e,s)=>{var r,a,c,u,g;const y=null==(r=d.settings.range.disableWeekday)?void 0:r.includes(s),M=d.settings.range.disableAllDays&&!(null==(a=d.rangeEnabled)||!a[0]);!y&&!M||null!=(c=d.rangeEnabled)&&c.includes(e)||null!=(u=d.rangeDisabled)&&u.includes(e)||(d.rangeDisabled.push(e),null==(g=d.rangeDisabled)||g.sort((L,q)=>+new Date(L)-+new Date(q)))})(d,c,a),((d,e,s,r,a,c,u)=>{var g,y,M;if((Mn(d.rangeMin)>Mn(c)||Mn(d.rangeMax)<Mn(c)||null!=(g=d.rangeDisabled)&&g.includes(c)||!d.settings.selection.month&&u||!d.settings.selection.year&&Mn(c).getFullYear()!==e)&&(r.classList.add(d.CSSClasses.dayBtnDisabled),r.tabIndex=-1),d.settings.visibility.today&&Xn(d.date.today)===c&&r.classList.add(d.CSSClasses.dayBtnToday),!d.settings.visibility.weekend||0!==a&&6!==a||r.classList.add(d.CSSClasses.dayBtnWeekend),null!=(y=d.selectedHolidays)&&y.includes(c)&&r.classList.add(d.CSSClasses.dayBtnHoliday),null!=(M=d.selectedDates)&&M.includes(c)&&(r.classList.add(d.CSSClasses.dayBtnSelected),d.selectedDates.length>1&&"multiple-ranged"===d.settings.selection.day&&(d.selectedDates[0]===c&&s.classList.add(d.CSSClasses.daySelectedFirst),d.selectedDates[d.selectedDates.length-1]===c&&s.classList.add(d.CSSClasses.daySelectedLast),d.selectedDates[0]!==c&&d.selectedDates[d.selectedDates.length-1]!==c&&s.classList.add(d.CSSClasses.daySelectedIntermediate))),d.settings.range.edgesOnly&&d.selectedDates.length>1&&"multiple-ranged"===d.settings.selection.day){const L=+new Date(d.selectedDates[0]),q=+new Date(d.selectedDates[d.selectedDates.length-1]),pe=+new Date(c);pe>L&&pe<q&&(r.classList.add(d.CSSClasses.dayBtnSelected),s.classList.add(d.CSSClasses.daySelectedIntermediate))}})(d,e,y,M,a,c,u),s.appendChild(y),d.actions.getDays&&d.actions.getDays(r,c,y,M,d)},No=d=>{const e=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.days}`),s=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.weekNumbers}`),r=new Date(d.selectedYear,d.selectedMonth,1);e.forEach((a,c)=>{const u=new Date(r);u.setMonth(u.getMonth()+c);const g=u.getMonth(),y=u.getFullYear(),M=new Date(y,g,1),L=new Date(y,g+1,0).getDate(),q=d.settings.iso8601?(0!==M.getDay()?M.getDay():7)-1:M.getDay();d.settings.selection.day&&a.classList.add(d.CSSClasses.daysSelecting),a.textContent="",((d,e,s,r,a)=>{let c=new Date(s,r,0).getDate()-(a-1);const u=0===r?s-1:s,g=0===r?12:r<10?`0${r}`:r;for(let y=a;y>0;y--,c++){const M=`${u}-${g}-${c}`,L=Mn(M).getDay();bo(d,s,e,c,L,M,!0,d.CSSClasses.dayBtnPrev)}})(d,a,y,g,q),((d,e,s,r,a)=>{for(let c=1;c<=s;c++){const u=new Date(r,a,c),g=Xn(u),y=u.getDay();bo(d,r,e,c,y,g,!1,null)}})(d,a,L,y,g),((d,e,s,r,a,c)=>{const u=c+s,g=7*Math.ceil(u/7)-u,y=a+1===12?r+1:r,M=a+1===12?"01":a+2<10?`0${a+2}`:a+2;for(let L=1;L<=g;L++){const q=`${y}-${M}-${L<10?`0${L}`:String(L)}`,pe=Mn(q).getDay();bo(d,r,e,L,pe,q,!0,d.CSSClasses.dayBtnNext)}})(d,a,L,y,g,q),((d,e,s,r,a)=>{if(!d.settings.visibility.weekNumbers)return;r.textContent="";const c=document.createElement("b");c.className=d.CSSClasses.weekNumbersTitle,c.innerText="#",r.appendChild(c);const u=document.createElement("div");u.className=d.CSSClasses.weekNumbersContent,r.appendChild(u);const g=document.createElement("button");g.type="button",g.className=d.CSSClasses.weekNumber;const y=a.querySelectorAll(`.${d.CSSClasses.day}`),M=Math.ceil((e+s)/7);for(let L=0;L<M;L++)Gs(d,y,0===L?6:7*L,g,u)})(d,q,L,s[c],a),((d,e)=>{var s;d.popups&&(null==(s=Object.entries(d.popups))||s.forEach(([r,a])=>((d,e,s,r)=>{const a=s.querySelector(`[data-calendar-day="${d}"]`);a&&(e?.modifier&&a.classList.add(...e.modifier.trim().split(" ")),e?.html&&(a.parentElement.innerHTML+=`<div class="${r}">${e.html}</div>`))})(r,a,e,d.CSSClasses.dayPopup)))})(d,a)})},ro=d=>{var e,s;const r=null==(e=d.HTMLElement)?void 0:e.querySelectorAll("[data-calendar-selected-month]"),a=null==(s=d.HTMLElement)?void 0:s.querySelectorAll("[data-calendar-selected-year]");if(!r?.[0]&&a?.[0])return;const c=new Date(d.selectedYear,d.selectedMonth,1);r?.forEach((u,g)=>((d,e,s,r)=>{const a=new Date(r.setMonth(d.selectedMonth+s)).getMonth(),c=!1===d.settings.selection.month||"only-arrows"===d.settings.selection.month;e.tabIndex=c?-1:0,e.classList.toggle(d.CSSClasses.monthDisabled,c),e.setAttribute("data-calendar-selected-month",String(a)),e.innerText=d.locale.months[a]})(d,u,g,c)),a?.forEach((u,g)=>((d,e,s,r)=>{const a=new Date(r.setFullYear(d.selectedYear,d.selectedMonth+s)).getFullYear(),c=!1===d.settings.selection.year||"only-arrows"===d.settings.selection.year;e.tabIndex=c?-1:0,e.classList.toggle(d.CSSClasses.yearDisabled,c),e.setAttribute("data-calendar-selected-year",String(a)),e.innerText=String(a)})(d,u,g,c))},Er=(d,e)=>{const s=Mn(Xn(new Date(d.selectedYear,d.selectedMonth,1)));({prev:()=>s.setMonth(s.getMonth()-d.jumpMonths),next:()=>s.setMonth(s.getMonth()+d.jumpMonths)})[e](),[d.selectedMonth,d.selectedYear]=[s.getMonth(),s.getFullYear()],ro(d),Yi(d),No(d)},ra=Object.freeze(Object.defineProperty({__proto__:null,ArrowNext:d=>`<button type="button"class="${d.CSSClasses.arrow} ${d.CSSClasses.arrowNext}"data-calendar-arrow="next"></button>`,ArrowPrev:d=>`<button type="button"class="${d.CSSClasses.arrow} ${d.CSSClasses.arrowPrev}"data-calendar-arrow="prev"></button>`,ControlTime:d=>d.settings.selection.time?`<div class="${d.CSSClasses.time}"></div>`:"",Days:d=>`<div class="${d.CSSClasses.days}"></div>`,Month:d=>`<button type="button"class="${d.CSSClasses.month}"data-calendar-selected-month></button>`,Months:d=>`<div class="${d.CSSClasses.months}"></div>`,Week:d=>`<div class="${d.CSSClasses.week}"></div>`,WeekNumbers:d=>d.settings.visibility.weekNumbers?`<div class="${d.CSSClasses.weekNumbers}"></div>`:"",Year:d=>`<button type="button"class="${d.CSSClasses.year}"data-calendar-selected-year></button>`,Years:d=>`<div class="${d.CSSClasses.years}"></div>`},Symbol.toStringTag,{value:"Module"})),ao=(d,e)=>e.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,(s,r)=>{const a=(d=>ra[d])(r.replace(/[/\s\n\t]/g,"")),c=a?a(d):"";return d.sanitizer(c)}).replace(/[\n\t]/g,""),Ws=(d,e)=>{const{HTMLElement:s,CSSClasses:r,DOMTemplates:a,type:c,currentType:u,correctMonths:g}=d,y=(L,q)=>{if(!e)return;const pe=s.querySelector(`.${r.controls}`);pe&&s.removeChild(pe),s.querySelector(`.${r.grid}`).classList.add(r.gridDisabled);const Ie=e.closest(`.${r.column}`);Ie.classList.add(L),Ie.innerHTML=ao(d,q)},M={default:()=>{s.classList.add(r.calendarDefault),s.classList.remove(r.calendarMonth,r.calendarYear),s.innerHTML=ao(d,a.default)},multiple:()=>{g&&(s.classList.add(r.calendarMultiple),s.classList.remove(r.calendarMonth,r.calendarYear),s.innerHTML=((d,e)=>e.replace(/<#Multiple>(.*?)<#\/Multiple>/g,(s,r)=>{let a="";for(let c=0;c<d.correctMonths;c++)a+=r;return d.sanitizer(a)}).replace(/[\n\t]/g,""))(d,ao(d,a.multiple)))},month:()=>{"multiple"!==c?(s.classList.add(r.calendarMonth),s.classList.remove(r.calendarDefault,r.calendarYear),s.innerHTML=ao(d,a.month)):y(r.columnMonth,a.month)},year:()=>{"multiple"!==c?(s.classList.add(r.calendarYear),s.classList.remove(r.calendarDefault,r.calendarMonth),s.innerHTML=ao(d,a.year)):y(r.columnYear,a.year)}};s.classList.add(r.calendar),M[u]()},al=(d,e,s,r,a)=>{const c=e.cloneNode(!1);return c.className=`${d.CSSClasses.yearsYear}${s===a?` ${d.CSSClasses.yearsYearSelected}`:r?` ${d.CSSClasses.yearsYearDisabled}`:""}`,c.dataset.calendarYear=String(a),c.title=String(a),c.innerText=String(a),r&&(c.tabIndex=-1),c},Ft=(d,e)=>{const s=e?.dataset.calendarSelectedYear?Number(e?.dataset.calendarSelectedYear):d.selectedYear;d.currentType="year",Ws(d,e),ro(d),Yi(d);const r=d.HTMLElement.querySelector(`.${d.CSSClasses.years}`);if(!d.settings.selection.year||!r)return;r.classList.add(d.CSSClasses.yearsSelecting);const a="multiple"!==d.type||d.selectedYear===s?0:1,c=document.createElement("button");c.type="button";for(let u=d.viewYear-7;u<d.viewYear+8;u++){const g=u<d.dateMin.getFullYear()+a||u>d.dateMax.getFullYear(),y=al(d,c,s,g,u);r.appendChild(y),d.actions.getYears&&d.actions.getYears(u,y,d)}},aa=d=>`${d.charAt(0).toUpperCase()}${d.substring(1,d.length)}`.replace(/\./,""),Dr=(d,e)=>{const s=new Date(`1978-01-0${e+1}T00:00:00.000Z`).toLocaleString(d.settings.lang,{weekday:"short",timeZone:"UTC"});d.locale.weekday.push(aa(s))},Nh=(d,e)=>{const s=new Date(`1978-${e+1<=9?`0${e+1}`:e+1}-01T00:00:00.000Z`).toLocaleString(d.settings.lang,{month:"long",timeZone:"UTC"});d.locale.months.push(aa(s))},Sr=d=>{if("multiple"!==d.type)return 0;const e=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.column}`),s=Array.from(e).findIndex(r=>r.classList.contains(`${d.CSSClasses.columnMonth}`));return s>0?s:0},Yt=(d,e,s,r,a,c)=>{const u=e.cloneNode(!1);return u.className=`${d.CSSClasses.monthsMonth}${s===c?` ${d.CSSClasses.monthsMonthSelected}`:a?` ${d.CSSClasses.monthsMonthDisabled}`:""}`,u.title=r,u.innerText=`${d.settings.visibility.monthShort?r.substring(0,3):r}`,u.dataset.calendarMonth=String(c),a&&(u.tabIndex=-1),u},Tr=(d,e)=>{var s,r;const a=e?.dataset.calendarSelectedMonth?Number(e.dataset.calendarSelectedMonth):d.selectedMonth,c=null==(s=e?.closest(`.${d.CSSClasses.column}`))?void 0:s.querySelector(`.${d.CSSClasses.year}`),u=c?Number(c.dataset.calendarSelectedYear):d.selectedYear;d.currentType="month",Ws(d,e),ro(d);const g=null==(r=d.HTMLElement)?void 0:r.querySelector(`.${d.CSSClasses.months}`);if(!d.settings.selection.month||!g)return;g.classList.add(d.CSSClasses.monthsSelecting);const y=d.jumpMonths>1?d.locale.months.map((L,q)=>a-d.jumpMonths*q).concat(d.locale.months.map((L,q)=>a+d.jumpMonths*q)).filter(L=>L>=0&&L<=12):Array.from(Array(12).keys()),M=document.createElement("button");M.type="button";for(let L=0;L<12;L++){const q=d.locale.months[L],pe=L<d.dateMin.getMonth()+Sr(d)&&u<=d.dateMin.getFullYear()||L>d.dateMax.getMonth()+Sr(d)&&u>=d.dateMax.getFullYear()||L!==a&&!y.includes(L),Ie=Yt(d,M,a,q,pe,L);g.appendChild(Ie),d.actions.getMonths&&d.actions.getMonths(L,Ie,d)}},Vo=(d,e)=>d&&e?{0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"12",PM:"12"}}[Number(d)][e]:"",$n=(d,e,s)=>d.querySelector(`.${e}${s?` input[name="${s}"]`:""}`),dl=(d,e,s)=>{d.addEventListener("mouseover",()=>e.classList.add(s)),d.addEventListener("mouseout",()=>e.classList.remove(s))},Is=(d,e,s,r)=>{({hours:()=>{d.selectedHours=s},minutes:()=>{d.selectedMinutes=s}})[r](),d.selectedTime=`${d.selectedHours}:${d.selectedMinutes}${d.selectedKeeping?` ${d.selectedKeeping}`:""}`,d.actions.changeTime&&d.actions.changeTime(e,d),d.input&&d.HTMLInputElement&&d.actions.changeToInput&&d.actions.changeToInput(e,d)},Hd=(d,e,s,r,a,c)=>{e.addEventListener("input",u=>{const g=u.target,y=Number(g.value),M=y<10?`0${y}`:`${y}`;if("hours"!==a||12!==c)return s.value=M,void Is(d,u,M,a);y<c&&y>0?(s.value=M,d.selectedKeeping="AM",r.innerText=d.selectedKeeping,Is(d,u,M,a)):(0===y?(d.selectedKeeping="AM",r.innerText="AM"):(d.selectedKeeping="PM",r.innerText="PM"),s.value=Ii(g.value),Is(d,u,Ii(g.value),a))})},Vi=(d,e,s,r,a,c)=>{s.addEventListener("change",u=>{const g=u.target,y=Number(g.value),M=y<10?`0${y}`:`${y}`;"hours"===a&&12===c?g.value&&y<=c&&y>0?(g.value=M,e.value=Vo(M,d.selectedKeeping),Is(d,u,M,a)):g.value&&y<24&&(y>c||0===y)?(0===y?(d.selectedKeeping="AM",r.innerText="AM"):(d.selectedKeeping="PM",r.innerText="PM"),g.value=Ii(g.value),e.value=M,Is(d,u,Ii(g.value),a)):g.value=d.selectedHours:g.value&&y<=c&&y>=0?(g.value=M,e.value=M,Is(d,u,M,a)):"hours"===a?g.value=d.selectedHours:"minutes"===a&&(g.value=d.selectedMinutes)})},Bo=(d,e,s,r)=>`<label class="${e}"><input type="text"name="${d}"maxlength="2"value="${s}"${r?"disabled":""}></label>`,Ho=(d,e,s,r,a,c)=>`<label class="${e}"><input type="range"name="${d}"min="${s}"max="${r}"step="${a}"value="${c}"></label>`,Uo=d=>{const e=[...d.locale.weekday];e[0]&&(d.settings.iso8601&&e.push(e.shift()),d.HTMLElement.querySelectorAll(`.${d.CSSClasses.week}`).forEach(s=>((d,e,s)=>{const r=document.createElement("b");e.textContent="";for(let a=0;a<s.length;a++){const c=s[a],u=r.cloneNode(!0);u.className=`${d.CSSClasses.weekDay}`,u.className=`${d.CSSClasses.weekDay}${d.settings.visibility.weekend&&d.settings.iso8601?5===a||6===a?` ${d.CSSClasses.weekDayWeekend}`:"":!d.settings.visibility.weekend||d.settings.iso8601||0!==a&&6!==a?"":` ${d.CSSClasses.weekDayWeekend}`}`,u.innerText=`${c}`,e.appendChild(u)}})(d,s,e)))},Gd=["light","dark","system"],zn={value:!1,set:()=>{zn.value=!0},check:()=>zn.value},Ir=(d,e)=>Gd.find(s=>{var r;return"system"!==s&&(null==(r=d.getAttribute(e))?void 0:r.includes(s))}),vt=(d,e)=>{d.dataset.calendarTheme=e},xs=(d,e)=>{if(vt(d.HTMLElement,e.matches?"dark":"light"),"system"!==d.settings.visibility.theme||zn.check())return;const r=a=>{const c=document.querySelectorAll(`.${d.CSSClasses.calendar}`);c?.forEach(u=>vt(u,a.matches?"dark":"light"))};e.addEventListener?e.addEventListener("change",r):e.addListener(r),zn.set()},jo=d=>{const e={default:()=>{Uo(d),No(d)},multiple:()=>{Uo(d),No(d)},month:()=>Tr(d),year:()=>Ft(d)};(d=>{if(!Gd.includes(d.settings.visibility.theme))throw new Error('Incorrect name of theme in "settings.visibility.theme".');"not all"!==window.matchMedia("(prefers-color-scheme)").media?{light:()=>vt(d.HTMLElement,"light"),dark:()=>vt(d.HTMLElement,"dark"),system:()=>((d,e)=>{const s=d.settings.visibility.themeDetect?document.querySelector(d.settings.visibility.themeDetect):null;if(!s)return void xs(d,e);const r=d.settings.visibility.themeDetect.replace(/^.*\[(.+)\]/g,(c,u)=>u),a=Ir(s,r);a?(vt(d.HTMLElement,a),((d,e,s)=>{new MutationObserver(r=>{for(let a=0;a<r.length;a++)if(r[a].attributeName===s){const c=Ir(e,s);c&&vt(d.HTMLElement,c);break}}).observe(e,{attributes:!0})})(d,s,r)):xs(d,e)})(d,window.matchMedia("(prefers-color-scheme: dark)"))}[d.settings.visibility.theme]():vt(d.HTMLElement,"light")})(d),(d=>{if("define"!==d.settings.lang||!d.locale.weekday[6]||!d.locale.months[11]){if("define"===d.settings.lang)throw new Error('You specified "define" for "settings.lang" but did not provide the required values for "locale.weekday" or "locale.months".');d.locale.weekday=[],d.locale.months=[];for(let e=0;e<7;e++)Dr(d,e);for(let e=0;e<12;e++)Nh(d,e)}})(d),Ws(d),ro(d),Yi(d),(d=>{const e=d.HTMLElement.querySelector(`.${d.CSSClasses.time}`);if(!e)return;const s=!0===d.settings.selection.time?12:d.settings.selection.time,r="range"===d.settings.selection.controlTime,[a,c]=[0,23],[u,g]=[0,59];e.innerHTML=d.sanitizer(`<div class="${d.CSSClasses.timeContent}">${Bo("hours",d.CSSClasses.timeHours,d.selectedHours,r)}${Bo("minutes",d.CSSClasses.timeMinutes,d.selectedMinutes,r)}${12===s?`<button type="button" class="${d.CSSClasses.timeKeeping}"${r?"disabled":""}>${d.selectedKeeping}</button>`:""}</div><div class="${d.CSSClasses.timeRanges}">${Ho("hours",d.CSSClasses.timeRange,a,c,d.settings.selection.stepHours,d.selectedKeeping?Vo(d.selectedHours,d.selectedKeeping):d.selectedHours)}${Ho("minutes",d.CSSClasses.timeRange,u,g,d.settings.selection.stepMinutes,d.selectedMinutes)}</div>`),((d,e,s)=>{const r=24===s?23:s||12,a=$n(e,d.CSSClasses.timeRange,"hours"),c=$n(e,d.CSSClasses.timeRange,"minutes"),u=$n(e,d.CSSClasses.timeHours,"hours"),g=$n(e,d.CSSClasses.timeMinutes,"minutes"),y=e.querySelector(`.${d.CSSClasses.timeKeeping}`);dl(a,u,d.CSSClasses.isFocus),dl(c,g,d.CSSClasses.isFocus),Hd(d,a,u,y,"hours",r),Hd(d,c,g,y,"minutes",0),Vi(d,a,u,y,"hours",r),Vi(d,c,g,y,"minutes",59),y&&((d,e,s)=>{e.addEventListener("click",r=>{d.selectedKeeping=e.innerText.includes("AM")?"PM":"AM",e.innerText=d.selectedKeeping,s.value=Vo(d.selectedHours,d.selectedKeeping),Is(d,r,d.selectedHours,"hours")})})(d,y,a)})(d,e,s)})(d),e[d.currentType]()},Zt={self:null,rangeMin:void 0,rangeMax:void 0},Mr=()=>{var d;if(null==(d=Zt.self)||!d.HTMLElement)return;const{CSSClasses:e}=Zt.self;Zt.self.HTMLElement.querySelectorAll(`.${Zt.self.CSSClasses.dayBtnHover}`).forEach(s=>{var r;s.classList.remove(Zt.self.CSSClasses.dayBtnHover),null==(r=s.parentElement)||r.classList.remove(e.dayHoverIntermediate,e.dayHoverFirst,e.dayHoverLast)})},Wo=(d,e,s)=>{var r,a,c;if(null==(r=Zt.self)||!r.selectedDates)return;const u=Xn(d),{CSSClasses:g}=Zt.self;if(null!=(a=Zt.self.rangeDisabled)&&a.includes(u))return;const y=null==(c=Zt.self.HTMLElement)?void 0:c.querySelectorAll(`[data-calendar-day="${u}"]`);y?.forEach(M=>{var L;M.classList.add(g.dayBtnHover),null==(L=M.parentElement)||L.classList.add(g.dayHoverIntermediate)}),e?.forEach(M=>{var L;return null==(L=M.parentElement)?void 0:L.classList.add(g.dayHoverFirst)}),s?.forEach(M=>{var L;return null==(L=M.parentElement)?void 0:L.classList.add(g.dayHoverLast)})},Ar=d=>{var e;if(!d.target||null==(e=Zt.self)||!e.selectedDates)return;if(!d.target.closest(`.${Zt.self.CSSClasses.days}`))return void Mr();const s=d.target.closest("[data-calendar-day]");if(!s)return;const r=s.dataset.calendarDay,a=Mn(Zt.self.selectedDates[0]),c=Mn(r),u=Zt.self.HTMLElement.querySelectorAll(`[data-calendar-day="${Zt.self.selectedDates[0]}"]`),g=Zt.self.HTMLElement.querySelectorAll(`[data-calendar-day="${r}"]`),[y,M]=a<c?[u,g]:[g,u],[L,q]=a<c?[a,c]:[c,a];Mr();for(let pe=new Date(L);pe<=q;pe.setDate(pe.getDate()+1))Wo(pe,y,M)},Bi=d=>{Zt.self&&"Escape"===d.key&&(Zt.self.selectedDates=[],Zt.self.HTMLElement.removeEventListener("mousemove",Ar),document.removeEventListener("keydown",Bi),jo(Zt.self))},ha=(d,e)=>{var s;if(e){const r=1===d.selectedDates.length&&d.selectedDates[0].includes(e);d.selectedDates=r&&!d.settings.selection.cancelableDay?[e,e]:r&&d.settings.selection.cancelableDay?[]:d.selectedDates.length>1?[e]:[...d.selectedDates,e],null==(s=d.selectedDates)||s.sort((a,c)=>+new Date(a)-+new Date(c))}d.settings.range.disableGaps&&(Zt.rangeMin=Zt.rangeMin?Zt.rangeMin:d.rangeMin,Zt.rangeMax=Zt.rangeMax?Zt.rangeMax:d.rangeMax),Zt.self=d,{set:()=>{d.HTMLElement.addEventListener("mousemove",Ar),document.addEventListener("keydown",Bi),d.settings.range.disableGaps&&(()=>{var d,e,s;if(null==(e=null==(d=Zt.self)?void 0:d.selectedDates)||!e[0]||!Zt.self.rangeDisabled||(null==(s=Zt.self.rangeDisabled)?void 0:s.length)<2)return;const r=Mn(Zt.self.selectedDates[0]),[a,c]=Zt.self.rangeDisabled.map(u=>Mn(u)).reduce(([u,g],y)=>[r>=y?y:u,r<y&&null===g?y:g],[null,null]);a&&(Zt.self.rangeMin=Xn(new Date(a.setDate(a.getDate()+1)))),c&&(Zt.self.rangeMax=Xn(new Date(c.setDate(c.getDate()-1))))})()},reset:()=>{const[r,a]=[d.selectedDates[0],d.selectedDates[d.selectedDates.length-1]];d.selectedDates=d.selectedDates[0]!==d.selectedDates[d.selectedDates.length-1]?d.settings.range.edgesOnly?[r,a]:gs([`${r}:${a}`]):[d.selectedDates[0],d.selectedDates[0]],d.HTMLElement.removeEventListener("mousemove",Ar),document.removeEventListener("keydown",Bi),d.settings.range.disableGaps&&Zt.self&&(Zt.self.rangeMin=Zt.rangeMin,Zt.self.rangeMax=Zt.rangeMax)}}[1===d.selectedDates.length?"set":"reset"]()},ai=(d,e,s)=>{if(!e.dataset.calendarDay)return;const r=e.dataset.calendarDay,a=e.classList.contains(d.CSSClasses.dayBtnSelected);if(a&&!d.settings.selection.cancelableDay)return;let c=!0;void 0!==d.toggleSelected&&(c="function"==typeof d.toggleSelected?d.toggleSelected(d):d.toggleSelected),a&&!c||(d.selectedDates=a?d.selectedDates.filter(u=>u!==r):s?[...d.selectedDates,r]:[r])},hl=(d,e,s,r,a)=>{const c=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.column}`),u=Array.from(c).findIndex(y=>y.classList.contains(e)),g=Number(c[u].querySelector(`.${s}`).getAttribute(a));return"month"===d.currentType&&u>=0?r-u:"year"===d.currentType&&d.selectedYear!==g?r-1:r},uo=(d,e,s,r)=>{if(!d.settings.selection[s])return;const a=e.target,c=L=>a.closest(`.${L}`),u=c(r.header),g=c(r.item),y=c(d.CSSClasses.grid),M=c(d.CSSClasses.column);d.currentType!==s&&u?{year:()=>Ft(d,a),month:()=>Tr(d,a)}[s]():g?((d,e,s,r,a)=>{const c={year:()=>{var u,g;return null==(g=(u=d.actions).clickYear)?void 0:g.call(u,e,d)},month:()=>{var u,g;return null==(g=(u=d.actions).clickMonth)?void 0:g.call(u,e,d)}};({year:()=>{if("multiple"===d.type){const u=hl(d,d.CSSClasses.columnYear,d.CSSClasses.year,Number(a.dataset.calendarYear),"data-calendar-selected-year"),g=d.selectedMonth<d.dateMin.getMonth()&&u<=d.dateMin.getFullYear(),y=d.selectedMonth>d.dateMax.getMonth()&&u>=d.dateMax.getFullYear(),M=u<d.dateMin.getFullYear(),L=u>d.dateMax.getFullYear();g||M?(d.selectedYear=d.dateMin.getFullYear(),d.selectedMonth=d.dateMin.getMonth()):y||L?(d.selectedYear=d.dateMax.getFullYear(),d.selectedMonth=d.dateMax.getMonth()):d.selectedYear=u}else d.selectedYear=Number(a.dataset.calendarYear)},month:()=>{if("multiple"===d.type){const u=hl(d,d.CSSClasses.columnMonth,d.CSSClasses.month,Number(a.dataset.calendarMonth),"data-calendar-selected-month"),g=a.closest(`.${r.column}`).querySelector(`.${d.CSSClasses.year}`);d.selectedYear=Number(g.dataset.calendarSelectedYear);const y=u<d.dateMin.getMonth()&&d.selectedYear<=d.dateMin.getFullYear(),M=u>d.dateMax.getMonth()&&d.selectedYear>=d.dateMax.getFullYear();d.selectedMonth=y?d.dateMin.getMonth():M?d.dateMax.getMonth():u}else d.selectedMonth=Number(a.dataset.calendarMonth)}})[s](),c[s](),d.currentType=d.type,jo(d)})(d,e,s,r,g):(d.currentType===s&&u||"multiple"===d.type&&d.currentType===s&&y&&!M)&&(d.currentType=d.type,jo(d))},ul=d=>{const e=s=>{((d,e)=>{const s=e.target.closest(`.${d.CSSClasses.arrow}`);s&&(["default","multiple"].includes(d.currentType)?Er(d,s.dataset.calendarArrow):"year"===d.currentType&&void 0!==d.viewYear&&(d.viewYear+={prev:-15,next:15}[s.dataset.calendarArrow],Ft(d,e.target)),d.actions.clickArrow&&d.actions.clickArrow(e,d))})(d,s),((d,e)=>{var s;if(!d.settings.visibility.weekNumbers||!d.actions.clickWeekNumber)return;const r=e.target.closest(`.${d.CSSClasses.weekNumber}`),a=null==(s=d.HTMLElement)?void 0:s.querySelectorAll("[data-calendar-week-number]");if(!r||!a)return;const c=Number(r.innerText),u=Number(r.dataset.calendarYearWeek),g=Array.from(a).filter(y=>Number(y.dataset.calendarWeekNumber)===c);d.actions.clickWeekNumber(e,c,g,u,d)})(d,s),((d,e)=>{var s;const r=e.target,a=y=>r.closest(`.${y}`),c=a(d.CSSClasses.dayBtn);if(!d.settings.selection.day||!["single","multiple","multiple-ranged"].includes(d.settings.selection.day)||!c)return;({single:()=>ai(d,c,!1),multiple:()=>ai(d,c,!0),"multiple-ranged":()=>ha(d,c.dataset.calendarDay)})[d.settings.selection.day](),null==(s=d.selectedDates)||s.sort((y,M)=>+new Date(y)-+new Date(M)),d.actions.clickDay&&d.actions.clickDay(e,d),d.input&&d.HTMLInputElement&&d.HTMLElement&&d.actions.changeToInput&&d.actions.changeToInput(e,d);const u=a(d.CSSClasses.dayBtnPrev),g=a(d.CSSClasses.dayBtnNext);({prev:()=>Er(d,"prev"),next:()=>Er(d,"next"),default:()=>No(d)})[u?"prev":g?"next":"default"]()})(d,s),uo(d,s,"month",{header:d.CSSClasses.month,item:d.CSSClasses.monthsMonth,column:d.CSSClasses.columnMonth}),uo(d,s,"year",{header:d.CSSClasses.year,item:d.CSSClasses.yearsYear,column:d.CSSClasses.columnYear})};return d.HTMLElement.addEventListener("click",e),()=>d.HTMLElement.removeEventListener("click",e)};function $o(d){if(!d||!d.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const e=d.getBoundingClientRect(),s=document.documentElement;return{bottom:e.bottom,right:e.right,top:e.top+window.pageYOffset-s.clientTop,left:e.left+window.pageXOffset-s.clientLeft}}function zo(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function Xi(d,e){let s="left";if(e&&d){const{canShow:r,parentPositions:a}=function ua(d,e,s=5){const r={top:!0,bottom:!0,left:!0,right:!0},a=[];if(e&&d){const{bottom:c,top:u}=function Ko(d){var e,s;let r=0,a=0,c=0,u=0;const g=function Mi(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}(),y=$o(d),{vh:M,vw:L}=zo(),q=g.top,pe=g.left;if(y){const Ie=null!=(e=y.top)?e:0,Ve=null!=(s=y.left)?s:0;a=Ie-q,c=Ve-pe,r=M-(Ie-q+d.clientHeight),u=L-(Ve-pe+d.clientWidth)}return{top:a,bottom:r,left:c,right:u}}(d),{top:g,left:y}=$o(d),{height:M,width:L}=e.getBoundingClientRect(),{vh:q,vw:pe}=zo(),Ie={x:pe/2,y:q/2};g<Ie.y&&a.push("top"),g>Ie.y&&a.push("bottom"),y<Ie.x&&a.push("left"),y>Ie.x&&a.push("right"),M>u-s&&(r.top=!1),M>c-s&&(r.bottom=!1),L>y&&(r.left=!1),pe-y<L&&(r.right=!1)}return{canShow:r,parentPositions:a}}(d,e);if(!r.left||!r.right)return Array.isArray(a)&&(a[0]="bottom"===a[0]?"top":"bottom"),a;r.bottom?s="center":r.top&&(s=["top","center"])}return s}const ln=(d,e,s,r)=>{if(d){const a="auto"===s?Xi(d,e):s,c={top:-e.offsetHeight,bottom:d.offsetHeight,left:0,center:d.offsetWidth/2-e.offsetWidth/2,right:d.offsetWidth-e.offsetWidth},u=Array.isArray(a)?a[0]:"bottom",g=Array.isArray(a)?a[1]:a;"bottom"===u?(e.classList.remove(r.calendarToInputTop),e.classList.add(r.calendarToInputBottom)):(e.classList.remove(r.calendarToInputBottom),e.classList.add(r.calendarToInputTop));const{top:y,left:M}=$o(d);Object.assign(e.style,{left:`${M+c[g]}px`,top:`${y+c[u]}px`})}},Hi=(d,{year:e,month:s,dates:r,holidays:a,time:c}={})=>{var u;const g=Tt({},d.settings.selected);d.settings.selected.year=e?g.year:d.selectedYear,d.settings.selected.month=s?g.month:d.selectedMonth,d.settings.selected.holidays=a?g.holidays:d.selectedHolidays,d.settings.selected.time=c?g.time:d.selectedTime,d.settings.selected.dates="only-first"===r&&null!=(u=d.selectedDates)&&u[0]?[d.selectedDates[0]]:!0===r?g.dates:d.selectedDates,Qt(d),jo(d),d.settings.selected=g,"multiple-ranged"===d.settings.selection.day&&r&&ha(d)},fa=(d,e=!0)=>{d.isInputInit=!0;const s=document.createElement("div");return s.className=`${d.CSSClasses.calendar} ${d.CSSClasses.calendarToInput} ${d.CSSClasses.calendarHidden}`,d.HTMLElement=s,document.body.appendChild(d.HTMLElement),d.HTMLElement.style.visibility="hidden",e&&queueMicrotask(()=>{ln(d.HTMLInputElement,s,d.settings.visibility.positionToInput,d.CSSClasses),d.HTMLElement.style.visibility="visible",d.show()}),Hi(d,{year:!0,month:!0,dates:!0,holidays:!0,time:!0}),d.actions.initCalendar&&d.actions.initCalendar(d),ul(d)};function Cs(d,...e){const s=a=>a&&"object"==typeof a&&!Array.isArray(a);if(!e.length)return d;const r=e.shift();return s(d)&&s(r)&&Object.keys(r).forEach(a=>{s(r[a])?(d[a]||Object.assign(d,{[a]:{}}),Cs(d[a],r[a])):Object.assign(d,{[a]:r[a]})}),Cs(d,...e)}function zs(d,e,s){d.settings=Cs(d.settings,{[e]:s})}class Lh extends sa{constructor(e,s){if(super(),pt(this,"init",()=>{return(d=this).HTMLOriginalElement=d.HTMLElement.cloneNode(!0),d.isInit=!0,d.input?(d=>{const e=[];d.HTMLInputElement=d.HTMLElement;const s=()=>ln(d.HTMLInputElement,d.HTMLElement,d.settings.visibility.positionToInput,d.CSSClasses),r=a=>{var c;d&&a.target!==d.HTMLInputElement&&(null==(c=d.HTMLElement)||!c.contains(a.target))&&(d.HTMLInputElement&&d.HTMLElement&&d.hide(),window.removeEventListener("resize",s),document.removeEventListener("click",r,{capture:!0}))};return d.HTMLInputElement.addEventListener("click",()=>{d.isInputInit?(ln(d.HTMLInputElement,d.HTMLElement,d.settings.visibility.positionToInput,d.CSSClasses),d.HTMLElement.style.visibility="visible",d.show()):e.push(fa(d)),window.addEventListener("resize",s),document.addEventListener("click",r,{capture:!0})}),()=>{e.forEach(a=>a())}})(d):(Qt(d),jo(d),d.actions.initCalendar&&d.actions.initCalendar(d),ul(d));var d}),pt(this,"update",a=>((d,{year:e,month:s,dates:r,holidays:a,time:c}={})=>{if(!d.isInit)throw new Error(xi_notInit);d.input&&!d.isInputInit&&fa(d,!1),Hi(d,{year:e,month:s,dates:r,holidays:a,time:c}),d.actions.updateCalendar&&d.actions.updateCalendar(d)})(this,a)),pt(this,"destroy",()=>(d=>{var e,s,r,a,c,u;if(!d.isInit)throw new Error(xi_notInit);d.input?(null==(s=null==(e=d.HTMLElement)?void 0:e.parentElement)||s.removeChild(d.HTMLElement),null==(a=null==(r=d.HTMLInputElement)?void 0:r.replaceWith)||a.call(r,d.HTMLOriginalElement),d.HTMLInputElement=void 0):null==(u=null==(c=d.HTMLElement)?void 0:c.replaceWith)||u.call(c,d.HTMLOriginalElement),d.HTMLElement=d.HTMLOriginalElement,d.actions.destroyCalendar&&d.actions.destroyCalendar(d)})(this)),pt(this,"show",()=>{var d;(d=this).currentType?(d.HTMLElement.classList.remove(d.CSSClasses.calendarHidden),d.actions.showCalendar&&d.actions.showCalendar(d)):d.HTMLElement.click()}),pt(this,"hide",()=>{var d;(d=this).currentType&&(d.HTMLElement.classList.add(d.CSSClasses.calendarHidden),d.actions.hideCalendar&&d.actions.hideCalendar(d))}),pt(this,"changeSetting",(a,c)=>zs(this,a,c)),this.HTMLElement="string"==typeof e?document.querySelector(e):e,!this.HTMLElement)throw new Error(`${e} is not found, check the first argument passed to new VanillaCalendar.`);if(!s)return;const r=(a,c)=>{Object.keys(c).forEach(u=>{"object"!=typeof a[u]||"object"!=typeof c[u]||c[u]instanceof Date?a[u]=c[u]:r(a[u],c[u])})};r(this,s)}}class Wd{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._lastClickIsDate=!1,this._shouldTriggerQuery=!0,this.hasTimePicker=!1,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new St.P}get gridOptions(){return this.grid?.getOptions()??{}}get columnFilter(){return this.columnDef?.filter||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return"compound"===this.inputFilterType?oe.empty:this.gridOptions.defaultFilterRangeOperator||oe.rangeInclusive}get pickerOptions(){return this._pickerOptions||{}}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.date,...this.columnFilter?.filterOptions}}get operator(){return"compound"===this.inputFilterType?this._operator||this.columnFilter.operator||this.defaultOperator:this.columnFilter?.operator??this.defaultOperator}set operator(e){"compound"===this.inputFilterType?this._operator=e:this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,"compound"===this.inputFilterType&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this.filterContainerElm=e.filterContainerElm;const s="compound"===this.inputFilterType?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(s),this.updateFilterStyle(this.searchTerms.length>0),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this)),this._bindEventService.bind(document.body,"keydown",r=>{("Escape"===r.key||"Tab"===r.key)&&this.hide()}),this._bindEventService.bind(this._dateInputElm,"keydown",r=>{"Backspace"===r.key&&this.clear(!0,!1)})}clear(e=!0,s=!0){if(this.calendarInstance&&(this._clearFilterTriggered=s,this._shouldTriggerQuery=e,this._currentValue="",this.searchTerms=[],this._currentDateStrings=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.calendarInstance)){const r=new Date;Ht(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,oldVal:this._currentDateOrDates,newVal:"",updatePickerUI:!0,selectedSettings:{dates:[],month:r.getMonth(),year:r.getFullYear()}})}this.onTriggerEvent(new Event("keyup")),this.updateFilterStyle(!1)}destroy(){this._bindEventService.unbindAll(),this.calendarInstance?.destroy(),(0,A.emptyElement)(this.filterContainerElm),this.filterContainerElm?.remove(),this._selectOperatorElm?.remove(),this._filterElm?.remove()}hide(){"function"==typeof this.calendarInstance?.hide&&this.calendarInstance.hide()}show(){"function"==typeof this.calendarInstance?.show&&this.calendarInstance.show()}getValues(){return this._currentDateOrDates}setValues(e,s,r=!1){let a;"compound"===this.inputFilterType?a=Array.isArray(e)?e[0]:e:"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]&&e[0].indexOf("..")>0?a="string"==typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(a=e),this.calendarInstance&&void 0!==a&&(Ht(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:a,updatePickerUI:!0}),this._currentDateOrDates=e&&a?a:void 0);const c=this.getValues()||[],u=Array.isArray(c)?c:[c];if(this.updateFilterStyle(u.length>0),this.operator=s||this.defaultOperator,s&&this._selectOperatorElm){const g=Te(this.operator);this._selectOperatorElm.value=g}r&&this.callback(void 0,{columnDef:this.columnDef,searchTerms:u,operator:this.operator,shouldTriggerQuery:!0})}buildDatePickerInput(e){const s=this.columnDef?.id??"",r=this.columnFilter.type||this.columnDef.type||p.dateIso,a=this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||p.dateUtc,c=He(a),u=this.columnFilter.type||this.columnDef.type||p.dateIso;c&&"range"!==this.inputFilterType&&("ISO8601"===c||c.toLowerCase().includes("h"))&&(this.hasTimePicker=!0);const g=He(this.hasTimePicker?p.dateTimeIsoAM_PM:p.dateIso),y=(this.filterOptions?.locale??this.translaterService?.getCurrentLanguage?.())||this.gridOptions.locale||"en";let M;"compound"===this.inputFilterType?e&&(M=e,this._currentDateOrDates=e):("string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]&&e[0].indexOf("..")>0?M="string"==typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(M=e),Array.isArray(M)&&(this._currentDateOrDates=M,this._currentDateStrings=M.map(pe=>Ne(pe,void 0,u))));const L={input:!0,jumpToSelectedDate:!0,type:"range"===this.inputFilterType?"multiple":"default",sanitizer:pe=>this.grid.sanitizeHtmlString(pe),toggleSelected:!1,actions:{clickDay:pe=>{this._lastClickIsDate=!0},changeToInput:(pe,Ie)=>{if(Ie.HTMLInputElement){let Ve=[],Ge="",Je="";if(Ie.selectedDates[1]){Ie.selectedDates.sort((_e,qe)=>+new Date(_e)-+new Date(qe)),Ge=Ie.selectedDates[0],Je=Ie.selectedDates[Ie.selectedDates.length-1];const Xe=(0,be.GP)(Ie.selectedDates[0],c,"en-US"),rt=(0,be.GP)(Je,c,"en-US");Ie.HTMLInputElement.value=`${Xe} \u2014 ${rt}`,Ve=[Ge,Je]}else Ie.selectedDates[0]?(Ge=Ie.selectedDates[0],Ie.HTMLInputElement.value=Ne(Ge,p.dateIso,a),Ve=Ie.selectedDates):Ie.HTMLInputElement.value="";if(this.hasTimePicker&&Ge){const Xe=(0,be.qg)(Ge,g);Xe.setHours(+(Ie.selectedHours||0)),Xe.setMinutes(+(Ie.selectedMinutes||0)),Ie.HTMLInputElement.value=Ne(Xe,void 0,a),Ve=[Xe]}if("compound"===this.inputFilterType?this._currentValue=Ne(Ve[0],void 0,r):Array.isArray(Ve)&&(this._currentDateStrings=Ve.map(Xe=>Ne(Xe,void 0,r)),this._currentValue=this._currentDateStrings.join("..")),this._currentDateOrDates=Ve.map(Xe=>Xe instanceof Date?Xe:(0,be.qg)(Xe,g)),this._currentValue){const Xe=this.hasTimePicker?new Event("keyup"):void 0;this.onTriggerEvent(Xe)}"range"===this.inputFilterType&&Ie.selectedDates.length<2&&(this._lastClickIsDate=!1),this._lastClickIsDate&&(Ie.hide(),this._lastClickIsDate=!1)}}},settings:{lang:y,iso8601:!1,visibility:{theme:this.gridOptions?.darkMode?"dark":"light",positionToInput:"auto",weekend:!1}}};"range"===this.inputFilterType&&(L.type="multiple",L.months=2,L.jumpMonths=2,L.settings={...L.settings,range:{edgesOnly:!0},selection:{day:"multiple-ranged"},visibility:{...L.settings?.visibility,daysOutside:!1}}),this.hasTimePicker&&(L.settings.selection??={},L.settings.selection.time=24),this._pickerOptions=(0,A.extend)(!0,{},L,{settings:this.filterOptions});let q=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(q=this.columnFilter.placeholder),this._dateInputElm=(0,A.createDomElement)("input",{type:"text",className:"form-control date-picker",placeholder:q,readOnly:!0,dataset:{input:"",columnid:`${s}`}}),this.calendarInstance=new Lh(this._dateInputElm,this._pickerOptions),this.calendarInstance.init(),this._pickerOptions.settings?.selected?.dates&&(M=this._pickerOptions.settings.selected.dates),M&&Ht(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,oldVal:void 0,newVal:M,updatePickerUI:!1})}getOperatorOptionValues(){let e;return e=this.columnFilter?.compoundOperatorList?this.columnFilter.compoundOperatorList:en(this.gridOptions,this.translaterService),fs(this.gridOptions,e,"numeric"),e}createDomFilterElement(e){const s=this.columnDef?.id??"";if((0,A.emptyElement)(this.filterContainerElm),this.buildDatePickerInput(e),"range"===this.inputFilterType){const r=(0,A.createDomElement)("div",{className:`date-picker form-group search-filter filter-${s}`});return Array.isArray(e)&&e.length>0&&""!==e[0]&&(this._currentDateOrDates=e,this._currentValue=e[0]),r.appendChild(this._dateInputElm),r&&this.filterContainerElm.appendChild(r),r}{this._selectOperatorElm=xn(this.getOperatorOptionValues(),this.grid);const r=(0,A.createDomElement)("div",{className:`date-picker form-group search-filter filter-${s}`}),a=(0,A.createDomElement)("div",{className:"input-group date-picker"},r);if((0,A.createDomElement)("div",{className:"input-group-addon input-group-prepend operator"},a).appendChild(this._selectOperatorElm),a.appendChild(this._dateInputElm),this.operator){const u=Te(this.operator);this._selectOperatorElm.value=u}return this._currentDateOrDates=e,this._currentValue=e,r&&this.filterContainerElm.appendChild(r),r}}onTriggerEvent(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else if("range"===this.inputFilterType){const s=this._currentDateStrings?this._currentDateStrings:[this._currentValue];this.updateFilterStyle(s.length>0),this.callback(e,{columnDef:this.columnDef,searchTerms:s,operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery})}else if("compound"===this.inputFilterType&&this._selectOperatorElm){const s=this._selectOperatorElm.value;this.updateFilterStyle(!!this._currentValue);const r=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput??void 0===this.gridOptions.skipCompoundOperatorFilterWithNullInput,a=r&&(0,A.isDefined)(this._currentDateOrDates)||""===this._currentDateOrDates&&(0,A.isDefined)(this._lastSearchValue);(!r||!r||a)&&this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:s||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._lastSearchValue=this._currentValue}updateFilterStyle(e){e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}}class gl{constructor(e){this.translaterService=e}filterCollection(e,s,r=T.chain){let a=[];return Array.isArray(s)?(a=r===T.merge?[]:[...e],s.forEach(c=>{if(r===T.merge){const u=this.singleFilterCollection(e,c);a=(0,A.uniqueArray)([...a,...u])}else a=this.singleFilterCollection(a,c)})):a=this.singleFilterCollection(e,s),a}singleFilterCollection(e,s){let r=[];if(s){const a=s.property,u=typeof s.value>"u"?"":s.value;switch(s.operator||oe.equal){case oe.equal:r=e.filter(a?g=>g[a]===u:g=>g===u);break;case oe.contains:r=e.filter(a?g=>-1!==g[a]?.toString().indexOf(u.toString()):g=>null!=g&&-1!==g.toString().indexOf(u.toString()));break;case oe.notContains:r=e.filter(a?g=>-1===g[a]?.toString().indexOf(u.toString()):g=>null!=g&&-1===g.toString().indexOf(u.toString()));break;default:r=e.filter(a?g=>g[a]!==u:g=>g!==u)}}return r}sortCollection(e,s,r,a){if(a&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let c=[];if(r)if(Array.isArray(r))c=s.sort((u,g)=>{for(let y=0,M=r.length;y<M;y++){const L=r[y];if(L?.property){const q=L.sortDesc?N.desc:N.asc,pe=L.property,Je=gt(L?.fieldType??e?.type??p.string,a?this.translaterService?.translate&&this.translaterService.translate(u[pe]||" "):u[pe],a?this.translaterService?.translate&&this.translaterService.translate(g[pe]||" "):g[pe],q,e);if(Je!==N.neutral)return Je}}return N.neutral});else if(r?.property){const u=r.property,g=r.sortDesc?N.desc:N.asc,y=r?.fieldType??e?.type??p.string;c=s.sort((M,L)=>{const q=a?this.translaterService?.translate&&this.translaterService.translate(M[u]||" "):M[u],pe=a?this.translaterService?.translate&&this.translaterService.translate(L[u]||" "):L[u],Ie=gt(y,q,pe,g,e);return Ie!==N.neutral?Ie:N.neutral})}else if(r&&!r.property){const u=r.sortDesc?N.desc:N.asc,g=r?.fieldType??e?.type??p.string;c=s.sort((y,M)=>{const L=a?this.translaterService?.translate&&this.translaterService.translate(y||" "):y,q=a?this.translaterService?.translate&&this.translaterService.translate(M||" "):M,pe=gt(g,L,q,u,e);return pe!==N.neutral?pe:N.neutral})}return c}}class ce{constructor(e,s,r){this.sharedService=e,this.backendUtilities=s,this.translaterService=r}getPickerTitleOutputString(e,s){if(this.sharedService.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let r="";const a=this.sharedService.gridOptions?.[s]??{},c=this.sharedService.gridOptions?.enableTranslate??!1,u=this.sharedService.gridOptions?.locales??V.locales,g=a?.[e],y=a?.[`${e}Key`],L=J(this.sharedService.gridOptions);if(y&&this.translaterService?.translate)r=this.translaterService.translate(y||" ");else switch(e){case"commandTitle":r=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${L}COMMANDS`)||u?.TEXT_COMMANDS;break;case"columnTitle":r=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${L}COLUMNS`)||u?.TEXT_COLUMNS;break;case"forceFitTitle":r=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${L}FORCE_FIT_COLUMNS`)||u?.TEXT_FORCE_FIT_COLUMNS;break;case"syncResizeTitle":r=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${L}SYNCHRONOUS_RESIZE`)||u?.TEXT_SYNCHRONOUS_RESIZE;break;default:r=g}return r}readjustFrozenColumnIndexWhenNeeded(e,s,r){if(e>=0){const a=r.findIndex(c=>c.id===this.sharedService.frozenVisibleColumnId);a>=0&&a!==e&&(this.sharedService.gridOptions.frozenColumn=a,this.sharedService.slickGrid.setOptions({frozenColumn:a})),Array.isArray(r)&&Array.isArray(s)&&r.length!==s.length&&this.sharedService.slickGrid.setColumns(r)}}refreshBackendDataset(e){let s=this.sharedService.gridOptions;e&&(s={...this.sharedService.gridOptions,...e},this.sharedService.gridOptions=s),this.backendUtilities?.refreshBackendDataset(s)}runOverrideFunctionWhenExists(e,s){return"function"!=typeof e||!!e.call(this,s)}sortItems(e,s){Array.isArray(e)&&e.sort((r,a)=>r&&a&&r.hasOwnProperty(s)&&a.hasOwnProperty(s)?r[s]-a[s]:0)}translateItems(e,s,r){if(Array.isArray(e))for(const a of e)a.hasOwnProperty(s)&&(a[r]=this.translaterService?.translate?.(a[s]))}translateMenuItemsFromTitleKey(e,s="commandItems"){for(const r of e)"object"==typeof r&&(r.titleKey&&(r.title=this.translateWhenEnabledAndServiceExist(`${r.titleKey}`,`TEXT_${r.titleKey}`)),r.subMenuTitleKey&&(r.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${r.subMenuTitleKey}`,`TEXT_${r.subMenuTitleKey}`))),Array.isArray(r?.[s])&&this.translateMenuItemsFromTitleKey(r?.[s])}translateWhenEnabledAndServiceExist(e,s,r){let a="";const c=this.sharedService?.gridOptions,u=c?.locales??V.locales;return a=r||(c.enableTranslate&&this.translaterService?.translate?this.translaterService.translate(e||" "):s in u?u[s]:s),a}}class H{get defaultPrevented(){return this._isDefaultPrevented}constructor(e,s){this.event=e,this.args=s,this._isPropagationStopped=!1,this._isImmediatePropagationStopped=!1,this._isDefaultPrevented=!1,this.returnValue=void 0,this.nativeEvent=e,this._arguments=s,e&&["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","target","type","which","x","y"].forEach(r=>this[r]=e[r]),this._eventTarget=this.nativeEvent?this.nativeEvent.target:void 0}stopPropagation(){this._isPropagationStopped=!0,this.nativeEvent?.stopPropagation()}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0,this.nativeEvent&&this.nativeEvent.stopImmediatePropagation()}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}getNativeEvent(){return this.nativeEvent}preventDefault(){this.nativeEvent&&this.nativeEvent.preventDefault(),this._isDefaultPrevented=!0}isDefaultPrevented(){return this.nativeEvent?this.nativeEvent.defaultPrevented:this._isDefaultPrevented}addReturnValue(e){void 0===this.returnValue&&void 0!==e&&(this.returnValue=e)}getReturnValue(){return this.returnValue}getArguments(){return this._arguments}resetReturnValue(){this.returnValue=void 0}}class ue{get subscriberCount(){return this._handlers.length}constructor(e,s){this.eventName=e,this.pubSub=s,this._handlers=[],this._pubSubService=s}subscribe(e){this._handlers.push(e)}unsubscribe(e){for(let s=this._handlers.length-1;s>=0;s--)this._handlers[s]===e&&this._handlers.splice(s,1)}notify(e,s,r,a=!1){const c=s instanceof H?s:new H(s,e);a&&c.resetReturnValue(),r=r||this;for(let u=0;u<this._handlers.length&&!c.isPropagationStopped()&&!c.isImmediatePropagationStopped();u++){const g=this._handlers[u].call(r,c,e);c.addReturnValue(g)}if("function"==typeof this._pubSubService?.publish&&this.eventName){const u=this._pubSubService.publish(this.eventName,{args:e,eventData:c},void 0,g=>c.nativeEvent??=g);c.addReturnValue(u)}return c}setPubSubService(e){this._pubSubService=e}}class Fe{constructor(){this.handlers=[]}get subscriberCount(){return this.handlers.length}subscribe(e,s){return this.handlers.push({event:e,handler:s}),e.subscribe(s),this}unsubscribe(e,s){let r=this.handlers.length;for(;r--;)if(this.handlers[r].event===e&&this.handlers[r].handler===s)return this.handlers.splice(r,1),void e.unsubscribe(s);return this}unsubscribeAll(){let e=this.handlers.length;for(;e--;)this.handlers[e].event.unsubscribe(this.handlers[e].handler);return this.handlers=[],this}}class Ct{constructor(e,s,r,a){void 0===r&&void 0===a&&(r=e,a=s),this.fromRow=Math.min(e,r),this.fromCell=Math.min(s,a),this.toRow=Math.max(e,r),this.toCell=Math.max(s,a)}isSingleCell(){return this.fromRow===this.toRow&&this.fromCell===this.toCell}isSingleRow(){return this.fromRow===this.toRow}contains(e,s){return e>=this.fromRow&&e<=this.toRow&&s>=this.fromCell&&s<=this.toCell}toString(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}}class Xt{constructor(){this.__nonDataRow=!0}}class Qn extends Xt{constructor(){super(),this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=""}equals(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title}}class Pr extends Xt{constructor(){super(),this.__groupTotals=!0,this.group=null,this.initialized=!1}}class We{static height(e,s){if(e){if(void 0===s)return e.getBoundingClientRect().height;We.setStyleSize(e,"height",s)}}static width(e,s){if(e&&e.getBoundingClientRect){if(void 0===s)return e.getBoundingClientRect().width;We.setStyleSize(e,"width",s)}}static setStyleSize(e,s,r){"function"==typeof r&&(r=r()),e.style[s]="string"==typeof r?r:`${r}px`}static isHidden(e){return 0===e.offsetWidth&&0===e.offsetHeight}static parents(e,s){const r=[],a=":visible"===s,c=":hidden"===s;for(;(e=e.parentNode)&&e!==document&&e&&e.parentNode;)c?We.isHidden(e)&&r.push(e):a?We.isHidden(e)||r.push(e):(!s||e.matches(s))&&r.push(e);return r}static toFloat(e){const s=parseFloat(e);return isNaN(s)?0:s}static show(e,s=""){Array.isArray(e)?e.forEach(r=>r.style.display=s):e.style.display=s}static hide(e){Array.isArray(e)?e.forEach(s=>s.style.display="none"):e.style.display="none"}static applyDefaults(e,s){"object"==typeof s&&Object.keys(s).forEach(r=>{s.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=s[r])})}static addSlickEventPubSubWhenDefined(e,s){if(e)for(const r in s)s[r]instanceof ue&&"function"==typeof s[r].setPubSubService&&s[r].setPubSubService(e)}}We.storage={_storage:new WeakMap,put:function(d,e,s){this._storage.has(d)||this._storage.set(d,new Map),this._storage.get(d).set(e,s)},get:function(d,e){const s=this._storage.get(d);return s?s.get(e):null},remove:function(d,e){const s=this._storage.get(d).delete(e);return 0!==this._storage.get(d).size&&this._storage.delete(d),s}};const ml=new class Xo{constructor(){this.activeEditController=null}isActive(e){return e?this.activeEditController===e:null!==this.activeEditController}activate(e){if(e!==this.activeEditController){if(null!==this.activeEditController)throw new Error("SlickEditorLock.activate: an editController is still active, can't activate another editController");if(!e.commitCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .commitCurrentEdit()");if(!e.cancelCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .cancelCurrentEdit()");this.activeEditController=e}}deactivate(e){if(this.activeEditController){if(this.activeEditController!==e)throw new Error("SlickEditorLock.deactivate: specified editController is not the currently active one");this.activeEditController=null}}commitCurrentEdit(){return!this.activeEditController||this.activeEditController.commitCurrentEdit()}cancelCurrentEdit(){return!this.activeEditController||this.activeEditController.cancelCurrentEdit()}};class pl{constructor(e){this.pluginName="GroupItemMetadataProvider",this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new Fe,this._options=(0,A.extend)(!0,{},this._defaults,e)}get eventHandler(){return this._eventHandler}get dataView(){return this._grid?.getData()??{}}get gridOptions(){return this._grid?.getOptions()||{}}init(e,s){this._grid=e,this._options={...this._defaults,...s},this._eventHandler.subscribe(e.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(e.onKeyDown,this.handleGridKeyDown.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}getOptions(){return this._options}setOptions(e){this._options={...this._options,...e}}getGroupRowMetadata(e){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${e?.level||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter||void 0,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editorClass:null}}}}getTotalsRowMetadata(e){return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${e?.group?.level||0}`,formatter:this._options.totalsFormatter,editorClass:null}}defaultGroupCellFormatter(e,s,r,a,c){if(!this._options.enableExpandCollapse)return c.title;const u=c.level||0,y=u*(this._options?.indentation??15)+"px",M=c.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass,L=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;L.appendChild((0,A.createDomElement)("span",{className:`${this._options.toggleCssClass} ${M}`,ariaExpanded:String(!c.collapsed),style:{marginLeft:y}}));const q=(0,A.createDomElement)("span",{className:this._options.groupTitleCssClass||""});return q.setAttribute("level",u),c.title instanceof HTMLElement||c.title instanceof DocumentFragment?q.appendChild(c.title):this._grid.applyHtmlCode(q,c.title??""),L.appendChild(q),L}defaultTotalsCellFormatter(e,s,r,a,c,u){return a?.groupTotalsFormatter?.(c,a,u)??""}handleGridClick(e,s){const r=e.target,a=this._grid?.getDataItem(s.row);a instanceof Qn&&r.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(a),e.stopImmediatePropagation(),e.preventDefault())}handleGridKeyDown(e){if(this._options.enableExpandCollapse&&" "===e.key){const s=this._grid?.getActiveCell();if(s){const r=this._grid.getDataItem(s.row);r instanceof Qn&&(this.handleDataViewExpandOrCollapse(r),e.stopImmediatePropagation(),e.preventDefault())}}}handleDataViewExpandOrCollapse(e){const s=this._grid?.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:s.top,ignoreDiffsAfter:s.bottom+1}),e.collapsed?this.dataView.expandGroup(e.groupingKey):this.dataView.collapseGroup(e.groupingKey)}}class es{constructor(e,s){this.externalPubSub=s,this.defaults={groupItemMetadataProvider:null,inlineFilters:!1,useCSPSafeFilter:!1},this.idProperty="id",this.items=[],this.rows=[],this.idxById=new Map,this.rowsById=void 0,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.suspend=!1,this.isBulkSuspend=!1,this.bulkDeleteIds=new Map,this.sortAsc=!0,this.refreshHints={},this.prevRefreshHints={},this.filteredItems=[],this.filterCache=[],this.groupingInfoDefaults={getter:void 0,formatter:void 0,comparer:(r,a)=>r.value===a.value?0:r.value>a.value?1:-1,predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},this.groupingInfos=[],this.groups=[],this.toggledGroupsByLevel=[],this.groupingDelimiter=":|:",this.selectedRowIds=[],this.pagesize=0,this.pagenum=0,this.totalRows=0,this.onBeforePagingInfoChanged=new ue("onBeforePagingInfoChanged",s),this.onGroupExpanded=new ue("onGroupExpanded",s),this.onGroupCollapsed=new ue("onGroupCollapsed",s),this.onPagingInfoChanged=new ue("onPagingInfoChanged",s),this.onRowCountChanged=new ue("onRowCountChanged",s),this.onRowsChanged=new ue("onRowsChanged",s),this.onRowsOrCountChanged=new ue("onRowsOrCountChanged",s),this.onSelectedRowIdsChanged=new ue("onSelectedRowIdsChanged",s),this.onSetItemsCalled=new ue("onSetItemsCalled",s),this._options=(0,A.extend)(!0,{},this.defaults,e)}beginUpdate(e){this.suspend=!0,this.isBulkSuspend=!0===e}endUpdate(){const e=this.isBulkSuspend;this.isBulkSuspend=!1,this.suspend=!1,e&&(this.processBulkDelete(),this.ensureIdUniqueness()),this.refresh()}destroy(){this.items=[],this.idProperty="id",this.idxById=null,this.rowsById=null,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.sortComparer=null,this.filterCache=[],this.filteredItems=[],this.compiledFilter=null,this.compiledFilterCSPSafe=null,this.compiledFilterWithCaching=null,this.compiledFilterWithCachingCSPSafe=null,this._grid&&(this._grid.onSelectedRowsChanged?.unsubscribe(),this._grid.onCellCssStylesChanged?.unsubscribe()),this.onRowsOrCountChanged?.unsubscribe()}setRefreshHints(e){this.refreshHints=e}getFilterArgs(){return this.filterArgs}setFilterArgs(e){this.filterArgs=e}processBulkDelete(){if(!this.idxById)return;let e,s,r=0;for(let a=0,c=this.items.length;a<c;a++){if(s=this.items[a],e=s[this.idProperty],void 0===e)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.bulkDeleteIds.has(e)?this.idxById.delete(e):(this.items[r]=s,this.idxById.set(e,r),++r)}this.items.length=r,this.bulkDeleteIds=new Map}updateIdxById(e){if(this.isBulkSuspend||!this.idxById)return;let s;for(let r=e=e||0,a=this.items.length;r<a;r++){if(s=this.items[r][this.idProperty],void 0===s)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.idxById.set(s,r)}}ensureIdUniqueness(){if(this.isBulkSuspend||!this.idxById)return;let e;for(let s=0,r=this.items.length;s<r;s++)if(e=this.items[s][this.idProperty],void 0===e||this.idxById.get(e)!==s)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}getItems(){return this.items}getIdPropertyName(){return this.idProperty}setItems(e,s){void 0!==s&&(this.idProperty=s),this.items=this.filteredItems=e,this.onSetItemsCalled.notify({idProperty:this.idProperty,itemCount:this.items.length},null,this),this.idxById=new Map,this.updateIdxById(),this.ensureIdUniqueness(),this.refresh()}setPagingOptions(e){!1!==this.onBeforePagingInfoChanged.notify(this.getPagingInfo(),null,this).getReturnValue()&&((0,A.isDefined)(e.pageSize)&&(this.pagesize=e.pageSize,this.pagenum=this.pagesize?Math.min(this.pagenum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1)):0),(0,A.isDefined)(e.pageNum)&&(this.pagenum=Math.min(e.pageNum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1))),this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),this.refresh())}getPagingInfo(){const e=this.pagesize?Math.max(1,Math.ceil(this.totalRows/this.pagesize)):1;return{pageSize:this.pagesize,pageNum:this.pagenum,totalRows:this.totalRows,totalPages:e,dataView:this}}sort(e,s){this.sortAsc=s,this.sortComparer=e,!1===s&&this.items.reverse(),this.items.sort(e),!1===s&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}reSort(){this.sortComparer&&this.sort(this.sortComparer,this.sortAsc)}getFilteredItems(){return this.filteredItems}getFilteredItemCount(){return this.filteredItems.length}getFilter(){return this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter}setFilter(e){this.filterCSPSafe=e,this.filter=e,this._options.inlineFilters&&(this.compiledFilterCSPSafe=this.compileFilterCSPSafe,this.compiledFilterWithCachingCSPSafe=this.compileFilterWithCachingCSPSafe,this.compiledFilter=this.compileFilter(this._options.useCSPSafeFilter),this.compiledFilterWithCaching=this.compileFilterWithCaching(this._options.useCSPSafeFilter)),this.refresh()}getGrouping(){return this.groupingInfos}setGrouping(e){this._options.groupItemMetadataProvider||(this._options.groupItemMetadataProvider=new pl),this.groups=[],this.toggledGroupsByLevel=[],this.groupingInfos=(e=e||[])instanceof Array?e:[e];for(let s=0;s<this.groupingInfos.length;s++){const r=this.groupingInfos[s]=(0,A.extend)(!0,{},this.groupingInfoDefaults,this.groupingInfos[s]);r.getterIsAFn="function"==typeof r.getter,r.compiledAccumulators=[];let a=r.aggregators.length;for(;a--;)r.compiledAccumulators[a]=this.compileAccumulatorLoopCSPSafe(r.aggregators[a]);this.toggledGroupsByLevel[s]={}}this.refresh()}getItemByIdx(e){return this.items[e]}getIdxById(e){return this.idxById?.get(e)}ensureRowsByIdCache(){if(!this.rowsById){this.rowsById={};for(let e=0,s=this.rows.length;e<s;e++)this.rowsById[this.rows[e][this.idProperty]]=e}}getRowByItem(e){return this.ensureRowsByIdCache(),this.rowsById?.[e[this.idProperty]]}getRowById(e){return this.ensureRowsByIdCache(),this.rowsById?.[e]}getItemById(e){return this.items[this.idxById.get(e)]}mapItemsToRows(e){const s=[];this.ensureRowsByIdCache();for(let r=0,a=e.length;r<a;r++){const c=this.rowsById?.[e[r][this.idProperty]];(0,A.isDefined)(c)&&(s[s.length]=c)}return s}mapIdsToRows(e){const s=[];this.ensureRowsByIdCache();for(let r=0,a=e.length;r<a;r++){const c=this.rowsById?.[e[r]];(0,A.isDefined)(c)&&(s[s.length]=c)}return s}mapRowsToIds(e){const s=[];for(let r=0,a=e.length;r<a;r++)e[r]<this.rows.length&&(s[s.length]=this.rows[e[r]][this.idProperty]);return s}updateSingleItem(e,s){if(this.idxById){if(!this.idxById.has(e))throw new Error("[SlickGrid DataView] Invalid id");if(e!==s[this.idProperty]){const r=s[this.idProperty];if(!(0,A.isDefined)(r))throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(this.idxById.has(r))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");this.idxById.set(r,this.idxById.get(e)),this.idxById.delete(e),this.updated?.[e]&&delete this.updated[e],e=r}this.items[this.idxById.get(e)]=s,this.updated||(this.updated={}),this.updated[e]=!0}}updateItem(e,s){this.updateSingleItem(e,s),this.refresh()}updateItems(e,s){if(e.length!==s.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(let r=0,a=s.length;r<a;r++)this.updateSingleItem(e[r],s[r]);this.refresh()}insertItem(e,s){this.items.splice(e,0,s),this.updateIdxById(e),this.refresh()}insertItems(e,s){Array.prototype.splice.apply(this.items,[e,0].concat(s)),this.updateIdxById(e),this.refresh()}addItem(e){this.items.push(e),this.updateIdxById(this.items.length-1),this.refresh()}addItems(e){this.items=this.items.concat(e),this.updateIdxById(this.items.length-e.length),this.refresh()}deleteItem(e){if(this.idxById)if(this.isBulkSuspend)this.bulkDeleteIds.set(e,!0);else{const s=this.idxById.get(e);if(void 0===s)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(e),this.items.splice(s,1),this.updateIdxById(s),this.refresh()}}deleteItems(e){if(0!==e.length&&this.idxById)if(this.isBulkSuspend)for(let s=0,r=e.length;s<r;s++){const a=e[s];if(void 0===this.idxById.get(a))throw new Error("[SlickGrid DataView] Invalid id");this.bulkDeleteIds.set(a,!0)}else{const s=[];for(let r=0,a=e.length;r<a;r++){const c=e[r],u=this.idxById.get(c);if(void 0===u)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(c),s.push(u)}s.sort();for(let r=s.length-1;r>=0;--r)this.items.splice(s[r],1);this.updateIdxById(s[0]),this.refresh()}}sortedAddItem(e){if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");this.insertItem(this.sortedIndex(e),e)}sortedUpdateItem(e,s){if(!this.idxById)return;if(!this.idxById.has(e)||e!==s[this.idProperty])throw new Error(`[SlickGrid DataView] Invalid or non-matching id ${e}`);if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");const r=this.getItemById(e);0!==this.sortComparer(r,s)?(this.deleteItem(e),this.sortedAddItem(s)):this.updateItem(e,s)}sortedIndex(e){let s=0,r=this.items.length;for(;s<r;){const a=s+r>>>1;-1===this.sortComparer(this.items[a],e)?s=a+1:r=a}return s}getItemCount(){return this.items.length}getLength(){return this.rows.length}getItem(e){const s=this.rows[e];if(s?.__group&&s.totals&&!s.totals?.initialized){const r=this.groupingInfos[s.level];r.displayTotalsRow||(this.calculateTotals(s.totals),s.title=r.formatter?r.formatter(s):s.value)}else s?.__groupTotals&&!s.initialized&&this.calculateTotals(s);return s}getItemMetadata(e){const s=this.rows[e];return void 0===s?null:s.__group?this._options.groupItemMetadataProvider.getGroupRowMetadata(s):s.__groupTotals?this._options.groupItemMetadataProvider.getTotalsRowMetadata(s):null}expandCollapseAllGroups(e,s){if((0,A.isDefined)(e))this.toggledGroupsByLevel[e]={},this.groupingInfos[e].collapsed=s,!0===s?this.onGroupCollapsed.notify({level:e,groupingKey:null}):this.onGroupExpanded.notify({level:e,groupingKey:null});else for(let r=0;r<this.groupingInfos.length;r++)this.toggledGroupsByLevel[r]={},this.groupingInfos[r].collapsed=s,!0===s?this.onGroupCollapsed.notify({level:r,groupingKey:null}):this.onGroupExpanded.notify({level:r,groupingKey:null});this.refresh()}collapseAllGroups(e){this.expandCollapseAllGroups(e,!0)}expandAllGroups(e){this.expandCollapseAllGroups(e,!1)}expandCollapseGroup(e,s,r){this.toggledGroupsByLevel[e]&&(this.toggledGroupsByLevel[e][s]=this.groupingInfos[e].collapsed^r),this.refresh()}collapseGroup(...e){const r=Array.prototype.slice.call(e)[0];let a,c;1===e.length&&-1!==r.indexOf(this.groupingDelimiter)?(a=r,c=r.split(this.groupingDelimiter).length-1):(a=e.join(this.groupingDelimiter),c=e.length-1),this.expandCollapseGroup(c,a,!0),this.onGroupCollapsed.notify({level:c,groupingKey:a})}expandGroup(...e){const r=Array.prototype.slice.call(e)[0];let a,c;1===e.length&&-1!==r.indexOf(this.groupingDelimiter)?(c=r.split(this.groupingDelimiter).length-1,a=r):(c=e.length-1,a=e.join(this.groupingDelimiter)),this.expandCollapseGroup(c,a,!1),this.onGroupExpanded.notify({level:c,groupingKey:a})}getGroups(){return this.groups}extractGroups(e,s){let r,a;const c=[],u={};let g;const y=s?s.level+1:0,M=this.groupingInfos[y];for(let L=0,q=M.predefinedValues?.length??0;L<q;L++)a=M.predefinedValues?.[L],r=u[a],r||(r=new Qn,r.value=a,r.level=y,r.groupingKey=(s?s.groupingKey+this.groupingDelimiter:"")+a,c[c.length]=r,u[a]=r);for(let L=0,q=e.length;L<q;L++)g=e[L],a=M.getterIsAFn?M.getter(g):g[M.getter],r=u[a],r||(r=new Qn,r.value=a,r.level=y,r.groupingKey=(s?s.groupingKey+this.groupingDelimiter:"")+a,c[c.length]=r,u[a]=r),r.rows[r.count++]=g;if(y<this.groupingInfos.length-1)for(let L=0;L<c.length;L++)r=c[L],r.groups=this.extractGroups(r.rows,r);return c.length&&this.addTotals(c,y),c.sort(this.groupingInfos[y].comparer),c}calculateTotals(e){const s=e.group,r=this.groupingInfos[s?.level??0],a=s.level===this.groupingInfos.length;let c,u=r.aggregators.length;if(!a&&r.aggregateChildGroups){let g=s.groups?.length??0;for(;g--;)s.groups[g].totals.initialized||this.calculateTotals(s.groups[g].totals)}for(;u--;)c=r.aggregators[u],c.init(),r.compiledAccumulators[u].call(c,!a&&r.aggregateChildGroups?s.groups:s.rows),c.storeResult(e);e.initialized=!0}addGroupTotals(e){const s=this.groupingInfos[e.level],r=new Pr;r.group=e,e.totals=r,s.lazyTotalsCalculation||this.calculateTotals(r)}addTotals(e,s){const r=this.groupingInfos[s=s||0],a=r.collapsed,c=this.toggledGroupsByLevel[s];let g,u=e.length;for(;u--;)g=e[u],(!g.collapsed||r.aggregateCollapsed)&&(g.groups&&this.addTotals(g.groups,s+1),r.aggregators?.length&&(r.aggregateEmpty||g.rows.length||g.groups?.length)&&this.addGroupTotals(g),g.collapsed=a^c[g.groupingKey],g.title=r.formatter?r.formatter(g):g.value)}flattenGroupedRows(e,s){const r=this.groupingInfos[s=s||0],a=[];let c,g,u=0;for(let y=0,M=e.length;y<M;y++){if(g=e[y],a[u++]=g,!g.collapsed){c=g.groups?this.flattenGroupedRows(g.groups,s+1):g.rows;for(let L=0,q=c.length;L<q;L++)a[u++]=c[L]}g.totals&&r.displayTotalsRow&&(!g.collapsed||r.aggregateCollapsed)&&(a[u++]=g.totals)}return a}compileAccumulatorLoopCSPSafe(e){return e.accumulate?function(s){let r;if(Array.isArray(s))for(let a=0;a<s.length;a++)r=e.accumulate.call(e,s[a]);return r}:function(){}}compileFilterCSPSafe(e,s){if("function"!=typeof this.filterCSPSafe)return[];const r=[],a=e.length;for(let c=0;c<a;c++)this.filterCSPSafe(e[c],s)&&r.push(e[c]);return r}compileFilter(e=!1){if(e)return null;const s=(0,A.getFunctionDetails)(this.filter),r="{ continue _coreloop; }$1",a="{ _retval[_idx++] = $item$; continue _coreloop; }$1",c=s.body.replace(/return false\s*([;}]|\}|$)/gi,r).replace(/return!1([;}]|\}|$)/gi,r).replace(/return true\s*([;}]|\}|$)/gi,a).replace(/return!0([;}]|\}|$)/gi,a).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let u=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");u=u.replace(/\$filter\$/gi,c),u=u.replace(/\$item\$/gi,s.params[0]),u=u.replace(/\$args\$/gi,s.params[1]);const g=new Function("_items,_args",u),y="compiledFilter";return g.displayName=y,g.name=this.setFunctionName(g,y),g}compileFilterWithCaching(e=!1){if(e)return null;const s=(0,A.getFunctionDetails)(this.filter),r="{ continue _coreloop; }$1",a="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",c=s.body.replace(/return false\s*([;}]|\}|$)/gi,r).replace(/return!1([;}]|\}|$)/gi,r).replace(/return true\s*([;}]|\}|$)/gi,a).replace(/return!0([;}]|\}|$)/gi,a).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let u=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");u=u.replace(/\$filter\$/gi,c),u=u.replace(/\$item\$/gi,s.params[0]),u=u.replace(/\$args\$/gi,s.params[1]);const g=new Function("_items,_args,_cache",u),y="compiledFilterWithCaching";return g.displayName=y,g.name=this.setFunctionName(g,y),g}compileFilterWithCachingCSPSafe(e,s,r){if("function"!=typeof this.filterCSPSafe)return[];const a=[],c=e.length;for(let u=0;u<c;u++)(r[u]||this.filterCSPSafe(e[u],s))&&a.push(e[u]);return a}setFunctionName(e,s){try{Object.defineProperty(e,"name",{writable:!0,value:s})}catch{e.name=s}}uncompiledFilter(e,s){const r=[];let a=0;for(let c=0,u=e.length;c<u;c++)this.filter?.(e[c],s)&&(r[a++]=e[c]);return r}uncompiledFilterWithCaching(e,s,r){const a=[];let u,c=0;for(let g=0,y=e.length;g<y;g++)u=e[g],r[g]?a[c++]=u:this.filter?.(u,s)&&(a[c++]=u,r[g]=!0);return a}getFilteredAndPagedItems(e){if(this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter){let r,a;this._options.useCSPSafeFilter?(r=this._options.inlineFilters?this.compiledFilterCSPSafe:this.uncompiledFilter,a=this._options.inlineFilters?this.compiledFilterWithCachingCSPSafe:this.uncompiledFilterWithCaching):(r=this._options.inlineFilters?this.compiledFilter:this.uncompiledFilter,a=this._options.inlineFilters?this.compiledFilterWithCaching:this.uncompiledFilterWithCaching),this.refreshHints.isFilterNarrowing?this.filteredItems=r.call(this,this.filteredItems,this.filterArgs):this.refreshHints.isFilterExpanding?this.filteredItems=a.call(this,e,this.filterArgs,this.filterCache):this.refreshHints.isFilterUnchanged||(this.filteredItems=r.call(this,e,this.filterArgs))}else this.filteredItems=this.pagesize?e:e.concat();let s;return this.pagesize?(this.filteredItems.length<=this.pagenum*this.pagesize&&(this.pagenum=0===this.filteredItems.length?0:Math.floor((this.filteredItems.length-1)/this.pagesize)),s=this.filteredItems.slice(this.pagesize*this.pagenum,this.pagesize*this.pagenum+this.pagesize)):s=this.filteredItems,{totalRows:this.filteredItems.length,rows:s}}getRowDiffs(e,s){let r,a,c;const u=[];let g=0,y=Math.max(s.length,e.length);this.refreshHints?.ignoreDiffsBefore&&(g=Math.max(0,Math.min(s.length,this.refreshHints.ignoreDiffsBefore))),this.refreshHints?.ignoreDiffsAfter&&(y=Math.min(s.length,Math.max(0,this.refreshHints.ignoreDiffsAfter)));for(let M=g,L=e.length;M<y;M++)M>=L?u[u.length]=M:(r=s[M],a=e[M],(!r||this.groupingInfos.length&&(c=r.__nonDataRow||a.__nonDataRow)&&r.__group!==a.__group||r.__group&&!r.equals(a)||c&&(r.__groupTotals||a.__groupTotals)||r[this.idProperty]!==a[this.idProperty]||this.updated?.[r[this.idProperty]])&&(u[u.length]=M));return u}recalc(e){this.rowsById=void 0,(this.refreshHints.isFilterNarrowing!==this.prevRefreshHints.isFilterNarrowing||this.refreshHints.isFilterExpanding!==this.prevRefreshHints.isFilterExpanding)&&(this.filterCache=[]);const s=this.getFilteredAndPagedItems(e);this.totalRows=s.totalRows;let r=s.rows;this.groups=[],this.groupingInfos.length&&(this.groups=this.extractGroups(r),this.groups.length&&(r=this.flattenGroupedRows(this.groups)));const a=this.getRowDiffs(this.rows,r);return this.rows=r,a}refresh(){if(this.suspend)return;const e=(0,A.extend)(!0,{},this.getPagingInfo()),s=this.rows.length,r=this.totalRows;let a=this.recalc(this.items);this.pagesize&&this.totalRows<this.pagenum*this.pagesize&&(this.pagenum=Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1),a=this.recalc(this.items)),this.updated=null,this.prevRefreshHints=this.refreshHints,this.refreshHints={},r!==this.totalRows&&!1!==this.onBeforePagingInfoChanged.notify(e,null,this).getReturnValue()&&this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),s!==this.rows.length&&this.onRowCountChanged.notify({previous:s,current:this.rows.length,itemCount:this.items.length,dataView:this,callingOnRowsChanged:a.length>0},null,this),a.length>0&&this.onRowsChanged.notify({rows:a,itemCount:this.items.length,dataView:this,calledOnRowCountChanged:s!==this.rows.length},null,this),(s!==this.rows.length||a.length>0)&&this.onRowsOrCountChanged.notify({rowsDiff:a,previousRowCount:s,currentRowCount:this.rows.length,itemCount:this.items.length,rowCountChanged:s!==this.rows.length,rowsChanged:a.length>0,dataView:this},null,this)}refreshdataids(){this.refresh(),this.updateIdxById()}syncGridSelection(e,s,r){let a;this._grid=e,this.selectedRowIds=this.mapRowsToIds(e.getSelectedRows());const c=e.getOptions(),u=y=>{!1===y?this.selectedRowIds=[]:this.selectedRowIds.sort().join(",")!==y.sort().join(",")&&(this.selectedRowIds=y)};return e.onSelectedRowsChanged.subscribe((y,M)=>{if(!a){const L=this.mapRowsToIds(M.rows),q={grid:this._grid,ids:L,rows:M.rows,added:!0,dataView:this};this.preSelectedRowIdsChangeFn(q),this.onSelectedRowIdsChanged.notify(Object.assign(q,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new H,this)}}),this.preSelectedRowIdsChangeFn=y=>{if(!a){if(a=!0,typeof y.added>"u")u(y.ids);else{let L;L=y.added?r&&c.multiSelect?(this.selectedRowIds?.filter(pe=>void 0===this.getRowById(pe))).concat(y.ids):y.ids:r&&c.multiSelect?this.selectedRowIds?.filter(q=>-1===y.ids.indexOf(q)):[],u(L)}a=!1}},this.onRowsOrCountChanged.subscribe((()=>{if((this.selectedRowIds||[]).length>0&&!a){a=!0;const y=this.mapIdsToRows(this.selectedRowIds||[]);if(!s){const M={grid:this._grid,ids:this.mapRowsToIds(y),rows:y,dataView:this};this.preSelectedRowIdsChangeFn(M),this.onSelectedRowIdsChanged.notify(Object.assign(M,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new H,this)}e.setSelectedRows(y),a=!1}}).bind(this)),this.onSelectedRowIdsChanged}getAllSelectedIds(){return this.selectedRowIds}getAllSelectedFilteredIds(){return this.getAllSelectedFilteredItems().map(e=>e[this.idProperty])}setSelectedIds(e,s){let r=s?.isRowBeingAdded;const a=s?.shouldTriggerEvent,c=s?.applyRowSelectionToGrid;!1!==r&&(r=!0);const u=this.mapIdsToRows(e),g={grid:this._grid,ids:e,rows:u,added:r,dataView:this};this.preSelectedRowIdsChangeFn?.(g),!1!==a&&this.onSelectedRowIdsChanged.notify(Object.assign(g,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new H,this),!1!==c&&this._grid&&this._grid.setSelectedRows(u)}getAllSelectedItems(){const e=[];return this.getAllSelectedIds().forEach(r=>{e.push(this.getItemById(r))}),e}getAllSelectedFilteredItems(){return Array.isArray(this.selectedRowIds)&&this.filteredItems.filter(s=>this.selectedRowIds.some(r=>s[this.idProperty]===r))||[]}syncGridCellCssStyles(e,s){let r,a;const c=g=>{r={},"object"==typeof g&&Object.keys(g).forEach(y=>{g&&this.rows[y]&&(r[this.rows[y][this.idProperty]]=g[y])})};c(e.getCellCssStyles(s));const u=()=>{if("object"==typeof r){a=!0,this.ensureRowsByIdCache();const g={};Object.keys(r).forEach(y=>{const M=this.rowsById?.[y];(0,A.isDefined)(M)&&(g[M]=r[y])}),e.setCellCssStyles(s,g),a=!1}};e.onCellCssStylesChanged.subscribe((g,y)=>{a||s!==y.key||(y.hash?c(y.hash):(e.onCellCssStylesChanged.unsubscribe(),this.onRowsOrCountChanged.unsubscribe(u)))}),this.onRowsOrCountChanged.subscribe(u.bind(this))}}function fo(d,e){var s=Object.keys(d);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(d);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})),s.push.apply(s,r)}return s}function ts(d){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(s),!0).forEach(function(r){_f(d,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(s)):fo(Object(s)).forEach(function(r){Object.defineProperty(d,r,Object.getOwnPropertyDescriptor(s,r))})}return d}function ma(d){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(d)}function _f(d,e,s){return e in d?Object.defineProperty(d,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):d[e]=s,d}function Ji(){return Ji=Object.assign||function(d){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(d[r]=s[r])}return d},Ji.apply(this,arguments)}function Ui(d){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(d)}var Ks=Ui(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vl=Ui(/Edge/i),Zn=Ui(/firefox/i),br=Ui(/safari/i)&&!Ui(/chrome/i)&&!Ui(/android/i),Yd=Ui(/iP(ad|od|hone)/i),Rr=Ui(/chrome/i)&&Ui(/android/i),wh={capture:!1,passive:!1};function tn(d,e,s){d.addEventListener(e,s,!Ks&&wh)}function qt(d,e,s){d.removeEventListener(e,s,!Ks&&wh)}function pa(d,e){if(e){if(">"===e[0]&&(e=e.substring(1)),d)try{if(d.matches)return d.matches(e);if(d.msMatchesSelector)return d.msMatchesSelector(e);if(d.webkitMatchesSelector)return d.webkitMatchesSelector(e)}catch{return!1}return!1}}function Vh(d){return d.host&&d!==document&&d.host.nodeType?d.host:d.parentNode}function Gi(d,e,s,r){if(d){s=s||document;do{if(null!=e&&(">"===e[0]?d.parentNode===s&&pa(d,e):pa(d,e))||r&&d===s)return d;if(d===s)break}while(d=Vh(d))}return null}var Ps,Ca=/\s+/g;function bn(d,e,s){if(d&&e)if(d.classList)d.classList[s?"add":"remove"](e);else{var r=(" "+d.className+" ").replace(Ca," ").replace(" "+e+" "," ");d.className=(r+(s?" "+e:"")).replace(Ca," ")}}function ht(d,e,s){var r=d&&d.style;if(r){if(void 0===s)return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(d,""):d.currentStyle&&(s=d.currentStyle),void 0===e?s:s[e];!(e in r)&&-1===e.indexOf("webkit")&&(e="-webkit-"+e),r[e]=s+("string"==typeof s?"":"px")}}function it(d,e){var s="";if("string"==typeof d)s=d;else do{var r=ht(d,"transform");r&&"none"!==r&&(s=r+" "+s)}while(!e&&(d=d.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(s)}function Nt(d,e,s){if(d){var r=d.getElementsByTagName(e),a=0,c=r.length;if(s)for(;a<c;a++)s(r[a],a);return r}return[]}function pn(){return document.scrollingElement||document.documentElement}function nn(d,e,s,r,a){if(d.getBoundingClientRect||d===window){var c,u,g,y,M,L,q;if(d!==window&&d.parentNode&&d!==pn()?(u=(c=d.getBoundingClientRect()).top,g=c.left,y=c.bottom,M=c.right,L=c.height,q=c.width):(u=0,g=0,y=window.innerHeight,M=window.innerWidth,L=window.innerHeight,q=window.innerWidth),(e||s)&&d!==window&&(a=a||d.parentNode,!Ks))do{if(a&&a.getBoundingClientRect&&("none"!==ht(a,"transform")||s&&"static"!==ht(a,"position"))){var pe=a.getBoundingClientRect();u-=pe.top+parseInt(ht(a,"border-top-width")),g-=pe.left+parseInt(ht(a,"border-left-width")),y=u+c.height,M=g+c.width;break}}while(a=a.parentNode);if(r&&d!==window){var Ie=it(a||d),Ve=Ie&&Ie.a,Ge=Ie&&Ie.d;Ie&&(y=(u/=Ge)+(L/=Ge),M=(g/=Ve)+(q/=Ve))}return{top:u,left:g,bottom:y,right:M,width:q,height:L}}}function ti(d,e,s){for(var r=Mt(d,!0),a=nn(d)[e];r;){var c=nn(r)[s];if(!("top"===s||"left"===s?a>=c:a<=c))return r;if(r===pn())break;r=Mt(r,!1)}return!1}function kn(d,e,s,r){for(var a=0,c=0,u=d.children;c<u.length;){if("none"!==u[c].style.display&&u[c]!==It.ghost&&(r||u[c]!==It.dragged)&&Gi(u[c],s.draggable,d,!1)){if(a===e)return u[c];a++}c++}return null}function go(d,e){for(var s=d.lastElementChild;s&&(s===It.ghost||"none"===ht(s,"display")||e&&!pa(s,e));)s=s.previousElementSibling;return s||null}function Lt(d,e){var s=0;if(!d||!d.parentNode)return-1;for(;d=d.previousElementSibling;)"TEMPLATE"!==d.nodeName.toUpperCase()&&d!==It.clone&&(!e||pa(d,e))&&s++;return s}function wn(d){var e=0,s=0,r=pn();if(d)do{var a=it(d);e+=d.scrollLeft*a.a,s+=d.scrollTop*a.d}while(d!==r&&(d=d.parentNode));return[e,s]}function Mt(d,e){if(!d||!d.getBoundingClientRect)return pn();var s=d,r=!1;do{if(s.clientWidth<s.scrollWidth||s.clientHeight<s.scrollHeight){var a=ht(s);if(s.clientWidth<s.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||s.clientHeight<s.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!s.getBoundingClientRect||s===document.body)return pn();if(r||e)return s;r=!0}}}while(s=s.parentNode);return pn()}function Nr(d,e){return Math.round(d.top)===Math.round(e.top)&&Math.round(d.left)===Math.round(e.left)&&Math.round(d.height)===Math.round(e.height)&&Math.round(d.width)===Math.round(e.width)}function Fn(d,e){return function(){if(!Ps){var s=arguments;1===s.length?d.call(this,s[0]):d.apply(this,s),Ps=setTimeout(function(){Ps=void 0},e)}}}function ko(d,e,s){d.scrollLeft+=e,d.scrollTop+=s}function ys(d){var e=window.Polymer,s=window.jQuery||window.Zepto;return e&&e.dom?e.dom(d).cloneNode(!0):s?s(d).clone(!0)[0]:d.cloneNode(!0)}function Ys(d,e,s){var r={};return Array.from(d.children).forEach(function(a){var c,u,g,y;if(Gi(a,e.draggable,d,!1)&&!a.animated&&a!==s){var M=nn(a);r.left=Math.min(null!==(c=r.left)&&void 0!==c?c:1/0,M.left),r.top=Math.min(null!==(u=r.top)&&void 0!==u?u:1/0,M.top),r.right=Math.max(null!==(g=r.right)&&void 0!==g?g:-1/0,M.right),r.bottom=Math.max(null!==(y=r.bottom)&&void 0!==y?y:-1/0,M.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var qn="Sortable"+(new Date).getTime();var Dt=[],El={initializeByDefault:!0},Ai={mount:function(e){for(var s in El)El.hasOwnProperty(s)&&!(s in e)&&(e[s]=El[s]);Dt.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Dt.push(e)},pluginEvent:function(e,s,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var c=e+"Global";Dt.forEach(function(u){s[u.pluginName]&&(s[u.pluginName][c]&&s[u.pluginName][c](ts({sortable:s},r)),s.options[u.pluginName]&&s[u.pluginName][e]&&s[u.pluginName][e](ts({sortable:s},r)))})},initializePlugins:function(e,s,r,a){for(var c in Dt.forEach(function(g){var y=g.pluginName;if(e.options[y]||g.initializeByDefault){var M=new g(e,s,e.options);M.sortable=e,M.options=e.options,e[y]=M,Ji(r,M.defaults)}}),e.options)if(e.options.hasOwnProperty(c)){var u=this.modifyOption(e,c,e.options[c]);typeof u<"u"&&(e.options[c]=u)}},getEventProperties:function(e,s){var r={};return Dt.forEach(function(a){"function"==typeof a.eventProperties&&Ji(r,a.eventProperties.call(s[a.pluginName],e))}),r},modifyOption:function(e,s,r){var a;return Dt.forEach(function(c){e[c.pluginName]&&c.optionListeners&&"function"==typeof c.optionListeners[s]&&(a=c.optionListeners[s].call(e[c.pluginName],r))}),a}};var va=["evt"],ni=function(e,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.evt,c=function Or(d,e){if(null==d)return{};var r,a,s=function Cl(d,e){if(null==d)return{};var a,c,s={},r=Object.keys(d);for(c=0;c<r.length;c++)!(e.indexOf(a=r[c])>=0)&&(s[a]=d[a]);return s}(d,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(d);for(a=0;a<c.length;a++)!(e.indexOf(r=c[a])>=0)&&Object.prototype.propertyIsEnumerable.call(d,r)&&(s[r]=d[r])}return s}(r,va);Ai.pluginEvent.bind(It)(e,s,ts({dragEl:ot,parentEl:sn,ghostEl:jt,rootEl:un,nextEl:Os,lastDownEl:yi,cloneEl:En,cloneHidden:Xs,dragStarted:Da,putSortable:vi,activeSortable:It.active,originalEvent:a,oldIndex:wr,oldDraggableIndex:Vr,newIndex:Kn,newDraggableIndex:mo,hideGhostForTarget:_d,unhideGhostForTarget:hn,cloneNowHidden:function(){Xs=!0},cloneNowShown:function(){Xs=!1},dispatchSortableEvent:function(g){an({sortable:s,name:g,originalEvent:a})}},c))};function an(d){!function ji(d){var e=d.sortable,s=d.rootEl,r=d.name,a=d.targetEl,c=d.cloneEl,u=d.toEl,g=d.fromEl,y=d.oldIndex,M=d.newIndex,L=d.oldDraggableIndex,q=d.newDraggableIndex,pe=d.originalEvent,Ie=d.putSortable,Ve=d.extraEventProperties;if(e=e||s&&s[qn]){var Ge,Je=e.options,Xe="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||Ks||vl?(Ge=document.createEvent("Event")).initEvent(r,!0,!0):Ge=new CustomEvent(r,{bubbles:!0,cancelable:!0}),Ge.to=u||s,Ge.from=g||s,Ge.item=a||s,Ge.clone=c,Ge.oldIndex=y,Ge.newIndex=M,Ge.oldDraggableIndex=L,Ge.newDraggableIndex=q,Ge.originalEvent=pe,Ge.pullMode=Ie?Ie.lastPutMode:void 0;var rt=ts(ts({},Ve),Ai.getEventProperties(r,e));for(var _e in rt)Ge[_e]=rt[_e];s&&s.dispatchEvent(Ge),Je[Xe]&&Je[Xe].call(e,Ge)}}(ts({putSortable:vi,cloneEl:En,targetEl:ot,rootEl:un,oldIndex:wr,oldDraggableIndex:Vr,newIndex:Kn,newDraggableIndex:mo},d))}var ot,sn,jt,un,Os,yi,En,Xs,wr,Kn,Vr,mo,_o,vi,Br,bs,Ea,Bh,ig,sg,Da,er,Hr,Zd,Ei,Dl=!1,Xd=!1,Jd=[],Sa=!1,Qd=!1,Ta=[],Ia=!1,Sl=[],xa=typeof document<"u",Ma=Yd,kd=vl||Ks?"cssFloat":"float",Hh=xa&&!Rr&&!Yd&&"draggable"in document.createElement("div"),Uh=function(){if(xa){if(Ks)return!1;var d=document.createElement("x");return d.style.cssText="pointer-events:auto","auto"===d.style.pointerEvents}}(),Aa=function(e,s){var r=ht(e),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),c=kn(e,0,s),u=kn(e,1,s),g=c&&ht(c),y=u&&ht(u),M=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+nn(c).width,L=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+nn(u).width;return"flex"===r.display?"column"===r.flexDirection||"column-reverse"===r.flexDirection?"vertical":"horizontal":"grid"===r.display?r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":c&&g.float&&"none"!==g.float?!u||"both"!==y.clear&&y.clear!==("left"===g.float?"left":"right")?"horizontal":"vertical":c&&("block"===g.display||"flex"===g.display||"table"===g.display||"grid"===g.display||M>=a&&"none"===r[kd]||u&&"none"===r[kd]&&M+L>a)?"vertical":"horizontal"},qd=function(e){function s(c,u){return function(g,y,M,L){if(null==c&&(u||g.options.group.name&&y.options.group.name&&g.options.group.name===y.options.group.name))return!0;if(null==c||!1===c)return!1;if(u&&"clone"===c)return c;if("function"==typeof c)return s(c(g,y,M,L),u)(g,y,M,L);var pe=(u?g:y).options.group.name;return!0===c||"string"==typeof c&&c===pe||c.join&&c.indexOf(pe)>-1}}var r={},a=e.group;(!a||"object"!=ma(a))&&(a={name:a}),r.name=a.name,r.checkPull=s(a.pull,!0),r.checkPut=s(a.put),r.revertClone=a.revertClone,e.group=r},_d=function(){!Uh&&jt&&ht(jt,"display","none")},hn=function(){!Uh&&jt&&ht(jt,"display","")};xa&&!Rr&&document.addEventListener("click",function(d){if(Xd)return d.preventDefault(),d.stopPropagation&&d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation(),Xd=!1,!1},!0);var Js=function(e){if(ot){var s=function(e,s){var r;return Jd.some(function(a){var c=a[qn].options.emptyInsertThreshold;if(c&&!go(a)){var u=nn(a);if(e>=u.left-c&&e<=u.right+c&&s>=u.top-c&&s<=u.bottom+c)return r=a}}),r}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(s){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);r.target=r.rootEl=s,r.preventDefault=void 0,r.stopPropagation=void 0,s[qn]._onDragOver(r)}}},Ur=function(e){ot&&ot.parentNode[qn]._isOutsideThisEl(e.target)};function It(d,e){if(!d||!d.nodeType||1!==d.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(d));this.el=d,this.options=e=Ji({},e),d[qn]=this;var s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(d.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Aa(d,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(u,g){u.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==It.supportPointer&&"PointerEvent"in window&&(!br||Yd),emptyInsertThreshold:5};for(var r in Ai.initializePlugins(this,d,s),s)!(r in e)&&(e[r]=s[r]);for(var a in qd(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&Hh,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?tn(d,"pointerdown",this._onTapStart):(tn(d,"mousedown",this._onTapStart),tn(d,"touchstart",this._onTapStart)),this.nativeDraggable&&(tn(d,"dragover",this),tn(d,"dragenter",this)),Jd.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ji(this,function qo(){var e,d=[];return{captureAnimationState:function(){d=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(a){if("none"!==ht(a,"display")&&a!==It.ghost){d.push({target:a,rect:nn(a)});var c=ts({},d[d.length-1].rect);if(a.thisAnimationDuration){var u=it(a,!0);u&&(c.top-=u.f,c.left-=u.e)}a.fromRect=c}})},addAnimationState:function(r){d.push(r)},removeAnimationState:function(r){d.splice(function As(d,e){for(var s in d)if(d.hasOwnProperty(s))for(var r in e)if(e.hasOwnProperty(r)&&e[r]===d[s][r])return Number(s);return-1}(d,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof r&&r());var c=!1,u=0;d.forEach(function(g){var y=0,M=g.target,L=M.fromRect,q=nn(M),pe=M.prevFromRect,Ie=M.prevToRect,Ve=g.rect,Ge=it(M,!0);Ge&&(q.top-=Ge.f,q.left-=Ge.e),M.toRect=q,M.thisAnimationDuration&&Nr(pe,q)&&!Nr(L,q)&&(Ve.top-q.top)/(Ve.left-q.left)==(L.top-q.top)/(L.left-q.left)&&(y=function Lr(d,e,s,r){return Math.sqrt(Math.pow(e.top-d.top,2)+Math.pow(e.left-d.left,2))/Math.sqrt(Math.pow(e.top-s.top,2)+Math.pow(e.left-s.left,2))*r.animation}(Ve,pe,Ie,a.options)),Nr(q,L)||(M.prevFromRect=L,M.prevToRect=q,y||(y=a.options.animation),a.animate(M,Ve,q,y)),y&&(c=!0,u=Math.max(u,y),clearTimeout(M.animationResetTimer),M.animationResetTimer=setTimeout(function(){M.animationTime=0,M.prevFromRect=null,M.fromRect=null,M.prevToRect=null,M.thisAnimationDuration=null},y),M.thisAnimationDuration=y)}),clearTimeout(e),c?e=setTimeout(function(){"function"==typeof r&&r()},u):"function"==typeof r&&r(),d=[]},animate:function(r,a,c,u){if(u){ht(r,"transition",""),ht(r,"transform","");var g=it(this.el),L=(a.left-c.left)/(g&&g.a||1),q=(a.top-c.top)/(g&&g.d||1);r.animatingX=!!L,r.animatingY=!!q,ht(r,"transform","translate3d("+L+"px,"+q+"px,0)"),this.forRepaintDummy=function Qi(d){return d.offsetWidth}(r),ht(r,"transition","transform "+u+"ms"+(this.options.easing?" "+this.options.easing:"")),ht(r,"transform","translate3d(0,0,0)"),"number"==typeof r.animated&&clearTimeout(r.animated),r.animated=setTimeout(function(){ht(r,"transition",""),ht(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},u)}}}}())}function Rs(d,e,s,r,a,c,u,g){var y,q,M=d[qn],L=M.options.onMove;return!window.CustomEvent||Ks||vl?(y=document.createEvent("Event")).initEvent("move",!0,!0):y=new CustomEvent("move",{bubbles:!0,cancelable:!0}),y.to=e,y.from=d,y.dragged=s,y.draggedRect=r,y.related=a||e,y.relatedRect=c||nn(e),y.willInsertAfter=g,y.originalEvent=u,d.dispatchEvent(y),L&&(q=L.call(M,y,u)),q}function Qs(d){d.draggable=!1}function ec(){Ia=!1}function ns(d){for(var e=d.tagName+d.className+d.src+d.href+d.textContent,s=e.length,r=0;s--;)r+=e.charCodeAt(s);return r.toString(36)}function Gr(d){return setTimeout(d,0)}function Pa(d){return clearTimeout(d)}It.prototype={constructor:It,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(er=null)},_getDirection:function(e,s){return"function"==typeof this.options.direction?this.options.direction.call(this,e,s,ot):this.options.direction},_onTapStart:function(e){if(e.cancelable){var s=this,r=this.el,a=this.options,c=a.preventOnFilter,u=e.type,g=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,y=(g||e).target,M=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||y,L=a.filter;if(function Gh(d){Sl.length=0;for(var e=d.getElementsByTagName("input"),s=e.length;s--;){var r=e[s];r.checked&&Sl.push(r)}}(r),!ot&&!(/mousedown|pointerdown/.test(u)&&0!==e.button||a.disabled)&&!M.isContentEditable&&(this.nativeDraggable||!br||!y||"SELECT"!==y.tagName.toUpperCase())&&!((y=Gi(y,a.draggable,r,!1))&&y.animated||yi===y)){if(wr=Lt(y),Vr=Lt(y,a.draggable),"function"==typeof L){if(L.call(this,e,y,this))return an({sortable:s,rootEl:M,name:"filter",targetEl:y,toEl:r,fromEl:r}),ni("filter",s,{evt:e}),void(c&&e.preventDefault())}else if(L&&(L=L.split(",").some(function(q){if(q=Gi(M,q.trim(),r,!1))return an({sortable:s,rootEl:q,name:"filter",targetEl:y,fromEl:r,toEl:r}),ni("filter",s,{evt:e}),!0})))return void(c&&e.preventDefault());a.handle&&!Gi(M,a.handle,r,!1)||this._prepareDragStart(e,g,y)}}},_prepareDragStart:function(e,s,r){var y,a=this,c=a.el,u=a.options,g=c.ownerDocument;if(r&&!ot&&r.parentNode===c){var M=nn(r);if(un=c,sn=(ot=r).parentNode,Os=ot.nextSibling,yi=r,_o=u.group,It.dragged=ot,ig=(Br={target:ot,clientX:(s||e).clientX,clientY:(s||e).clientY}).clientX-M.left,sg=Br.clientY-M.top,this._lastX=(s||e).clientX,this._lastY=(s||e).clientY,ot.style["will-change"]="all",y=function(){ni("delayEnded",a,{evt:e}),It.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!Zn&&a.nativeDraggable&&(ot.draggable=!0),a._triggerDragStart(e,s),an({sortable:a,name:"choose",originalEvent:e}),bn(ot,u.chosenClass,!0))},u.ignore.split(",").forEach(function(L){Nt(ot,L.trim(),Qs)}),tn(g,"dragover",Js),tn(g,"mousemove",Js),tn(g,"touchmove",Js),u.supportPointer?(tn(g,"pointerup",a._onDrop),!this.nativeDraggable&&tn(g,"pointercancel",a._onDrop)):(tn(g,"mouseup",a._onDrop),tn(g,"touchend",a._onDrop),tn(g,"touchcancel",a._onDrop)),Zn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ot.draggable=!0),ni("delayStart",this,{evt:e}),!u.delay||u.delayOnTouchOnly&&!s||this.nativeDraggable&&(vl||Ks))y();else{if(It.eventCanceled)return void this._onDrop();u.supportPointer?(tn(g,"pointerup",a._disableDelayedDrag),tn(g,"pointercancel",a._disableDelayedDrag)):(tn(g,"mouseup",a._disableDelayedDrag),tn(g,"touchend",a._disableDelayedDrag),tn(g,"touchcancel",a._disableDelayedDrag)),tn(g,"mousemove",a._delayedDragTouchMoveHandler),tn(g,"touchmove",a._delayedDragTouchMoveHandler),u.supportPointer&&tn(g,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(y,u.delay)}}},_delayedDragTouchMoveHandler:function(e){var s=e.touches?e.touches[0]:e;Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ot&&Qs(ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;qt(e,"mouseup",this._disableDelayedDrag),qt(e,"touchend",this._disableDelayedDrag),qt(e,"touchcancel",this._disableDelayedDrag),qt(e,"pointerup",this._disableDelayedDrag),qt(e,"pointercancel",this._disableDelayedDrag),qt(e,"mousemove",this._delayedDragTouchMoveHandler),qt(e,"touchmove",this._delayedDragTouchMoveHandler),qt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,s){s=s||"touch"==e.pointerType&&e,!this.nativeDraggable||s?tn(document,this.options.supportPointer?"pointermove":s?"touchmove":"mousemove",this._onTouchMove):(tn(ot,"dragend",this),tn(un,"dragstart",this._onDragStart));try{document.selection?Gr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,s){if(Dl=!1,un&&ot){ni("dragStarted",this,{evt:s}),this.nativeDraggable&&tn(document,"dragover",Ur);var r=this.options;!e&&bn(ot,r.dragClass,!1),bn(ot,r.ghostClass,!0),It.active=this,e&&this._appendGhost(),an({sortable:this,name:"start",originalEvent:s})}else this._nulling()},_emulateDragOver:function(){if(bs){this._lastX=bs.clientX,this._lastY=bs.clientY,_d();for(var e=document.elementFromPoint(bs.clientX,bs.clientY),s=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(bs.clientX,bs.clientY))!==s;)s=e;if(ot.parentNode[qn]._isOutsideThisEl(e),s)do{if(s[qn]&&s[qn]._onDragOver({clientX:bs.clientX,clientY:bs.clientY,target:e,rootEl:s})&&!this.options.dragoverBubble)break;e=s}while(s=Vh(s));hn()}},_onTouchMove:function(e){if(Br){var s=this.options,r=s.fallbackTolerance,a=s.fallbackOffset,c=e.touches?e.touches[0]:e,u=jt&&it(jt,!0),g=jt&&u&&u.a,y=jt&&u&&u.d,M=Ma&&Ei&&wn(Ei),L=(c.clientX-Br.clientX+a.x)/(g||1)+(M?M[0]-Ta[0]:0)/(g||1),q=(c.clientY-Br.clientY+a.y)/(y||1)+(M?M[1]-Ta[1]:0)/(y||1);if(!It.active&&!Dl){if(r&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(jt){u?(u.e+=L-(Ea||0),u.f+=q-(Bh||0)):u={a:1,b:0,c:0,d:1,e:L,f:q};var pe="matrix(".concat(u.a,",").concat(u.b,",").concat(u.c,",").concat(u.d,",").concat(u.e,",").concat(u.f,")");ht(jt,"webkitTransform",pe),ht(jt,"mozTransform",pe),ht(jt,"msTransform",pe),ht(jt,"transform",pe),Ea=L,Bh=q,bs=c}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!jt){var e=this.options.fallbackOnBody?document.body:un,s=nn(ot,!0,Ma,!0,e),r=this.options;if(Ma){for(Ei=e;"static"===ht(Ei,"position")&&"none"===ht(Ei,"transform")&&Ei!==document;)Ei=Ei.parentNode;Ei!==document.body&&Ei!==document.documentElement?(Ei===document&&(Ei=pn()),s.top+=Ei.scrollTop,s.left+=Ei.scrollLeft):Ei=pn(),Ta=wn(Ei)}bn(jt=ot.cloneNode(!0),r.ghostClass,!1),bn(jt,r.fallbackClass,!0),bn(jt,r.dragClass,!0),ht(jt,"transition",""),ht(jt,"transform",""),ht(jt,"box-sizing","border-box"),ht(jt,"margin",0),ht(jt,"top",s.top),ht(jt,"left",s.left),ht(jt,"width",s.width),ht(jt,"height",s.height),ht(jt,"opacity","0.8"),ht(jt,"position",Ma?"absolute":"fixed"),ht(jt,"zIndex","100000"),ht(jt,"pointerEvents","none"),It.ghost=jt,e.appendChild(jt),ht(jt,"transform-origin",ig/parseInt(jt.style.width)*100+"% "+sg/parseInt(jt.style.height)*100+"%")}},_onDragStart:function(e,s){var r=this,a=e.dataTransfer,c=r.options;ni("dragStart",this,{evt:e}),It.eventCanceled?this._onDrop():(ni("setupClone",this),It.eventCanceled||((En=ys(ot)).removeAttribute("id"),En.draggable=!1,En.style["will-change"]="",this._hideClone(),bn(En,this.options.chosenClass,!1),It.clone=En),r.cloneId=Gr(function(){ni("clone",r),!It.eventCanceled&&(r.options.removeCloneOnHide||un.insertBefore(En,ot),r._hideClone(),an({sortable:r,name:"clone"}))}),!s&&bn(ot,c.dragClass,!0),s?(Xd=!0,r._loopId=setInterval(r._emulateDragOver,50)):(qt(document,"mouseup",r._onDrop),qt(document,"touchend",r._onDrop),qt(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",c.setData&&c.setData.call(r,a,ot)),tn(document,"drop",r),ht(ot,"transform","translateZ(0)")),Dl=!0,r._dragStartId=Gr(r._dragStarted.bind(r,s,e)),tn(document,"selectstart",r),Da=!0,window.getSelection().removeAllRanges(),br&&ht(document.body,"user-select","none"))},_onDragOver:function(e){var a,c,u,Ie,s=this.el,r=e.target,g=this.options,y=g.group,M=It.active,L=_o===y,q=g.sort,pe=vi||M,Ve=this,Ge=!1;if(!Ia){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=Gi(r,g.draggable,s,!0),Je("dragOver"),It.eventCanceled)return Ge;if(ot.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||Ve._ignoreWhileAnimating===r)return rt(!1);if(Xd=!1,M&&!g.disabled&&(L?q||(u=sn!==un):vi===this||(this.lastPutMode=_o.checkPull(this,M,ot,e))&&y.checkPut(this,M,ot,e))){if(Ie="vertical"===this._getDirection(e,r),a=nn(ot),Je("dragOverValid"),It.eventCanceled)return Ge;if(u)return sn=un,Xe(),this._hideClone(),Je("revert"),It.eventCanceled||(Os?un.insertBefore(ot,Os):un.appendChild(ot)),rt(!0);var qe=go(s,g.draggable);if(!qe||function lg(d,e,s){var r=nn(go(s.el,s.options.draggable)),a=Ys(s.el,s.options,jt);return e?d.clientX>a.right+10||d.clientY>r.bottom&&d.clientX>r.left:d.clientY>a.bottom+10||d.clientX>r.right&&d.clientY>r.top}(e,Ie,this)&&!qe.animated){if(qe===ot)return rt(!1);if(qe&&s===e.target&&(r=qe),r&&(c=nn(r)),!1!==Rs(un,s,ot,a,r,c,e,!!r))return Xe(),qe&&qe.nextSibling?s.insertBefore(ot,qe.nextSibling):s.appendChild(ot),sn=s,_e(),rt(!0)}else if(qe&&function Pi(d,e,s){var r=nn(kn(s.el,0,s.options,!0)),a=Ys(s.el,s.options,jt);return e?d.clientX<a.left-10||d.clientY<r.top&&d.clientX<r.right:d.clientY<a.top-10||d.clientY<r.bottom&&d.clientX<r.left}(e,Ie,this)){var ft=kn(s,0,g,!0);if(ft===ot)return rt(!1);if(c=nn(r=ft),!1!==Rs(un,s,ot,a,r,c,e,!1))return Xe(),s.insertBefore(ot,ft),sn=s,_e(),rt(!0)}else if(r.parentNode===s){c=nn(r);var yt,Bt,Un,Ot=ot.parentNode!==s,Gt=!function(e,s,r){var a=r?e.left:e.top,g=r?s.left:s.top;return a===g||(r?e.right:e.bottom)===(r?s.right:s.bottom)||a+(r?e.width:e.height)/2===g+(r?s.width:s.height)/2}(ot.animated&&ot.toRect||a,r.animated&&r.toRect||c,Ie),ii=Ie?"top":"left",Yn=ti(r,"top","top")||ti(ot,"top","top"),fi=Yn?Yn.scrollTop:void 0;if(er!==r&&(Bt=c[ii],Sa=!1,Qd=!Gt&&g.invertSwap||Ot),yt=function tc(d,e,s,r,a,c,u,g){var y=r?d.clientY:d.clientX,M=r?s.height:s.width,L=r?s.top:s.left,q=r?s.bottom:s.right,pe=!1;if(!u)if(g&&Zd<M*a){if(!Sa&&(1===Hr?y>L+M*c/2:y<q-M*c/2)&&(Sa=!0),Sa)pe=!0;else if(1===Hr?y<L+Zd:y>q-Zd)return-Hr}else if(y>L+M*(1-a)/2&&y<q-M*(1-a)/2)return function ag(d){return Lt(ot)<Lt(d)?1:-1}(e);return(pe=pe||u)&&(y<L+M*c/2||y>q-M*c/2)?y>L+M/2?1:-1:0}(e,r,c,Ie,Gt?1:g.swapThreshold,null==g.invertedSwapThreshold?g.swapThreshold:g.invertedSwapThreshold,Qd,er===r),0!==yt){var ds=Lt(ot);do{Un=sn.children[ds-=yt]}while(Un&&("none"===ht(Un,"display")||Un===jt))}if(0===yt||Un===r)return rt(!1);er=r,Hr=yt;var cs=r.nextElementSibling,si=!1,$i=Rs(un,s,ot,a,r,c,e,si=1===yt);if(!1!==$i)return(1===$i||-1===$i)&&(si=1===$i),Ia=!0,setTimeout(ec,30),Xe(),si&&!cs?s.appendChild(ot):r.parentNode.insertBefore(ot,si?cs:r),Yn&&ko(Yn,0,fi-Yn.scrollTop),sn=ot.parentNode,void 0!==Bt&&!Qd&&(Zd=Math.abs(Bt-nn(r)[ii])),_e(),rt(!0)}if(s.contains(ot))return rt(!1)}return!1}function Je(Di,ed){ni(Di,Ve,ts({evt:e,isOwner:L,axis:Ie?"vertical":"horizontal",revert:u,dragRect:a,targetRect:c,canSort:q,fromSortable:pe,target:r,completed:rt,onMove:function(Nc,gr){return Rs(un,s,ot,a,Nc,nn(Nc),e,gr)},changed:_e},ed))}function Xe(){Je("dragOverAnimationCapture"),Ve.captureAnimationState(),Ve!==pe&&pe.captureAnimationState()}function rt(Di){return Je("dragOverCompleted",{insertion:Di}),Di&&(L?M._hideClone():M._showClone(Ve),Ve!==pe&&(bn(ot,vi?vi.options.ghostClass:M.options.ghostClass,!1),bn(ot,g.ghostClass,!0)),vi!==Ve&&Ve!==It.active?vi=Ve:Ve===It.active&&vi&&(vi=null),pe===Ve&&(Ve._ignoreWhileAnimating=r),Ve.animateAll(function(){Je("dragOverAnimationComplete"),Ve._ignoreWhileAnimating=null}),Ve!==pe&&(pe.animateAll(),pe._ignoreWhileAnimating=null)),(r===ot&&!ot.animated||r===s&&!r.animated)&&(er=null),!g.dragoverBubble&&!e.rootEl&&r!==document&&(ot.parentNode[qn]._isOutsideThisEl(e.target),!Di&&Js(e)),!g.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),Ge=!0}function _e(){Kn=Lt(ot),mo=Lt(ot,g.draggable),an({sortable:Ve,name:"change",toEl:s,newIndex:Kn,newDraggableIndex:mo,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){qt(document,"mousemove",this._onTouchMove),qt(document,"touchmove",this._onTouchMove),qt(document,"pointermove",this._onTouchMove),qt(document,"dragover",Js),qt(document,"mousemove",Js),qt(document,"touchmove",Js)},_offUpEvents:function(){var e=this.el.ownerDocument;qt(e,"mouseup",this._onDrop),qt(e,"touchend",this._onDrop),qt(e,"pointerup",this._onDrop),qt(e,"pointercancel",this._onDrop),qt(e,"touchcancel",this._onDrop),qt(document,"selectstart",this)},_onDrop:function(e){var s=this.el,r=this.options;Kn=Lt(ot),mo=Lt(ot,r.draggable),ni("drop",this,{evt:e}),sn=ot&&ot.parentNode,Kn=Lt(ot),mo=Lt(ot,r.draggable),It.eventCanceled||(Dl=!1,Qd=!1,Sa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pa(this.cloneId),Pa(this._dragStartId),this.nativeDraggable&&(qt(document,"drop",this),qt(s,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),br&&ht(document.body,"user-select",""),ht(ot,"transform",""),e&&(Da&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),jt&&jt.parentNode&&jt.parentNode.removeChild(jt),(un===sn||vi&&"clone"!==vi.lastPutMode)&&En&&En.parentNode&&En.parentNode.removeChild(En),ot&&(this.nativeDraggable&&qt(ot,"dragend",this),Qs(ot),ot.style["will-change"]="",Da&&!Dl&&bn(ot,vi?vi.options.ghostClass:this.options.ghostClass,!1),bn(ot,this.options.chosenClass,!1),an({sortable:this,name:"unchoose",toEl:sn,newIndex:null,newDraggableIndex:null,originalEvent:e}),un!==sn?(Kn>=0&&(an({rootEl:sn,name:"add",toEl:sn,fromEl:un,originalEvent:e}),an({sortable:this,name:"remove",toEl:sn,originalEvent:e}),an({rootEl:sn,name:"sort",toEl:sn,fromEl:un,originalEvent:e}),an({sortable:this,name:"sort",toEl:sn,originalEvent:e})),vi&&vi.save()):Kn!==wr&&Kn>=0&&(an({sortable:this,name:"update",toEl:sn,originalEvent:e}),an({sortable:this,name:"sort",toEl:sn,originalEvent:e})),It.active&&((null==Kn||-1===Kn)&&(Kn=wr,mo=Vr),an({sortable:this,name:"end",toEl:sn,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ni("nulling",this),un=ot=sn=jt=Os=En=yi=Xs=Br=bs=Da=Kn=mo=wr=Vr=er=Hr=vi=_o=It.dragged=It.ghost=It.clone=It.active=null,Sl.forEach(function(e){e.checked=!0}),Sl.length=Ea=Bh=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ot&&(this._onDragOver(e),function rg(d){d.dataTransfer&&(d.dataTransfer.dropEffect="move"),d.cancelable&&d.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var s,e=[],r=this.el.children,a=0,c=r.length,u=this.options;a<c;a++)Gi(s=r[a],u.draggable,this.el,!1)&&e.push(s.getAttribute(u.dataIdAttr)||ns(s));return e},sort:function(e,s){var r={},a=this.el;this.toArray().forEach(function(c,u){var g=a.children[u];Gi(g,this.options.draggable,a,!1)&&(r[c]=g)},this),s&&this.captureAnimationState(),e.forEach(function(c){r[c]&&(a.removeChild(r[c]),a.appendChild(r[c]))}),s&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,s){return Gi(e,s||this.options.draggable,this.el,!1)},option:function(e,s){var r=this.options;if(void 0===s)return r[e];var a=Ai.modifyOption(this,e,s);r[e]=typeof a<"u"?a:s,"group"===e&&qd(r)},destroy:function(){ni("destroy",this);var e=this.el;e[qn]=null,qt(e,"mousedown",this._onTapStart),qt(e,"touchstart",this._onTapStart),qt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(qt(e,"dragover",this),qt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(s){s.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jd.splice(Jd.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Xs){if(ni("hideClone",this),It.eventCanceled)return;ht(En,"display","none"),this.options.removeCloneOnHide&&En.parentNode&&En.parentNode.removeChild(En),Xs=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Xs){if(ni("showClone",this),It.eventCanceled)return;ot.parentNode!=un||this.options.group.revertClone?Os?un.insertBefore(En,Os):un.appendChild(En):un.insertBefore(En,ot),this.options.group.revertClone&&this.animate(ot,En),ht(En,"display",""),Xs=!1}}else this._hideClone()}},xa&&tn(document,"touchmove",function(d){(It.active||Dl)&&d.cancelable&&d.preventDefault()}),It.utils={on:tn,off:qt,css:ht,find:Nt,is:function(e,s){return!!Gi(e,s,e,!1)},extend:function Qo(d,e){if(d&&e)for(var s in e)e.hasOwnProperty(s)&&(d[s]=e[s]);return d},throttle:Fn,closest:Gi,toggleClass:bn,clone:ys,index:Lt,nextTick:Gr,cancelNextTick:Pa,detectDirection:Aa,getChild:kn,expando:qn},It.get=function(d){return d[qn]},It.mount=function(){for(var d=arguments.length,e=new Array(d),s=0;s<d;s++)e[s]=arguments[s];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(It.utils=ts(ts({},It.utils),r.utils)),Ai.mount(r)})},It.create=function(d,e){return new It(d,e)},It.version="1.15.6";var tr,po,Tl,vs,Wr,nr,Vn=[],jr=!1;function Vt(){Vn.forEach(function(d){clearInterval(d.pid)}),Vn=[]}function Il(){clearInterval(nr)}var xl=Fn(function(d,e,s,r){if(e.scroll){var L,a=(d.touches?d.touches[0]:d).clientX,c=(d.touches?d.touches[0]:d).clientY,u=e.scrollSensitivity,g=e.scrollSpeed,y=pn(),M=!1;po!==s&&(po=s,Vt(),L=e.scrollFn,!0===(tr=e.scroll)&&(tr=Mt(s,!0)));var q=0,pe=tr;do{var Ie=pe,Ve=nn(Ie),Ge=Ve.top,Je=Ve.bottom,Xe=Ve.left,rt=Ve.right,_e=Ve.width,qe=Ve.height,ft=void 0,yt=void 0,Bt=Ie.scrollWidth,Ot=Ie.scrollHeight,Gt=ht(Ie),ii=Ie.scrollLeft,Yn=Ie.scrollTop;Ie===y?(ft=_e<Bt&&("auto"===Gt.overflowX||"scroll"===Gt.overflowX||"visible"===Gt.overflowX),yt=qe<Ot&&("auto"===Gt.overflowY||"scroll"===Gt.overflowY||"visible"===Gt.overflowY)):(ft=_e<Bt&&("auto"===Gt.overflowX||"scroll"===Gt.overflowX),yt=qe<Ot&&("auto"===Gt.overflowY||"scroll"===Gt.overflowY));var fi=ft&&(Math.abs(rt-a)<=u&&ii+_e<Bt)-(Math.abs(Xe-a)<=u&&!!ii),Un=yt&&(Math.abs(Je-c)<=u&&Yn+qe<Ot)-(Math.abs(Ge-c)<=u&&!!Yn);if(!Vn[q])for(var ds=0;ds<=q;ds++)Vn[ds]||(Vn[ds]={});(Vn[q].vx!=fi||Vn[q].vy!=Un||Vn[q].el!==Ie)&&(Vn[q].el=Ie,Vn[q].vx=fi,Vn[q].vy=Un,clearInterval(Vn[q].pid),(0!=fi||0!=Un)&&(M=!0,Vn[q].pid=setInterval(function(){r&&0===this.layer&&It.active._onTouchMove(Wr);var cs=Vn[this.layer].vy?Vn[this.layer].vy*g:0,si=Vn[this.layer].vx?Vn[this.layer].vx*g:0;"function"==typeof L&&"continue"!==L.call(It.dragged.parentNode[qn],si,cs,d,Wr,Vn[this.layer].el)||ko(Vn[this.layer].el,si,cs)}.bind({layer:q}),24))),q++}while(e.bubbleScroll&&pe!==y&&(pe=Mt(pe,!1)));jr=M}},30),Oa=function(e){var s=e.originalEvent,r=e.putSortable,a=e.dragEl,u=e.dispatchSortableEvent,y=e.unhideGhostForTarget;if(s){var M=r||e.activeSortable;(0,e.hideGhostForTarget)();var L=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:s,q=document.elementFromPoint(L.clientX,L.clientY);y(),M&&!M.el.contains(q)&&(u("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function nc(){}function ic(){}nc.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var s=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=kn(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(s,a):this.sortable.el.appendChild(s),this.sortable.animateAll(),r&&r.animateAll()},drop:Oa},Ji(nc,{pluginName:"revertOnSpill"}),ic.prototype={onSpill:function(e){var s=e.dragEl,a=e.putSortable||this.sortable;a.captureAnimationState(),s.parentNode&&s.parentNode.removeChild(s),a.animateAll()},drop:Oa},Ji(ic,{pluginName:"removeOnSpill"}),It.mount(new function dg(){function d(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return d.prototype={dragStarted:function(s){var r=s.originalEvent;this.sortable.nativeDraggable?tn(document,"dragover",this._handleAutoScroll):tn(document,this.options.supportPointer?"pointermove":r.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(s){var r=s.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?qt(document,"dragover",this._handleAutoScroll):(qt(document,"pointermove",this._handleFallbackAutoScroll),qt(document,"touchmove",this._handleFallbackAutoScroll),qt(document,"mousemove",this._handleFallbackAutoScroll)),Il(),Vt(),function Zo(){clearTimeout(Ps),Ps=void 0}()},nulling:function(){Wr=po=tr=jr=nr=Tl=vs=null,Vn.length=0},_handleFallbackAutoScroll:function(s){this._handleAutoScroll(s,!0)},_handleAutoScroll:function(s,r){var a=this,c=(s.touches?s.touches[0]:s).clientX,u=(s.touches?s.touches[0]:s).clientY,g=document.elementFromPoint(c,u);if(Wr=s,r||this.options.forceAutoScrollFallback||vl||Ks||br){xl(s,this.options,g,r);var y=Mt(g,!0);jr&&(!nr||c!==Tl||u!==vs)&&(nr&&Il(),nr=setInterval(function(){var M=Mt(document.elementFromPoint(c,u),!0);M!==y&&(y=M,Vt()),xl(s,a.options,M,r)},10),Tl=c,vs=u)}else{if(!this.options.bubbleScroll||Mt(g,!0)===pn())return void Vt();xl(s,this.options,Mt(g,!1),!1)}}},Ji(d,{pluginName:"scroll",initializeByDefault:!0})}),It.mount(ic,nc);const Ns=It;function sc(d){let{containerElement:e}=d;const{onDragInit:s,onDragStart:r,onDrag:a,onDragEnd:c,preventDragFromKeys:u}=d;let g,y,M,L,q,pe;e||(e=document.body);let Ie={dragSource:e,dragHandle:null};function Ge(ft,yt,Bt){if("function"==typeof ft)return ft(yt,Bt)}function Xe(ft){let yt=!1;return u&&u.forEach(Bt=>{ft[Bt]&&(yt=!0)}),yt}function rt(ft){if(g=ft.target,!Xe(ft)){const yt=ft?.touches?.[0]??ft,{target:Bt}=yt;if(!d.allowDragFrom||d.allowDragFrom&&g.matches(d.allowDragFrom)||d.allowDragFromClosest&&g.closest(d.allowDragFromClosest)){Ie.dragHandle=g;const Ot=(0,A.windowScrollPosition)();y=Ot.left+yt.clientX,M=Ot.top+yt.clientY,L=yt.clientX-yt.clientX,q=yt.clientY-yt.clientY,Ie=Object.assign(Ie,{deltaX:L,deltaY:q,startX:y,startY:M,target:Bt}),!1!==Ge(s,ft,Ie)&&(document.body.addEventListener("mousemove",_e),document.body.addEventListener("touchmove",_e),document.body.addEventListener("mouseup",qe),document.body.addEventListener("touchend",qe),document.body.addEventListener("touchcancel",qe))}}}function _e(ft){const yt=ft?.touches?.[0]??ft;if(!Xe(ft)){L=yt.clientX-y,q=yt.clientY-M;const{target:Bt}=yt;pe||(Ie=Object.assign(Ie,{deltaX:L,deltaY:q,startX:y,startY:M,target:Bt}),Ge(r,ft,Ie),pe=!0),Ie=Object.assign(Ie,{deltaX:L,deltaY:q,startX:y,startY:M,target:Bt}),Ge(a,ft,Ie)}}function qe(ft){if(document.body.removeEventListener("mousemove",_e),document.body.removeEventListener("touchmove",_e),document.body.removeEventListener("mouseup",qe),document.body.removeEventListener("touchend",qe),document.body.removeEventListener("touchcancel",qe),pe){const{target:yt}=ft;Ie=Object.assign(Ie,{target:yt}),Ge(c,ft,Ie),pe=!1}}return function Ve(){e&&(e.addEventListener("mousedown",rt),e.addEventListener("touchstart",rt))}(),{destroy:function Je(){e&&(e.removeEventListener("mousedown",rt),e.removeEventListener("touchstart",rt))}}}function hg(d){const{element:e,onMouseWheel:s}=d;function c(u){const g=u||window.event;let y=0,M=0,L=0;g.wheelDelta&&(y=g.wheelDelta/120),g.detail&&(y=-g.detail/3),L=y,void 0!==g.axis&&g.axis===g.HORIZONTAL_AXIS&&(L=0,M=-1*y),void 0!==g.wheelDeltaY&&(L=g.wheelDeltaY/120),void 0!==g.wheelDeltaX&&(M=-1*g.wheelDeltaX/120),"function"==typeof s&&s(u,y,M,L)}return function a(){e.addEventListener("wheel",c),e.addEventListener("mousewheel",c)}(),{destroy:function r(){e.removeEventListener("wheel",c),e.removeEventListener("mousewheel",c)}}}function ug(d){const{resizeableElement:e,resizeableHandleElement:s,onResizeStart:r,onResize:a,onResizeEnd:c}=d;if(!s||"function"!=typeof s.addEventListener)throw new Error("[SlickResizable] You did not provide a valid html element that will be used for the handle to resize.");function y(pe,Ie){if("function"==typeof pe)return pe(Ie,{resizeableElement:e,resizeableHandleElement:s})}function M(pe){pe.preventDefault(),!1!==y(r,pe.touches?pe.changedTouches[0]:pe)&&(document.body.addEventListener("mousemove",L),document.body.addEventListener("mouseup",q),document.body.addEventListener("touchmove",L),document.body.addEventListener("touchend",q))}function L(pe){pe.preventDefault&&"touchmove"!==pe.type&&pe.preventDefault(),"function"==typeof a&&a(pe.touches?pe.changedTouches[0]:pe,{resizeableElement:e,resizeableHandleElement:s})}function q(pe){y(c,pe.touches?pe.changedTouches[0]:pe),document.body.removeEventListener("mousemove",L),document.body.removeEventListener("mouseup",q),document.body.removeEventListener("touchmove",L),document.body.removeEventListener("touchend",q)}return function u(){s.addEventListener("mousedown",M),s.addEventListener("touchstart",M)}(),{destroy:function g(){"function"==typeof s?.removeEventListener&&(s.removeEventListener("mousedown",M),s.removeEventListener("touchstart",M))}}}class Wh{constructor(e,s,r,a,c){if(this.container=e,this.data=s,this.columns=r,this.externalPubSub=c,this.DigitCommas="Millons",this.disableRowBasedonHeight=!1,this.cid="",this.canvas=null,this.canvas_context=null,this._defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableHtmlRendering:!0,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoEditNewRow:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,unorderableColumnCssClass:"unorderable",asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,columnResizingDelay:300,nonce:"",editorLock:ml,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,createTopHeaderPanel:!1,showPreHeaderPanel:!1,showTopHeaderPanel:!1,preHeaderPanelHeight:25,preHeaderPanelWidth:"auto",topHeaderPanelHeight:25,topHeaderPanelWidth:"auto",showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",rowHighlightCssClass:"highlight-animate",rowHighlightDuration:400,selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,throwWhenFrozenNotAllViewable:!1,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:this.defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,preventDragFromKeys:["ctrlKey","metaKey"],showCellSelection:!0,viewportClass:void 0,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,scrollRenderThrottling:50,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,sanitizer:void 0,mixinDefaults:!1,shadowRoot:void 0,MoveFocus:!0},this._columnDefaults={name:"",headerCssClass:null,defaultSortAsc:!0,focusable:!0,hidden:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,reorderable:!0,resizable:!0,sortable:!1,selectable:!0},this.page=0,this.offset=0,this.vScrollDir=1,this._bindingEventService=new St.P,this.initialized=!1,this.uid=`slickgrid_${Math.round(1e6*Math.random())}`,this._groupHeaders=[],this._headerScroller=[],this._headers=[],this._boundAncestors=[],this.viewportH=0,this.viewportW=0,this.canvasWidth=0,this.canvasWidthL=0,this.canvasWidthR=0,this.headersWidth=0,this.headersWidthL=0,this.headersWidthR=0,this.viewportHasHScroll=!1,this.viewportHasVScroll=!1,this.headerColumnWidthDiff=0,this.headerColumnHeightDiff=0,this.cellWidthDiff=0,this.cellHeightDiff=0,this.hasFrozenRows=!1,this.frozenRowsHeight=0,this.actualFrozenRow=-1,this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.topPanelH=0,this.headerRowH=0,this.footerRowH=0,this.tabbingDirection=1,this.activeCellNode=null,this.currentEditor=null,this.rowsCache={},this.renderedRows=0,this.numVisibleRows=0,this.prevScrollTop=0,this.scrollTop=0,this.lastRenderedScrollTop=0,this.lastRenderedScrollLeft=0,this.prevScrollLeft=0,this.scrollLeft=0,this.selectedRows=[],this.plugins=[],this.cellCssClasses={},this.columnsById={},this.sortColumns=[],this.columnPosLeft=[],this.columnPosRight=[],this.pagingActive=!1,this.pagingIsLastPage=!1,this.h_editorLoader=null,this.h_render=null,this.h_postrenderCleanup=null,this.postProcessedRows={},this.postProcessToRow=null,this.postProcessFromRow=null,this.postProcessedCleanupQueue=[],this.rtl=!1,this.rear="left",this.front="right",this.propScrollRear="scrollLeft",this.postProcessgroupId=0,this.counter_rows_rendered=0,this.counter_rows_removed=0,this.cssShow={position:"absolute",visibility:"hidden",display:"block"},this._hiddenParents=[],this.oldProps=[],this.enforceFrozenRowHeightRecalc=!1,this.columnResizeDragging=!1,this.slickDraggableInstance=null,this.slickMouseWheelInstances=[],this.slickResizableInstances=[],this.logMessageMaxCount=30,this._container="string"==typeof this.container?document.querySelector(this.container):this.container,!this._container)throw new Error(`SlickGrid requires a valid container, ${this.container} does not exist in the DOM.`);this._pubSubService=c,this.onActiveCellChanged=new ue("onActiveCellChanged",c),this.onActiveCellPositionChanged=new ue("onActiveCellPositionChanged",c),this.onAddNewRow=new ue("onAddNewRow",c),this.onAfterSetColumns=new ue("onAfterSetColumns",c),this.onAutosizeColumns=new ue("onAutosizeColumns",c),this.onBeforeAppendCell=new ue("onBeforeAppendCell",c),this.onBeforeCellEditorDestroy=new ue("onBeforeCellEditorDestroy",c),this.onBeforeColumnsResize=new ue("onBeforeColumnsResize",c),this.onBeforeDestroy=new ue("onBeforeDestroy",c),this.onBeforeEditCell=new ue("onBeforeEditCell",c),this.onBeforeFooterRowCellDestroy=new ue("onBeforeFooterRowCellDestroy",c),this.onBeforeHeaderCellDestroy=new ue("onBeforeHeaderCellDestroy",c),this.onBeforeHeaderRowCellDestroy=new ue("onBeforeHeaderRowCellDestroy",c),this.onBeforeSetColumns=new ue("onBeforeSetColumns",c),this.onBeforeSort=new ue("onBeforeSort",c),this.onBeforeUpdateColumns=new ue("onBeforeUpdateColumns",c),this.onCellChange=new ue("onCellChange",c),this.onCellEndEdit=new ue("onCellEndEdit",c),this.onCellCssStylesChanged=new ue("onCellCssStylesChanged",c),this.onClick=new ue("onClick",c),this.onColumnsReordered=new ue("onColumnsReordered",c),this.onColumnsDrag=new ue("onColumnsDrag",c),this.onColumnsResized=new ue("onColumnsResized",c),this.onColumnsResizeDblClick=new ue("onColumnsResizeDblClick",c),this.onCompositeEditorChange=new ue("onCompositeEditorChange",c),this.onContextMenu=new ue("onContextMenu",c),this.onDrag=new ue("onDrag",c),this.onDblClick=new ue("onDblClick",c),this.onDragInit=new ue("onDragInit",c),this.onDragStart=new ue("onDragStart",c),this.onDragEnd=new ue("onDragEnd",c),this.onFooterClick=new ue("onFooterClick",c),this.onFooterContextMenu=new ue("onFooterContextMenu",c),this.onFooterRowCellRendered=new ue("onFooterRowCellRendered",c),this.onHeaderCellRendered=new ue("onHeaderCellRendered",c),this.onHeaderClick=new ue("onHeaderClick",c),this.onHeaderContextMenu=new ue("onHeaderContextMenu",c),this.onHeaderMouseEnter=new ue("onHeaderMouseEnter",c),this.onHeaderMouseOver=new ue("onHeaderMouseOver",c),this.onHeaderMouseOut=new ue("onHeaderMouseOut",c),this.onHeaderMouseLeave=new ue("onHeaderMouseLeave",c),this.onHeaderRowMouseOver=new ue("onHeaderRowMouseOver",c),this.onHeaderRowMouseOut=new ue("onHeaderRowMouseOut",c),this.onHeaderRowCellRendered=new ue("onHeaderRowCellRendered",c),this.onHeaderRowMouseEnter=new ue("onHeaderRowMouseEnter",c),this.onHeaderRowMouseLeave=new ue("onHeaderRowMouseLeave",c),this.onKeyDown=new ue("onKeyDown",c),this.onMouseEnter=new ue("onMouseEnter",c),this.onMouseLeave=new ue("onMouseLeave",c),this.onPreHeaderClick=new ue("onPreHeaderClick",c),this.onPreHeaderContextMenu=new ue("onPreHeaderContextMenu",c),this.onRendered=new ue("onRendered",c),this.onScroll=new ue("onScroll",c),this.onSelectedRowsChanged=new ue("onSelectedRowsChanged",c),this.onSetOptions=new ue("onSetOptions",c),this.onActivateChangedOptions=new ue("onActivateChangedOptions",c),this.onSort=new ue("onSort",c),this.onValidationError=new ue("onValidationError",c),this.onViewportChanged=new ue("onViewportChanged",c),this.initialize(a)}init(){this.finishInitialization()}applyHtmlCode(e,s="",r){if(e)if(s instanceof HTMLElement||s instanceof DocumentFragment)!1!==r?.emptyTarget&&(0,A.emptyElement)(e),e.appendChild(s);else{if(!1!==r?.skipEmptyReassignment&&!(0,A.isDefined)(s)&&!e.innerHTML)return;if("number"==typeof s||"boolean"==typeof s)e.textContent=String(s);else{const c=this.sanitizeHtmlString(s);this._options.enableHtmlRendering&&c?e.innerHTML=c:e.textContent=c}}}initialize(e){if(e?.mixinDefaults?(this._options||(this._options=e),We.applyDefaults(this._options,this._defaults)):this._options=(0,A.extend)(!0,{},this._defaults,e),this.scrollThrottle=this.actionThrottle(this.render.bind(this),this._options.scrollRenderThrottling),this.maxSupportedCssHeight=this.maxSupportedCssHeight||this.getMaxSupportedCssHeight(),this.validateAndEnforceOptions(),this._columnDefaults.width=this._options.defaultColumnWidth,this._options.suppressCssChangesOnHiddenInit||this.cacheCssForHiddenInit(),this.updateColumnProps(),this._options.enableColumnReorder&&(!Ns||!Ns.create))throw new Error("SlickGrid requires Sortable.js module to be loaded");this.editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},(0,A.emptyElement)(this._container),"rtl"==$("body").attr("dir")&&(this.rtl=!0,this.rear="right",this.front="left",this.gotoRight_dir=this.gotoLeft,this.gotoLeft_dir=this.gotoRight,this.getOffsetRear=this.getOffsetRight,this.adjustX=this.adjustXToRight,this._container.classList.add("rtl"),this._container.setAttribute("direction","rtl")),this._container.style.outline=String(0),this._container.classList.add(this.uid),this._container.classList.add("slick-widget"),this._container.setAttribute("role","grid");const s=window.getComputedStyle(this._container);/relative|absolute|fixed/.test(s.position)||(this._container.style.position="relative"),this._focusSink=(0,A.createDomElement)("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},this._container),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller=(0,A.createDomElement)("div",{className:"slick-topheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._container),this._topHeaderPanelScroller.appendChild(document.createElement("div")),this._topHeaderPanel=(0,A.createDomElement)("div",null,this._topHeaderPanelScroller),this._topHeaderPanelSpacer=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._topHeaderPanelScroller),this._options.showTopHeaderPanel||We.hide(this._topHeaderPanelScroller)),this._paneHeaderL=(0,A.createDomElement)("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},this._container),this._paneHeaderR=(0,A.createDomElement)("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},this._container),this._paneTopL=(0,A.createDomElement)("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},this._container),this._paneTopR=(0,A.createDomElement)("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},this._container),this._paneBottomL=(0,A.createDomElement)("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},this._container),this._paneBottomR=(0,A.createDomElement)("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},this._container),this._options.createPreHeaderPanel&&(this._preHeaderPanelScroller=(0,A.createDomElement)("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderL),this._preHeaderPanelScroller.appendChild(document.createElement("div")),this._preHeaderPanel=(0,A.createDomElement)("div",null,this._preHeaderPanelScroller),this._preHeaderPanelSpacer=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScroller),this._preHeaderPanelScrollerR=(0,A.createDomElement)("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderR),this._preHeaderPanelR=(0,A.createDomElement)("div",null,this._preHeaderPanelScrollerR),this._preHeaderPanelSpacerR=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScrollerR),this._options.showPreHeaderPanel||(We.hide(this._preHeaderPanelScroller),We.hide(this._preHeaderPanelScrollerR))),this._headerScrollerL=(0,A.createDomElement)("div",{className:"slick-header slick-state-default slick-header-left"},this._paneHeaderL),this._headerScrollerR=(0,A.createDomElement)("div",{className:"slick-header slick-state-default slick-header-right"},this._paneHeaderR),this._headerScroller.push(this._headerScrollerL),this._headerScroller.push(this._headerScrollerR),this._headerL=(0,A.createDomElement)("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},this._headerScrollerL),this._headerR=(0,A.createDomElement)("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},this._headerScrollerR),this._headers=[this._headerL,this._headerR],this._headerRowScrollerL=(0,A.createDomElement)("div",{className:"slick-headerrow slick-state-default"},this._paneTopL),this._headerRowScrollerR=(0,A.createDomElement)("div",{className:"slick-headerrow slick-state-default"},this._paneTopR),this._headerRowScroller=[this._headerRowScrollerL,this._headerRowScrollerR],this._headerRowSpacerL=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerL),this._headerRowSpacerR=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerR),this._headerRowL=(0,A.createDomElement)("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},this._headerRowScrollerL),this._headerRowR=(0,A.createDomElement)("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},this._headerRowScrollerR),this._headerRows=[this._headerRowL,this._headerRowR],this._topPanelScrollerL=(0,A.createDomElement)("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopL),this._topPanelScrollerR=(0,A.createDomElement)("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopR),this._topPanelScrollers=[this._topPanelScrollerL,this._topPanelScrollerR],this._topPanelL=(0,A.createDomElement)("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerL),this._topPanelR=(0,A.createDomElement)("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerR),this._topPanels=[this._topPanelL,this._topPanelR],this._options.showColumnHeader||this._headerScroller.forEach(r=>{We.hide(r)}),this._options.showTopPanel||this._topPanelScrollers.forEach(r=>{We.hide(r)}),this._options.showHeaderRow||this._headerRowScroller.forEach(r=>{We.hide(r)}),this._viewportTopL=(0,A.createDomElement)("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},this._paneTopL),this._viewportTopR=(0,A.createDomElement)("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},this._paneTopR),this._viewportBottomL=(0,A.createDomElement)("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},this._paneBottomL),this._viewportBottomR=(0,A.createDomElement)("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},this._paneBottomR),this._viewport=[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR],this._options.viewportClass&&this._viewport.forEach(r=>{r.classList.add(...(0,A.classNameToList)(this._options.viewportClass))}),this._activeViewportNode=this._viewportTopL,this._canvasTopL=(0,A.createDomElement)("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},this._viewportTopL),this._canvasTopR=(0,A.createDomElement)("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},this._viewportTopR),this._canvasBottomL=(0,A.createDomElement)("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},this._viewportBottomL),this._canvasBottomR=(0,A.createDomElement)("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},this._viewportBottomR),this._canvas=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR],this.scrollbarDimensions=this.scrollbarDimensions||this.measureScrollbar(),this._activeCanvasNode=this._canvasTopL,this._topHeaderPanelSpacer&&We.width(this._topHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._preHeaderPanelSpacer&&We.width(this._preHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._headers.forEach(r=>{We.width(r,this.getHeadersWidth())}),We.width(this._headerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),We.width(this._headerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._options.createFooterRow&&(this._footerRowScrollerR=(0,A.createDomElement)("div",{className:"slick-footerrow slick-state-default"},this._paneTopR),this._footerRowScrollerL=(0,A.createDomElement)("div",{className:"slick-footerrow slick-state-default"},this._paneTopL),this._footerRowScroller=[this._footerRowScrollerL,this._footerRowScrollerR],this._footerRowSpacerL=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerL),We.width(this._footerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowSpacerR=(0,A.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerR),We.width(this._footerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowL=(0,A.createDomElement)("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},this._footerRowScrollerL),this._footerRowR=(0,A.createDomElement)("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},this._footerRowScrollerR),this._footerRow=[this._footerRowL,this._footerRowR],this._options.showFooterRow||this._footerRowScroller.forEach(r=>{We.hide(r)})),this._focusSink2=this._focusSink.cloneNode(!0),this._container.appendChild(this._focusSink2),this._options.explicitInitialization||this.finishInitialization()}finishInitialization(){this.initialized||(this.initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),this.disableSelection(this._headers),this._options.enableTextSelectionOnCells||this._viewport.forEach(e=>{this._bindingEventService.bind(e,"selectstart",s=>{s.target instanceof HTMLInputElement||HTMLTextAreaElement})}),this.updateColumnProps(),this._options.gridId?.startsWith("slkgrdRPT")||this.resizeColumnsManual(),this.setFrozenOptions(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateColumnCaches(),this.createColumnHeaders(),this.createColumnFooter(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._bindingEventService.bind(this._container,"resize",this.resizeCanvas.bind(this)),this._viewport.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleScroll.bind(this))}),this._options.enableMouseWheelScrollHandler&&this._viewport.forEach(e=>{this.slickMouseWheelInstances.push(hg({element:e,onMouseWheel:this.handleMouseWheel.bind(this)}))}),this._headerScroller.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleHeaderContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleHeaderClick.bind(this))}),this._headerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleHeaderRowScroll.bind(this))}),this._options.createFooterRow&&(this._footerRow.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleFooterContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleFooterClick.bind(this))}),this._footerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleFooterRowScroll.bind(this))})),this._options.createTopHeaderPanel&&this._bindingEventService.bind(this._topHeaderPanelScroller,"scroll",this.handleTopHeaderPanelScroll.bind(this)),this._options.createPreHeaderPanel&&(this._bindingEventService.bind(this._preHeaderPanelScroller,"scroll",this.handlePreHeaderPanelScroll.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"contextmenu",this.handlePreHeaderContextMenu.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"click",this.handlePreHeaderClick.bind(this))),this._bindingEventService.bind(this._focusSink,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(this._focusSink2,"keydown",this.handleKeyDown.bind(this)),this._canvas.forEach(e=>{this._bindingEventService.bind(e,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(e,"click",this.handleClick.bind(this)),this._bindingEventService.bind(e,"dblclick",this.handleDblClick.bind(this)),this._bindingEventService.bind(e,"contextmenu",this.handleContextMenu.bind(this)),this._bindingEventService.bind(e,"mouseover",this.handleCellMouseOver.bind(this)),this._bindingEventService.bind(e,"mouseout",this.handleCellMouseOut.bind(this))}),sc&&(this.slickDraggableInstance=sc({containerElement:this._container,allowDragFrom:"div.slick-cell",allowDragFromClosest:"div.slick-cell.dnd, div.slick-cell.cell-reorder",preventDragFromKeys:this._options.preventDragFromKeys,onDragInit:this.handleDragInit.bind(this),onDragStart:this.handleDragStart.bind(this),onDrag:this.handleDrag.bind(this),onDragEnd:this.handleDragEnd.bind(this)})),this._options.suppressCssChangesOnHiddenInit||this.restoreCssFromHiddenInit())}resizeColumnsManual(){let e=this.getColumns().map(s=>s.ColumnWidth).reduce((s,r)=>s+r,0);this.viewportW>e&&this.getColumns&&this.getColumns().length>0&&(this.getColumns()[this.getColumns().length-1].width=this.getColumns()[this.getColumns().length-1]?.ColumnWidth?this.getColumns()[this.getColumns().length-1]?.ColumnWidth:this.viewportW-e+0-20)}cacheCssForHiddenInit(){this._hiddenParents=We.parents(this._container,":hidden"),this._hiddenParents.forEach(e=>{const s={};Object.keys(this.cssShow).forEach(r=>{this.cssShow&&(s[r]=e.style[r],e.style[r]=this.cssShow[r])}),this.oldProps.push(s)})}restoreCssFromHiddenInit(){let e=0;this._hiddenParents&&this._hiddenParents.forEach(s=>{const r=this.oldProps[e++];Object.keys(this.cssShow).forEach(a=>{this.cssShow&&(s.style[a]=r[a])})})}hasFrozenColumns(){return this._options.frozenColumn>-1}registerPlugin(e){this.plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(let s=this.plugins.length;s>=0;s--)if(this.plugins[s]===e){this.plugins[s]?.destroy(),this.plugins.splice(s,1);break}}getPluginByName(e){for(let s=this.plugins.length-1;s>=0;s--)if(this.plugins[s]?.pluginName===e)return this.plugins[s]}getPubSubService(){return this._pubSubService}setSelectionModel(e){this.selectionModel&&(this.selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged.bind(this)),this.selectionModel.destroy&&this.selectionModel.destroy()),this.selectionModel=e,this.selectionModel&&(this.selectionModel.init(this),this.selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged.bind(this)))}getSelectionModel(){return this.selectionModel}getCanvasNode(e,s){return this._getContainerElement(this.getCanvases(),e,s)}getActiveCanvasNode(e){return void 0===e||(e instanceof H&&(e=e.getNativeEvent()),this._activeCanvasNode=e?.target?.closest(".grid-canvas")),this._activeCanvasNode}getCanvases(){return this._canvas}getViewportNode(e,s){return this._getContainerElement(this.getViewports(),e,s)}getViewports(){return this._viewport}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){return e instanceof H&&(e=e.getNativeEvent()),this._activeViewportNode=e?.target?.closest(".slick-viewport"),this._activeViewportNode}_getContainerElement(e,s,r){if(!e)return;s||(s=0),r||(r=0);const a="number"==typeof s?s:this.getColumnIndex(s);return e[(this.hasFrozenRows&&r>=this.actualFrozenRow+(this._options.frozenBottom?0:1)?2:0)+(this.hasFrozenColumns()&&a>this._options.frozenColumn?1:0)]}measureScrollbar(){let e="";this._viewport.forEach(c=>e+=c.className);const s=(0,A.createDomElement)("div",{className:e,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),r=(0,A.createDomElement)("div",{style:{width:"200px",height:"200px",overflow:"auto"}},s),a={width:s.offsetWidth-s.clientWidth,height:s.offsetHeight-s.clientHeight};return r.remove(),s.remove(),a}getHeadersWidth(){this.headersWidth=this.headersWidthL=this.headersWidthR=0;const e=!this._options.autoHeight;let s=0;const r=this.columns.length;for(s=0;s<r;s++){if(!this.columns[s]||this.columns[s].hidden)continue;const a=this.columns[s].width;this._options.frozenColumn>-1&&s>this._options.frozenColumn?this.headersWidthR+=a||0:this.headersWidthL+=a||0}return e&&(this._options.frozenColumn>-1&&s>this._options.frozenColumn?this.headersWidthR+=this.scrollbarDimensions?.width||0:this.headersWidthL+=this.scrollbarDimensions?.width||0),this.hasFrozenColumns()?(this.headersWidthL=this.headersWidthL+1e3,this.headersWidthR=Math.max(this.headersWidthR,this.viewportW)+this.headersWidthL,this.headersWidthR+=this.scrollbarDimensions?.width||0):(this.headersWidthL+=this.scrollbarDimensions?.width||0,this.headersWidthL=Math.max(this.headersWidthL,this.viewportW)+1e3),this.headersWidth=this.headersWidthL+this.headersWidthR,Math.max(this.headersWidth,this.viewportW)+1e3}getCanvasWidth(){const e=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;let s=this.columns.length;for(this.canvasWidthL=this.canvasWidthR=0;s--;)!this.columns[s]||this.columns[s].hidden||(this.hasFrozenColumns()&&s>this._options.frozenColumn?this.canvasWidthR+=this.columns[s].width||0:this.canvasWidthL+=this.columns[s].width||0);let r=this.canvasWidthL+this.canvasWidthR;if(this._options.fullWidthRows){const a=Math.max(r,e)-r;a>0&&(r+=a,this.hasFrozenColumns()?this.canvasWidthR+=a:this.canvasWidthL+=a)}return r}updateCanvasWidth(e){const s=this.canvasWidth,r=this.canvasWidthL,a=this.canvasWidthR;this.canvasWidth=this.getCanvasWidth(),this._options.createTopHeaderPanel&&We.width(this._topHeaderPanel,this._options.topHeaderPanelWidth??this.canvasWidth);const c=this.canvasWidth!==s||this.canvasWidthL!==r||this.canvasWidthR!==a;if(c||this.hasFrozenColumns()||this.hasFrozenRows)if(We.width(this._canvasTopL,this.canvasWidthL),this.getHeadersWidth(),We.width(this._headerL,this.headersWidthL),We.width(this._headerR,this.headersWidthR),this.hasFrozenColumns()){const u=We.width(this._container)||0;if(u>0&&this.canvasWidthL>u&&this._options.throwWhenFrozenNotAllViewable)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");We.width(this._canvasTopR,this.canvasWidthR),We.width(this._paneHeaderL,this.canvasWidthL),We.setStyleSize(this._paneHeaderR,this.rear,this.canvasWidthL),We.setStyleSize(this._paneHeaderR,"width",this.viewportW-this.canvasWidthL),We.width(this._paneTopL,this.canvasWidthL),We.setStyleSize(this._paneTopR,this.rear,this.canvasWidthL),We.width(this._paneTopR,this.viewportW-this.canvasWidthL),We.width(this._headerRowScrollerL,this.canvasWidthL),We.width(this._headerRowScrollerR,this.viewportW-this.canvasWidthL),We.width(this._headerRowL,this.canvasWidthL),We.width(this._headerRowR,this.canvasWidthR),this._options.createFooterRow&&(We.width(this._footerRowScrollerL,this.canvasWidthL),We.width(this._footerRowScrollerR,this.viewportW-this.canvasWidthL),We.width(this._footerRowL,this.canvasWidthL),We.width(this._footerRowR,this.canvasWidthR)),this._options.createPreHeaderPanel&&We.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),We.width(this._viewportTopL,this.canvasWidthL),We.width(this._viewportTopR,this.viewportW-this.canvasWidthL),this.hasFrozenRows&&(We.width(this._paneBottomL,this.canvasWidthL),We.setStyleSize(this._paneBottomR,this.rear,this.canvasWidthL),We.width(this._viewportBottomL,this.canvasWidthL),We.width(this._viewportBottomR,this.viewportW-this.canvasWidthL),We.width(this._canvasBottomL,this.canvasWidthL),We.width(this._canvasBottomR,this.canvasWidthR))}else We.width(this._paneHeaderL,"100%"),We.width(this._paneTopL,"100%"),We.width(this._headerRowScrollerL,"100%"),We.width(this._headerRowL,this.canvasWidth),this._options.createFooterRow&&(We.width(this._footerRowScrollerL,"100%"),We.width(this._footerRowL,this.canvasWidth)),this._options.createPreHeaderPanel&&We.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),We.width(this._viewportTopL,"100%"),this.hasFrozenRows&&(We.width(this._viewportBottomL,"100%"),We.width(this._canvasBottomL,this.canvasWidthL));this.viewportHasHScroll=this.canvasWidth>=this.viewportW-(this.scrollbarDimensions?.width||0),We.width(this._headerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),We.width(this._headerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),this._options.createFooterRow&&(We.width(this._footerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),We.width(this._footerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0))),(c||e)&&this.applyColumnWidths()}disableSelection(e){e.forEach(s=>{s.setAttribute("unselectable","on"),s.style.mozUserSelect="none",this._bindingEventService.bind(s,"selectstart",()=>!1)})}getMaxSupportedCssHeight(){let e=1e6;const s=navigator.userAgent.toLowerCase().match(/firefox/)?this._options.ffMaxSupportedCssHeight:this._options.maxSupportedCssHeight,r=(0,A.createDomElement)("div",{style:{display:"hidden"}},document.body);let a=!0;for(;a;){const c=2*e;We.height(r,c);const u=We.height(r);if(c>s||u!==c){a=!1;break}e=c}return r.remove(),e}getUID(){return this.uid}getHeaderColumnWidthDiff(){return this.headerColumnWidthDiff}getScrollbarDimensions(){return this.scrollbarDimensions}getDisplayedScrollbarDimensions(){return{width:this.viewportHasVScroll&&this.scrollbarDimensions?.width||0,height:this.viewportHasHScroll&&this.scrollbarDimensions?.height||0}}getAbsoluteColumnMinWidth(){return this.absoluteColumnMinWidth}bindAncestorScrollEvents(){let e=this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;for(;(e=e.parentNode)!==document.body&&e;)(e===this._viewportTopL||e.scrollWidth!==e.clientWidth||e.scrollHeight!==e.clientHeight)&&(this._boundAncestors.push(e),this._bindingEventService.bind(e,"scroll",this.handleActiveCellPositionChange.bind(this)))}unbindAncestorScrollEvents(){this._boundAncestors.forEach(e=>{this._bindingEventService.unbindByEventName(e,"scroll")}),this._boundAncestors=[]}updateColumnHeader(e,s,r){if(this.initialized){const a=this.getColumnIndex(e);if(!(0,A.isDefined)(a))return;const c=this.columns[a],u=this.getColumnByIndex(a);return u&&(void 0!==s&&(this.columns[a].name=s),void 0!==r&&(this.columns[a].toolTip=r),this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:u,column:c,grid:this}),u.setAttribute("title",r||""),void 0!==s&&this.applyHtmlCode(u.children[0],s),this.triggerEvent(this.onHeaderCellRendered,{node:u,column:c,grid:this})),u}}getHeader(e){if(!e)return this.hasFrozenColumns()?this._headers:this._headerL;const s=this.getColumnIndex(e.id);return this.hasFrozenColumns()?s<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL}getHeaderColumn(e){const s="number"==typeof e?e:this.getColumnIndex(e),r=this.hasFrozenColumns()?s<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,a=this.hasFrozenColumns()?s<=this._options.frozenColumn?s:s-this._options.frozenColumn-1:s;return r.children[a]}getHeaderRow(){return this.hasFrozenColumns()?this._headerRows:this._headerRows?.[0]}getFooterRow(){return this.hasFrozenColumns()?this._footerRow:this._footerRow?.[0]}getPreHeaderPanel(){return this._preHeaderPanel}getPreHeaderPanelLeft(){return this._preHeaderPanel}getPreHeaderPanelRight(){return this._preHeaderPanelR}getTopHeaderPanel(){return this._topHeaderPanel}getHeaderRowColumn(e){let r,s="number"==typeof e?e:this.getColumnIndex(e);return this.hasFrozenColumns()?s<=this._options.frozenColumn?r=this._headerRowL:(r=this._headerRowR,s-=this._options.frozenColumn+1):r=this._headerRowL,r.children[s]}getFooterRowColumn(e){let r,s="number"==typeof e?e:this.getColumnIndex(e);return this.hasFrozenColumns()?s<=this._options.frozenColumn?r=this._footerRowL:(r=this._footerRowR,s-=this._options.frozenColumn+1):r=this._footerRowL,r?.children[s]}createColumnFooter(){if(this._options.createFooterRow){this._footerRow.forEach(e=>{e.querySelectorAll(".slick-footerrow-column").forEach(r=>{const a=We.storage.get(r,"column");this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:r,column:a,grid:this})})}),(0,A.emptyElement)(this._footerRowL),(0,A.emptyElement)(this._footerRowR);for(let e=0;e<this.columns.length;e++){const s=this.columns[e];if(!s||s.hidden)continue;const r=(0,A.createDomElement)("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},this.hasFrozenColumns()&&e>this._options.frozenColumn?this._footerRowR:this._footerRowL),a=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;a&&r.classList.add(a),We.storage.put(r,"column",s),this.triggerEvent(this.onFooterRowCellRendered,{node:r,column:s,grid:this})}}}handleHeaderMouseHoverOn(e){e?.target.classList.add("slick-state-hover")}handleHeaderMouseHoverOff(e){e?.target.classList.remove("slick-state-hover")}createColumnHeaders(){this._headers.forEach(e=>{e.querySelectorAll(".slick-header-column").forEach(r=>{const a=We.storage.get(r,"column");a&&this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:r,column:a,grid:this})})}),(0,A.emptyElement)(this._headerL),(0,A.emptyElement)(this._headerR),this.getHeadersWidth(),We.width(this._headerL,this.headersWidthL),We.width(this._headerR,this.headersWidthR),this._headerRows.forEach(e=>{e.querySelectorAll(".slick-headerrow-column").forEach(r=>{const a=We.storage.get(r,"column");a&&this.triggerEvent(this.onBeforeHeaderRowCellDestroy,{node:this,column:a,grid:this})})}),(0,A.emptyElement)(this._headerRowL),(0,A.emptyElement)(this._headerRowR),this._options.createFooterRow&&(this._footerRowL.querySelectorAll(".slick-footerrow-column").forEach(s=>{const r=We.storage.get(s,"column");r&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:r,grid:this})}),(0,A.emptyElement)(this._footerRowL),this.hasFrozenColumns()&&(this._footerRowR.querySelectorAll(".slick-footerrow-column").forEach(r=>{const a=We.storage.get(r,"column");a&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:a,grid:this})}),(0,A.emptyElement)(this._footerRowR)));for(let e=0;e<this.columns.length;e++){const s=this.columns[e];if(!s||s.hidden)continue;const r=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,a=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerRowL:this._headerRowR:this._headerRowL,c=(0,A.createDomElement)("div",{id:`${this.uid+s.id}`,dataset:{id:String(s.id)},role:"columnheader",className:"slick-state-default slick-header-column"},r);s.toolTip&&(c.title=s.toolTip),s.reorderable||c.classList.add(this._options.unorderableColumnCssClass);const u=(0,A.createDomElement)("span",{className:"slick-column-name"},c);this.applyHtmlCode(u,s.name),We.width(c,s.width-this.headerColumnWidthDiff);let g=s.headerCssClass||null;if(g&&c.classList.add(...(0,A.classNameToList)(g)),g=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null,g&&c.classList.add(g),this._bindingEventService.bind(c,"mouseenter",this.handleHeaderMouseEnter.bind(this)),this._bindingEventService.bind(c,"mouseleave",this.handleHeaderMouseLeave.bind(this)),this._bindingEventService.bind(c,"mouseover",this.handleHeaderMouseOver.bind(this)),this._bindingEventService.bind(c,"mouseout",this.handleHeaderMouseOut.bind(this)),We.storage.put(c,"column",s),(this._options.enableColumnReorder||s.sortable)&&(this._bindingEventService.bind(c,"mouseenter",this.handleHeaderMouseHoverOn.bind(this)),this._bindingEventService.bind(c,"mouseleave",this.handleHeaderMouseHoverOff.bind(this))),s.hasOwnProperty("headerCellAttrs")&&s.headerCellAttrs instanceof Object&&Object.keys(s.headerCellAttrs).forEach(y=>{s.headerCellAttrs.hasOwnProperty(y)&&c.setAttribute(y,s.headerCellAttrs[y])}),s.sortable&&(c.classList.add("slick-header-sortable"),(0,A.createDomElement)("div",{className:"slick-sort-indicator "+(this._options.numberedMultiColumnSort&&!this._options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")},c),this._options.numberedMultiColumnSort&&this._options.sortColNumberInSeparateSpan&&(0,A.createDomElement)("div",{className:"slick-sort-indicator-numbered"},c)),this.triggerEvent(this.onHeaderCellRendered,{node:c,column:s,grid:this}),this._options.showHeaderRow){const y=(0,A.createDomElement)("div",{className:`slick-state-default slick-headerrow-column l${e} r${e}`},a),M=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;M&&y.classList.add(M),this._bindingEventService.bind(y,"mouseenter",this.handleHeaderRowMouseEnter.bind(this)),this._bindingEventService.bind(y,"mouseleave",this.handleHeaderRowMouseLeave.bind(this)),this._bindingEventService.bind(y,"mouseover",this.handleHeaderRowMouseOver.bind(this)),this._bindingEventService.bind(y,"mouseout",this.handleHeaderRowMouseOut.bind(this)),We.storage.put(y,"column",s),this.triggerEvent(this.onHeaderRowCellRendered,{node:y,column:s,grid:this})}if(this._options.createFooterRow&&this._options.showFooterRow){const y=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._footerRow[0]:this._footerRow[1]:this._footerRow[0],M=(0,A.createDomElement)("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},y);We.storage.put(M,"column",s),this.triggerEvent(this.onFooterRowCellRendered,{node:M,column:s,grid:this})}}this.setSortColumns(this.sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&("function"==typeof this._options.enableColumnReorder?this._options.enableColumnReorder(this,this._headers,this.headerColumnWidthDiff,this.setColumns,this.setupColumnResize,this.columns,this.getColumnIndex,this.uid,this.triggerEvent):this.setupColumnReorder())}setupColumnSort(){this._headers.forEach(e=>{this._bindingEventService.bind(e,"click",s=>{if(this.columnResizeDragging||s.target.classList.contains("slick-resizable-handle"))return;const r=s.target.closest(".slick-header-column");if(!r)return;const a=We.storage.get(r,"column");if(a?.sortable){if(!this.getEditorLock()?.commitCurrentEdit())return;const c=this.sortColumns.slice();let u=null,g=0;for(;g<this.sortColumns.length;g++)if(this.sortColumns[g].columnId===a.id){u=this.sortColumns[g],u.sortAsc=!u.sortAsc;break}const y=!!u;let M;this._options.tristateMultiColumnSort?(u||(u={columnId:a.id,sortAsc:a.defaultSortAsc,sortCol:a}),y&&u.sortAsc&&(this.sortColumns.splice(g,1),u=null),this._options.multiColumnSort||(this.sortColumns=[]),u&&(!y||!this._options.multiColumnSort)&&this.sortColumns.push(u)):s.metaKey&&this._options.multiColumnSort?u&&this.sortColumns.splice(g,1):((!s.shiftKey&&!s.metaKey||!this._options.multiColumnSort)&&(this.sortColumns=[]),u?0===this.sortColumns.length&&this.sortColumns.push(u):(u={columnId:a.id,sortAsc:a.defaultSortAsc,sortCol:a},this.sortColumns.push(u))),M=this._options.multiColumnSort?{multiColumnSort:!0,previousSortColumns:c,sortCols:this.sortColumns.map(L=>{const q=this.columns[this.getColumnIndex(L.columnId)];return!q||q.hidden?null:{columnId:q.id,sortCol:q,sortAsc:L.sortAsc}}).filter(L=>L)}:{multiColumnSort:!1,previousSortColumns:c,columnId:this.sortColumns.length>0?a.id:null,sortCol:this.sortColumns.length>0?a:null,sortAsc:!(this.sortColumns.length>0)||this.sortColumns[0].sortAsc},!1!==this.triggerEvent(this.onBeforeSort,M,s).getReturnValue()&&(this.setSortColumns(this.sortColumns),this.triggerEvent(this.onSort,M,s))}})})}setupColumnReorder(){this.sortableSideLeftInstance?.destroy(),this.sortableSideRightInstance?.destroy();let e=null;const s=()=>this._viewportScrollContainerX.scrollLeft+=10,r=()=>this._viewportScrollContainerX.scrollLeft-=10;let a=!1;const c={animation:50,direction:"horizontal",chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!this.hasFrozenColumns(),filter:`.${this._options.unorderableColumnCssClass}`,onMove:u=>!u.related.classList.contains(this._options.unorderableColumnCssClass),onStart:u=>{a=!this.hasFrozenColumns()||(0,A.getOffset)(u.item).left>(0,A.getOffset)(this._viewportScrollContainerX).left,a&&u.originalEvent.pageX>this._container.clientWidth?e||(e=setInterval(s,100)):a&&u.originalEvent.pageX<(0,A.getOffset)(this._viewportScrollContainerX).left?e||(e=setInterval(r,100)):(clearInterval(e),e=null)},onEnd:u=>{if(clearInterval(e),e=null,!this.getEditorLock()?.commitCurrentEdit())return;let g=this.sortableSideLeftInstance?.toArray()??[];g=g.concat(this.sortableSideRightInstance?.toArray()??[]);const y=[];for(let M=0;M<g.length;M++)y.push(this.columns[this.getColumnIndex(g[M])]);this.setColumns(y),this.triggerEvent(this.onColumnsReordered,{impactedColumns:this.columns}),u.stopPropagation(),this.setupColumnResize(),this.activeCellNode&&this.setFocus()}};this.sortableSideLeftInstance=Ns.create(this._headerL,c),this.sortableSideRightInstance=Ns.create(this._headerR,c)}getHeaderChildren(){const e=Array.from(this._headers[0].children),s=Array.from(this._headers[1].children);return e.concat(s)}handleResizeableDoubleClick(e){const s=e.target.parentElement.id.replace(this.uid,"");this.triggerEvent(this.onColumnsResizeDblClick,{triggeredByColumn:s})}setupColumnResize(){let e,s,r,a,c,u,g,y=-1,M=0;const L=this.getHeaderChildren(),q=this.getVisibleColumns();for(let pe=0;pe<L.length;pe++)L[pe].querySelectorAll(".slick-resizable-handle").forEach(Ge=>Ge.remove()),pe<q.length&&q[pe]?.resizable&&(void 0===g&&(g=pe),y=pe);if(void 0!==g)for(let pe=0;pe<L.length;pe++){const Ie=L[pe];if(pe>=q.length||!q[pe]||pe<g||this._options.forceFitColumns&&pe>=y)continue;const Ve=(0,A.createDomElement)("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},Ie);this._bindingEventService.bind(Ve,"dblclick",this.handleResizeableDoubleClick.bind(this)),this.slickResizableInstances.push(ug({resizeableElement:Ie,resizeableHandleElement:Ve,onResizeStart:(Ge,Je)=>{const Xe=Ge.touches?Ge.changedTouches[0]:Ge;if(!this.getEditorLock()?.commitCurrentEdit())return!1;a=Xe.pageX,M=0,Je.resizeableElement.classList.add("slick-header-column-active");let rt=null,_e=null;for(let yt=0;yt<L.length;yt++)yt<q.length&&q[yt]&&(q[yt].previousWidth=L[yt].offsetWidth);if(this._options.forceFitColumns)for(rt=0,_e=0,e=pe+1;e<q.length;e++)r=q[e],r?.resizable&&(null!==_e&&(r.maxWidth?_e+=r.maxWidth-(r.previousWidth||0):_e=null),rt+=(r.previousWidth||0)-Math.max(r.minWidth||0,this.absoluteColumnMinWidth));let qe=0,ft=0;for(e=0;e<=pe;e++)r=q[e],r?.resizable&&(null!==ft&&(r.maxWidth?ft+=r.maxWidth-(r.previousWidth||0):ft=null),qe+=(r.previousWidth||0)-Math.max(r.minWidth||0,this.absoluteColumnMinWidth));null===rt&&(rt=1e5),null===qe&&(qe=1e5),null===_e&&(_e=1e5),null===ft&&(ft=1e5),u=a+Math.min(rt,ft),c=a-Math.min(qe,_e)},onResize:(Ge,Je)=>{const Xe=Ge.touches?Ge.changedTouches[0]:Ge;let rt;this.columnResizeDragging=!0;const _e=Math.min(u,Math.max(c,Xe.pageX))-a;let qe,ft=0,yt=0;const Bt=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;if(_e<0){for(qe=_e,e=pe;e>=0;e--)r=q[e],r&&r.resizable&&!r.hidden&&(rt=Math.max(r.minWidth||0,this.absoluteColumnMinWidth),qe&&(r.previousWidth||0)+qe<rt?(qe+=(r.previousWidth||0)-rt,r.width=rt):(r.width=(r.previousWidth||0)+qe,qe=0));for(s=0;s<=pe;s++)r=q[s],r&&!r.hidden&&(this.hasFrozenColumns()&&s>this._options.frozenColumn?yt+=r.width||0:ft+=r.width||0);if(this._options.forceFitColumns)for(qe=-_e,e=pe+1;e<q.length;e++)r=q[e],r&&!r.hidden&&r.resizable&&(qe&&r.maxWidth&&r.maxWidth-(r.previousWidth||0)<qe?(qe-=r.maxWidth-(r.previousWidth||0),r.width=r.maxWidth):(r.width=(r.previousWidth||0)+qe,qe=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?yt+=r.width||0:ft+=r.width||0);else for(e=pe+1;e<q.length;e++)r=q[e],r&&!r.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?yt+=r.width||0:ft+=r.width||0);if(this._options.forceFitColumns)for(qe=-_e,e=pe+1;e<q.length;e++)r=q[e],r&&!r.hidden&&r.resizable&&(qe&&r.maxWidth&&r.maxWidth-(r.previousWidth||0)<qe?(qe-=r.maxWidth-(r.previousWidth||0),r.width=r.maxWidth):(r.width=(r.previousWidth||0)+qe,qe=0))}else{for(qe=_e,ft=0,yt=0,e=pe;e>=0;e--)if(r=q[e],r&&!r.hidden&&r.resizable)if(qe&&r.maxWidth&&r.maxWidth-(r.previousWidth||0)<qe)qe-=r.maxWidth-(r.previousWidth||0),r.width=r.maxWidth;else{const Ot=(r.previousWidth||0)+qe,Gt=this.canvasWidthL+qe;this.hasFrozenColumns()&&e<=this._options.frozenColumn?(Ot>M&&Gt<Bt-this._options.frozenRightViewportMinWidth&&(M=Ot),r.width=Gt+this._options.frozenRightViewportMinWidth>Bt?M:Ot):r.width=Ot,qe=0}for(s=0;s<=pe;s++)r=q[s],r&&!r.hidden&&(this.hasFrozenColumns()&&s>this._options.frozenColumn?yt+=r.width||0:ft+=r.width||0);if(this._options.forceFitColumns)for(qe=-_e,e=pe+1;e<q.length;e++)r=q[e],r&&!r.hidden&&r.resizable&&(rt=Math.max(r.minWidth||0,this.absoluteColumnMinWidth),qe&&(r.previousWidth||0)+qe<rt?(qe+=(r.previousWidth||0)-rt,r.width=rt):(r.width=(r.previousWidth||0)+qe,qe=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?yt+=r.width||0:ft+=r.width||0);else for(e=pe+1;e<q.length;e++)r=q[e],r&&!r.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?yt+=r.width||0:ft+=r.width||0)}this.hasFrozenColumns()&&ft!==this.canvasWidthL&&(We.width(this._headerL,ft+1e3),We.setStyleSize(this._paneHeaderR,this.rear,this.canvasWidthL)),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths(),this.triggerEvent(this.onColumnsDrag,{triggeredByColumn:Je.resizeableElement,resizeHandle:Je.resizeableHandleElement})},onResizeEnd:(Ge,Je)=>{Je.resizeableElement.classList.remove("slick-header-column-active");const Xe=Je.resizeableElement.id.replace(this.uid,"");let rt;for(!0===this.triggerEvent(this.onBeforeColumnsResize,{triggeredByColumn:Xe}).getReturnValue()&&this.applyColumnHeaderWidths(),e=0;e<q.length;e++)r=q[e],r&&!r.hidden&&L[e]&&(rt=L[e].offsetWidth,r.previousWidth!==rt&&r.rerenderOnResize&&this.invalidateAllRows());this.updateCanvasWidth(!0),this.render(),this.triggerEvent(this.onColumnsResized,{triggeredByColumn:Xe}),clearTimeout(this._columnResizeTimer),this._columnResizeTimer=setTimeout(()=>this.columnResizeDragging=!1,this._options.columnResizingDelay)}}))}}getVBoxDelta(e){const r=getComputedStyle(e);let a=0;return["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].forEach(c=>a+=We.toFloat(r[c])),a}setFrozenOptions(){if(this._options.frozenColumn=this._options.frozenColumn>=0&&this._options.frozenColumn<this.columns.length?parseInt(this._options.frozenColumn,10):-1,this._options.frozenRow>-1){this.hasFrozenRows=!0,this.frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;const e=this.getDataLength();this.actualFrozenRow=this._options.frozenBottom?e-this._options.frozenRow:this._options.frozenRow}else this.hasFrozenRows=!1}setPaneVisibility(){this.hasFrozenColumns()?(We.show(this._paneHeaderR),We.show(this._paneTopR),this.hasFrozenRows?(We.show(this._paneBottomL),We.show(this._paneBottomR)):(We.hide(this._paneBottomR),We.hide(this._paneBottomL))):(We.hide(this._paneHeaderR),We.hide(this._paneTopR),We.hide(this._paneBottomR),this.hasFrozenRows?We.show(this._paneBottomL):(We.hide(this._paneBottomR),We.hide(this._paneBottomL)))}setOverflow(){if(this._viewportTopL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?"hidden":this.hasFrozenRows?"scroll":"auto",this._viewportTopR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":(this.hasFrozenColumns(),this.hasFrozenRows?"scroll":"auto"),this._viewportBottomL.style.overflowX=this.hasFrozenColumns()&&this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto",this._viewportBottomL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?"hidden":this.hasFrozenRows?"scroll":"auto",this._viewportBottomR.style.overflowX=this.hasFrozenColumns()&&this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto",this._viewportBottomR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":(this.hasFrozenColumns(),"auto"),this._options.viewportClass){const e=(0,A.classNameToList)(this._options.viewportClass);this._viewportTopL.classList.add(...e),this._viewportTopR.classList.add(...e),this._viewportBottomL.classList.add(...e),this._viewportBottomR.classList.add(...e)}}setScroller(){this.hasFrozenColumns()?(this._headerScrollContainer=this._headerScrollerR,this._headerRowScrollContainer=this._headerRowScrollerR,this._footerRowScrollContainer=this._footerRowScrollerR,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomR,this._viewportScrollContainerY=this._viewportTopR):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomR:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopR):(this._headerScrollContainer=this._headerScrollerL,this._headerRowScrollContainer=this._headerRowScrollerL,this._footerRowScrollContainer=this._footerRowScrollerL,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomL,this._viewportScrollContainerY=this._viewportTopL):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomL:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopL)}measureCellPaddingAndBorder(){const e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=this._headers[0];this.headerColumnWidthDiff=this.headerColumnHeightDiff=0,this.cellWidthDiff=this.cellHeightDiff=0;let a=(0,A.createDomElement)("div",{className:"slick-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},r),c=getComputedStyle(a);"border-box"!==c.boxSizing&&(e.forEach(g=>this.headerColumnWidthDiff+=We.toFloat(c[g])),s.forEach(g=>this.headerColumnHeightDiff+=We.toFloat(c[g]))),a.remove();const u=(0,A.createDomElement)("div",{className:"slick-row"},this._canvas[0]);a=(0,A.createDomElement)("div",{className:"slick-cell",id:"",style:{visibility:"hidden"},textContent:"-"},u),c=getComputedStyle(a),"border-box"!==c.boxSizing&&(e.forEach(g=>this.cellWidthDiff+=We.toFloat(c[g])),s.forEach(g=>this.cellHeightDiff+=We.toFloat(c[g]))),u.remove(),this.absoluteColumnMinWidth=Math.max(this.headerColumnWidthDiff,this.cellWidthDiff)}createCssRules(){this._style=document.createElement("style"),this._style.nonce=this._options.nonce||"",(this._options.shadowRoot||document.head).appendChild(this._style);const s=[`.${this.uid} .slick-group-header-column { ${this.rear}: 1000px; }`,`.${this.uid} .slick-header-column { ${this.rear}: 1000px; }`,`.${this.uid} .slick-top-panel { height: ${this._options.topPanelHeight}px; }`,`.${this.uid} .slick-preheader-panel { height: ${this._options.preHeaderPanelHeight}px; }`,`.${this.uid} .slick-topheader-panel { height: ${this._options.topHeaderPanelHeight}px; }`,`.${this.uid} .slick-headerrow-columns { height: ${this._options.headerRowHeight}px; }`,`.${this.uid} .slick-footerrow-columns { height: ${this._options.footerRowHeight}px; }`,`.${this.uid} .slick-cell { height: ${this._options.rowHeight-this.cellHeightDiff}px; }`,`.${this.uid} .slick-row { height: ${this._options.rowHeight}px; }`],r=this._style.sheet;if(r){s.forEach(a=>{r.insertRule(a)});for(let a=0;a<this.columns.length;a++)!this.columns[a]||this.columns[a].hidden||(r.insertRule(`.${this.uid} .l${a} { }`),r.insertRule(`.${this.uid} .r${a} { }`))}else this.createCssRulesAlternative(s)}createCssRulesAlternative(e){const s=document.createElement("template");s.innerHTML='<style type="text/css" rel="stylesheet" />',this._style=s.content.firstChild,(this._options.shadowRoot||document.head).appendChild(this._style);for(let r=0;r<this.columns.length;r++)!this.columns[r]||this.columns[r].hidden||(e.push(`.${this.uid} .l${r} { }`),e.push(`.${this.uid} .r${r} { }`));this._style.styleSheet?this._style.styleSheet.cssText=e.join(" "):this._style.appendChild(document.createTextNode(e.join(" ")))}getColumnCssRules(e){let s;if(!this.stylesheet){const r=(this._options.shadowRoot||document).styleSheets;for(this._options.devMode&&"number"==typeof this._options.devMode.ownerNodeIndex&&this._options.devMode.ownerNodeIndex>=0&&(r[this._options.devMode.ownerNodeIndex].ownerNode=this._style),s=0;s<r.length;s++){const g=r[s];if((g.ownerNode||g.owningElement)===this._style){this.stylesheet=g;break}}if(!this.stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");this.columnCssRulesL=[],this.columnCssRulesR=[];const a=this.stylesheet.cssRules||this.stylesheet.rules;let c,u;for(s=0;s<a.length;s++){const g=a[s].selectorText;(c=/\.l\d+/.exec(g))?(u=parseInt(c[0].substr(2,c[0].length-2),10),this.columnCssRulesL[u]=a[s]):(c=/\.r\d+/.exec(g))&&(u=parseInt(c[0].substr(2,c[0].length-2),10),this.columnCssRulesR[u]=a[s])}}return{left:this.columnCssRulesL[e],right:this.columnCssRulesR[e]}}removeCssRules(){this._style?.remove(),this.stylesheet=null}clearAllTimers(){clearTimeout(this._columnResizeTimer),clearTimeout(this._executionBlockTimer),clearTimeout(this._flashCellTimer),clearTimeout(this._highlightRowTimer),clearTimeout(this.h_editorLoader)}destroy(e){this._bindingEventService.unbindAll(),this.slickDraggableInstance=this.destroyAllInstances(this.slickDraggableInstance),this.slickMouseWheelInstances=this.destroyAllInstances(this.slickMouseWheelInstances),this.slickResizableInstances=this.destroyAllInstances(this.slickResizableInstances),this.getEditorLock()?.cancelCurrentEdit(),this.triggerEvent(this.onBeforeDestroy,{});let s=this.plugins.length;for(;s--;)this.unregisterPlugin(this.plugins[s]);this._options.enableColumnReorder&&"function"==typeof this.sortableSideLeftInstance?.destroy&&"function"==typeof this.sortableSideRightInstance?.destroy&&(this.sortableSideLeftInstance.destroy(),this.sortableSideRightInstance.destroy()),this.unbindAncestorScrollEvents(),this._bindingEventService.unbindByEventName(this._container,"resize"),this.removeCssRules(),this._canvas.forEach(c=>{this._bindingEventService.unbindByEventName(c,"keydown"),this._bindingEventService.unbindByEventName(c,"click"),this._bindingEventService.unbindByEventName(c,"dblclick"),this._bindingEventService.unbindByEventName(c,"contextmenu"),this._bindingEventService.unbindByEventName(c,"mouseover"),this._bindingEventService.unbindByEventName(c,"mouseout")}),this._viewport.forEach(c=>{this._bindingEventService.unbindByEventName(c,"scroll")}),this._headerScroller.forEach(c=>{this._bindingEventService.unbindByEventName(c,"contextmenu"),this._bindingEventService.unbindByEventName(c,"click")}),this._headerRowScroller.forEach(c=>{this._bindingEventService.unbindByEventName(c,"scroll")}),this._footerRow&&this._footerRow.forEach(c=>{this._bindingEventService.unbindByEventName(c,"contextmenu"),this._bindingEventService.unbindByEventName(c,"click")}),this._footerRowScroller&&this._footerRowScroller.forEach(c=>{this._bindingEventService.unbindByEventName(c,"scroll")}),this._preHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._preHeaderPanelScroller,"scroll"),this._topHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._topHeaderPanelScroller,"scroll"),this._bindingEventService.unbindByEventName(this._focusSink,"keydown"),this._bindingEventService.unbindByEventName(this._focusSink2,"keydown");const r=this._container.querySelectorAll(".slick-resizable-handle");[].forEach.call(r,c=>{this._bindingEventService.unbindByEventName(c,"dblclick")});const a=this._container.querySelectorAll(".slick-header-column");[].forEach.call(a,c=>{this._bindingEventService.unbindByEventName(c,"mouseenter"),this._bindingEventService.unbindByEventName(c,"mouseleave"),this._bindingEventService.unbindByEventName(c,"mouseover"),this._bindingEventService.unbindByEventName(c,"mouseout")}),(0,A.emptyElement)(this._container),this._container.classList.remove(this.uid),this.clearAllTimers(),e&&(0,A.destroyAllElementProps)(this)}destroyAllInstances(e){if(e){const s=Array.isArray(e)?e:[e];let r;for(;(0,A.isDefined)(r=s.pop());)r&&"function"==typeof r.destroy&&r.destroy()}return Array.isArray(e)?[]:null}autosizeColumns(){this.legacyAutosizeColumns()}legacyAutosizeColumns(){let e,s,r=0,a=0,c=0;const u=[],g=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;for(e=0;e<this.columns.length;e++)s=this.columns[e],s&&!s.hidden?(u.push(s.width||0),a+=s.width||0,s.resizable&&(r+=(s.width||0)-Math.max(s.minWidth||0,this.absoluteColumnMinWidth))):u.push(0);for(c=a;a>g&&r;){const M=(a-g)/r;for(e=0;e<this.columns.length&&a>g;e++){if(s=this.columns[e],!s||s.hidden)continue;const L=u[e];if(!s.resizable||L<=s.minWidth||L<=this.absoluteColumnMinWidth)continue;const q=Math.max(s.minWidth,this.absoluteColumnMinWidth);let pe=Math.floor(M*(L-q))||1;pe=Math.min(pe,L-q),a-=pe,r-=pe,u[e]-=pe}if(c<=a)break;c=a}for(c=a;a<g;){const M=g/a;for(e=0;e<this.columns.length&&a<g;e++){if(s=this.columns[e],!s||s.hidden)continue;const L=u[e];let q;q=!s.resizable||s.maxWidth<=L?0:Math.min(Math.floor(M*L)-L,s.maxWidth-L||1e6)||1,a+=q,u[e]+=a<=g?q:0}if(c>=a)break;c=a}let y=!1;for(e=0;e<this.columns.length;e++)!s||s.hidden||(this.columns[e].rerenderOnResize&&this.columns[e].width!==u[e]&&(y=!0),this.columns[e].width=u[e]);this.reRenderColumns(y)}reRenderColumns(e){this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),this.triggerEvent(this.onAutosizeColumns,{columns:this.columns}),e&&(this.invalidateAllRows(),this.render())}getVisibleColumns(){return this.columns.filter(e=>!e.hidden)}triggerEvent(e,s,r){const a=r||new H(r,s),c=s||{};return c.grid=this,e.notify(c,a,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this.editController}getColumnIndex(e){return this.columnsById[e]}applyColumnHeaderWidths(){if(this.initialized){let e=0;const s=this.getVisibleColumns();this._headers.forEach(r=>{for(let a=0;a<r.children.length;a++,e++){const c=r.children[a],g=((s[e]||{}).width||0)-this.headerColumnWidthDiff;We.width(c)!==g&&We.width(c,g)}}),this.updateColumnCaches()}}applyColumnWidths(){let r,e=0,s=0;for(let a=0;a<this.columns.length;a++)this.columns[a]?.hidden||(s=this.columns[a].width||0,r=this.getColumnCssRules(a),this.rtl?(r.left.style.left=(-1!=this._options.frozenColumn&&a>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-e-s+"px",r.right.style.right=e+"px"):(r.left.style.left=e+"px",r.right.style.right=(-1!=this._options.frozenColumn&&a>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-e-s+"px"),this._options.frozenColumn!==a&&(e+=this.columns[a].width)),this._options.frozenColumn===a&&(e=0)}setSortColumn(e,s){this.setSortColumns([{columnId:e,sortAsc:s}])}getColumnByIndex(e){let s;return this._headers.every(r=>{const a=r.children.length;return e<a?(s=r.children[e],!1):(e-=a,!0)}),s}setSortColumns(e){this.sortColumns=e;const s=this._options.numberedMultiColumnSort&&this.sortColumns.length>1;this._headers.forEach(a=>{let c=a.querySelectorAll(".slick-header-column-sorted");c.forEach(u=>u.classList.remove("slick-header-column-sorted")),c=a.querySelectorAll(".slick-sort-indicator"),c.forEach(u=>u.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc")),c=a.querySelectorAll(".slick-sort-indicator-numbered"),c.forEach(u=>u.textContent="")});let r=1;this.sortColumns.forEach(a=>{(0,A.isDefined)(a.sortAsc)||(a.sortAsc=!0);const c=this.getColumnIndex(a.columnId);if((0,A.isDefined)(c)){const u=this.getColumnByIndex(c);if(u){u.classList.add("slick-header-column-sorted");let g=u.querySelector(".slick-sort-indicator");g?.classList.add(a.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),s&&(g=u.querySelector(".slick-sort-indicator-numbered"),g&&(g.textContent=String(r)))}}r++})}getSortColumns(){return this.sortColumns}handleSelectedRangesChanged(e,s){const r=e.getNativeEvent(),a=this.selectedRows.slice(0);this.selectedRows=[];const c={};for(let u=0;u<s.length;u++)for(let g=s[u].fromRow;g<=s[u].toRow;g++){c[g]||(this.selectedRows.push(g),c[g]={});for(let y=s[u].fromCell;y<=s[u].toCell;y++)this.canCellBeSelected(g,y)&&(c[g][this.columns[y].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass||"",c),this.simpleArrayEquals(a,this.selectedRows)){const u=r?.detail?.caller??"click",g=this.getSelectedRows().filter(M=>a.indexOf(M)<0),y=a.filter(M=>this.getSelectedRows().indexOf(M)<0);this.triggerEvent(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:a,caller:u,changedSelectedRows:g,changedUnselectedRows:y},e)}}simpleArrayEquals(e,s){return Array.isArray(e)&&Array.isArray(s)&&s.sort().toString()!==e.sort().toString()}getColumns(){return this.columns}updateColumnCaches(){this.columnPosLeft=[],this.columnPosRight=[];let e=0;for(let s=0,r=this.columns.length;s<r;s++)!this.columns[s]||this.columns[s].hidden||(this.columnPosLeft[s]=e,this.columnPosRight[s]=e+(this.columns[s].width||0),this._options.frozenColumn===s?e=0:e+=this.columns[s].width||0)}updateColumnProps(){this.columnsById={};for(let e=0;e<this.columns.length;e++){let s=this.columns[e]||{};s.width&&(s.widthRequest=s.width,s.ColumnWidth=s.width),this._options.mixinDefaults?We.applyDefaults(s,this._columnDefaults):s=this.columns[e]=(0,A.extend)({},this._columnDefaults,s),this.columnsById[s.id]=e,s.minWidth&&(s.width||0)<s.minWidth&&(s.width=s.minWidth),s.maxWidth&&(s.width||0)>s.maxWidth&&(s.width=s.maxWidth)}}setColumns(e){e.length>0&&e.find(s=>"MULTI"==s.id.toString())?this.columns=e:(this.triggerEvent(this.onBeforeSetColumns,{previousColumns:this.columns,newColumns:e,grid:this}),this.columns=e,this.updateColumnsInternal(),this.triggerEvent(this.onAfterSetColumns,{newColumns:e,grid:this}))}updateColumns(){this.triggerEvent(this.onBeforeUpdateColumns,{columns:this.columns,grid:this}),this.updateColumnsInternal()}updateColumnsInternal(){this.updateColumnProps(),this.updateColumnCaches(),this.initialized&&(this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooter(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnHeaderWidths(),this.applyColumnWidths(),this.handleScroll(),this.getSelectionModel()?.refreshSelections())}getOptions(){return this._options}setOptions(e,s,r,a){this.prepareForOptionsChange(),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),e.frozenColumn&&(this.getViewports().forEach(u=>u.scrollLeft=0),this.handleScroll());const c=(0,A.extend)(!0,{},this._options);this._options=(0,A.extend)(this._options,e),this.triggerEvent(this.onSetOptions,{optionsBefore:c,optionsAfter:this._options}),this.internal_setOptions(s,r,a)}activateChangedOptions(e,s,r){this.prepareForOptionsChange(),this.invalidateRow(this.getDataLength()),this.triggerEvent(this.onActivateChangedOptions,{options:this._options}),this.internal_setOptions(e,s,r)}prepareForOptionsChange(){this.getEditorLock()?.commitCurrentEdit()&&this.makeActiveCellNormal()}internal_setOptions(e,s,r){void 0!==this._options.showColumnHeader&&this.setColumnHeaderVisibility(this._options.showColumnHeader),this.validateAndEnforceOptions(),this.setFrozenOptions(),void 0!==this._options.frozenBottom&&(this.enforceFrozenRowHeightRecalc=!0),this._viewport.forEach(a=>{a.style.overflowY=this._options.autoHeight?"hidden":"auto"}),e||this.render(),this.setScroller(),r||this.setOverflow(),s||this.setColumns(this.columns),!this._options.enableMouseWheelScrollHandler||!this._viewport||this.slickMouseWheelInstances&&0!==this.slickMouseWheelInstances.length?!1===this._options.enableMouseWheelScrollHandler&&this.destroyAllInstances(this.slickMouseWheelInstances):this._viewport.forEach(a=>{this.slickMouseWheelInstances.push(hg({element:a,onMouseWheel:this.handleMouseWheel.bind(this)}))})}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}setData(e,s){this.data=e,this.invalidateAllRows(),this.updateRowCount(),s&&this.scrollTo(0)}getData(){return this.data}getDataLength(){return this.data.getLength?this.data.getLength():this.data?.length||0}getDataLengthIncludingAddNew(){return this.getDataLength()+(!this._options.enableAddRow||this.pagingActive&&!this.pagingIsLastPage?0:1)}getDataItem(e){return this.data.getItem?this.data.getItem(e):this.data[e]}getTopPanel(){return this._topPanels[0]}getTopPanels(){return this._topPanels}hasDataView(){return!Array.isArray(this.data)}togglePanelVisibility(e,s,r){this._options[e]!==r&&(this._options[e]=r,r?We.show(s):We.hide(s),this.resizeCanvas())}setTopPanelVisibility(e){this.togglePanelVisibility("showTopPanel",this._topPanelScrollers,e)}setHeaderRowVisibility(e){this.togglePanelVisibility("showHeaderRow",this._headerRowScroller,e)}setColumnHeaderVisibility(e){this.togglePanelVisibility("showColumnHeader",this._headerScroller,e)}setFooterRowVisibility(e){this.togglePanelVisibility("showFooterRow",this._footerRowScroller,e)}setPreHeaderPanelVisibility(e){this.togglePanelVisibility("showPreHeaderPanel",[this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],e)}setTopHeaderPanelVisibility(e){this.togglePanelVisibility("showTopHeaderPanel",this._topHeaderPanelScroller,e)}getContainerNode(){return this._container}getRowTop(e){return this._options.rowHeight*e-this.offset}getRowFromPosition(e){return Math.floor((e+this.offset)/this._options.rowHeight)}scrollTo(e){e=Math.max(e,0),e=Math.min(e,(this.th||0)-We.height(this._viewportScrollContainerY)+((this.viewportHasHScroll||this.hasFrozenColumns())&&this.scrollbarDimensions?.height||0));const s=this.offset;this.offset=Math.round(this.page*(this.cj||0)),this.page=Math.min((this.n||0)-1,Math.floor(e/(this.ph||0)));const r=e-this.offset;if(this.offset!==s){const a=this.getVisibleRange(r);this.cleanupRows(a),this.updateRowPositions()}this.prevScrollTop!==r&&(this.vScrollDir=this.prevScrollTop+s<r+this.offset?1:-1,this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=r,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=r),this.hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=r),this._viewportScrollContainerY&&(this._viewportScrollContainerY.scrollTop=r),this.triggerEvent(this.onViewportChanged,{}))}defaultFormatter(e,s,r){return(0,A.isDefined)(r)?(r+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}getFormatter(e,s){const r=this.data?.getItemMetadata?.(e);return(r?.columns&&(r.columns[s.id]||r.columns[this.getColumnIndex(s.id)]))?.formatter||r?.formatter||s.formatter||this._options.formatterFactory?.getFormatter(s)||this._options.defaultFormatter}getEditor(e,s){const r=this.columns[s],c=this.data?.getItemMetadata?.(e)?.columns;return void 0!==c?.[r.id]?.editorClass?c[r.id].editorClass:void 0!==c?.[s]?.editorClass?c[s].editorClass:r.editorClass||this._options?.editorFactory?.getEditor(r)}getDataItemValueForColumn(e,s){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,s):e[s.field]}appendRowHtml(e,s,r,a,c,u=0){const g=this.getDataItem(r);let M="slick-row"+(this.hasFrozenRows&&r<=this._options.frozenRow?" frozen":"")+(r<c&&!g?" loading":"")+(r===this.activeRow&&this._options.showCellSelection?" active":"")+(r%2==1?" odd":" even");g||(M+=` ${this._options.addNewRowCssClass}`);const L=this.data?.getItemMetadata?.(r);L?.cssClasses&&(M+=` ${L.cssClasses}`);const q=this.getFrozenRowOffset(r);let Ie,Ve,Ge,pe="";pe=(0,A.createDomElement)("div",this._options.disableRowBasedonHeight?{className:`slick-widget-content ${M}`,role:"row",style:{top:this.getRowTop(u)-q+"px"}}:{className:`slick-widget-content ${M}`,role:"row",style:{top:this.getRowTop(r)-q+"px"}}),e.push(pe),this.hasFrozenColumns()&&(Ie=pe.cloneNode(!0),s.push(Ie));for(let Je=0,Xe=this.columns.length;Je<Xe;Je++)if(Ge=this.columns[Je],Ge&&!Ge.hidden){if(Ve=1,L?.columns&&(Ve=(L.columns[Ge.id]||L.columns[Je])?.colspan||1,"*"===Ve&&(Ve=Xe-Je)),this.columnPosRight[Math.min(Xe-1,Je+Ve-1)]>a.leftPx){if(!Ge.alwaysRenderColumn&&this.columnPosLeft[Je]>a.rightPx)break;this.hasFrozenColumns()&&Je>this._options.frozenColumn?this.appendCellHtml(Ie,r,Je,Ve,g):this.appendCellHtml(pe,r,Je,Ve,g)}else(Ge.alwaysRenderColumn||this.hasFrozenColumns()&&Je<=this._options.frozenColumn)&&this.appendCellHtml(pe,r,Je,Ve,g);Ve>1&&(Je+=Ve-1)}}appendCellHtml(e,s,r,a,c){const u=this.columns[r];let g="slick-cell l"+r+" r"+Math.min(this.columns.length-1,r+a-1)+(u.cssClass?" "+u.cssClass:"");this.hasFrozenColumns()&&r<=this._options.frozenColumn&&(g+=" frozen"),s===this.activeRow&&r===this.activeCell&&this._options.showCellSelection&&(g+=" active"),Object.keys(this.cellCssClasses).forEach(Ge=>{this.cellCssClasses[Ge][s]?.[u.id]&&(g+=` ${this.cellCssClasses[Ge][s][u.id]}`)});let y=null,M="";c&&(y=this.getDataItemValueForColumn(c,u),M=this.getFormatter(s,u)(s,r,y,u,c,this),null==M&&(M=""));const q=this.triggerEvent(this.onBeforeAppendCell,{row:s,cell:r,value:y,dataContext:c}).getReturnValue();let pe="string"==typeof q?q:"";M?.addClasses&&(pe+=(0,A.classNameToList)((pe?" ":"")+M.addClasses).join(" "));const Ie=M?.toolTip?`${M.toolTip}`:"",Ve=(0,A.createDomElement)("div",{className:(0,A.classNameToList)(`${g} ${pe||""}`).join(" "),role:"gridcell",tabIndex:-1});if(Ve.setAttribute("aria-describedby",this.uid+u.id),Ie&&Ve.setAttribute("title",Ie),u.hasOwnProperty("cellAttrs")&&u.cellAttrs instanceof Object&&Object.keys(u.cellAttrs).forEach(Ge=>{u.cellAttrs.hasOwnProperty(Ge)&&Ve.setAttribute(Ge,u.cellAttrs[Ge])}),c){const Ge=(0,A.isPrimitiveOrHTML)(M)?M:M.html||M.text;this.applyHtmlCode(Ve,Ge)}e.appendChild(Ve),M.insertElementAfterTarget&&(0,A.insertAfterElement)(Ve,M.insertElementAfterTarget),this.rowsCache[s].cellRenderQueue.push(r),this.rowsCache[s].cellColSpans[r]=a}cleanupRows(e){Object.keys(this.rowsCache).forEach(s=>{if(this.rowsCache){let r=+s,a=!0;this.hasFrozenRows&&(this._options.frozenBottom&&r>=this.actualFrozenRow||!this._options.frozenBottom&&r<=this.actualFrozenRow)&&(a=!1),(r=parseInt(s,10))!==this.activeRow&&(r<e.top||r>e.bottom)&&a&&this.removeRowFromCache(r)}}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render()}invalidateAllRows(){this.currentEditor&&this.makeActiveCellNormal(),"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(e=>{this.rowsCache&&this.removeRowFromCache(+e)}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRows(e){if(e?.length){this.vScrollDir=0;const s=e.length;for(let r=0;r<s;r++)this.currentEditor&&this.activeRow===e[r]&&this.makeActiveCellNormal(),this.rowsCache[e[r]]&&this.removeRowFromCache(e[r]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}}invalidateRow(e){e>=0&&this.invalidateRows([e])}queuePostProcessedRowForCleanup(e,s,r){this.postProcessgroupId++,"object"==typeof s&&Object.keys(s).forEach(a=>{s.hasOwnProperty(a)&&this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e.cellNodesByColumnIdx[+a],columnIdx:+a,rowIdx:r})}),e.rowNode||(e.rowNode=[]),this.postProcessedCleanupQueue.push({actionType:"R",groupId:this.postProcessgroupId,node:e.rowNode}),e.rowNode?.forEach(a=>a.remove())}queuePostProcessedCellForCleanup(e,s,r){this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e,columnIdx:s,rowIdx:r}),e.remove()}removeRowFromCache(e){const s=this.rowsCache[e];s?.rowNode&&(this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[e]?this.queuePostProcessedRowForCleanup(s,this.postProcessedRows[e],e):s.rowNode?.forEach(r=>r.parentElement?.removeChild(r)),delete this.rowsCache[e],delete this.postProcessedRows[e],this.renderedRows--,this.counter_rows_removed++)}applyFormatResultToCellNode(e,s,r){null==e&&(e=""),(0,A.isPrimitiveOrHTML)(e)?this.applyHtmlCode(s,e):(this.applyHtmlCode(s,e.html||e.text),e.removeClasses&&!r&&s.classList.remove(...(0,A.classNameToList)(e.removeClasses)),e.addClasses&&s.classList.add(...(0,A.classNameToList)(e.addClasses)),e.toolTip&&s.setAttribute("title",e.toolTip))}updateCell(e,s){const r=this.getCellNode(e,s);if(r){const a=this.columns[s],c=this.getDataItem(e);if(this.currentEditor&&this.activeRow===e&&this.activeCell===s)this.currentEditor.loadValue(c);else{const u=c?this.getFormatter(e,a)(e,s,this.getDataItemValueForColumn(c,a),a,c,this):"";this.applyFormatResultToCellNode(u,r),this.invalidatePostProcessingResults(e)}}}updateRow(e){const s=this.rowsCache[e];if(!s)return;let r;this.ensureCellNodesInRowsCache(e);const a=this.getDataItem(e);Object.keys(s.cellNodesByColumnIdx).forEach(c=>{if(!s.cellNodesByColumnIdx.hasOwnProperty(c))return;const u=+c,g=this.columns[u],y=s.cellNodesByColumnIdx[u];this.currentEditor&&e===this.activeRow&&u===this.activeCell?this.currentEditor.loadValue(a):a?(r=this.getFormatter(e,g)(e,u,this.getDataItemValueForColumn(a,g),g,a,this),this.applyFormatResultToCellNode(r,y)):(0,A.emptyElement)(y)}),this.invalidatePostProcessingResults(e)}getViewportRowCount(){const e=this.getViewportHeight(),s=this.getScrollbarDimensions()?.height||0;return Math.floor((e-s)/this._options.rowHeight)}getViewportHeight(){if((!this._options.autoHeight||-1!==this._options.frozenColumn)&&(this.topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelScrollers[0]):0,this.headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,this.footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0),this._options.autoHeight){let e=this._paneHeaderL.offsetHeight;e+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,e+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0,e+=this.getCanvasWidth()>this.viewportW&&this.scrollbarDimensions?.height||0,this.viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew()+(-1===this._options.frozenColumn?e:0)}else{const e=this._options.showColumnHeader?We.toFloat(We.height(this._headerScroller[0]))+this.getVBoxDelta(this._headerScroller[0]):0,s=this._options.createPreHeaderPanel&&this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight+this.getVBoxDelta(this._preHeaderPanelScroller):0,r=this._options.createTopHeaderPanel&&this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight+this.getVBoxDelta(this._topHeaderPanelScroller):0,a=getComputedStyle(this._container);this.viewportH=We.toFloat(a.height)-We.toFloat(a.paddingTop)-We.toFloat(a.paddingBottom)-e-this.topPanelH-this.headerRowH-this.footerRowH-s-r}return this.numVisibleRows=Math.ceil(this.viewportH/this._options.rowHeight),this.viewportH}getViewportWidth(){return this.viewportW=parseFloat((0,A.getInnerSize)(this._container,"width"))||this._options.devMode&&this._options.devMode.containerClientWidth||0,this.viewportW}resizeCanvas(){if(this.initialized){if(this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.getViewportWidth(),this.getViewportHeight(),this.hasFrozenRows?this._options.frozenBottom?(this.paneTopH=this.viewportH-this.frozenRowsHeight-(this.scrollbarDimensions?.height||0),this.paneBottomH=this.frozenRowsHeight+(this.scrollbarDimensions?.height||0)):(this.paneTopH=this.frozenRowsHeight,this.paneBottomH=this.viewportH-this.frozenRowsHeight):this.paneTopH=this.viewportH,this.paneTopH+=this.topPanelH+this.headerRowH+this.footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this.paneTopH+=this.scrollbarDimensions?.height||0),this.viewportTopH=this.paneTopH-this.topPanelH-this.headerRowH-this.footerRowH,this._options.autoHeight){if(this.hasFrozenColumns()){const r=getComputedStyle(this._headerScrollerL);We.height(this._container,this.paneTopH+We.toFloat(r.height))}this._paneTopL.style.position="relative"}let e=0==We.height(this._paneHeaderL)?30:We.height(this._paneHeaderL);e?e+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0:e=(this._options.showHeaderRow?this._options.headerRowHeight:0)+(this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight:0),We.setStyleSize(this._paneTopL,"top",e||e),We.height(this._paneTopL,this.paneTopH);const s=this._paneTopL.offsetTop+this.paneTopH;if(this._options.autoHeight||We.height(this._viewportTopL,this.viewportTopH),this.hasFrozenColumns()){let r=We.height(this._paneHeaderL);r&&(r+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0),We.setStyleSize(this._paneTopR,"top",r),We.height(this._paneTopR,this.paneTopH),We.height(this._viewportTopR,this.viewportTopH),this.hasFrozenRows&&(We.setStyleSize(this._paneBottomL,"top",s),We.height(this._paneBottomL,this.paneBottomH),We.setStyleSize(this._paneBottomR,"top",s),We.height(this._paneBottomR,this.paneBottomH),We.height(this._viewportBottomR,this.paneBottomH))}else this.hasFrozenRows&&(We.width(this._paneBottomL,"100%"),We.height(this._paneBottomL,this.paneBottomH),We.setStyleSize(this._paneBottomL,"top",s));this.hasFrozenRows?(We.height(this._viewportBottomL,this.paneBottomH),this._options.frozenBottom?(We.height(this._canvasBottomL,this.frozenRowsHeight),this.hasFrozenColumns()&&We.height(this._canvasBottomR,this.frozenRowsHeight)):(We.height(this._canvasTopL,this.frozenRowsHeight),this.hasFrozenColumns()&&We.height(this._canvasTopR,this.frozenRowsHeight))):We.height(this._viewportTopR,this.viewportTopH),(!this.scrollbarDimensions||!this.scrollbarDimensions.width)&&(this.scrollbarDimensions=this.measureScrollbar()),this._options.forceFitColumns&&this.legacyAutosizeColumns(),this.updateRowCount(),this.handleScroll(),this.lastRenderedScrollLeft=-1,this.render()}}updatePagingStatusFromView(e){this.pagingActive=0!==e.pageSize,this.pagingIsLastPage=e.pageNum===e.totalPages-1}updateRowCount(){if(this.initialized){const e=this.getDataLength(),s=this.getDataLengthIncludingAddNew();let r=0,a=We.height(this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL);r=this.hasFrozenRows?this.getDataLength()-this._options.frozenRow:s+(this._options.leaveSpaceForNewRows?this.numVisibleRows-1:0);const c=We.height(this._viewportScrollContainerY),u=this.viewportHasVScroll;this.viewportHasVScroll=this._options.alwaysShowVerticalScroll||!this._options.autoHeight&&r*this._options.rowHeight>c,this.makeActiveCellNormal();const g=e-1;"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(M=>{const L=+M;L>g&&this.removeRowFromCache(L)}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this.activeCellNode&&this.activeRow>g&&this.resetActiveCell(),a=this.h,this._options.autoHeight?this.h=this._options.rowHeight*r:(this.th=Math.max(this._options.rowHeight*r,c-(this.scrollbarDimensions?.height||0)),this.th<this.maxSupportedCssHeight?(this.h=this.ph=this.th,this.n=1,this.cj=0):(this.h=this.maxSupportedCssHeight,this.ph=this.h/100,this.n=Math.floor(this.th/this.ph),this.cj=(this.th-this.h)/(this.n-1))),(this.h!==a||this.enforceFrozenRowHeightRecalc)&&(this.hasFrozenRows&&!this._options.frozenBottom?(We.height(this._canvasBottomL,this.h),this.hasFrozenColumns()&&We.height(this._canvasBottomR,this.h)):(We.height(this._canvasTopL,this.h),We.height(this._canvasTopR,this.h)),this.scrollTop=this._viewportScrollContainerY.scrollTop,this.enforceFrozenRowHeightRecalc=!1);const y=this.scrollTop+this.offset<=this.th-c;0===this.th||0===this.scrollTop?this.page=this.offset=0:this.scrollTo(y?this.scrollTop+this.offset:this.th-c+(this.scrollbarDimensions?.height||0)),this.h!==a&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&u!==this.viewportHasVScroll&&this.legacyAutosizeColumns(),this.updateCanvasWidth(!1)}}getViewport(e,s){return this.getVisibleRange(e,s)}getVisibleRange(e,s){return e??=this.scrollTop,s??=this.scrollLeft,this.rtl&&(s=0-this.scrollLeft),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this.viewportH)+1,leftPx:s,rightPx:s+this.viewportW}}getRenderedRange(e,s){const r=this.getVisibleRange(e,s),a=Math.round(this.viewportH/this._options.rowHeight),c=this._options.minRowBuffer;return-1===this.vScrollDir?(r.top-=a,r.bottom+=c):1===this.vScrollDir?(r.top-=c,r.bottom+=a):(r.top-=c,r.bottom+=c),r.top=Math.max(0,r.top),r.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,r.bottom),r.leftPx-=this.viewportW,r.rightPx+=this.viewportW,r.leftPx=Math.max(0,r.leftPx),r.rightPx=Math.min(this.canvasWidth,r.rightPx),r}ensureCellNodesInRowsCache(e){const s=this.rowsCache[e];if(s?.cellRenderQueue.length&&s.rowNode?.length){const r=s.rowNode;let a=Array.from(r[0].children);r.length>1&&(a=a.concat(Array.from(r[1].children)));let c=a.length-1;for(;s.cellRenderQueue.length;){const u=s.cellRenderQueue.pop();s.cellNodesByColumnIdx[u]=a[c--]}}}cleanUpCells(e,s){if(this.hasFrozenRows&&(this._options.frozenBottom&&s>this.actualFrozenRow||s<=this.actualFrozenRow))return;const a=this.rowsCache[s],c=[];let u,g;for(Object.keys(a.cellNodesByColumnIdx).forEach(y=>{if(!a.cellNodesByColumnIdx.hasOwnProperty(y))return;const M=+y;M<=this._options.frozenColumn||Array.isArray(this.columns)&&this.columns[M]?.alwaysRenderColumn||(this.columnPosLeft[M]>e.rightPx||this.columnPosRight[Math.min(this.columns.length-1,(M||0)+a.cellColSpans[M]-1)]<e.leftPx)&&(s===this.activeRow&&Number(M)===this.activeCell||c.push(M))});(0,A.isDefined)(u=c.pop());)g=a.cellNodesByColumnIdx[u],this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[s]?.[u]?this.queuePostProcessedCellForCleanup(g,u,s):g.parentElement?.removeChild(g),delete a.cellColSpans[u],delete a.cellNodesByColumnIdx[u],this.postProcessedRows[s]&&delete this.postProcessedRows[s][u]}cleanUpAndRenderCells(e){let s;const r=document.createElement("div"),a=[];let c,g,y,M,u=0;for(let L=e.top,q=e.bottom;L<=q;L++){if(s=this.rowsCache[L],!s)continue;this.ensureCellNodesInRowsCache(L),this.cleanUpCells(e,L),c=0;let pe=this.data?.getItemMetadata?.(L)??{};pe=pe?.columns;const Ie=this.getDataItem(L);for(let Ve=0,Ge=this.columns.length;Ve<Ge;Ve++){if(!this.columns[Ve]||this.columns[Ve].hidden)continue;if(this.columnPosLeft[Ve]>e.rightPx)break;if((0,A.isDefined)(g=s.cellColSpans[Ve])){Ve+=g>1?g-1:0;continue}g=1,pe&&(g=(pe[this.columns[Ve].id]||pe[Ve])?.colspan??1,"*"===g&&(g=Ge-Ve));const Je=g;this.columnPosRight[Math.min(Ge-1,Ve+Je-1)]>e.leftPx&&(this.appendCellHtml(r,L,Ve,Je,Ie),c++),Ve+=Je>1?Je-1:0}c&&(u+=c,a.push(L))}if(r.children.length)for(;(0,A.isDefined)(y=a.pop());){let L;for(s=this.rowsCache[y];(0,A.isDefined)(L=s.cellRenderQueue.pop());)M=r.lastChild,M&&(this.hasFrozenColumns()&&L>this._options.frozenColumn?s.rowNode[1].appendChild(M):s.rowNode[0].appendChild(M),s.cellNodesByColumnIdx[L]=M)}}renderRows(e){const s=[],r=[],a=[];let c=!1;const u=this.getDataLength();let g=e.top;for(let L=e.top,q=e.bottom;L<=q;L++)this.rowsCache[L]||this.hasFrozenRows&&this._options.frozenBottom&&L===this.getDataLength()?g++:this._options.disableRowBasedonHeight&&null!=this.getDataItem(L).Height&&0==this.getDataItem(L).Height||this._options.disableRowBasedonHeight&&null!=this.getDataItem(L).StyleHeightZero&&1===this.getDataItem(L).StyleHeightZero||(this.renderedRows++,a.push(L),this.rowsCache[L]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(s,r,L,e,u,g),this.activeCellNode&&this.activeRow===L&&(c=!0),this.counter_rows_rendered++,g++);if(!a.length)return;const y=document.createElement("div"),M=document.createElement("div");s.forEach(L=>y.appendChild(L)),r.forEach(L=>M.appendChild(L));for(let L=0,q=a.length;L<q;L++)this.hasFrozenRows&&a[L]>=this.actualFrozenRow?this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(a[L])&&y.firstChild&&M.firstChild&&(this.rowsCache[a[L]].rowNode=[y.firstChild,M.firstChild],this._canvasBottomL.appendChild(y.firstChild),this._canvasBottomR.appendChild(M.firstChild)):this.rowsCache?.hasOwnProperty(a[L])&&y.firstChild&&(this.rowsCache[a[L]].rowNode=[y.firstChild],this._canvasBottomL.appendChild(y.firstChild)):this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(a[L])&&y.firstChild&&M.firstChild&&(this.rowsCache[a[L]].rowNode=[y.firstChild,M.firstChild],this._canvasTopL.appendChild(y.firstChild),this._canvasTopR.appendChild(M.firstChild)):this.rowsCache?.hasOwnProperty(a[L])&&y.firstChild&&(this.rowsCache[a[L]].rowNode=[y.firstChild],this._canvasTopL.appendChild(y.firstChild));c&&(this.activeCellNode=this.getCellNode(this.activeRow,this.activeCell))}startPostProcessing(){this._options.enableAsyncPostRender&&(clearTimeout(this.h_postrender),this.h_postrender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(clearTimeout(this.h_postrenderCleanup),this.h_postrenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay))}invalidatePostProcessingResults(e){"object"==typeof this.postProcessedRows[e]&&Object.keys(this.postProcessedRows[e]).forEach(s=>{this.postProcessedRows[e].hasOwnProperty(s)&&(this.postProcessedRows[e][s]="C")}),this.postProcessFromRow=Math.min(this.postProcessFromRow,e),this.postProcessToRow=Math.max(this.postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){this.rowsCache&&"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(e=>{const s=e?parseInt(e,10):0;We.setStyleSize(this.rowsCache[s].rowNode[0],"top",this.getRowTop(s))})}render(){if(this.initialized){this.scrollThrottle.dequeue();const e=this.getVisibleRange(),s=this.getRenderedRange();if(this.cleanupRows(s),this.lastRenderedScrollLeft!==this.scrollLeft){if(this.hasFrozenRows){const r=(0,A.extend)(!0,{},s);this._options.frozenBottom?(r.top=this.actualFrozenRow,r.bottom=this.getDataLength()):(r.top=0,r.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(r)}this.cleanUpAndRenderCells(s)}this.renderRows(s),this.hasFrozenRows&&this.renderRows(this._options.frozenBottom?{top:this.actualFrozenRow,bottom:this.getDataLength()-1,leftPx:s.leftPx,rightPx:s.rightPx}:{top:0,bottom:this._options.frozenRow-1,leftPx:s.leftPx,rightPx:s.rightPx}),this.postProcessFromRow=e.top,this.postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this.lastRenderedScrollTop=this.scrollTop,this.lastRenderedScrollLeft=this.scrollLeft,this.h_render=null,this.triggerEvent(this.onRendered,{startRow:e.top,endRow:e.bottom,grid:this})}}handleHeaderRowScroll(){const e=this._headerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handleFooterRowScroll(){const e=this._footerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handlePreHeaderPanelScroll(){this.handleElementScroll(this._preHeaderPanelScroller)}handleTopHeaderPanelScroll(){this.handleElementScroll(this._topHeaderPanelScroller)}handleElementScroll(e){const s=e.scrollLeft;s!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=s)}handleScroll(){return this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollLeft=this._viewportScrollContainerX.scrollLeft,this._handleScroll(!1)}_handleScroll(e){let s=this._viewportScrollContainerY.scrollHeight-this._viewportScrollContainerY.clientHeight,r=this._viewportScrollContainerY.scrollWidth-this._viewportScrollContainerY.clientWidth;s=Math.max(0,s),r=Math.max(0,r),this.scrollTop>s&&(this.scrollTop=s),this.scrollLeft>r&&(this.scrollLeft=r);const a=Math.abs(this.scrollTop-this.prevScrollTop),c=Math.abs(this.scrollLeft-this.prevScrollLeft);if(c&&(this.prevScrollLeft=this.scrollLeft,this._viewportScrollContainerX.scrollLeft=this.scrollLeft,this._headerScrollContainer.scrollLeft=this.scrollLeft,this._topPanelScrollers[0].scrollLeft=this.scrollLeft,this._options.createFooterRow&&(this._footerRowScrollContainer.scrollLeft=this.scrollLeft),this._options.createPreHeaderPanel&&(this.hasFrozenColumns()?this._preHeaderPanelScrollerR.scrollLeft=this.scrollLeft:this._preHeaderPanelScroller.scrollLeft=this.scrollLeft),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller.scrollLeft=this.scrollLeft),this.hasFrozenColumns()?(this.hasFrozenRows&&(this._viewportTopR.scrollLeft=this.scrollLeft),this._headerRowScrollerR.scrollLeft=this.scrollLeft):(this.hasFrozenRows&&(this._viewportTopL.scrollLeft=this.scrollLeft),this._headerRowScrollerL.scrollLeft=this.scrollLeft)),a&&!this._options.autoHeight)if(this.vScrollDir=this.prevScrollTop<this.scrollTop?1:-1,this.prevScrollTop=this.scrollTop,e&&(this._viewportScrollContainerY.scrollTop=this.scrollTop),this.hasFrozenColumns()&&(this.hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this.scrollTop:this._viewportTopL.scrollTop=this.scrollTop),a<this.viewportH)this.scrollTo(this.scrollTop+this.offset);else{const u=this.offset;this.page=this.h===this.viewportH?0:Math.min(this.n-1,Math.floor(this.scrollTop*((this.th-this.viewportH)/(this.h-this.viewportH))*(1/this.ph))),this.offset=Math.round(this.page*this.cj),u!==this.offset&&this.invalidateAllRows()}if(c||a){const u=Math.abs(this.lastRenderedScrollLeft-this.scrollLeft),g=Math.abs(this.lastRenderedScrollTop-this.scrollTop);(u>20||g>20)&&(this._options.forceSyncScrolling||g<this.viewportH&&u<this.viewportW?this.render():this.scrollThrottle.enqueue(),this.triggerEvent(this.onViewportChanged,{}))}return this.triggerEvent(this.onScroll,{scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}),!(!c&&!a)}actionThrottle(e,s){let r=!1,a=!1;const u=()=>{a=!1},g=()=>{r=!0,clearTimeout(this._executionBlockTimer),this._executionBlockTimer=setTimeout(y,s),e.call(this)},y=()=>{a?(u(),g()):r=!1};return{enqueue:(()=>{r?a=!0:g()}).bind(this),dequeue:u.bind(this)}}asyncPostProcessRows(){const e=this.getDataLength();for(;this.postProcessFromRow<=this.postProcessToRow;){const s=this.vScrollDir>=0?this.postProcessFromRow++:this.postProcessToRow--,r=this.rowsCache[s];if(r&&!(s>=e))return this.postProcessedRows[s]||(this.postProcessedRows[s]={}),this.ensureCellNodesInRowsCache(s),Object.keys(r.cellNodesByColumnIdx).forEach(a=>{if(r.cellNodesByColumnIdx.hasOwnProperty(a)){const c=+a,u=this.columns[c],g=this.postProcessedRows[s][c];if(u.asyncPostRender&&"R"!==g){const y=r.cellNodesByColumnIdx[c];y&&u.asyncPostRender(y,s,this.getDataItem(s),u,"C"===g),this.postProcessedRows[s][c]="R"}}}),void(this.h_postrender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}}asyncPostProcessCleanupRows(){if(this.postProcessedCleanupQueue.length>0){const e=this.postProcessedCleanupQueue[0].groupId;for(;this.postProcessedCleanupQueue.length>0&&this.postProcessedCleanupQueue[0].groupId===e;){const s=this.postProcessedCleanupQueue.shift();if("R"===s?.actionType&&s.node.forEach(r=>{r.remove()}),"C"===s?.actionType){const r=this.columns[s.columnIdx];r.asyncPostRenderCleanup&&s.node&&r.asyncPostRenderCleanup(s.node,s.rowIdx,r)}}this.h_postrenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay)}}updateCellCssStylesOnRenderedRows(e,s){let r,a,c;"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(u=>{this.rowsCache&&(c=s?.[u],a=e?.[u],c&&Object.keys(c).forEach(g=>{(!a||c[g]!==a[g])&&(r=this.getCellNode(+u,this.getColumnIndex(g)),r&&r.classList.remove(c[g]))}),a&&Object.keys(a).forEach(g=>{(!c||c[g]!==a[g])&&(r=this.getCellNode(+u,this.getColumnIndex(g)),r&&r.classList.add(a[g]))}))})}addCellCssStyles(e,s){if(this.cellCssClasses[e])throw new Error(`SlickGrid addCellCssStyles: cell CSS hash with key "${e}" already exists.`);this.cellCssClasses[e]=s,this.updateCellCssStylesOnRenderedRows(s,null),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:s,grid:this})}removeCellCssStyles(e){this.cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this.cellCssClasses[e]),delete this.cellCssClasses[e],this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:null,grid:this}))}setCellCssStyles(e,s){const r=this.cellCssClasses[e];this.cellCssClasses[e]=s,this.updateCellCssStylesOnRenderedRows(s,r),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:s,grid:this})}getCellCssStyles(e){return this.cellCssClasses[e]}flashCell(e,s,r=250){const a=(c,u)=>{u<1||(clearTimeout(this._flashCellTimer),this._flashCellTimer=setTimeout(()=>{u%2==0?c.classList.add(this._options.cellFlashingCssClass||""):c.classList.remove(this._options.cellFlashingCssClass||""),a(c,u-1)},r))};if(this.rowsCache[e]){const c=this.getCellNode(e,s);c&&a(c,5)}}highlightRow(e,s){const r=this.rowsCache[e];s||=this._options.rowHighlightDuration,Array.isArray(r?.rowNode)&&this._options.rowHighlightCssClass&&(r.rowNode.forEach(a=>a.classList.add(...(0,A.classNameToList)(this._options.rowHighlightCssClass))),clearTimeout(this._highlightRowTimer),this._highlightRowTimer=setTimeout(()=>{r.rowNode?.forEach(a=>a.classList.remove(...(0,A.classNameToList)(this._options.rowHighlightCssClass)))},s))}HighlightSelectedRow(e){}handleMouseWheel(e,s,r,a){this.scrollTop=Math.max(0,this._viewportScrollContainerY.scrollTop-a*this._options.rowHeight),this.scrollLeft=this._viewportScrollContainerX.scrollLeft+10*r,this._handleScroll(!0)&&e.preventDefault()}handleDragInit(e,s){const r=this.getCellFromEvent(e);if(!r||!this.cellExists(r.row,r.cell))return!1;const a=this.triggerEvent(this.onDragInit,s,e);return!!a.isImmediatePropagationStopped()&&a.getReturnValue()}handleDragStart(e,s){const r=this.getCellFromEvent(e);if(!r||!this.cellExists(r.row,r.cell))return!1;const a=this.triggerEvent(this.onDragStart,s,e);return!!a.isImmediatePropagationStopped()&&a.getReturnValue()}handleDrag(e,s){return this.triggerEvent(this.onDrag,s,e).getReturnValue()}handleDragEnd(e,s){this.triggerEvent(this.onDragEnd,s,e)}handleKeyDown(e){let r=this.triggerEvent(this.onKeyDown,{row:this.activeRow,cell:this.activeCell},e).isImmediatePropagationStopped();if(!r&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this.currentEditor?.keyCaptureList&&this.currentEditor.keyCaptureList.indexOf(e.which)>-1)return;"Home"===e.key?r=e.ctrlKey?this.navigateTop():this.navigateRowStart():"End"===e.key&&(r=e.ctrlKey?this.navigateBottom():this.navigateRowEnd())}if(!r)if(e.shiftKey||e.altKey||e.ctrlKey)"Tab"===e.key&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(r=this.navigatePrev());else if("Escape"===e.key){if(!this.getEditorLock()?.isActive())return;this.cancelEditAndSetFocus()}else"PageDown"===e.key?(this.navigatePageDown(),r=!0):"PageUp"===e.key?(this.navigatePageUp(),r=!0):"ArrowUp"===e.key?e.target.classList.contains("list_grid_input")||(r=this.navigateUp()):"ArrowDown"===e.key?e.target.classList.contains("list_grid_input")||(r=this.navigateDown()):"Tab"===e.key?r=this.navigateNext():"Enter"===e.key&&(this._options.editable&&(this.currentEditor?this.activeRow===this.getDataLength()?this.navigateDown():r=this.navigateNext():this.getEditorLock()?.commitCurrentEdit()&&(this._ColumnReadOnly=!1,this.makeActiveCellEditable(void 0,void 0,e),this._ColumnReadOnly&&(r=this.navigateNext()))),r=!0);r&&(e.stopPropagation(),e.preventDefault())}handleClick(e){const s=e instanceof H?e.getNativeEvent():e;if(!this.currentEditor&&(s.target!==document.activeElement||s.target.classList.contains("slick-cell"))){const a=this.getTextSelection();this.setFocus(),this.setTextSelection(a)}const r=this.getCellFromEvent(s);if(r&&(null===this.currentEditor||this.activeRow!==r.row||this.activeCell!==r.cell)&&!(e=this.triggerEvent(this.onClick,{row:r.row,cell:r.cell},e||s)).isImmediatePropagationStopped()&&!s.defaultPrevented&&this.canCellBeActive(r.row,r.cell)&&(!this.getEditorLock()?.isActive()||this.getEditorLock()?.commitCurrentEdit())){this.scrollRowIntoView(r.row,!1);const a="slick-edit-preclick"===s.target?.className,c=this.columns[r.cell],u=!!(this._options.editable&&c?.editorClass&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(r.row,r.cell),null,a,u,s)}}handleContextMenu(e){const s=e.target.closest(".slick-cell");s&&(this.activeCellNode===s&&null!==this.currentEditor||this.triggerEvent(this.onContextMenu,{},e))}handleDblClick(e){const s=this.getCellFromEvent(e);!s||null!==this.currentEditor&&this.activeRow===s.row&&this.activeCell===s.cell||(this.triggerEvent(this.onDblClick,{row:s.row,cell:s.cell},e),!e.defaultPrevented&&this._options.editable&&this.gotoCell(s.row,s.cell,!0,e))}handleHeaderMouseEnter(e){const s=We.storage.get(e.target.closest(".slick-header-column"),"column");s&&this.triggerEvent(this.onHeaderMouseEnter,{column:s,grid:this},e)}handleHeaderMouseOver(e){const s=We.storage.get(e.target.closest(".slick-header-column"),"column");s&&this.triggerEvent(this.onHeaderMouseOver,{column:s,grid:this},e)}handleHeaderMouseLeave(e){const s=We.storage.get(e.target.closest(".slick-header-column"),"column");s&&this.triggerEvent(this.onHeaderMouseLeave,{column:s,grid:this},e)}handleHeaderMouseOut(e){const s=We.storage.get(e.target.closest(".slick-header-column"),"column");s&&this.triggerEvent(this.onHeaderMouseOut,{column:s,grid:this},e)}handleHeaderRowMouseEnter(e){const s=We.storage.get(e.target.closest(".slick-headerrow-column"),"column");s&&this.triggerEvent(this.onHeaderRowMouseEnter,{column:s,grid:this},e)}handleHeaderRowMouseOver(e){const s=We.storage.get(e.target.closest(".slick-headerrow-column"),"column");s&&this.triggerEvent(this.onHeaderRowMouseOver,{column:s,grid:this},e)}handleHeaderRowMouseLeave(e){const s=We.storage.get(e.target.closest(".slick-headerrow-column"),"column");s&&this.triggerEvent(this.onHeaderRowMouseLeave,{column:s,grid:this},e)}handleHeaderRowMouseOut(e){const s=We.storage.get(e.target.closest(".slick-headerrow-column"),"column");s&&this.triggerEvent(this.onHeaderRowMouseOut,{column:s,grid:this},e)}handleHeaderContextMenu(e){const s=e.target.closest(".slick-header-column"),r=s&&We.storage.get(s,"column");this.triggerEvent(this.onHeaderContextMenu,{column:r},e)}handleHeaderClick(e){if(!this.columnResizeDragging){const s=e.target.closest(".slick-header-column"),r=s&&We.storage.get(s,"column");r&&this.triggerEvent(this.onHeaderClick,{column:r},e)}}handlePreHeaderContextMenu(e){this.triggerEvent(this.onPreHeaderContextMenu,{node:e.target},e)}handlePreHeaderClick(e){this.columnResizeDragging||this.triggerEvent(this.onPreHeaderClick,{node:e.target},e)}handleFooterContextMenu(e){const s=e.target.closest(".slick-footerrow-column"),r=s&&We.storage.get(s,"column");this.triggerEvent(this.onFooterContextMenu,{column:r},e)}handleFooterClick(e){const s=e.target.closest(".slick-footerrow-column"),r=s&&We.storage.get(s,"column");this.triggerEvent(this.onFooterClick,{column:r},e)}handleCellMouseOver(e){this.triggerEvent(this.onMouseEnter,{},e)}handleCellMouseOut(e){this.triggerEvent(this.onMouseLeave,{},e)}cellExists(e,s){return!(e<0||e>=this.getDataLength()||s<0||s>=this.columns.length)}getCellFromPoint(e,s){let r=this.getRowFromPosition(s),a=0,c=0;for(let u=0;u<this.columns.length&&c<=e;u++)!this.columns[u]||this.columns[u].hidden||(c+=this.columns[u].width,a++);return a-=1,r<-1&&(r=-1),{row:r,cell:a}}getCellFromNode(e){const s=/l\d+/.exec(e.className);if(!s)throw new Error(`SlickGrid getCellFromNode: cannot get cell - ${e.className}`);return parseInt(s[0].substr(1,s[0].length-1),10)}getRowFromNode(e){for(const s in this.rowsCache)if(this.rowsCache)for(const r in this.rowsCache[s].rowNode)if(this.rowsCache[s].rowNode?.[+r]===e)return s?parseInt(s,10):0;return null}getFrozenRowOffset(e){let s=0;return s=this.hasFrozenRows?this._options.frozenBottom?e>=this.actualFrozenRow?this.h<this.viewportTopH?this.actualFrozenRow*this._options.rowHeight:this.h:0:e>=this.actualFrozenRow?this.frozenRowsHeight:0:0,s}getCellFromEvent(e){const s=e instanceof H?e.getNativeEvent():e;if(!s)return null;const r=s.touches?s.touches[0]:s,a=s.target.closest(".slick-cell");if(!a)return null;let c=this.getRowFromNode(a.parentNode);if(this.hasFrozenRows){let g=0;const y=(0,A.getOffset)(We.parents(a,".grid-canvas")[0]);We.parents(a,".grid-canvas-bottom").length&&(g=this._options.frozenBottom?We.height(this._canvasTopL):this.frozenRowsHeight);const q=r.clientY-y.top+g+document.documentElement.scrollTop;c=this.getCellFromPoint(r.clientX-y.left,q).row}const u=this.getCellFromNode(a);return(0,A.isDefinedNumber)(c)&&(0,A.isDefinedNumber)(u)?{row:c,cell:u}:null}getCellNodeBox(e,s){if(!this.cellExists(e,s))return null;const r=this.getFrozenRowOffset(e),a=this.getRowTop(e)-r,c=a+this._options.rowHeight-1;let u=0;for(let M=0;M<s;M++)!this.columns[M]||this.columns[M].hidden||(u+=this.columns[M].width||0,this._options.frozenColumn===M&&(u=0));const g=u+(this.columns[s]?.width||0);var y={top:a,bottom:c};return y[rear]=u,y[front]=g,y}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){-1===this.tabbingDirection?this._focusSink.focus():this._focusSink2.focus()}scrollCellIntoView(e,s,r){if(this.scrollRowIntoView(e,r),s<=this._options.frozenColumn)return;const a=this.getColspan(e,s);this.internalScrollColumnIntoView(this.columnPosLeft[s],this.columnPosRight[s+(a>1?a-1:0)])}internalScrollColumnIntoView(e,s){const r=this.scrollLeft+We.width(this._viewportScrollContainerX)-(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0);e<this.scrollLeft?(this._viewportScrollContainerX.scrollLeft=e,this.handleScroll(),this.render()):s>r&&(this._viewportScrollContainerX.scrollLeft=Math.min(e,s-this._viewportScrollContainerX.clientWidth),this.handleScroll(),this.render())}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this.columnPosLeft[e],this.columnPosRight[e])}setActiveCellInternal(e,s,r,a,c){if((0,A.isDefined)(this.activeCellNode)&&(this.makeActiveCellNormal(),this.activeCellNode.classList.remove("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach(u=>u.classList.remove("active"))),this.activeCellNode=e,(0,A.isDefined)(this.activeCellNode)){const u=(0,A.getOffset)(this.activeCellNode);let g=Math.floor((0,A.getOffset)(We.parents(this.activeCellNode,".grid-canvas")[0]).top);const y=We.parents(this.activeCellNode,".grid-canvas-bottom").length;this.hasFrozenRows&&y&&(g-=this._options.frozenBottom?We.height(this._canvasTopL):this.frozenRowsHeight);const M=this.getCellFromPoint(u.left,Math.ceil(u.top)-g);this.activeRow=M.row,this.activeCell=this.activePosX=this.activeCell=this.activePosX=this.getCellFromNode(this.activeCellNode),!(0,A.isDefined)(s)&&this._options.autoEditNewRow&&(s=this.activeRow===this.getDataLength()||this._options.autoEdit),this._options.showCellSelection&&(this.activeCellNode.classList.add("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach(L=>L.classList.add("active"))),this._options.editable&&s&&this.isCellPotentiallyEditable(this.activeRow,this.activeCell)&&(this._options.asyncEditorLoading?(clearTimeout(this.h_editorLoader),this.h_editorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,r,c)},this._options.asyncEditorLoadDelay)):this.makeActiveCellEditable(void 0,r,c))}else this.activeRow=this.activeCell=null;a||this.triggerEvent(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection?.empty)try{document.selection.empty()}catch{}else if(window.getSelection){const e=window.getSelection();e?.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,s){const r=this.getDataLength();return!(e<r&&!this.getDataItem(e)||this.columns[s].cannotTriggerInsert&&e>=r||!this.columns[s]||this.columns[s].hidden||!this.getEditor(e,s))}makeActiveCellNormal(e=!1){if(this.currentEditor){if(this.triggerEvent(this.onBeforeCellEditorDestroy,{editor:this.currentEditor}),this.currentEditor.destroy(),this.currentEditor=null,this.activeCellNode){const s=this.getDataItem(this.activeRow);if(this.activeCellNode.classList.remove("editable"),this.activeCellNode.classList.remove("invalid"),s){const r=this.columns[this.activeCell],c=this.getFormatter(this.activeRow,r)(this.activeRow,this.activeCell,this.getDataItemValueForColumn(s,r),r,s,this);this.applyFormatResultToCellNode(c,this.activeCellNode),this.invalidatePostProcessingResults(this.activeRow)}e&&this.setFocus()}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock()?.deactivate(this.editController)}}editActiveCell(e,s,r){this.makeActiveCellEditable(e,s,r)}_ColumnReadOnly=!1;makeActiveCellEditable(e,s,r){if(!this.activeCellNode)return;if(!this._options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when grid options.editable is false");if(clearTimeout(this.h_editorLoader),!this.isCellPotentiallyEditable(this.activeRow,this.activeCell))return void(this._ColumnReadOnly=!0);const a=this.columns[this.activeCell],c=this.getDataItem(this.activeRow);if(!1===this.triggerEvent(this.onBeforeEditCell,{row:this.activeRow,cell:this.activeCell,item:c,column:a,target:"grid"}).getReturnValue())return void this.setFocus();this.getEditorLock()?.activate(this.editController),this.activeCellNode.classList.add("editable");const u=e||this.getEditor(this.activeRow,this.activeCell);if("function"==typeof u){!e&&!u.suppressClearOnEdit&&(0,A.emptyElement)(this.activeCellNode);let g=this.data?.getItemMetadata?.(this.activeRow);g=g?.columns;const y=g&&(g[a.id]||g[this.activeCell]),M={grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this.activeCellNode),container:this.activeCellNode,column:a,columnMetaData:y,item:c||{},event:r,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)};this.currentEditor=new u(M),c&&this.currentEditor&&(this.currentEditor.loadValue(c),s&&"function"==typeof this.currentEditor?.preClick&&this.currentEditor.preClick()),this.serializedEditorValue=this.currentEditor?.serializeValue(),this.currentEditor?.position&&this.handleActiveCellPositionChange()}}commitEditAndSetFocus(){this.getEditorLock()?.commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&!this._options.autoCommitEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock()?.cancelCurrentEdit()&&this.setFocus()}adjustXToRight(e){return document.body.offsetWidth-e}adjustXToLeft(e){return e}adjustX=this.adjustXToLeft;getOffsetLeft(e){return e.offsetLeft}getOffsetRight(e){return document.body.offsetWidth-(e.offsetLeft+e.offsetWidth)}getOffsetRear=this.getOffsetLeft;absBox(e){const s={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:e.offsetWidth,height:e.offsetWidth,visible:!0};s.bottom=s.top+s.height,s.right=s.left+s.width,s[this.rear]=this.getOffsetRear(e),s.bottom=s.top+s.height,s[this.front]=s[this.rear]+s.width;let r=e.offsetParent;for(;(e=e.parentNode)!==document.body&&e&&e.parentNode;){const a=getComputedStyle(e);s.visible&&e.scrollHeight!==e.offsetHeight&&"visible"!==a.overflowY&&(s.visible=s.bottom>e.scrollTop&&s.top<e.scrollTop+e.clientHeight),s.visible&&e.scrollWidth!==e.offsetWidth&&"visible"!==a.overflowX&&(s.visible=s[this.front]>e[this.propScrollRear]&&s[this.rear]<e[this.propScrollRear]+e.clientWidth),s.left-=e.scrollLeft,s.top-=e.scrollTop,e===r&&(s.left+=e.offsetLeft,s.top+=e.offsetTop,r=e.offsetParent),s.bottom=s.top+s.height,s[this.front]=s[this.rear]+s.width}return s}getActiveCellPosition(){return this.absBox(this.activeCellNode)}getGridPosition(){return this.absBox(this._container)}handleActiveCellPositionChange(){if(this.activeCellNode&&(this.triggerEvent(this.onActiveCellPositionChanged,{}),this.currentEditor)){const e=this.getActiveCellPosition();this.currentEditor.show&&this.currentEditor.hide&&(e.visible?this.currentEditor.show():this.currentEditor.hide()),this.currentEditor.position&&this.currentEditor.position(e)}}getCellEditor(){return this.currentEditor}getActiveCell(){return this.activeCellNode?{row:this.activeRow,cell:this.activeCell}:null}getActiveCellNode(){return this.activeCellNode}getTextSelection(){let e=null;if(window.getSelection){const s=window.getSelection();(s?.rangeCount||0)>0&&(e=s.getRangeAt(0))}return e}setTextSelection(e){if(window.getSelection&&e){const s=window.getSelection();s&&(s.removeAllRanges(),s.addRange(e))}}scrollRowIntoView(e,s){if(!this.hasFrozenRows||!this._options.frozenBottom&&e>this.actualFrozenRow-1||this._options.frozenBottom&&e<this.actualFrozenRow-1){const r=We.height(this._viewportScrollContainerY),a=this.hasFrozenRows&&!this._options.frozenBottom?e-this._options.frozenRow:e,c=a*this._options.rowHeight,u=(a+1)*this._options.rowHeight-r+(this.viewportHasHScroll&&this.scrollbarDimensions?.height||0);(a+1)*this._options.rowHeight>this.scrollTop+r+this.offset?(this.scrollTo(s?c:u),this.render()):a*this._options.rowHeight<this.scrollTop+this.offset&&(this.scrollTo(s?u:c),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){const s=e*this.numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this.scrollTop+this._options.rowHeight-1)+s)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&(0,A.isDefined)(this.activeRow)){let a=this.activeRow+s;const c=this.getDataLengthIncludingAddNew();a>=c&&(a=c-1),a<0&&(a=0);let u=0,g=null;const y=this.activePosX;for(;u<=this.activePosX;)this.canCellBeActive(a,u)&&(g=u),u+=this.getColspan(a,u);null!==g?(this.setActiveCellInternal(this.getCellNode(a,g)),this.activePosX=y):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){return this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){const s=this.getDataLength();if(!s)return!0;if(e<0?e=0:e>=s&&(e=s-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&(0,A.isDefined)(this.activeRow)){let r=0,a=null;const c=this.activePosX;for(;r<=this.activePosX;)this.canCellBeActive(e,r)&&(a=r),r+=this.getColspan(e,r);null!==a?(this.setActiveCellInternal(this.getCellNode(e,a)),this.activePosX=c):this.resetActiveCell()}return!0}getColspan(e,s){const r=this.data?.getItemMetadata?.(e);if(!r||!r.columns)return 1;let c=(r.columns[this.columns[s].id]||r.columns[s])?.colspan;return c="*"===c?this.columns.length-s:c||1,c}findFirstFocusableCell(e){let s=0;for(;s<this.columns.length;){if(this.canCellBeActive(e,s))return s;s+=this.getColspan(e,s)}return null}findLastFocusableCell(e){let s=0,r=null;for(;s<this.columns.length;)this.canCellBeActive(e,s)&&(r=s),s+=this.getColspan(e,s);return r}gotoRight(e,s,r){if(s>=this.columns.length)return null;do{s+=this.getColspan(e,s)}while(s<this.columns.length&&!this.canCellBeActive(e,s));return s<this.columns.length?{row:e,cell:s,posX:s}:null}gotoLeft(e,s,r){if(s<=0)return null;const a=this.findFirstFocusableCell(e);if(null===a||a>=s)return null;let u,c={row:e,cell:a,posX:a},g=!0;for(;g;){if(u=this.gotoRight(c.row,c.cell,c.posX),!u)return g=!1,null;if(u.cell>=s)return g=!1,c;c=u}}gotoDown(e,s,r){let a;const c=this.getDataLengthIncludingAddNew();let u=!0;for(;u;){if(++e>=c)return u=!1,null;for(a=s=0;s<=r;)a=s,s+=this.getColspan(e,s);if(this.canCellBeActive(e,a))return u=!1,{row:e,cell:a,posX:r}}}gotoUp(e,s,r){let a,c=!0;for(;c;){if(--e<0)return c=!1,null;for(a=s=0;s<=r;)a=s,s+=this.getColspan(e,s);if(this.canCellBeActive(e,a))return c=!1,{row:e,cell:a,posX:r}}}gotoNext(e,s,r){if(!(0,A.isDefinedNumber)(e)&&!(0,A.isDefinedNumber)(s)&&(e=s=r=0,this.canCellBeActive(e,s)))return{row:e,cell:s,posX:s};const a=this.gotoRight(e,s,r);if(a)return a;let c=null;const u=this.getDataLengthIncludingAddNew();for(e===u-1&&e--;++e<u;)if(c=this.findFirstFocusableCell(e),null!==c)return{row:e,cell:c,posX:c};return null}gotoPrev(e,s,r){if(!(0,A.isDefinedNumber)(e)&&!(0,A.isDefinedNumber)(s)&&(e=this.getDataLengthIncludingAddNew()-1,s=r=this.columns.length-1,this.canCellBeActive(e,s)))return{row:e,cell:s,posX:s};let a,c;for(;!a&&(a=this.gotoLeft(e,s,r),!a);){if(--e<0)return null;s=0,c=this.findLastFocusableCell(e),null!==c&&(a={row:e,cell:c,posX:c})}return a}gotoRowStart(e,s,r){const a=this.findFirstFocusableCell(e);return null===a?null:{row:e,cell:a,posX:a}}gotoRowEnd(e,s,r){const a=this.findLastFocusableCell(e);return null===a?null:{row:e,cell:a,posX:a}}canAllowTab(e){return!(this.columns[e].DgCol.DisableTab&&1==this.columns[e].DgCol.DisableTab||1==this.columns[e].DgCol.ReadOnly)}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(e){if(!this._options.enableCellNavigation||!this.activeCellNode&&"prev"!==e&&"next"!==e)return!1;if(!this.getEditorLock()?.commitCurrentEdit())return!0;this.setFocus(),this.tabbingDirection={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1}[e];const c={up:this.gotoUp,down:this.gotoDown,left:this.gotoLeft,right:this.gotoRight,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd}[e].call(this,this.activeRow,this.activeCell,this.activePosX);if(c){const u=this.getDataLength();if(this.hasFrozenRows&&this._options.frozenBottom&&c.row===u)return;return(!this._options.frozenBottom&&c.row>=this.actualFrozenRow||this._options.frozenBottom&&c.row<this.actualFrozenRow)&&this.scrollCellIntoView(c.row,c.cell,!(c.row===u)&&this._options.emulatePagingWhenScrolling),this.setActiveCellInternal(this.getCellNode(c.row,c.cell)),this.activePosX=c.posX,!0}return this.setActiveCellInternal(this.getCellNode(this.activeRow,this.activeCell)),!1}getCellNode(e,s){if(this.rowsCache[e]){this.ensureCellNodesInRowsCache(e);try{return this.rowsCache[e].cellNodesByColumnIdx.length>s?this.rowsCache[e].cellNodesByColumnIdx[s]:null}catch{return this.rowsCache[e].cellNodesByColumnIdx[s]}}return null}setActiveCell(e,s,r,a,c){!this.initialized||!this._options.enableCellNavigation||e>this.getDataLength()||e<0||s>=this.columns.length||s<0||(this.scrollCellIntoView(e,s,!1),this.setActiveCellInternal(this.getCellNode(e,s),r,a,c))}setActiveRow(e,s,r){s??=0,!(!this.initialized||e>this.getDataLength()||e<0||s>=this.columns.length||s<0)&&(this.activeRow=e,r||this.scrollCellIntoView(e,s,!1))}canCellBeActive(e,s){if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||s>=this.columns.length||s<0||!this.columns[s]||this.columns[s].hidden)return!1;const r=this.data?.getItemMetadata?.(e);if(void 0!==r?.focusable)return!!r.focusable;const a=r?.columns;return void 0!==a?.[this.columns[s].id]?.focusable?!!a[this.columns[s].id].focusable:void 0!==a?.[s]?.focusable?!!a[s].focusable:!!this.columns[s].focusable}canCellBeSelected(e,s){if(e>=this.getDataLength()||e<0||s>=this.columns.length||s<0||!this.columns[s]||this.columns[s].hidden)return!1;const r=this.data?.getItemMetadata?.(e);if(void 0!==r?.selectable)return!!r.selectable;const a=r?.columns&&(r.columns[this.columns[s].id]||r.columns[s]);return void 0!==a?.selectable?!!a.selectable:!!this.columns[s].selectable}gotoCell(e,s,r,a){if(!this.initialized||!this.canCellBeActive(e,s)||!this.getEditorLock()?.commitCurrentEdit())return;this.scrollCellIntoView(e,s,!1);const c=this.getCellNode(e,s),u=this.columns[s],g=!!(this._options.editable&&u?.editorClass&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(c,r||e===this.getDataLength()||this._options.autoEdit,null,g,a),this.currentEditor||this.setFocus()}commitCurrentEdit(){const e=this,s=e.getDataItem(e.activeRow),r=e.columns[e.activeCell];if(e.currentEditor){if(e.currentEditor.isValueChanged()){const a=e.currentEditor.validate();if(a.valid){const c=e.activeRow,u=e.activeCell,g=e.currentEditor,y=e.currentEditor.serializeValue(),M=e.serializedEditorValue;if(e.activeRow<e.getDataLength()){const L={row:c,cell:u,editor:g,serializedValue:y,prevSerializedValue:M,execute:()=>{g.applyValue(s,y),e.updateRow(c),e.triggerEvent(e.onCellChange,{command:"execute",row:c,cell:u,item:s,column:r})},undo:()=>{g.applyValue(s,M),e.updateRow(c),e.triggerEvent(e.onCellChange,{command:"undo",row:c,cell:u,item:s,column:r})}};e._options.editCommandHandler?(e.makeActiveCellNormal(!0),e._options.editCommandHandler(s,r,L)):(L.execute(),e.makeActiveCellNormal(!0)),e.triggerEvent(e.onCellEndEdit,{row:e.activeRow,cell:e.activeCell,item:s,column:e.columns[e.activeCell],isValueChanged:!0})}else{const L={};e.currentEditor.applyValue(L,e.currentEditor.serializeValue()),e.makeActiveCellNormal(!0),e.triggerEvent(e.onAddNewRow,{item:L,column:r})}return!e.getEditorLock()?.isActive()}return e.triggerEvent(e.onCellEndEdit,{row:e.activeRow,cell:e.activeCell,item:s,column:e.columns[e.activeCell],isValueChanged:!1}),e.activeCellNode&&(e.activeCellNode.classList.remove("invalid"),We.width(e.activeCellNode),e.activeCellNode.classList.add("invalid")),e.triggerEvent(e.onValidationError,{editor:e.currentEditor,cellNode:e.activeCellNode,validationResults:a,row:e.activeRow,cell:e.activeCell,column:r}),e.currentEditor.focus(),!1}e.triggerEvent(e.onCellEndEdit,{row:e.activeRow,cell:e.activeCell,item:s,column:e.columns[e.activeCell],isValueChanged:!1}),e.makeActiveCellNormal(!0)}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){const s=[],r=this.columns.length-1;for(let a=0;a<e.length;a++)s.push(new Ct(e[a],0,e[a],r));return s}getSelectedRows(){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");return this.selectedRows.slice(0)}setSelectedRows(e,s){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");const r=this.getEditorLock();"function"==typeof r?.isActive&&!r.isActive()&&this.selectionModel.setSelectedRanges(this.rowsToRanges(e),s||"SlickGrid.setSelectedRows")}sanitizeHtmlString(e){return"function"==typeof this._options?.sanitizer&&e&&"string"==typeof e?this._options.sanitizer(e):e}}class $h{constructor(e){this.pluginName="AutoTooltips",this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this._eventHandler=new Fe,this._addonOptions=e}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e){this._addonOptions={...this._defaults,...this.addonOptions},this._grid=e,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}handleMouseEnter(e){const s=this._grid.getCellFromEvent(e);if(s){let a,r=this._grid.getCellNode(s.row,s.cell);this._addonOptions&&r&&(!r.title||this._addonOptions?.replaceExisting)&&(r.clientWidth<r.scrollWidth?(a=r.textContent?.trim()??"",this._addonOptions?.maxToolTipLength&&a.length>this._addonOptions?.maxToolTipLength&&(a=a.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):a="",r.title=a),r=null}}handleHeaderMouseEnter(e,s){const r=s.column;let a;const c=e.target;c&&(a=c.closest(".slick-header-column"),a&&!r?.toolTip)&&(a.title=(0,A.stripTags)((0,A.getHtmlStringOutput)(c.clientWidth<a.clientWidth?r?.name??"":"","innerHTML"))),a=null}}class ba{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new Fe,this._bindingEventService=new St.P}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){return this._grid?.getOptions()??{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(e,s){this._grid=e,this.createUndoRedoBuffer(),this._cellSelectionModel=new oc,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions={...this.getDefaultOptions(),...s},this._cellExternalCopyManagerPlugin=new os,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(r,a)=>{this._addonOptions&&"function"==typeof this._addonOptions.onCopyCells&&this._addonOptions.onCopyCells(r,a)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(r,a)=>{this._addonOptions&&"function"==typeof this._addonOptions.onCopyCancelled&&this._addonOptions.onCopyCancelled(r,a)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(r,a)=>{this._addonOptions&&"function"==typeof this._addonOptions.onPasteCells&&this._addonOptions.onPasteCells(r,a)})}dispose(){this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),this._cellSelectionModel?.dispose(),this._cellExternalCopyManagerPlugin?.dispose()}createUndoRedoBuffer(){let e=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:s=>{this._commandQueue[e]=s,e++,s.execute()},undo:()=>{if(0===e)return;e--;const s=this._commandQueue[e];s&&ml.cancelCurrentEdit()&&s.undo()},redo:()=>{if(e>=this._commandQueue.length)return;const s=this._commandQueue[e];e++,s&&ml.cancelCurrentEdit()&&s.execute()}}}getDefaultOptions(){let e=0;return{clipboardCommandHandler:s=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,s)},dataItemColumnValueExtractor:(s,r,a=0,c=0)=>{const u=this._grid.getActiveCell(),g=this._grid.getCellEditor()&&u?.row===a&&u?.cell===c;if((!this.gridOptions.editable||!r.editor||!g||this.addonOptions?.copyActiveEditorCell)&&r.formatter&&(void 0!==r.exportWithFormatter?r.exportWithFormatter:this.gridOptions.textExportOptions?.exportWithFormatter)){const L=r.formatter(a,c,s[r.field],r,s,this._grid),q=(0,A.isPrimitiveOrHTML)(L)?L:L.html||L.text;if(r.sanitizeDataExport||this.gridOptions.textExportOptions?.sanitizeDataExport){const pe=q instanceof HTMLElement?q.innerHTML:q;return(0,A.stripTags)(pe??"")}return L}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:s=>{for(let r=0;r<s;r++)this._grid.getData().addItem({[this.gridOptions.datasetIdPropertyName||"id"]:"newRow_"+e++})},replaceNewlinesWith:!1,removeDoubleQuotesOnPaste:!1}}handleBodyKeyDown(e){"Z"===e.key&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}}const Ol=()=>{};class os{constructor(){this.pluginName="CellExternalCopyManager",this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this.onCopyCells=new ue("onCopyCells"),this.onCopyCancelled=new ue("onCopyCancelled"),this.onPasteCells=new ue("onPasteCells"),this.onBeforePasteCell=new ue("onBeforePasteCell"),this._eventHandler=new Fe}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e,s){this._grid=e,this._addonOptions={...this._addonOptions,...s},this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0;const r=e.getPubSubService();r&&We.addSlickEventPubSubWhenDefined(r,this),this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));const a=e.getSelectionModel();if(!a)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new SlickCellSelectionModel())");if(this._eventHandler.subscribe(a.onSelectedRangesChanged,()=>{this._grid.getEditorLock().isActive()||this._grid.focus()}),e&&"function"==typeof this._addonOptions?.onBeforePasteCell){const c=e?.getData();this._eventHandler.subscribe(this.onBeforePasteCell,(u,g)=>{const y=e.getColumns()[g.cell],M={row:g.row,cell:g.cell,dataView:c,grid:e,columnDef:y,dataContext:e.getDataItem(g.row)};return this._addonOptions.onBeforePasteCell?.(u,M)})}}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(e){if("function"==typeof this._addonOptions.headerColumnValueExtractor){const s=(0,A.getHtmlStringOutput)(this._addonOptions.headerColumnValueExtractor(e),"innerHTML");if(s)return(0,A.stripTags)(s)}return(0,A.getHtmlStringOutput)(e.name||"","innerHTML")}getDataItemValueForColumn(e,s,r,a,c){if("function"==typeof this._addonOptions.dataItemColumnValueExtractor){const g=this._addonOptions.dataItemColumnValueExtractor(e,s,r,a);if(g)return g instanceof HTMLElement?(0,A.stripTags)(g.innerHTML):g}let u="";if(s)if(s.editorClass){const g=document.createElement("p"),y=new s.editorClass({container:g,column:s,event:c,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:Ol,commitChanges:Ol});y.loadValue(e),u=y.serializeValue(),y.destroy(),g.remove()}else u=e[s.field||""];return u}setDataItemValueForColumn(e,s,r){if(!s?.denyPaste){if(this._addonOptions.dataItemColumnValueSetter){const a=this._addonOptions.dataItemColumnValueSetter(e,s,r);if(!0!==a)return a}if(s.editorClass){const a=document.createElement("div"),c=new s.editorClass({container:a,column:s,event:null,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:Ol,commitChanges:Ol});c.loadValue(e);const u=c.validate(void 0,r);if(!u.valid){const g=this._grid.getActiveCell();this._grid.onValidationError.notify({editor:c,cellNode:this._grid.getActiveCellNode(),validationResults:u,row:g?.row,cell:g?.cell,column:s,grid:this._grid})}c.applyValue(e,r),c.destroy(),a.remove()}else e[s.field]=r}}setIncludeHeaderWhenCopying(e){this._addonOptions.includeHeaderWhenCopying=e}createTextBox(e){const s=(0,A.createDomElement)("textarea",{value:e,style:{position:"absolute",left:"-1000px",top:`${document.body.scrollTop}px`}},this._bodyElement);return s.select(),s}decodeTabularData(e,s){const r=e.getColumns(),c=s.value.split(/[\n\f\r](?=(?:[^"]*"[^"]*")*[^"]*$)/);""===c[c.length-1]&&c.pop();let u=0;const g=[];this._bodyElement.removeChild(s);for(const qe of c)qe.startsWith('"')&&qe.endsWith('"')?g[u++]=[qe.replaceAll("\n",this._addonOptions.replaceNewlinesWith||"\n").replaceAll("\r","").replaceAll('"',this._addonOptions.removeDoubleQuotesOnPaste?"":'"')]:g[u++]=qe.split("\t");const y=this._grid.getActiveCell(),M=this._grid.getSelectionModel()?.getSelectedRanges(),L=M?.length?M[0]:null;let q,pe;if(L)q=L.fromRow,pe=L.fromCell;else{if(!y)return;q=y.row,pe=y.cell}let Ie=!1,Ve=g.length,Ge=g.length?g[0].length:0;1===g.length&&1===g[0].length&&L&&(Ie=!0,Ve=L.toRow-L.fromRow+1,Ge=L.toCell-L.fromCell+1);const Je=this._grid.getData().length-q;let Xe=0;if(Je<Ve&&"function"==typeof this._addonOptions.newRowCreator){const qe=this._grid.getData();for(Xe=1;Xe<=Ve-Je;Xe++)qe.push({});this._grid.setData(qe),this._grid.render()}if(q+Ve>this._grid.getDataLength()&&"function"==typeof this._addonOptions.newRowCreator){const qe=q+Ve-this._grid.getDataLength();this._addonOptions.newRowCreator(qe)}const _e={isClipboardCommand:!0,clippedRange:g,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:Ie,activeRow:q,activeCell:pe,destH:Ve,destW:Ge,maxDestY:this._grid.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{_e.h=0;for(let ft=0;ft<_e.destH;ft++){_e.oldValues[ft]=[],_e.w=0,_e.h++;for(let yt=0;yt<_e.destW;yt++){_e.w++;const Bt=q+ft,Ot=pe+yt;if(Bt<_e.maxDestY&&Ot<_e.maxDestX){const Gt=this._grid.getDataItem(Bt);if(!1===this._grid.triggerEvent(this.onBeforePasteCell,{row:Bt,cell:Ot,dt:Gt,column:r[Ot],target:"grid"}).getReturnValue())continue;_e.oldValues[ft][yt]=Gt[r[Ot].field],this.setDataItemValueForColumn(Gt,r[Ot],Ie?g[0][0]:g[ft]?g[ft][yt]:""),this._grid.updateCell(Bt,Ot),this._grid.onCellChange.notify({row:Bt,cell:Ot,item:Gt,grid:this._grid,column:{}})}}}const qe=new Ct(q,pe,q+_e.h-1,pe+_e.w-1);this.markCopySelection([qe]),this._grid.getSelectionModel()?.setSelectedRanges([qe]),this.onPasteCells.notify({ranges:[qe]})},undo:()=>{for(let ft=0;ft<_e.destH;ft++)for(let yt=0;yt<_e.destW;yt++){const Bt=q+ft,Ot=pe+yt;if(Bt<_e.maxDestY&&Ot<_e.maxDestX){const Gt=this._grid.getDataItem(Bt);this.setDataItemValueForColumn(Gt,r[Ot],Ie?_e.oldValues[0][0]:_e.oldValues[ft][yt]),this._grid.updateCell(Bt,Ot),this._grid.onCellChange.notify({row:Bt,cell:Ot,item:Gt,grid:this._grid,column:{}})}}const qe=new Ct(q,pe,q+_e.h-1,pe+_e.w-1);if(this.markCopySelection([qe]),this._grid.getSelectionModel()?.setSelectedRanges([qe]),this.onPasteCells.notify({ranges:[qe]}),"function"==typeof this._addonOptions.onPasteCells&&this._addonOptions.onPasteCells(new H,{ranges:[qe]}),Xe>1){const ft=this._grid.getData();for(;Xe>1;Xe--)ft.splice(ft.length-1,1);this._grid.setData(ft),this._grid.render()}}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(_e):_e.execute()}handleKeyDown(e){let s;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if("Escape"===e.key&&this._copiedRanges&&(e.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),"function"==typeof this._addonOptions.onCopyCancelled&&this._addonOptions.onCopyCancelled(e,{ranges:this._copiedRanges}),this._copiedRanges=null),("c"===e.key||"Insert"===e.key)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey&&("function"==typeof this._onCopyInit&&this._onCopyInit.call(this),s=this._grid.getSelectionModel()?.getSelectedRanges()??[],0!==s.length)){this._copiedRanges=s,this.markCopySelection(s),this.onCopyCells.notify({ranges:s}),"function"==typeof this._addonOptions.onCopyCells&&this._addonOptions.onCopyCells(e,{ranges:s});const r=this._grid.getColumns();let a="";for(let c=0;c<s.length;c++){const u=s[c],g=[];for(let y=u.fromRow;y<u.toRow+1;y++){const M=[],L=this._grid.getDataItem(y);if(0===g.length&&this._addonOptions.includeHeaderWhenCopying){const q=[];for(let pe=u.fromCell;pe<u.toCell+1;pe++)(r[pe].name instanceof HTMLElement?(0,A.stripTags)(r[pe].name.innerHTML):r[pe].name).length>0&&!r[pe].hidden&&q.push(this.getHeaderValueForColumn(r[pe]));g.push(q.join("\t"))}for(let q=u.fromCell;q<u.toCell+1;q++)(r[q].name instanceof HTMLElement?(0,A.stripTags)(r[q].name.innerHTML):r[q].name).length>0&&!r[q].hidden&&M.push(this.getDataItemValueForColumn(L,r[q],y,q,e));g.push(M.join("\t"))}a+=g.join("\r\n")+"\r\n"}if(window.clipboardData)return window.clipboardData.setData("Text",a),!0;{const c=document.activeElement,u=this.createTextBox(a);return u.focus(),window.setTimeout(()=>{this._bodyElement.removeChild(u),c?c.focus():console.log("No element to restore focus to after copy?")},this.addonOptions?.clipboardPasteDelay??100),"function"==typeof this._onCopySuccess&&this._onCopySuccess(1===s.length?s[0].toRow+1-s[0].fromRow:s.length),!1}}if(!this._addonOptions.readOnlyMode&&("v"===e.key&&(e.ctrlKey||e.metaKey)&&!e.shiftKey||"Insert"===e.key&&e.shiftKey&&!e.ctrlKey)){const r=this.createTextBox("");return window.setTimeout(()=>this.decodeTabularData(this._grid,r),this.addonOptions?.clipboardPasteDelay??100),!1}}}markCopySelection(e){this.clearCopySelection();const s=this._grid.getColumns(),r={};for(const a of e)for(let c=a.fromRow;c<=a.toRow;c++){r[c]={};for(let u=a.fromCell;u<=a.toCell&&u<s.length;u++)r[c][s[u].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,r),window.clearTimeout(this._clearCopyTI),this._clearCopyTI=window.setTimeout(()=>this.clearCopySelection(),this.addonOptions?.clearCopySelectionDelay||2e3)}}class rs{constructor(e,s,r){this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new St.P,this._eventHandler=new Fe}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){this._eventHandler?.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),this._commandTitleElm?.remove(),this._optionTitleElm?.remove(),this.disposeAllMenus(),(0,A.emptyElement)(this._menuElm),this.menuElement?.remove(),this._menuElm?.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach(e=>e.remove())}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach(e=>e.remove())}setOptions(e){this._addonOptions={...this._addonOptions,...e}}addSubMenuTitleWhenExists(e,s){if("divider"!==e&&e?.subMenuTitle){const r=document.createElement("div");r.className="slick-menu-title",r.textContent=e.subMenuTitle;const a=e.subMenuTitleCssClass;a&&r.classList.add(...(0,A.classNameToList)(a)),s.appendChild(r)}}populateCommandOrOptionItems(e,s,r,a,c,u,g){if(c&&a&&s)for(const y of a)this.populateSingleCommandOrOptionItem(e,s,r,y,c,u,g)}populateCommandOrOptionTitle(e,s,r,a){if(s){const c=a>0,u=this._menuElm?.querySelector(`.slick-${e}-header`)??(0,A.createDomElement)("div",{className:`slick-${e}-header`}),g=`${e}Title`;c||(s?.[g]?((0,A.emptyElement)(u),this[`_${e}TitleElm`]=(0,A.createDomElement)("span",{className:"slick-menu-title",textContent:s[g]}),u.appendChild(this[`_${e}TitleElm`]),u.classList.add("with-title")):u.classList.add("no-title"),r.appendChild(u))}}populateSingleCommandOrOptionItem(e,s,r,a,c,u,g){let y=null;if(c&&a&&s){const M=c?.level||0,q=`${this._menuCssPrefix}${"headerButtons"===this._camelPluginName?"":"-item"}`;let pe=!0,Ie=!0;if("object"==typeof a&&(pe=this.extensionUtility.runOverrideFunctionWhenExists(a.itemVisibilityOverride,c),Ie=this.extensionUtility.runOverrideFunctionWhenExists(a.itemUsabilityOverride,c)),!pe)return null;if("object"==typeof a&&a.itemUsabilityOverride&&(a.disabled=!Ie),y=(0,A.createDomElement)("li",{className:q,role:"menuitem"}),"object"==typeof a&&(0,A.isDefined)(a[e])&&(y.dataset[e]=a?.[e]),r&&r.appendChild(y),"object"==typeof a&&a.divider||"divider"===a)return y.classList.add(`${q}-divider`),y;if(a.disabled&&y.classList.add(`${q}-disabled`),(a.hidden||a.showOnHover)&&y.classList.add(`${q}-hidden`),a.cssClass&&y.classList.add(...(0,A.classNameToList)(a.cssClass)),a.tooltip&&(y.title=a.tooltip),"headerButtons"!==this._camelPluginName){const Ge=(0,A.createDomElement)("div",{className:`${this._menuCssPrefix}-icon`});y.appendChild(Ge),a.iconCssClass?Ge.classList.add(...(0,A.classNameToList)(a.iconCssClass)):!a.commandItems&&!a.optionItems&&(Ge.textContent="\u25e6");const Je=(0,A.createDomElement)("span",{className:`${this._menuCssPrefix}-content`,textContent:"object"==typeof a&&a.title||""},y);a.textCssClass&&Je.classList.add(...(0,A.classNameToList)(a.textCssClass))}const Ve=M>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(y,"click",Ge=>u.call(this,Ge,e,a,M,c?.column),void 0,Ve),"mouseover"===this._addonOptions?.subMenuOpenByEvent&&"function"==typeof g&&this._bindEventService.bind(y,"mouseover",Ge=>g.call(this,Ge,e,a,M,c?.column),void 0,Ve),a.commandItems||a.optionItems){const Ge=document.createElement("span");Ge.className="sub-item-chevron",this._addonOptions.subItemChevronClass?Ge.classList.add(...(0,A.classNameToList)(this._addonOptions.subItemChevronClass)):Ge.textContent="\u2b9e",y.classList.add("slick-submenu-item"),y.appendChild(Ge)}}return y}}class zh extends rs{constructor(e,s,r){super(e,s,r),this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(e){this.menuElement?.remove(),this._menuElm=void 0;const s=this.grid.getCellFromEvent(e);if(s){this._currentCell=s.cell??0,this._currentRow=s.row??0;const r=this._addonOptions?.commandItems||[],a=this._addonOptions?.optionItems||[],c={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(e,c),"function"==typeof e.stopPropagation&&(this.pubSubService.publish(`on${(0,A.titleCase)(this._camelPluginName)}BeforeMenuShow`,c),"function"==typeof this.addonOptions?.onBeforeMenuShow&&!1===this.addonOptions.onBeforeMenuShow(e,c))||(this._menuElm=this.createMenu(r,a),this._menuElm&&(this._menuElm.style.top=`${(e.pageY||0)+5}px`,this._menuElm.style.left=`${e.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${(0,A.titleCase)(this._camelPluginName)}AfterMenuShow`,c),"function"==typeof this.addonOptions?.onAfterMenuShow&&!1===this.addonOptions.onAfterMenuShow(e,c)))return}return this._menuElm}createMenu(e,s,r=0,a){const c=this.grid.getColumns()[this._currentCell],u=this.grid.getDataItem(this._currentRow),g=a?.command||a?.option;let y=1===r&&g?String(g).replace(/\s/g,""):"";y&&(this._subMenuParentId=y),r>1&&(y=this._subMenuParentId);let M=!0,L=!0;if("contextMenu"===this._camelPluginName){if(M=this.checkIsColumnAllowed(this._addonOptions?.optionShownOverColumnIds??[],c.id),L=this.checkIsColumnAllowed(this._addonOptions?.commandShownOverColumnIds??[],c.id),!c||!(L&&e.length||M&&s.length))return void this.hideMenu()}else if(!c||!c.cellMenu||!e.length&&!s.length)return;const q=`${this.menuCssClass} slick-menu-level-${r} ${this.gridUid}`,pe=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${r}${this.gridUidSelector}`);if(pe){if(pe.dataset.subMenuParent===y)return pe;this.disposeSubMenus()}const Ie=document.createElement("div");Ie.className=q,r>0&&(Ie.classList.add("slick-submenu"),this.gridOptions?.darkMode&&Ie.classList.add("slick-dark-mode"),y&&(Ie.dataset.subMenuParent=y));const Ve=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${this.addonOptions.maxHeight??0}px`,Ge=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${this.addonOptions.maxWidth??0}px`;Ve&&(Ie.style.maxHeight=Ve),Ge&&(Ie.style.maxWidth=Ge),this.addonOptions?.width&&(Ie.style.width=(0,A.findWidthOrDefault)(this.addonOptions?.width));const Je=(0,A.createDomElement)("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"\xd7",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&M&&s.length>0){const Xe=(0,A.createDomElement)("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},Ie);this.populateCommandOrOptionTitle("option",this.addonOptions,Xe,r),!this.addonOptions.hideCloseButton&&r<1&&this.populateCommandOrOptionCloseBtn("option",Je,Xe),a&&r>0&&this.addSubMenuTitleWhenExists(a,Xe),this.populateCommandOrOptionItems("option",this.addonOptions,Xe,s,{cell:this._currentCell,row:this._currentRow,column:c,dataContext:u,grid:this.grid,level:r},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&L&&e.length>0){const Xe=(0,A.createDomElement)("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},Ie);this.populateCommandOrOptionTitle("command",this.addonOptions,Xe,r),!this.addonOptions.hideCloseButton&&r<1&&(!M||0===s.length||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",Je,Xe),a&&r>0&&this.addSubMenuTitleWhenExists(a,Xe),this.populateCommandOrOptionItems("command",this.addonOptions,Xe,e,{cell:this._currentCell,row:this._currentRow,column:c,dataContext:u,grid:this.grid,level:r},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return r++,Ie}closeMenu(e,s){if(this.menuElement){if("function"==typeof this.addonOptions?.onBeforeMenuClose&&!1===this.addonOptions.onBeforeMenuClose(e,s))return;this.hideMenu()}}hideMenu(){this.menuElement?.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(e,s){return!(e?.length>0)||e.findIndex(r=>r===s)>=0}handleBodyMouseDown(e){if(this.menuElement){let s=!1;const r=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||r)&&(s=!0),(this.menuElement!==e.target&&!s&&!e.defaultPrevented||"close"===e.target.className&&r)&&this.closeMenu(e,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(e){e.defaultPrevented||this.closeMenu(e,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(e,s,r,a=0){void 0!==r?.[s]&&"divider"!==r&&!r.disabled&&!r.divider&&(r.commandItems||r.optionItems?(this.repositionSubMenu(r,s,a,e),this._lastMenuTypeClicked=s):0===a&&this.disposeSubMenus())}handleMenuItemCommandClick(e,s,r,a=0){if(void 0!==r?.[s]&&"divider"!==r&&!r.disabled&&!r.divider&&void 0!==this._currentCell&&void 0!==this._currentRow){if("option"===s&&!this.grid.getEditorLock().commitCurrentEdit())return;const c=this._currentCell,u=this._currentRow,g=this.grid.getColumns()[this._currentCell],y=this.grid.getDataItem(this._currentRow),M=void 0!==r[s]?r[s]:"";if(void 0===M||r[`${s}Items`])(r.commandItems||r.optionItems)&&this.repositionSubMenu(r,s,a,e);else{const L={cell:this._currentCell,row:this._currentRow,grid:this.grid,[s]:M,item:r,column:g,dataContext:y},q="command"===s?"onCommand":"onOptionSelected";this.pubSubService.publish(`${this._camelPluginName}:${q}`,L),"function"==typeof this._addonOptions?.[q]&&this._addonOptions[q](e,L),"function"==typeof r.action&&r.action.call(this,e,L),e.defaultPrevented||this.closeMenu(e,{cell:c,row:u,grid:this.grid})}this._lastMenuTypeClicked=s}}populateCommandOrOptionCloseBtn(e,s,r){this._bindEventService.bind(s,"click",c=>this.handleCloseButtonClicked(c),void 0,"parent-menu");const a=r.querySelector(`.slick-${e}-header`)??(0,A.createDomElement)("div",{className:`slick-${e}-header`});a?.appendChild(s),r.appendChild(a),a.classList.add("with-close")}repositionSubMenu(e,s,r,a){(a.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==s)&&this.disposeSubMenus();const c=this.createMenu(e?.commandItems||[],e?.optionItems||[],r+1,e);c&&(c.style.display="block",document.body.appendChild(c),this.repositionMenu(a,c))}repositionMenu(e,s){const r=s?.classList.contains("slick-submenu"),a=e.target.closest(r?`.${this._menuCssPrefix}-item`:".slick-cell");if(s&&a){s.style.top="0px",s.style.left="0px";const c=e?.touches?.[0]??e,u=(0,A.getOffset)(a);let g=a&&"cellMenu"===this._camelPluginName?u.left:c.pageX,y=a&&"cellMenu"===this._camelPluginName?u.top:c.pageY;r&&"contextMenu"===this._camelPluginName&&(g=u.left,y=u.top);const M=a.offsetWidth||0,L=s?.offsetHeight||0,q=s?.offsetWidth||this._addonOptions.width||0,pe=this.gridOptions.rowHeight||0,Ie=Number(this._addonOptions.autoAdjustDropOffset||0),Ve=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){const{bottom:Ge,top:Je}=(0,A.calculateAvailableSpace)(a),Xe=Ge+Ie-pe;"top"==(Xe<L&&Je-Ie+pe>Xe?"top":"bottom")||"top"===this._addonOptions.dropDirection?(s.classList.remove("dropdown"),s.classList.add("dropup"),y-=r?L-Ie-a.clientHeight:L-Ie):(s.classList.remove("dropup"),s.classList.add("dropdown"),y+=Ie,"cellMenu"===this._camelPluginName&&(y+=r?Ie:pe+Ie))}if(this._addonOptions.autoAlignSide||"left"===this._addonOptions.dropSide){const Ge=this.grid.getGridPosition();let Je=g+Number(q);r&&(Je+=a.clientWidth);const Xe=document.documentElement.clientWidth;"left"==(Je>=Ge.width||Je>=Xe?"left":"right")||!r&&"left"===this._addonOptions.dropSide?(s.classList.remove("dropright"),s.classList.add("dropleft"),g-="cellMenu"!==this._camelPluginName||r?Number(q)-Ve:Number(q)-M-Ve):(s.classList.remove("dropleft"),s.classList.add("dropright"),g+=r?Ve+a.offsetWidth:Ve)}s.style.top=`${y}px`,s.style.left=`${g}px`}}}class Kh extends zh{constructor(e,s,r){super(e,s,r),this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this.pluginName="CellMenu",this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(r.gridOptions.cellMenu)}init(e){this._addonOptions={...this._defaults,...e},this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){const e=this.sharedService?.gridOptions,s=this.sharedService.allColumns;e?.enableTranslate&&Array.isArray(s)&&s.forEach(r=>{if(r?.cellMenu&&(Array.isArray(r.cellMenu.commandItems)||Array.isArray(r.cellMenu.optionItems))){const a=r.cellMenu.commandItems||[],c=r.cellMenu.optionItems||[];r.cellMenu.commandTitleKey&&(r.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.cellMenu.commandTitleKey,"TEXT_COMMANDS")||r.cellMenu.commandTitle),r.cellMenu.optionTitleKey&&(r.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(r.cellMenu.optionTitleKey,"TEXT_COMMANDS")||r.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(a,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(c,"optionItems")}})}handleCellClick(e,s){this.disposeAllMenus();const r=this.grid.getCellFromEvent(e);if(r){const a=this.grid.getDataItem(r.row),c=this.grid.getColumns()[r.cell];c?.cellMenu&&!this.gridOptions.cellMenu?.activateCellOnMenuClick&&e.preventDefault(),this._addonOptions={...this._addonOptions,...c.cellMenu};const u=s||{};if(u.column=c,u.dataContext=a,u.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,u))return;this._menuElm=this.createParentMenu(e),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block",this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode")),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(e){e.forEach(s=>{s?.cellMenu?.commandItems&&this.extensionUtility.sortItems(s.cellMenu.commandItems||[],"positionOrder"),s?.cellMenu?.optionItems&&this.extensionUtility.sortItems(s.cellMenu.optionItems||[],"positionOrder")})}}class fg{constructor(e,s){this.grid=e,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._options=(0,A.deepMerge)(this._defaults,s)}get addonOptions(){return this._options}get addonElement(){return this._elem}destroy(){this.hide()}init(){}hide(){this._elem?.remove(),this._elem=null}show(e){this._elem||(this._elem=(0,A.createDomElement)("div",{className:this._options.selectionCssClass}),Object.keys(this._options.selectionCss).forEach(a=>{this._elem.style[a]=this._options.selectionCss[a]}),this._elem.style.position="absolute",this.grid.getActiveCanvasNode()?.appendChild(this._elem));const s=this.grid.getCellNodeBox(e.fromRow,e.fromCell),r=this.grid.getCellNodeBox(e.toRow,e.toCell);return s&&r&&this._options?.offset&&(this._elem.style.top=`${s.top+this._options.offset.top}px`,this._elem.style.left=`${s.left+this._options.offset.left}px`,this._elem.style.height=`${r.bottom-s.top+this._options.offset.height}px`,this._elem.style.width=`${r.right-s.left+this._options.offset.width}px`),this._elem}}class Yh{constructor(e){this.pluginName="CellRangeSelector",this._currentlySelectedRange=null,this._canvas=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.onBeforeCellRangeSelected=new ue("onBeforeCellRangeSelected"),this.onCellRangeSelecting=new ue("onCellRangeSelecting"),this.onCellRangeSelected=new ue("onCellRangeSelected"),this._eventHandler=new Fe,this._options=(0,A.deepMerge)(this._defaults,e)}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridUid(){return this._gridUid||(this._grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(e){this._grid=e,this._decorator=this._options.cellDecorator||new fg(e,this._options),this._canvas=e.getCanvasNode(),this._gridOptions=e.getOptions(),this._gridUid=e.getUID();const s=e.getPubSubService();s&&We.addSlickEventPubSubWhenDefined(s,this),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),(0,A.emptyElement)(this._activeCanvas),(0,A.emptyElement)(this._canvas),this._decorator?.destroy(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(e,s){const r=e?.touches?.[0]??e,a=this._activeViewport.scrollLeft,c=this._activeViewport.scrollTop,u=a+this._viewportWidth,g=c+this._viewportHeight,y=(0,A.getOffset)(this._activeViewport),M=y.left,L=y.top,q=M+this._viewportWidth,pe=L+this._viewportHeight,Ie={e,dd:s,viewport:{left:a,top:c,right:u,bottom:g,offset:{left:M,top:L,right:q,bottom:pe}},offset:{x:0,y:0},isOutsideViewport:!1};return r.pageX<M?Ie.offset.x=r.pageX-M:r.pageX>q&&(Ie.offset.x=r.pageX-q),r.pageY<L?Ie.offset.y=L-r.pageY:r.pageY>pe&&(Ie.offset.y=pe-r.pageY),Ie.isOutsideViewport=!!Ie.offset.x||!!Ie.offset.y,Ie}stopIntervalTimer(){this._autoScrollTimerId&&(window.clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(e,s){if(!this._dragging&&!this._gridOptions.enableRowMoveManager)return;this._gridOptions.enableRowMoveManager||e.stopImmediatePropagation();const r=e.getNativeEvent();if(this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(r,s),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(r,s)}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let e=0,s=0;this._autoScrollTimerId=window.setInterval(()=>{let r=!1,a=!1;this._draggingMouseOffset.offset.x?(e+=this.addonOptions.minIntervalToShowNextCell,r=e>=this._xDelayForNextCell):e=0,this._draggingMouseOffset.offset.y?(s+=this.addonOptions.minIntervalToShowNextCell,a=s>=this._yDelayForNextCell):s=0,(r||a)&&(r&&(e=0),a&&(s=0),this.handleDragToNewPosition(r,a))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(e,s){let r=this._draggingMouseOffset.e.pageX,a=this._draggingMouseOffset.e.pageY;const c=this._draggingMouseOffset.offset.x,u=this._draggingMouseOffset.offset.y,g=this._draggingMouseOffset.viewport.offset;e&&c&&(r=c>0?g.right+this._moveDistanceForOneCell.x:g.left-this._moveDistanceForOneCell.x),s&&u&&(a=u>0?g.top-this._moveDistanceForOneCell.y:g.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:r,pageY:a},this._draggingMouseOffset.dd)}handleDragTo(e,s){const r=e?.touches?.[0]??e,a=this._grid.getCellFromPoint(r.pageX-(0,A.getOffset)(this._activeCanvas).left+this._columnOffset,r.pageY-(0,A.getOffset)(this._activeCanvas).top+this._rowOffset);if(void 0!==a){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&a.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&a.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&a.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&a.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){const c=this._grid.getCellNodeBox(a.row,a.cell);if(c){const u=this._draggingMouseOffset.viewport;(c.left<u.left||c.right>u.right||c.top<u.top||c.bottom>u.bottom)&&this._grid.scrollCellIntoView(a.row,a.cell)}}if(!this._grid.canCellBeSelected(a.row,a.cell))return;if(s?.range){s.range.end=a;const c=new Ct(s.range.start.row??0,s.range.start.cell??0,a.row,a.cell);this._decorator.show(c),this.onCellRangeSelecting.notify({range:c})}}}handleDragEnd(e,s){this._decorator.hide(),this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),this.stopIntervalTimer(),this.onCellRangeSelected.notify({range:new Ct(s.range.start.row??0,s.range.start.cell??0,s.range.end.row,s.range.end.cell)}))}handleDragInit(e){this._activeCanvas=this._grid.getActiveCanvasNode(e),this._activeViewport=this._grid.getActiveViewportNode(e);const s=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-s.width,this._viewportHeight=this._activeViewport.offsetHeight-s.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){const c=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=document.querySelector(c)?.clientHeight??0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`)?.clientWidth??0);const r=this._grid.getCellFromEvent(e),a=this._grid.getActiveCell();(!this._grid.getEditorLock().isActive()||!a||!r||a.row!==r.row||a.cell!==r.cell)&&(e.stopImmediatePropagation(),e.preventDefault())}handleDragStart(e,s){const r=this._grid.getCellFromEvent(e);if(r&&!1!==this.onBeforeCellRangeSelected.notify(r).getReturnValue()&&this._grid.canCellBeSelected(r.row,r.cell)&&(this._dragging=!0,e.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();const a=(0,A.getOffset)(this._canvas);let c=s.startX-a.left;this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(c+=this._scrollLeft);let u=s.startY-a.top;this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(u+=this._scrollTop);const g=this._grid.getCellFromPoint(c,u);return s.range={start:g,end:{}},this._currentlySelectedRange=s.range,this._decorator.show(new Ct(g.row,g.cell))}handleScroll(e,s){this._scrollTop=s.scrollTop,this._scrollLeft=s.scrollLeft}}class oc{constructor(e){this.pluginName="CellSelectionModel",this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new ue("onSelectedRangesChanged"),this._eventHandler=new Fe,this._selector=void 0===e||void 0===e.cellRangeSelector?new Yh({selectionCss:{border:"2px solid black"}}):this._selector=e.cellRangeSelector,this._addonOptions=e}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(e){this._grid=e,e.hasDataView()&&(this._dataView=e.getData()),this._addonOptions={...this._defaults,...this._addonOptions};const s=e.getPubSubService();s&&this.onSelectedRangesChanged.setPubSubService(s),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),e.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),this._grid?.unregisterPlugin(this._selector),this._selector?.dispose()}getSelectedRanges(){return this._ranges}rangesAreEqual(e,s){let r=e.length!==s.length;if(!r)for(let a=0;a<e.length;a++)if(e[a].fromCell!==s[a].fromCell||e[a].fromRow!==s[a].fromRow||e[a].toCell!==s[a].toCell||e[a].toRow!==s[a].toRow){r=!0;break}return!r}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(e){const s=[];for(let r=0;r<e.length;r++){const a=e[r];this._grid.canCellBeSelected(a.fromRow,a.fromCell)&&this._grid.canCellBeSelected(a.toRow,a.toCell)&&s.push(a)}return s}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(e,s="SlickCellSelectionModel.setSelectedRanges"){if(!(this._ranges&&0!==this._ranges.length||e&&0!==e.length))return;const r=!this.rangesAreEqual(this._ranges,e);if(this._ranges=this.removeInvalidRanges(e),r){const a=new H(new CustomEvent("click",{detail:{caller:s}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,a)}}handleActiveCellChange(e,s){this._prevSelectedRow=void 0;const r=(0,A.isDefined)(s.cell),a=(0,A.isDefined)(s.row);this._addonOptions?.selectActiveCell&&a&&r?this.setSelectedRanges([new Ct(s.row,s.cell)]):(!this._addonOptions?.selectActiveCell||!a&&!r)&&this.setSelectedRanges([])}handleBeforeCellRangeSelected(e){const s=this._grid.getCellFromEvent(e),r=this._grid.getActiveCell();if(this._grid.getEditorLock().isActive()&&r&&s&&r.row===s.row&&r.cell===s.cell)return e.stopPropagation(),!1}handleCellRangeSelected(e,s){this._grid.setActiveCell(s.range.fromRow,s.range.fromCell,!1,!1,!0),this.setSelectedRanges([s.range])}isKeyAllowed(e){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].some(s=>s===e)}handleKeyDown(e){let s,r;const a=this._grid.getColumns().length,c=this._grid.getActiveCell();let u=0;if(u=this._dataView&&"getPagingInfo"in this._dataView?this._dataView?.getPagingInfo().pageSize||this._dataView.getLength():this._grid.getDataLength(),c&&(e.shiftKey||e.ctrlKey)&&!e.altKey&&this.isKeyAllowed(e.key)&&(s=this.getSelectedRanges().slice(),s.length||s.push(new Ct(c.row,c.cell)),r=s.pop(),"function"==typeof r?.contains)){r.contains(c.row,c.cell)||(r=new Ct(c.row,c.cell));let g=r.toRow-r.fromRow,y=r.toCell-r.fromCell;const M=c.row===r.fromRow?1:-1,L=c.cell===r.fromCell?1:-1,q=e.key.startsWith("Arrow");let pe,Ie=0;q&&!e.ctrlKey?("ArrowLeft"===e.key?y-=L:"ArrowRight"===e.key?y+=L:"ArrowUp"===e.key?g-=M:"ArrowDown"===e.key&&(g+=M),Ie=c.row+M*g):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this._grid.getViewportRowCount()),void 0===this._prevSelectedRow&&(this._prevSelectedRow=c.row),e.shiftKey&&!e.ctrlKey&&"Home"===e.key?(pe=0,Ie=c.row):e.shiftKey&&!e.ctrlKey&&"End"===e.key?(pe=a-1,Ie=c.row):e.ctrlKey&&e.shiftKey&&"Home"===e.key?(pe=0,Ie=0):e.ctrlKey&&e.shiftKey&&"End"===e.key?(pe=a-1,Ie=u-1):"PageUp"===e.key?(this._prevSelectedRow>=0&&(Ie=this._prevSelectedRow-this._cachedPageRowCount),Ie<0&&(Ie=0)):"PageDown"===e.key&&(this._prevSelectedRow<=u-1&&(Ie=this._prevSelectedRow+this._cachedPageRowCount),Ie>u-1&&(Ie=u-1)),this._prevSelectedRow=Ie),pe??=c.cell+L*y;const Ve=new Ct(c.row,c.cell,Ie,pe);if(this.removeInvalidRanges([Ve]).length){s.push(Ve);const Ge=M>0?Ve.toRow:Ve.fromRow,Je=L>0?Ve.toCell:Ve.fromCell;q?(this._grid.scrollRowIntoView(Ge),this._grid.scrollCellIntoView(Ge,Je,!1)):(this._grid.scrollRowIntoView(Ie),this._grid.scrollCellIntoView(Ie,Je,!1))}else s.push(r);this.setSelectedRanges(s),e.preventDefault(),e.stopPropagation(),this._prevKeyDown=e.key}}}class Kr{constructor(e){this.pluginName="RowSelectionModel",this._inHandler=!1,this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.onSelectedRangesChanged=new ue("onSelectedRangesChanged"),this._eventHandler=new Fe,this._options={...this._defaults,...e}}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()}init(e){this._grid=e,this._options={...this._defaults,...this._options},this._selector=this.addonOptions.cellRangeSelector;const s=e.getPubSubService();s&&this.onSelectedRangesChanged.setPubSubService(s),!this._selector&&this._options.dragToSelect&&(this._selector=new Yh({selectionCss:{border:"none"},autoScroll:this._options.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),this._selector?.destroy(),this._selector?.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(e,s="SlickRowSelectionModel.setSelectedRanges"){if(!(this._ranges&&0!==this._ranges.length||e&&0!==e.length))return;this._ranges=e;const r=new H(new CustomEvent("click",{detail:{caller:s}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,r)}getRowsRange(e,s){let r;const a=[];for(r=e;r<=s;r++)a.push(r);for(r=s;r<e;r++)a.push(r);return a}handleBeforeCellRangeSelected(e,s){let r=!1;if(this.gridOptions.enableRowMoveManager&&(r=this.isHandlerColumn(s.cell)??!1),this._grid.getEditorLock().isActive()||r)return e.stopPropagation(),!1;this._grid.setActiveCell(s.row,s.cell)}handleCellRangeSelected(e,s){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new Ct(s.range.fromRow,0,s.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(e,s){this._options.selectActiveRow&&null!==s.row&&this.setSelectedRanges([new Ct(s.row,0,s.row,this._grid.getColumns().length-1)])}handleClick(e){const s=this._grid.getCellFromEvent(e);if(!(s&&this._grid.canCellBeActive(s.row,s.cell)&&this.gridOptions.multiSelect&&(e.ctrlKey||e.shiftKey||e.metaKey)))return!1;let r=this.rangesToRows(this._ranges);const a=r.indexOf(s.row);if(-1===a&&(e.ctrlKey||e.metaKey))r.push(s.row),this._grid.setActiveCell(s.row,s.cell);else if(-1!==a&&(e.ctrlKey||e.metaKey))r=r.filter(u=>u!==s.row),this._grid.setActiveCell(s.row,s.cell);else if(r.length&&e.shiftKey){const u=r.pop(),g=Math.min(s.row,u),y=Math.max(s.row,u);r=[];for(let M=g;M<=y;M++)M!==u&&r.push(M);r.push(u),this._grid.setActiveCell(s.row,s.cell)}const c=this.rowsToRanges(r);return this.setSelectedRanges(c),e.stopImmediatePropagation(),!0}handleKeyDown(e){const s=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&s&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&("ArrowUp"===e.key||"ArrowDown"===e.key)){let r=this.getSelectedRows();r.sort((g,y)=>g-y),r.length||(r=[s.row]);let a,c=r[0],u=r[r.length-1];if(a="ArrowDown"===e.key?s.row<u||c===u?++u:++c:s.row<u?--u:--c,a>=0&&a<this._grid.getDataLength()){this._grid.scrollRowIntoView(a);const g=this.rowsToRanges(this.getRowsRange(c,u));this.setSelectedRanges(g)}e.preventDefault(),e.stopPropagation()}}isHandlerColumn(e){const r=this._grid.getColumns()[e].behavior||"";return/move|selectAndMove/.test(r)}rangesToRows(e){const s=[];for(let r=0;r<e.length;r++)for(let a=e[r].fromRow;a<=e[r].toRow;a++)s.push(a);return s}rowsToRanges(e){const s=[],r=this._grid.getColumns().length-1;return e.forEach(a=>s.push(new Ct(a,0,a,r))),s}}const Ra="mdi-icon-check",bl="mdi-icon-uncheck";class Xh{constructor(e,s){this.pubSubService=e,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,name:"",toolTip:"Select/Deselect All",width:30,reorderable:!1,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new St.P,this._eventHandler=new Fe,this._addonOptions={...this._defaults,...s}}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){return this._grid?.getOptions()??{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(e){this._selectedRowsLookup=e}init(e){this._grid=e,this._isUsingDataView=!Array.isArray(e.getData()),this._isUsingDataView&&(this._dataView=e.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(e.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(e.onClick,this.handleClick.bind(this)).subscribe(e.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&(this._eventHandler.subscribe(e.onAfterSetColumns,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this))),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(e),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new Kr(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&window.setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),"function"==typeof this._addonOptions.selectableOverride&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(e,s){if(this._addonOptions={...this._defaults,...s.checkboxSelector},Array.isArray(e)&&s){const r=this.getColumnDefinition();if(!e.some(a=>a.id===r.id)){const a=s?.checkboxSelector?.columnIndexPosition??0;a>0?e.splice(a,0,r):e.unshift(r),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){if(this._addonOptions={...this._addonOptions,...e},this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?(this.hideSelectAllFromColumnHeaderTitleRow(),this._addonOptions.name&&this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name,"")):(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{const s=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");if(s){s.style.display="flex",s.ariaChecked=String(this._isSelectAllChecked);const r=s.querySelector('input[type="checkbox"]');r&&(r.ariaChecked=String(this._isSelectAllChecked),r.checked=this._isSelectAllChecked)}}}deSelectRows(e){const s=[];for(const r of e)this._selectedRowsLookup[r]&&(s[s.length]=r);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(r=>s.indexOf(r)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(e){const s=[];for(const a of e)this._selectedRowsLookup[a]&&(s[s.length]=a);const r=this._grid.getSelectedRows()?.concat(s);this._grid.setSelectedRows(r)}createCheckboxElement(e,s=!1){const r=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment,a=(0,A.createDomElement)("label",{className:"checkbox-selector-label",htmlFor:e}),c=(0,A.createDomElement)("div",{className:"icon-checkbox-container"});return c.appendChild((0,A.createDomElement)("input",{id:e,type:"checkbox",checked:s,ariaChecked:String(s)})),c.appendChild((0,A.createDomElement)("div",{className:`mdi ${s?Ra:bl}`})),a.appendChild(c),r.appendChild(a),r}getColumnDefinition(){const e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?this._addonOptions.name||"":this.createCheckboxElement(`header-selector${this._selectAll_UID}`),toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:e,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,reorderable:this._addonOptions.reorderable,sortable:!1,width:this._addonOptions.width||30,maxWidth:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name||"","")}hideSelectAllFromColumnHeaderFilterRow(){const e=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(e){this.toggleRowSelectionWithEvent(null,e)}toggleRowSelectionWithEvent(e,s){const r=this._grid.getDataItem(s);if(!this.checkSelectableOverride(s,r,this._grid))return;const a=this._grid.getSelectedRows();"function"==typeof this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(e,{row:s,previousSelectedRows:a});const c=this._selectedRowsLookup[s]?this._grid.getSelectedRows().filter(u=>u!==s):this._grid.getSelectedRows().concat(s);this._grid.setSelectedRows(c,"click.toggle"),this._grid.setActiveCell(s,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(e,{row:s,previousSelectedRows:a})}selectableOverride(e){this._selectableOverride=e}addCheckboxToFilterHeaderRow(e){this._eventHandler.subscribe(e.onHeaderRowCellRendered,(s,r)=>{if(r.column.field===(this._addonOptions.field||"_checkbox_selector")){(0,A.emptyElement)(r.node);const a=`header-filter-selector${this._selectAll_UID}`,c=(0,A.createDomElement)("label",{id:"filter-checkbox-selectall-container",htmlFor:a}),u=(0,A.createDomElement)("div",{className:"icon-checkbox-container"});u.appendChild((0,A.createDomElement)("input",{id:a,type:"checkbox",ariaChecked:"false"})),u.appendChild((0,A.createDomElement)("div",{className:"mdi mdi-icon-uncheck"})),c.appendChild(u),r.node.appendChild(c),this._headerRowNode=r.node,this._headerRowNode.classList.add("checkbox-header"),this._bindEventService.bind(c,"click",g=>this.handleHeaderClick(g,r))}})}checkboxSelectionFormatter(e,s,r,a,c,u){if(c&&this.checkSelectableOverride(e,c,u)){const g=this.createUID()+e;return this.createCheckboxElement(`selector${g}`,!!this._selectedRowsLookup[e])}return null}checkSelectableOverride(e,s,r){return"function"!=typeof this._selectableOverride||this._selectableOverride(e,s,r)}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(null===this._checkboxColumnCellIndex){this._checkboxColumnCellIndex=0;const e=this._grid.getColumns();for(let s=0;s<e.length;s++)e[s].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=s)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){const e=this._dataView.getAllSelectedFilteredIds(),s=this._dataView.getFilteredItems();let r=0;if("function"==typeof this._selectableOverride&&e.length>0)for(let a=0;a<this._dataView.getItemCount();a++){const c=this._dataView.getItemByIdx(a),u=this._dataView.getIdPropertyName(),g=c[u];s.findIndex(M=>M[u]===g)>=0&&!this.checkSelectableOverride(a,c,this._grid)&&r++}if(this._isSelectAllChecked=e.length+r>=s.length,!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){const a=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`),c=this.headerRowNode?.querySelector(".icon-checkbox-container .mdi");a&&(a.ariaChecked=String(this._isSelectAllChecked),a.checked=this._isSelectAllChecked),c&&(c.className=`mdi ${this._isSelectAllChecked?Ra:bl}`)}}handleClick(e,s){if(this._grid.getColumns()[s.cell].id===this._addonOptions.columnId&&"checkbox"===e.target.type){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();this.toggleRowSelectionWithEvent(e,s.row),e.stopPropagation(),e.stopImmediatePropagation()}}handleHeaderClick(e,s){if(s.column.id===this._addonOptions.columnId&&"checkbox"===e.target.type){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();let r=e.target.checked;const a=r?"click.selectAll":"click.unselectAll",c=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(e,{previousSelectedRows:c,caller:a});let u=[];if(r){const g=[];for(let y=0;y<this._grid.getDataLength();y++){const M=this._grid.getDataItem(y);!M.__group&&!M.__groupTotals&&this.checkSelectableOverride(y,M,this._grid)&&g.push(y)}u=g,r=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){const g=[],y=this._dataView.getFilteredItems();for(let M=0;M<y.length;M++){const L=y[M];this.checkSelectableOverride(M,L,this._grid)&&g.push(L[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(g,{isRowBeingAdded:r})}this._grid.setSelectedRows(u,a),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(e,{rows:u,previousSelectedRows:c,caller:a}),e.stopPropagation(),e.stopImmediatePropagation()}}handleKeyDown(e,s){" "===e.key&&this._grid.getColumns()[s.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(e,s.row),e.preventDefault(),e.stopImmediatePropagation())}handleSelectedRowsChanged(){const e=this._grid.getSelectedRows(),s={};let r=0,a=0,c=0,u=0;if("function"==typeof this._selectableOverride)for(c=0;c<this._grid.getDataLength();c++){const y=this._grid.getDataItem(c);this.checkSelectableOverride(a,y,this._grid)||u++}const g=[];for(a=0;a<e.length;a++){r=e[a];const y=this._grid.getDataItem(r);this.checkSelectableOverride(a,y,this._grid)?(s[r]=!0,s[r]!==this._selectedRowsLookup[r]&&(this._grid.invalidateRow(r),delete this._selectedRowsLookup[r])):g.push(r)}if("object"==typeof this._selectedRowsLookup&&Object.keys(this._selectedRowsLookup).forEach(y=>{void 0!==y&&this._grid.invalidateRow(+y)}),this._selectedRowsLookup=s,this._grid.render(),this._isSelectAllChecked=(e?.length??0)+u>=this._grid.getDataLength(),!(this._isUsingDataView&&this._addonOptions.applySelectOnAllPages||(!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),this._addonOptions.hideInFilterHeaderRow))){const y=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`);y&&(y.ariaChecked=String(this._isSelectAllChecked),y.checked=this._isSelectAllChecked)}if(g.length>0){for(const y of g){const M=e.indexOf(y);e.splice(M,1)}this._grid.setSelectedRows(e,"click.toggle")}}renderSelectAllCheckbox(e){this._grid.updateColumnHeader(this._addonOptions.columnId||"",this.createCheckboxElement(`header-selector${this._selectAll_UID}`,!!e),this._addonOptions.toolTip)?.classList.add("header-checkbox-selectall")}}class rc extends rs{constructor(e,s,r,a,c){super(e,r,a),this.extensionUtility=e,this.filterService=s,this.pubSubService=r,this.sharedService=a,this.sortService=c,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:250,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:u=>(0,A.getHtmlStringOutput)(u.columnPickerLabel||u.name||"","innerHTML")},this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID()??"",this.onAfterMenuShow=new ue("onAfterMenuShow"),this.onBeforeMenuShow=new ue("onBeforeMenuShow"),this.onMenuClose=new ue("onMenuClose"),this.onCommand=new ue("onCommand"),this.onColumnsChanged=new ue("onColumnsChanged"),this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.grid?.getOptions()||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,Ls.bind(this)),this._eventHandler.subscribe(this.grid.onClick,e=>this.hideMenu(e)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(e,s)=>{s&&s.optionsBefore&&s.optionsAfter&&(s.optionsBefore.frozenColumn>=0&&-1===s.optionsAfter.frozenColumn||-1===s.optionsBefore.frozenColumn&&s.optionsAfter.frozenColumn>=0)&&this.recreateGridMenu()})}init(){this._gridUid=this.grid.getUID()??"",We.addSlickEventPubSubWhenDefined(this.pubSubService,this),this._userOriginalGridMenu={...this.sharedService.gridOptions.gridMenu},this._addonOptions={...this._defaults,...this.getDefaultGridMenuOptions(),...this.sharedService.gridOptions.gridMenu},this.sharedService.gridOptions.gridMenu=this._addonOptions;const e=this._userOriginalGridMenu.commandItems,s=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...s,...this.addGridMenuCustomCommands(s)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){this._bindEventService.unbindAll(),this._menuElm?.remove(),this._menuElm=null,this._gridMenuButtonElm?.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(dc.call(this,this._menuElm),this._listElm=(0,A.createDomElement)("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",cc.bind(this),void 0,"parent-menu"))}createGridMenu(){const e=this._gridUid?`.${this._gridUid}`:"",s=this._addonOptions?.menuWidth||this._defaults.menuWidth,r=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left",a=this.grid.getContainerNode();if(this._headerElm=a.querySelector(`.slick-header-${r}`),this._headerElm&&this._addonOptions){if(this._headerElm.style.width=`calc(100% - ${s}px)`,(this._addonOptions.resizeOnShowHeaderRow??this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){const g=a.querySelector(`${e} .slick-headerrow`);g&&(g.style.width=`calc(100% - ${s}px)`)}(this._addonOptions.showButton??this._defaults.showButton)&&(this._gridMenuButtonElm=(0,A.createDomElement)("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),this._addonOptions?.iconCssClass&&this._gridMenuButtonElm.classList.add(...(0,A.classNameToList)(this._addonOptions.iconCssClass)),this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement["preheader"===this._addonOptions.iconButtonContainer?"firstChild":"lastChild"]),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))),this.sharedService.gridOptions.gridMenu={...this._defaults,...this._addonOptions},this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(e,s=0,r){const a=r?.command;let c=1===s&&a?a.replace(/\s/g,""):"";c&&(this._subMenuParentId=c),s>1&&(c=this._subMenuParentId);const u=`${this.menuCssClass} slick-menu-level-${s} ${this._gridUid}`,g=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${s}${this.gridUidSelector}`);if(g){if(g.dataset.subMenuParent===c)return g;this.disposeSubMenus()}const y=(0,A.createDomElement)("div",{role:"menu",className:u,ariaLabel:s>1?"SubMenu":"Grid Menu"});s>0&&(y.classList.add("slick-submenu"),c&&(y.dataset.subMenuParent=c));const M={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:s};return this._commandMenuElm=this.recreateCommandList(e,y,M,r),s++,y}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(e){const s={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",s),("function"!=typeof this._addonOptions?.onMenuClose||!1!==this._addonOptions.onMenuClose(e,s))&&!1!==this.onMenuClose.notify(s,null,this).getReturnValue()){if(this._isMenuOpen=!1,"function"==typeof this.grid?.autosizeColumns){const r=this.grid.getUID()||"";this._areVisibleColumnDifferent&&r&&null!==document.querySelector(`.${r}`)&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(e,s,r,a){const c=e?.touches?.[0]??e,u=s.classList.contains("slick-submenu"),g=u?e.target.closest(".slick-menu-item"):c.target;if(g){const y=r||this._gridMenuButtonElm,M=(0,A.getOffset)(r),L=(0,A.getOffset)(g),q=a??this._addonOptions,pe=getComputedStyle(y),Ie=parseInt(pe?.width??this._defaults?.menuWidth,10),Ve=s?.offsetWidth??0,Ge=q?.contentMinWidth??this._defaults.contentMinWidth??0,Je=(Ge>Ve?Ge:Ve)||0,rt=M.right;let _e,qe;if(u?(qe=L.top,_e=L.left):(qe=M.top+y.offsetHeight,_e="right"===q?.dropSide?rt-Ie:rt-Je),u){const Gt=s?.clientHeight||0,{bottom:ii,top:Yn}=(0,A.calculateAvailableSpace)(g);"top"==(ii<Gt&&Yn>ii?"top":"bottom")?(s.classList.remove("dropdown"),s.classList.add("dropup"),qe-=Gt-g.clientHeight):(s.classList.remove("dropup"),s.classList.add("dropdown"))}const ft=this.grid.getGridPosition();let yt=_e+Number(Ve);u&&(yt+=g.clientWidth);const Bt=document.documentElement.clientWidth;"left"==(yt>=ft.width||yt>=Bt?"left":"right")||!u&&"left"===q?.dropSide?(s.classList.remove("dropright"),s.classList.add("dropleft"),u&&(_e-=Number(Ve))):(s.classList.remove("dropleft"),s.classList.add("dropright"),u&&(_e+=g.offsetWidth)),s.style.top=`${qe}px`,s.style.left=`${_e}px`,Ge>0&&(s.style.minWidth=`${Ge}px`),s.style.opacity="1",s.style.display="block"}}openGridMenu(){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(e,"target",{writable:!0,configurable:!0,value:(0,A.createDomElement)("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(e)}showGridMenu(e,s){const r=e?.touches?.[0]??e;if(e.preventDefault(),(0,A.emptyElement)(this._menuElm),this._menuElm?.remove(),this._addonOptions){const a={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},c={...this._addonOptions,...s};if(c&&!this.extensionUtility.runOverrideFunctionWhenExists(c.menuUsabilityOverride,a)||"function"==typeof e.stopPropagation&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",a),"function"==typeof c?.onBeforeMenuShow&&!1===c.onBeforeMenuShow(e,a)||!1===this.onBeforeMenuShow.notify(a,null,this).getReturnValue()))return;this._menuElm=this.createCommandMenu(this._addonOptions?.commandItems??[]),this.createColumnPickerContainer(),Ls.call(this),this._columnCheckboxes=[],ci.call(this,c),document.body.appendChild(this._menuElm),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm.style.opacity="0";const u=(void 0!==c?.marginBottom?c.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=(0,A.findWidthOrDefault)(c?.minHeight,""),void 0!==c?.height?this._menuElm.style.height=(0,A.findWidthOrDefault)(c.height,""):this._menuElm.style.maxHeight=(0,A.findWidthOrDefault)(c?.maxHeight,window.innerHeight-r.clientY-u+"px");let g="BUTTON"===e.target.nodeName?e.target:e.target.querySelector("button");g||(g=e.target.parentElement),this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm),this.repositionMenu(e,this._menuElm,g,c),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",a),"function"==typeof c?.onAfterMenuShow&&c.onAfterMenuShow(e,a),this.onAfterMenuShow.notify(a,null,this)}}translateGridMenu(){if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";const e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...e,...this.addGridMenuCustomCommands(e)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions?.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(e){e&&(e.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),e.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),e.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(e){const s=this.gridOptions.backendServiceApi||null,r=[],c=J(this.gridOptions),u=this._addonOptions?.commandLabels;if(this._addonOptions&&this.gridOptions){if(!this._addonOptions.hideClearFrozenColumnsCommand){const y="clear-pinning";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"mdi mdi-pin-off-outline",titleKey:`${c}${u?.clearFrozenColumnsCommandKey??"CLEAR_PINNING"}`,disabled:!1,command:y,positionOrder:52})}if(this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(!this._addonOptions.hideClearAllFiltersCommand){const y="clear-filter";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"mdi mdi-filter-remove-outline",titleKey:`${c}${u?.clearAllFiltersCommandKey??"CLEAR_ALL_FILTERS"}`,disabled:!1,command:y,positionOrder:50})}if(!this._addonOptions.hideToggleFilterCommand){const y="toggle-filter";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"mdi mdi-flip-vertical",titleKey:`${c}${u?.toggleFilterCommandKey??"TOGGLE_FILTER_ROW"}`,disabled:!1,command:y,positionOrder:53})}if(s&&!this._addonOptions.hideRefreshDatasetCommand){const y="refresh-dataset";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"mdi mdi-sync",titleKey:`${c}${u?.refreshDatasetCommandKey??"REFRESH_DATASET"}`,disabled:!1,command:y,positionOrder:58})}}if(!this._addonOptions.hideToggleDarkModeCommand){const y="toggle-dark-mode";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconToggleDarkModeCommand||"mdi mdi-brightness-4",titleKey:`${c}${u?.toggleDarkModeCommandKey??"TOGGLE_DARK_MODE"}`,disabled:!1,command:y,positionOrder:54})}if(this.gridOptions.showPreHeaderPanel&&!this._addonOptions.hideTogglePreHeaderCommand){const y="toggle-preheader";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"mdi mdi-flip-vertical",titleKey:`${c}${u?.togglePreHeaderCommandKey??"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:y,positionOrder:53})}if(this.gridOptions.enableSorting&&!this._addonOptions.hideClearAllSortingCommand){const y="clear-sorting";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"mdi mdi-sort-variant-off",titleKey:`${c}${u?.clearAllSortingCommandKey??"CLEAR_ALL_SORTING"}`,disabled:!1,command:y,positionOrder:51})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportCsvCommand){const y="export-csv";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"mdi mdi-download",titleKey:`${c}${u?.exportCsvCommandKey??"EXPORT_TO_CSV"}`,disabled:!1,command:y,positionOrder:55})}if(this.gridOptions.enableExcelExport&&!this._addonOptions.hideExportExcelCommand){const y="export-excel";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${c}${u?.exportExcelCommandKey??"EXPORT_TO_EXCEL"}`,disabled:!1,command:y,positionOrder:56})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportTextDelimitedCommand){const y="export-text-delimited";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||r.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${c}${u?.exportTextDelimitedCommandKey??"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:y,positionOrder:57})}const g=this._addonOptions?.commandItems||[];(Array.isArray(r)&&r.length>0||Array.isArray(g)&&g.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"))}return r}executeGridMenuInternalCustomCommands(e,s){const r=this.sharedService?.externalRegisteredResources||[];if(s?.command)switch(s.command){case"clear-pinning":const a=[...this.sharedService.visibleColumns],c={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(c),this.sharedService.gridOptions.frozenColumn=c.frozenColumn,this.sharedService.gridOptions.frozenRow=c.frozenRow,this.sharedService.gridOptions.frozenBottom=c.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=c.enableMouseWheelScrollHandler,Array.isArray(a)&&this.grid.setColumns(a),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":const g=r.find(Ie=>"TextExportService"===Ie.className);g?.exportToFile?g.exportToFile({delimiter:E.comma,format:j.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"export-excel":const y=r.find(Ie=>"ExcelExportService"===Ie.className);y?.exportToExcel?y.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");break;case"export-text-delimited":const M=r.find(Ie=>"TextExportService"===Ie.className);M?.exportToFile?M.exportToFile({delimiter:E.tab,format:j.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"toggle-dark-mode":const L=this.sharedService.gridOptions.darkMode;this.grid.setOptions({darkMode:!L}),this.sharedService.gridOptions.darkMode=!L;break;case"toggle-filter":let q=this.gridOptions?.showHeaderRow??!1;q=!q,this.grid.setHeaderRowVisibility(q),!0===q&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":this.grid.setPreHeaderPanelVisibility(!this.gridOptions?.showPreHeaderPanel);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset()}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"mdi mdi-menu",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(e){if(this.menuElement){let s=!1;const r=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||r)&&(s=!0),(this._isMenuOpen&&this.menuElement!==e.target&&!s&&!e.defaultPrevented||"close"===e.target.className&&r)&&this.hideMenu(e)}}handleMenuItemCommandClick(e,s,r,a=0){if("divider"!==r&&!r.disabled&&!r.divider)if(r.command&&!r.commandItems){const u={grid:this.grid,command:r.command,item:r,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(e,u),this.pubSubService.publish("onGridMenuCommand",u),"function"==typeof this._addonOptions?.onCommand&&this._addonOptions.onCommand(e,u),this.onCommand.notify(u,null,this),"function"==typeof r.action&&r.action.call(this,e,u),!this._addonOptions?.leaveOpen&&!e.defaultPrevented&&this.hideMenu(e),e.preventDefault(),e.stopPropagation()}else r.commandItems&&this.repositionSubMenu(e,r,a)}handleMenuItemMouseOver(e,s,r,a=0){"divider"!==r&&!r.disabled&&!r.divider&&(r.commandItems?this.repositionSubMenu(e,r,a):0===a&&this.disposeSubMenus())}recreateCommandList(e,s,r,a){const c=r.level||0;if(e.length>0){const u=(0,A.createDomElement)("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},s);if(0===c){this.populateCommandOrOptionTitle("command",this.addonOptions,u,c);const g=s.querySelector(".slick-command-header")??(0,A.createDomElement)("div",{className:"slick-command-header"});g.classList.add("with-close"),ac.call(this,g),u.appendChild(g)}return a&&c>0&&this.addSubMenuTitleWhenExists(a,u),this.populateCommandOrOptionItems("command",this._addonOptions,u,e,r,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),u}return null}repositionSubMenu(e,s,r){const c=this.createCommandMenu(s?.commandItems||[],r+1,s);c.style.display="block",document.body.appendChild(c),this.repositionMenu(e,c)}}const Na="mdi-icon-picker-check",lc="mdi-icon-picker-uncheck";function ac(d){const s=(0,A.createDomElement)("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"\xd7",dataset:{dismiss:this instanceof Tn?"slick-column-picker":"slick-grid-menu"}});d.appendChild(s)}function dc(d){const e=this;e.addonOptions?.columnTitle&&(e._columnTitleElm=(0,A.createDomElement)("div",{className:"slick-menu-title",textContent:e.addonOptions?.columnTitle??e._defaults.columnTitle},d))}function cc(d){const e=this,s=e instanceof Tn?"columnPicker":"gridMenu",a=d.target?.closest(".icon-checkbox-container")?.querySelector(".mdi"),c=!!d.target.checked;if(d.target.ariaChecked=String(c),Fa(a,c),"autoresize"===d.target.dataset.option){const u=e.getVisibleColumns();return e.grid.setOptions({forceFitColumns:c}),void e.grid.setColumns(u)}if("syncresize"!==d.target.dataset.option){if("checkbox"===d.target.type){e._areVisibleColumnDifferent=!0;const u=d.target.dataset.columnid||"",g=[];if(e._columnCheckboxes.forEach((L,q)=>{L.checked&&g.push(e.columns[q])}),!g.length)return d.target.checked=!0,void Fa(a,!0);if(e.grid.setColumns(g),(!e.sharedService.visibleColumns||Array.isArray(g)&&g.length!==e.sharedService.visibleColumns.length)&&(e.sharedService.visibleColumns=g),e.gridOptions.enableRowSelection&&c){const L=e.grid.getSelectedRows();e.grid.setSelectedRows(L)}const y=e.gridOptions.frozenColumn??-1;y>=0&&e.extensionUtility.readjustFrozenColumnIndexWhenNeeded(y,e.columns,g);const M={columnId:u,showing:c,allColumns:e.columns,visibleColumns:g,columns:g,grid:e.grid};e.pubSubService.publish(`on${(0,A.titleCase)(s)}ColumnsChanged`,M),"function"==typeof e.addonOptions?.onColumnsChanged&&e.addonOptions.onColumnsChanged(d,M),e.onColumnsChanged.notify(M,null,e)}}else e.grid.setOptions({syncColumnCellResize:c})}function Fa(d,e=!1){d&&(d.className=`mdi ${e?Na:lc}`)}function hc(d,e,s,r=!1){const a=(0,A.createDomElement)("label",{className:"checkbox-picker-label",htmlFor:e}),c=(0,A.createDomElement)("div",{className:"icon-checkbox-container"}),u=(0,A.createDomElement)("input",{id:e,type:"checkbox",dataset:s}),g=(0,A.createDomElement)("div",{className:`mdi ${r?Na:lc}`}),y=(0,A.createDomElement)("span",{className:"checkbox-label"});return c.appendChild(u),c.appendChild(g),a.appendChild(c),a.appendChild(y),d.appendChild(a),r&&(u.ariaChecked="true",u.checked=!0),{inputElm:u,labelElm:a,labelSpanElm:y}}function ci(d){const e=this,s=e instanceof rc?"gridmenu-":"";for(const r of e.columns){const a=r.id,c=document.createElement("li");r.excludeFromColumnPicker&&(c.className="hidden");const u=`${e._gridUid}-${s}colpicker-${a}`,g=e.grid.getColumnIndex(a)>=0,{inputElm:y,labelElm:M,labelSpanElm:L}=hc(c,u,{columnid:`${a}`},g);e._columnCheckboxes.push(y);const pe=("function"==typeof d?.headerColumnValueExtractor?d.headerColumnValueExtractor:e._defaults.headerColumnValueExtractor)(r,e.gridOptions);this.grid.applyHtmlCode(L,pe),c.appendChild(M),e._listElm.appendChild(c)}if((!d.hideForceFitButton||!d.hideSyncResizeButton)&&e._listElm.appendChild(document.createElement("hr")),!d?.hideForceFitButton){const r=document.createElement("li"),a=`${e._gridUid}-${s}colpicker-forcefit`,{labelSpanElm:c}=hc(r,a,{option:"autoresize"},e.gridOptions.forceFitColumns);c.textContent=d?.forceFitTitle??"",e._listElm.appendChild(r)}if(!d?.hideSyncResizeButton){const r=document.createElement("li"),a=`${e._gridUid}-${s}colpicker-syncresize`,{labelSpanElm:c}=hc(r,a,{option:"syncresize"},e.gridOptions.forceFitColumns);c.textContent=d?.syncResizeTitle??"",e._listElm.appendChild(r)}}function Ls(){const d=this,e=d.grid.getColumns().slice(0),s=new Array(d.columns.length);for(let r=0;r<s.length;r++)s[r]=void 0===d.grid.getColumnIndex(d.columns[r].id)?d.columns[r]:e.shift();d._columns=s}class Tn{constructor(e,s,r){this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:200,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:a=>(0,A.getHtmlStringOutput)(a.columnPickerLabel||a.name||"","innerHTML")},this._bindEventService=new St.P,this.onColumnsChanged=new ue("onColumnsChanged"),this._eventHandler=new Fe,this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID?.()??"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.sharedService.gridOptions??{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){this._gridUid=this.grid.getUID()??"",this.gridOptions.columnPicker={...this._defaults,...this.gridOptions.columnPicker},this.onColumnsChanged.setPubSubService(this.pubSubService),this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onPreHeaderContextMenu,e=>{["slick-column-name","slick-header-column"].some(s=>e.target?.classList.contains(s))&&this.handleHeaderContextMenu(e)}),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,Ls.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.disposeMenu.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){this._bindEventService.unbindAll("parent-menu"),this._listElm?.remove(),this._menuElm?.remove(),this._menuElm=null}createPickerMenu(){const e=(0,A.createDomElement)("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return Ls.call(this),dc.call(this,e),ac.call(this,e),this._listElm=(0,A.createDomElement)("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(e,"click",cc.bind(this),void 0,"parent-menu"),document.body.appendChild(e),e}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(e){(this._menuElm!==e.target&&!this._menuElm?.contains(e.target)||"close"===e.target.className&&e.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(e){e.preventDefault(),(0,A.emptyElement)(this._listElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),ci.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(e)}repositionMenu(e){const s=e?.touches?.[0]??e;this._menuElm&&(this._menuElm.style.top=s.pageY-10+"px",this._menuElm.style.left=s.pageX-10+"px",this._menuElm.style.minHeight=(0,A.findWidthOrDefault)(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=(0,A.findWidthOrDefault)(this.addonOptions.maxHeight,window.innerHeight-s.clientY+"px"),this._menuElm.style.display="block",this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm))}translateTitleLabels(e){e&&(e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}}const Rl=(d,e,s,r,a,c)=>{const u=r.params||{};if(!u.formatters||!Array.isArray(u.formatters))throw new Error('[Slickgrid-Universal] The multiple formatter requires the "formatters" to be provided as a column params.\n    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }');let y=s;return u.formatters.forEach((M,L)=>{if("function"!=typeof M)throw new Error(`[Slickgrid-Universal] the "params.formatters" at index(${L}) to be used by "Formatters.multiple" is invalid, please verify all formatter functions.`);y=M.call(void 0,d,e,y,r,a,c)}),y};function gg(d,e){if(Array.isArray(d))for(const s of d)if(s.editor)if(s.formatter&&s.formatter!==Rl&&s.formatter!==e){const r=s.formatter;s.formatter=Rl,s.params={...s.params,formatters:[r,e]}}else s.formatter&&s.formatter===Rl&&s.params?-1===s.params.formatters.findIndex(r=>r===e)&&(s.params.formatters=[...s.params.formatters,e]):s.formatter=e}function Bn(d,e,s,r){let a,c,u="",g="";switch(s){case"currency":a=V.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,c=V.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":a=V.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,c=V.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":a=V.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,c=V.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL}const y=e&&"function"==typeof e.getOptions?e.getOptions():{},M=Zs("minDecimal",d,y,a),L=Zs("maxDecimal",d,y,c),q=Zs("decimalSeparator",d,y,V.DEFAULT_NUMBER_DECIMAL_SEPARATOR),pe=Zs("thousandSeparator",d,y,V.DEFAULT_NUMBER_THOUSAND_SEPARATOR),Ie=Zs("displayNegativeNumberWithParentheses",d,y,V.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),Ve=Zs("currencyPrefix",d,y,""),Ge=Zs("currencySuffix",d,y,"");return"cell"===r&&(u=Zs("numberPrefix",d,y,""),g=Zs("numberSuffix",d,y,"")),{minDecimal:M,maxDecimal:L,decimalSeparator:q,thousandSeparator:pe,wrapNegativeNumber:Ie,currencyPrefix:Ve,currencySuffix:Ge,numberPrefix:u,numberSuffix:g}}function Zs(d,e,s,r){const a=e&&e.params;return a&&a.hasOwnProperty(d)?a[d]:s?.formatterOptions?.hasOwnProperty(d)?s.formatterOptions[d]:r}function Ln(d,e){const s=He(d,!0);return(r,a,c,u,g,y)=>{const L=(y&&"function"==typeof y.getOptions?y.getOptions():{})?.formatterOptions?.dateSeparator??e,pe=He(u?.type??p.date,!0),Ie=u?.params?.parseDateAsUtc??!1,Ve=Ke(c,pe);let Ge=c;if(Ve){let Je=c;Ie&&(Je=function De(d){return(0,be.so)(d,(0,be.cY)(d,"utc"))}(Ve)),Ge=(0,be.GP)(Je,s,"en-US")}if(Ge&&L!==e){const Je=new RegExp(e,"ig");Ge=Ge.replace(Je,L)}return Ge}}function Co(d,e,s,r,a,c){let u="",y=r.field||r.id||"";if("string"==typeof r.field&&r.field.indexOf(".")>0){const L=r.field.split(".");y=L.length>0?L[0]:r.field}const M=a?.hasOwnProperty(y)?a[y]:null;if("function"==typeof d){const L=d(e,s,M,r,a,c),q=(0,A.isPrimitiveOrHTML)(L)?L:L.html||L.text;u=(0,A.getHtmlStringOutput)(q)}else u=a?.hasOwnProperty(y)?M:"";return null==u&&(u=""),"object"==typeof u&&!(u instanceof Date)&&0===Object.entries(u).length&&(u=""),u}class ws extends zh{constructor(e,s,r,a){super(e,s,r),this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this.treeDataService=a,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(r.gridOptions.contextMenu)}init(e){this._addonOptions={...this._defaults,...e};const s=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...s,...this.addMenuCustomCommands(s)],this._addonOptions={...this._addonOptions},this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){const e=this.sharedService?.gridOptions??{},s=this.sharedService.gridOptions.contextMenu;if(s&&e?.enableTranslate){const r=s.commandItems||[],a=s.optionItems||[];s.commandTitleKey&&(s.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(s.commandTitleKey,"TEXT_COMMANDS")||s.commandTitle),s.optionTitleKey&&(s.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(s.optionTitleKey,"TEXT_COMMANDS")||s.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(r,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(a,"optionItems")}}handleOnContextMenu(e,s){this.disposeAllMenus();const r=this.grid.getCellFromEvent(e);if(r){const a=this.grid.getDataItem(r.row),c=this.grid.getColumns()[r.cell],u=s||{};if(u.cell=r.cell,u.row=r.row,u.column=c,u.dataContext=a,u.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,u))return;this._menuElm=this.createParentMenu(e),this._menuElm&&e.preventDefault(),this._menuElm&&this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(e){const s=[],r=this.sharedService&&this.sharedService.gridOptions||{},a=r?.contextMenu,c=this.sharedService?.dataView,u=J(r);if(a&&!a.hideCopyCellValueCommand){const g="copy";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconCopyCellValueCommand||"mdi mdi-content-copy",titleKey:`${u}COPY`,disabled:!1,command:g,positionOrder:50,action:(y,M)=>{this.copyToClipboard(M)},itemUsabilityOverride:y=>{const M=y?.column,L=y?.dataContext;if("function"==typeof M.queryFieldNameGetterFn){const q=U(M,L,"");if(""!==q&&void 0!==q)return!0}else if(M&&L.hasOwnProperty(M.field))return""!==L[M.field]&&null!=L[M.field];return!1}})}if(r?.enableTextExport&&a&&!a.hideExportCsvCommand){const g="export-csv";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconExportCsvCommand||"mdi mdi-download",titleKey:`${u}EXPORT_TO_CSV`,disabled:!1,command:g,positionOrder:51,action:()=>{const M=(this.sharedService?.externalRegisteredResources||[]).find(L=>"TextExportService"===L.className);if(!M?.exportToFile)throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");M.exportToFile({delimiter:E.comma,format:j.csv})}})}if(r&&r.enableExcelExport&&a&&!a.hideExportExcelCommand){const g="export-excel";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${u}EXPORT_TO_EXCEL`,disabled:!1,command:g,positionOrder:52,action:()=>{const M=(this.sharedService?.externalRegisteredResources||[]).find(L=>"ExcelExportService"===L.className);if(!M?.exportToExcel)throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");M.exportToExcel()}})}if(r?.enableTextExport&&a&&!a.hideExportTextDelimitedCommand){const g="export-text-delimited";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${u}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:g,positionOrder:53,action:()=>{const M=(this.sharedService?.externalRegisteredResources||[]).find(L=>"TextExportService"===L.className);if(!M?.exportToFile)throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");M.exportToFile({delimiter:E.tab,format:j.txt})}})}if(r&&(r.enableGrouping||r.enableDraggableGrouping||r.enableTreeData)){if(a&&!a.hideCopyCellValueCommand&&s.push({divider:!0,command:"",positionOrder:54}),r&&!r.enableTreeData&&a&&!a.hideClearAllGrouping){const g="clear-grouping";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconClearGroupingCommand||"mdi mdi-close",titleKey:`${u}CLEAR_ALL_GROUPING`,disabled:!1,command:g,positionOrder:55,action:()=>{c.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{const y=c&&c.getGrouping&&c.getGrouping();return Array.isArray(y)&&y.length>0}})}if(r&&a&&!a.hideCollapseAllGroups){const g="collapse-all-groups";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconCollapseAllGroupsCommand||"mdi mdi-arrow-collapse",titleKey:`${u}COLLAPSE_ALL_GROUPS`,disabled:!1,command:g,positionOrder:56,action:()=>{r.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):c.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(r.enableTreeData)return!0;const y=c&&c.getGrouping&&c.getGrouping();return Array.isArray(y)&&y.length>0}})}if(r&&a&&!a.hideExpandAllGroups){const g="expand-all-groups";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||s.push({iconCssClass:a.iconExpandAllGroupsCommand||"mdi mdi-arrow-expand",titleKey:`${u}EXPAND_ALL_GROUPS`,disabled:!1,command:g,positionOrder:57,action:()=>{r.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):c.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(r.enableTreeData)return!0;const y=c&&c.getGrouping&&c.getGrouping();return Array.isArray(y)&&y.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(s),s}copyToClipboard(e){try{if(e&&e.grid&&e.command){const s=this.sharedService?.gridOptions??{},r=e?.cell??0,a=e?.row??0,c=e?.column,u=e?.dataContext,g=this.sharedService?.slickGrid;let M=function Jh(d,e,s,r,a,c){let g,u=!1;s?.hasOwnProperty("exportWithFormatter")?u=!!s.exportWithFormatter:c?.hasOwnProperty("exportWithFormatter")&&(u=!!c.exportWithFormatter),r&&s.exportCustomFormatter?g=s.exportCustomFormatter:u&&s.formatter&&(g=s.formatter);const y=Co(g,d,e,s,r,a);return c?.sanitizeDataExport&&"string"==typeof y?(0,A.stripTags)(y):y}(a,r,c,u,g,s&&(s.excelExportOptions||s.textExportOptions));"function"==typeof c.queryFieldNameGetterFn&&(M=U(c,u,""));let L=M;"string"==typeof M&&(L=M.replace(/^([\xb7|\u2b9e|\u2b9f]\s*)|([\xb7|\u2b9e|\u2b9f])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());const q=document.createElement("textarea");q&&document.body&&(q.style.position="absolute",q.style.opacity="0",q.value=L,document.body.appendChild(q),q.select(),document.execCommand("copy",!1,L)&&q.remove())}}catch{}}sortMenuItems(){const e=this.sharedService?.gridOptions?.contextMenu;e&&(this.extensionUtility.sortItems(e.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(e.optionItems||[],"positionOrder"))}}class mg{constructor(e,s,r){this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._gridColumns=[],this._gridUid="",this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this._bindingEventService=new St.P,this.onGroupChanged=new ue("onGroupChanged"),this._eventHandler=new Fe}get addonOptions(){return this._addonOptions}get dataView(){return this.grid?.getData()??{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){return this._grid??this.sharedService.slickGrid??{}}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridContainer(){return this.grid.getContainerNode()}init(e,s){if(this._addonOptions={...this._defaults,...s},this._grid=e,e){if(this._gridUid=e.getUID(),this._gridColumns=e.getColumns(),this._dropzoneElm=e.getTopHeaderPanel()||e.getPreHeaderPanel(),this._dropzoneElm.classList.add("slick-dropzone"),this.onGroupChanged.setPubSubService(this.pubSubService),!this._addonOptions.hideToggleAllButton){this._groupToggler=(0,A.createDomElement)("div",{className:"slick-group-toggle-all",title:this._addonOptions.toggleAllPlaceholderText??"",style:{display:"none"}});const r=(0,A.createDomElement)("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=this._addonOptions.toggleAllPlaceholderText??"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild((0,A.createDomElement)("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(r,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(r,!1,!1)))}this._dropzonePlaceholderElm=(0,A.createDomElement)("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&this._addonOptions?.dropPlaceHolderTextKey&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=this._addonOptions?.dropPlaceHolderText??this._defaults.dropPlaceHolderText??"",this.setupColumnDropbox(),this._eventHandler.subscribe(e.onHeaderCellRendered,(r,a)=>{const c=a.node;if(!(0,A.isEmptyObject)(a.column?.grouping)&&c&&(c.style.cursor="pointer",this._addonOptions.groupIconCssClass)){const u=(0,A.createDomElement)("span",{className:"slick-column-groupable"},c);this._addonOptions.groupIconCssClass&&u.classList.add(...(0,A.classNameToList)(this._addonOptions.groupIconCssClass))}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(const r of this._gridColumns)e.updateColumnHeader(r.field)}return this}dispose(){this.destroySortableInstances(),this._droppableInstance?.el&&this._droppableInstance?.destroy(),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),(0,A.emptyElement)(this.gridContainer.querySelector(`.${this.gridUid} .slick-preheader-panel,.${this.gridUid} .slick-topheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");const e=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(const s of Array.from(e))this._dropzoneElm.querySelector(".slick-groupby-remove")?.remove(),s?.remove();this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){this._sortableLeftInstance?.el&&this._sortableLeftInstance?.destroy(),this._sortableRightInstance?.el&&this._sortableRightInstance?.destroy()}setAddonOptions(e){this._addonOptions={...this._addonOptions,...e}}setColumns(e){this._gridColumns=e}setDroppedGroups(e){this._dropzonePlaceholderElm.style.display="none";const s=Array.isArray(e)?e:[e];for(const r of s){const a=this.grid.getHeaderColumn(r);this.handleGroupByDrop(this._dropzoneElm,a)}}setupColumnReorder(e,s,r,a,c,u,g,y,M){this.destroySortableInstances();const L=e.getTopHeaderPanel()||e.getPreHeaderPanel(),q=L.querySelector(".slick-draggable-dropzone-placeholder"),pe=L.querySelector(".slick-group-toggle-all"),Ie={animation:50,chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:()=>{q&&(q.style.display="inline-block"),L.querySelectorAll(".slick-dropped-grouping").forEach(Ge=>Ge.style.display="none"),pe&&(pe.style.display="none")},onEnd:Ve=>{L?.classList.remove("slick-dropzone-hover"),q?.parentElement?.classList.remove("slick-dropzone-placeholder-hover");const Ge=L.querySelectorAll(".slick-dropped-grouping");if(Ge.forEach(_e=>_e.style.display="flex"),Ge.length&&(q&&(q.style.display="none"),pe&&(pe.style.display="inline-flex")),!e.getEditorLock().commitCurrentEdit())return;const Je=this.sortableLeftInstance?.toArray()??[];if(s.length>1){const _e=this._sortableRightInstance?.toArray()??[];for(const qe of _e)Je.push(qe)}const Xe=[],rt=e.getColumns();for(const _e of Je)Xe.push(rt[g.call(e,_e)]);a.call(e,Xe),M.call(e,e.onColumnsReordered,{grid:e,impactedColumns:Xe}),Ve.stopPropagation(),c.call(e)}};return this._sortableLeftInstance=Ns.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-left`),Ie),this._sortableRightInstance=Ns.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-right`),Ie),{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(e){this.columnsGroupBy.push(e),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(e,s,r,a){this._bindingEventService.bind(s,"click",()=>{const c=this._bindingEventService.boundedEvents.filter(u=>u.element===s);for(const u of c)this._bindingEventService.unbind(u.element,"click",u.listener);this.removeGroupBy(e,r,a)})}addGroupSortClickHandler(e,s){const{grouping:r,type:a}=e;this._bindingEventService.bind(s,"click",()=>{if(this.toggleGroupAll(e,!1),r){const c=r.sortAsc?N.desc:N.asc;r.comparer=(u,g)=>gt(a||"text",u.value,g.value,c,e,this.gridOptions),this.getGroupBySortIcon(s,!r.sortAsc),this.updateGroupBy("sort-group"),r.sortAsc=!r.sortAsc,this.grid.invalidate()}})}getGroupBySortIcon(e,s=!0){s?this._addonOptions.sortAscIconCssClass?(e.classList.remove(...(0,A.classNameToList)(this._addonOptions.sortDescIconCssClass)),e.classList.add(...(0,A.classNameToList)(this._addonOptions.sortAscIconCssClass))):(e.classList.add("slick-groupby-sort-asc-icon"),e.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(e.classList.remove(...(0,A.classNameToList)(this._addonOptions.sortAscIconCssClass)),e.classList.add(...(0,A.classNameToList)(this._addonOptions.sortDescIconCssClass))):this._addonOptions.sortDescIconCssClass||(e.classList.add("slick-groupby-sort-desc-icon"),e.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(e,s){const r=s.getAttribute("data-id")?.replace(this._gridUid,"");let a=!0;for(const c of this.columnsGroupBy)c.id===r&&(a=!1);if(a){for(const c of this._gridColumns)if(c.id===r&&c.grouping&&!(0,A.isEmptyObject)(c.grouping)){const u=s.querySelector(".slick-column-name"),g=(0,A.createDomElement)("div",{id:`${this._gridUid}_${c.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${c.id}`}});(0,A.createDomElement)("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:u?u.textContent:s.textContent},g);const y=(0,A.createDomElement)("div",{className:"slick-groupby-remove"});let M;this._addonOptions.deleteIconCssClass&&y.classList.add(...(0,A.classNameToList)(this._addonOptions.deleteIconCssClass)),this._addonOptions.deleteIconCssClass||y.classList.add("slick-groupby-remove-icon"),!0!==this._addonOptions?.hideGroupSortIcons&&c.sortable&&(void 0===c.grouping?.sortAsc&&(c.grouping.sortAsc=!0),M=(0,A.createDomElement)("div",{className:"slick-groupby-sort"},g),this.getGroupBySortIcon(M,c.grouping.sortAsc)),g.appendChild(y),g.appendChild(document.createElement("div")),e.appendChild(g),this._groupToggler&&0===this.columnsGroupBy.length&&this.toggleGroupAll(c),this.addColumnGroupBy(c),this.addGroupByRemoveClickHandler(c.id,y,s,g),M&&this.addGroupSortClickHandler(c,M)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-flex")}}toggleGroupAll({grouping:e},s){const r=this._groupToggler?.querySelector(".slick-group-toggle-all-icon");!0===s||e?.collapsed?(r?.classList.add("collapsed"),r?.classList.remove("expanded")):(r?.classList.add("expanded"),r?.classList.remove("collapsed"))}removeFromArray(e,s){if(Array.isArray(e)){const r=e.findIndex(a=>a.id===s.id);r>=0&&e.splice(r,1)}return e}removeGroupBy(e,s,r){r.remove();const a=[];this._gridColumns.forEach(c=>a[c.id]=c),this.removeFromArray(this.columnsGroupBy,a[e]),0===this.columnsGroupBy.length&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){const e=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");e&&this._dropzoneElm&&(this._bindingEventService.bind(e,"dragover",s=>s.preventDefault()),this._bindingEventService.bind(e,"dragenter",()=>this._dropzoneElm.classList.add("slick-dropzone-hover")),this._bindingEventService.bind(e,"dragleave",()=>this._dropzoneElm.classList.remove("slick-dropzone-hover")))}setupColumnDropbox(){const e=this._dropzoneElm;this._droppableInstance=Ns.create(e,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:s=>{const r=s.item;r.getAttribute("id")?.replace(this._gridUid,"")&&this.handleGroupByDrop(e,Ns.utils.clone(s.item)),r.parentNode?.removeChild(r)},onUpdate:()=>{const s=this._droppableInstance?.toArray()??[],r=[];for(const a of s)for(const c of this.columnsGroupBy)if(c.id===a){r.push(c);break}this.columnsGroupBy=r,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",s=>{const r=s.target.classList.contains("slick-group-toggle-all-icon")?s.target:s.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(r,r?.classList.contains("expanded"))})}toggleGroupToggler(e,s=!0,r=!0){e&&(!0===s?(e.classList.add("collapsed"),e.classList.remove("expanded"),r&&this.dataView.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),r&&this.dataView.expandAllGroups()))}updateGroupBy(e){if(0===this.columnsGroupBy.length)return this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",void this.triggerOnGroupChangedEvent({caller:e,groupColumns:[]});const s=[];this.columnsGroupBy.forEach(r=>s.push(r.grouping)),this.dataView.setGrouping(s),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:e,groupColumns:s})}triggerOnGroupChangedEvent(e){this._addonOptions&&"function"==typeof this._addonOptions.onGroupChanged&&this._addonOptions.onGroupChanged(new H,e),this.onGroupChanged.notify(e)}}class uc extends rs{constructor(e,s,r){super(e,s,r),this.extensionUtility=e,this.pubSubService=s,this.sharedService=r,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new St.P,this._eventHandler=new Fe,this.init(r.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(e=>e.remove())}handleHeaderCellRendered(e,s){const r=s.column;if(r.header?.buttons&&Array.isArray(r.header.buttons)){let a=r.header.buttons.length;for(;a--;){const c=r.header.buttons[a],u=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,c,s,this.handleButtonClick.bind(this));u&&c.handler&&!c.disabled&&this._bindEventService.bind(u,"click",g=>c.handler.call(this,g)),u&&(this._buttonElms.push(u),s.node.appendChild(u))}}}handleBeforeHeaderCellDestroy(e,s){if(s.column.header?.buttons&&this._addonOptions?.buttonCssClass){const a=(this._addonOptions?.buttonCssClass||"").replace(/(\s+)/g,".");a&&s.node.querySelectorAll(`.${a}`).forEach(c=>c.remove())}}handleButtonClick(e,s,r,a,c){if(r.command&&!r.disabled){const u=r.command||"",g={grid:this.grid,column:c,button:r};u&&(g.command=u),"function"==typeof r.action&&!r.disabled&&r.action.call(this,e,g),null!==u&&!r.disabled&&this._addonOptions?.onCommand&&(this.pubSubService.publish("onHeaderButtonCommand",g),this._addonOptions.onCommand(e,g),c?.id&&this.grid.updateColumnHeader(c.id))}e.preventDefault(),e.stopPropagation()}}class La extends rs{constructor(e,s,r,a,c){super(e,r,a),this.extensionUtility=e,this.filterService=s,this.pubSubService=r,this.sharedService=a,this.sortService=c,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(a.gridOptions.headerMenu)}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(s,r)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(r.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),this._menuElm?.remove(),this._activeHeaderColumnElm=void 0}hideColumn(e){if(this.sharedService?.slickGrid?.getColumnIndex){const s=this.sharedService.slickGrid.getColumnIndex(e.id),r=this.sharedService.slickGrid.getColumns(),a=this.sharedService.gridOptions.frozenColumn??-1;a>=0&&a>=s&&(this.sharedService.gridOptions.frozenColumn=a-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));const c=(0,A.arrayRemoveItemByIndex)(r,s);this.sharedService.visibleColumns=c,this.sharedService.slickGrid.setColumns(c),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:c,hiddenColumn:e})}}hideMenu(){this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=void 0}repositionSubMenu(e,s,r,a){const c=this.createCommandMenu(s.commandItems||[],a,r+1,s);document.body.appendChild(c),this.repositionMenu(e,c)}repositionMenu(e,s){const r=e.target,a=s.classList.contains("slick-submenu"),c=a?e.target.closest(".slick-menu-item"):r,u=(0,A.getOffsetRelativeToParent)(this.sharedService.gridContainerElement,r),g=this.grid.getGridPosition(),y=s.offsetWidth,M=(0,A.getOffset)(c);let L=a?M.left:u?.left??0,q=a?M.top:(u?.top??0)+(this.addonOptions?.menuOffsetTop??0)+r.clientHeight;if(a){const pe=s?.clientHeight||0,{bottom:Ie,top:Ve}=(0,A.calculateAvailableSpace)(c);"top"==(Ie<pe&&Ve>Ie?"top":"bottom")?(s.classList.remove("dropdown"),s.classList.add("dropup"),q-=pe-c.clientHeight):(s.classList.remove("dropup"),s.classList.add("dropdown"))}if(a&&c){const pe=L+Number(y)+c.clientWidth,Ie=document.documentElement.clientWidth;"left"==(pe>=g.width||pe>=Ie?"left":"right")?(s.classList.remove("dropright"),s.classList.add("dropleft"),L-=y):(s.classList.remove("dropleft"),s.classList.add("dropright"),L+=c.offsetWidth)}else L=u?.left??0,this.addonOptions.autoAlign&&g?.width&&L+(s.clientWidth??0)>=g.width&&(L=L+r.clientWidth-s.clientWidth+(this.addonOptions?.autoAlignOffset||0));s.style.top=`${q}px`,s.style.left=`${L}px`}translateHeaderMenu(){this.sharedService.gridOptions?.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(e,s){const a=s.column.header?.menu;if(a&&s.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,s))return;const c=(0,A.createDomElement)("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},s.node);this.addonOptions.buttonCssClass&&c.classList.add(...(0,A.classNameToList)(this.addonOptions.buttonCssClass)),this.addonOptions.tooltip&&(c.title=this.addonOptions.tooltip),this._bindEventService.bind(c,"click",u=>{this.disposeAllMenus(),this.createParentMenu(u,s.column,a)})}}handleBeforeHeaderCellDestroy(e,s){s.column.header?.menu&&s.node.querySelectorAll(".slick-header-menu-button").forEach(a=>a.remove())}handleBodyMouseDown(e){if(this.menuElement){let s=!1;const r=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||r)&&(s=!0),(this._menuElm!==e.target&&!s&&!e.defaultPrevented||"close"===e.target.className&&r)&&this.hideMenu()}}handleMenuItemCommandClick(e,s,r,a=0,c){if("divider"!==r&&!r.disabled&&!r.divider)if(r.command&&!r.commandItems){const g={grid:this.grid,command:r.command,column:c,item:r};this.executeHeaderMenuInternalCommands(e,g),this.pubSubService.publish("onHeaderMenuCommand",g),"function"==typeof this.addonOptions?.onCommand&&this.addonOptions.onCommand(e,g),"function"==typeof r.action&&r.action.call(this,e,g),e.defaultPrevented||this.hideMenu(),e.preventDefault(),e.stopPropagation()}else r.commandItems&&this.repositionSubMenu(e,r,a,c)}handleMenuItemMouseOver(e,s,r,a=0,c){"divider"!==r&&!r.disabled&&!r.divider&&(r.commandItems?this.repositionSubMenu(e,r,a,c):0===a&&this.disposeSubMenus())}addHeaderMenuCustomCommands(e){const s=this.sharedService.gridOptions,r=s.headerMenu||{},a=J(s);return Array.isArray(e)&&s.enableHeaderMenu&&e.forEach(c=>{if(c&&!c.excludeFromHeaderMenu){c.header?c.header.menu||(c.header.menu={commandItems:[]}):c.header={menu:{commandItems:[]}};const u=c?.header?.menu?.commandItems??[];let g=!1;if(r&&!r.hideFreezeColumnsCommand&&(g=!0,u.some(y=>"divider"!==y&&"freeze-columns"===y?.command)||u.push({iconCssClass:r.iconFreezeColumns||"mdi mdi-pin-outline",titleKey:`${a}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:45})),r&&!r.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(g=!0,u.some(y=>"divider"!==y&&"column-resize-by-content"===y?.command)||u.push({iconCssClass:r.iconColumnResizeByContentCommand||"mdi mdi-arrow-expand-horizontal",titleKey:`${a}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:47})),g&&!u.some(y=>"divider"!==y&&48===y.positionOrder)&&u.push({divider:!0,command:"",positionOrder:48}),s.enableSorting&&c.sortable&&r&&!r.hideSortCommands&&(u.some(y=>"divider"!==y&&"sort-asc"===y?.command)||u.push({iconCssClass:r.iconSortAscCommand||"mdi mdi-sort-ascending",titleKey:`${a}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),u.some(y=>"divider"!==y&&"sort-desc"===y?.command)||u.push({iconCssClass:r.iconSortDescCommand||"mdi mdi-sort-descending",titleKey:`${a}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),u.some(y=>"divider"!==y&&52===y.positionOrder)||u.push({divider:!0,command:"",positionOrder:52}),!r.hideClearSortCommand&&!u.some(y=>"divider"!==y&&"clear-sort"===y?.command)&&u.push({iconCssClass:r.iconClearSortCommand||"mdi mdi-sort-variant-off",titleKey:`${a}REMOVE_SORT`,command:"clear-sort",positionOrder:58})),c.filter?.filterShortcuts&&!u.some(y=>"divider"!==y&&"filter-shortcuts-root-menu"===y?.command)){const y=[];c.filter.filterShortcuts.forEach(L=>{const q=L.title?(0,A.toKebabCase)(L.title):(L.titleKey||"").toLowerCase().replaceAll("_","-");y.push({...L,command:q,action:(pe,Ie)=>{this.filterService.getFiltersMetadata().find(Ge=>Ge.columnDef.id===Ie.column.id)?.setValues(L.searchTerms,L.operator,!0)}})});const M=r.filterShortcutsPositionOrder??55;u.push({iconCssClass:r.iconFilterShortcutSubMenu||"mdi mdi-filter-outline",titleKey:`${a}FILTER_SHORTCUTS`,command:"filter-shortcuts-root-menu",positionOrder:M,commandItems:y}),g&&!u.some(L=>"divider"!==L&&L.positionOrder===M+1)&&u.push({divider:!0,command:"",positionOrder:M+1})}s.enableFiltering&&c.filterable&&r&&!r.hideFilterCommand&&!r.hideClearFilterCommand&&!u.some(y=>"divider"!==y&&"clear-filter"===y?.command)&&u.push({iconCssClass:r.iconClearFilterCommand||"mdi mdi-filter-remove-outline",titleKey:`${a}REMOVE_FILTER`,command:"clear-filter",positionOrder:57}),r&&!r.hideColumnHideCommand&&!u.some(y=>"divider"!==y&&"hide-column"===y?.command)&&u.push({iconCssClass:r.iconColumnHideCommand||"mdi mdi-close",titleKey:`${a}HIDE_COLUMN`,command:"hide-column",positionOrder:59}),this.extensionUtility.translateMenuItemsFromTitleKey(u),this.extensionUtility.sortItems(u,"positionOrder")}}),r}clearColumnFilter(e,s){s?.column&&this.filterService.clearFilterByColumnId(e,s.column.id)}clearColumnSort(e,s){s?.column&&this.sharedService&&this.sortService.clearSortByColumnId(e,s.column.id)}executeHeaderMenuInternalCommands(e,s){if(s?.command)switch(s.command){case"hide-column":this.hideColumn(s.column),this.sharedService.gridOptions?.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,s);break;case"clear-sort":this.clearColumnSort(e,s);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:s.column.id});break;case"freeze-columns":const r=[...this.sharedService.visibleColumns],c={frozenColumn:r.findIndex(M=>M.id===s.column.id),enableMouseWheelScrollHandler:!0},u=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(c,!1,!0),this.sharedService.gridOptions.frozenColumn=c.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=c.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=s.column.id,this.sharedService.hasColumnsReordered||Array.isArray(r)&&Array.isArray(this.sharedService.allColumns)&&r.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(r):this.sharedService.slickGrid.setColumns(u),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":this.sortColumn(e,s,"sort-asc"===s.command)}}createParentMenu(e,s,r){const a={grid:this.grid,column:s,menu:r};"function"==typeof e.stopPropagation&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",a),"function"==typeof this.addonOptions?.onBeforeMenuShow&&!1===this.addonOptions?.onBeforeMenuShow(e,a))||(this._menuElm=this.createCommandMenu(r.commandItems,s),this.grid.getContainerNode()?.appendChild(this._menuElm),this.repositionMenu(e,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",a),("function"!=typeof this.addonOptions?.onAfterMenuShow||!1!==this.addonOptions?.onAfterMenuShow(e,a))&&(e.preventDefault(),e.stopPropagation()))}createCommandMenu(e,s,r=0,a){const c=a?.command;let u=1===r&&c?c.replace(/\s/g,""):"";u&&(this._subMenuParentId=u),r>1&&(u=this._subMenuParentId);const g=`${this.menuCssClass} slick-menu-level-${r} ${this.gridUid}`,y=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${r}${this.gridUidSelector}`);if(y){if(y.dataset.subMenuParent===u)return y;this.disposeSubMenus()}const M=(0,A.createDomElement)("div",{ariaExpanded:"true",ariaLabel:r>1?"SubMenu":"Header Menu",role:"menu",className:g,style:{minWidth:`${this.addonOptions.minWidth}px`}});r>0&&(M.classList.add("slick-submenu"),u&&(M.dataset.subMenuParent=u),this.gridOptions?.darkMode&&M.classList.add("slick-dark-mode"));const L=(0,A.createDomElement)("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},M),q={grid:this.grid,column:s,level:r,menu:{commandItems:e}};return a&&r>0&&this.addSubMenuTitleWhenExists(a,L),this.populateCommandOrOptionItems("command",this.addonOptions,L,e,q,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),r++,M}resetHeaderMenuTranslations(e){e.forEach(s=>{s?.header?.menu?.commandItems&&!s.excludeFromHeaderMenu&&this.extensionUtility.translateMenuItemsFromTitleKey(s.header.menu.commandItems||[])})}sortColumn(e,s,r=!0){if(s?.column){const a=s.column,c=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(a.id+""):[];let u=W.local;c.push({columnId:a.id,sortCol:a,sortAsc:r}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:c,grid:this.sharedService.slickGrid}),u=W.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,c),u=W.local):s.grid.onSort.notify(c);const g=c.map(y=>({columnId:y?.sortCol?.id??"",sortAsc:y?.sortAsc??!0}));if(this.sharedService.slickGrid.setSortColumns(g),u){const y=[];g.forEach(M=>{y.push({columnId:`${M.columnId}`,direction:M.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(u,y)}}}}const sr="slick-rbe-editmode",gc="slick-rbe-unsaved-highlight",wa="action-btns--delete",mc="action-btns--edit",yo="action-btns--update",or="action-btns--cancel";class Va{constructor(e,s,r){this.extensionUtility=e,this.pubSubService=s,this.pluginName="RowBasedEdit",this._defaults={actionsColumnLabel:"Actions",allowMultipleRows:!1,columnId:"_slick_rowbasededit_action",columnIndexPosition:-1,reorderable:!1},this._editedRows=new Map,this._currentLang="en",this._translations={},this.onBeforeEditCellHandler=(a,c)=>this._editedRows.has(c.item?.[this.gridOptions.datasetIdPropertyName??"id"]),this._eventHandler=new Fe,this._addonOptions=r}get addonOptions(){return this._addonOptions}get gridOptions(){return this._grid.getOptions()||{}}get eventHandler(){return this._eventHandler}init(e,s){this._grid=e,this._gridService=s,this._addonOptions={...this._defaults,...this.addonOptions};const r=this._grid.getData();if(this._eventHandler.subscribe(this._grid.onBeforeEditCell,this.onBeforeEditCellHandler),this.checkOptionsRequirements(this.gridOptions),this.gridOptions.autoEdit||(this._grid.setOptions({autoEdit:!0}),console.warn('[Slickgrid-Universal] The Row Based Edit Plugin works best with the gridOption "autoEdit" enabled, the option has now been set automatically for you.')),this._existingEditCommandHandler=this.gridOptions.editCommandHandler,this._grid.setOptions({editCommandHandler:this.rowBasedEditCommandHandler.bind(this)}),!0===this.gridOptions.enableExcelCopyBuffer){const c=this.gridOptions.excelCopyBufferOptions?.onBeforePasteCell;this._grid.setOptions({excelCopyBufferOptions:{...this.gridOptions.excelCopyBufferOptions,onBeforePasteCell:(u,g)=>{let y=!0;if(c&&(y=c(u,g),!1===y))return!1;const M=r.getItem(g.row);return!(!this._editedRows.has(M[this.gridOptions.datasetIdPropertyName??"id"])||!0!==y)}}})}const a=r.getItemMetadata;r.getItemMetadata=this.updateItemMetadata(a?.bind?.(r)),this._eventHandler.subscribe(this._grid.onSetOptions,this.optionsUpdatedHandler.bind(this)),this._eventHandler.subscribe(r.onRowsOrCountChanged,this.handleAllRowRerender.bind(this)),this.translate()}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService?.unsubscribeAll()}create(e,s){if(this._addonOptions={...this._defaults,...s.rowBasedEditOptions},Array.isArray(e)&&s){const r=this.getColumnDefinition();if(!e.some(a=>a.id===r.id)){const a=s?.rowBasedEditOptions?.columnIndexPosition??-1;-1===a?e.push(r):a>0&&a<e.length?e.splice(a,0,r):e.unshift(r),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){return{id:String(this._addonOptions?.columnId??this._defaults.columnId),name:this._addonOptions?.actionsColumnLabel,field:"action",minWidth:70,width:75,maxWidth:75,excludeFromExport:!0,reorderable:this._addonOptions?.reorderable,formatter:this.actionColumnFormatter.bind(this),onCellClick:this.onCellClickHandler.bind(this),...this._addonOptions?.actionColumnConfig??{}}}rowBasedEditCommandHandler(e,s,r){this._existingEditCommandHandler&&this._existingEditCommandHandler(e,s,r);const a=Array.isArray(r.prevSerializedValue)?r.prevSerializedValue:[r.prevSerializedValue],c=Array.isArray(r.serializedValue)?r.serializedValue:[r.serializedValue],u=this._gridService?.getAllColumnDefinitions().filter(q=>void 0!==q.editor),g=[],y=this.gridOptions.datasetIdPropertyName??"id";a.forEach((q,pe)=>{const Ve=c[pe];if(a[pe]!==Ve||""===Ve){const Ge=Array.isArray(r.prevSerializedValue)?u?.[pe]:s;if(!Ge)return;this._grid.invalidate(),r.execute(),this.renderUnsavedCellStyling(e[y],Ge),g.push(Ge)}});const M=this._editedRows.get(e[y]),L=[...M?.editCommands||[]];g.length>0&&L.push(r),this._editedRows.set(e[y],{columns:[...M?.columns||[],...g],editCommands:L,cssStyleKeys:M?.cssStyleKeys||[]})}translate(e=!1){return this._currentLang=this.extensionUtility.translaterService?.getCurrentLanguage()??"en",(!this._translations[this._currentLang]||e)&&(this._translations[this._currentLang]={btnUpdateTitle:this.getTitleOrDefault("updateButtonTitle","Update the row"),btnEditTitle:this.getTitleOrDefault("editButtonTitle","Edit the Row"),btnDeleteTitle:this.getTitleOrDefault("deleteButtonTitle","Delete the Row"),btnCancelTitle:this.getTitleOrDefault("cancelButtonTitle","Cancel changes of the Row")}),this._translations[this._currentLang]}checkOptionsRequirements(e){if(!e?.enableCellNavigation)throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption cell navigation (enableCellNavigation = true)");if(!e?.editable)throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption editable (editable = true)")}undoRowEdit(e){const r=this._editedRows.get(e[this.gridOptions.datasetIdPropertyName??"id"]),a=this._grid.getData().getRowByItem(e);if(void 0!==a&&r?.editCommands&&r.editCommands.length||ml.cancelCurrentEdit()){for(;r.editCommands.length>0;){const c=r.editCommands.pop();c&&c.undo()}r.columns.forEach(c=>{this.removeUnsavedStylingFromCell(c,a)}),r.columns=[],this._grid.invalidate()}}renderUnsavedCellStyling(e,s){if(s){const r=this._grid.getData()?.getRowById(e);if(void 0!==r&&r>=0){const c=`${gc}_${[s.id]}${r}`;this._grid.setCellCssStyles(c,{[r]:{[s.id]:"slick-rbe-unsaved-cell"}}),this._editedRows.get(e)?.cssStyleKeys.push(c)}}}handleAllRowRerender(e,s){this._editedRows.forEach((r,a)=>{r.cssStyleKeys.forEach(c=>{this._grid.removeCellCssStyles(c)}),r.cssStyleKeys=[],r.columns.forEach(c=>{this.renderUnsavedCellStyling(a,c)})})}removeUnsavedStylingFromCell(e,s){this._grid.removeCellCssStyles(`${gc}_${[e.id]}${s}`)}removeUnsavedStylingFromRow(e){this._grid.getColumns().forEach(s=>{this.removeUnsavedStylingFromCell(s,e)})}optionsUpdatedHandler(e,s){this._addonOptions={...this._defaults,...s.optionsAfter.rowBasedEditOptions}}onCellClickHandler(e,s){var r=this;return(0,mt.A)(function*(){const a=s.dataContext,c=e.target,g=r._editedRows.get(a[r.gridOptions.datasetIdPropertyName??"id"]);if((c.classList.contains(wa)||c.parentElement?.classList.contains(wa))&&r._gridService){if(r._addonOptions?.actionButtons?.deleteButtonPrompt&&!window.confirm(r._addonOptions.actionButtons.deleteButtonPrompt))return;r.toggleEditmode(a,!1),r._gridService.deleteItem(a)}else if(c.classList.contains(mc)||c.parentElement?.classList.contains(mc)){if(!r._addonOptions?.allowMultipleRows&&r._editedRows.size>0)return;"function"==typeof r._addonOptions?.onBeforeEditMode&&r._addonOptions.onBeforeEditMode(s),r.toggleEditmode(a,!0)}else if(c.classList.contains(yo)||c.parentElement?.classList.contains(yo)){if(r._addonOptions?.actionButtons?.updateButtonPrompt&&(g?.editCommands.length||0)>0&&!window.confirm(r._addonOptions.actionButtons.updateButtonPrompt)||(r._grid.getCellEditor()&&r._grid.getActiveCell()?.row===s.row&&r._grid.getEditController()?.commitCurrentEdit(),r._addonOptions?.onBeforeRowUpdated&&!0!==(yield r._addonOptions.onBeforeRowUpdated(s))))return;r.removeUnsavedStylingFromRow(s.row),r.toggleEditmode(a,!1)}else if(c.classList.contains(or)||c.parentElement?.classList.contains(or)){if(r._addonOptions?.actionButtons?.cancelButtonPrompt&&(g?.editCommands.length||0)>0&&!window.confirm(r._addonOptions.actionButtons.cancelButtonPrompt))return;r.undoRowEdit(a),r.toggleEditmode(a,!1)}})()}actionColumnFormatter(e,s,r,a,c){const u=this.gridOptions,g=this._editedRows.has(c?.[u.datasetIdPropertyName??"id"]),y=this._translations[this._currentLang]??this.translate(),M=document.createDocumentFragment();return M.appendChild((0,A.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.editButtonClassName||"button-style padding-1px mr-2"} action-btns `+mc,title:y.btnEditTitle,style:{display:g?"none":""}})).appendChild((0,A.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconEditButtonClassName||"mdi mdi-table-edit text-color-primary"})),M.appendChild((0,A.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.deleteButtonClassName||"button-style padding-1px"} action-btns `+wa,title:y.btnDeleteTitle,style:{display:g?"none":""}})).appendChild((0,A.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconDeleteButtonClassName||"mdi mdi-close text-color-danger"})),M.appendChild((0,A.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.updateButtonClassName||"button-style padding-1px mr-2"} action-btns `+yo,title:y.btnUpdateTitle,style:{display:g?"":"none"}})).appendChild((0,A.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconUpdateButtonClassName||"mdi mdi-check-bold text-color-success"})),M.appendChild((0,A.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.cancelButtonClassName||"button-style padding-1px"} action-btns `+or,title:y.btnCancelTitle,style:{display:g?"":"none"}})).appendChild((0,A.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconCancelButtonClassName||"mdi mdi-cancel text-color-danger"})),M}toggleEditmode(e,s){const r=this.gridOptions.datasetIdPropertyName??"id";s?this._editedRows.set(e[r],{columns:[],editCommands:[],cssStyleKeys:[]}):this._editedRows.delete(e[r]),this._grid.invalidate()}updateItemMetadata(e){return s=>{const r=this._grid.getData().getItem(s);let a={cssClasses:""};if("function"==typeof e){const c=e(s);c&&(a=c)}if(a&&r){const c=this.gridOptions.datasetIdPropertyName??"id";this._editedRows.has(r[c])&&!a.cssClasses.includes(sr)?a.cssClasses=(a.cssClasses||"")+" "+sr:!this._editedRows.has(r[c])&&a.cssClasses.includes(sr)&&(a.cssClasses=a.cssClasses.replace(sr,""))}return a}}getTitleOrDefault(e,s){const r=this.gridOptions.rowBasedEditOptions?.actionButtons;return r?.[e+"Key"]&&this.extensionUtility.translaterService?.translate?.(r?.[e+"Key"]||"")||r?.[e]||s}}class Ba{constructor(e){this.pubSubService=e,this.pluginName="RowMoveManager",this._dragging=!1,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,reorderable:!1,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new ue("onBeforeMoveRows"),this.onMoveRows=new ue("onMoveRows"),this._eventHandler=new Fe}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}init(e,s){this._addonOptions={...this._defaults,...s},this._grid=e,this._canvas=this._grid.getCanvasNode(),We.addSlickEventPubSubWhenDefined(this.pubSubService,this),"function"==typeof this._addonOptions?.usabilityOverride&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){this._eventHandler?.unsubscribeAll()}create(e,s){if(this._addonOptions={...this._defaults,...s.rowMoveManager},Array.isArray(e)&&s){const r=this.getColumnDefinition();if(!e.some(a=>a.id===r.id)){const c=Array.isArray(e)&&e.find(g=>"selectAndMove"===g?.behavior)||r,u=s?.rowMoveManager?.columnIndexPosition??0;u>0?e.splice(u,0,c):e.unshift(c),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){const e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:e,reorderable:this._addonOptions.reorderable,resizable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(e){this._usabilityOverride=e}setOptions(e){this._addonOptions={...this._addonOptions,...e}}handleDragInit(e){e.stopImmediatePropagation()}handleDragEnd(e,s){if(this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),s.guide?.remove(),s.selectionProxy?.remove(),s.clonedSlickRow?.remove(),s.canMove)){const r={grid:this._grid,rows:s.selectedRows,insertBefore:s.insertBefore};"function"==typeof this._addonOptions.onMoveRows&&this._addonOptions.onMoveRows(e instanceof H?e.getNativeEvent():e,r),this.onMoveRows.notify(r)}}handleDrag(e,s){if(this._dragging){e.stopImmediatePropagation();const r=e.getNativeEvent(),c=(r?.touches?.[0]??r).pageY-(0,A.getOffset)(this._canvas).top;s.selectionProxy.style.top=c-5+"px",s.selectionProxy.style.display="block",s.clonedSlickRow&&(s.clonedSlickRow.style.top=c-6+"px",s.clonedSlickRow.style.display="block");const u=Math.max(0,Math.min(Math.round(c/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(u!==s.insertBefore){const g={grid:this._grid,rows:s.selectedRows,insertBefore:u};if(s.canMove=!1!==this._addonOptions?.onBeforeMoveRows?.(r,g)&&!1!==this.onBeforeMoveRows.notify(g).getReturnValue(),this._usabilityOverride&&s.canMove){const y=this._grid.getDataItem(u);s.canMove=this.checkUsabilityOverride(u,y,this._grid)}s.guide.style.top=s.canMove?u*(this.gridOptions.rowHeight||0)+"px":"-1000px",s.insertBefore=u}}}handleDragStart(e,s){const r=this._grid.getCellFromEvent(e)||{cell:-1,row:-1},a=r.row,c=this._grid.getDataItem(a);if(this.checkUsabilityOverride(a,c,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[r.cell].behavior||""))return!1;if(this._dragging=!0,e.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){const y=this._grid.getCellNode(r.row,r.cell)?.closest(".slick-row");y&&(s.clonedSlickRow=y.cloneNode(!0),s.clonedSlickRow.classList.add("slick-reorder-shadow-row"),s.clonedSlickRow.style.display="none",s.clonedSlickRow.style.marginLeft=(0,A.findWidthOrDefault)(this._addonOptions?.rowMoveShadowMarginLeft,"0px"),s.clonedSlickRow.style.marginTop=(0,A.findWidthOrDefault)(this._addonOptions?.rowMoveShadowMarginTop,"0px"),s.clonedSlickRow.style.opacity=`${this._addonOptions?.rowMoveShadowOpacity??.95}`,s.clonedSlickRow.style.transform=`scale(${this.addonOptions?.rowMoveShadowScale??.75})`,this._canvas.appendChild(s.clonedSlickRow))}let u=this._addonOptions.singleRowMove?[r.row]:this._grid.getSelectedRows();(0===u.length||!u.some(y=>y===r.row))&&(u=[r.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(u));const g=this.gridOptions.rowHeight;s.selectedRows=u,s.selectionProxy=(0,A.createDomElement)("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:g*u.length+"px"}},this._canvas),s.guide=(0,A.createDomElement)("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),s.insertBefore=-1}}checkUsabilityOverride(e,s,r){return"function"!=typeof this._usabilityOverride||this._usabilityOverride(e,s,r)}moveIconFormatter(e,s,r,a,c,u){return this.checkUsabilityOverride(e,c,u)?{addClasses:"cell-reorder dnd",html:(0,A.createDomElement)("div",{className:this._addonOptions.cssClass||""})}:""}}class pg{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(e,s,r,a,c,u,g,y){this.extensionUtility=e,this.filterService=s,this.pubSubService=r,this.sharedService=a,this.sortService=c,this.treeDataService=u,this.translaterService=g,this.lazyGridService=y,this._extensionCreatedList={},this._extensionList={},this._requireInitExternalExtensions=[]}dispose(){if(this.sharedService.visibleColumns=[],"object"==typeof this._extensionList){const e=Object.keys(this._extensionList);e.forEach(s=>{if(this._extensionList.hasOwnProperty(s)){const r=this._extensionList[s];"function"==typeof r?.instance?.dispose&&r.instance.dispose()}}),e.forEach(s=>{delete this._extensionList[s]})}this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList={}}addExtensionToList(e,s){this._extensionList[e]=s}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(e){if(this._extensionCreatedList?.hasOwnProperty(e))return this._extensionCreatedList[e]}getExtensionByName(e){return this._extensionList?.[e]}getExtensionInstanceByName(e){return this.getExtensionByName(e)?.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableRowBasedEdit){this._rowBasedEdit=this._rowBasedEdit||new Va(this.extensionUtility,this.pubSubService,this.gridOptions.rowBasedEditOptions);const e=this.lazyGridService?.();if(!e)throw new Error("[Slickgrid-Universal] the RowBasedEdit Plugin requires a GridService to be configured and available");this._rowBasedEdit.init(this.sharedService.slickGrid,e),this.gridOptions.rowBasedEditOptions?.onExtensionRegistered&&this.gridOptions.rowBasedEditOptions.onExtensionRegistered(this._rowBasedEdit),this._extensionList[b.rowBasedEdit]={name:b.rowBasedEdit,instance:this._rowBasedEdit}}if(this.gridOptions.enableAutoTooltip){const e=new $h(this.gridOptions?.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(e),this._extensionList[b.autoTooltip]={name:b.autoTooltip,instance:e}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new ba,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),this.gridOptions.excelCopyBufferOptions?.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[b.cellExternalCopyManager]={name:b.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new Kh(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.cellMenu?.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[b.cellMenu]={name:b.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){const e=this.gridOptions.rowSelectionOptions??{};this.gridOptions.enableRowMoveManager&&!1!==this.gridOptions.rowMoveManager?.dragToSelect&&(e.dragToSelect=!0),this._rowSelectionModel=new Kr(e),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[b.rowSelection]={name:b.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new Xh(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);const s=this.getCreatedExtensionByName(b.checkboxSelector)?.instance;s&&(this.gridOptions.checkboxSelector?.onExtensionRegistered&&this.gridOptions.checkboxSelector.onExtensionRegistered(s),this._extensionList[b.checkboxSelector]={name:b.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new Tn(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.columnPicker?.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[b.columnPicker]={name:b.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new ws(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),this.gridOptions.contextMenu?.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[b.contextMenu]={name:b.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),this.gridOptions.draggableGrouping?.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[b.contextMenu]={name:b.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[b.draggableGrouping]={name:b.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new rc(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.gridMenu?.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[b.gridMenu]={name:b.gridMenu,instance:this._gridMenuControl}),this.gridOptions.enableHeaderButton){const e=new uc(this.extensionUtility,this.pubSubService,this.sharedService);this.gridOptions.headerButton?.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(e),this._extensionList[b.headerButton]={name:b.headerButton,instance:e}}this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new La(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.headerMenu?.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[b.headerMenu]={name:b.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager&&(this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new Ba(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager),this.getCreatedExtensionByName(b.rowMoveManager)?.instance&&(this._extensionList[b.rowMoveManager]={name:b.rowMoveManager,instance:this._rowMoveManagerPlugin})),this._requireInitExternalExtensions.length&&this._requireInitExternalExtensions.forEach(e=>{e.instance.init(this.sharedService.slickGrid,void 0)})}}createExtensionsBeforeGridCreation(e,s){const r=[];s.enableCheckboxSelector&&(this.getCreatedExtensionByName(b.checkboxSelector)||(this._checkboxSelectColumn=new Xh(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),r.push({name:b.checkboxSelector,instance:this._checkboxSelectColumn,columnIndexPosition:s?.checkboxSelector?.columnIndexPosition??r.length}))),s.enableRowMoveManager&&(this.getCreatedExtensionByName(b.rowMoveManager)||(this._rowMoveManagerPlugin=new Ba(this.pubSubService),r.push({name:b.rowMoveManager,instance:this._rowMoveManagerPlugin,columnIndexPosition:s?.rowMoveManager?.columnIndexPosition??r.length}))),s.enableRowBasedEdit&&(this.getCreatedExtensionByName(b.rowBasedEdit)||(this._rowBasedEdit=new Va(this.extensionUtility,this.pubSubService),r.push({name:b.rowBasedEdit,instance:this._rowBasedEdit,columnIndexPosition:s?.rowMoveManager?.columnIndexPosition??r.length}))),s.preRegisterExternalExtensions&&s.preRegisterExternalExtensions(this.pubSubService).forEach(c=>{r.push(c),this._requireInitExternalExtensions.push(c)}),this.createExtensionByTheirColumnIndex(r,e,s),s.enableDraggableGrouping&&(this.getCreatedExtensionByName(b.draggableGrouping)||(this._draggleGroupingPlugin=new mg(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(s.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[b.draggableGrouping]={name:b.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(e){if("function"==typeof this.sharedService?.slickGrid?.getColumns){const s=this.sharedService.slickGrid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),s),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(e){this.extensionUtility.refreshBackendDataset(e)}removeColumnByIndex(e,s){return Array.isArray(e)?e.filter((r,a)=>s!==a):e}translateAllExtensions(e){this.translateCellMenu(),this.translateContextMenu(),this.translateHeaderMenu(),this.translateRowEditPlugin(),this.translateColumnHeaders(e)}translateCellMenu(){this._cellMenuPlugin?.translateCellMenu()}translateColumnPicker(){this._columnPickerControl?.translateColumnPicker()}translateContextMenu(){this._contextMenuPlugin?.translateContextMenu()}translateGridMenu(){this._gridMenuControl?.translateGridMenu()}translateHeaderMenu(){this._headerMenuPlugin?.translateHeaderMenu()}translateRowEditPlugin(){this._rowBasedEdit?.translate()}translateColumnHeaders(e,s){if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');e&&this.translaterService?.use&&this.translaterService.getCurrentLanguage()!==e&&this.translaterService.use(e);let r=s;r||(r=this.sharedService.columnDefinitions),this.translateItems(r,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup"),this.renderColumnHeaders(r,Array.isArray(s))}renderColumnHeaders(e,s=!1){let r=e;r||(r=this.sharedService.columnDefinitions),Array.isArray(r)&&this.sharedService.slickGrid?.setColumns&&((r.length>this.sharedService.allColumns.length||s)&&(this.sharedService.allColumns=r),this.sharedService.slickGrid.setColumns(r)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns,this._columnPickerControl.translateColumnPicker()),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=this.sharedService.allColumns??[],this._gridMenuControl.recreateGridMenu(),this._gridMenuControl.translateGridMenu())}createExtensionByTheirColumnIndex(e,s,r){e.sort((a,c)=>(a?.columnIndexPosition??0)-(c?.columnIndexPosition??0)),e.forEach(a=>{const c=a.instance.create(s,r);c&&(this._extensionCreatedList[a.name]={name:a.name,instance:c})})}translateItems(e,s,r){if(this.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.extensionUtility.translateItems(e,s,r)}}function Qh(d,e,s){if(s&&(d?.hasOwnProperty(s)||e?.hasOwnProperty(s)))return d[s]===e||d===e[s]||d[s]===e[s];if("object"==typeof d&&"object"==typeof e&&Object.keys(d).length!==Object.keys(e).length)return!1;for(const r in d)if(d.hasOwnProperty(r)&&d[r]!==e[r])return!1;return!0}const rr=(d,e,s)=>{switch(d.toUpperCase()){case"<":case"LT":return e<s;case"<=":case"LE":return e<=s;case">":case"GT":return e>s;case">=":case"GE":return e>=s;case"!=":case"<>":case"NE":return e!==s;case"=":case"==":case"EQ":return e===s;case"IN":return!(!s||!Array.isArray(s))&&s.includes(e);case"NIN":case"NOT_IN":return!(!s||!Array.isArray(s)||s.includes(e));case"IN_CONTAINS":return!(!s||!Array.isArray(s)||"string"!=typeof e)&&s.some(r=>e.split(/[,]+/).map(a=>a.trim()).includes(r));case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return!(!s||!Array.isArray(s)||"string"!=typeof e||s.some(r=>e.split(/[,]+/).map(a=>a.trim()).includes(r)));case"IN_COLLECTION":return!!(e&&s&&Array.isArray(e)&&Array.isArray(s))&&s.some(r=>e.includes(r));case"NOT_IN_COLLECTION":return!!(e&&s&&Array.isArray(e)&&Array.isArray(s))&&!s.some(r=>e.includes(r))}return!0};function Ha(d,e,s,r){return"*"===d||d===oe.endsWith||"*z"===d?e.endsWith(s):""===d&&"*"===r||d===oe.startsWith||"a*"===d?e.startsWith(s):""===d||d===oe.contains?e.indexOf(s)>-1:"<>"===d||d===oe.notContains?-1===e.indexOf(s):rr(d||"==",e,s)}function Ll(d,e){let r;switch(eu(e)){case"boolean":r=function Nl(d){const e=Array.isArray(d)&&d[0]||!1;return(0,A.parseBoolean)(e)}(d);break;case"date":r=function pc(d,e){const s=Array.isArray(d)&&d||[],a=He(e||p.dateIso),c=[];if(2===s.length||"string"==typeof s[0]&&s[0].indexOf("..")>0){const u=2===s.length?s:s[0].split(".."),g=Array.isArray(u)&&u[0]||"",y=Array.isArray(u)&&u[1]||"",M=Ke(g,a,!0),L=Ke(y,a,!0);if(!M||!L)return[];c.push(M,L)}else{const u=Ke(s[0],a,!0);if(!u)return[];c.push(u)}return c}(d,e);break;case"number":r=function kh(d){const s=Array.isArray(d)&&d||[0],r=[];let a,c;if(2===s.length||"string"==typeof s[0]&&s[0].indexOf("..")>0){const u=2===s.length?s:s[0].split("..");a=parseFloat(Array.isArray(u)?u[0]:""),c=parseFloat(Array.isArray(u)?u[1]:"")}else a=parseFloat(s[0]);return(0,A.isNumber)(a,!0)&&(0,A.isNumber)(c,!0)?r.push(a,c):(0,A.isNumber)(a,!0)&&r.push(a),r}(d);break;case"object":r=function W0(d){return(Array.isArray(d)&&d.length>0?d[0]:"")||""}(d);break;case"string":r=function vg(d){let s=Array.isArray(d)&&d||[""];const r=[];let a,c;if(1===s.length&&"string"==typeof s[0]){const u=s[0];u.indexOf("..")>0?s=u.split(".."):u.indexOf("*")>0&&u.indexOf("*")<u.length-1&&(s=u.split("*"))}if(2===s.length)a=`${s[0]}`,c=`${s[1]}`;else{const u=Array.isArray(d)&&d.length>0?d[0]:"";a=null==u?"":`${u}`}return void 0!==a&&void 0!==c?r.push(a,c):void 0!==a&&r.push(a),r}(d)}return r}function eu(d){switch(d){case p.boolean:return"boolean";case p.date:case p.dateIso:case p.dateUtc:case p.dateTime:case p.dateTimeIso:case p.dateTimeIsoAmPm:case p.dateTimeIsoAM_PM:case p.dateTimeShortIso:case p.dateEuro:case p.dateEuroShort:case p.dateTimeShortEuro:case p.dateTimeEuro:case p.dateTimeEuroAmPm:case p.dateTimeEuroAM_PM:case p.dateTimeEuroShort:case p.dateTimeEuroShortAmPm:case p.dateTimeEuroShortAM_PM:case p.dateUs:case p.dateUsShort:case p.dateTimeShortUs:case p.dateTimeUs:case p.dateTimeUsAmPm:case p.dateTimeUsAM_PM:case p.dateTimeUsShort:case p.dateTimeUsShortAmPm:case p.dateTimeUsShortAM_PM:return"date";case p.integer:case p.float:case p.number:return"number";case p.object:return"object";default:return"string"}}const Ds_executeFilterConditionTest=(d,e)=>{if(function Cg(d){switch(d&&d.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}(d.operator))return(d=>{const e=d.operator;let s;return s=!Array.isArray(d.cellValue)||"IN_COLLECTION"!==e&&"NOT_IN_COLLECTION"!==e?null==d.cellValue?"":`${d.cellValue}`:d.cellValue.length?d.cellValue.map(r=>`${r}`):[],rr(e||"IN",s,d.searchTerms||[])})(d);switch(eu(d.filterSearchType||d.fieldType)){case"boolean":return((d,e)=>(0,A.parseBoolean)(d.cellValue)===(0,A.parseBoolean)(e))(d,e);case"date":return function Fl(d,e){const r=He(d&&(d.filterSearchType||d.fieldType)||p.dateIso),[a,c]=e,u=Ke(d.cellValue,r,!0);if(!a&&!c||!u)return!1;const g="ISO8601"===r||r.toLowerCase().includes("h")?u.valueOf():(0,be.J7)(new Date(u)).valueOf();if(a&&c){let M=d?.operator??d.defaultFilterRangeOperator;M!==oe.rangeInclusive&&M!==oe.rangeExclusive&&(M=d.defaultFilterRangeOperator);const L=M===oe.rangeInclusive,q=rr(L?">=":">",g,a.valueOf()),pe=rr(L?"<=":"<",g,c.valueOf());return q&&pe}const y="ISO8601"===r||r.toLowerCase().includes("h")?a.valueOf():(0,be.J7)(new Date(a)).valueOf();return rr(d.operator||"==",g,y)}(d,e||[]);case"number":return((d,e)=>{const s=parseFloat(d.cellValue),[r,a]=e;if(void 0===r&&!d.operator)return!0;if(void 0!==r&&void 0!==a){let c=d?.operator??d.defaultFilterRangeOperator;c!==oe.rangeInclusive&&c!==oe.rangeExclusive&&(c=d.defaultFilterRangeOperator);const u=c===oe.rangeInclusive,g=rr(u?">=":">",s,+r),y=rr(u?"<=":"<",s,+a);return g&&y}return rr(d.operator||"==",s,+r)})(d,e||[]);case"object":return((d,e)=>{if(void 0===e&&!d.operator)return!0;switch((d.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!Qh(d.cellValue,e,d.dataKey);default:return Qh(d.cellValue,e,d.dataKey)}})(d,e);default:return((d,e)=>{let[s,r]=e;if(void 0===s&&!d.operator)return!0;d.cellValue=null==d.cellValue?"":d.cellValue.toString();const a=d?.ignoreAccentOnStringFilterAndSort?(0,A.removeAccentFromText)(d.cellValue,!0):d.cellValue.toLowerCase();if("string"==typeof s&&(s=d?.ignoreAccentOnStringFilterAndSort?(0,A.removeAccentFromText)(s,!0):s.toLowerCase()),"string"==typeof r&&(r=d?.ignoreAccentOnStringFilterAndSort?(0,A.removeAccentFromText)(r,!0):r.toLowerCase()),d.operator===oe.startsWithEndsWith&&void 0!==s&&void 0!==r)return function Zh(d,[e,s]){return d.startsWith(e)&&d.endsWith(s)}(a,[s,r]);if(void 0!==s&&void 0!==r){let u=d?.operator??d.defaultFilterRangeOperator;u!==oe.rangeInclusive&&u!==oe.rangeExclusive&&(u=d.defaultFilterRangeOperator);const g=u===oe.rangeInclusive,y=Ha(g?">=":">",a,s,d.searchInputLastChar),M=Ha(g?"<=":"<",a,r,d.searchInputLastChar);return y&&M}return Ha(d.operator,a,s,d.searchInputLastChar)})(d,e||[])}};class Eg{constructor(e,s,r,a,c){this.filterFactory=e,this.pubSubService=s,this.sharedService=r,this.backendUtilities=a,this.rxjs=c,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new ue,this._eventHandler=new Fe,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}get _dataView(){return this._grid?.getData()??{}}addRxJsResource(e){this.rxjs=e}init(e){this._grid=e,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let e=this._filtersMetadata.pop();for(;e;)"function"==typeof e?.destroy&&e.destroy(),e=this._filtersMetadata.pop()}}bindBackendOnFilter(e){this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(s,r)=>{r.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(r,this._isFilterFirstRender),""===this._firstColumnIdRendered&&(this._firstColumnIdRendered=r.column.id)}),this.subscribeToOnHeaderRowCellRendered(e),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(e){var s=this;this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,function(){var r=(0,mt.A)(function*(a,c){const u=c?.clearFilterTriggered??!1;u||(yield s.emitFilterChanged(W.local,!0)),!0===s._gridOptions.enableTreeData&&(s._tmpPreFilteredData=s.preFilterTreeData(s._dataView.getItems(),s._columnFilters)),u||(yield s.emitFilterChanged(W.local)),null!==c.columnId&&s._dataView.refresh(),s._previousFilters=s.extractBasicFilterDetails(s._columnFilters)});return function(a,c){return r.apply(this,arguments)}}()),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(r,a)=>{this.addFilterTemplateToHeaderRow(a)}),this.subscribeToOnHeaderRowCellRendered(e)}clearFilterByColumnId(e,s){var r=this;return(0,mt.A)(function*(){yield r.pubSubService.publish("onBeforeFilterClear",{columnId:s},0);const a=r._gridOptions.backendServiceApi??!1,c=a?W.remote:W.local,u=Object.keys(r._columnFilters);let g;Array.isArray(u)&&(g=u.find(M=>M===`${s}`));const y=r._filtersMetadata.find(M=>M.columnDef.id===s);return y?.clear&&y.clear(!0),a&&void 0!==g&&r.onBackendFilterChange(e,{grid:r._grid,columnFilters:r._columnFilters}),yield r.emitFilterChanged(c),!0})()}clearFilters(){var e=this;return(0,mt.A)(function*(s=!0){s&&(yield e.pubSubService.publish("onBeforeFilterClear",!0,0)),e._filtersMetadata.forEach(a=>{a?.clear&&a.clear(!1)}),e.removeAllColumnFiltersProperties(),Array.isArray(e._columnDefinitions)&&e._columnDefinitions.forEach(a=>{a.filter?.searchTerms&&delete a.filter.searchTerms}),e._dataView&&e._grid&&(e._dataView.refresh(),e._grid.invalidate());const r=e._gridOptions.backendServiceApi;if(r&&s){const a={clearFilterTriggered:!0,shouldTriggerQuery:s,grid:e._grid,columnFilters:e._columnFilters},u=r.service.processOnFilterChanged(void 0,a),g=e._gridOptions.pagination?.totalItems??0;e.backendUtilities?.executeBackendCallback(r,u,a,new Date,g,{errorCallback:e.resetToPreviousSearchFilters.bind(e),successCallback:y=>e._previousFilters=e.extractBasicFilterDetails(y.columnFilters),emitActionChangedCallback:e.emitFilterChanged.bind(e)})}else e._previousFilters=e.extractBasicFilterDetails(e._columnFilters);s&&e.pubSubService.publish("onFilterCleared",!0)}).apply(this,arguments)}customLocalFilter(e,s){const r=s?.grid,a=s?.columnFilters??{},u=this._gridOptions.treeDataOptions;if(this._gridOptions.enableTreeData&&u){const g=u.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,y=u.parentPropName??V.treeDataProperties.PARENT_PROP,M=u?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,L=this._gridOptions.datasetIdPropertyName??"id",q=u.autoRecalcTotalsOnFilterChange??!1;let pe=!1;if(null!==e[y]){let Ie=this._dataView.getItemById(e[y]);for(;Ie;){if(Ie[g]){if(!q)return!1;pe=!0}Ie=this._dataView.getItemById(Ie[y])}}if(this._tmpPreFilteredData instanceof Set){const Ie=this._tmpPreFilteredData.has(e[L]);if(q){const Ve=_(this.sharedService.hierarchicalDataset,Ge=>Ge[L]===e[L],M);if(Ve&&(Ve.__filteredOut=!Ie),pe)return!1}return Ie}}else if("object"==typeof a)for(const g of Object.keys(a)){const y=a[g],M=y.columnDef?.filter;if("function"==typeof M?.filterPredicate){if(!M.filterPredicate(e,y))return!1}else{const L=this.preProcessFilterConditionOnDataContext(e,y,r);if("boolean"==typeof L)return L;let q=y?.parsedSearchTerms;if(void 0===q&&(q=Ll(y.searchTerms,y.columnDef.type||p.string),void 0!==q&&(y.parsedSearchTerms=q)),!Ds_executeFilterConditionTest(L,q))return!1}}return!0}parseFormInputFilterConditions(e,s){const r=(0,A.extend)(!0,[],e)||[];let a=Array.isArray(r)&&1===r.length?r[0]:"";const c=s.columnDef,u=c.filter?.type??c.type??p.string;let g=null;u!==p.object&&(a=null==a?"":`${a}`,g=!1!==(c.autoParseInputFilterOperator??this._gridOptions.autoParseInputFilterOperator)?a.match(/^((.*[^\\*\r\n])[*]{1}(.*[^*\r\n]))|^([<>!=*]{0,2})(.*[^<>!=*])([*]?)$/)||[]:[a,"","","","",a,""]);const y=g?.[2]||"",M=g?.[3]||"";let L=g?.[4]||s.operator,q=g?.[1]||g?.[5]||"";const pe=g?.[6]||("*z"===L?"*":"");return"string"==typeof a&&(a=a.replace("'","''"),y&&M?(q=a,L=oe.startsWithEndsWith):"*"===L||"*z"===L?L=oe.endsWith:("a*"===L||"*"===pe)&&(L=oe.startsWith)),Array.isArray(g)&&g.length>=1&&Array.isArray(r)&&1===r.length&&(r[0]=q.length>0&&" "===q.substring(0,1)?q.substring(1):q),{dataKey:c.dataKey,fieldType:u,searchTerms:r||[],operator:L,searchInputLastChar:pe,filterSearchType:c.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(e,s,r){const a=s.columnDef,c=s.columnId;let u=r.getColumnIndex(c);if(!a&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(u=this.sharedService.allColumns.findIndex(pe=>pe.field===c)),!a)return!0;if(this._gridOptions.enableRowDetailView){const pe=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";e[`${pe}isPadding`]&&e[`${pe}parent`]&&(e=e[`${pe}parent`])}let g=a.filter?.queryField||a.queryFieldFilter||a.queryField||a.field||"";"function"==typeof a.queryFieldNameGetterFn&&(g=a.queryFieldNameGetterFn(e));const y=a.filter?.type??a.type??p.string;let M=e[g];g?.indexOf(".")>=0&&(M=ie(e,g));const L=s.operator,q=s.searchTerms||[];if(!q||Array.isArray(q)&&(0===q.length||1===q.length&&L===q[0]))return!0;if(q&&Array.isArray(q)&&y!==p.object)for(let pe=0,Ie=q.length;pe<Ie;pe++)q[pe]=(null==q[pe]?"":q[pe])+"";if(!0===a?.params?.useFormatterOuputToFilter){const pe=r.getData(),Ve=pe&&"function"==typeof pe.getIdxById?pe.getIdxById(e[this._gridOptions.datasetIdPropertyName||"id"]):0,Ge=a&&"function"==typeof a.formatter?a.formatter(Ve||0,u,M,a,e,this._grid):"";M=(0,A.stripTags)(Ge)}return"number"==typeof M&&(M=M.toString()),{dataKey:a.dataKey,fieldType:y,searchTerms:q,cellValue:M,operator:L,searchInputLastChar:s.searchInputLastChar,filterSearchType:a.filterSearchType,ignoreAccentOnStringFilterAndSort:this._gridOptions.ignoreAccentOnStringFilterAndSort??!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(e,s){const r=this._gridOptions.treeDataOptions,a=r?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,c=r?.parentPropName??V.treeDataProperties.PARENT_PROP,u=r?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,g=this._gridOptions.datasetIdPropertyName??"id",y=this._gridOptions.presets?.treeData?.toggledItems,M=this._gridOptions.treeDataOptions?.initiallyCollapsed??!1,L=this._gridOptions.treeDataOptions?.columnId,q=this._gridOptions.treeDataOptions?.excludeChildrenWhenFilteringTree,pe=!q&&!0===this._gridOptions.treeDataOptions?.autoApproveParentItemWhenTreeColumnIsValid,Ie={},Ve=new Set,Ge=new Map;return Array.isArray(e)&&(e.forEach(Je=>{Ie[Je[g]]=Je,delete Ie[Je[g]].__used}),"object"==typeof s&&Object.keys(s).forEach(Je=>{const Xe=s[Je],rt=Xe?.searchTerms?(0,A.extend)(!0,[],Xe.searchTerms):[],_e=this.parseFormInputFilterConditions(rt,Xe),qe=Xe.columnDef,yt=Ll(_e.searchTerms,qe?.filter?.type??qe?.type??p.string);void 0!==yt&&(Xe.parsedSearchTerms=yt)}),e.forEach(Je=>{const Xe=Je[u];let rt=!0;for(const _e of Object.keys(s)){const qe=s[_e],ft=this.preProcessFilterConditionOnDataContext(Je,qe,this._grid);if(ft){const yt=qe?.parsedSearchTerms,Bt="boolean"==typeof ft?ft:Ds_executeFilterConditionTest(ft,yt);if(Bt&&pe&&Xe&&qe.columnId===L){Ge.set(Je[g],!0);break}if(Bt||!q&&!0===Ge.get(Je[c])){if(Xe&&qe.columnId===L&&Ge.set(Je[g],!0),Bt||!q&&qe.columnId===L)continue}else Xe&&!0!==Ge.get(Je[c])&&qe.columnId!==L&&Ge.set(Je[g],!1)}rt=!1}if(rt){Ve.add(Je[g]);let _e=Ie[Je[c]]??!1;const qe=!M;for(!this._isTreePresetExecuted&&Array.isArray(y)&&y.some(ft=>ft.itemId===_e.id&&ft.isCollapsed===qe)&&(_e[a]=qe);_e;)_e.__used??Ve.add(_e[g]),Ie[_e[g]].__used=!0,_e=Ie[_e[c]]??!1}})),this._isTreePresetExecuted=!0,Ve}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){const e=[];if(this._columnFilters)for(const s of Object.keys(this._columnFilters)){const r=this._columnFilters[s],a={columnId:s||""},u=this.sharedService.allColumns.find(g=>g.id===a.columnId)?.filter?.emptySearchTermReturnAllValues??!0;r?.searchTerms&&(a.searchTerms=r.searchTerms),r.operator&&(a.operator=r.operator),r.targetSelector&&(a.targetSelector=r.targetSelector),Array.isArray(a.searchTerms)&&a.searchTerms.length>0&&(!u||""!==a.searchTerms[0])&&e.push(a)}return e}emitFilterChanged(e,s=!1){const r=s?"onBeforeFilterChange":"onFilterChanged";if(e===W.remote&&this._gridOptions.backendServiceApi){let a=[];const c=this._gridOptions.backendServiceApi.service;return c?.getCurrentFilters&&(a=c.getCurrentFilters()),this.pubSubService.publish(r,a)}if(e===W.local)return this.pubSubService.publish(r,this.getCurrentLocalFilters())}onBackendFilterChange(e,s){var r=this;return(0,mt.A)(function*(){const a=s?.shouldTriggerQuery;if(a&&(yield r.emitFilterChanged(W.remote,!0)),!s||!s.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');const c=r._gridOptions.backendServiceApi;if(!c||!c.process||!c.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const u=new Date;if(c.preProcess&&c.preProcess(),a){const g=yield c.service.processOnFilterChanged(e,s),y=r._gridOptions.pagination?.totalItems??0;r.backendUtilities?.executeBackendCallback(c,g,s,u,y,{errorCallback:r.resetToPreviousSearchFilters.bind(r),successCallback:M=>r._previousFilters=r.extractBasicFilterDetails(M.columnFilters),emitActionChangedCallback:r.emitFilterChanged.bind(r),httpCancelRequestSubject:r.httpCancelRequests$})}})()}populateColumnFilterSearchTermPresets(e){return Array.isArray(e)&&(this._columnDefinitions.forEach(s=>{s.filter?.searchTerms&&delete s.filter.searchTerms;const r=e.find(a=>a.columnId===s.id);r&&Array.isArray(r?.searchTerms)&&(s.filter=s.filter||{},s.filter.operator=r.operator||s.filter.operator||"",s.filter.searchTerms=r.searchTerms)}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(e){const s=e??this._dataView?.getItems()??[];this._dataView&&this._gridOptions.enableTreeData&&s.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(s,this._columnFilters),this._dataView.refresh()):0===s.length&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&queueMicrotask(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(e=!0,s=!0){const a=!this._gridOptions.enableFiltering;a!==e&&(s&&e&&this.clearFilters(),this.disableAllFilteringCommands(e),this._grid.setOptions({enableFiltering:a},!1,!0),this._grid.setHeaderRowVisibility(a),this._gridOptions.enableFiltering=!e,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(e=!0){this.disableFilterFunctionality(this._gridOptions.enableFiltering,e)}toggleHeaderFilterRow(){let e=this._gridOptions.showHeaderRow??!1;e=!e,this._grid.setHeaderRowVisibility(e),!0===e&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)}updateFilters(e){var s=this;return(0,mt.A)(function*(r,a=!0,c=!0,u=!1){if(!s._gridOptions||!s._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(r)){s.clearFilters(!1),r.forEach(M=>{const L=s.sharedService.allColumns.find(q=>M.columnId===q.id);if(M&&L){const q=M.operator||L.defaultOperator;s.updateColumnFilters(M.searchTerms,L,q),L.setValues(M.searchTerms||[],q),(u||s._gridOptions.enableTreeData)&&s.callbackSearchEvent(void 0,{columnDef:L,operator:q,searchTerms:M.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});const g=s._gridOptions.backendServiceApi,y=g?W.remote:W.local;if(a&&(yield s.emitFilterChanged(y,!0)),s._dataView.refresh(),g){const M=g?.service;M?.updateFilters&&(M.updateFilters(r,!0),c&&s.backendUtilities?.refreshBackendDataset(s._gridOptions))}a&&(yield s.emitFilterChanged(y))}return!0}).apply(this,arguments)}updateSingleFilter(e){var s=this;return(0,mt.A)(function*(r,a=!0,c=!0){const u=s.sharedService.allColumns.find(g=>g.id===r.columnId);if(u&&r.columnId){s._columnFilters={};const g=u.filter?.emptySearchTermReturnAllValues??!0;Array.isArray(r.searchTerms)&&(r.searchTerms.length>1||1===r.searchTerms.length&&(!g||""!==r.searchTerms[0]))&&(s._columnFilters[r.columnId]={columnId:r.columnId,operator:r.operator,searchTerms:r.searchTerms,columnDef:u,type:u.type??p.string});const y=s._gridOptions.backendServiceApi,M=y?W.remote:W.local;if(a&&(yield s.emitFilterChanged(M,!0)),y){const L=y?.service;L?.updateFilters&&(L.updateFilters(s._columnFilters,!0),c&&s.backendUtilities?.refreshBackendDataset(s._gridOptions))}else s._dataView.setFilterArgs({columnFilters:s._columnFilters,grid:s._grid}),s._gridOptions.enableTreeData&&s.refreshTreeDataFilters(),s._dataView.refresh();a&&(yield s.emitFilterChanged(M))}return!0}).apply(this,arguments)}drawFilterTemplate(e,s){let r;if("string"==typeof s){if(r=document.querySelector(s),null===r)return null}else r=s;const a="string"==typeof e?this.sharedService.allColumns.find(u=>u.id===e):e;if("selector"!==(a?.id??"")&&a?.filterable){let u,g;const y=this.filterFactory.createFilter(a.filter);g=a&&a.filter&&a.filter.operator||y&&y.operator,this._columnFilters[a.id]?(u=this._columnFilters[a.id].searchTerms||void 0,g=this._columnFilters[a.id].operator||void 0):a.filter&&(u=a.filter.searchTerms||void 0,this.updateColumnFilters(u,a,g));const M={grid:this._grid,operator:g,searchTerms:u,columnDef:a,filterContainerElm:r,callback:this.callbackSearchEvent.bind(this)};return y&&(y.init(M),u&&y.setValues&&y.setValues(u,g)),y}return null}addFilterTemplateToHeaderRow(e,s=!0){const r=e.column,a=r?.id??"";if("selector"!==a&&r?.filterable){let c,u;const g=this.filterFactory.createFilter(r.filter);u=r&&r.filter&&r.filter.operator||g&&g.operator,this._columnFilters[r.id]?(c=this._columnFilters[r.id].searchTerms||void 0,u=this._columnFilters[r.id].operator||void 0):r.filter&&(c=r.filter.searchTerms||void 0,this.updateColumnFilters(c,r,u));const y={grid:this._grid,operator:u,searchTerms:c,columnDef:r,filterContainerElm:this._grid.getHeaderRowColumn(a),callback:this.callbackSearchEvent.bind(this)};if(g){g.init(y,s);const M=this._filtersMetadata.findIndex(L=>g.columnDef.id===L.columnDef.id);-1===M?this._filtersMetadata.push(g):this._filtersMetadata[M]=g,c&&g.setValues&&g.setValues(c,u)}}}callbackSearchEvent(e,s){if(s){const r=e?.target?e.target.value:void 0,a=s.searchTerms&&Array.isArray(s.searchTerms)?s.searchTerms:r?[r]:void 0,c=s.columnDef||null,u=c?.id??"",g=c?.filter?.type??c?.type??p.string,y=s.operator||void 0,M=a&&Array.isArray(a),L=M&&a&&a.length,q={...this._columnFilters},pe=c.filter?.emptySearchTermReturnAllValues??!0;let Ie;if(c&&u)if(!M||0===L||1===L&&Array.isArray(a)&&pe&&""===a[0])delete this._columnFilters[u];else{const Je=`${u}`,Xe={columnId:Je,columnDef:c,parsedSearchTerms:[],type:g,targetSelector:this.getSelectorStringFromElement(e?.target)},rt=this.parseFormInputFilterConditions(a,Xe);Xe.operator=y||rt.operator||Le(g),Ie=Ll(rt.searchTerms,g),void 0!==Ie&&(Xe.parsedSearchTerms=Ie),Xe.searchTerms=rt.searchTerms||[],this._columnFilters[Je]=Xe}const Ve=e&&"function"!=typeof e.isPropagationStopped?(0,A.extend)({},new H,e):e,Ge=e?.key;if(this._onSearchChange&&(s.forceOnSearchChangeEvent||"Enter"===Ge||!(0,dn.j)(q,this._columnFilters))){const Je={clearFilterTriggered:s.clearFilterTriggered,shouldTriggerQuery:s.shouldTriggerQuery,columnId:u,columnDef:c,columnFilters:this._columnFilters,operator:y||Le(g),searchTerms:a,parsedSearchTerms:Ie,grid:this._grid,target:e?.target};!1===this.pubSubService.publish("onBeforeSearchChange",Je)?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(Je,Ve)}}}disableAllFilteringCommands(e=!0){const s=this._grid.getColumns();s.forEach(a=>{a?.header?.menu&&a.header.menu.commandItems?.forEach(c=>{c&&"string"!=typeof c&&"clear-filter"===c.command&&(c.hidden=e)})});const r=this._gridOptions.gridMenu?.commandItems;return r&&r.forEach(a=>{if(a&&"string"!=typeof a){const c=a.command;("clear-filter"===c||"toggle-filter"===c)&&(a.hidden=e)}}),s}extractBasicFilterDetails(e){const s=[];if(e&&"object"==typeof e)for(const r of Object.keys(e)){const{operator:a,searchTerms:c}=e[`${r}`];s.push({columnId:r,operator:a,searchTerms:c})}return s}getSelectorStringFromElement(e){return e?.localName?e?.className?`${e.localName}.${Array.from(e.classList).join(".")}`:e.localName:""}removeAllColumnFiltersProperties(){"object"==typeof this._columnFilters&&Object.keys(this._columnFilters).forEach(e=>{e&&this._columnFilters[e]&&delete this._columnFilters[e]})}subscribeToOnHeaderRowCellRendered(e){this._eventHandler.subscribe(e.onBeforeHeaderRowCellDestroy,(s,r)=>{this._filtersMetadata.find(c=>c.columnDef.id===r.column.id)?.destroy?.()})}updateColumnFilters(e,s,r){const a=s.filter?.type??s.type??p.string,c=Ll(e,a);e&&s&&(this._columnFilters[s.id]={columnId:s.id,columnDef:s,searchTerms:e,operator:r,parsedSearchTerms:c,type:a})}}const ar={skipError:!1,triggerEvent:!0},dr={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},ja={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},wl={autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1};class Cc{constructor(e,s,r,a,c,u,g){this.gridStateService=e,this.filterService=s,this.pubSubService=r,this.paginationService=a,this.sharedService=c,this.sortService=u,this.treeDataService=g}get _dataView(){return this._grid?.getData()}get _gridOptions(){return this._grid?.getOptions()??{}}dispose(){this._rowSelectionPlugin?.dispose()}init(e){this._grid=e}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearPinning(e=!0){const s=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),e&&Array.isArray(s)&&this.sharedService.slickGrid.setColumns(s)}setPinning(e,s=!0,r=!1,a=!0){(0,A.isObjectEmpty)(e)?this.clearPinning():(this.sharedService.slickGrid.setOptions(e,r,a),this.sharedService.gridOptions={...this.sharedService.gridOptions,...e}),s&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(e){if(!(e&&e.grid&&e.grid.getColumns&&e.grid.getDataItem))throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object or it\'s "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndex(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndexes(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');const s=[];return Array.isArray(e)&&e.forEach(r=>{s.push(this._grid.getDataItem(r))}),s}getSelectedRows(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');const e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)}hideColumnById(e,s){if(s={...wl,...s},this._grid&&this._grid.getColumns&&this._grid.setColumns){const r=this._grid.getColumns(),a=r.findIndex(c=>c.id===e);if(a>=0){const c=(0,A.arrayRemoveItemByIndex)(r,a);this.sharedService.visibleColumns=c,this._grid.setColumns(c);const u=this.sharedService.allColumns.findIndex(g=>g.id===e);return u&&(s?.hideFromColumnPicker&&(this.sharedService.allColumns[u].excludeFromColumnPicker=!0),s?.hideFromGridMenu&&(this.sharedService.allColumns[u].excludeFromGridMenu=!0)),s?.autoResizeColumns&&this._grid.autosizeColumns(),s?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:c}),a}}return-1}hideColumnByIds(e,s){if(s={...wl,...s},Array.isArray(e)){for(const r of e)this.hideColumnById(r,{...s,triggerEvent:!1,autoResizeColumns:!1});s?.autoResizeColumns&&this._grid.autosizeColumns(),s?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:this.sharedService.visibleColumns})}}highlightRow(e,s){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new Kr(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),s||=this._gridOptions.rowHighlightDuration,Array.isArray(e)?e.forEach(r=>this._grid.highlightRow(r)):this._grid.highlightRow(e,s)}HighlightSelectedRow(e){}setSelectedRow(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows([e])}setSelectedRows(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows(e)}renderGrid(){"function"==typeof this._grid?.invalidate&&this._grid.invalidate()}resetGrid(e){if(this.clearPinning(!1),this._grid){const s=this.sharedService.allColumns||[];Array.isArray(s)&&s.length>0&&(this._grid.setColumns(s),this._gridOptions?.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}"function"==typeof this.filterService?.clearFilters&&this.filterService.clearFilters(),"function"==typeof this.sortService?.clearSorting&&this.sortService.clearSorting()}addItem(e,s){const r={...dr,...s};if(!(r?.skipError||this._grid&&this._gridOptions&&this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");const a=this._gridOptions.datasetIdPropertyName||"id";if(!(r?.skipError||e&&e.hasOwnProperty(a)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${a}" property`);if(this._gridOptions?.enableTreeData&&"top"===s?.position)throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');const c=r?.position;"bottom"===c||this._gridOptions?.enableTreeData?this._dataView.addItem(e):this._dataView.insertItem(0,e);let u=0;const g=e?.[a]??"";return this._gridOptions?.enableTreeData?(this.invalidateHierarchicalDataset(),u=this._dataView.getRowById(g),r.scrollRowIntoView&&this._grid.scrollRowIntoView(u??0,!1)):r.resortGrid?(this._dataView.reSort(),u=this._dataView.getRowById(g)):(u="bottom"===c?this._dataView.getRowById(g):0,r.scrollRowIntoView&&this._grid.scrollRowIntoView(u??0)),r.highlightRow&&void 0!==u&&this.highlightRow(u),void 0!==u&&r.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(u),r.triggerEvent&&this.pubSubService.publish("onItemAdded",e),!this._gridOptions?.backendServiceApi&&this._gridOptions.enablePagination&&("bottom"===c?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),u}addItems(e,s){const r={...dr,...s},a=this._gridOptions.datasetIdPropertyName||"id",c=r?.position,u=[];if(!Array.isArray(e))return[this.addItem(e,r)||0];if(this._dataView.beginUpdate(!0),"bottom"===c||this._gridOptions?.enableTreeData?this._dataView.addItems(e):this._dataView.insertItems(0,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData){this.invalidateHierarchicalDataset();const y=this._dataView.getRowById(e[0]?.[a]??"");r.scrollRowIntoView&&this._grid.scrollRowIntoView(y??0,!1)}else r.resortGrid&&this._dataView.reSort();return c&&r.scrollRowIntoView&&!this._gridOptions?.enableTreeData&&("bottom"===c?this._grid.navigateBottom():this._grid.navigateTop()),e.forEach(g=>u.push(this._dataView.getRowById(g[a]))),r.highlightRow&&this.highlightRow(u),r.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(u),r.triggerEvent&&this.pubSubService.publish("onItemAdded",e),u}deleteItem(e,s){s={...ar,...s};const r=this._gridOptions.datasetIdPropertyName||"id";if(!(s?.skipError||e&&e.hasOwnProperty(r)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${r}" property`);return this.deleteItemById(e[r],s)}deleteItems(e,s){s={...ar,...s};const r=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return this.deleteItem(e,s),[e[r]];this._dataView.beginUpdate(!0);const a=[];return e.forEach(c=>{void 0!==c?.[r]&&a.push(c[r])}),this._dataView.deleteItems(a),this._dataView.endUpdate(),s.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),a}deleteItemById(e,s){if(s={...ar,...s},!s?.skipError&&null==e)throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection())&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),s.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}deleteItemByIds(e,s){if(s={...ar,...s},Array.isArray(e)){this._dataView.beginUpdate(!0);for(let r=0;r<e.length;r++)null!==e[r]&&this.deleteItemById(e[r],{triggerEvent:!1});return this._dataView.endUpdate(),s.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}return[]}updateItem(e,s){s={...ja,...s};const r=this._gridOptions.datasetIdPropertyName||"id",a=e&&e.hasOwnProperty(r)?e[r]:void 0;if(!s?.skipError&&void 0===a)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${r}" property`);return this.updateItemById(a,e,s)}updateItems(e,s){s={...ja,...s};const r=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return[this.updateItem(e,s)];this._dataView.beginUpdate(!0);const a=[],c=[];return e.forEach(u=>{const g=u&&u.hasOwnProperty(r)?u[r]:void 0;if(c.push(g),void 0!==this._dataView.getIdxById(g)){const y=this._dataView.getRowById(g);void 0!==y&&(a.push(y),this._grid.updateRow(y))}}),this._dataView.updateItems(c,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),s.highlightRow&&this.highlightRow(a),s.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(a),s.triggerEvent&&this.pubSubService.publish("onItemUpdated",e),a}updateItemById(e,s,r){if(r={...ja,...r},!r?.skipError&&void 0===e)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');const a=this._dataView.getRowById(e);if(!r?.skipError&&!s&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${e}`);return void 0!==this._dataView.getIdxById(e)&&(this._dataView.updateItem(e,s),void 0!==a&&this._grid.updateRow(a),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),r.scrollRowIntoView&&void 0!==a&&this._grid.scrollRowIntoView(a),r.highlightRow&&void 0!==a&&this.highlightRow(a),void 0!==a&&r.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(a),r.triggerEvent&&this.pubSubService.publish("onItemUpdated",s)),a}upsertItem(e,s){s={...dr,...s};const r=this._gridOptions.datasetIdPropertyName||"id",a=e&&e.hasOwnProperty(r)?e[r]:void 0;if(!s?.skipError&&void 0===a)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${r}" property`);return this.upsertItemById(a,e,s)}upsertItems(e,s){if(s={...dr,...s},!Array.isArray(e))return[this.upsertItem(e,s)];this._dataView.beginUpdate(!0);const r=[];e.forEach(c=>{r.push(this.upsertItem(c,{...s,highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1}))}),this._dataView.endUpdate();const a=r.map(c=>void 0!==c.added?c.added:c.updated);if(s.highlightRow&&this.highlightRow(a),s.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(a),s.triggerEvent){this.pubSubService.publish("onItemUpserted",e);const c=r.filter(g=>void 0!==g.added);Array.isArray(c)&&c.length>0&&this.pubSubService.publish("onItemAdded",c);const u=r.filter(g=>void 0!==g.updated);Array.isArray(u)&&u.length>0&&this.pubSubService.publish("onItemUpdated",u)}return r}upsertItemById(e,s,r){let c,u,a=!1;if(r={...dr,...r},!r?.skipError&&void 0===e&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');return void 0===this._dataView.getRowById(e)?(c=this.addItem(s,r),a=!0):(u=this.updateItem(s,{highlightRow:r.highlightRow,selectRow:r.selectRow,triggerEvent:r.triggerEvent}),a=!1),r.triggerEvent&&(this.pubSubService.publish("onItemUpserted",s),this.pubSubService.publish(a?"onItemAdded":"onItemUpdated",s)),{added:c,updated:u}}invalidateHierarchicalDataset(e){if(this._gridOptions?.enableTreeData&&this.treeDataService){const s=e??this._dataView.getItems(),r=this.sortService.getCurrentColumnSorts(),a=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(s||[],this.sharedService.allColumns,this._gridOptions,r);this.sharedService.hierarchicalDataset=a.hierarchical,this.filterService.refreshTreeDataFilters(e),this._dataView.setItems(a.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!(!this._gridOptions.enableRowSelection&&!this._gridOptions.enableCheckboxSelector||!e)}}class Dg{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new Fe}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(e){const s=e?.getData();this._eventHandler.subscribe(e.onBeforeEditCell,(r,a)=>{if(!(r&&a&&e&&void 0!==a.cell&&e.getColumns&&e.getDataItem))return;const c=e.getColumns()[a.cell];if("function"==typeof c.onBeforeEditCell){const u={row:a.row,cell:a.cell,dataView:s,grid:e,columnDef:c,dataContext:e.getDataItem(a.row)};c.onBeforeEditCell(r instanceof H?r.getNativeEvent():r,u)}})}bindOnCellChange(e){const s=e?.getData();this._eventHandler.subscribe(e.onCellChange,(r,a)=>{if(!(r&&a&&e&&void 0!==a.cell&&e.getColumns&&e.getDataItem))return;const c=e.getColumns()[a.cell];if("function"==typeof c.onCellChange){const u={row:a.row,cell:a.cell,dataView:s,grid:e,columnDef:c,dataContext:e.getDataItem(a.row)};c.onCellChange(r instanceof H?r.getNativeEvent():r,u)}})}bindOnClick(e){const s=e?.getData();this._eventHandler.subscribe(e.onClick,(r,a)=>{if(!(r&&a&&e&&void 0!==a.cell&&e.getColumns&&e.getDataItem))return;const c=e.getColumns()[a.cell];if("function"==typeof c.onCellClick){const u={row:a.row,cell:a.cell,dataView:s,grid:e,columnDef:c,dataContext:e.getDataItem(a.row)};c.onCellClick(r instanceof H?r.getNativeEvent():r,u)}})}}class tu{constructor(e,s,r,a,c,u){this.extensionService=e,this.filterService=s,this.pubSubService=r,this.sharedService=a,this.sortService=c,this.treeDataService=u,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0,this._eventHandler=new Fe}get _dataView(){return this._grid?.getData()??{}}get _gridOptions(){return this._grid?.getOptions()??{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(e){this._selectedRowDataContextIds=e}init(e){this._grid=e,this.subscribeToAllGridChanges(e)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(e,s=!0,r=!1){if(Array.isArray(e)&&e.length>0){const a=this.getAssociatedGridColumns(this._grid,e);if(a&&Array.isArray(a)&&a.length>0){if(Array.isArray(this.sharedService.allColumns)){const c=[];this._gridOptions.enableCheckboxSelector&&c.push({columnId:"_checkbox_selector",columnIndexPosition:this._gridOptions?.checkboxSelector?.columnIndexPosition??0}),this._gridOptions.enableRowDetailView&&c.push({columnId:"_detail_selector",columnIndexPosition:this._gridOptions?.rowDetailView?.columnIndexPosition??0}),this._gridOptions.enableRowMoveManager&&c.push({columnId:"_move",columnIndexPosition:this._gridOptions?.rowMoveManager?.columnIndexPosition??0}),this.addColumnDynamicWhenFeatureEnabled(c,this.sharedService.allColumns,a)}a.forEach(c=>c.originalWidth=c.width||c.originalWidth),this._grid.setColumns(a),this.sharedService.visibleColumns=a,s?this._grid.autosizeColumns():(r||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){const{frozenColumn:e,frozenRow:s,frozenBottom:r}=this.sharedService.gridOptions,a={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:s,frozenBottom:r}},c=this.getCurrentPagination();if(c&&(a.pagination=c),this.hasRowSelectionEnabled()){const u=this.getCurrentRowSelections();u&&(a.rowSelection=u)}if(this._gridOptions?.enableTreeData){const u=this.getCurrentTreeDataToggleState();u&&(a.treeData=u)}return a}getColumns(){return this._columns}getAssociatedCurrentColumns(e){const s=[];return e&&Array.isArray(e)&&e.forEach(r=>{r?.id&&s.push({columnId:r.id,cssClass:r.cssClass||"",headerCssClass:r.headerCssClass||"",width:r.width||0})}),s}getAssociatedGridColumns(e,s){const r=[],a=this.sharedService.allColumns||e.getColumns();return s&&Array.isArray(s)&&s.forEach(c=>{const u=a.find(g=>g.id===c.columnId);u?.id&&r.push({...u,cssClass:c.cssClass||u.cssClass,headerCssClass:c.headerCssClass||u.headerCssClass,width:c.width})}),this._columns=r,r}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){if(this._gridOptions?.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService?.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){if(this._gridOptions?.enablePagination){if(!this._gridOptions.backendServiceApi)return this.sharedService.currentPagination;{const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentPagination)return e.getCurrentPagination()}}return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){if(this._gridOptions?.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService?.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){return this._gridOptions?.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){let e=!1;if(this._gridOptions?.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){const s=this._gridOptions.dataView.syncGridSelection;"boolean"==typeof s?e=this._gridOptions.dataView.syncGridSelection:"object"==typeof s&&(e=s.preserveHidden||s.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(e){const r=this.getAssociatedCurrentColumns(e||this._columns);this.pubSubService.publish("onGridStateChanged",{change:{newValues:r,type:I.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(e=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,e&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this.extensionService?.getExtensionByName?.(b.rowSelection)?.instance&&this._grid.setSelectedRows([])}subscribeToAllGridChanges(e){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",s=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:I.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:I.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",s=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:I.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:I.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(b.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(b.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),this.bindSlickGridOnSetOptionsEventToGridStateChange(e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,(s,r)=>{const a=(this._selectedRowIndexes||[]).slice(),c=(this.selectedRowDataContextIds||[]).slice();this.selectedRowDataContextIds=r.filteredIds,this._selectedRowIndexes=r.rows,(0,dn.j)(this.selectedRowDataContextIds,c)&&(0,dn.j)(this._selectedRowIndexes,a)||this.pubSubService.publish("onGridStateChanged",{change:{newValues:{gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:r.selectedRowIds,filteredDataContextIds:r.filteredIds},type:I.rowSelection},gridState:this.getCurrentGridState()})}),this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuHideColumns",s=>{const r=this.getAssociatedCurrentColumns(s);this.pubSubService.publish("onGridStateChanged",{change:{newValues:r,type:I.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",s=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:I.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",s=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:s,type:I.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(e,s,r){e.sort((a,c)=>a.columnIndexPosition-c.columnIndexPosition),e.forEach(a=>{const c=s.findIndex(g=>g.id===a.columnId),u=r.findIndex(g=>g.id===a.columnId);if(c>=0&&-1===u){const g=s[c];0===c?r.unshift(g):r.splice(c,0,g)}})}bindExtensionAddonEventToGridStateChange(e,s){const a=this.extensionService?.getExtensionByName?.(e)?.instance?.[s];a&&"function"==typeof a.subscribe&&this._eventHandler.subscribe(a,(c,u)=>{const g=u?.columns,y=this.getAssociatedCurrentColumns(g);this.pubSubService.publish("onGridStateChanged",{change:{newValues:y,type:I.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(e,s){const r=s?.[e];r&&"function"==typeof r.subscribe&&this._eventHandler.subscribe(r,()=>{const a=s.getColumns(),c=this.getAssociatedCurrentColumns(a);this.pubSubService.publish("onGridStateChanged",{change:{newValues:c,type:I.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(e){this._eventHandler.subscribe(e.onSetOptions,(r,a)=>{const{frozenBottom:c,frozenColumn:u,frozenRow:g}=a.optionsBefore,{frozenBottom:y,frozenColumn:M,frozenRow:L}=a.optionsAfter;if(c!==y||u!==M||g!==L){const q={frozenBottom:y,frozenColumn:M,frozenRow:L},pe=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:q,type:I.pinning},gridState:pe})}})}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!(!this._gridOptions.enableRowSelection&&!this._gridOptions.enableCheckboxSelector||!e)}}class nu{constructor(e,s){this.extensionUtility=e,this.pubSubService=s,this._subscriptions=[],this._eventHandler=new Fe}get _dataView(){return this._grid?.getData()??{}}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}init(e){if(this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel){this._gridOptions.enableTranslate&&this.translateGroupingAndColSpan(),this._eventHandler.subscribe(e.onSort,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsResized,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsReordered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._subscriptions.push(this.pubSubService.subscribe("onColumnPickerColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onHeaderMenuHideColumns",()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this.pubSubService.subscribe("onGridMenuColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onGridMenuMenuClose",()=>this.renderPreHeaderRowGroupingTitles()));const s=e.getPluginByName("Resizer");s?.onGridAfterResize&&this._eventHandler.subscribe(s.onGridAfterResize,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onSetOptions,(r,a)=>{a?.optionsBefore?.frozenColumn!==a?.optionsAfter?.frozenColumn&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75)}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}delayRenderPreHeaderRowGroupingTitles(e=0){window.setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),e)}renderPreHeaderRowGroupingTitles(){const e=this._columnDefinitions.length;if(void 0!==this._gridOptions?.frozenColumn&&this._gridOptions.frozenColumn>=0){const s=this._gridOptions.frozenColumn;this.renderHeaderGroups(this._grid.getPreHeaderPanelLeft(),0,s+1),this.renderHeaderGroups(this._grid.getPreHeaderPanelRight(),s+1,e)}else this.renderHeaderGroups(this._grid.getPreHeaderPanel(),0,e)}renderHeaderGroups(e,s,r){(0,A.emptyElement)(e),e.className="slick-header-columns",e.style.left="-1000px",e.style.width=`${this._grid.getHeadersWidth()}px`,e.parentElement?.classList.add("slick-header");const a=this._grid.getHeaderColumnWidthDiff();let c,u=null,g="",y=0;const M=this._gridOptions?.frozenHeaderWidthCalcDifferential??0,L=void 0!==this._gridOptions?.frozenColumn&&this._gridOptions.frozenColumn>=0;for(let q=s;q<r;q++)c=this._columnDefinitions[q],c&&(g===c.columnGroup&&q>0?(y+=c.width||0,u?.style&&(u.style.width=y-a-M+"px")):(y=c.width||0,u=(0,A.createDomElement)("div",{className:"slick-state-default slick-header-column "+(L?"frozen":""),dataset:{group:c.columnGroup},style:{width:y-a+"px"}}),(0,A.createDomElement)("span",{className:"slick-column-name",textContent:c.columnGroup||""},u),e.appendChild(u)),g=c.columnGroup||"")}translateGroupingAndColSpan(){const e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()}}class iu{constructor(e,s,r,a){this.pubSubService=e,this.sharedService=s,this.backendUtilities=r,this.rxjs=a,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[],this._isCursorBased=!1,this._eventHandler=new Fe}get dataView(){return this.grid?.getData()??{}}set paginationOptions(e){this._paginationOptions=e}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this._initialized&&this.refreshPagination()}get isCursorBased(){return this._isCursorBased}addRxJsResource(e){this.rxjs=e}init(e,s,r){if(this._availablePageSizes=s.pageSizes||[],this.grid=e,this._backendServiceApi=r,this._paginationOptions=s,this._isLocalGrid=!r,this._pageNumber=s.pageNumber||1,this._isCursorBased=r?.options?.useCursor??!1,r&&(!r.service||!r.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(c,u)=>{this._totalItems!==u.totalRows&&(this.updateTotalItems(u.totalRows),this._previousPagination={pageNumber:u.pageNum,pageSize:u.pageSize,pageSizes:this.availablePageSizes,totalItems:u.totalRows})}),queueMicrotask(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",()=>this.resetPagination())),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>this.resetPagination())),r?.options?.infiniteScroll&&this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",c=>this.processOnItemAddedOrRemoved(c,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",c=>this.processOnItemAddedOrRemoved(c,!1)))),this.refreshPagination(!1,!1,!0);const a=this.getFullPagination();this._previousPagination={pageNumber:a.pageNumber,pageSize:a.pageSize,pageSizes:a.pageSizes,totalItems:this.totalItems},this._initialized=!0,Z(s,"totalItems",c=>this._totalItems=c)}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(e,s,r=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,r?this.processOnPageChanged(this._pageNumber,s):Promise.resolve(this.getFullPagination())}goToFirstPage(e,s=!0){return this._pageNumber=1,s?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToLastPage(e,s=!0){return this._pageNumber=this._pageCount||1,s?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToNextPage(e,s=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,s?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(e,s,r=!0){if(this.isCursorBased)return Promise.resolve(!1);const a=this._pageNumber;return this._pageNumber=e<1?1:e>this._pageCount?this._pageCount:e,this._pageNumber!==a?r?this.processOnPageChanged(this._pageNumber,s):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(e,s=!0){return this._pageNumber>1?(this._pageNumber--,s?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(e=!1,s=!0,r=!1){const a={...this.getFullPagination()};if(this._paginationOptions){const u=this._paginationOptions;this._itemsPerPage||(this._itemsPerPage=this._isLocalGrid?u.pageSize:+(this._backendServiceApi?.options?.paginationOptions?.first?this._backendServiceApi.options.paginationOptions.first:u.pageSize)),(e||this._totalItems!==u.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&u.pageNumber&&u.pageNumber>1&&(this._pageNumber=u.pageNumber||1),1===this._pageNumber&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=u.pageSizes||[],!this._totalItems&&u.totalItems&&(this._totalItems=u.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),s&&!(0,dn.j)(a,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),r&&!(0,dn.j)(a,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());const c=this.getFullPagination();this._previousPagination={pageNumber:c.pageNumber,pageSize:c.pageSize,pageSizes:c.pageSizes,totalItems:this.totalItems}}resetPagination(e=!0,s=!0){this._isLocalGrid&&this.dataView&&this.sharedService?.gridOptions?.enablePagination&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,e),s&&this.grid.scrollTo(0)}togglePaginationVisibility(e){if(this.grid&&this.sharedService?.gridOptions){const s=void 0!==e?e:!this.sharedService.gridOptions.enablePagination;s&&this.goToFirstPage(),this._isLocalGrid&&this.dataView&&this.dataView.setPagingOptions({pageSize:e?this._itemsPerPage:0,pageNum:0}),this.sharedService.gridOptions.enablePagination=s,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:s})}}processOnPageChanged(e,s,r){return console.assert(!this.isCursorBased||r,"Configured for cursor based pagination - cursorArgs expected"),!1===this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((a,c)=>{if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:e-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),a(this.getFullPagination());else{const u=+this._itemsPerPage,g=new Date;if(this._backendServiceApi?.preProcess&&this._backendServiceApi.preProcess(),this._backendServiceApi?.process){const y=this._backendServiceApi.service.processOnPaginationChanged(s,this.isCursorBased&&r?r:{newPage:e,pageSize:u}),M=this._backendServiceApi.process(y);M instanceof Promise?M.then(L=>{this.backendUtilities?.executeBackendProcessesCallback(g,L,this._backendServiceApi,this._totalItems);const q=this.getFullPagination();this._previousPagination={pageNumber:q.pageNumber,pageSize:q.pageSize,pageSizes:q.pageSizes,totalItems:this.totalItems},a(this.getFullPagination())}).catch(L=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(L,this._backendServiceApi),(!this._backendServiceApi?.onError||!this.backendUtilities?.onBackendError)&&c(M)}):this.rxjs?.isObservable(M)&&this._subscriptions.push(M.subscribe(L=>{const q=this.getFullPagination();this._previousPagination={pageNumber:q.pageNumber,pageSize:q.pageSize,pageSizes:q.pageSizes,totalItems:this.totalItems},a(this.backendUtilities?.executeBackendProcessesCallback(g,L,this._backendServiceApi,this._totalItems))},L=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(L,this._backendServiceApi),(!this._backendServiceApi?.onError||!this.backendUtilities?.onBackendError)&&c(M)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){((this._pageNumber-1)*this._itemsPerPage>this._totalItems||this._totalItems>0&&0===this._pageNumber)&&(this._pageNumber=1),0===this._totalItems?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),(this._dataTo>this._totalItems||this._totalItems<this._itemsPerPage)&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){const e=this._previousPagination?.pageNumber!==this.getFullPagination().pageNumber,s=this._previousPagination?.pageSize!==this.getFullPagination().pageSize;s&&this.changeItemPerPage(this._previousPagination?.pageSize??0,null,!1),e&&this.goToPageNumber(this._previousPagination?.pageNumber??0,null,!1),(e||s)&&(this.refreshPagination(),this._backendServiceApi?.service?.updatePagination?.(this._previousPagination?.pageNumber??0,this._previousPagination?.pageSize??0))}setCursorBased(e){this._isCursorBased=e,e&&this.setCursorPageInfo({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1}),this.goToFirstPage(),this.pubSubService.publish("onPaginationSetCursorBased",{isCursorBased:e})}setCursorPageInfo(e){this._cursorPageInfo=e}updateTotalItems(e,s=!1){this._totalItems=e,this._paginationOptions&&(this._paginationOptions.totalItems=e,this.refreshPagination(!1,s))}processOnItemAddedOrRemoved(e,s=!0){if(null!==e){const r=this._dataTo,a=Array.isArray(e)?e.length:1,c=s?+a:-a;this._totalItems+=c,this.recalculateFromToIndexes(),this._dataTo=r+c,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}class ru{get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get dataView(){return this._grid?.getData()}get gridUid(){return this._grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(e){this._intervalRetryDelay=e}get resizeByContentOptions(){return this.gridOptions?.resizeByContentOptions??{}}constructor(e){this.pubSubService=e,this._intervalRetryDelay=200,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new Fe,this._bindingEventService=new St.P}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),window.clearInterval(this._intervalId),window.clearTimeout(this._timer),"container"===this.gridOptions.autoResize?.resizeDetection&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(e,s){if(!e||!this.gridOptions||!s)throw new Error('\n      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.\n      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.');this._grid=e,this._gridContainerElm=s;const r=this.gridOptions?.gridHeight||this.gridOptions?.gridWidth?{height:this.gridOptions?.gridHeight,width:this.gridOptions?.gridWidth}:void 0;this._autoResizeOptions=this.gridOptions?.autoResize??{container:"grid1",bottomPadding:0},r?.width&&s?.style&&(s.style.width="string"==typeof r.width?r.width:`${r.width}px`),this._gridDomElm=e.getContainerNode(),this._pageContainerElm="string"==typeof this._autoResizeOptions.container&&"string"==typeof this._autoResizeOptions.container?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container,r&&(this._fixedHeight=r.height,this._fixedWidth=r.width),this.gridOptions.enableAutoResize&&this.bindAutoResizeDataGrid(),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),this.gridOptions.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",a=>{this.handleSingleColumnResizeByContent(a.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(a,c)=>{this.handleSingleColumnResizeByContent(c.triggeredByColumn)}))}bindAutoResizeDataGrid(e){if("container"===this.gridOptions.autoResize?.resizeDetection){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error('\n          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"\n          You can fix this by setting your gridOption.autoResize.container');this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm)}else{if(void 0===this._gridDomElm)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(s=>console.log("Error:",s)),this.resizeGrid(10,e),this._bindingEventService.bind(window,"resize",this.handleResizeGrid.bind(this,e))}}handleResizeGrid(e){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,e),this.resizeGrid(0,e))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}calculateGridNewDimensions(e){const s=e?.autoResize??{},r=(0,A.getOffset)(this._gridDomElm);if(!window||!this._gridDomElm)return null;let a=void 0!==s?.bottomPadding?s.bottomPadding:20;a&&e.enablePagination&&(a+=35),a&&e.showCustomFooter&&(a+=parseInt(`${this.gridOptions?.customFooterOptions?.footerHeight??25}`,10));let c=0,u=0;"container"===s.calculateAvailableSizeBy?c=(0,A.getInnerSize)(this._pageContainerElm,"height")||0:(c=window.innerHeight||0,u=r.top);const g=c-u-a,y=(0,A.getInnerSize)(this._pageContainerElm,"width")||window.innerWidth||0,M=s?.maxHeight,L=s?.minHeight??180,q=s?.maxWidth,pe=s?.minWidth??300;let Ie=g,Ve=s?.rightPadding?y-s.rightPadding:y;return Ie<L&&(Ie=L),M&&Ie>M&&(Ie=M),Ve<pe&&(Ve=pe),q&&Ve>q&&(Ve=q),{height:this._fixedHeight||Ie,width:this._fixedWidth||Ve}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(e){this._resizePaused=e}resizeGrid(e,s){return new Promise(r=>{(e=e||0)>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>r(this.resizeGridCallback(s)),e)):r(this.resizeGridCallback(s))})}resizeGridCallback(e){const s=this.resizeGridWithDimensions(e);return this.pubSubService.publish("onGridAfterResize",s),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!this._lastDimensions?.width||s?.width!==this._lastDimensions?.width)&&this.resizeColumnsByCellContent(!1),this._lastDimensions=s,s}resizeColumnsManual(){let e=this._gridDomElm.getBoundingClientRect().width,s=this._grid.getColumns().map(r=>r.ColumnWidth).reduce((r,a)=>r+a,0);e>s&&this._grid.getColumns&&this._grid.getColumns().length>0&&(this._grid.getColumns()[this._grid.getColumns().length-1].width=(this._grid.getColumns()[this._grid.getColumns().length-1]?.ColumnWidth?this._grid.getColumns()[this._grid.getColumns().length-1]?.ColumnWidth:0)+(e-s)-20)}resizeGridWithDimensions(e){const s=this.calculateGridNewDimensions(this.gridOptions);if((e||s)&&this._gridDomElm){const r=e?.height?e.height:s?.height,a=e?.width?e.width:s?.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${r}px`),this._gridDomElm.style.width=`${a}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${a}px`),this.gridOptions.gridId?.startsWith("slkgrdRPT")||this.resizeColumnsManual(),this._grid?.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),this._grid&&this.gridOptions?.enableAutoSizeColumns?this.gridUid&&document.querySelector(this.gridUidSelector)&&(!this._lastDimensions||this._lastDimensions.height!==r||this._lastDimensions.width!==a)&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!this._lastDimensions?.width||a!==this._lastDimensions?.width)&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:r||0,width:a||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(e=!0){this._isStopResizeIntervalRequested=e}resizeColumnsByCellContent(e=!1){const s=this._grid.getColumns(),r=this.dataView.getItems(),a={};let c=!1,u=0;const g=this._gridContainerElm?.offsetWidth??0;if(!Array.isArray(r)||0===r.length||!e&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<g)return void this._grid.autosizeColumns();if(this._hasResizedByContentAtLeastOnce&&this.gridOptions?.resizeByContentOnlyOnFirstLoad&&!e)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),0===this._totalColumnsWidthByContent||e){for(const L of s)a[L.id]=L.originalWidth??L.minWidth??0;u=this.calculateCellWidthByReadingDataset(s,a,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let M=0;for(const L of s)L.originalWidth&&!(L.resizeAlwaysRecalculateWidth??this.resizeByContentOptions.alwaysRecalculateColumnWidth)?L.width=L.originalWidth:void 0!==a[L.id]&&(L.rerenderOnResize&&(c=!0),this.applyNewCalculatedColumnWidthByReference(L,a[L.id])),M+=L.width||0,this._totalColumnsWidthByContent=M}this._grid.setColumns(s),this._hasResizedByContentAtLeastOnce=!0;const y={};for(const M of s)y[M.id]=M.width;this._totalColumnsWidthByContent>g?this._grid.reRenderColumns(c):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:u,calculateColumnWidths:y})}calculateCellWidthByReadingDataset(e,s,r=1e3,a){const c=Array.isArray(e)?e:[e],u=this.dataView.getItems();let g=0;for(const[y,M]of u.entries()){if(y>r)break;Array.isArray(c)&&"object"==typeof s&&c.forEach((L,q)=>{const pe=this.calculateCellWidthByContent(M,L,y,a??q,s[L.id]);void 0!==pe&&(s[L.id]=pe)}),g=y+1}return g}calculateCellWidthByContent(e,s,r,a,c){const u=this.resizeByContentOptions.cellCharWidthInPx??7;if(!s.originalWidth){const g=s?.resizeCharWidthInPx??u,y=Co(s?.formatter,r,a,s,e,this._grid),M=(0,A.isPrimitiveOrHTML)(y)?(0,A.stripTags)(y):"",L=Math.ceil(M.length*g),q=s.resizeMaxWidthThreshold;s&&(void 0===c||L>c)&&(c=void 0!==q&&L>q?q:void 0!==s.maxWidth&&L>s.maxWidth?s.maxWidth:L)}return c}applyNewCalculatedColumnWidthByReference(e,s){const r=this.resizeByContentOptions.cellPaddingWidthInPx??6,a=this.resizeByContentOptions.formatterPaddingWidthInPx??6;let u=s;u*="string"===(e?.filter?.type??e?.type??p.string)?e?.resizeCalcWidthRatio??this.resizeByContentOptions.defaultRatioForStringType??.9:1,u+=r,e.resizeExtraWidthPadding&&(u+=e.resizeExtraWidthPadding),e.editor&&this.gridOptions.editable&&(u+=a),void 0!==e.maxWidth&&u>e.maxWidth&&(u=e.maxWidth),void 0!==e.resizeMaxWidthThreshold&&u>e.resizeMaxWidthThreshold&&(u=e.resizeMaxWidthThreshold),u=Math.ceil(u),(void 0===e.originalWidth||!0===e.resizeAlwaysRecalculateWidth||!0===this.resizeByContentOptions.alwaysRecalculateColumnWidth)&&(e.width=this.readjustNewColumnWidthWhenOverLimit(e,u))}handleSingleColumnResizeByContent(e){const s=this._grid.getColumns(),r=s.findIndex(a=>a.id===e);if(r>=0){const a=s[r],c={[e]:a.originalWidth??a.minWidth??0};a.originalWidth=void 0,this.calculateCellWidthByReadingDataset(a,c,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,r),this.applyNewCalculatedColumnWidthByReference(a,c[e]),this._grid.reRenderColumns(a?.rerenderOnResize??!1)}}readjustNewColumnWidthWhenOverLimit(e,s){const r=this.gridOptions.frozenColumn??-1,a=this._grid.getColumns().findIndex(u=>u.id===e.id)??0;let c=s;if(r>=0&&a<=r){const u=Array.from(this._grid.getViewports());if(u){const g=u.find(pe=>pe.classList.contains("slick-viewport-left"))?.clientWidth??0,y=u.find(pe=>pe.classList.contains("slick-viewport-right"))?.clientWidth??0,L=g-(e.width??0);L+s>g+y&&(c=g-L+y-(this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment??50))}}return Math.ceil(c)}checkIsGridShown(){return!!document.querySelector(`${this.gridUidSelector}`)?.offsetParent}resizeGridWhenStylingIsBrokenUntilCorrected(){var e=this;const s=this.gridOptions?.autoFixResizeTimeout??18e3,r=this.gridOptions?.autoFixResizeRequiredGoodCount??5,a=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),c=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`);let u=0,g=0;if(a&&c&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){const y=this.dataView.getItemCount(),M=this._grid.getColumns()||[];this._intervalId=window.setInterval((0,mt.A)(function*(){const q=(0,A.getOffset)(a);let pe=q.top;e.gridOptions?.enableFiltering&&e.gridOptions.headerRowHeight&&(pe+=e.gridOptions.headerRowHeight),e.gridOptions?.createPreHeaderPanel&&e.gridOptions.showPreHeaderPanel&&e.gridOptions.preHeaderPanelHeight&&(pe+=e.gridOptions.preHeaderPanelHeight),pe+=44;const Ve=(0,A.getOffset)(c).top,Ge=(0,A.getOffset)(e._gridContainerElm);let Je=0===q?.top||pe-Ve>2||0===Ge.left&&0===Ge.top;const Xe=e._grid.getRenderedRange()?.rightPx??0;!Je&&y>0&&0===Xe&&M.length>1&&(Je=!0),e._isStopResizeIntervalRequested&&(Je=!1,u=s),e.checkIsGridShown()&&(Je||0===Ge.left||0===Ge.top)&&(yield e.resizeGrid(),g<5&&e._grid.updateColumns(),e.checkIsGridShown()&&(Je=!1)),e.checkIsGridShown()&&g++,e.checkIsGridShown()&&!Je&&(g>=r||u++>=s)&&window.clearInterval(e._intervalId)}),this.intervalRetryDelay)}}}class vo{constructor(){this._hasColumnsReordered=!1,this._hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(e){this._allColumns=e}get columnDefinitions(){return this._grid?.getColumns()??[]}get currentPagination(){return this._currentPagination}set currentPagination(e){this._currentPagination=e}get dataView(){return this._dataView}set dataView(e){this._dataView=e}get frozenVisibleColumnId(){return this._frozenVisibleColumnId}set frozenVisibleColumnId(e){this._frozenVisibleColumnId=e}get hasColumnsReordered(){return this._hasColumnsReordered}set hasColumnsReordered(e){this._hasColumnsReordered=e}get slickGrid(){return this._grid}set slickGrid(e){this._grid=e}get gridContainerElement(){return this._gridContainerElm}set gridContainerElement(e){this._gridContainerElm=e}get gridOptions(){return this._gridOptions||this._grid?.getOptions()||{}}set gridOptions(e){this._gridOptions=e}get groupItemMetadataProvider(){return this._groupItemMetadataProvider}set groupItemMetadataProvider(e){this._groupItemMetadataProvider=e}get hideHeaderRowAfterPageLoad(){return this._hideHeaderRowAfterPageLoad}set hideHeaderRowAfterPageLoad(e){this._hideHeaderRowAfterPageLoad=e}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(e){this._externalRegisteredResources=e}get visibleColumns(){return this._visibleColumns}set visibleColumns(e){this._visibleColumns=e}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(e){this._hierarchicalDataset=e}}class cr{constructor(e,s,r,a){this.sharedService=e,this.pubSubService=s,this.backendUtilities=r,this.rxjs=a,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new Fe,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}dispose(){this._eventHandler?.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(e){this.rxjs=e}bindBackendOnSort(e){this._isBackendGrid=!0,this._grid=e,this._dataView=e?.getData(),this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(e){this._isBackendGrid=!1,this._grid=e,this._dataView=e?.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(e.onSort,this.handleLocalOnSort.bind(this))}handleLocalOnSort(e,s){const r=s.multiColumnSort?s.sortCols:new Array({columnId:s.sortCol?.id??"",sortAsc:s.sortAsc,sortCol:s.sortCol});this._currentLocalSorters=[],Array.isArray(r)&&r.forEach(a=>{a.sortCol&&this._currentLocalSorters.push({columnId:a.sortCol.id,direction:a.sortAsc?F.ASC:F.DESC})}),this.onLocalSortChanged(this._grid,r),this.emitSortChanged(W.local)}clearSortByColumnId(e,s){const r=this.getCurrentColumnSorts(),a=this.getCurrentColumnSorts(`${s}`);if(Array.isArray(r)&&Array.isArray(a)&&r.length!==a.length){this._gridOptions.backendServiceApi?this.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:a,grid:this._grid}):this._dataView?this.onLocalSortChanged(this._grid,a,!0,!0):this._grid.onSort.notify(this._gridOptions?.multiColumnSort?a:a[0]);const c=a.map(u=>({columnId:u?.sortCol?.id??"",sortAsc:u?.sortAsc,sortCol:u?.sortCol}));this._grid.setSortColumns(c)}Array.isArray(a)&&0===a.length&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(e=!0){if(this._grid&&this._gridOptions&&this._dataView)if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){const s=this._gridOptions?.backendServiceApi?.service;s?.clearSorters&&s.clearSorters()}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(e=!0,s=!0){let c;this._gridOptions.enableSorting=!this._gridOptions.enableSorting,e?(s&&this.clearSorting(),this._eventHandler.unsubscribeAll(),c=this.disableAllSortingCommands(!0)):(c=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(u,g)=>this.handleLocalOnSort(u,g))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(c)}toggleSortFunctionality(e=!0){this.disableSortFunctionality(this._gridOptions.enableSorting,e)}emitSortChanged(e,s){if(e===W.remote&&this._gridOptions?.backendServiceApi){let r=[];const a=this._gridOptions.backendServiceApi.service;a?.getCurrentSorters&&(r=a.getCurrentSorters()),this.pubSubService.publish("onSortChanged",r)}else e===W.local&&(s&&(this._currentLocalSorters=s),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(e){if(this._grid){const s=this._grid.getSortColumns();if(Array.isArray(s))return s.reduce((a,c)=>(c&&(!e||c.columnId!==e)&&a.push({columnId:c.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(c.columnId||"")],sortAsc:c.sortAsc}),a),[])}return[]}loadGridSorters(e){this._currentLocalSorters=[];const s=[];return Array.isArray(e)&&((this._gridOptions.multiColumnSort?e:e.slice(0,1)).forEach(a=>{const c=this._columnDefinitions.find(u=>u.id===a.columnId);if(c){if(!c.sortable){let u="[Slickgrid-Universal] Cannot add sort icon to a column that is not sortable, please add `sortable: true` to your column or remove it from your list of columns to sort.";throw this._gridOptions.enableTreeData&&(u+=" Also note that TreeData feature requires the column holding the tree (expand/collapse icons) to be sortable."),new Error(u)}s.push({columnId:c.id,sortAsc:a.direction.toUpperCase()===F.ASC,sortCol:c}),this._currentLocalSorters.push({columnId:String(c.id),direction:a.direction.toUpperCase()})}}),this.onLocalSortChanged(this._grid,s),this._grid.setSortColumns(s.map(a=>({columnId:a.columnId,sortAsc:a.sortAsc})))),s}processTreeDataInitialSort(){if(this._gridOptions?.enableTreeData&&this._gridOptions.treeDataOptions){const e=this._gridOptions.treeDataOptions,s=this._columnDefinitions.find(r=>r.id===e.columnId);if(s){let r=F.ASC,a={columnId:e.columnId,sortCol:s,sortAsc:!0};if(e?.initialSort?.columnId){const c=e.initialSort.columnId,u=this._columnDefinitions.find(g=>g.id===c);r=(e.initialSort.direction||F.ASC).toUpperCase(),a={columnId:c,sortCol:u,sortAsc:r===F.ASC}}a?.columnId&&this.sharedService?.hierarchicalDataset&&this.updateSorting([{columnId:a.columnId||"",direction:r}])}}}onBackendSortChanged(e,s){if(!s||!s.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');const r=s.grid?.getOptions()??{},a=r.backendServiceApi;if(!a||!a.process||!a.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const c=new Date;a.preProcess&&a.preProcess();const u=a.service.processOnSortChanged(e,s),g=r?.pagination?.totalItems||0;this.backendUtilities?.executeBackendCallback(a,u,s,c,g,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{this._grid.setSortColumns(s.previousSortColumns||[]);const y=s.previousSortColumns?.map(M=>({columnId:M.columnId,sortAsc:M.sortAsc,sortCol:this._columnDefinitions.find(L=>L.id===M.columnId)}));a?.service?.updateSorters?.(y||[])},httpCancelRequestSubject:this.httpCancelRequests$})}onLocalSortChanged(e,s){var r=this;return(0,mt.A)(function*(a,c,u=!1,g=!1){const y=r._gridOptions?.datasetIdPropertyName??"id",M=r._gridOptions?.enableTreeData??!1,L=a.getData();if(yield r.pubSubService.publish("onBeforeSortChange",{sortColumns:c},0),a&&L){if(u&&!M&&L.reSort(),M&&r.sharedService&&Array.isArray(r.sharedService.hierarchicalDataset)){const q=r.sortHierarchicalDataset(r.sharedService.hierarchicalDataset,c);r._dataView.setItems(q.flat,y),r._dataView.onRowCountChanged.notify({previous:r._dataView.getFilteredItemCount(),current:r._dataView.getLength(),itemCount:r._dataView.getItemCount(),dataView:r._dataView,callingOnRowsChanged:!0})}else L.sort(r.sortComparers.bind(r,c));a.invalidate(),g&&r.emitSortChanged(W.local,c.map(q=>({columnId:q.sortCol?.id??"id",direction:q.sortAsc?F.ASC:F.DESC})))}}).apply(this,arguments)}sortHierarchicalDataset(e,s,r=!1){this.sortTreeData(e,s);const a=this._gridOptions?.datasetIdPropertyName??"id",c=this._gridOptions?.treeDataOptions??{columnId:""},g=se(e,{...c,identifierPropName:c.identifierPropName??a,shouldAddTreeLevelNumber:!0});return r&&(this._currentLocalSorters=[],s.forEach(M=>{this._currentLocalSorters.push({columnId:M.columnId,direction:M.sortAsc?"ASC":"DESC"})}),this.emitSortChanged(this._gridOptions?.backendServiceApi?W.remote:W.local)),{hierarchical:e,flat:g}}sortLocalGridByDefaultSortFieldId(){const e=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",s={id:e,field:e};this.onLocalSortChanged(this._grid,new Array({columnId:s.id,sortAsc:!0,sortCol:s,clearSortTriggered:!0}),!1,!0)}sortComparers(e,s,r){if(Array.isArray(e))for(const a of e){const c=this.sortComparer(a,s,r);if(void 0!==c)return c}return N.neutral}sortComparer(e,s,r,a){if(e?.sortCol){const c=e.sortCol,u=e.sortAsc?N.asc:N.desc;let g=a||c.queryFieldSorter||c.queryField||c.field,y=g;const M=c.type||p.string;"function"==typeof c.queryFieldNameGetterFn&&(g=c.queryFieldNameGetterFn(s),y=c.queryFieldNameGetterFn(r));let L=s[g],q=r[y];if(g?.indexOf(".")>=0&&(L=ie(s,g)),y?.indexOf(".")>=0&&(q=ie(r,y)),c.sortComparer){const pe=c.sortComparer(L,q,u,c,this._gridOptions);if(pe!==N.neutral)return pe}else{const pe=gt(M,L,q,u,c,this._gridOptions);if(pe!==N.neutral)return pe}}}sortTreeData(e,s){Array.isArray(s)&&s.forEach(r=>{this.sortTreeChildren(e,r,0)})}sortTreeChildren(e,s,r){const c=this._gridOptions?.treeDataOptions?.childrenPropName??"children";e.sort((u,g)=>this.sortComparer(s,u,g)??N.neutral),e.forEach(u=>{u&&u.hasOwnProperty(c)&&Array.isArray(u[c])&&(r++,this.sortTreeChildren(u[c],s,r),r--)})}updateSorting(e,s=!0,r=!0){if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(e)){const a=this._gridOptions?.backendServiceApi;if(a){const c=a?.service;c?.updateSorters&&(c.updateSorters(void 0,e),r&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}else this.loadGridSorters(e);s&&this.emitSortChanged(a?W.remote:W.local)}}disableAllSortingCommands(e=!0){const s=this._grid.getColumns();s.forEach(a=>{void 0!==a.sortable&&(a.sortable=!e),a?.header?.menu&&a.header.menu.commandItems?.forEach(c=>{if(c&&"string"!=typeof c){const u=c.command;("sort-asc"===u||"sort-desc"===u||"clear-sort"===u)&&(c.hidden=e)}})});const r=this._gridOptions?.gridMenu?.commandItems;return r&&r.forEach(a=>{a&&"string"!=typeof a&&"clear-sorting"===a.command&&(a.hidden=e)}),s}}class jn{constructor(e,s,r){this.pubSubService=e,this.sharedService=s,this.sortService=r,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new Fe,window.setTimeout(()=>this._isOneCpuCyclePassed=!0)}set currentToggledItems(e){this._currentToggledItems=e}get dataset(){return this.dataView?.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){return this._grid?.getData()}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(e){if(this._grid=e,this._isTreeDataEnabled=this.gridOptions?.enableTreeData??!1,this._isLastFullToggleCollapsed=this.treeDataOptions?.initiallyCollapsed??!1,this._currentToggledItems=this.gridOptions.presets?.treeData?.toggledItems??[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if(this.gridOptions?.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!this.gridOptions?.enableFiltering)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(this.gridOptions?.backendServiceApi||this.gridOptions?.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(e.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{"function"==typeof this._treeDataRecalcHandler&&this._isOneCpuCyclePassed&&(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this._treeDataRecalcHandler?.(),this.treeDataOptions?.autoRecalcTotalsDebounce??0))})}applyToggledItemStateChanges(e,s,r=!0,a=!1){if(Array.isArray(e)){const c=this.getTreeDataOptionPropName("collapsedPropName"),u=this.getTreeDataOptionPropName("hasChildrenPropName");this.dataView.beginUpdate(!0);const y="full-collapse"===(s??this._lastToggleStateChange.previousFullToggleType);s&&(this._lastToggleStateChange.previousFullToggleType=s),r&&(this.dataView.getItems()||[]).forEach(M=>{M[u]&&(M[c]=y)}),this.dynamicallyToggleItemState(e,a)}}dynamicallyToggleItemState(e,s=!0){Array.isArray(e)&&(this.dataView.beginUpdate(!0),e.forEach(r=>{const a=this.dataView.getItemById(r.itemId);if(this.updateToggledItem(a,r.isCollapsed),s){const c=this._currentToggledItems.findIndex(u=>u.itemId===r.itemId);c>=0?this._currentToggledItems[c].isCollapsed=r.isCollapsed:this._currentToggledItems.push({itemId:r.itemId,isCollapsed:r.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:r.itemId,toggledItems:this._currentToggledItems,type:r.isCollapsed?te.toggleCollapse:te.toggleExpand})}}),this.dataView.endUpdate(),this.dataView.refresh())}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(e,s){const r=s?.treeDataOptions,a=r?.initialSort??{columnId:r?.columnId??"",direction:"ASC"},c=e.find(u=>u.id===a.columnId);return{columnId:a.columnId,sortAsc:"DESC"!==a?.direction?.toUpperCase(),sortCol:c}}getItemCount(e){if(void 0!==e){const s=this.getTreeDataOptionPropName("levelPropName");return this.dataView.getItems().filter(r=>r[s]===e).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}getTreeDataOptionPropName(e){let s="";switch(e){case"childrenPropName":s=this.treeDataOptions?.childrenPropName??V.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":s=this.treeDataOptions?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":s=this.treeDataOptions?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":s=this.treeDataOptions?.identifierPropName??this.gridOptions?.datasetIdPropertyName??"id";break;case"levelPropName":s=this.treeDataOptions?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":s=this.treeDataOptions?.parentPropName??V.treeDataProperties.PARENT_PROP}return s}clearSorting(){const e=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(e,s,r,a){const c=this.convertFlatParentChildToTreeDataset(e,r),u=Array.isArray(a)&&a.length?a[0]:this.getInitialSort(s,r),g=this.sortService.sortHierarchicalDataset(c,[u],!0);return this._grid?.setSortColumns([u]),g}convertFlatParentChildToTreeDataset(e,s){const r=s?.datasetIdPropertyName??"id",a=s?.treeDataOptions??{columnId:"id"};return fe(e,{...a,identifierPropName:a.identifierPropName??r,initiallyCollapsed:this._isLastFullToggleCollapsed})}enableAutoRecalcTotalsFeature(e=!0){this._treeDataRecalcHandler=e&&this._isTreeDataEnabled?this.recalculateTreeTotals.bind(this,this.gridOptions):null}recalculateTreeTotals(e){const s=e.treeDataOptions,r=s?.childrenPropName??V.treeDataProperties.CHILDREN_PROP,a=s?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;s?.aggregators&&(s.aggregators.forEach(c=>{ae(this.sharedService.hierarchicalDataset||[],{childrenPropName:r,levelPropName:a,aggregator:c})}),this._grid.invalidate())}sortHierarchicalDataset(e,s){const r=s??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),a=Array.isArray(r)?r:[r];return this.sortService.sortHierarchicalDataset(e,a)}toggleTreeDataCollapse(e){var s=this;return(0,mt.A)(function*(r,a=!0){if(s.gridOptions?.enableTreeData){const u=s.getTreeDataOptionPropName("hasChildrenPropName");a&&(yield s.pubSubService.publish("onTreeFullToggleStart",{collapsing:r})),s.dataView.beginUpdate(!0),(s.dataView.getItems()||[]).forEach(g=>{g[u]&&s.updateToggledItem(g,r)}),s.dataView.endUpdate(),s.dataView.refresh(),s._isLastFullToggleCollapsed=r}const c=r?te.fullCollapse:te.fullExpand;s._lastToggleStateChange={type:c,previousFullToggleType:c,toggledItems:null},a&&s.pubSubService.publish("onTreeFullToggleEnd",s._lastToggleStateChange)}).apply(this,arguments)}handleOnCellClick(e,s){if(e&&s){const r=e.target||{},a=this.gridOptions.datasetIdPropertyName??"id",c=this.getTreeDataOptionPropName("collapsedPropName"),u=this.getTreeDataOptionPropName("childrenPropName");if("string"==typeof r?.className&&r.className.indexOf("toggle")>=0){const y=this.dataView.getItem(s.row);if(y){y[c]=!y[c];const M=y[c],L=y[a],q=this._currentToggledItems.findIndex(Ve=>Ve.itemId===L);q>=0?this._currentToggledItems[q].isCollapsed=M:this._currentToggledItems.push({itemId:L,isCollapsed:M}),this.dataView.updateItem(L,y);const Ie=_(this.sharedService.hierarchicalDataset||[],Ve=>Ve[a]===L,u);Ie&&(Ie[c]=M),this._grid.invalidate(),this._lastToggleStateChange={type:M?te.toggleCollapse:te.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:L})}e.stopImmediatePropagation()}}}updateToggledItem(e,s){const r=this.gridOptions?.datasetIdPropertyName??"id",a=this.getTreeDataOptionPropName("childrenPropName"),c=this.getTreeDataOptionPropName("collapsedPropName");if(e){e[c]=s,this.dataView.updateItem(e[r],e);const g=_(this.sharedService.hierarchicalDataset||[],y=>y[r]===e[r],a);g&&(g[c]=s)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(e){return e?.enableTreeData&&e?.treeDataOptions?.autoRecalcTotalsOnFilterChange&&e?.treeDataOptions?.aggregators?this.recalculateTreeTotals.bind(this,e):null}}class Eo{constructor(e){this.translaterService=e,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new St.P}get columnFilter(){return this.columnDef?.filter??{}}get defaultOperator(){return oe.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}get gridOptions(){return this.grid?.getOptions()??{}}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,"compound"===this.inputFilterType&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this._cellContainerElm=e.filterContainerElm;const s=this.gridOptions?.backendServiceApi;this._debounceTypingDelay=(s?s?.filterTypingDebounce??this.gridOptions?.defaultBackendServiceFilterTypingDebounce:this.gridOptions?.filterTypingDebounce)??0;const r=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(r),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),"compound"===this.inputFilterType&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this._filterInputElm&&(this._shouldTriggerQuery=e,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.updateFilterStyle(!1),"compound"===this.inputFilterType&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.onTriggerEvent(void 0,!0))}destroy(){this._bindEventService.unbindAll(),this._selectOperatorElm?.remove?.(),this._filterInputElm?.remove?.()}getValues(){return this._filterInputElm.value}setValues(e,s,r=!1){const a=Array.isArray(e)?e:[e];let c="";for(const u of a)c="single"===this.inputFilterType?s?this.addOptionalOperatorIntoSearchString(u,s):u:`${u}`,this._filterInputElm.value=`${c??""}`,this._currentValue=this._filterInputElm.value;if(this.updateFilterStyle(""!==this.getValues()),this.operator=s||this.defaultOperator,s&&this._selectOperatorElm){const u=Te(this.operator);this._selectOperatorElm.value=u}r&&this.onTriggerEvent(void 0,!1)}addOptionalOperatorIntoSearchString(e,s){let r="",a="",c=null==e?"":`${e}`;if(s&&c){switch(s){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":r=s;break;case"EndsWith":case"*z":r="*";break;case"StartsWith":case"a*":a="*"}c=`${r}${c}${a}`}return c}getCompoundOperatorOptionValues(){const e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:p.string;let s,r="text";if(this.columnFilter?.compoundOperatorList)s=this.columnFilter.compoundOperatorList;else switch(e){case p.string:case p.text:case p.readonly:case p.password:r="text",s=function Ni(d,e){return[{operator:"",desc:xt("CONTAINS","TEXT_CONTAINS","Contains",d,e)},{operator:"<>",desc:xt("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",d,e)},{operator:"=",desc:xt("EQUALS","TEXT_EQUALS","Equals",d,e)},{operator:"!=",desc:xt("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",d,e)},{operator:"a*",desc:xt("STARTS_WITH","TEXT_STARTS_WITH","Starts with",d,e)},{operator:"*z",desc:xt("ENDS_WITH","TEXT_ENDS_WITH","Ends with",d,e)}]}(this.gridOptions,this.translaterService);break;default:r="numeric",s=en(this.gridOptions,this.translaterService)}return fs(this.gridOptions,s,r),s}createDomFilterElement(e){const s=this.columnDef?.id??"";(0,A.emptyElement)(this._cellContainerElm);let r=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(r=this.columnFilter.placeholder);const a=`${e??""}`;if(this._filterInputElm=(0,A.createDomElement)("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:r,ariaLabel:this.columnFilter?.ariaLabel??`${(0,A.toSentenceCase)(s+"")} Search Filter`,className:`form-control filter-${s}`,value:a,dataset:{columnid:`${s}`}}),this.updateFilterStyle(!!e),void 0!==e&&(this._currentValue=a),"single"===this.inputFilterType)this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=xn(this.getCompoundOperatorOptionValues(),this.grid),this._filterContainerElm=(0,A.createDomElement)("div",{className:`form-group search-filter filter-${s}`});const c=(0,A.createDomElement)("div",{className:"input-group"},this._filterContainerElm);(0,A.createDomElement)("div",{className:"input-group-addon input-group-prepend operator"},c).appendChild(this._selectOperatorElm),c.appendChild(this._filterInputElm),c.appendChild((0,A.createDomElement)("span")),this.operator&&(this._selectOperatorElm.value=Te(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(e,s=!1){if(s)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:s,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else{const r=e?.type??"",a=this._selectOperatorElm?.value??this.operator;let c=this._filterInputElm.value;"string"==typeof c&&(this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace)&&(c=c.trim()),"select"!==e?.target?.tagName.toLowerCase()&&(this._currentValue=c),this.updateFilterStyle(""!==c);const g={columnDef:this.columnDef,operator:a,searchTerms:c?[c]:null,shouldTriggerQuery:this._shouldTriggerQuery},y="keyup"===r&&"Enter"!==e?.key?this._debounceTypingDelay:0,M=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,L=M&&(0,A.isDefined)(this._currentValue)||""===this._currentValue&&(0,A.isDefined)(this._lastSearchValue);("single"===this.inputFilterType||!M||L)&&(y>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this.callback(e,g),y)):this.callback(e,g)),this._lastSearchValue=c}this._shouldTriggerQuery=!0}updateFilterStyle(e){e?(this._filterContainerElm?.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterContainerElm?.classList.remove("filled"),this._filterInputElm.classList.remove("filled"))}}class yc extends Eo{constructor(e){super(e),this.translaterService=e,this.inputType="text",this.inputFilterType="compound"}}const $a="#86bff8";class za{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=$a,this.sliderType="double",this.searchTerms=[],this._bindEventService=new St.P}get columnFilter(){return this.columnDef?.filter??{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return"compound"===this.sliderType?oe.empty:"single"===this.sliderType?oe.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||oe.rangeInclusive}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.slider,...this.columnFilter?.filterOptions}}get gridOptions(){return this.grid?.getOptions()??{}}get sliderOptions(){return this._sliderOptions}get operator(){return this._operator||(this.columnFilter.operator??this.defaultOperator)}set operator(e){this._operator=e}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=e?.searchTerms??[],this._argFilterContainerElm=e.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||$a,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(e=!0){if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];const s=+(this.filterOptions?.sliderStartValue??V.SLIDER_DEFAULT_MIN_VALUE),r=+(this.filterOptions?.sliderEndValue??V.SLIDER_DEFAULT_MAX_VALUE);"double"===this.sliderType?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${s}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${r}`),this._currentValues=[s,r],this._sliderLeftInputElm?.dispatchEvent(new Event("change")),this._sliderRightInputElm?.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${s}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=s,this._sliderRightInputElm?.dispatchEvent(new Event("change"))),(this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers)||("double"===this.sliderType?this.renderSliderValues(s,r):this.renderSliderValues(void 0,s)),this.updateFilterStyle(!1),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e,searchTerms:[]})}}destroy(){this._bindEventService.unbindAll(),this._sliderTrackElm?.remove(),this._sliderLeftInputElm?.remove(),this._sliderRightInputElm?.remove()}renderSliderValues(e,s,r=!0){const a=e?.toString()||"",c=s?.toString()||"";this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=a),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=c),this._sliderRangeContainElm.title="double"===this.sliderType?`${a} - ${c}`:`${c}`,r&&this.grid.onHeaderRowMouseLeave.notify({column:this.columnDef,grid:this.grid})}getValues(){return"double"===this.sliderType?this._currentValues:this._currentValue}setValues(e,s,r=!1){if(e){let u=[];const g=Array.isArray(e)?e?.[0]:e;if(Array.isArray(e)&&2===e.length?u=e:"string"==typeof g&&g.indexOf("..")>0?(u=g.split(".."),this._currentValue=+(u?.[0]??0)):((0,A.isDefined)(g)||""===g)&&(this._currentValue=null===g?void 0:+g,u=[g]),"double"!==this.sliderType&&this._sliderRightInputElm)this._sliderRightInputElm.value="string"==typeof e?e:`${g}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(u)&&2===u.length&&!this.filterOptions?.hideSliderNumbers){const[y,M]=u;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(y??V.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(M??V.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...u)}}else this._currentValue=void 0,this._currentValues=void 0;const a=this.getValues(),c=void 0===a?[]:Array.isArray(a)?a:[a];if(this.updateFilterStyle(c.length>0),void 0!==s&&(this.operator=s),this.operator&&this._selectOperatorElm){const u=Te(this.operator);this._selectOperatorElm.value=u}r&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:c,shouldTriggerQuery:!0})}createDomFilterElement(e){const s=this.columnDef?.id??"",r=+(this.columnFilter.minValue??V.SLIDER_DEFAULT_MIN_VALUE),a=+(this.columnFilter.maxValue??V.SLIDER_DEFAULT_MAX_VALUE),c=+(this.columnFilter.valueStep??V.SLIDER_DEFAULT_STEP);(0,A.emptyElement)(this._argFilterContainerElm);const u=+((Array.isArray(e)&&e?.[0])??this.filterOptions?.sliderStartValue??r),g=+((Array.isArray(e)&&e?.[1])??this.filterOptions?.sliderEndValue??a);if(this._sliderRangeContainElm=(0,A.createDomElement)("div",{className:`filter-input filter-${s} slider-input-container slider-values`,title:"double"===this.sliderType?`${u} - ${g}`:`${u}`}),this._sliderTrackElm=(0,A.createDomElement)("div",{className:"slider-track"}),"compound"===this.sliderType){const q=(0,A.createDomElement)("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=xn(this.getOperatorOptionValues(),this.grid),q.appendChild(this._selectOperatorElm)}"double"===this.sliderType&&(this._sliderLeftInputElm=(0,A.createDomElement)("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${(0,A.toSentenceCase)(s+"")} Search Filter`,defaultValue:`${u}`,value:`${u}`,min:`${r}`,max:`${a}`,step:`${c}`}));const y="double"===this.sliderType?g:u;this._sliderRightInputElm=(0,A.createDomElement)("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${(0,A.toSentenceCase)(s+"")} Search Filter`,defaultValue:`${y}`,value:`${y}`,min:`${r}`,max:`${a}`,step:`${c}`});const M=this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers;if(this._divContainerFilterElm=(0,A.createDomElement)("div",{className:`${M?"":"input-group"} search-filter slider-container slider-values filter-${s}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),"double"===this.sliderType&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),M)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let q;"compound"===this.sliderType&&this._selectOperatorElm?(q=(0,A.createDomElement)("span",{className:"input-group-addon input-group-prepend operator"}),q.appendChild(this._selectOperatorElm)):"double"===this.sliderType&&(q=(0,A.createDomElement)("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=(0,A.createDomElement)("span",{className:`input-group-text lowest-range-${s}`,textContent:`${u}`}),q.appendChild(this._leftSliderNumberElm));const pe=(0,A.createDomElement)("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=(0,A.createDomElement)("span",{className:`input-group-text highest-range-${s}`,textContent:`${y}`},pe),q&&this._divContainerFilterElm.appendChild(q),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(pe)}return this._sliderOptions={minValue:r,maxValue:a,step:c},this._currentValues=[u,g],Array.isArray(e)&&e.length>0&&""!==e[0]&&(this.updateFilterStyle(!0),this._currentValue=u),(void 0!==this.filterOptions.sliderStartValue||void 0!==this.columnFilter.minValue)&&(this._currentValue=u),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),"compound"===this.sliderType&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):"double"===this.sliderType&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){let e;return e=this.columnFilter.compoundOperatorList?this.columnFilter.compoundOperatorList:en(this.gridOptions,this.translaterService),fs(this.gridOptions,e,"numeric"),e}onValueChanged(e){const s=parseInt(this._sliderRightInputElm?.value??"",10);let r,a;if("compound"===this.sliderType||"single"===this.sliderType)"select"!==e?.target?.tagName?.toLowerCase()&&(this._currentValue=+s),r=this._currentValue,a=[r||"0"];else if("double"===this.sliderType){const u=[parseInt(this._sliderLeftInputElm?.value??"",10),s];r=u.join(".."),a=u}if(this._clearFilterTriggered)this.updateFilterStyle(!1),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{const c=this._selectOperatorElm?.value??this.operator;this.updateFilterStyle(""!==r);const u=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,g=u&&(0,A.isDefined)(this._currentValue)||!(0,A.isDefined)(this._currentValue)&&(0,A.isDefined)(this._lastSearchValue);("compound"!==this.sliderType||!u||g)&&this.callback(e,{columnDef:this.columnDef,operator:c||"",searchTerms:a,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new H(e)),this._lastSearchValue=r}changeBothSliderFocuses(e){const s=e?"add":"remove";this._sliderLeftInputElm?.classList[s]("focus"),this._sliderRightInputElm?.classList[s]("focus")}slideLeftInputChanged(e){const s=parseInt(this._sliderLeftInputElm?.value??"",10),r=parseInt(this._sliderRightInputElm?.value??"",10);this._sliderLeftInputElm&&r-s<=(this.filterOptions?.stopGapBetweenSliderHandles??0)&&(this._sliderLeftInputElm.value=String(s-(this.filterOptions?.stopGapBetweenSliderHandles??0))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-20?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(e,"left",s,r)}slideRightInputChanged(e){const s=parseInt(this._sliderLeftInputElm?.value??"",10),r=parseInt(this._sliderRightInputElm?.value??"",10);"double"===this.sliderType&&this._sliderRightInputElm&&r-s<=(this.filterOptions?.stopGapBetweenSliderHandles??0)&&(this._sliderRightInputElm.value=String(s+(this.filterOptions?.stopGapBetweenSliderHandles??0))),this.sliderLeftOrRightChanged(e,"right",s,r)}sliderLeftOrRightChanged(e,s,r,a){let c=!0;this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title="double"===this.sliderType?`${r} - ${a}`:`${a}`,"double"===this.sliderType&&this._sliderLeftInputElm&&this._sliderRightInputElm&&("left"===s&&r>a?(this._sliderLeftInputElm.value=`${a}`,c=!1):"right"===s&&r>a&&(this._sliderRightInputElm.value=`${r}`,c=!1)),(this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers)||(this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=this._sliderLeftInputElm?.value??""),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=this._sliderRightInputElm?.value??"")),c&&this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new H(e))}sliderTrackClicked(e){e.preventDefault();const a=100*(e.offsetX+0)/this._sliderTrackElm.offsetWidth;this._sliderRightInputElm&&"double"!==this.sliderType?(this._sliderRightInputElm.value=`${a}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(a<=50?(this._sliderLeftInputElm.value=`${a}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${a}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){if(this.filterOptions?.enableSliderTrackColoring&&this._sliderRightInputElm){let e=0;this._sliderLeftInputElm&&(e=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderLeftInputElm.min)*100);const s=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderRightInputElm.min)*100,r="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,this.filterOptions?.sliderTrackFilledColor||this._sliderTrackFilledColor||$a).replace(/%p1/g,`${e}%`).replace(/%p2/g,`${s}%`);this._sliderTrackElm.style.background=r,this._sliderOptions.sliderTrackBackground=r}}updateFilterStyle(e){e?(this._divContainerFilterElm.classList.add("filled"),this._filterElm?.classList.add("filled")):(this._divContainerFilterElm.classList.remove("filled"),this._filterElm?.classList.remove("filled"))}}var Pg=Object.defineProperty,At=(d,e,s)=>((d,e,s)=>e in d?Pg(d,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[e]=s)(d,"symbol"!=typeof e?e+"":e,s),du=class{constructor(d){At(this,"_distinctEvent"),At(this,"_boundedEvents",[]),this._distinctEvent=d?.distinctEvent??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(d,e,s,r,a=""){let c=Array.isArray(e)?e:[e];if("function"==typeof d?.forEach)d.forEach(u=>{for(let g of c)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(u,g))&&(u.addEventListener(g,s,r),this._boundedEvents.push({element:u,eventName:g,listener:s,groupName:a}))});else for(let u of c)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(d,u))&&(d.addEventListener(u,s,r),this._boundedEvents.push({element:d,eventName:u,listener:s,groupName:a}))}hasBinding(d,e){return this._boundedEvents.some(s=>s.element===d&&(!e||s.eventName===e))}unbind(d,e,s){if(d){let r=Array.isArray(d)?d:[d],a=Array.isArray(e)?e||"":[e||""];for(let c of r){s||(s=this._boundedEvents.find(u=>{if(u.element===c&&(!e||u.eventName===e))return u.listener}));for(let u of a)c?.removeEventListener?.(u,s)}}}unbindAll(d){if(d){let e=Array.isArray(d)?d:[d];for(let s=this._boundedEvents.length-1;s>=0;--s){let r=this._boundedEvents[s];if(e.some(a=>a===r.groupName)){let{element:a,eventName:c,listener:u}=r;this.unbind(a,c,u),this._boundedEvents.splice(s,1)}}}else for(;this._boundedEvents.length>0;){let e=this._boundedEvents.pop(),{element:s,eventName:r,listener:a}=e;this.unbind(s,r,a)}}},cu=typeof window<"u"&&void 0!==window.multipleSelect?window.multipleSelect:{locales:{}};cu.locales["en-US"]={formatSelectAll:()=>"[Select all]",formatAllSelected:()=>"All selected",formatCountSelected:(d,e)=>`${d} of ${e} selected`,formatNoMatchesFound:()=>"No matches found",formatOkButton:()=>"OK"};var bg=cu.locales,hi={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(d){let{text:e,label:s,search:r}=d;return(s||e||"").includes(r)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,navigationHighlight:!0,infiniteScroll:!1,virtualScroll:!0,cssStyler:()=>null,textTemplate:d=>d.innerHTML.trim(),labelTemplate:d=>d.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onBeforeClick:()=>!0,onClick:()=>!1,onFilter:()=>!1,onFilterClear:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1};Object.assign(hi,bg["en-US"]);var Vs={BLOCK_ROWS:50,CLUSTER_BLOCKS:4,DEFAULTS:hi,METHODS:["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"]};function ls(d){let r=Object.prototype.toString.call(d).slice(8,-1).toLowerCase();return"object"===r?(()=>{let a={};for(let c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=ls(d[c]));return a})():"array"===r?d.map(a=>ls(a)):d}function Ya(d){return null!=d&&""!==d}function Do(d,e,s){if(Array.isArray(d))for(let r of d){if(r[e]===s||r[e]===""+ +r[e]&&+r[e]===s)return r;if("optgroup"===r.type)for(let a of r.children)if(a&&(a[e]===s||a[e]===""+ +a[e]&&+a[e]===s))return a}}function Xa(d){return Object.keys(d).forEach(e=>void 0===d[e]?delete d[e]:""),d}function as(d,e){if("string"!=typeof d)return d;if("function"==typeof e)return e(d);if("function"==typeof d.normalize)return d.normalize("NFD").replace(/[\u0300-\u036F]/g,"");throw new Error("[Multiple-Select-Vanilla] `normalize()` function is not defined, you can optionally provide a custom parser via the `diacriticParser` option.")}function Ja(d){let e=0,s=0,r=0,a=0,c=window.innerHeight??0,u=window.innerWidth??0,g=function wg(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}(),y=g.top,M=g.left,L=mu(d);if(L){let q=L.top??0,pe=L.left??0;s=q-y,e=c-(q-y),r=pe-M,a=u-(pe-M)}return{top:s,bottom:e,left:r,right:a}}function Dc(d=""){return d.split(" ").filter(e=>e)}function Hn(d,e,s){let r=document.createElement(d);return e&&Object.keys(e).forEach(a=>{let c=e[a];"object"==typeof c?Object.assign(r[a],c):r[a]=e[a]}),s?.appendChild&&s.appendChild(r),r}function Yr(d,e,s){let r=d.props?.innerHTML?function Rn(d,e){let{[e]:s,...r}=d;return r}(d.props,"innerHTML"):d.props,a=Hn(d.tagName,function Fg(d,e){return"object"==typeof d?Object.fromEntries(e?Object.entries(d).filter(([s,r])=>!Ya(r)&&!e.includes(s)||Ya(r)):Object.entries(d).filter(([s,r])=>Ya(r))):d}(r,["className","title","style"]),e),c=s;if(c||(c=a),d.props.innerHTML&&(a.innerHTML=d.props.innerHTML),d.attrs)for(let u of Object.keys(d.attrs))a.setAttribute(u,d.attrs[u]);if(d.children)for(let u of d.children)Yr(u,a,c);return e?.appendChild(a),a}function Qa(d){return d.hasOwnProperty("tagName")?Yr(d):document.createElement("li")}function Bl(d){for(;d?.firstChild;)d.lastChild&&d.removeChild(d.lastChild);return d}function mu(d){if(!d)return;let e=d?.getBoundingClientRect?.(),s=0,r=0,a=0,c=0;return void 0!==e?.top&&void 0!==e.left&&(s=e.top+window.pageYOffset,r=e.left+window.pageXOffset,c=e.right,a=e.bottom),{top:s,left:r,bottom:a,right:c}}function Xr(d,e,s){if(!d)return 0;let r=Number.parseFloat(d.style[s]);if(!r||Number.isNaN(r)){switch(e){case"outer":r=d["width"===s?"offsetWidth":"offsetHeight"];break;case"scroll":r=d["width"===s?"scrollWidth":"scrollHeight"];break;default:r=d["width"===s?"clientWidth":"clientHeight"]}r=d.getBoundingClientRect()[s]}if(!r||Number.isNaN(r)){let a=d.style.display,c=d.style.position;d.style.display="block",d.style.position="absolute";let u=window.getComputedStyle(d)[s];r=Number.parseFloat(u),Number.isNaN(r)&&(r=0),d.style.display=a,d.style.position=c}return r||0}function Hl(d,e){let s=null,r=d?.parentElement;for(;r;){let[a,c,u,g]=e.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(u&&g)for(let y of g.replace(u,"").split(" "))r.classList.contains(y)&&(c?r?.tagName.toLowerCase()===c&&(s=r):s=r);r=r.parentElement}return s}function pu(d,e){d?.style&&(d.style.display="none"===d.style.display&&!1!==e||!0===e?"block":"none")}var Vg=class{constructor(d){At(this,"clusterRows"),At(this,"cache"),At(this,"scrollEl"),At(this,"blockHeight"),At(this,"clusterHeight"),At(this,"contentEl"),At(this,"parentEl"),At(this,"itemHeight"),At(this,"lastCluster"),At(this,"scrollTop"),At(this,"dataStart"),At(this,"dataEnd"),At(this,"rows"),At(this,"destroy"),At(this,"callback"),At(this,"sanitizer"),this.rows=d.rows,this.scrollEl=d.scrollEl,this.contentEl=d.contentEl,this.parentEl=d.contentEl?.parentElement,this.callback=d.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let e=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",e,!1),this.destroy=()=>{this.scrollEl.removeEventListener("scroll",e,!1),Bl(this.contentEl)}}reset(d){this.lastCluster=0,this.cache={},Bl(this.contentEl),this.initDOM(d)}initDOM(d){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let c=Qa(d[0]);this.contentEl.appendChild(c),this.contentEl.appendChild(c),this.contentEl.appendChild(c),this.cache.data=[d[0]],this.getRowsHeight()}let e=this.initData(d,this.getNum()),s=this.checkChanges("data",e.rows),r=this.checkChanges("top",e.topOffset),a=this.checkChanges("bottom",e.bottomOffset);Bl(this.contentEl),s&&r?(e.topOffset&&this.contentEl.appendChild(this.getExtra("top",e.topOffset)),e.rows.forEach(c=>this.contentEl.appendChild(Qa(c))),e.bottomOffset&&this.contentEl.appendChild(this.getExtra("bottom",e.bottomOffset))):a&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${e.bottomOffset}px`)}getRowsHeight(){if(typeof this.itemHeight>"u"){let d=this.parentEl?.style.display||"";this.parentEl&&(""===d||"none"===d)&&(this.parentEl.style.display="block");let e=this.contentEl.children,s=e[Math.floor(e.length/2)];this.itemHeight=s.offsetHeight,this.parentEl&&(this.parentEl.style.display=d)}this.blockHeight=this.itemHeight*Vs.BLOCK_ROWS,this.clusterRows=Vs.BLOCK_ROWS*Vs.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*Vs.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let d=(this.clusterHeight||0)-(this.blockHeight||0);return d&&Math.floor(this.scrollTop/d)||0}initData(d,e){if(d.length<Vs.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:d};let s=Math.max((this.clusterRows-Vs.BLOCK_ROWS)*e,0),r=s+this.clusterRows,a=Math.max(s*this.itemHeight,0),c=Math.max((d.length-r)*this.itemHeight,0),u=[],g=s;a<1&&g++;for(let y=s;y<r;y++)d[y]&&u.push(d[y]);return this.dataStart=s,this.dataEnd=r,{topOffset:a,bottomOffset:c,rowsAbove:g,rows:u}}checkChanges(d,e){let s=e!==this.cache[d];return this.cache[d]=e,s}getExtra(d,e){let s=document.createElement("li");return s.className=`virtual-scroll-${d}`,e&&(s.style.height=`${e}px`),s}},ur=".ms-select-all, ul li[data-key]",vu=class{constructor(d,e){this.elm=d,At(this,"_bindEventService"),At(this,"isAllSelected",!1),At(this,"isPartiallyAllSelected",!1),At(this,"fromHtml",!1),At(this,"choiceElm"),At(this,"selectClearElm"),At(this,"closeElm"),At(this,"clearSearchIconElm"),At(this,"filterText",""),At(this,"updateData",[]),At(this,"data",[]),At(this,"dataTotal"),At(this,"dropElm"),At(this,"okButtonElm"),At(this,"filterParentElm"),At(this,"lastFocusedItemKey",""),At(this,"lastMouseOverPosition",""),At(this,"ulElm"),At(this,"parentElm"),At(this,"labelElm"),At(this,"selectAllParentElm"),At(this,"selectAllElm"),At(this,"searchInputElm"),At(this,"selectGroupElms"),At(this,"selectItemElms"),At(this,"noResultsElm"),At(this,"options"),At(this,"selectAllName",""),At(this,"selectGroupName",""),At(this,"selectItemName",""),At(this,"scrolledByMouse",!1),At(this,"openDelayTimer"),At(this,"updateDataStart"),At(this,"updateDataEnd"),At(this,"virtualScroll"),At(this,"_currentHighlightIndex",-1),At(this,"_currentSelectedElm"),At(this,"isMoveUpRecalcRequired",!1),At(this,"locales",{}),this.options=Object.assign({},Vs.DEFAULTS,this.elm.dataset,e),this._bindEventService=new du({distinctEvent:!0})}get isRenderAsHtml(){return this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(d=!0){this.elm&&this.parentElm&&(this.options.onDestroy({hardDestroy:d}),d&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),this.virtualScroll?.destroy(),this.dropElm?.remove(),this.dropElm=void 0,this.parentElm.parentNode?.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:d}),d&&(this.options.onAfterHardDestroy?.(),Object.keys(this.options).forEach(e=>delete this[e])))}initLocale(){if(this.options.locale){if("object"==typeof this.options.locale)return void Object.assign(this.options,this.options.locale);let d=window.multipleSelect.locales,e=this.options.locale.split(/-|_/);if(e[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),d[this.options.locale])Object.assign(this.options,d[this.options.locale]);else if(d[e.join("-")])Object.assign(this.options,d[e.join("-")]);else{if(!d[e[0]])throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`);Object.assign(this.options,d[e[0]])}}}initContainer(){let d=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),this.labelElm?.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=Hn("div",{className:Dc(`ms-parent ${this.elm.className||""} ${this.options.classes}`).join(" "),dataset:{test:"sel"}}),this.options.darkMode&&this.parentElm.classList.add("ms-dark-mode");let e=this.elm.getAttribute("title")||"";e&&(this.parentElm.title=e),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.choiceElm=Hn("button",{className:"ms-choice",type:"button"},this.parentElm),this.options.labelId&&(this.choiceElm.id=this.options.labelId,this.choiceElm.setAttribute("aria-labelledby",this.options.labelId)),this.choiceElm.appendChild(Hn("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&(this.selectClearElm=Hn("div",{className:"ms-icon ms-icon-close"}),this.selectClearElm.style.display="none",this.choiceElm.appendChild(this.selectClearElm)),this.choiceElm.appendChild(Hn("div",{className:"ms-icon ms-icon-caret"})),this.dropElm=Hn("div",{className:`ms-drop ${this.options.position}`,ariaExpanded:"false"},this.parentElm),this.options.darkMode&&this.dropElm.classList.add("ms-dark-mode"),d&&(this.dropElm.dataset.name=d);let s=this.elm.getAttribute("data-test")||this.options.dataTest;s&&(this.parentElm.dataset.test=s,this.dropElm.dataset.test=s),this.closeElm=this.choiceElm.querySelector(".ms-icon-close"),this.options.dropWidth&&(this.dropElm.style.width="string"==typeof this.options.dropWidth?this.options.dropWidth:`${this.options.dropWidth}px`),function Lg(d,e){d.parentNode?.insertBefore(e,d.nextSibling)}(this.elm,this.parentElm),this.elm.disabled&&(this.choiceElm.classList.add("disabled"),this.choiceElm.disabled=!0),this.selectAllName=`selectAll${d}`,this.selectGroupName=`selectGroup${d}`,this.selectItemName=`selectItem${d}`,this.options.keepOpen||(this._bindEventService.unbindAll("body-click"),this._bindEventService.bind(document.body,"click",r=>{this.getEventTarget(r)===this.choiceElm||Hl(this.getEventTarget(r),".ms-choice")===this.choiceElm||(this.getEventTarget(r)===this.dropElm||Hl(this.getEventTarget(r),".ms-drop")!==this.dropElm&&this.getEventTarget(r)!==this.elm)&&this.options.isOpen&&this.close("body.click")},void 0,"body-click"))}initData(){let d=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map(e=>"string"==typeof e||"number"==typeof e?{text:e,value:e}:e);else if("object"==typeof this.options.data){for(let[e,s]of Object.entries(this.options.data))d.push({value:e,text:`${s}`});this.data=d}}else this.elm.childNodes.forEach(e=>{let s=this.initRow(e);s&&d.push(s)}),this.options.data=d,this.data=d,this.fromHtml=!0;this.dataTotal=function ks(d){let e=0;return d.forEach((s,r)=>{"optgroup"===s.type?(s._key=`group_${r}`,s.visible=typeof s.visible>"u"||s.visible,s.children.forEach((a,c)=>{a&&(a.visible=typeof a?.visible>"u"||a.visible,a.divider||(a._key=`option_${r}_${c}`,e+=1))})):(s.visible=typeof s.visible>"u"||s.visible,s.divider||(s._key=`option_${r}`,e+=1))}),e}(this.data||[])}initRow(d,e){let s={};return"option"===d.tagName?.toLowerCase()?(s.type="option",s.text=this.options.textTemplate(d),s.value=d.value,s.visible=!0,s.selected=!!d.selected,s.disabled=e||d.disabled,s.classes=d.getAttribute("class")||"",s.title=d.getAttribute("title")||"",d.dataset.value&&(s._value=d.dataset.value),Object.keys(d.dataset).length&&(s._data=d.dataset,s._data.divider&&(s.divider=s._data.divider)),s):"optgroup"===d.tagName?.toLowerCase()?(s.type="optgroup",s.label=this.options.labelTemplate(d),s.visible=!0,s.selected=!!d.selected,s.disabled=d.disabled,s.children=[],Object.keys(d.dataset).length&&(s._data=d.dataset),d.childNodes.forEach(r=>{s.children.push(this.initRow(r,s.disabled))}),s):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",()=>this.open(null)),this._bindEventService.bind(this.parentElm,"mouseout",()=>this.close("hover.mouseout")))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let d=0;for(let e of this.data||[])d+="optgroup"===e.type?e.children.length:1;this.options.filter=d>this.options.filterByDataLength}initList(){if(this.options.filter&&(this.filterParentElm=Hn("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(Hn("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||"\u{1f50e}\ufe0e"})),this.options.showSearchClear&&this.filterParentElm.appendChild(Hn("span",{className:"ms-icon ms-icon-close"}))),this.options.selectAll&&!this.options.single){let d=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=Hn("div",{className:"ms-select-all",dataset:{key:"select_all"}});let e=document.createElement("label"),s="ms-icon "+(this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck"),r=Hn("div",{className:"icon-checkbox-container"},e);Hn("input",{type:"checkbox",ariaChecked:String(this.isAllSelected),checked:this.isAllSelected,dataset:{name:`selectAll${d}`}},r),Hn("div",{className:s},r),e.appendChild(Hn("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(e),this.dropElm?.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.ulElm.role="combobox",this.ulElm.ariaExpanded="false",this.ulElm.ariaMultiSelectable=String(!this.options.single),this.dropElm?.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=Hn("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){let d=0,e=this.getListRows();if(this.options.selectAll&&!this.options.single&&(d=-1),e.length>Vs.BLOCK_ROWS*Vs.CLUSTER_BLOCKS){let s=this.dropElm&&"none"!==this.dropElm?.style.display;!s&&this.dropElm&&(this.dropElm.style.left="-10000",this.dropElm.style.display="block",this.dropElm.ariaExpanded="true");let r=()=>{if(this.virtualScroll){this._currentHighlightIndex=0,this.updateDataStart=this.virtualScroll.dataStart+d,this.updateDataEnd=this.virtualScroll.dataEnd+d,this.updateDataStart<0&&(this.updateDataStart=0,this._currentHighlightIndex=0);let a=this.getDataLength();this.updateDataEnd>a&&(this.updateDataEnd=a),this.ulElm&&(this.isMoveUpRecalcRequired?this.recalculateArrowMove("up"):this.virtualScroll.dataStart>this.updateDataStart&&this.recalculateArrowMove("down"))}};this.ulElm&&(this.virtualScroll?this.virtualScroll.reset(e):this.virtualScroll=new Vg({rows:e,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{r(),this.events()}})),r(),!s&&this.dropElm&&(this.dropElm.style.left="0",this.dropElm.style.display="none",this.dropElm.ariaExpanded="false")}else this.ulElm&&(Bl(this.ulElm),e.forEach(s=>this.ulElm.appendChild(Qa(s)))),this.updateDataStart=0,this.updateDataEnd=this.updateData.length;return this.events(),e}getEventTarget(d){return d.composedPath?d.composedPath()[0]:d.target}getListRows(){let d=[];return this.updateData=[],this.data?.forEach(e=>d.push(...this.initListItem(e))),this.options.infiniteScroll&&d.push({tagName:"li",props:{className:"ms-infinite-option",role:"option"}}),d.push({tagName:"li",props:{className:"ms-no-results",textContent:this.formatNoMatchesFound()}}),d}initListItem(d,e=0){let s=d?.title||"",r=this.options.multiple?"multiple":"",a=this.options.single?"radio":"checkbox",c=!!d?.selected,u=this.options.single&&!this.options.singleRadio,g="";if(!d?.visible)return[];if(this.updateData.push(d),u&&(g="hide-radio "),d.selected&&(g+="selected "),"optgroup"===d.type){let Je,Ge=[];if(this.options.hideOptgroupCheckboxes||this.options.single)Je={tagName:"span",props:{dataset:{name:this.selectGroupName,key:d._key}}};else{let qe={tagName:"input",props:{type:"checkbox",dataset:{name:this.selectGroupName,key:d._key},checked:c,disabled:d.disabled}};Je=u?qe:{tagName:"div",props:{className:"icon-checkbox-container"+("radio"===a?" radio":"")},children:[qe,{tagName:"div",props:{className:"ms-icon "+(c?"radio"===a?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck")}}]}}!g.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(g+="hide-radio ");let Xe={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(Xe.props,d.label);let rt={tagName:"li",props:{className:Dc(`group${this.options.single||d.disabled?" disabled":""} ${g}`).join(" "),role:"option",ariaSelected:String(c),dataset:{key:d._key}},children:[{tagName:"label",props:{className:Dc("optgroup"+(this.options.single||d.disabled?" disabled":"")).join(" ")},children:[Je,Xe]}]},_e=this.options.cssStyler(d);return _e&&(rt.props.style=_e),Ge.push(rt),d.children.forEach(qe=>Ge.push(...this.initListItem(qe,1))),Ge}if(g+=d.classes||"",e&&this.options.single&&(g+=`option-level-${e} `),d.divider)return[{tagName:"li",props:{className:"option-divider"}}];let y=r||g?(r+g).trim():"";d.disabled&&(y+=" disabled");let M=d.disabled?"disabled":"",L={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(L.props,d.text);let q={tagName:"input",props:{type:a,value:encodeURI(d.value),dataset:{key:d._key,name:this.selectItemName},checked:c,disabled:!!d.disabled}};d.selected&&(q.attrs={checked:"checked"});let pe={tagName:"div",props:{className:"icon-checkbox-container"+("radio"===a?" radio":"")},children:[q,{tagName:"div",props:{className:"ms-icon "+(q.props.checked?"radio"===a?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck")}}]},Ie={tagName:"li",props:{role:"option",title:s,ariaSelected:String(c),dataset:{key:d._key}},children:[{tagName:"label",props:{className:M},children:[u?q:pe,L]}]};y&&(Ie.props.className=y);let Ve=this.options.cssStyler(d);return Ve&&(Ie.props.style=Ve),[Ie]}initSelected(d=!1){let e=0;for(let s of this.data||[])if("optgroup"===s.type){let r=s.children.filter(a=>a?.selected&&!a.disabled&&a.visible).length;s.children.length&&(s.selected=!this.options.single&&r&&r===s.children.filter(a=>a&&!a.disabled&&a.visible&&!a.divider).length),e+=r}else e+=s.selected&&!s.disabled&&s.visible?1:0;this.isAllSelected=this.data?.filter(s=>s.selected&&!s.disabled&&s.visible).length===this.data?.filter(s=>!s.disabled&&s.visible&&!s.divider).length,this.isPartiallyAllSelected=!this.isAllSelected&&e>0,d||(this.isAllSelected?this.options.onCheckAll():0===e&&this.options.onUncheckAll())}initView(){let d;window.getComputedStyle?(d=window.getComputedStyle(this.elm).width,"auto"===d&&(d=Xr(this.dropElm,"outer","width")+20)):d=Xr(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||d}px`,this.elm.classList.add("ms-offscreen")}events(){this._bindEventService.unbindAll(["ok-button","search-input","select-all-checkbox","input-checkbox-list","group-checkbox-list","hover-highlight","arrow-highlight","option-list-scroll"]),this.clearSearchIconElm=this.filterParentElm?.querySelector(".ms-icon-close"),this.searchInputElm=this.dropElm?.querySelector(".ms-search input"),this.selectAllElm=this.dropElm?.querySelector(`input[data-name="${this.selectAllName}"]`),this.selectGroupElms=this.dropElm?.querySelectorAll(`input[data-name="${this.selectGroupName}"],span[data-name="${this.selectGroupName}"]`),this.selectItemElms=this.dropElm?.querySelectorAll(`input[data-name="${this.selectItemName}"]:enabled`),this.noResultsElm=this.dropElm?.querySelector(".ms-no-results");let d=e=>{e.preventDefault(),!this.getEventTarget(e).classList.contains("ms-icon-close")&&(this.options.isOpen?this.close("toggle.close"):this.open())};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",e=>{"label"===this.getEventTarget(e).nodeName.toLowerCase()&&(d(e),(!this.options.filter||!this.options.isOpen)&&this.focus(),e.stopPropagation())}),this._bindEventService.bind(this.choiceElm,"click",d),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",e=>{"Escape"===e.code&&this.handleEscapeKey()}),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",e=>{e.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()}),this.clearSearchIconElm&&this._bindEventService.bind(this.clearSearchIconElm,"click",e=>{e.preventDefault(),this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this._currentHighlightIndex=-1,this.moveHighlightDown(),this.filter(),this.options.onFilterClear()}),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",e=>{"Tab"===e.code&&e.shiftKey&&this.close("key.shift+tab")},void 0,"search-input"),this._bindEventService.bind(this.searchInputElm,"keyup",e=>{if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(e.code)&&this.searchInputElm?.value){if(this.options.single){let s=[];this.selectItemElms?.forEach(r=>{"none"!==r.closest("li")?.style.display&&s.push(r)}),s.length&&s[0].hasAttribute("data-name")&&this.setSelects([s[0].value])}else this.selectAllElm?.click();return this.close(`key.${e.code.toLowerCase()}`),void this.focus()}this.filter()},void 0,"search-input")),this.selectAllElm&&this._bindEventService.bind(this.selectAllElm,"click",e=>this._checkAll(e.currentTarget?.checked),void 0,"select-all-checkbox"),this.okButtonElm&&this._bindEventService.bind(this.okButtonElm,"click",e=>{d(e),e.stopPropagation()},void 0,"ok-button"),this.selectGroupElms&&this._bindEventService.bind(this.selectGroupElms,"click",e=>{let s=e.currentTarget,r=s.checked,a=Do(this.data,"_key",s.dataset.key);this._checkGroup(a,r),this.options.onOptgroupClick(Xa({label:a.label,selected:a.selected,data:a._data,children:a.children.map(c=>{if(c)return Xa({text:c.text,value:c.value,selected:c.selected,disabled:c.disabled,data:c._data})})}))},void 0,"group-checkbox-list"),this.selectItemElms&&this._bindEventService.bind(this.selectItemElms,"click",e=>{let s=e.currentTarget,r=s.checked,a=Do(this.data,"_key",s.dataset.key),c=()=>{this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close("selection")};!1!==this.options.onBeforeClick(a)?(this._check(a,r),this.options.onClick(Xa({text:a.text,value:a.value,selected:a.selected,data:a._data})),c()):c()},void 0,"input-checkbox-list"),this.lastFocusedItemKey&&this.dropElm&&this.dropElm.querySelector(`li[data-key=${this.lastFocusedItemKey}]`)?.focus(),this.options.navigationHighlight&&this.dropElm&&(this._bindEventService.bind(this.dropElm,"mouseover",e=>{let s=this.getEventTarget(e).closest(".ms-select-all")||this.getEventTarget(e).closest("li");if(this.dropElm?.contains(s)&&this.lastMouseOverPosition!==`${e.clientX}:${e.clientY}`){let r=this.dropElm?.querySelectorAll(ur)||[],a=Array.from(r).findIndex(c=>c.dataset.key===s.dataset.key);this._currentHighlightIndex!==a&&!s.classList.contains("disabled")&&(this._currentSelectedElm=s,this._currentHighlightIndex=a,this.changeCurrentOptionHighlight(s))}this.lastMouseOverPosition=`${e.clientX}:${e.clientY}`},void 0,"hover-highlight"),this._bindEventService.bind(this.dropElm,"keydown",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.moveHighlightUp();break;case"ArrowDown":e.preventDefault(),this.moveHighlightDown();break;case"Escape":this.handleEscapeKey();break;case"Enter":case" ":if(document.activeElement!==this.okButtonElm){let s=this.getEventTarget(e).closest(".ms-select-all")||this.getEventTarget(e).closest("li");if(" "===e.key&&this.options.filter||this.options.filterAcceptOnEnter&&!s)return;e.preventDefault(),this._currentSelectedElm?.querySelector("input")?.click(),this.options.single&&(this.choiceElm.focus(),this.lastFocusedItemKey=this.choiceElm?.dataset.key||"")}break;case"Tab":e.preventDefault(),e.shiftKey?document.activeElement===this.okButtonElm?(this.focusSelectAllOrList(),this.highlightCurrentOption()):(this.close("key.shift+tab"),this.choiceElm.focus()):(this.changeCurrentOptionHighlight(),this.okButtonElm?.focus())}},void 0,"arrow-highlight")),this.ulElm&&this.options.infiniteScroll&&this._bindEventService.bind(this.ulElm,"scroll",this.infiniteScrollHandler.bind(this),void 0,"option-list-scroll")}handleEscapeKey(){this.options.keepOpen||(this.close("key.escape"),this.choiceElm.focus())}infiniteScrollHandler(d,e,s){let r=!1;d&&this.getEventTarget(d)&&this.ulElm&&this.scrolledByMouse?this.getEventTarget(d).scrollTop+this.getEventTarget(d).clientHeight===this.ulElm.scrollHeight&&(r=!0):void 0!==e&&e+1===s&&(r=!0),r&&this.ulElm&&(this.virtualScroll?this.initListItems():this.ulElm.scrollTop=0,this._currentHighlightIndex=0,this.highlightCurrentOption())}open(d=0){return new Promise(e=>{null!==d&&d>=0?(window.clearTimeout(this.openDelayTimer),this.openDelayTimer=window.setTimeout(()=>{this.openDrop(),e()},d)):(this.openDrop(),e())})}openDrop(){if(!this.dropElm||this.choiceElm?.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),this.choiceElm?.querySelector("div.ms-icon-caret")?.classList.add("open"),this.dropElm.style.display="block",this.dropElm.ariaExpanded="true",this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="inline-flex"),this.noResultsElm&&(this.noResultsElm.style.display="none"),this.getDataLength()||(this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let a,r=mu(this.dropElm);this.options.container instanceof Node?a=this.options.container:"string"==typeof this.options.container&&(a="body"===this.options.container?document.body:document.querySelector(this.options.container)),a.appendChild(this.dropElm),this.dropElm.style.top=`${r?.top??0}px`,this.dropElm.style.left=`${r?.left??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Xr(this.parentElm,"outer","width")}px`}let d=this.options.minHeight,e=this.options.maxHeight;"row"===this.options.maxHeightUnit&&(e=Xr(this.dropElm.querySelector("ul>li"),"outer","height")*this.options.maxHeight),this.ulElm??=this.dropElm.querySelector("ul"),this.ulElm&&(d&&(this.ulElm.style.minHeight=`${d}px`),this.ulElm.style.maxHeight=`${e}px`),this.dropElm.querySelectorAll(".multiple").forEach(r=>{r.style.width=`${this.options.multipleWidth}px`}),this.getDataLength()&&this.options.filter?(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)):this.focusSelectAllOrList(),this._currentHighlightIndex<0?this.moveHighlightDown():this.highlightCurrentOption(),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let s=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:r,top:a}=Ja(this.dropElm);s=r<this.dropElm.getBoundingClientRect().height&&a>r?"top":"bottom"}this.adjustDropHeight(s)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}focusSelectAllOrList(){this.selectAllElm?this.selectAllElm.focus():this.ulElm&&(this.ulElm.tabIndex=0,this.ulElm.focus())}highlightCurrentOption(){let d=this.dropElm?.querySelectorAll(ur)||[];if(this._currentHighlightIndex<=d.length){let e=d[this._currentHighlightIndex];e&&(this.lastFocusedItemKey=e.dataset.key||"",this._currentSelectedElm=e,this.scrolledByMouse=!1,e.scrollIntoView({block:"nearest"}),this.changeCurrentOptionHighlight(e),window.setTimeout(()=>this.scrolledByMouse=!0,10))}}changeCurrentOptionHighlight(d){d?.classList.add("highlighted"),(this.dropElm?.querySelectorAll(".ms-select-all.highlighted, ul li[data-key].highlighted")||[]).forEach(e=>{e!==d&&e.classList.remove("highlighted")})}moveHighlightDown(){let d=this.dropElm?.querySelectorAll(ur)||[],e=d.length;this._currentHighlightIndex<e-1?(this._currentHighlightIndex++,d[this._currentHighlightIndex]?.classList.contains("disabled")&&this.moveHighlightDown()):this.options.infiniteScroll&&this.infiniteScrollHandler(null,this._currentHighlightIndex,e),this.highlightCurrentOption()}moveHighlightUp(){let d=this.dropElm?.querySelectorAll(ur)||[];if(this.virtualScroll&&this._currentHighlightIndex<=(this.options.single?0:1)&&this.updateDataStart>0&&this.ulElm){let s=d[this._currentHighlightIndex+(this.options.single?0:1)],r=s?.dataset.key;return this.lastFocusedItemKey=r,this.ulElm.scrollTop=this.ulElm.scrollTop-s?.getBoundingClientRect().height||10,void(this.isMoveUpRecalcRequired=!0)}this._currentHighlightIndex>0&&(this._currentHighlightIndex--,d[this._currentHighlightIndex]?.classList.contains("disabled")&&this.moveHighlightUp()),this.highlightCurrentOption()}recalculateArrowMove(d){let e=this.dropElm?.querySelectorAll(ur)||[],s=Array.from(e).findIndex(r=>r.dataset.key===this.lastFocusedItemKey);this._currentHighlightIndex=s-1,"down"===d?this.moveHighlightDown():"up"===d&&(this.moveHighlightUp(),this.isMoveUpRecalcRequired=!1)}close(d){this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),this.choiceElm?.querySelector("div.ms-icon-caret")?.classList.remove("open"),this.dropElm&&(this.dropElm.style.display="none",this.dropElm.ariaExpanded="false",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto")),this.options.onClose(d)}applyAsTextOrHtmlWhenEnabled(d,e){d||(d={}),this.isRenderAsHtml?d.innerHTML="function"==typeof this.options.sanitizer?this.options.sanitizer(e):e:d.textContent=e}update(d=!1){let e=this.getSelects(),s=this.getSelects("text");this.options.displayValues&&(s=e);let r=this.choiceElm?.querySelector("span"),a=e.length,c=null,u=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let y=e.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?function $0(d){return d.replace(/(\b)(on[a-z]+)(\s*)=([^>]*)|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;|&#60;)(\/*)(script|script defer)(.*)(&#62;|&gt;|&gt;">)/gi,"")}(y):y}return s.join(this.options.displayDelimiter)};if(r){if(0===a){let y=this.options.placeholder||"";r.classList.add("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(r,y)}else c=a<this.options.minimumCountSelected?u():this.formatAllSelected()&&a===this.dataTotal?this.formatAllSelected():this.options.ellipsis&&a>this.options.minimumCountSelected?`${s.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(a,this.dataTotal)&&a>this.options.minimumCountSelected?this.formatCountSelected(a,this.dataTotal):u();null!==c&&(r?.classList.remove("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(r,c)),this.options.showClear&&this.selectClearElm&&(this.selectClearElm.style.display=c?"block":"none"),this.options.displayTitle&&(r.title=this.getSelects(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text").join(this.options.displayDelimiter))}let g=this.getSelects();this.options.single?this.elm.value=g.length?g[0]:"":Array.from(this.elm.options).forEach(y=>{y.selected=g.some(M=>M===y.value)}),d||this.elm.dispatchEvent(new Event("change"))}updateSelected(d){for(let s=this.updateDataStart;s<this.updateDataEnd;s++){let r=this.updateData[s],a=this.dropElm?.querySelector(`input[data-key=${r._key}]`);if(a){a.checked=r.selected;let c=a.closest("li"),u=c?.querySelector(".icon-checkbox-container div");c&&(r.selected&&!c.classList.contains("selected")?(c.classList.add("selected"),c.ariaSelected="true",u&&(u.className="ms-icon ms-icon-"+("radio"===a.type?"radio":"check"))):r.selected||(c.classList.remove("selected"),c.ariaSelected="false",u&&(u.className="ms-icon ms-icon-uncheck")))}}let e=0===this.data?.filter(s=>s.visible).length;if(this.selectAllElm){this.selectAllElm.ariaChecked=String(this.isAllSelected);let s=this.dropElm?.querySelector(".ms-select-all .icon-checkbox-container div");if(s){let r="";r=this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck",s.className=`ms-icon ${r}`}this.selectAllElm.checked=this.isAllSelected,pu(this.selectAllElm.closest("li"),!e)}pu(this.noResultsElm,e),this.virtualScroll&&(this.virtualScroll.rows=d??this.getListRows())}getData(){return this.options.data}getDataLength(){return this.data?.length??0}getOptions(d=!0){let e=Object.assign({},this.options);return delete e.data,d?ls(e):this.options}refreshOptions(d){(function fu(d,e,s=!1){let r=Object.keys(d),a=Object.keys(e);if(s&&r.length!==a.length)return!1;for(let c of r)if(a.includes(c)&&d[c]!==e[c])return!1;return!0})(this.options,d,!0)||(this.options=Object.assign(this.options,d),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(d="value"){let e=[];for(let s of this.data||[])if("optgroup"===s.type){let r=s.children.filter(a=>a?.selected);if(!r.length)continue;if("value"===d||this.options.single)e.push(...r.map(a=>"value"===d&&a._value||a[d]));else{let a=[];a.push("["),a.push(s.label),a.push(`: ${r.map(c=>c[d]).join(", ")}`),a.push("]"),e.push(a.join(""))}}else s.selected&&e.push("value"===d&&s._value||s[d]);return e}setSelects(d,e="value",s=!1){let r=!1,a=c=>{for(let u of c){let g=!1;if("text"===e){let y=document.createElement("div");this.applyAsTextOrHtmlWhenEnabled(y,u.text),g=d.includes(y.textContent?.trim()??"")}else g=d.includes(u._value||u.value),!g&&u.value===""+ +u.value&&(g=d.includes(+u.value));u.selected!==g&&(r=!0),u.selected=g}};for(let c of this.data||[])a("optgroup"===c.type?c.children:[c]);r&&(this.initSelected(s),this.updateSelected(),this.update(s))}enable(){this.choiceElm&&(this.choiceElm.classList.remove("disabled"),this.choiceElm.disabled=!1)}disable(){this.choiceElm&&(this.choiceElm?.classList.add("disabled"),this.choiceElm.disabled=!0)}check(d){let e=Do(this.data,"value",d);e&&this._check(e,!0)}uncheck(d){let e=Do(this.data,"value",d);e&&this._check(e,!1)}_check(d,e){this.options.single&&this._checkAll(!1,!0),d.selected=e,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(d,e){for(let s of this.data||[])"optgroup"===s.type?this._checkGroup(s,d,!0):!s.disabled&&!s.divider&&(e||s.visible)&&(s.selected=d);e||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(d,e,s){d.selected=e,d.children.forEach(r=>{r&&!r.disabled&&!r.divider&&(s||r.visible)&&(r.selected=e)}),s||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let d of this.data||[])if("optgroup"===d.type)for(let e of d.children)e&&(e.divider||(e.selected=!e.selected));else d&&!d.divider&&(d.selected=!d.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){this.choiceElm?.focus(),this.options.onFocus()}blur(){this.choiceElm?.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(d){let e=this.searchInputElm?.value.trim()??"",s=e.toLowerCase();if(this.filterText===s)return;this.filterText=s;for(let a of this.data||[])if("optgroup"===a.type)if(this.options.filterGroup){let c=`${a?.label??""}`;if(null!=a){let u=this.options.customFilter({label:as(c.toString().toLowerCase(),this.options.diacriticParser),search:as(s,this.options.diacriticParser),originalLabel:c,originalSearch:e,row:a});a.visible=u;for(let g of a.children)g&&(g.visible=u)}}else{for(let c of a.children)if(null!=c){let u=`${c?.text??""}`;c.visible=this.options.customFilter({text:as(u.toString().toLowerCase(),this.options.diacriticParser),search:as(s,this.options.diacriticParser),originalText:u,originalSearch:e,row:c,parent:a})}a.visible=a.children.filter(c=>c?.visible).length>0}else{let c=`${a?.text??""}`;a.visible=this.options.customFilter({text:as(c.toString().toLowerCase(),this.options.diacriticParser),search:as(s,this.options.diacriticParser),originalText:c,originalSearch:e,row:a})}let r=this.initListItems();this.initSelected(d),this.updateSelected(r),d||this.options.onFilter(e)}adjustDropHeight(d){let e="top"!==d,c=(this.filterParentElm?.getBoundingClientRect().height??0)+(this.okButtonElm?.getBoundingClientRect().height??0)+(this.options.single?0:this.selectAllParentElm?.getBoundingClientRect().height??0)+5,{bottom:u,top:g}=Ja(this.parentElm),y=this.options.maxHeight;if(y=e?u-c-this.options.adjustedHeightPadding:g-c-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&y<this.options.maxHeight){let M=this.dropElm?.querySelector("ul");return M&&(M.style.maxHeight=`${y}px`),!0}return!1}adjustDropPosition(d){let e="bottom";if(this.dropElm&&this.parentElm){let{bottom:s,top:r}=Ja(this.dropElm),{top:a,left:c}=mu(this.parentElm),u=this.dropElm.getBoundingClientRect().height,g=this.dropElm.getBoundingClientRect().width,y=document.body.offsetWidth||window.innerWidth,M=this.parentElm.getBoundingClientRect().width;if(s>u)e="bottom";else if(u>s&&r>s){if(this.options.container){let L=a-u;L<0&&(L=0),(L>0||d)&&(e="top",this.dropElm.style.top=`${L<0?0:L}px`)}else e="top",this.dropElm.classList.add(e);this.dropElm.classList.remove("bottom")}y-g<c&&(this.dropElm.style.left=c-(g-M)+"px")}return e}adjustDropWidthByText(){if(this.dropElm){let d=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(d=this.options.dropWidth||this.options.width||0);let e=this.dropElm.querySelector(".ms-select-all span"),s=this.dropElm.querySelector("ul"),r=26,a=e?.clientWidth??0+r,c=s.scrollHeight>s.clientHeight?this.getScrollbarWidth():0,u=0;this.dropElm.querySelectorAll("li label").forEach(g=>{g.scrollWidth>u&&(u=g.scrollWidth)}),u+=r+c,u<a&&(u=a),this.options.maxWidth&&u>this.options.maxWidth&&(u=this.options.maxWidth),this.options.minWidth&&u<this.options.minWidth&&(u=this.options.minWidth),("100%"===d||+d<u)&&(this.dropElm.style.width=`${u}px`,this.dropElm.style.maxWidth=`${u}px`)}}getScrollbarWidth(){let d=document.createElement("div");d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d);let e=d.offsetWidth;d.style.overflow="scroll";let s=document.createElement("div");s.style.width="100%",d.appendChild(s);let r=s.offsetWidth;return d.parentNode?.removeChild(d),e-r}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(d,e){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${d}`).replace("%",`${e}`):this.options.formatCountSelected(d,e)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},So=(d,e)=>"string"==typeof d?Sc(document.querySelectorAll(d),e):d instanceof Node?Sc([d],e):Sc(d,e);function Sc(d,e){let s=Array.from(d),r=[];for(let a=0;a<s.length;a++){let c=s[a];try{void 0!==c._multipleSelect&&(c._multipleSelect.destroy(),delete c._multipleSelect),c._multipleSelect=new vu(c,e||{}),c._multipleSelect.init();let u=c._multipleSelect.getOptions(!1);u.onHardDestroy=()=>delete c._multipleSelect,u.onAfterHardDestroyed=()=>r[a]=null,r.push(c._multipleSelect)}catch(u){console.error(u)}}return 1===r.length?r[0]:r}So.defaults=Vs.DEFAULTS,So.locales={...bg},So.methods=Vs.METHODS,typeof window<"u"&&(window.multipleSelect=So);class Eu{constructor(e,s,r,a=!0){this.translaterService=e,this.collectionService=s,this.rxjs=r,this._isMultipleSelect=!0,this._collectionLength=0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=a}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get columnFilter(){return this.columnDef?.filter??{}}get customStructure(){return this.columnDef?.filter?.customStructure}get gridOptions(){return this.grid?.getOptions()??{}}get defaultOperator(){return this.isMultipleSelect?oe.in:oe.equal}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.select,...this.columnFilter?.filterOptions}}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var s=this;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error("[Slickgrid-Universal] You need to pass a \"collection\" (or \"collectionAsync\") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");if(this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this.optionLabel=this.customStructure?.optionLabel??"value",this.valueName=this.customStructure?.value??"value",this.enableTranslateLabel&&(!this.translaterService||"function"!=typeof this.translaterService.translate))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=this.gridOptions?.locales??V.locales,this.initMultipleSelectTemplate();let r=this.gridOptions?.defaultFilterPlaceholder||"";this.columnFilter?.placeholder&&(r=this.columnFilter.placeholder),this.defaultOptions.placeholder=r||"",this._isMultipleSelect&&this.columnDef?.filter&&(this.columnDef.filter.emptySearchTermReturnAllValues=this.columnDef.filter?.emptySearchTermReturnAllValues??!1);const a=this.columnFilter.collection||[];return new Promise(function(){var c=(0,mt.A)(function*(u,g){try{let y;s.columnFilter.collectionAsync&&!s.columnFilter.collection?(y=$t(s.columnFilter.collectionAsync,s.columnDef,s.renderDomElement.bind(s),s.rxjs,s.subscriptions),u(y)):(y=a,s.renderDomElement(a),u(a)),(s.columnFilter.collectionAsync||s.columnFilter.enableCollectionWatch)&&(yield y??s.columnFilter.collectionAsync,s.watchCollectionChanges())}catch(y){g(y)}});return function(u,g){return c.apply(this,arguments)}}())}clear(e=!0){this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),this.updateFilterStyle(!1),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){"function"==typeof this._msInstance?.destroy&&this._msInstance.destroy(),this.filterElm?.remove(),Be(this.subscriptions)}getValues(){return this._msInstance?.getSelects()??[]}setValues(e,s,r=!1){void 0!==e&&this._msInstance&&(e=Array.isArray(e)?e.every(a=>(0,A.isPrimitiveValue)(a))?e.map(String):e:[e],this._msInstance.setSelects(e)),this.updateFilterStyle(this.getValues().length>0),this.operator=s||this.defaultOperator,r&&this.onTriggerEvent()}filterCollection(e){let s=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const r=this.columnFilter.collectionFilterBy,a=this.columnFilter.collectionOptions?.filterResultAfterEachPass||null;s=this.collectionService?.filterCollection(s,r,a)||[]}return s}sortCollection(e){let s=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const r=this.columnFilter.collectionSortBy;s=this.collectionService?.sortCollection(this.columnDef,s,r,this.enableTranslateLabel)||[]}return s}watchCollectionChanges(){this.columnFilter?.collection&&(z(this.columnFilter.collection,this.watchCallback.bind(this)),Z(this.columnFilter,"collection",this.propertyObserverCallback.bind(this)))}propertyObserverCallback(e){this.renderDomElement(e||[]),this.columnFilter.collection&&z(this.columnFilter.collection,this.watchCallback.bind(this))}watchCallback(e){this.renderDomElement(this.columnFilter.collection||e||[])}renderDomElement(e){if(!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty&&(e=ie(e,this.collectionOptions.collectionInsideObjectProperty||"")),!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let s=[];e.length>0&&(s=[...e]),this.collectionOptions?.addBlankEntry&&Array.isArray(s)&&s.length>0&&""!==s[0][this.valueName]&&s.unshift(this.createBlankEntry()),this.collectionOptions?.addCustomFirstEntry&&Array.isArray(s)&&s.length>0&&s[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&s.unshift(this.collectionOptions.addCustomFirstEntry),this.collectionOptions?.addCustomLastEntry&&Array.isArray(s)&&s.length>0&&s[s.length-1][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&s.push(this.collectionOptions.addCustomLastEntry);let r=s;r=this.filterCollection(r),r=this.sortCollection(r);const a=function re(d,e,s,r,a=!1,c,u){const g=s?.id??"",y=r.getOptions(),M=("editor"===d?s?.editor:s?.filter)??{},q=(M?.collectionOptions??{})?.separatorBetweenTextLabels??"",pe=M?.enableTranslateLabel??!1,Ie=y?.enableTranslate??!1,Ve=M?.enableRenderHtml??!1,Ge=M?.customStructure?.label??"label",Je=M?.customStructure?.labelPrefix??"labelPrefix",Xe=M?.customStructure?.labelSuffix??"labelSuffix",rt=M?.customStructure?.optionLabel??"value",_e=M?.customStructure?.value??"value",qe=(0,A.createDomElement)("select",{className:"ms-filter search-filter"});qe.classList.add(..."filter"===d?["search-filter",`filter-${g}`]:["select-editor",`editor-${g}`]),qe.multiple=a;const yt=[];let Bt=!1;return Array.isArray(e)&&(e.every(Ot=>"number"==typeof Ot||"string"==typeof Ot)?e.forEach(Ot=>{const Gt={text:String(Ot),value:Ot};"filter"===d&&Array.isArray(u)&&(Gt.selected=u.findIndex(ii=>ii===Ot)>=0),yt.push(Gt),(Gt.selected&&a||Gt.selected&&!a&&""!==Ot)&&(Bt=!0)}):e.forEach(Ot=>{if(void 0===Ot||"object"==typeof Ot&&void 0===Ot[Ge]&&void 0===Ot.labelKey)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");const Gt=Ot.labelKey||Ot[Ge],ii=(Ot.labelKey||pe&&c)&&Gt&&Ie?c?.translate(Gt||" "):Gt;let Yn=Ot[Je]||"",fi=Ot[Xe]||"",Un=Ot.hasOwnProperty(rt)?Ot[rt]:"";Un?.toString&&(Un=Un.toString().replace(/"/g,"'")),Yn=pe&&c&&Yn&&"string"==typeof Yn?c.translate(Yn||" "):Yn,fi=pe&&c&&fi&&"string"==typeof fi?c.translate(fi||" "):fi,Un=pe&&c&&Un&&"string"==typeof Un?c.translate(Un||" "):Un;let cs=[Yn,"string"==typeof ii||"number"==typeof ii?ii.toString():ii,fi].filter(Di=>Di).join(q);const si={text:"",value:""};Ve&&(cs=r.sanitizeHtmlString(cs)),si.text=cs;let $i=Ot[_e];null==$i&&($i=""),"filter"===d&&Array.isArray(u)&&(si.selected=u.findIndex(Di=>`${Di}`==`${Ot[_e]}`)>=0),si.value=`${$i??""}`,yt.push(si),(si.selected&&a||si.selected&&!a&&""!==Ot[_e])&&(Bt=!0)})),{selectElement:qe,dataCollection:yt,hasFoundSearchTerm:Bt}}("filter",r,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=a.hasFoundSearchTerm,this.createFilterElement(a.selectElement,a.dataCollection),this._collectionLength=r.length}createBlankEntry(){const e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createFilterElement(e,s){const r=this.columnDef?.id??"";this.elementName=`filter-${r}`,this.defaultOptions.name=this.elementName,(0,A.emptyElement)(this.filterContainerElm),this.filterElm=e,this.filterElm.dataset.columnId=`${r}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(e),this.filterElmOptions={...this.defaultOptions,...this.filterOptions,data:s},this._msInstance=So(e,this.filterElmOptions)}initMultipleSelectTemplate(){const e=this.gridOptions?.enableTranslate??!1,r={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${this.columnDef?.id??""}`,container:"body",darkMode:!!this.gridOptions.darkMode,filter:!1,maxHeight:275,single:!0,singleRadio:!0,showSearchClear:!0,renderOptionLabelAsHtml:this.columnFilter?.enableRenderHtml??!1,sanitizer:a=>this.grid.sanitizeHtmlString(a),onClose:()=>this.onTriggerEvent(),onClear:()=>this.clear()};if(this._isMultipleSelect){r.single=!1,r.singleRadio=!1,r.showOkButton=!0,r.displayTitle=!0;const a=J(this.gridOptions);r.countSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${a}X_OF_Y_SELECTED`):this._locales?.TEXT_X_OF_Y_SELECTED,r.allSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${a}ALL_SELECTED`):this._locales?.TEXT_ALL_SELECTED,r.noMatchesFoundText=e&&this.translaterService?.translate?this.translaterService.translate(`${a}NO_MATCHES_FOUND`):this._locales?.TEXT_NO_MATCHES_FOUND,r.okButtonText=e&&this.translaterService?.translate?this.translaterService.translate(`${a}OK`):this._locales?.TEXT_OK,r.selectAllText=e&&this.translaterService?.translate?this.translaterService.translate(`${a}SELECT_ALL`):this._locales?.TEXT_SELECT_ALL}this.defaultOptions=r}onTriggerEvent(){if(this._msInstance){const e=this.getValues();this.updateFilterStyle(Array.isArray(e)&&e.length>1||1===e.length&&""!==e[0]),this.searchTerms=e,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(e){e?(this.isFilled=!0,this.filterElm?.classList.add("filled"),this._msInstance?.getParentElement()?.classList.add("filled")):(this.isFilled=!1,this.filterElm?.classList.remove("filled"),this._msInstance?.getParentElement()?.classList.remove("filled"))}}const Tc={autocompleter:class Ts{constructor(e,s,r){this.translaterService=e,this.collectionService=s,this.rxjs=r,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new St.P}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get collection(){return this._collection}get columnFilter(){return this.columnDef?.filter||{}}get filterDomElement(){return this._filterElm}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.autocompleter,...this.columnFilter?.filterOptions}}get customStructure(){let e=this.columnFilter?.customStructure;return!e&&(this.columnFilter?.type??this.columnDef?.type)===p.object&&this.columnDef?.dataKey&&this.columnDef?.labelKey&&(e={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),e}get defaultOperator(){return oe.equal}get gridOptions(){return this.grid?.getOptions()??{}}get instance(){return this._instance}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var s=this;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!(this.grid&&this.columnDef&&this.columnFilter&&(this.columnFilter.collection||this.columnFilter.collectionAsync||this.columnFilter.filterOptions)))throw new Error("[Slickgrid-Universal] You need to pass a \"collection\" (or \"collectionAsync\") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.valueName=this.customStructure?.value??"value",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this._locales=this.gridOptions?.locales??V.locales;const r=this.columnFilter.collection;return this._collection=r,this.renderDomElement(r),new Promise(function(){var a=(0,mt.A)(function*(c,u){try{const g=s.columnFilter.collectionAsync;let y;g&&!s.columnFilter.collection?(y=$t(g,s.columnDef,s.renderDomElement.bind(s),s.rxjs,s.subscriptions),c(y)):(y=r,c(r)),(g||s.columnFilter.enableCollectionWatch)&&(yield y??g,s.watchCollectionChanges())}catch(g){u(g)}});return function(c,u){return a.apply(this,arguments)}}())}clear(e=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this.updateFilterStyle(!1))}destroy(){"function"==typeof this._instance?.destroy&&this._instance.destroy(),this._filterElm?.remove?.(),this._collection=void 0,this._bindEventService.unbindAll(),Be(this.subscriptions)}getValues(){return this._filterElm?.value||""}setValues(e,s,r=!1){e&&this._filterElm&&(this._filterElm.value=e),this.updateFilterStyle(""!==this.getValues()),this.operator=s||this.defaultOperator,r&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[this.getValues()],shouldTriggerQuery:!0})}filterCollection(e){let s=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const r=this.columnFilter.collectionFilterBy,a=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;s=this.collectionService?.filterCollection(s,r,a)||[]}return s}sortCollection(e){let s=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const r=this.columnFilter.collectionSortBy;s=this.collectionService?.sortCollection(this.columnDef,s,r,this.enableTranslateLabel)||[]}return s}watchCollectionChanges(){this.columnFilter?.collection&&(z(this.columnFilter.collection,e=>{this.renderDomElement(this.columnFilter.collection||e||[])}),Z(this.columnFilter,"collection",e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&z(this.columnFilter.collection,s=>{this.renderDomElement(this.columnFilter.collection||s||[])})}))}renderDomElement(e){!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty&&(e=ie(e,this.collectionOptions.collectionInsideObjectProperty||""));let s=e;s&&(s=this.filterCollection(s),s=this.sortCollection(s));const r=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=s,this._filterElm=this.createFilterElement(s,r),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",()=>{this.isItemSelected||this.clear()})}createFilterElement(e,s){this._collection=e;const r=this.columnDef?.id??"";(0,A.emptyElement)(this.filterContainerElm);let a=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(a=this.columnFilter.placeholder),this._filterElm=(0,A.createDomElement)("input",{type:"text",ariaLabel:this.columnFilter?.ariaLabel??`${(0,A.toSentenceCase)(r+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:a,className:`form-control search-filter filter-${r} slick-autocomplete-container`,value:s??"",dataset:{columnid:`${r}`}});const c=s;Array.isArray(e)&&(e=e.every(g=>(0,A.isPrimitiveValue)(g))?e.map(g=>({label:g,value:g})):e.map(g=>({label:g?.[this.labelName],value:g?.[this.valueName],labelPrefix:g?.[this.labelPrefixName]??"",labelSuffix:g?.[this.labelSuffixName]??""}))),this._autocompleterOptions={input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${this.filterOptions?.className??""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&this.translaterService?.translate?this.translaterService.translate("NO_ELEMENTS_FOUND"):this._locales?.TEXT_NO_ELEMENTS_FOUND??"No elements found",customize:(g,y,M)=>{M.style.width=""},onSelect:g=>{this.isItemSelected=!0,this.handleSelect(g)},...this.filterOptions},this.gridOptions?.darkMode&&(this._autocompleterOptions.className+=" slick-dark-mode"),this.autocompleterOptions.className=(0,A.classNameToList)(this.autocompleterOptions.className).join(" "),this._autocompleterOptions.renderItem?.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${(0,A.toKebabCase)(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(e)?this._autocompleterOptions.render=this._autocompleterOptions.render?.bind(this)??this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),this.filterOptions?.fetch?(function Ut(d,e){const s=e.fetch;s&&(e.fetch=(r,a,c,u)=>{d.classList.add("slick-autocomplete-loading");const g=a;s(r,M=>{g(M),d.classList.remove("slick-autocomplete-loading")},c,u)})}(this._filterElm,this._autocompleterOptions),this._instance=Et(this._autocompleterOptions)):this._instance=Et({...this._autocompleterOptions,fetch:(g,y)=>{e&&y(e.filter(M=>(("string"==typeof M?M:M?.label)||"").toLowerCase().includes(g.toLowerCase())))}}),this._filterElm.value=c??"";const u=(0,A.createDomElement)("div",{className:"autocomplete-filter-container"});return u.appendChild(this._filterElm),u.appendChild((0,A.createDomElement)("span")),s&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(u),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(e){if(void 0!==e){const r=this.filterOptions?.renderItem??!1,a="string"==typeof e?e:r?e[this.labelName]:e.label;let c="string"==typeof e?e:r?e[this.valueName]:e.value;c=this.trimWhitespaceWhenEnabled(c),this.updateFilterStyle(""!==c),this.setValues(a),this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[c],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(e){let s=e?.target?.value??"";const r=this.filterOptions.triggerOnEveryKeyStroke??!1;if(s=this.trimWhitespaceWhenEnabled(s),this._clearFilterTriggered||""===s||r){const a={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?a.clearFilterTriggered=this._clearFilterTriggered:(a.operator=this.operator,a.searchTerms=[s]),this.updateFilterStyle(""!==s),this.callback(e,a)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(e){return(0,A.createDomElement)("div",{textContent:("string"==typeof e?e:e?.label??"")||""})}renderCustomItem(e){const s=this._autocompleterOptions?.renderItem?.templateCallback(e)??"",r=document.createElement("div");return this.grid.applyHtmlCode(r,s),r}renderCollectionItem(e){const s=this.columnFilter?.enableRenderHtml??!1,g=this.grid.sanitizeHtmlString((e.labelPrefix||"")+(e.label||"")+(e.labelSuffix||""))||"",y=document.createElement("div");return y[s?"innerHTML":"textContent"]=g,y}trimWhitespaceWhenEnabled(e){let s=e;return"string"==typeof e&&(this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace)&&(s=e.trim()),s}updateFilterStyle(e){this.isItemSelected=e,e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}},compoundDate:class fl extends Wd{constructor(e){super(e),this.translaterService=e,this.inputFilterType="compound"}},compoundInput:yc,compoundInputNumber:class vc extends Eo{constructor(e){super(e),this.translaterService=e,this.inputType="number",this.inputFilterType="compound"}},compoundInputPassword:class Ig extends Eo{constructor(e){super(e),this.translaterService=e,this.inputType="password",this.inputFilterType="compound"}},compoundInputText:yc,compoundSlider:class Ec extends za{constructor(e){super(e),this.translaterService=e,this.sliderType="compound"}},dateRange:class Ka extends Wd{constructor(e){super(e),this.translaterService=e,this.inputFilterType="range"}},input:Eo,inputMask:class lu extends Eo{constructor(e){super(e),this.translaterService=e,this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._cellContainerElm=e.filterContainerElm,this.columnDef?.params?.mask?this._inputMask=this.columnDef.params.mask:this.columnFilter?.params?.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error("[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params\n        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]");const s=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(s),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this))}onTriggerEvent(e,s=!1){let r="";if(e?.target?.value){let a=e?.target?.value??"";"string"==typeof a&&(this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace)&&(a=a.trim());const u=this.unmaskValue(a),g=this.maskValue(u);r=u,e?.keyCode>=48&&(this._filterInputElm.value=g,e.preventDefault())}s?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:s,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterInputElm.classList.remove("filled")):(this._filterInputElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[r],shouldTriggerQuery:this._shouldTriggerQuery})),this._shouldTriggerQuery=!0}maskValue(e){let s=0,r="";return this._inputMask&&(r=this._inputMask.replace(/[09A]/gi,a=>(("0"===a||"9"===a)&&/\d+/g.test(e[s])||"A"===a.toUpperCase()&&/[^\d]+/gi.test(e[s]))&&e[s++]||"")),r}unmaskValue(e){const s=e.replace(/[^0-9a-z]*/gi,""),r=this._inputMask.replace(/[^0-9a-z]*/gi,"");let a="";for(let c=0;c<r.length;c++)s[c]&&(("0"===r[c]||"9"===r[c])&&/\d+/g.test(s[c])||"A"===r[c].toUpperCase()&&/[^\d]+/gi.test(s[c]))&&(a+=s[c]);return a}},inputNumber:class Mg extends Eo{constructor(e){super(e),this.translaterService=e,this.inputType="number"}},inputPassword:class Ag extends Eo{constructor(e){super(e),this.translaterService=e,this.inputType="password"}},inputText:Eo,multipleSelect:class Du extends Eu{constructor(e,s,r){super(e,s,r,!0),this.translaterService=e,this.collectionService=s,this.rxjs=r}},singleSelect:class Bg extends Eu{constructor(e,s,r){super(e,s,r,!1),this.translaterService=e,this.collectionService=s,this.rxjs=r}},slider:class Bs extends za{constructor(e){super(e),this.translaterService=e,this.sliderType="single"}},sliderRange:class Hg extends za{constructor(e){super(e),this.translaterService=e,this.sliderType="double"}}};class z0{constructor(e,s,r,a){this.config=e,this.translaterService=s,this.collectionService=r,this.rxjs=a,this._options=this.config?.options??{}}addRxJsResource(e){this.rxjs=e}createFilter(e){let s;return e?.model&&(s="function"==typeof e.model?new e.model(this.translaterService,this.collectionService,this.rxjs):e.model),!s&&this._options.defaultFilter&&(s=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),s}}const K0={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:1500,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:Ic},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Tc.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"\u{1f50e}\ufe0e",defaultFilterRangeOperator:oe.rangeInclusive,defaultColumnSortFieldId:"id",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:j.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2b9e",groupExpandedSymbol:"\u2b9f",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:E.comma,exportWithFormatter:!1,filename:"export",format:j.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},eventNamingStyle:Qe.i.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideToggleDarkModeCommand:!0,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-pin-off-outline",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:Ic},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFilterShortcutSubMenu:"mdi mdi-filter-outline",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\xb7"}};function Ic(d,e){let s=d?.columnPickerLabel??d?.name??"";(s instanceof HTMLElement||s instanceof DocumentFragment)&&(s=s.textContent||"");const r=d?.columnGroup||"";return r?r+(e?.columnGroupSeparator??" - ")+s:s}const ui=(d,e,s)=>{if(Array.isArray(s)&&s.length>0){const r=s.join(", ");return(0,A.createDomElement)("span",{title:r,textContent:r})}return s},Rc=(d,e,s,r,a)=>{if(!r)return"";const c=r.params||{},u=c?.complexField??c?.complexFieldLabel??r.field;if(!u)throw new Error("For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.\n      There are 3 ways to provide it:\n      1- via the generic \"params\" with a \"complexField\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]\n      2- via the generic \"params\" with a \"complexField\" and a \"labelKey\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]\n      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] ");if(r.labelKey&&a.hasOwnProperty(u))return a[u]?.[r.labelKey];if("string"==typeof u&&u.indexOf(".")>0){let g=u.split(".").reduce((y,M)=>y?.hasOwnProperty(M)?y[M]:"",a);return(null==g||"object"==typeof g&&0===Object.entries(g).length&&!(g instanceof Date))&&(g=""),g}return s},Gu={arrayObjectToCsv:(d,e,s,r,a)=>{const c=r&&r.params||{},u=c.propertyNames,g=c?.includeTitle??!0;let y=c.dataContextProperty;if(y||(y=r?.field?.split(".")[0]||""),!u||!Array.isArray(u)||!y)throw new Error('Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.\n      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: [\'firtName\'] }}.\n      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.');if(a[y]&&Array.isArray(a[y])&&Array.isArray(a[y])&&a[y].length>0){const M=[];a[y].forEach(pe=>{const Ie=[];u.forEach(Ve=>{Ie.push(pe[Ve])}),M.push(Ie.join(" "))});const L=M.join(", "),q=(0,A.createDomElement)("span",{textContent:L});return g&&(q.title=L),q}return s},arrayToCsv:ui,checkmarkMaterial:(d,e,s)=>{let r=!1;const a=(0,A.isNumber)(s);return a&&(s=+s),(!0===s||a&&+s>0||"string"==typeof s&&s.length>0&&"false"!==s.toLowerCase()&&"0"!==s)&&(r=!0),r?(0,A.createDomElement)("i",{className:"mdi mdi-18px mdi-check checkmark-icon",ariaHidden:"true"}):""},complex:Rc,complexObject:Rc,collection:(d,e,s,r,a,c)=>{if(!(s&&r&&r.params&&r.params.collection&&r.params.collection.length))return s;const{params:u,params:{collection:g}}=r,y=u.customStructure?u.customStructure.label:"label",M=u.customStructure?u.customStructure.value:"value";return Array.isArray(s)?ui(0,0,s.map(L=>ke(g,q=>q[M]===L)[y])):ke(g,L=>L[M]===s)[y]||""},collectionEditor:(d,e,s,r,a,c)=>{if(!(s&&r&&r.editor&&r.editor.collection&&r.editor.collection.length))return s;const{editor:u,editor:{collection:g}}=r,y=u.customStructure?u.customStructure.label:"label",M=u.customStructure?u.customStructure.value:"value";return Array.isArray(s)?g.every(L=>"string"==typeof L)?ui(0,0,s.map(L=>ke(g,q=>q===L))):ui(0,0,s.map(L=>ke(g,q=>q[M]===L)[y])):ke(g,L=>L[M]===s)[y]||""},currency:(d,e,s,r,a,c)=>{const{currencyPrefix:u,currencySuffix:g,minDecimal:y,maxDecimal:M,numberPrefix:L,numberSuffix:q,decimalSeparator:pe,thousandSeparator:Ie,wrapNegativeNumber:Ve}=Bn(r,c,"decimal","cell");return(0,A.isNumber)(s)?`${L}${ee(s,y,M,Ve,u,g,pe,Ie)}${q}`:s},dateIso:Ln(p.dateIso,"-"),dateTimeIso:Ln(p.dateTimeIso,"-"),dateTimeShortIso:Ln(p.dateTimeShortIso,"-"),dateTimeIsoAmPm:Ln(p.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:Ln(p.dateTimeIsoAM_PM,"-"),dateEuro:Ln(p.dateEuro,"/"),dateEuroShort:Ln(p.dateEuroShort,"/"),dateTimeEuro:Ln(p.dateTimeEuro,"/"),dateTimeEuroShort:Ln(p.dateTimeEuroShort,"/"),dateTimeShortEuro:Ln(p.dateTimeShortEuro,"/"),dateTimeEuroAmPm:Ln(p.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:Ln(p.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:Ln(p.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:Ln(p.dateTimeEuroShortAM_PM,"/"),dateUs:Ln(p.dateUs,"/"),dateTimeUs:Ln(p.dateTimeUs,"/"),dateTimeShortUs:Ln(p.dateTimeShortUs,"/"),dateTimeUsAmPm:Ln(p.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:Ln(p.dateTimeUsAM_PM,"/"),dateTimeUsShort:Ln(p.dateTimeUsShort,"/"),dateTimeUsShortAmPm:Ln(p.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:Ln(p.dateTimeUsShortAM_PM,"/"),dateUsShort:Ln(p.dateUsShort,"/"),dateUtc:Ln(p.dateUtc,"-"),decimal:(d,e,s,r,a,c)=>{if("ExchangeRate"==r.field&&null!=s){let Ie=s.toString().split(".");Ie.length>1&&r.params&&("0"===r.params.minDecimalActual||""==r.params.minDecimalActual||null==r.params.minDecimalActual)?(r.params.minDecimal=Ie[1].length.toString(),r.params.maxDecimal=Ie[1].length.toString()):1==Ie.length&&r.params&&(r.params.minDecimal=r.params.minDecimalActual,r.params.maxDecimal=r.params.minDecimalActual)}const{minDecimal:u,maxDecimal:g,numberPrefix:y,numberSuffix:M,decimalSeparator:L,thousandSeparator:q,wrapNegativeNumber:pe}=Bn(r,c,"decimal","cell");return(0,A.isNumber)(s)?ee(s,u,g,pe,y,M,L,q):s},dollar:(d,e,s,r,a,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:L}=Bn(r,c,"currency","cell");return(0,A.isNumber)(s)?ee(s,u,g,L,"$","",y,M):s},dollarColored:(d,e,s,r,a,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:L}=Bn(r,c,"currency","cell");if((0,A.isNumber)(s)){const q=s>=0?"green":"red",pe=ee(s,u,g,L,"$","",y,M),Ie=(0,A.createDomElement)("span",{ariaHidden:"true",textContent:pe});return Ie.style.color=q,Ie}return s},dollarColoredBold:(d,e,s,r,a,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:L}=Bn(r,c,"currency","cell");if((0,A.isNumber)(s)){const q=s>=0?"green":"red",pe=ee(s,u,g,L,"$","",y,M),Ie=(0,A.createDomElement)("span",{ariaHidden:"true",textContent:pe});return Ie.style.color=q,Ie.style.fontWeight="bold",Ie}return s},hyperlink:(d,e,s,r,a,c)=>{const u=r&&r.params||{};let g=u.hyperlinkText?u.hyperlinkText:s;g=c.sanitizeHtmlString(g);let y=u.hyperlinkUrl?u.hyperlinkUrl:s;y=c.sanitizeHtmlString(y);const M=y.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#])?/i);return M&&Array.isArray(M)&&M.length>0?(0,A.createDomElement)("a",{href:M[0],textContent:g}):s},icon:(d,e,s,r)=>{const a=r?.params??{},c=a.iconCssClass||a.icon||a.formatterIcon;if(!c)throw new Error('[Slickgrid-Universal] When using `Formatters.icon`, you must provide the "iconCssClass" via the generic "params". (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "mdi mdi-magnify" }}`');return(0,A.createDomElement)("i",{className:c,ariaHidden:"true",title:a.title||null})},iconBoolean:(d,e,s,r)=>{const c=(r?.params||{}).cssClass;if(!c)throw new Error('[Slickgrid-Universal] When using `Formatters.iconBoolean`, you must provide You must provide the "cssClass", e.g.: { formatter: Formatters.iconBoolean, params: { cssClass: "mdi mdi-check" }}');let u=!1;const g=!isNaN(s);return(!0===s||g&&parseFloat(s)>0||!g&&"string"==typeof s&&"false"!==s.toLowerCase()&&"0"!==s)&&(u=!0),u?(0,A.createDomElement)("i",{className:c,ariaHidden:"true"}):""},mask:(d,e,s,r,a,c)=>{const g=(r.params||{}).mask;if(!g)throw new Error('You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: \'000-000\' }}');if(s){let y=0;const M=s.toString(),q=(c.getOptions()||{})?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return q.textContent=g.replace(/[09A]/gi,()=>M[y++]||""),q}return s},multiple:Rl,percent:(d,e,s,r,a,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:L}=Bn(r,c,"percent","cell");return(0,A.isNumber)(s)?ee(100*s,u,g,L,"","%",y,M):s},percentComplete:(d,e,s,r,a,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:L}=Bn(r,c,"percent","cell");if((0,A.isNumber)(s)){const q=s<50?"red":"green",pe=ee(s,u,g,L,"","%",y,M);return(0,A.createDomElement)("span",{textContent:s>100?"100%":pe,style:{color:q}})}return s},percentCompleteBar:(d,e,s)=>{if(!(0,A.isNumber)(s))return"";let r="",a=parseFloat(s);return a>100&&(a=100),r=a<30?"red":a<70?"silver":"green",(0,A.createDomElement)("span",{className:"percent-complete-bar",title:`${a}%`,style:{background:r,width:`${a}%`}})},percentCompleteBarWithText:(d,e,s)=>{if(!(0,A.isNumber)(s))return"";let r="",a=parseFloat(s);return a>100&&(a=100),r=a<30?"red":a<70?"silver":"green",(0,A.createDomElement)("div",{className:"percent-complete-bar-with-text",title:`${a}%`,textContent:`${a}%`,style:{background:r,width:`${a}%`}})},percentSymbol:(d,e,s,r,a,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:L}=Bn(r,c,"percent","cell");return(0,A.isNumber)(s)?ee(s,u,g,L,"","%",y,M):s},progressBar:(d,e,s)=>{if(!(0,A.isNumber)(s))return"";let r="",a=parseFloat(s);a>100&&(a=100),r=a<30?"danger":a<70?"warning":"success";const c=(0,A.createDomElement)("div",{className:"progress"});return c.appendChild((0,A.createDomElement)("div",{className:`progress-bar progress-bar-${r} bg-${r}`,role:"progressbar",ariaValueNow:String(a),ariaValueMin:"0",ariaValueMax:"100",textContent:`${a}%`,style:{minWidth:"2em",width:`${a}%`}})),c},translate:(d,e,s,r,a,c)=>{const g=(c?.getOptions()??{}).translater||r&&r.params&&r.params.translater;if(!g||"function"!=typeof g.translate)throw new Error('"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).\n    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }');return null!=s&&"string"!=typeof s&&(s+=""),s?g.translate(s):""},translateBoolean:(d,e,s,r,a,c)=>{const g=(c?.getOptions()??{}).translater||r&&r.params&&r.params.translater;if(!g||"function"!=typeof g.translate)throw new Error('"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).\n    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }');return null!=s&&"string"!=typeof s&&(s+=""),s?g.translate(s.toUpperCase()):""},tree:(d,e,s,r,a,c)=>{const u=c.getOptions(),g=u?.treeDataOptions,y=g?.indentMarginLeft??15,M=g?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,L=g?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,q=g?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP;let pe=s;if(pe=U(r,a,s),null==pe||void 0===a)return"";if(!a.hasOwnProperty(q))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const Ie=a?.[q]??0,Ve=document.createElement("span");Ve.style.display="inline-block",Ve.style.width=y*Ie+"px";const Ge=`slick-tree-level-${Ie}`;let Je="";a[L]&&(Je=a?.[M]?"collapsed":"expanded"),g?.titleFormatter&&(pe=Co(g.titleFormatter,d,e,r,a,c));const Xe=`slick-group-toggle ${Je}`.trim(),rt=(0,A.createDomElement)("div",{className:Xe,ariaExpanded:String("expanded"===Je)}),_e=(0,A.createDomElement)("span",{className:"slick-tree-title"});c.applyHtmlCode(_e,pe),_e.setAttribute("level",Ie);const qe=u?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return qe.appendChild(Ve),qe.appendChild(rt),qe.appendChild(_e),{addClasses:Ge,html:qe}},treeParseTotals:(d,e,s,r,a,c)=>{const g=c.getOptions()?.treeDataOptions?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:y,treeTotalsFormatter:M,params:L}=r;if(!y&&!M)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(a[g]&&a?.__treeTotals&&(y||M))return(M??y)(a?.__treeTotals,r,c);if(L.formatters){let q=s;for(const pe of L.formatters)!a[g]&&!a?.__treeTotals&&"function"==typeof pe&&(q=pe(d,e,q,r,a,c)||s);return q}return s},treeExport:(d,e,s,r,a,c)=>{const u=c.getOptions(),g=u?.treeDataOptions,y=g?.collapsedPropName??V.treeDataProperties.COLLAPSED_PROP,M=g?.hasChildrenPropName??V.treeDataProperties.HAS_CHILDREN_PROP,L=g?.levelPropName??V.treeDataProperties.TREE_LEVEL_PROP,q=g?.exportIndentMarginLeft??5,pe=g?.exportIndentationLeadingChar??".",Ie=g?.exportIndentationLeadingSpaceCount??3,Ve=u?.excelExportOptions?.groupCollapsedSymbol??"\u2b9e",Ge=u?.excelExportOptions?.groupExpandedSymbol??"\u2b9f";let Je=s;if(Je=U(r,a,s),null==Je||void 0===a)return"";if(!a.hasOwnProperty(L))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const Xe=a?.[L]??0;let rt="",_e=0;a[M]?(rt=a?.[y]?Ve:Ge,_e=0===Xe?0:q*Xe):_e=q*(0===Xe?0:Xe+1);const qe=(0,A.addWhiteSpaces)(_e);return g?.titleFormatter&&(Je=Co(g.titleFormatter,d,e,r,a,c)),Je=`${0===Xe&&rt?"":0===Xe?`${pe}${(0,A.addWhiteSpaces)(Ie)}`:pe}${qe}${rt} ${Je}`,(0,A.stripTags)(Je)}};class tm{constructor(){this.options=K0}}},56050:(ze,Oe,n)=>{"use strict";function C(x){return x}n.d(Oe,{D:()=>C})},57089:(ze,Oe,n)=>{"use strict";n.d(Oe,{m:()=>x});var C=n(20452);function x(G){return G&&(0,C.T)(G.schedule)}},57605:function(ze,Oe,n){var x,G,X,W,z,Z,C;ze.exports=(C=n(95275),X=(G=(x=C).lib).WordArray,z=[],Z=x.algo.SHA1=(W=G.Hasher).extend({_doReset:function(){this._hash=new X.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,he){for(var k=this._hash.words,me=k[0],le=k[1],R=k[2],V=k[3],ge=k[4],E=0;E<80;E++){if(E<16)z[E]=0|w[he+E];else{var b=z[E-3]^z[E-8]^z[E-14]^z[E-16];z[E]=b<<1|b>>>31}var p=(me<<5|me>>>27)+ge+z[E];p+=E<20?1518500249+(le&R|~le&V):E<40?1859775393+(le^R^V):E<60?(le&R|le&V|R&V)-1894007588:(le^R^V)-899497514,ge=V,V=R,R=le<<30|le>>>2,le=me,me=p}k[0]=k[0]+me|0,k[1]=k[1]+le|0,k[2]=k[2]+R|0,k[3]=k[3]+V|0,k[4]=k[4]+ge|0},_doFinalize:function(){var w=this._data,he=w.words,k=8*this._nDataBytes,me=8*w.sigBytes;return he[me>>>5]|=128<<24-me%32,he[14+(me+64>>>9<<4)]=Math.floor(k/4294967296),he[15+(me+64>>>9<<4)]=k,w.sigBytes=4*he.length,this._process(),this._hash},clone:function(){var w=W.clone.call(this);return w._hash=this._hash.clone(),w}}),x.SHA1=W._createHelper(Z),x.HmacSHA1=W._createHmacHelper(Z),C.SHA1)},58170:(ze,Oe,n)=>{"use strict";n.d(Oe,{MI:()=>X,X2:()=>z,Yk:()=>W,dp:()=>ne});var C=n(74523),x=n(43794),G=n(43767);class X{constructor(w=0){this.DisableLbl=!0,this.IsRendred=!1,this.Action=0,this.SectionSeqNo=0,this.Calculate=!1,this.OnsetFocus=new W,this._SetFocus=!1,this.IsColumnUserDefined=!1,this.Expression=null,this.DBColumnID=0,this.FontSize=11,this._mandatory=!1,this.Enable=!0,this.IsReadOnly=!1,this.IsTabStop=!0,this.Visible=!0,this._FieldExpression=null,this._ForeGround="#333333",this.ToolTipDescription="",this.ToolTipFooterTitle="",this.FeatureID=0,this.Row=0,this.Column=0,this.ColumnSpan=1,this.RowSpan=1,this.Mode=0,this.CrFilter=0,this.DbFilter=0,this.AccDimInUse=!1,this.Dependantinuse=!1,this.MinChar=null,this.MaxChar=null,this.drrLocalRef=null,this.ControlDataXML="",this.DBColumnID=w}get ShowControl(){return!(this.DisableLbl&&(!this.Enable||this.IsReadOnly))}set SetFocus(w){this._SetFocus=w,this._SetFocus&&this.OnsetFocus.IsSubscribed&&this.OnsetFocus.Call()}get SetFocus(){return this._SetFocus}get Mandatory(){return this._mandatory}set Mandatory(w){this._mandatory!=w&&(this._mandatory=w,w&&this.Label?this.Label.endsWith("*")||(this.Label+=" *"):!w&&this.Label&&(this.Label.endsWith(" *")?this.Label=this.Label.substring(0,this.Label.length-2):this.Label.endsWith("*")&&(this.Label=this.Label.substring(0,this.Label.length-1))))}get Lbl(){return G.J0.StringIsNullOrEmpty(this._Lbl)?this.Mandatory&&!G.J0.StringIsNullOrEmpty(this.Label)&&this.Label.endsWith("*")?this.Label.substring(0,this.Label.length-2).Replace(" ",""):G.J0.StringIsNullOrEmpty(this.Label)?"":this.Label.Replace(" ",""):this._Lbl}set Lbl(w){this._Lbl=w.Replace(" ","")}get FieldExpression(){return this._FieldExpression}set FieldExpression(w){this._FieldExpression=w.replace(" ","")}get ForeGround(){return this._ForeGround}set ForeGround(w){this._ForeGround=w.replace(" ",""),9==this._ForeGround.length&&(this._ForeGround.startsWith("#FF")||this._ForeGround.startsWith("#ff"))&&(this._ForeGround="#"+this._ForeGround.substr(3))}get FormulaLbl(){return G.J0.StringIsNullOrEmpty(this._FormulaLbl)?this.Mandatory&&!G.J0.StringIsNullOrEmpty(this.Label)&&this.Label.endsWith("*")?this.Label.substr(0,this.Label.length-1).Replace(" ",""):G.J0.StringIsNullOrEmpty(this.Label)?"":this.Label.Replace(" ",""):this._FormulaLbl}set FormulaLbl(w){this._FormulaLbl=w.Replace(" ","")}IsValid(){return!0}SetLocalReference(w){this.drrLocalRef=w,this.LocalRefXML="";let he=[];w.forEach(k=>{he.some(me=>me.hasOwnProperty(k.LinkData))||(this.LocalRefXML+='<R LinkID="'+k.LinkData.toString()+'"/>',he.push(k.LinkData.toString()))}),this.LocalRefXML.length>0&&(this.LocalRefXML="<XML>"+this.LocalRefXML+"</XML>")}}class W{Destroy(w){try{w.UnSubscribe()}catch{}}constructor(){this.CommandSubscribers=[],this.CommandSubject=new x.B,this.IsHandler=!1}get Command(){return this.CommandSubject.asObservable()}get IsSubscribed(){return this.CommandSubscribers.length>0}Subscribe(w,he,k=void 0){if(!G.J0.IsEmpty(w[he])){this.obj=w,this.methodName=he,this.methodArgs=k;let me=this.Command.subscribe(le=>{try{w[he](le)}catch(R){console.log(R.stack)}});this.CommandSubscribers.push(me)}}Handler(w,he){G.J0.IsEmpty(w[he])?console.log("Delegate Subscribe Error: ",he):(this.IsHandler=!0,this.obj=w,this.methodName=he)}UnSubscribe(){this.CommandSubscribers.length>0&&(this.CommandSubscribers[0].unsubscribe(),this.CommandSubscribers.pop())}Call(w=null,he=null,k=null){try{if(this.IsHandler)return this.obj[this.methodName](w,he,k);if(this.IsSubscribed)return G.J0.IsEmpty(this.methodArgs)?this.obj[this.methodName](w,he,k):this.obj[this.methodName](this.methodArgs)}catch(me){if("PactException"==me.message)throw new Error("PactException");console.log(me.stack)}}}class ne{constructor(){this.CommandSubject=new x.B,this.IsBusy=!1,this.Cancel=!1}get Command(){return this.CommandSubject.asObservable()}DoWork(w,he){G.J0.IsEmpty(w[he])?console.log("Worker Error: ",he):(this.obj=w,this.methodName=he,this.Command.subscribe(me=>{try{w[he](me)}catch(le){console.log(le.stack)}}))}RunAsync(){var w=this;return(0,C.A)(function*(){try{yield w.CommandSubject.next(w)}catch(he){console.log(he.stack),alert("Worker Call Error @ "+(w.methodName?w.methodName:""))}})()}}class z{constructor(){this.PopUpGUID="",this.SelectedPrinter="",this.Message="",this.ClassName="PrinterList"}}},60334:(ze,Oe,n)=>{"use strict";n.d(Oe,{T:()=>x});var C=n(20452);function x(G){return Symbol.asyncIterator&&(0,C.T)(G?.[Symbol.asyncIterator])}},61301:(ze,Oe,n)=>{"use strict";n.r(Oe),n.d(Oe,{RibbonExtViewModel:()=>w,TimeSpan:()=>R});var C=n(74523),x=n(25436),G=n(32040),X=n(23458),W=n(43767),ne=n(93473),z=n(54581),Z=n(31051);let w=(()=>{class V{static{this.CRMFeatureActions=[6558,6498,6516,6517,3003,6499,3004,6467,6466,6439,6438,6458,6459,6447,6449,6450,6508,6557]}static{this.PRDFeatureActions=[6334,6327,6354,6388,6389,6355,491,492,506,523,546]}constructor(E){this.iEmpIndex=0,V.router=E}static{this.PayrollFeatureActions=[4101]}static{this.RentalFeatureActions=[274,190,3739,8112,611,514,3527,3552,3782,3742,3015,3016,601,602,3706,3705,513,9360,210,212]}static onMenuClick(E){let b={};G.d.page.ShowLoading=!0,V.OncmdLoadPage(E,b).then(p=>{if(!b.component)return void(G.d.page.ShowLoading=!1);let j;"FeatureActionID"==b.basedon?j=G.d.page.tabs.find(T=>T.instance instanceof b.component&&T.instance.FeatureActionID==E.FeatureActionID):"CostCenterID"==b.basedon?j=G.d.page.tabs.find(T=>T.instance instanceof b.component&&T.instance.CostCenterID==E.FeatureID):"Unique"==b.basedon&&(j=G.d.page.tabs.find(T=>T.instance instanceof b.component)),j?(G.d.page.tabs.map(T=>T.active=!1),j.active=!0,G.d.page.ShowLoading=!1):(b.title=E.ScreenName,G.d.page.addNewTab(b))})}static OncmdLoadPage(E,b){var p=this;return(0,C.A)(function*(){if(E&&E instanceof x.aF){let j=E,T=0,I=0,oe="";if(null!=j.ScreenName&&(oe=j.ScreenName),j.FeatureID>0&&(T=j.FeatureID),I=j.ScreenType,133!=T)if(145==T){if(I=7,W.J0.IsEmpty(G.d.SessionManager.Preferences["CRM-Products"])||"0"==G.d.SessionManager.Preferences["CRM-Products"].toString())return;j.FeatureActionTypeID=2,T=parseInt(G.d.SessionManager.Preferences["CRM-Products"].toString())}else if(163!=T)if(71==T){I=7;let te=G.d.common.GetDataSet("REVM001","");null!=te&&te.Tables.length>0&&te.Tables[0].length>0&&(j.FeatureActionTypeID=2,T=parseInt(te.Tables[0][0].FeatureID.toString()),j.FeatureActionID=parseInt(te.Tables[0][0].featureactionid.toString()),j.FeatureID=T)}else if(215==j.FeatureActionTypeID){if(2==T||3==T){const{ReportViewModel:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,39026)),{ReportViewComponent:v}=yield Promise.all([n.e(2881),n.e(3884),n.e(8285)]).then(n.bind(n,31503));let S=new te;return S.ReportViewModel_Query(T,-1,oe,0,null,!1,!0),void(0==S.ReturnType&&Object.assign(b,{component:v,params:{obj:S}}))}}else{if(494==j.FeatureID){const{BulkEditComponent:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(9850),n.e(2076)]).then(n.bind(n,79850)),{BulkEditViewModel:v}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3798),n.e(1188),n.e(5746),n.e(2076)]).then(n.bind(n,89717));let S=new v(j.FeatureActionID);return void Object.assign(b,{component:te,params:{obj:S}})}if(506==j.FeatureID){const{WebConfigViewModel:te}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(3768)]).then(n.bind(n,1387)),{WebConfigComponent:v}=yield Promise.all([n.e(534),n.e(7996),n.e(2881),n.e(7030),n.e(9702),n.e(2076),n.e(1784)]).then(n.bind(n,42607));let S=new te(oe);return void Object.assign(b,{component:v,params:{obj:S}})}if(498==j.FeatureID){const{ReportViewModel:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,39026)),{ReportViewComponent:v}=yield Promise.all([n.e(2881),n.e(3884),n.e(8285)]).then(n.bind(n,31503));let S=new te;return S.ReportViewModel_1(j.FeatureActionID),void(0==S.ReturnType&&Object.assign(b,{component:v,params:{obj:S}}))}if(499==j.FeatureID){const{DBViewViewModel:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3798),n.e(2911),n.e(1188),n.e(5620),n.e(5746),n.e(2144),n.e(4244),n.e(2076)]).then(n.bind(n,71863)),{DBViewComponent:v}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2586),n.e(9842),n.e(2076)]).then(n.bind(n,49842));let S=new te;return S.DBViewViewModel_1(j.FeatureActionID),void Object.assign(b,{component:v,params:{obj:S}})}if(1003==j.FeatureID){const{RCalenderViewModel:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19384)),{ResourceTimelineComponent:v}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4124)]).then(n.bind(n,79362));let S=new te;return S._RCalenderViewModel(!1),void Object.assign(b,{component:v,params:{obj:S}})}if(9e3==j.FeatureID||9001==j.FeatureID){const{GSTModule:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4868)]).then(n.bind(n,94868));return void Object.assign(b,te.LoadScreen(j,oe))}if(-44==j.FeatureID){const{LookupsViewModel:te}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(9050)]).then(n.bind(n,59050)),{LookupComponent:v}=yield n.e(4065).then(n.bind(n,86446));let S=new te;return S.LookupsViewModel(oe,j.FeatureActionID),void Object.assign(b,{component:v,params:{obj:S}})}if(106==j.FeatureID&&3756!=j.FeatureActionID){const{UpdatePayTermsViewModel:te}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(5078)]).then(n.bind(n,35078)),{UpdatepaytermsComponent:v}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(8906)]).then(n.bind(n,26525));let S=new te(j.ScreenName);return void Object.assign(b,{component:v,params:{obj:S}})}}const{TreeViewPageComponent:N}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,31425));switch(j.FeatureActionID){case 2:case 88:case 89:case 2810:case 3004:case 3602:case 6194:case 6337:case 6379:case 6384:case 6450:case 6498:case 6508:case 6467:case 6517:case 3085:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:j.FeatureID,Call:"C4"},basedon:"FeatureActionID"});break;case 21:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,PactScreenID:21,FeatureActionID:j.FeatureActionID,CostCenterID:j.FeatureID,Call:"C3"},basedon:"FeatureActionID"});break;case 564:const{BulkDocumentPostingViewModel:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4286)]).then(n.bind(n,54286)),{BulkDocumentPostingComponent:v}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(6859)]).then(n.bind(n,86859));let S=G.d.page.tabs.find(Tt=>Tt.params?.obj instanceof te);if(S)G.d.page.SetActiveTab(S);else{let Tt=new te;G.d.page.addNewTab({title:j.ScreenName,component:v,params:{obj:Tt}})}break;case 133:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:j.FeatureID,Call:"C3"},basedon:"FeatureActionID"});break;case 3737:const{ProductSearchCatalogViewModel:B}=yield Promise.all([n.e(7996),n.e(2881),n.e(4628),n.e(2771),n.e(9702),n.e(2076)]).then(n.bind(n,75152)),{ProductSearchCatalogComponent:O}=yield n.e(2726).then(n.bind(n,50345));G.d.page.ShowDialog(new B(p,268,3,null,null),O);break;case 140:const{GenerateBillsViewModel:ae}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(364)]).then(n.bind(n,17983)),{GenerateBillsComponent:se}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(8082)]).then(n.bind(n,65701));let fe=new ae(oe);Object.assign(b,{component:se,params:{obj:fe}});break;case 67:const{AddUOMComponent:_}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4097)]).then(n.bind(n,81240)),{AddUOMViewModel:K}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(5640)]).then(n.bind(n,35640));let ee=new K;return void Object.assign(b,{component:_,params:{obj:ee}});case 70:const{AddeditcurrencyComponent:U}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4684)]).then(n.bind(n,34684)),{AddCurrencyViewModel:ie}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(99)]).then(n.bind(n,90099));let J=new ie;J.PactScreenID="70",Object.assign(b,{component:U,params:{obj:J}});break;case 2078:const{LookupsViewModel:Ce}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(9050)]).then(n.bind(n,59050)),{LookupComponent:Y}=yield n.e(4065).then(n.bind(n,86446));let Ee=new Ce;13==I&&"MASTERS"==oe.toUpperCase()?Ee.LookupsViewModel(oe,0,!0):Ee.LookupsViewModel(oe),Object.assign(b,{component:Y,params:{obj:Ee}});break;case 3471:const{BRSViewModel:Te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2070),n.e(2076),n.e(9250)]).then(n.bind(n,29250)),{BrsComponent:Le}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(567)]).then(n.bind(n,90567));let tt=new Te(oe);tt.BRDDialog.IsQuit&&Object.assign(b,{component:Le,params:{obj:tt}});break;case 3472:const{BRSMatchViewModel:Ue}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2070),n.e(2076),n.e(9250)]).then(n.bind(n,29250));let ke=new Ue(oe);ke.BRDDialog.IsQuit&&Object.assign(b,{component:Le,params:{obj:ke}});break;case 3672:const{DimensionWiseLockViewModel:Be}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(3883)]).then(n.bind(n,51502)),{DimensionWiseLockComponent:xe}=yield Promise.all([n.e(534),n.e(7996),n.e(2881),n.e(7030),n.e(9702),n.e(2076),n.e(1324)]).then(n.bind(n,81771));let ve=new Be;Object.assign(b,{component:xe,params:{obj:ve}});break;case 4752:case 4872:const{PostDepreciationViewModel:A}=yield Promise.all([n.e(7996),n.e(2881),n.e(1755),n.e(4628),n.e(5984),n.e(5819),n.e(6015),n.e(9702),n.e(2076),n.e(7538)]).then(n.bind(n,75157)),{PosDepreciationComponent:Se}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(5736),n.e(2076)]).then(n.bind(n,3355));let be=new A(oe,!1,4872==j.FeatureActionID);Object.assign(b,{component:Se,params:{obj:be}});break;case 2869:const{ChequeBookViewModel:He}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(5356)]).then(n.bind(n,25356)),{ChequeBookComponent:Ne}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4447)]).then(n.bind(n,99685));let Ke=new He;Object.assign(b,{component:Ne,params:{obj:Ke}});break;case 3700:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:40,Call:"C3"},basedon:"FeatureActionID"});break;case 2088:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:45,Call:"C3"},basedon:"FeatureActionID"});break;case 3498:case 3498:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:49,Call:"C4"},basedon:"FeatureActionID"});break;case 1971:Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:162,Call:"C4"},basedon:"FeatureActionID"});break;case 3756:const{PaymentTermViewModel:De}=yield Promise.all([n.e(2881),n.e(5984),n.e(9702),n.e(2076),n.e(7488)]).then(n.bind(n,35107)),{PaymentTermComponent:Ae}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(2336)]).then(n.bind(n,19955));let je=new De;Object.assign(b,{component:Ae,params:{obj:je}});break;case 2767:const{RCalenderViewModel:$e}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19384)),{CRMFullCalendarComponent:nt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2586),n.e(2658),n.e(2076)]).then(n.bind(n,10277));let gt=new $e;gt._RCalenderViewModel(!1),Object.assign(b,{component:nt,params:{obj:gt}});break;case 3136:const{FavoritesComponent:Qe}=yield n.e(9128).then(n.bind(n,76747)),{FavoritesViewModel:mt}=yield Promise.all([n.e(4119),n.e(2076)]).then(n.bind(n,76500));let at;return at=0!=j.FeatureActionTypeID&&1==j.ISDoctype?new mt(j.FeatureActionTypeID):new mt,void Object.assign(b,{component:Qe,params:{obj:at},basedon:"FeatureActionID"});case 3769:const{ResetPasswordComponent:Et}=yield n.e(9108).then(n.bind(n,6727)),{ResetPasswordViewModel:St}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,51278));return void G.d.page.ShowDialog(new St,Et,{Title:G.d.GetResource("ResetPassword"),ShowCenter:!0});case 35:case 85:const{ReOrderLevelNewViewModel:dn}=yield Promise.all([n.e(7996),n.e(2881),n.e(1755),n.e(4628),n.e(5152),n.e(6015),n.e(9284),n.e(2209),n.e(9702),n.e(2076)]).then(n.bind(n,44590)),{ReOrderLevelComponent:Ut}=yield n.e(8024).then(n.bind(n,55643));let Ht=new dn(oe,35==j.FeatureActionID?112:165,null);Object.assign(b,{component:Ut,params:{obj:Ht}});break;case 5567:const{PostedDocumentViewModel:xn}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2911),n.e(2076)]).then(n.bind(n,5292)),{PostedDocumentComponent:_t}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(4287)]).then(n.bind(n,84287));let $t=new xn;return void Object.assign(b,{component:_t,params:{obj:$t}});case 2879:const{ShowJVViewModel:cn}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,68059)),{ShowJVComponent:Nn}=yield n.e(5416).then(n.bind(n,83035));let xt=new cn;xt.ShowJVViewModel_4(),Object.assign(b,{component:Nn,params:{obj:xt}});break;case 3763:const{ChequeDiscPostedDocumentViewModel:Ni}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(9677)]).then(n.bind(n,2058)),{ChequeDiscPostedDocumentComponent:en}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(7386)]).then(n.bind(n,47386));let fs=new Ni;Object.assign(b,{component:en,params:{obj:fs}});break;case 3681:const{DocumentFlowChartComponent:Ts}=yield n.e(6140).then(n.bind(n,43759)),{DocumentFlowChartViewModel:Wt}=yield n.e(5477).then(n.bind(n,67858));let mi=new Wt(!1,"");Object.assign(b,{component:Ts,params:{obj:mi}});break;case 3682:const{StickNoteViewModel:yn}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19139)),{StickynotesComponent:ri}=yield Promise.all([n.e(2881),n.e(7834)]).then(n.bind(n,57834));if(!G.d.page.tabs.find(Tt=>Tt.instance instanceof ri)){let Tt=new yn;Tt.DisplayName=j.ScreenName,Object.assign(b,{component:ri,params:{obj:Tt}})}break;case 1700:break;default:if(p.RentalFeatureActions.Contains(j.FeatureActionID)){const{RibbonExtRental:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(7522)]).then(n.bind(n,75141));Object.assign(b,Tt.LoadRentalScreen(j))}else if(p.CRMFeatureActions.Contains(j.FeatureActionID)){const{RibbonExtCrm:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3320),n.e(2436),n.e(897),n.e(2076)]).then(n.bind(n,83278));Object.assign(b,Tt.LoadCRMScreen(j,oe))}else if(p.PRDFeatureActions.Contains(j.FeatureActionID)){const{RibbonExtPrd:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(8508),n.e(6007),n.e(2076)]).then(n.bind(n,96007));Object.assign(b,Tt.LoadPRDScreen(j,oe))}else if(p.PayrollFeatureActions.Contains(j.FeatureActionID)){const{RibbonExtPay:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3798),n.e(1188),n.e(2076)]).then(n.bind(n,58807));Object.assign(b,Tt.LoadPayrollScreen(j,oe))}else{if(50054==T||256==j.FeatureID||258==j.FeatureID||260==j.FeatureID||261==j.FeatureID||262==j.FeatureID||263==j.FeatureID||264==j.FeatureID||266==j.FeatureID||141==j.FeatureID||40054==j.FeatureID||40088==j.FeatureID||40095==j.FeatureID){try{const{RibbonExtPay:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3798),n.e(1188),n.e(2076)]).then(n.bind(n,58807));Object.assign(b,Tt.LoadPayrollScreen(j,oe))}catch(Tt){Logger.ErrorLog("Payroll ViewModel Load Error",Tt.stack)}return}if(267==j.FeatureID){const{RCalenderViewModel:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19384)),{CRMFullCalendarComponent:pt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2586),n.e(2658),n.e(2076)]).then(n.bind(n,10277));let ct=new Tt;ct._RCalenderViewModel(!1,j.FeatureID),Object.assign(b,{component:pt,params:{obj:ct}});break}if(136!=j.FeatureID)if(T>=5e4)if(2==j.FeatureActionTypeID)Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:T,Call:"C3"},basedon:"CostCenterID"});else if(1==j.FeatureActionTypeID){const{AddEditCostcenterComponent:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(2881),n.e(2798),n.e(7654)]).then(n.bind(n,30417)),{AddCostCenterViewModel:pt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,88248));let ct,vn;vn=Tt,ct=new pt(T),ct.AddCostCenterViewModel_1(0,T,0,oe,!1),G.d.page.addNewTab({component:vn,params:{obj:ct}})}else 30==j.FeatureActionTypeID&&Object.assign(b,{component:N,params:{ScreenName:j.ScreenName,FeatureActionID:j.FeatureActionID,CostCenterID:j.FeatureID,Call:"C3"},basedon:"CostCenterID"});else if(50==j.FeatureID){const{ReportViewModel:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,39026)),{ReportViewComponent:pt}=yield Promise.all([n.e(2881),n.e(3884),n.e(8285)]).then(n.bind(n,31503));let ct=new Tt;ct.ReportViewModel_1(j.FeatureActionTypeID),0==ct.ReturnType&&Object.assign(b,{component:pt,params:{obj:ct}})}else{if(106==j.FeatureID&&167==j.FeatureActionTypeID){const{UpdatePayTermsViewModel:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(6594),n.e(2076)]).then(n.bind(n,96594)),{UpdatepaytermsComponent:pt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,97160));let ct=new Tt(j.ScreenName);Object.assign(b,{component:pt,params:{obj:ct}});break}if(501==j.FeatureID){const{SalesDashboardViewModel:Tt}=yield Promise.all([n.e(7996),n.e(2881),n.e(1755),n.e(4628),n.e(5984),n.e(5819),n.e(6015),n.e(9702),n.e(2076),n.e(6971)]).then(n.bind(n,84590)),{SalesDashboardComponent:pt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(1971)]).then(n.bind(n,14352));let ct=G.d.page.tabs.find(vn=>vn.instance instanceof pt);if(ct)ct.active=!0;else{let vn=new Tt;Object.assign(b,{component:pt,params:{obj:vn}})}}else if(500==j.FeatureID){const{GeneralDashboardViewModel:Tt}=yield n.e(2076).then(n.bind(n,3338)),{GeneralDashboardComponent:pt}=yield Promise.all([n.e(534),n.e(7996),n.e(2881),n.e(7030),n.e(9702),n.e(2076),n.e(4957)]).then(n.bind(n,73828));let ct=G.d.page.tabs.find(vn=>vn.instance instanceof pt);if(ct)ct.active=!0;else{let vn=new Tt;Object.assign(b,{component:pt,params:{obj:vn}})}}else if(69!=j.FeatureID&&j.FeatureID>=4e4&&j.FeatureID<=5e4){if(1===G.d.SessionManager.DonotAllowDataEntry)return;if(oe=j.DisplayName?j.DisplayName:j.ScreenName,38==j.ISDoctype||39==j.ISDoctype){const{PosScreenComponent:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3787),n.e(9381),n.e(2076)]).then(n.bind(n,59381)),{POSDocumentViewModel:pt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,51909));let ct=G.d.document.GetPosRegisters(T);if(1==ct.Tables.length&&ct.Columns[0].Contains("IsMultiple")){p.POSRegister=new X.y$,p.POSRegister.TypeID=1,p.POSRegister.CCID=ct.Tables[0][0].CostCenterID;let On="";for(let li=0;li<ct.Tables[0].length;li++)On+=ct.Tables[0][li].NodeID.toString(),li<ct.Tables[0].length-1&&(On+=" , ");p.POSRegister.CustomWhere=On.length>0?" a.NodeID in ( "+On+") ":" 1<>1 ";const{POSRegisterComponent:Li}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,39744));if(yield G.d.page.openDialog(p.POSRegister,Li,{HideClose:!0,ShowCenter:!0,Title:G.d.GetResource("Select Register")}),null!=p.POSRegister.SelectedValue&&0!=p.POSRegister.SelectedValue){let li=new pt(T,oe,!1,null,p.POSRegister.SelectedValue);Object.assign(b,{component:Tt,params:{obj:li}})}return}let vn=new pt(T,oe,!1);return void Object.assign(b,{component:Tt,params:{obj:vn}})}if(T>4e4&&T<5e4){const{DocumentsListViewModel:Tt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(8182)]).then(n.bind(n,65801));if(0!=G.d.SessionManager.RoleType||G.d.page.QuickDocumentData?.LadingDocs.ContainsKey(T)){const{DocumentsListComponent:pt}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(426)]).then(n.bind(n,80426));let ct=G.d.page.tabs.find(vn=>vn.params?.obj instanceof Tt&&vn.params?.obj.CostCenterID==T);if(ct)G.d.page.SetActiveTab(ct);else{let vn=new Tt(T,oe);Object.assign(b,{component:pt,params:{obj:vn}})}}else{const{AddEditDocumentComponent:pt}=yield Promise.all([n.e(7996),n.e(2881),n.e(8405),n.e(895),n.e(9702),n.e(2076),n.e(9503)]).then(n.bind(n,30786)),{AddEditDocumentViewModel:ct}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109));let vn=new ct(T,oe,!1);Object.assign(b,{component:pt,params:{obj:vn}})}return}}}}}}})()}static LoadDefaultTab(){return(0,C.A)(function*(){try{if(G.d.IsMobile){if(G.d.SessionManager.IsFmUser)if(1==G.d.SessionManager.FmUserType){const{TechnicianDashboardComponent:b}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,64321));G.d.page.addNewTab({title:"Techniciann",component:b})}else if(2==G.d.SessionManager.FmUserType){const{SupervisorDashboardComponent:b}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,42465));G.d.page.addNewTab({title:"Supervisorr",component:b})}else if(3!=G.d.SessionManager.FmUserType&&(4==G.d.SessionManager.FmUserType||6==G.d.SessionManager.FmUserType)){const{TenantDashboardComponent:b}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,68797));G.d.page.addNewTab({title:"Tenantt",component:b})}return}if(G.d.SessionManager.IsEmpUser&&1==G.d.SessionManager.RoleType){const{EssDashboardComponent:b}=yield Promise.all([n.e(2881),n.e(2290),n.e(4119),n.e(2076)]).then(n.bind(n,19909));return void G.d.page.addNewTab({title:"My Profile",component:b})}let E=G.d.SessionManager.dsRibbon;if(null==E)return;if(E.Table4&&E.Table4.length>0){let b;return void E.Table4.forEach(p=>{let j=new x.aF,T={};j.FeatureActionID=parseInt(p.FeatureActionID.toString()),j.ScreenName=p.ScreenName,j.FeatureID=parseInt(p.FeatureID.toString()),j.FeatureActionTypeID=parseInt(p.FeatureActionTypeID.toString()),W.J0.IsEmpty(p.DocumentType)||(j.ISDoctype=parseInt(p.DocumentType.toString())),V.OncmdLoadPage(j,T).then(I=>{if(!T.component)return;let oe;if("FeatureActionID"==T.basedon?oe=G.d.page.tabs.find(F=>F.instance instanceof T.component&&F.instance.FeatureActionID==j.FeatureActionID):"CostCenterID"==T.basedon?oe=G.d.page.tabs.find(F=>F.instance instanceof T.component&&F.instance.CostCenterID==j.FeatureID):"Unique"==T.basedon&&(oe=G.d.page.tabs.find(F=>F.instance instanceof T.component)),oe)G.d.page.tabs.map(F=>F.active=!1),oe.active=!0;else{T.title=j.ScreenName;let F=G.d.page.tabs.find(N=>N.title==T.title);F?G.d.page.SetActiveTab(F):G.d.page.addNewTab(T)}parseInt(p.IsDefault)&&(b=oe)})})}if(E&&E.Table3.length>0){let b=new x.aF,p={};return b.FeatureActionID=parseInt(E.Table3[0].FeatureActionID.toString()),b.ScreenName=E.Table3[0].ScreenName,b.FeatureID=parseInt(E.Table3[0].FeatureID.toString()),void V.OncmdLoadPage(b,p).then(j=>{if(!p.component)return;let T;if("FeatureActionID"==p.basedon?T=G.d.page.tabs.find(I=>I.instance instanceof p.component&&I.instance.FeatureActionID==b.FeatureActionID):"CostCenterID"==p.basedon?T=G.d.page.tabs.find(I=>I.instance instanceof p.component&&I.instance.CostCenterID==b.FeatureID):"Unique"==p.basedon&&(T=G.d.page.tabs.find(I=>I.instance instanceof p.component)),T)G.d.page.tabs.map(I=>I.active=!1),T.active=!0;else{p.title=b.ScreenName;let I=G.d.page.tabs.find(oe=>oe.title==p.title);I?G.d.page.SetActiveTab(I):G.d.page.addNewTab(p)}})}if(G.d.IsMobile&&G.d.IsNativeMobile){let b=G.d.page.tabs.find(p=>"Home"==p.title);if(b)("Home"==b.title||"Modules"==b.title)&&(G.d.page.SubMenuItemFound=!1,G.d.page.searchList=[]),G.d.page.SetActiveTab(b);else{const{ModulesTabComponent:p}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,65412));G.d.page.addNewTab({title:"Home",component:p,params:{isHome:!0}})}}else{let b={};const{FavoritesViewModel:p}=yield Promise.all([n.e(4119),n.e(2076)]).then(n.bind(n,76500)),{FavoritesComponent:j}=yield n.e(9128).then(n.bind(n,76747));let T=new p;Object.assign(b,{component:j,params:{obj:T}}),b.title="Favourites",G.d.page.addNewTab(b)}}catch(E){Logger.ErrorLog("LoginViewModel:OnStartupScreens:: ",E)}})()}static OnTabItemClick(E){var b=this;return(0,C.A)(function*(){switch(E.toString()){case"ALLCompanies":case"NewCompany":case"EditCompany":case"AssignUsersToCompany":case"Logs":case"SwitchTemplate":case"SetGuid":case"GST":case"SignOut":case"Exit":case"Lang":case"About":break;case"UserSessions":const{LicenseTabViewModel:p}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(2562)]).then(n.bind(n,30181));let j=new p;j.RefreshData();const{UserSessionsComponent:T}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(2124)]).then(n.bind(n,39743));G.d.page.ShowDialog(j,T);break;case"ChangeCompany":{const{LoginViewModel:N}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19260)),{LoginScreenComponent:te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,94450));let v=yield new N(G.d.router);v.SetVisibilityFalse(),v.IsLoggedIn=!0,v.IsChangeCompany=!0,v.Default=!0,setTimeout(()=>{if(v.RememberMe){let B=G.d.admin.GetClientUserDetails(0,G.d.SessionManager.UserName);v.CompanyList=B.Tables[1],G.d.page.tabs.Clear(),G.d.page.ShowDialog(v,te).subscribe(()=>{b.LoadDefaultTab()})}else G.d.page.Ribbon.ClearMenu(),G.d.page.tabs.Clear(),G.d.page.ShowDialog(new N(G.d.router),te).subscribe(()=>{b.LoadDefaultTab()})},500)}break;case"ChangeLocation":const{LoginViewModel:I}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19260)),{LoginScreenComponent:oe}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,94450));let F=yield new I(G.d.router);F.UserName=G.d.SessionManager.UserName,F.Password=G.d.SessionManager.Password,F.SetVisibilityFalse(),F.Default=!0,F.IsEdit=!1,setTimeout(()=>{let N=G.d.admin.GetClientUserDetails(G.d.SessionManager.CompanyIndex,G.d.SessionManager.UserName);if(N.Tables.length>3){let te=null;te=N.Columns[3].Contains("RoleID")?N.Tables[3].filter(S=>0==S.IsGroup&&(0==S.RoleID||S.RoleID==G.d.SessionManager.RoleID)).ToTable(!0,["NodeID","Code","Name","IsGroup","lft"]):N.Tables[3];let v=G.d.report.GetDataTable("ChangeL","");if(G.d.SessionManager.LicenseSettings.ContainsKey("MaxLocations")){let B,S=W.J0.IntTryParse(G.d.SessionManager.LicenseSettings.MaxLocations);if(S>0){if(null!=v&&v.length>0&&(B=W.J0.IntTryParse(v[0].ML.toString()),B>S))return void alert("Un-Authorized License file. Maximum Locations Allowed "+S+" Only");for(let O=te.length-1;O>=S;O--)(0,z.yG0)(te[O].IsGroup.toString())||te.RemoveAt(O)}}te=te.filter(S=>0==S.IsGroup),F.LocationList=te,F.LocationList.SortBy([{name:"Name",desc:!1}]),F.IsLocation=!0,F.Default=!1,F.IsChangeCompany=!1,F.IsChangeLocation=!0,F.Title=G.d.GetResource("SelectLocation"),F.LoginText=G.d.GetResource("Select"),F.LoginCancel=G.d.GetResource("All"),F.CancelVisiblity=!1,F.AllVisiblity=!0,null==F.SelectedLocation&&F.LocationList.length>0&&(F.SelectedLocation=F.LocationList[0]),G.d.page.tabs.Clear(),G.d.page.HideDialog(b.PopUpGUID),G.d.page.ShowDialog(F,oe).subscribe(()=>{b.LoadDefaultTab()})}},500)}})()}static Relogin(E){return(0,C.A)(function*(){G.d.SessionManager.UserID="0",G.d.SessionManager.LoginDimension=0,G.d.SessionManager.LoginDimID=0,G.d.SessionManager.IsFmUser=!1,G.d.SessionManager.FmUserType=0,G.d.SessionManager.FmUserInfo=void 0,G.d.ForwardProgress.KillSession(),G.d.page.WindowTitle="PACT RevenU",E.navigate(["/login"]),G.d.IsMobile||window.location.reload()})()}static Signout(E){return(0,C.A)(function*(){localStorage.setItem("AutoLogin","false"),G.d.SessionManager.UserID="0",G.d.SessionManager.LoginDimension=0,G.d.SessionManager.LoginDimID=0,G.d.SessionManager.IsFmUser=!1,G.d.SessionManager.FmUserType=0,G.d.SessionManager.FmUserInfo=void 0,G.d.ForwardProgress.KillSession(),G.d.SessionManager.MenuTabs.Clear(),G.d.page.WindowTitle="PACT RevenU";const{CostCenterPicker:b}=yield Promise.all([n.e(2881),n.e(1755),n.e(5152),n.e(9284),n.e(9702),n.e(2076)]).then(n.bind(n,26903)),{IPrefetchFilter:p}=yield Promise.all([n.e(1755),n.e(5152),n.e(2076)]).then(n.bind(n,85152));yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(8182)]).then(n.bind(n,65801)),b.dicDSBuffers.Clear(),b.DSAccountTypes=null,p.dtExDocs.Clear(),G.d.IsMobile||G.d.common.deleteAPIAttachmentFolderContents(),localStorage.removeItem("PactToken"),G.d.SessionManager.JwtToken="",E.navigate(["/login"]),G.d.IsMobile||window.location.reload()})()}static ShowQuickAdd(E,b,p,j,T){return(0,C.A)(function*(I,oe,F,N,te,v=null){let O,ae,se,fe,B=!1;if(3==te){if(B=G.d.admin.GetQuickAddPref(I,!0),2==I){let _=0;if(G.d.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"TRUE"==G.d.SessionManager.Preferences.IsControlAccounts.toUpperCase()&&(_=1),B){const{QuickAccountComponent:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,15591)),{QuickAccoutViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(1430),n.e(4488),n.e(2076)]).then(n.bind(n,42107));ae=K,O=new ee(0,0,0,!0,0,_)}else{const{AddEditAccountComponent:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(1430),n.e(2076),n.e(5273)]).then(n.bind(n,99049)),{AddEditAccountViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,94475));fe=K,se=new ee(F,0,0,"",!0,_)}}else if(3==I)if(B){const{QuickProductComponent:_}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,15048)),{QuickAddProductViewModel:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(2947),n.e(2686),n.e(2076)]).then(n.bind(n,60305));ae=_,O=new K(0,0,"",0,!0)}else{const{AddProductComponent:_}=yield Promise.all([n.e(9891),n.e(534),n.e(2881),n.e(2947),n.e(3844)]).then(n.bind(n,95328)),{AddProductScreenViewModel:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,81547));fe=_,se=new K(0,"",0,!0)}else if(I>5e4)if(B){const{QuickAddCostCenterComponent:_}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19771)),{QuickAddCostCenterViewModel:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(2798),n.e(3630),n.e(2076)]).then(n.bind(n,83630));ae=_,O=new K,O.QuickAddCostCenterViewModel(0,I,0,"",!0)}else{const{AddEditCostcenterComponent:_}=yield Promise.all([n.e(9891),n.e(534),n.e(2881),n.e(2798),n.e(7654)]).then(n.bind(n,30417)),{AddCostCenterViewModel:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,88248));fe=_,se=new K(I),se.AddCostCenterViewModel_1(0,I,0,"",!0)}}else if(N&&G.d.SessionManager.IsActionAssigned(I,"Create")||!N&&G.d.SessionManager.IsActionAssigned(I,"Update")){let _=G.d.admin.GetQuickAddPref(I,!1);if(2==I){let K=0,ee=0,U=null;if(0==F&&G.d.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"TRUE"==G.d.SessionManager.Preferences.IsControlAccounts.toUpperCase()){const{ControlaccountComponent:ie}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(1854)]).then(n.bind(n,49473)),{ControlAccountDialog:J}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(1430),n.e(4488),n.e(2076)]).then(n.bind(n,42107));let Ce=ie,Y=new J;if(0==Y.ControlType)G.d.page.ShowDialog(Y,Ce,{Title:"Select",ShowCenter:!0}).subscribe((0,C.A)(function*(){if(0==Y.ControlType)return 0;if(K=Y.ControlType,2==K&&G.d.SessionManager.Preferences.ContainsKey("DebtorsControlGroup")&&G.d.SessionManager.Preferences.DebtorsControlGroup.length>0?(U=G.d.SessionManager.Preferences.DebtorsControlGroup.toString().split(","),ee=null!=U&&U.length>1?parseInt(U[0]):parseInt(G.d.SessionManager.Preferences.DebtorsControlGroup)):3==K&&G.d.SessionManager.Preferences.ContainsKey("CreditorsControlGroup")&&G.d.SessionManager.Preferences.CreditorsControlGroup.length>0&&(U=G.d.SessionManager.Preferences.CreditorsControlGroup.toString().split(","),ee=null!=U&&U.length>1?parseInt(U[0]):parseInt(G.d.SessionManager.Preferences.CreditorsControlGroup)),N&&_){const{QuickAccountComponent:Ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,15591)),{QuickAccoutViewModel:Te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(1430),n.e(4488),n.e(2076)]).then(n.bind(n,42107));ae=Ee,O=new Te(0,0,ee,!1,0,K)}else{const{AddEditAccountComponent:Ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(1430),n.e(2076),n.e(5273)]).then(n.bind(n,99049)),{AddEditAccountViewModel:Te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,94475));fe=Ee,se=new Te(F,0,0,"",!1,K)}return O?G.d.page.ShowDialog(O,ae).subscribe(()=>{2==te&&v&&v.obj[v.callback](O.RetValue)}):se&&G.d.page.addNewTab({component:fe,params:{obj:se}}),0}));else if(K=Y.ControlType,2==K&&G.d.SessionManager.Preferences.ContainsKey("DebtorsControlGroup")&&G.d.SessionManager.Preferences.DebtorsControlGroup.length>0?(U=G.d.SessionManager.Preferences.DebtorsControlGroup.toString().split(","),ee=null!=U&&U.length>1?parseInt(U[0]):parseInt(G.d.SessionManager.Preferences.DebtorsControlGroup)):3==K&&G.d.SessionManager.Preferences.ContainsKey("CreditorsControlGroup")&&G.d.SessionManager.Preferences.CreditorsControlGroup.length>0&&(U=G.d.SessionManager.Preferences.CreditorsControlGroup.toString().split(","),ee=null!=U&&U.length>1?parseInt(U[0]):parseInt(G.d.SessionManager.Preferences.CreditorsControlGroup)),N&&_){const{QuickAccountComponent:Ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,15591)),{QuickAccoutViewModel:Te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(1430),n.e(4488),n.e(2076)]).then(n.bind(n,42107));ae=Ee,O=new Te(0,0,ee,!1,0,K)}else{const{AddEditAccountComponent:Ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(1430),n.e(2076),n.e(5273)]).then(n.bind(n,99049)),{AddEditAccountViewModel:Te}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,94475));fe=Ee,se=new Te(F,0,0,"",!1,K)}}else if(N&&_){const{QuickAccountComponent:ie}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,15591)),{QuickAccoutViewModel:J}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(1430),n.e(4488),n.e(2076)]).then(n.bind(n,42107));ae=ie,O=new J(0,0,0,!1,0,K)}else{const{AddEditAccountComponent:ie}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(1430),n.e(2076),n.e(5273)]).then(n.bind(n,99049)),{AddEditAccountViewModel:J}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,94475));fe=ie,se=new J(F,0,0,"",!1,K)}}else if(3==I)if(N&&_){const{QuickProductComponent:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,15048)),{QuickAddProductViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(2947),n.e(2686),n.e(2076)]).then(n.bind(n,60305));ae=K,O=new ee(F,0,"",0,!1)}else{const{AddProductComponent:K}=yield Promise.all([n.e(9891),n.e(534),n.e(2881),n.e(2947),n.e(3844)]).then(n.bind(n,95328)),{AddProductScreenViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,81547));fe=K,se=new ee(F,"",0,!1)}else if(16==I){const{BatchNumberComponent:K}=yield n.e(602).then(n.bind(n,48221)),{BatchNumberViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,6135));let U=new ee(null);U.BatchNumberViewModel_1(!0),yield G.d.page.openDialog(U,K,{ShowCenter:!0})}else if(76==I){const{RibbonExtPrd:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(8508),n.e(6007),n.e(2076)]).then(n.bind(n,96007));K.LoadDimension(I,F)}else if(44==I){if(N){const{QuickAddLookupsViewModel:K}=yield Promise.all([n.e(2881),n.e(9702),n.e(2076),n.e(9050)]).then(n.bind(n,59050));let ee=new K;ee.QuickAddLookupsViewModel(oe,F),G.d.page.ShowDialog(ee,ne.m,{ShowCenter:!0}).subscribe(U=>{v.obj[v.callback](ee.NodeID)})}}else if(92==I){const{RibbonExtRental:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(7522)]).then(n.bind(n,75141));K.ShowQuickAdd_REN(I,F)}else if(93==I){const{RibbonExtRental:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(7522)]).then(n.bind(n,75141));K.ShowQuickAdd_REN(I,F)}else if(94==I){const{RibbonExtRental:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(7522)]).then(n.bind(n,75141));K.ShowQuickAdd_REN(I,F)}else if(95==I){const{RibbonExtRental:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(7522)]).then(n.bind(n,75141));K.ShowQuickAdd_REN(I,F)}else if(I>5e4)if(50051==I){const{RibbonExtPay:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3798),n.e(1188),n.e(2076)]).then(n.bind(n,58807));K.ShowQuickAdd_Payroll(I,F)}else if(N&&_){const{QuickAddCostCenterComponent:K}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,19771)),{QuickAddCostCenterViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(4359),n.e(2798),n.e(3630),n.e(2076)]).then(n.bind(n,83630));ae=K,O=new ee,O.QuickAddCostCenterViewModel(F,I,0,"",!1)}else{const{AddEditCostcenterComponent:K}=yield Promise.all([n.e(9891),n.e(534),n.e(2881),n.e(2798),n.e(7654)]).then(n.bind(n,30417)),{AddCostCenterViewModel:ee}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,88248));fe=K,se=new ee(I),se.AddCostCenterViewModel_1(F,I,0,"",!1)}}O?G.d.page.ShowDialog(O,ae).subscribe(()=>{2==te&&v&&v.obj[v.callback](O.RetValue)}):se&&G.d.page.addNewTab({component:fe,params:{obj:se}})}).apply(this,arguments)}static SearchListView(E){return(0,C.A)(function*(){if(E.GridViewID>0){const{ProductSearchCatalogViewModel:b}=yield Promise.all([n.e(7996),n.e(2881),n.e(4628),n.e(2771),n.e(9702),n.e(2076)]).then(n.bind(n,75152)),{ProductSearchCatalogComponent:p}=yield n.e(2726).then(n.bind(n,50345));G.d.page.ShowDialog(new b(null,0,0,null,E),p)}})()}static LoadDocument(E){let b={};V.DocumentObj(b,parseInt(E.CostCenterID)).then(p=>{let j=b.params.obj;j.ScreenObject.DocPrefix.ComboBox.SelectedValue=W.J0.IsEmpty(E.Prefix)?E.DocPrefix.toString():E.Prefix.toString(),j.ScreenObject.DocPrefix.TextBox.Text=W.J0.IsEmpty(E.DocNoStr)?E.DocNumber.toString():E.DocNoStr.toString(),j.OnDocPrefixChanged("lostFocus"),j.ScreenObject.FillDocumentPrefix(!0),G.d.page.addNewTab(b)})}static LoadDocumentObj(E){return(0,C.A)(function*(){const{AddEditDocumentViewModel:b}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109));let p=new b(parseInt(E.CostCenterID),"",!0);return p.ScreenObject.DocPrefix.ComboBox.SelectedValue=W.J0.IsEmpty(E.Prefix)?E.DocPrefix.toString():E.Prefix.toString(),p.ScreenObject.DocPrefix.TextBox.Text=W.J0.IsEmpty(E.DocNoStr)?E.DocNumber.toString():E.DocNoStr.toString(),p.OnDocPrefixChanged("lostFocus"),p.ScreenObject.FillDocumentPrefix(!0),p})()}static LoadDocumentBid(E,b){let p={};V.DocumentObj(p,parseInt(E.CostCenterID)).then(j=>{let T=p.params.obj;T.ScreenObject.DocPrefix.ComboBox.SelectedValue=W.J0.IsEmpty(E.Prefix)?E.DocPrefix.toString():E.Prefix.toString(),T.ScreenObject.DocPrefix.TextBox.Text=W.J0.IsEmpty(E.DocNoStr)?E.DocNumber.toString():E.DocNoStr.toString(),T.OnDocPrefixChanged("lostFocus"),T.ScreenObject.FillDocumentPrefix(!0),T.parentRptRefresh=b,G.d.page.addNewTab(p)})}static LoadDocumentByDocID(E){let b=G.d.document.GetDocDetailsByDOcID(parseInt(E.DocID),parseInt(E.CostCenterID));null!=b&&b.Tables.length>0&&b.Tables[0].length>0&&!b.Columns[0].Contains("ErrorMessage")&&(b.Tables[0][0].CostCenterID=b.Tables[0][0].CCID,G.d.page.HideDialog(this.PopUpGUID),V.LoadDocument(b.Tables[0][0]))}static DocumentObj(E,b){return(0,C.A)(function*(p,j,T=""){const{AddEditDocumentComponent:I}=yield Promise.all([n.e(7996),n.e(2881),n.e(8405),n.e(895),n.e(9702),n.e(2076),n.e(9503)]).then(n.bind(n,30786)),{AddEditDocumentViewModel:oe}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109));let F=new oe(j,T,!0);Object.assign(p,{component:I,params:{obj:F}})}).apply(this,arguments)}static LoadDocument_2(E,b,p="",j=null){let T={};V.DocumentObj(T,E).then(I=>{let F={value:new Date},N=T.params.obj;if(N.ScreenObject.DocID=b,N.DocFlowXMl=p,b>0)N.ScreenObject.DocID=b,N.ScreenObject.OnDocPrefixChanged("lostFocus",0,b,F,!0),N._Ddate=F.value,N.ScreenObject.FillDocumentPrefix(!0);else if("AddEditRenContractViewModel"==j.ClassName){let te=j,v=null;if(N.ScreenObject._CCFields.forEach(S=>{if(S instanceof X.y$){let O=S;if(O.CCID==te.PropertyCCID||O.CCID==te.UnitCCID||O.CCID==te.TenantCCID)null==v&&(te.cntrct.UnitID=te.Unit.SelectedValue,te.cntrct.TenantID=te.Tenant.SelectedValue,te.cntrct.PropertyID=te.Property.SelectedValue,v=G.d.rental.GetPostingDetails(te.cntrct,0,95,0,0,0,te.cntrct.PropertyID,te.cntrct.UnitID,te.cntrct.TenantID,te.RentRecAc.SelectedValue,te.RentRecAc.MultiIDS)),O.CCID==te.UnitCCID&&null!=v&&v.Tables.length>0&&v.Tables[0].length>0&&!W.J0.IsEmpty(v.Tables[0][0].UnitID)?O.SelectedValue=parseInt(v.Tables[0][0].UnitID.toString()):O.CCID==te.PropertyCCID&&null!=v&&v.Tables.length>0&&v.Tables[0].length>0&&!W.J0.IsEmpty(v.Tables[0][0].PropertyID)?O.SelectedValue=parseInt(v.Tables[0][0].PropertyID.toString()):O.CCID==te.TenantCCID&&null!=v&&v.Tables.length>0&&v.Tables[0].length>0&&!W.J0.IsEmpty(v.Tables[0][0].TenantID)&&(O.SelectedValue=parseInt(v.Tables[0][0].TenantID.toString()));else{var B=te.ScreenObject.GetCustomCCField_1(O.CCID);null!=B&&B.SelectedValue>0&&(O.SelectedValue=B.SelectedValue)}}}),N.ScreenObject.FillListViews(!1),!W.J0.IsEmpty(p)){let S=new W.VB;if(S.LoadXml(p),null!=S.DocumentElement.attributes&&null!=S.DocumentElement.attributes.LinkCCID&&null!=S.DocumentElement.attributes.LinkDocID&&!W.J0.IsEmpty(S.DocumentElement.attributes.LinkCCID.value)&&!W.J0.IsEmpty(S.DocumentElement.attributes.LinkDocID.value)){if(null!=N.ScreenObject.Link&&null!=N.ScreenObject.Link.LinkCombo){let O=N.ScreenObject.Link.LinkCombo.Items.find(ae=>null!=ae.Parent&&ae.Parent==S.DocumentElement.attributes.LinkCCID.value);O&&(N.ScreenObject.Link.LinkCombo.SelectedValue=O.Value,N.OLinkSelectionChanged(null))}let B=N.ScreenObject.Link.DocumentList.Items.find(O=>O.Value==S.DocumentElement.attributes.LinkDocID.value);B&&(B.IsChecked=!0,N.OnLinkDocumentCheckedChanged(B))}}}G.d.page.addNewTab(T)})}static AutoPostDocs(E){return(0,C.A)(function*(){const{DashBoardNotifViewModel:b}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2911),n.e(5620),n.e(2076)]).then(n.bind(n,85620));let p=new b(0);p.dt=E,p.AutoPost()})()}static OpenRecurDocument(E){return(0,C.A)(function*(){const{DashBoardNotifViewModel:b}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2911),n.e(5620),n.e(2076)]).then(n.bind(n,85620));new b(0).LoadDocument(E,!1)})()}static LoadDocument_VoucherNo_Obj(E){var b=this;return(0,C.A)(function*(){let p=G.d.report.GetDocumentDetailsByVoucherNo(E);if(W.J0.Int(p.obj)>0){let T;return T=p.Tables[0].length>0?p.Tables[0][0]:p.Tables[1][0],yield b.LoadDocumentObj(T)}return null})()}static LoadDocument_VoucherNo(E){let b=G.d.report.GetDocumentDetailsByVoucherNo(E);if(W.J0.Int(b.obj)>0){let j;j=b.Tables[0].length>0?b.Tables[0][0]:b.Tables[1][0],this.LoadDocument(j)}}static LoadDocument_VoucherNoBidding(E,b){let p=G.d.report.GetDocumentDetailsByVoucherNo(E);if(W.J0.Int(p.obj)>0){let T;T=p.Tables[0].length>0?p.Tables[0][0]:p.Tables[1][0],this.LoadDocumentBid(T,b)}}static GetDocumentObject(E,b,p,j=null){return Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109)).then(({AddEditDocumentViewModel:T})=>new T(E,b,p,j))}static OnDocPrefixChanged(E,b){let p={value:E._Ddate};E.ScreenObject.OnDocPrefixChanged("lostFocus",0,b,p,!1),E._Ddate=p.value}static ShowDocumentNumberViewModelRental(E){return(0,C.A)(function*(){const{DocumentNumberComponent:b}=yield n.e(8372).then(n.bind(n,43610)),{DocumentNumberViewModel:p}=yield Promise.all([n.e(7996),n.e(4628),n.e(1938),n.e(2076)]).then(n.bind(n,99557));let j=new p(E,E.ScreenObject.Data.Tables[8],!0,null);j.DocumentNumberViewModel_1(E),G.d.page.ShowDialog(j,b,{HideClose:!0,ShowCenter:!0,Title:G.d.GetResource("DocumentNumberTitle")})})()}static PrintVoucher(E,b){var p=this;return(0,C.A)(function*(){let j=G.d.report.GetDataTable("DOC001",b);if(j.length>0&&0!=W.J0.Int(j[0].DocID)){const{AddEditDocumentViewModel:T}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109));let I=new T(0,"EMPTY_LOAD");I.CostCenterID=W.J0.Int(j[0].CostCenterID),I.IsInventoryVoucher=1==j[0].IsInv,I.ScreenObject.Preferences.push("AskForVoucherPrintFormat","False"),I.ScreenObject.Preferences.push("PreviewFromReport","1"),E.DisplayMessage="Preview Loading..",I.PrintVoucher(!0,j[0].DocID.ToString(),!1,"",-1,null,!1,"",!1,p)}else alert("Document not found.")})()}static PrintMaster(E,b,p,j,T){return(0,C.A)(function*(I,oe,F,N,te,v=!0,S=""){let B=null;const{VoucherExportExcel:O}=yield n.e(8480).then(n.bind(n,96099)),{VPTDialogViewModel:ae}=yield n.e(2671).then(n.bind(n,75052)),{VPTDialogComponent:se}=yield n.e(3728).then(n.bind(n,31347));let K,fe=null,_=!1;if("Export"==oe&&(_=!0),fe=O.GetLocationPrintLayouts(F,te,N),(null==fe||0==fe.Tables.length||0==fe.Tables[0].length)&&(I.DisplayMessage=G.d.GetResource("Err_PrintLayoutNotDefined")),fe.Tables[0].length>1&&v){let ee;K=new Promise((ie,J)=>{ee=ie});let U=new ae(fe.Tables[0],_,!1);U.IsExcelVisible=!1,U.IsPDFChecked=!0,G.d.page.ShowDialog(U,se,{ShowCenter:!0,NoWidth:!0}).subscribe(()=>{U.IsOkClicked&&(B=U.SelectedRow,ee("hi"))})}else K=new Promise((ee,U)=>{B=fe.Tables[0][0],ee("hi")});K.then(()=>{if(null!=B){let J="PDF";I.DisplayMessage="Preview"==oe?"Preview Loading...":"Export"==oe?"Exporting please wait...":"Preview please wait...",G.d.report.ExportPDF_Masters(F,N.toString(),parseInt(B.DocPrintLayoutID),J,S).subscribe(Ce=>{console.log(Ce),"Export"==oe?G.d.SessionManager.Download(Ce.FileName,"abcd"):("Print"==oe||"Preview"==oe||"SaveAndPrint"==oe)&&setTimeout(()=>{G.d.SessionManager.printTab(Ce.FileName)},500),W.J0.IsEmpty(Ce.Message)&&!W.J0.IsEmpty(Ce.FileName)&&(I.DisplayMessage="Exported Successfully")},Ce=>{console.log(Ce)})}})}).apply(this,arguments)}static GetposDayclose(E){return this.DayCloseReport(E)}static AddRow_1(E,b,p,j,T,I,oe){let F={},N=E.filter(te=>te.RegID==T&&te.Name==b);return N.length>0&&""!=b?(F=N[0],F[oe.ToString("ddMMMyyyy")]=p):(F={},F.RegID=T,F.RegName=I,F[oe.ToString("ddMMMyyyy")]=p,F.Name=b,j&&(F.StyleIsBold="1"),F.Value=p,E.push(F)),F}static DayCloseReport(E){let b=[],p=[],j=E.GetDimensionFilter("dcCCNID");j+=" and docdate between CONVERT(FLOAT,CONVERT(DATETIME,'"+E.oReportDialog.FromDate.Date.ToString("dd MMM yyyy")+"'))",j+="and  CONVERT(FLOAT,CONVERT(DATETIME,'"+E.oReportDialog.ToDate.Date.ToString("dd MMM yyyy")+"'))";let T=G.d.document.GetPOSDetails(0,new Date,1,0,0,j);var I=E.oReportDialog.CostCenterFilters.find(F=>F.CostCenterID==G.d.SessionManager.RegisterCCID);return p.push("RegID"),p.push("RegName"),p.push("Name"),p.push("StyleIsBold"),p.push("Value"),null!=I&&null!=I.SelectedNodes&&I.SelectedNodes.forEach(F=>{if(!F.IsGroup){let N=E.oReportDialog.FromDate.Date;for(;N<=E.oReportDialog.ToDate.Date;){p.Contains(N.ToString("ddMMMyyyy"))||p.push(N.ToString("ddMMMyyyy"));let v,te=T.Tables[1].filter(S=>S.Reg==F.Id&&new Date(S.DocDate).toDateString()==new Date(N).toDateString());if(te.length>0)for(let S=0;S<te.length;S++)this.AddRow_1(b,W.J0.String(te[S].DocumentName)+"-Starting No",te[S].Prefix.toString()+te[S].MinNumber.toString(),!1,F.Id,F.Text[0],N),this.AddRow_1(b,W.J0.String(te[S].DocumentName)+"-Ending No",te[S].Prefix.toString()+te[S].MAXNumber.toString(),!1,F.Id,F.Text[0],N);else{te=T.Tables[1].filter(S=>S.Reg==F.Id);for(let S=0;S<te.length;S++)this.AddRow_1(b,W.J0.String(te[S].DocumentName)+"-Starting No","",!1,F.Id,F.Text[0],N),this.AddRow_1(b,W.J0.String(te[S].DocumentName)+"-Ending No","",!1,F.Id,F.Text[0],N)}this.AddRow_1(b,"","",!1,F.Id,F.Text[0],N),te=T.Tables[0].filter(S=>S.Reg==F.Id&&new Date(S.DocDate).toDateString()==new Date(N).toDateString());for(let S=0;S<T.Tables[10].length;S++)if("3"==W.J0.String(T.Tables[10][S].SectionID))v=this.AddRow_1(b,T.Tables[10][S].resourcedata.toString(),te.length>0?te[0][T.Columns[0][S]].toString():"0",!1,F.Id,F.Text[0],N);else{this.AddRow_1(b,T.Tables[10][S].resourcedata.toString(),"",!0,F.Id,F.Text[0],N);let ae,B="  "+T.Tables[10][S].resourcedata.toString(),O=0;if("5"==T.Tables[10][S].SectionID.toString()){if(T.Tables.length>2&&T.Tables[2].length>0&&T.Columns[2].Contains("Amount"))if(te=T.Tables[2].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0)for(let se=0;se<te.length;se++)v="300"==te[se].RefCCID.toString()?this.AddRow_1(b,"  Opening "+B,te[se].Amount.toString(),!1,F.Id,F.Text[0],N):this.AddRow_1(b,B+" IN",te[se].Amount.toString(),!1,F.Id,F.Text[0],N),""!=T.Tables[2][se].Amount.toString()&&"300"==T.Tables[2][se].RefCCID.toString()&&(O+=parseFloat(te[se].Amount.toString()));else{te=T.Tables[2].filter(se=>se.Reg==F.Id);for(let se=0;se<te.length;se++)v="300"==te[se].RefCCID.toString()?this.AddRow_1(b,"  Opening "+B,"0",!1,F.Id,F.Text[0],N):this.AddRow_1(b,B+" IN","0",!1,F.Id,F.Text[0],N)}T.Tables.length>3&&T.Tables[3].length>0&&T.Columns[3].Contains("Amount")&&""!=T.Tables[3][0].Amount.toString()&&(te=T.Tables[3].filter(se=>se.Reg=F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0?(v=this.AddRow_1(b,B+" OUT",te[0].Amount.toString(),!1,F.Id,F.Text[0],N),""!=te[0].Amount.toString()&&(O-=parseFloat(te[0].Amount.toString()))):(te=T.Tables[3].filter(se=>se.Reg==F.Id),te.length>0&&(v=this.AddRow_1(b,B+" OUT","0",!1,F.Id,F.Text[0],N)))),te=T.Tables[0].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),ae=0,te.length>0&&""!=te[0][T.Columns[0][S]].toString()&&(ae+=parseFloat(te[0][T.Columns[0][S]].toString())),te=T.Tables[5].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0&&""!=te[0][T.Columns[5][0]].toString()&&(ae-=parseFloat(te[0][T.Columns[5][0]].toString())),O+=ae,v=this.AddRow_1(b,B+" Sales",ae.toString(),!1,F.Id,F.Text[0],N)}else te=T.Tables[0].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0?(v=this.AddRow_1(b,B,te[0][T.Columns[0][S]].toString(),!1,F.Id,F.Text[0],N),""!=te[0][T.Columns[0][S]].toString()&&(O+=parseFloat(te[0][T.Columns[0][S]].toString()))):v=this.AddRow_1(b,B,"0",!1,F.Id,F.Text[0],N);T.Tables.length>7&&T.Tables[7].length>0&&(te=T.Tables[7].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0&&""!=te[0][T.Columns[7][S]].toString()?(v=this.AddRow_1(b,B+" Reciept",te[0][T.Columns[7][S]].toString(),!1,F.Id,F.Text[0],N),O+=parseFloat(te[0][T.Columns[7][S]].toString())):(te=T.Tables[7].filter(se=>se.Reg==F.Id),te.length>0&&(v=this.AddRow_1(b,B+" Reciept","0",!1,F.Id,F.Text[0],N)))),T.Tables.length>8&&T.Tables[8].length>0&&(te=T.Tables[8].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0&&""!=te[0][T.Columns[8][S]].toString()?(v=this.AddRow_1(b,B+" Orders",te[0][T.Columns[8][S]].toString(),!1,F.Id,F.Text[0],N),O+=parseFloat(te[0][T.Columns[8][S]].toString())):(te=T.Tables[8].filter(se=>se.Reg==F.Id),te.length>0&&(v=this.AddRow_1(b,B+" Orders","0",!1,F.Id,F.Text[0],N)))),T.Tables.length>9&&T.Tables[9].length>0&&(te=T.Tables[9].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0&&""!=te[0][T.Columns[9][S]].toString()?(v=this.AddRow_1(b,B+" Gift Voucher",te[0][T.Columns[9][S]].toString(),!1,F.Id,F.Text[0],N),O+=parseFloat(te[0][T.Columns[9][S]].toString())):(te=T.Tables[9].filter(se=>se.Reg==F.Id),te.length>0&&(v=this.AddRow_1(b,B+" Gift Voucher","0",!1,F.Id,F.Text[0],N)))),te=T.Tables[4].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0&&""!=te[0][T.Columns[4][S]].toString()?"5"==T.Tables[10][S].SectionID.toString()?(ae=0,ae+=parseFloat(te[0][T.Columns[4][S]].toString()),T.Columns[6].Contains("Reg")&&(te=T.Tables[6].filter(se=>se.Reg==F.Id&&new Date(se.DocDate).toDateString()==new Date(N).toDateString()),te.length>0&&""!=te[0][T.Columns[6][0]].toString()&&(ae-=parseFloat(te[0][T.Columns[6][0]].toString()))),O-=ae,v=this.AddRow_1(b,B+" Sales Return",ae.toString(),!1,F.Id,F.Text[0],N)):(v=this.AddRow_1(b,B+" Sales Return",te[0][T.Columns[4][S]].toString(),!1,F.Id,F.Text[0],N),O-=parseFloat(te[0][T.Columns[4][S]].toString())):(te=T.Tables[4].filter(se=>se.Reg==F.Id),te.length>0&&(v=this.AddRow_1(b,B+" Sales Return","0",!1,F.Id,F.Text[0],N)))}N=N.AddDays(1)}}}),b}static LoadScreenFromActivity(E){var b=this;return(0,C.A)(function*(){const{AddDContactViewModel:p}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,78905)),{RibbonExtCrm:j}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(3320),n.e(2436),n.e(897),n.e(2076)]).then(n.bind(n,83278)),{AddEditDocumentViewModel:T}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109)),{AddEditDocumentComponent:I}=yield Promise.all([n.e(7996),n.e(2881),n.e(8405),n.e(895),n.e(9702),n.e(2076),n.e(9503)]).then(n.bind(n,30786)),{AddEditLeadComponent:oe}=yield Promise.all([n.e(9891),n.e(2881),n.e(2436)]).then(n.bind(n,52436)),{AddEditOpportunityComponent:F}=yield Promise.all([n.e(9891),n.e(2881),n.e(5877)]).then(n.bind(n,38258)),{AddEditCaseComponent:N}=yield n.e(3071).then(n.bind(n,65452)),{AddEditCampaignComponent:te}=yield n.e(4487).then(n.bind(n,76868)),{AddCustomerComponent:v}=yield Promise.all([n.e(9891),n.e(2881),n.e(3073)]).then(n.bind(n,45454)),{AddEditRentalContractComponent:S}=yield n.e(3364).then(n.bind(n,40983)),{AddContactsComponent:B}=yield n.e(8931).then(n.bind(n,71312));G.d.page.HideDialog(b.PopUpGUID);let O=null;if(86==E.FeatureID||89==E.FeatureID||73==E.FeatureID||88==E.FeatureID||83==E.FeatureID?O=j.GetCRMActivityScreen(E):65==E.FeatureID?O=new p(E.DBColumnID,!1,0):95==E.FeatureID&&(O=b.GetAddEditRenContractViewModel(95,E.DBColumnID,!1,0,0)),E.FeatureID>=4e4&&E.FeatureID<5e4){let ae;if(ae=new T(parseInt(E.FeatureID),E.DBColumnName,!0),ae=W.J0.IsEmpty(E.ScreenName)?new T(parseInt(E.FeatureID),"",!0):new T(parseInt(E.FeatureID),E.DBColumnName,!0),G.d.page.addNewTab({component:I,params:{obj:ae}}),W.J0.IsEmpty(E.ScreenName)){ae.ScreenObject.DocID=E.DBColumnID;let se=ae.ScreenObject.GetEditDataByDOCID();null!=se&&ae.ScreenObject.IsDocEdit&&se.Tables.length>0&&se.Tables[0].length>0&&ae.ScreenObject.LoadEditData(se,!1)}else ae.ScreenObject.DocPrefix.ComboBox.SelectedValue=E.GroupName,ae.ScreenObject.DocPrefix.TextBox.Text=E.ScreenName,ae.OnDocPrefixChanged("lostFocus");ae.ScreenObject.FillDocumentPrefix(!0)}else 86==E.FeatureID?G.d.page.addNewTab({component:oe,params:{obj:O}}):89==E.FeatureID?G.d.page.addNewTab({component:F,params:{obj:O}}):73==E.FeatureID?G.d.page.addNewTab({component:N,params:{obj:O}}):88==E.FeatureID?G.d.page.addNewTab({component:te,params:{obj:O}}):83==E.FeatureID?G.d.page.addNewTab({component:v,params:{obj:O}}):65==E.FeatureID?G.d.page.addNewTab({component:B,params:{obj:O}}):95==E.FeatureID&&G.d.page.addNewTab({component:S,params:{obj:O}})})()}static GetContactParentID(E){let b=-1;return"AddEditAccountScreenViewModel"==E.ClassName?b=E.AccountID:"AddCustomerViewModel"==E.ClassName?b=E.CustomerID:"AddCostCenterViewModel"==E.ClassName?b=E.NodeID:null!=E&&"AddEditMachineViewModel"==E.ClassName?b=E.ResID:"AddEditBatchViewModel"==E.ClassName?b=E.BatchID:"AddEditCustomerViewModel"==E.ClassName?b=E.CustomerID:"AddEditLeads"==E.ClassName?b=E.LeadID:"AddEditOpportunity"==E.ClassName?b=E.OppID:"AddEditEmpMasterViewModel"==E.ClassName&&(b=E.NodeID),b}static GetContactIsPopup(E){let b=!1,p=null;return"AddEditAccountViewModel"==E.ClassName||"AddCostCenterViewModel"==E.ClassName||"AddCustomerViewModel"==E.ClassName?p=E.ScreenObject.Data.Tables[5].filter(j=>"ContactAsPopup"==j.Name):"AddEditCustomerViewModel"==E.ClassName?p=E.ScreenObject.Data.Tables[6].filter(j=>"ContactAsPopup"==j.Name):"AddEditLeads"==E.ClassName||"AddEditOpportunity"==E.ClassName?p=E.ScreenObject.Data.Tables[4].filter(j=>"ContactAsPopup"==j.Name):"AddEditEmpMasterViewModel"==E.ClassName&&(p=E.ScreenObject.Data.Tables[5].filter(j=>"ContactAsPopup"==j.Name)),null!=p&&p.length>0&&(b=""!=p[0].Value.toString()&&"True"==p[0].Value.toString()),b}static ShowAddProductScreenViewModel(E,b,p,j){return(0,C.A)(function*(){const{AddProductComponent:T}=yield Promise.all([n.e(9891),n.e(534),n.e(2881),n.e(2947),n.e(3844)]).then(n.bind(n,95328)),{AddProductScreenViewModel:I}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,81547));G.d.page.addNewTab({component:T,params:{obj:new I(E,b,p,j)}})})()}static GetAddEditRenContractViewModel(E,b,p,j,T){return(0,C.A)(function*(){const{AddEditRenContractViewModel:I}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,41361));let oe=new I;return oe.AddEditRenContractViewModel_1(E,b,p,j,T),oe})()}static LoadDraftRentalContract(E,b){return(0,C.A)(function*(){const{AddEditRentalContractComponent:p}=yield n.e(3364).then(n.bind(n,40983)),{AddEditRenContractViewModel:j}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,41361));let T=E,I=new j;I.ContractID=0,I.AddEditRenContractViewModel_1(T.CostCenterID,0,!1,0,0,"");let oe=G.d.rental.GetQuotationDetails(b);null!=oe&&oe.Tables.Count>0&&oe.Tables[0].Rows.Count>0&&(oe.Tables[0].Rows[0].ContractID=null),I.LoadEditData(oe);let N,F=G.d.rental.GetNextContractNo(T.CostCenterID,0);I.SlNO.Text=F.toString(),I.draftid=b,I.DraftVisible(!0),I.ContractID=0,I.RefershTitle(),N={obj:I},G.d.page.addNewTab({title:"Add Tenancy",component:p,params:N})})()}static{this.DefProdID=0}static{this.sCrAccount="0"}static{this.sDrAccount="0"}static GetPay_BioPostData(E){var b=this;return(0,C.A)(function*(){if(E.dgv.Table.length>0){if(!E.IsAutoPost&&!confirm("Are you sure want to post.?"))return;let I=(new Date).OnlyDate();E.sbPostErrLog="";let te,v,S,B,oe="",F="",N="",O=null,ae=E.dgv.Table.ToTable(!0,["EmpCode"]);for(let U=0;U<ae.length;U++)N.length>0&&(N+=","),v=E.dsbEmps.Tables[0].filter(ie=>ie.Code==ae[U].EmpCode.toString()),N+=v[0].NodeID.toString();E.DispMessage="Posting data, Please wait....",E.MsgVisibility=!0;let se=null;(40067==parseInt(E.DPCDocumentName.SelectedValue)||40087==parseInt(E.DPCDocumentName.SelectedValue))&&(se=G.d.empService.GetQueryData(0,"BIO005",N,E.FromDate.Date.ToString("dd MMM yyy"),E.ToDate.Date.ToString("dd MMM yyy")));let fe=[],_=null,K=!1,ee=!1;if(1==E.bOverrideAttendanceDoc&&(fe=G.d.empService.GetQueryData(0,"BIO006",N,E.FromDate.Date.ToString("dd MMM yyy"),E.ToDate.Date.ToString("dd MMM yyy"))),G.d.SessionManager.Preferences.ContainsKey("PostBiometricDataGroupBy")&&""!=G.d.SessionManager.Preferences.PostBiometricDataGroupBy.toString()){let U=G.d.SessionManager.Preferences.PostBiometricDataGroupBy.toString().split(","),ie=E.bAutoPostAtaTime;if(40089==parseInt(E.DPCDocumentName.SelectedValue)&&ie&&(G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,z.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData)||E.IsAutoPost)){const{ControlGenerator:J}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,85985));let Te,Ce="",Y="",Ee=(new J).GetScreenInfo(40089);Te=Ee.Tables[0].filter(Ue=>"CreditAccount"==Ue.SysColumnName),null!=Te&&Te.length>0&&null!=Te[0].UserDefaultValue&&""!=Te[0].UserDefaultValue.toString().Trim()&&(b.sCrAccount=Te[0].UserDefaultValue.toString()),Te=Ee.Tables[0].Select("SysColumnName='DebitAccount'"),null!=Te&&Te.length>0&&null!=Te[0].UserDefaultValue&&""!=Te[0].UserDefaultValue.toString().Trim()&&(b.sDrAccount=Te[0].UserDefaultValue.toString()),Te=Ee.Tables[0].Select("SysColumnName='ProductID'"),null!=Te&&Te.length>0&&null!=Te[0].UserDefaultValue&&""!=Te[0].UserDefaultValue.toString().Trim()&&(b.DefProdID=parseInt(Te[0].UserDefaultValue));let Le,tt=E.GetGroupByFilterEmployees();if(null!=tt&&tt.length>0){let Ue="";if(null!=U&&U.length>0){for(let Be=0;Be<U.length;Be++)null!=U[Be]&&""!=U[Be].toString().Trim()&&(Ue.length>0&&(Ue+=","),"-1"==U[Be]?Ue+="RptManager,RptManager_Name":"-2"==U[Be]?Ue+="EmpSeqNo,Emp_Name":"-3"==U[Be]?(Ue+="DateWise",ee=!0):Ue+="CCNID"+(parseInt(U[Be])-5e4)+",CCNID"+(parseInt(U[Be])-5e4)+"_Name");if(ee&&(tt.Columns.push("DateWise"),tt.forEach(Be=>{Be.DateWise=1})),Ue.length>0){let Be=[],xe=tt;if(ee){let Re,be;for(Re=E.FromDate.Date;Re<=E.ToDate.Date;)be={},be.TDates=Re.Date().ToString("dd MMM yyyy"),Be.push(be),Re=Re.AddDays(1)}else Be=xe.ToTable(!0,Ue.split(","));let ve=Be,A=tt,Se=null;if(null!=Be&&Be.length>0){E.dgv.TableColumns.Contains("Flag")&&E.dgv.TableColumns.Remove("Flag"),E.dgv.TableColumns.push("Flag"),E.dgv.TableColumns.Flag.DefaultValue="0";let Re="",be="";for(let He=0;He<Be.length;He++){Le=new Z.NP,Re="",be="",ve=Be,A=tt;for(let Ne=0;Ne<Object.keys(Be[0]).length;Ne++){let Ke=Object.keys(Be[0])[Ne];Ke.endsWith("_Name")?(be.length>0&&(be+=" AND "),be+=Ke+" = '"+Be[He][Ke].toString()+"' "):Ke.Contains("TDates")?(Re.length>0&&(Re+=" AND "),Re+="TDates='"+Be[He].TDates+"'",ve=ve.filter(De=>De.TDates==Be[He].TDates),A=A.filter(De=>De.TDates==Be[He].TDates)):(Re.length>0&&(Re+=" AND "),Re+=Ke+"="+Be[He][Ke].toString(),ve=ve.filter(De=>De[Ke]==Be[He][Ke].toString()),A=A.filter(De=>De[Ke]==Be[He][Ke].toString()))}if(Re.length>0){if(oe="",Se=null,Se=ee?ve:A,null!=Se&&Se.length>0)for(let Ke=0;Ke<E.dgv.Table.length;Ke++){let De=E.dgv.Table[Ke].EmpCode.toString().Trim(),Ae=new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyyy"),je=!1;if(ee?Ae.toString()==Se[0].TDates.toString()&&(je=!0):Se.filter($e=>$e.EmpCode==De).length>0&&(je=!0),"1"!=W.J0.String(E.dgv.Table[Ke].Flag)&&je)if(E.dgv.Table[Ke].Flag="1",v=E.dsbEmps.Tables[0].filter($e=>$e.Code==De),K=!1,null!=v&&v.length>0){let $e,nt;if(1==E.bOverrideAttendanceDoc&&40089==parseInt(E.DPCDocumentName.SelectedValue)&&(_=fe.filter(gt=>gt.dcCCNID51==v[0].NodeID&&new Date(gt.dcAlpha39).ToString("dd MMM yyy")==new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyy")),null!=_&&_.length>0&&(K=!0)),1==K&&(Le.ADocID=parseInt(_[0].DocID)),Le.EmpNode=parseInt(v[0].NodeID),E.bUseROffTimings?($e="ROffStartTime",nt="ROffEndTime"):($e="ActStartTime",nt="ActEndTime"),40089==parseInt(E.DPCDocumentName.SelectedValue)){if(1==K&&40089==parseInt(E.DPCDocumentName.SelectedValue))if(null!=_[0].cdcAlpha1&&null!=_[0].cdcAlpha1&&""!=_[0].cdcAlpha1.toString()){let gt,Qe;gt=new Date(_[0].cdcAlpha1).AddHours(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getHours()).AddMinutes(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getMinutes()),Qe=new Date(_[0].cdcAlpha1).AddHours(new Date(_[0].cdcAlpha2).getHours()).AddMinutes(new Date(_[0].cdcAlpha2).getMinutes()),((null==_[0].cdcAlpha3||null==_[0].cdcAlpha3||""==_[0].cdcAlpha3.toString())&&gt!=Qe||null!=_[0].cdcAlpha4&&null!=_[0].cdcAlpha4&&""!=_[0].cdcAlpha4.toString()&&gt>new Date(_[0].cdcAlpha4))&&(Le.CheckoutDate=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e])>W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt])?new Date(E.dgv.Table[Ke].PunchDate).AddDays(1).ToString("dd MMM yyyy"):new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyyy"),Le.CheckoutTime=new Date(new Date(Le.CheckoutDate).getFullYear(),new Date(Le.CheckoutDate).iMonth(),new Date(Le.CheckoutDate).getDate(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getHours(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getMinutes(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getSeconds()).ToString("dd MMM yyyy HH:mm"),Le.CheckinDate=new Date(_[0].cdcAlpha1).ToString("dd MMM yyyy"),Le.CheckinTime=new Date(_[0].cdcAlpha2).ToString("dd MMM yyyy HH:mm"))}else null!=_[0].cdcAlpha3&&null!=_[0].cdcAlpha3&&""!=_[0].cdcAlpha3.toString()&&(null==_[0].cdcAlpha1||null==_[0].cdcAlpha1||""==_[0].cdcAlpha1.toString())&&(Le.CheckinDate=new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyyy"),Le.CheckinTime=new Date(new Date(Le.CheckinDate).getFullYear(),new Date(Le.CheckinDate).iMonth(),new Date(Le.CheckinDate).getDate(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e]).getHours(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e]).getMinutes(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e]).getSeconds()).ToString("dd MMM yyyy HH:mm"));else Le.CheckinDate=new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyyy"),40089==parseInt(E.DPCDocumentName.SelectedValue)&&(Le.DailyPayrollDate=new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyyy")),S=E.dsbEmps.Tables[1].filter(gt=>gt.Code==E.dgv.Table[Ke].ShiftCode),null!=S&&S.length>0&&(Le.ShiftNode=parseInt(S[0].NodeID)),Le.CheckinTime=new Date(new Date(Le.CheckinDate).getFullYear(),new Date(Le.CheckinDate).iMonth(),new Date(Le.CheckinDate).getDate(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e]).getHours(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e]).getMinutes(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e]).getSeconds()).ToString("dd MMM yyyy HH:mm"),E.bOverrideAttendanceDoc&&40089==parseInt(E.DPCDocumentName.SelectedValue)&&W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e])==W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt])||(Le.CheckoutDate=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][$e])>W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt])?new Date(E.dgv.Table[Ke].PunchDate).AddDays(1).ToString("dd MMM yyyy"):new Date(E.dgv.Table[Ke].PunchDate).ToString("dd MMM yyyy"),Le.CheckoutTime=new Date(new Date(Le.CheckoutDate).getFullYear(),new Date(Le.CheckoutDate).iMonth(),new Date(Le.CheckoutDate).getDate(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getHours(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getMinutes(),W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[Ke][nt]).getSeconds()).ToString("dd MMM yyyy HH:mm"));Le.TotalTime=null!=Le.CheckinDate&&null!=Le.CheckinTime&&null!=Le.CheckoutDate&&null!=Le.CheckoutTime?V.CalculateTotalTime(new Date(Le.CheckinTime),new Date(Le.CheckinTime),new Date(Le.CheckoutTime),new Date(Le.CheckoutTime)):""}}else E.dgv.Table[Ke].Remarks="Employee Code - '"+De+"' not found in RevenU / Relieved "}K?Le.ADocID>0&&null!=Le.CheckoutDate&&null!=Le.CheckoutTime&&(Y+="\r\n",Y+=" UPDATE T SET T.dcAlpha3='"+Le.CheckoutDate+"',T.dcAlpha4='"+Le.CheckoutTime+"',T.dcAlpha5='"+Le.TotalTime+"' FROM INV_DocDetails I WITH(NOLOCK)",Y+="JOIN COM_DocTextData T WITH(NOLOCK) ON T.InvDocDetailsID=I.InvDocDetailsID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tWHERE I.CostCenterID=40089 AND I.DOCID="+Le.ADocID):Le.EmpNode>1&&(Ce+="<ROWS>",Ce+="<DocumentXML>",Ce+=V.GetAttXML(Le),Ce+="</DocumentXML>",Ce+="</ROWS>")}}}}}}if(Ce.length>0||Y.length>0){Ce.length>0&&(Ce.Insert(0,"<ATT>"),Ce+="</ATT>");let Ue=[];Ue.push(Ce.toString()),Ue.push(Y.toString()),Ue.push(G.d.SessionManager.GetSysInfo()),Ue.push("Web"),Ue.push(G.d.SessionManager.UserID),Ue.push(G.d.SessionManager.LanguageID),G.d.empService.GetData(Ue,"spPAY_PostAttendanceBiometric")}E.MsgVisibility=!1}else{let J=E.GetGroupByFilterEmployees();if(null!=J&&J.length>0){let Ce="";if(null!=U&&U.length>0){for(let Ee=0;Ee<U.length;Ee++)null!=U[Ee]&&""!=U[Ee].toString().Trim()&&(Ce.length>0&&(Ce+=","),"-1"==U[Ee]?Ce+="RptManager,RptManager_Name":"-2"==U[Ee]?Ce+="EmpSeqNo,Emp_Name":"-3"==U[Ee]?(Ce+="DateWise",ee=!0):Ce+="CCNID"+(parseInt(U[Ee])-5e4)+",CCNID"+(parseInt(U[Ee])-5e4)+"_Name");if(ee&&J.forEach(Ee=>{Ee.DateWise=1}),Ce.length>0){let Ee=[],Te=J;if(ee){let Ue,ke;for(Ue=E.FromDate.Date;Ue<=E.ToDate.Date;)ke={},ke.TDates=Ue.Date().ToString("dd MMM yyyy"),Ee.push(ke),Ue=Ue.AddDays(1)}else Ee=Te.ToTable(!0,Ce.split(","));let Le=Ee,tt=J;if(null!=Ee&&Ee.length>0){E.dgv.TableColumns.Contains("Flag")&&E.dgv.TableColumns.Remove("Flag"),E.dgv.TableColumns.push("Flag");let Ue="",ke="";for(let Be=0;Be<Ee.length;Be++){Ue="",ke="",Le=Ee,tt=J;for(let xe=0;xe<Object.keys(Ee[0]).length;xe++){let ve=Object.keys(Ee[0])[xe];ve.endsWith("_Name")?(ke.length>0&&(ke+=" AND "),ke+=ve+" = '"+Ee[Be][ve].toString()+"' "):ve.Contains("TDates")?(Ue.length>0&&(Ue+=" AND "),Ue+="TDates='"+Ee[Be].TDates+"'",Le=Le.filter(A=>A.TDates==Ee[Be].TDates),tt=tt.filter(A=>A.TDates==Ee[Be].TDates)):(Ue.length>0&&(Ue+=" AND "),Ue+=ve+"="+Ee[Be][ve].toString(),Le=Le.filter(A=>A[ve]==Ee[Be][ve].toString()),tt=tt.filter(A=>A[ve]==Ee[Be][ve].toString()))}if(Ue.length>0){oe="";let xe=null;if(xe=ee?Le:tt,null!=xe&&xe.length>0){let ve=-1;O=yield V.GetDocumentObject(parseInt(E.DPCDocumentName.SelectedValue),"",!1,"Biometric"),O.ScreenObject.GridDataObj.Clear();for(let A=0;A<E.dgv.Table.length;A++){let Se=E.dgv.Table[A].EmpCode.toString().Trim(),Re=new Date(E.dgv.Table[A].PunchDate).ToString("dd MMM yyyy"),be=!1;if(ee?Re.toString()==xe[0].TDates.toString()&&(be=!0):xe.filter(He=>He.EmpCode==Se).length>0&&(be=!0),"1"!=W.J0.String(E.dgv.Table[A].Flag)&&be)if(E.dgv.Table[A].Flag="1",v=E.dsbEmps.Tables[0].filter(He=>He.Code==Se),K=!1,null!=v&&v.length>0){if(1==E.bOverrideAttendanceDoc&&40089==parseInt(E.DPCDocumentName.SelectedValue)&&(_=fe.filter(Ke=>Ke.dcCCNID51==v[0].NodeID&&new Date(Ke.dcAlpha39).ToString("dd MMM yyy")==new Date(E.dgv.Table[A].PunchDate).ToString("dd MMM yyy")),null!=_&&_.length>0&&(K=!0)),1==K){let De={value:new Date};O=yield V.GetDocumentObject(parseInt(E.DPCDocumentName.SelectedValue),"",!0,"Biometric"),O.ScreenObject.OnDocPrefixChanged("lostFocus",0,parseInt(_[0].DocID),De,!1),O._Ddate=De.value,O.ScreenObject.DocID=parseInt(_[0].DocID),ve=0}else ve++,te=O.ScreenObject.GridDataObj.NewRow(),O.ScreenObject.GridData.push(te);let He,Ne;if(O.ScreenObject.ParentFlagName="PostingFromBiometric",O.IsGetAllEmployees=!0,O.dsAllEmployeeData=se,O.sbBioErrLogs="",O.ScreenObject.GridDataColumns.Contains("dcCCNID51Code")&&(O.ScreenObject.GridData[ve].dcCCNID51Code=v[0].Code),O.ScreenObject.GridData[ve].dcCCNID51_key=v[0].NodeID,O.ScreenObject.GridData[ve].dcCCNID51=v[0].Name,O.FillDefaultProd(O.ScreenObject.GridData[ve],"dcCCNID51"),O.Celleditend(O.ScreenObject.GridData[ve],"dcCCNID51",0),E.bUseROffTimings?(He="ROffStartTime",Ne="ROffEndTime"):(He="ActStartTime",Ne="ActEndTime"),40089==parseInt(E.DPCDocumentName.SelectedValue)||40090==parseInt(E.DPCDocumentName.SelectedValue))if(1==K&&40089==parseInt(E.DPCDocumentName.SelectedValue))if(null!=_[0].cdcAlpha1&&null!=_[0].cdcAlpha1&&""!=_[0].cdcAlpha1.toString()){let Ke,De;Ke=new Date(_[0].cdcAlpha1).AddHours(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]).getHours()).AddMinutes(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]).getMinutes()),De=new Date(_[0].cdcAlpha1).AddHours(new Date(_[0].cdcAlpha2).getHours()).AddMinutes(new Date(_[0].cdcAlpha2).getMinutes()),((null==_[0].cdcAlpha3||null==_[0].cdcAlpha3||""==_[0].cdcAlpha3.toString())&&Ke!=De||null!=_[0].cdcAlpha4&&null!=_[0].cdcAlpha4&&""!=_[0].cdcAlpha4.toString()&&Ke>new Date(_[0].cdcAlpha4))&&(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He])>W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne])?(O.ScreenObject.GridData[ve].dcAlpha3=new Date(E.dgv.Table[A].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha3_Key=new Date(E.dgv.Table[A].PunchDate).AddDays(1)):(O.ScreenObject.GridData[ve].dcAlpha3=new Date(E.dgv.Table[A].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha3_Key=new Date(E.dgv.Table[A].PunchDate)),O.ScreenObject.GridData[ve].dcAlpha4=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]).ToString("HH:mm"),O.ScreenObject.GridData[ve].dcAlpha4_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]),O.Celleditend(O.ScreenObject.GridData[ve],"dcAlpha4",parseInt(E.DPCDocumentName.SelectedValue)))}else null!=_[0].cdcAlpha3&&null!=_[0].cdcAlpha3&&""!=_[0].cdcAlpha3.toString()&&(null==_[0].cdcAlpha1||null==_[0].cdcAlpha1||""==_[0].cdcAlpha1.toString())&&(O.ScreenObject.GridData[ve].dcAlpha1=new Date(E.dgv.Table[A].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha1_Key=new Date(E.dgv.Table[A].PunchDate),O.ScreenObject.GridData[ve].dcAlpha2=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He]).ToString("HH:mm"),O.ScreenObject.GridData[ve].dcAlpha2_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He]),O.Celleditend(O.ScreenObject.GridData[ve],"dcAlpha2",parseInt(E.DPCDocumentName.SelectedValue)));else O.ScreenObject.GridData[ve].dcAlpha1=new Date(E.dgv.Table[A].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha1_Key=new Date(E.dgv.Table[A].PunchDate),40089==parseInt(E.DPCDocumentName.SelectedValue)&&(O.ScreenObject.GridData[ve].dcAlpha39=new Date(E.dgv.Table[A].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha39_Key=new Date(E.dgv.Table[A].PunchDate)),S=E.dsbEmps.Tables[1].filter(Ke=>Ke.Code==E.dgv.Table[A].ShiftCode),null!=S&&S.length>0&&(O.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(O.ScreenObject.GridData[ve].dcCCNID73Code=S[0].Code),O.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(O.ScreenObject.GridData[ve].dcCCNID73=S[0].Name),O.ScreenObject.GridDataColumns.Contains("dcCCNID73_Key")&&(O.ScreenObject.GridData[ve].dcCCNID73_Key=S[0].NodeID),O.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&O.Celleditend(O.ScreenObject.GridData[ve],"dcCCNID73",0)),O.ScreenObject.GridData[ve].dcAlpha2=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He]).ToString("HH:mm"),O.ScreenObject.GridData[ve].dcAlpha2_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He]),E.bOverrideAttendanceDoc&&40089==parseInt(E.DPCDocumentName.SelectedValue)&&W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He])==W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne])||(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He])>W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne])?(O.ScreenObject.GridData[ve].dcAlpha3=new Date(E.dgv.Table[A].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha3_Key=new Date(E.dgv.Table[A].PunchDate).AddDays(1)):(O.ScreenObject.GridData[ve].dcAlpha3=new Date(E.dgv.Table[A].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha3_Key=new Date(E.dgv.Table[A].PunchDate)),O.ScreenObject.GridData[ve].dcAlpha4=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]).ToString("HH:mm"),O.ScreenObject.GridData[ve].dcAlpha4_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]),O.Celleditend(O.ScreenObject.GridData[ve],"dcAlpha4",parseInt(E.DPCDocumentName.SelectedValue)));else if(40067==parseInt(E.DPCDocumentName.SelectedValue)||40087==parseInt(E.DPCDocumentName.SelectedValue)){if(O.ScreenObject.GridData[ve].dcAlpha1=new Date(E.dgv.Table[A].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[ve].dcAlpha1_Key=new Date(E.dgv.Table[A].PunchDate),O.Celleditend(O.ScreenObject.GridData[ve],"dcAlpha1",parseInt(E.DPCDocumentName.SelectedValue)),S=E.dsbEmps.Tables[1].filter(Ke=>Ke.Code==E.dgv.Table[A].ShiftCode),null!=S&&S.length>0&&(O.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(O.ScreenObject.GridData[ve].dcCCNID73Code=S[0].Code),O.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(O.ScreenObject.GridData[ve].dcCCNID73=S[0].Name),O.ScreenObject.GridData[ve].dcCCNID73_Key=S[0].NodeID,O.Celleditend(O.ScreenObject.GridData[ve],"dcCCNID73",0)),O.ScreenObject.GridData[ve].dcAlpha2=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He]).ToString("HH:mm"),O.ScreenObject.GridData[ve].dcAlpha2_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][He]),O.ScreenObject.GridData[ve].dcAlpha3=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]).ToString("HH:mm"),O.ScreenObject.GridData[ve].dcAlpha3_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[A][Ne]),E.bDocColumns){if(E.dgv.TableColumns.Contains("IN Device No"))if(null!=(p=O.ScreenObject.ColumnSource.FirstOrDefault(Ke=>Ke.DisplayMember==E.dgvDocColumns.Table[0].Destination.toString()))&&O.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(O.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{B=E.dsbDims.Tables[0].Select("CODE='"+E.dgv.Table[A]["IN Device No"]+"' AND CostcenterID="+(5e4+parseInt(p.DisplayMember.Replace("dcCCNID","")))),null!=B&&B.length>0&&(O.ScreenObject.GridData[ve][p.DisplayMember+"_Key"]=B[0].NODEID)}catch{O.ScreenObject.GridData[ve][p.DisplayMember]=E.dgv.Table[A]["IN Device No"]}}else O.ScreenObject.GridData[ve][p.DisplayMember]=E.dgv.Table[A]["IN Device No"];else if(null==(j=O.ScreenObject._TextFields.find(Ke=>Ke.DBColumnName.toString()==E.dgvDocColumns.Table[0].Destination.toString()))&&(j=O.ScreenObject._CCFields.find(Ke=>Ke.DBColumnName.toString()==E.dgvDocColumns.Table[0].Destination.toString())),null==j&&(j=O.ScreenObject.HeaderFields.file(Ke=>Ke.DBColumnName.toString()==E.dgvDocColumns.Table[0].Destination.toString())),null!=j){let Ke=E.dgv.Table[A]["IN Device No"].toString();O.ScreenObject.fillcontrolValue(j,Ke)}if(E.dgv.TableColumns.Contains("OUT Device No"))if(null!=(p=O.ScreenObject.ColumnSource.FirstOrDefault(De=>De.DisplayMember==E.dgvDocColumns.Table[1].Destination.toString()))&&O.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(O.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{B=E.dsbDims.Tables[0].filter(De=>De.CODE==E.dgv.Table[A]["OUT Device No"]&&De.CostcenterID==5e4+parseInt(p.DisplayMember.Replace("dcCCNID",""))),null!=B&&B.length>0&&(O.ScreenObject.GridData[ve][p.DisplayMember+"_Key"]=B[0].NODEID)}catch{O.ScreenObject.GridData[ve][p.DisplayMember]=E.dgv.Table[A]["OUT Device No"]}}else O.ScreenObject.GridData[ve][p.DisplayMember]=E.dgv.Table[A]["OUT Device No"];else if(null==(j=O.ScreenObject._TextFields.find(Ae=>Ae.DBColumnName.toString()==E.dgvDocColumns.Table[1].Destination.toString()))&&(j=O.ScreenObject._CCFields.find(Ae=>Ae.DBColumnName.toString()==E.dgvDocColumns.Table[1].Destination.toString())),null==j&&(j=O.ScreenObject.HeaderFields.find(Ae=>Ae.DBColumnName.toString()==E.dgvDocColumns.Table[1].Destination.toString())),null!=j){let Ae=E.dgv.Table[A]["OUT Device No"].toString();O.ScreenObject.fillcontrolValue(j,Ae)}}E.bDirection&&null!=(p=O.ScreenObject.ColumnSource.FirstOrDefault(De=>"LineNarration"==De.DisplayMember))&&O.ScreenObject.GridDataColumns.Contains(p.DisplayMember)&&(O.ScreenObject.GridData[ve][p.DisplayMember]=E.dgv.Table[A].Remarks),O.Celleditend(O.ScreenObject.GridData[ve],"dcAlpha3",parseInt(E.DPCDocumentName.SelectedValue))}O.CalculateTotals(O.ScreenObject.GridData[ve],!1)}else E.dgv.Table[A].Remarks="Employee Code - '"+Se+"' not found in RevenU / Relieved "}if(""!=F.Trim()&&(O.DisplayMessage=F,O.MessageVisibility=!0),O.UpdateFooter=!0,O.RefreshGrid=!0,G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,z.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData)||E.IsAutoPost){let A=yield O.SaveInventoryDocument("Save",!0);O.sbBioErrLogs.length>0&&(E.sbPostErrLog+=O.sbBioErrLogs,O.sbBioErrLogs=""),A||(oe=ke+" "+O.DisplayMessage,E.sbPostErrLog+='<Row Error="'+oe+'"></Row>')}else{const{AddEditDocumentComponent:A}=yield Promise.all([n.e(7996),n.e(2881),n.e(8405),n.e(895),n.e(9702),n.e(2076),n.e(9503)]).then(n.bind(n,30786));null!=(T=O.ScreenObject._StaticFields.find(Re=>"CommonNarration"==Re.DBColumnName))&&(T.SetFocus=!0);let Se={};Object.assign(Se,{component:A,params:{obj:O}}),G.d.page.addNewTab(Se)}O.IsGetAllEmployees=!1,O.dsAllEmployeeData=null,E.MsgVisibility=!1}}}}}}}}}else{O=yield V.GetDocumentObject(parseInt(E.DPCDocumentName.SelectedValue),"",!1),O.ScreenObject.GridDataObj.Clear(),O.ScreenObject.ParentFlagName="PostingFromBiometric",O.IsGetAllEmployees=!0,O.dsAllEmployeeData=se,O.sbBioErrLogs="";let U=-1;for(let ie=0;ie<E.dgv.Table.length;ie++){let J=E.dgv.Table[ie].EmpCode.toString().Trim();if(v=E.dsbEmps.Tables[0].filter(Ce=>Ce.Code==J),K=!1,null!=v&&v.length>0){if(1==E.bOverrideAttendanceDoc&&40089==parseInt(E.DPCDocumentName.SelectedValue)&&(_=fe.filter(Ee=>Ee.dcCCNID51==v[0].NodeID&&new Date(Ee.dcAlpha39).ToString("dd MMM yyy")==new Date(E.dgv.Table[ie].PunchDate).ToString("dd MMM yyy")),null!=_&&_.length>0&&(K=!0)),1==K){let Te={value:new Date};O.ScreenObject.OnDocPrefixChanged("lostFocus",0,parseInt(_[0].DocID),Te,!1),O._Ddate=Te.value,U=0}else U++,te=O.ScreenObject.GridDataObj.NewRow(),O.ScreenObject.GridData.push(te);let Ce,Y;if(O.ScreenObject.GridDataColumns.Contains("dcCCNID51Code")&&(O.ScreenObject.GridData[U].dcCCNID51Code=v[0].Code),O.ScreenObject.GridData[U].dcCCNID51_key=v[0].NodeID,O.ScreenObject.GridData[U].dcCCNID51=v[0].Name,O.FillDefaultProd(O.ScreenObject.GridData[U],"dcCCNID51"),O.Celleditend(O.ScreenObject.GridData[U],"dcCCNID51",0),E.bUseROffTimings?(Ce="ROffStartTime",Y="ROffEndTime"):(Ce="ActStartTime",Y="ActEndTime"),40089==parseInt(E.DPCDocumentName.SelectedValue)||40090==parseInt(E.DPCDocumentName.SelectedValue))if(1==K&&40089==parseInt(E.DPCDocumentName.SelectedValue))if(null!=_[0].cdcAlpha1&&null!=_[0].cdcAlpha1&&""!=_[0].cdcAlpha1.toString()){let Ee=new Date(_[0].cdcAlpha1);(null==_[0].cdcAlpha3||null==_[0].cdcAlpha3||""==W.J0.String(_[0].cdcAlpha3)||null!=_[0].cdcAlpha4&&null!=_[0].cdcAlpha4&&""!=_[0].cdcAlpha4.toString()&&Ee.AddHours(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]).getHours()).AddMinutes(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]).getMinutes())>new Date(_[0].cdcAlpha4))&&(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce])>W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y])?(O.ScreenObject.GridData[U].dcAlpha3=new Date(E.dgv.Table[ie].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha3_Key=new Date(E.dgv.Table[ie].PunchDate).AddDays(1)):(O.ScreenObject.GridData[U].dcAlpha3=new Date(E.dgv.Table[ie].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha3_Key=new Date(E.dgv.Table[ie].PunchDate)),O.ScreenObject.GridData[U].dcAlpha4=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]).ToString("HH:mm"),O.ScreenObject.GridData[U].dcAlpha4_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]),O.Celleditend(O.ScreenObject.GridData[U],"dcAlpha4",parseInt(E.DPCDocumentName.SelectedValue)))}else null!=_[0].cdcAlpha3&&null!=_[0].cdcAlpha3&&""!=_[0].cdcAlpha3.toString()&&(null==_[0].cdcAlpha1||null==_[0].cdcAlpha1||""==_[0].cdcAlpha1.toString())&&(O.ScreenObject.GridData[U].dcAlpha1=new Date(E.dgv.Table[ie].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha1_Key=new Date(E.dgv.Table[ie].PunchDate),O.ScreenObject.GridData[U].dcAlpha2=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce]).ToString("HH:mm"),O.ScreenObject.GridData[U].dcAlpha2_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce]),O.Celleditend(O.ScreenObject.GridData[U],"dcAlpha2",parseInt(E.DPCDocumentName.SelectedValue)));else O.ScreenObject.GridData[U].dcAlpha1=new Date(E.dgv.Table[ie].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha1_Key=new Date(E.dgv.Table[ie].PunchDate),40089==parseInt(E.DPCDocumentName.SelectedValue)&&(O.ScreenObject.GridData[U].dcAlpha39=new Date(E.dgv.Table[ie].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha39_Key=new Date(E.dgv.Table[ie].PunchDate)),S=E.dsbEmps.Tables[1].filter(Ee=>Ee.Code==E.dgv.Table[ie].ShiftCode),null!=S&&S.length>0&&(O.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(O.ScreenObject.GridData[U].dcCCNID73Code=S[0].Code),O.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(O.ScreenObject.GridData[U].dcCCNID73=S[0].Name),O.ScreenObject.GridData[U].dcCCNID73_Key=S[0].NodeID,O.Celleditend(O.ScreenObject.GridData[U],"dcCCNID73",0)),O.ScreenObject.GridData[U].dcAlpha2=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce]).ToString("HH:mm"),O.ScreenObject.GridData[U].dcAlpha2_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce]),E.bOverrideAttendanceDoc&&40089==parseInt(E.DPCDocumentName.SelectedValue)&&W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce])==W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y])||(W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce])>W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y])?(O.ScreenObject.GridData[U].dcAlpha3=new Date(E.dgv.Table[ie].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha3_Key=new Date(E.dgv.Table[ie].PunchDate).AddDays(1)):(O.ScreenObject.GridData[U].dcAlpha3=new Date(E.dgv.Table[ie].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha3_Key=new Date(E.dgv.Table[ie].PunchDate)),O.ScreenObject.GridData[U].dcAlpha4=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]).ToString("HH:mm"),O.ScreenObject.GridData[U].dcAlpha4_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]),O.Celleditend(O.ScreenObject.GridData[U],"dcAlpha4",parseInt(E.DPCDocumentName.SelectedValue)));else if(40067==parseInt(E.DPCDocumentName.SelectedValue)||40087==parseInt(E.DPCDocumentName.SelectedValue)){if(O.ScreenObject.GridData[U].dcAlpha1=new Date(E.dgv.Table[ie].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),O.ScreenObject.GridData[U].dcAlpha1_Key=new Date(E.dgv.Table[ie].PunchDate),O.Celleditend(O.ScreenObject.GridData[U],"dcAlpha1",parseInt(E.DPCDocumentName.SelectedValue)),S=E.dsbEmps.Tables[1].filter(Ee=>Ee.Code==E.dgv.Table[ie].ShiftCode),null!=S&&S.length>0&&(O.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(O.ScreenObject.GridData[U].dcCCNID73Code=S[0].Code),O.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(O.ScreenObject.GridData[U].dcCCNID73=S[0].Name),O.ScreenObject.GridData[U].dcCCNID73_Key=S[0].NodeID,O.Celleditend(O.ScreenObject.GridData[U],"dcCCNID73",0)),O.ScreenObject.GridData[U].dcAlpha2=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce]).ToString("HH:mm"),O.ScreenObject.GridData[U].dcAlpha2_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Ce]),O.ScreenObject.GridData[U].dcAlpha3=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]).ToString("HH:mm"),O.ScreenObject.GridData[U].dcAlpha3_Key=W.J0.ParseDate(I.ToString("dd/MMM/yyyy")+" "+E.dgv.Table[ie][Y]),E.bDocColumns){var j;if(E.dgv.TableColumns.Contains("IN Device No"))if(null!=(p=O.ScreenObject.ColumnSource.FirstOrDefault(Te=>Te.DisplayMember==E.dgvDocColumns.Table[0].Destination.toString()))&&O.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(O.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{B=E.dsbDims.Tables[0].Select("CODE='"+E.dgv.Table[ie]["IN Device No"]+"' AND CostcenterID="+(5e4+parseInt(p.DisplayMember.Replace("dcCCNID","")))),null!=B&&B.length>0&&(O.ScreenObject.GridData[U][p.DisplayMember+"_Key"]=B[0].NODEID)}catch{O.ScreenObject.GridData[U][p.DisplayMember]=E.dgv.Table[ie]["IN Device No"]}}else O.ScreenObject.GridData[U][p.DisplayMember]=E.dgv.Table[ie]["IN Device No"];else if(null==(j=O.ScreenObject._TextFields.find(Le=>Le.DBColumnName.toString()==E.dgvDocColumns.Table[0].Destination.toString()))&&(j=O.ScreenObject._CCFields.find(Le=>Le.DBColumnName.toString()==E.dgvDocColumns.Table[0].Destination.toString())),null==j&&(j=O.ScreenObject.HeaderFields.find(Le=>Le.DBColumnName.toString()==E.dgvDocColumns.Table[0].Destination.toString())),null!=j){let Le=E.dgv.Table[ie]["IN Device No"].toString();O.ScreenObject.fillcontrolValue(j,Le)}if(E.dgv.TableColumns.Contains("OUT Device No"))if(null!=(p=O.ScreenObject.ColumnSource.FirstOrDefault(Te=>Te.DisplayMember==E.dgvDocColumns.Table[1].Destination.toString()))&&O.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(O.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{B=E.dsbDims.Tables[0].Select("CODE='"+E.dgv.Table[ie]["OUT Device No"]+"' AND CostcenterID="+(5e4+parseInt(p.DisplayMember.Replace("dcCCNID","")))),null!=B&&B.length>0&&(O.ScreenObject.GridData[U][p.DisplayMember+"_Key"]=B[0].NODEID)}catch{O.ScreenObject.GridData[U][p.DisplayMember]=E.dgv.Table[ie]["OUT Device No"]}}else O.ScreenObject.GridData[U][p.DisplayMember]=E.dgv.Table[ie]["OUT Device No"];else if(null==(j=O.ScreenObject._TextFields.find(Le=>Le.DBColumnName.toString()==E.dgvDocColumns.Table[1].Destination.toString()))&&(j=O.ScreenObject._CCFields.find(Le=>Le.DBColumnName.toString()==E.dgvDocColumns.Table[1].Destination.toString())),null==j&&(j=O.ScreenObject.HeaderFields.find(Le=>Le.DBColumnName.toString()==E.dgvDocColumns.Table[1].Destination.toString())),null!=j){let Le=E.dgv.Table[ie]["OUT Device No"].toString();O.ScreenObject.fillcontrolValue(j,Le)}}var p;E.bDirection&&null!=(p=O.ScreenObject.ColumnSource.FirstOrDefault(Te=>"LineNarration"==Te.DisplayMember))&&O.ScreenObject.GridDataColumns.Contains(p.DisplayMember)&&(O.ScreenObject.GridData[U][p.DisplayMember]=E.dgv.Table[ie].Remarks),O.Celleditend(O.ScreenObject.GridData[U],"dcAlpha3",parseInt(E.DPCDocumentName.SelectedValue))}O.CalculateTotals(O.ScreenObject.GridData[U],!1)}else E.dgv.Table[ie].Remarks="Employee Code - '"+J+"' not found in RevenU / Relieved "}if(""!=F.Trim()&&(O.DisplayMessage=F,O.MessageVisibility=!0),O.UpdateFooter=!0,O.RefreshGrid=!0,G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,z.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData)||E.IsAutoPost){let ie=yield O.SaveInventoryDocument("Save",!0);O.sbBioErrLogs.length>0&&(E.sbPostErrLog+=O.sbBioErrLogs,O.sbBioErrLogs=""),ie||(oe=O.DisplayMessage,E.sbPostErrLog+='<Row Error="'+oe+'"></Row>')}else{const{AddEditDocumentComponent:ie}=yield Promise.all([n.e(7996),n.e(2881),n.e(8405),n.e(895),n.e(9702),n.e(2076),n.e(9503)]).then(n.bind(n,30786));var T;null!=(T=O.ScreenObject._StaticFields.find(Y=>"CommonNarration"==Y.DBColumnName))&&(T.SetFocus=!0);let Ce={};Object.assign(Ce,{component:ie,params:{obj:O}}),G.d.page.addNewTab(Ce)}O.IsGetAllEmployees=!1,O.dsAllEmployeeData=null,E.MsgVisibility=!1}if(G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,z.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData))if(E.sbPostErrLog.length>0){let U="";E.ListVisbility=!0,E.sbPostErrLog="<FailedRecord>"+E.sbPostErrLog+"</FailedRecord>",E.dgvFailedRecord.Clear();let ie=new W.VB;ie.LoadXml(E.sbPostErrLog.toString());let J=ie.SelectSingleNode("FailedRecord");if(null!=J){let Ce;if(J.childNodes.length>0)for(let Y=0;Y<J.childNodes.length;Y++)Ce=E.dgvFailedRecord.NewRow(),E.dgvFailedRecord.addRow(Ce),null!=J.childNodes[Y].attributes.DADate&&(E.dgvFailedRecord.Table[Y].AttendanceDate=J.childNodes[Y].attributes.DADate.value),null!=J.childNodes[Y].attributes.Code&&(E.dgvFailedRecord.Table[Y].Code=J.childNodes[Y].attributes.Code.value),null!=J.childNodes[Y].attributes.Name&&(E.dgvFailedRecord.Table[Y].Name=J.childNodes[Y].attributes.Name.value),E.dgvFailedRecord.Table[Y].Message=J.childNodes[Y].attributes.Error.value,U+=J.childNodes[Y].attributes.Error.value}E.IsAutoPost&&W.J0.WriteErrorsToFile(U,"BiometricDocPostErrors"),E.DisplayMessage=O.ScreenObject.Preferences.ContainsKey("SkipEmployeesWhoGetErrorsWhileSaving")&&""!=O.ScreenObject.Preferences.SkipEmployeesWhoGetErrorsWhileSaving&&(0,z.yG0)(O.ScreenObject.Preferences.SkipEmployeesWhoGetErrorsWhileSaving)?"Posted With Error":"Erros occurred while Posting",E.MessageVisibility=!0}else E.ListVisbility=!1,E.DisplayMessage="Posted Successfully.",E.MessageVisibility=!0}})()}static GetAttXML(E){let b="",p="",j="",T="",I="";return j+='<Alpha Query="',j+=" dcAlpha1='"+E.CheckinDate+"',dcAlpha2='"+E.CheckinTime+"',dcAlpha3='"+E.CheckoutDate+"',dcAlpha4='"+E.CheckoutTime+"',dcAlpha5='"+E.TotalTime+"',dcAlpha39='"+E.DailyPayrollDate+"',dcAlpha6='-1',dcAlpha7='-1',dcAlpha8='Desktop',dcAlpha16='-1',dcAlpha17='-1',dcAlpha18='Desktop',dcAlpha32='Manual',dcAlpha33='Normal',dcAlpha34='Normal' ",j+='" ></Alpha>',I="",T+='<CostCenters Query="',I+=" dcCCNID51="+E.EmpNode+",",I+=" dcCCNID73="+E.ShiftNode+",",I.length>0&&(T+=I),T+='" ></CostCenters>',p+='" DocDetailsID="',p+='" ProductID="'+this.DefProdID+'" Quantity="0',p+='" Unit="1" UOMConversion="1" UOMConvertedQty="0',p+='" Rate="0" Gross="0" IsQtyIgnored="1" AverageRate="0',p+='" StockValue="0" StockValueFC="0" RefNO="',p+='" BillDate="'+new Date,p+='" CurrencyID="1" ExchangeRate="1',p+='" DebitAccount="'+this.sDrAccount+'" CreditAccount="'+this.sCrAccount,p+='" CommonNarratio',b+="<Row>",b+="<AccountsXML></AccountsXML>",b+='<Transactions DocSeqNo="1" VoucherType="11',b+='" LinkedInvDocDetailsID="0" LinkedFieldName="',b+='" LineNarration="',b+=p.toString()+'" ></Transactions>',b+=j.toString(),b+=T.toString(),b+="<EXTRAXML></EXTRAXML>",b+="</Row>",b.toString()}static CalculateTotalTime(E,b,p,j){if(b=new Date(E.getFullYear(),E.iMonth(),E.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),(j=new Date(p.getFullYear(),p.iMonth(),p.getDate(),j.getHours(),j.getMinutes(),j.getSeconds()))<b)return"00.00";let T=j.Subtract(b);return T.Hours<0&&(T=T.add(R.FromDays(1))),(24*T.Days+T.Hours).PrefixZero(2)+"."+T.Minutes.PrefixZero(2)}}return V})();const he=1e3,k=6e4,me=60*k,le=24*me;class R{static interval(ge,E){if(Number.isNaN(ge))throw new Error("value can't be NaN");const p=R.round(ge*E+(ge>=0?.5:-.5));return(p>R.maxValue.totalMilliseconds||p<R.minValue.totalMilliseconds)&&console.log("TimeSpanTooLong"),new R(p)}static round(ge){return ge<0?Math.ceil(ge):ge>0?Math.floor(ge):0}static timeToMilliseconds(ge,E,b){const p=3600*ge+60*E+b;return(p>R.maxValue.TotalSeconds||p<R.minValue.TotalSeconds)&&console.log("TimeSpanTooLong"),p*he}static get zero(){return new R(0)}static get maxValue(){return new R(Number.MAX_SAFE_INTEGER)}static get minValue(){return new R(Number.MIN_SAFE_INTEGER)}static FromDays(ge){return R.interval(ge,le)}static FromHours(ge){return R.interval(ge,me)}static fromMilliseconds(ge){return R.interval(ge,1)}static fromMinutes(ge){return R.interval(ge,k)}static fromSeconds(ge){return R.interval(ge,he)}static fromTime(ge,E,b,p,j){return null!=j?this.fromTimeStartingFromDays(ge,E,b,p,j):this.fromTimeStartingFromHours(ge,E,b)}static fromTimeStartingFromHours(ge,E,b){const p=R.timeToMilliseconds(ge,E,b);return new R(p)}static fromTimeStartingFromDays(ge,E,b,p,j){const T=ge*le+E*me+b*k+p*he+j;return(T>R.maxValue.totalMilliseconds||T<R.minValue.totalMilliseconds)&&console.log("TimeSpanTooLong"),new R(T)}constructor(ge=0){this._millis=ge}get Days(){return R.round(this._millis/le)}get Hours(){return R.round(this._millis/me%24)}get Minutes(){return R.round(this._millis/k%60)}get Seconds(){return R.round(this._millis/he%60)}get Milliseconds(){return R.round(this._millis%1e3)}get TotalDays(){return this._millis/le}get TotalHours(){return this._millis/me}get TotalMinutes(){return this._millis/k}get TotalSeconds(){return this._millis/he}get totalMilliseconds(){return this._millis}add(ge){return new R(this._millis+ge.totalMilliseconds)}subtract(ge){return new R(this._millis-ge.totalMilliseconds)}}},61606:function(ze,Oe,n){var x,X,W,ne,z,C;ze.exports=(C=n(95275),n(92787),X=(x=C).lib.WordArray,z=(W=x.algo).SHA224=(ne=W.SHA256).extend({_doReset:function(){this._hash=new X.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var Z=ne._doFinalize.call(this);return Z.sigBytes-=4,Z}}),x.SHA224=ne._createHelper(z),x.HmacSHA224=ne._createHmacHelper(z),C.SHA224)},61687:function(ze,Oe,n){var x,G,X,W,ne,z,Z,C;ze.exports=(C=n(95275),n(46882),n(43266),X=(G=(x=C).x64).Word,W=G.WordArray,Z=(ne=x.algo).SHA384=(z=ne.SHA512).extend({_doReset:function(){this._hash=new W.init([new X.init(3418070365,3238371032),new X.init(1654270250,914150663),new X.init(2438529370,812702999),new X.init(355462360,4144912697),new X.init(1731405415,4290775857),new X.init(2394180231,1750603025),new X.init(3675008525,1694076839),new X.init(1203062813,3204075428)])},_doFinalize:function(){var w=z._doFinalize.call(this);return w.sigBytes-=16,w}}),x.SHA384=z._createHelper(Z),x.HmacSHA384=z._createHmacHelper(Z),C.SHA384)},62031:(ze,Oe,n)=>{"use strict";n.d(Oe,{t:()=>x});var C=n(43794);class x extends C.B{constructor(X){super(),this._value=X}get value(){return this.getValue()}_subscribe(X){const W=super._subscribe(X);return!W.closed&&X.next(this._value),W}getValue(){const{hasError:X,thrownError:W,_value:ne}=this;if(X)throw W;return this._throwIfClosed(),ne}next(X){super.next(this._value=X)}}},62068:(ze,Oe,n)=>{"use strict";n.d(Oe,{q:()=>G});var C=n(8510);class x{constructor(W,ne=x.now){this.schedulerActionCtor=W,this.now=ne}schedule(W,ne=0,z){return new this.schedulerActionCtor(this,W).schedule(z,ne)}}x.now=C.U.now;class G extends x{constructor(W,ne=x.now){super(W,ne),this.actions=[],this._active=!1}flush(W){const{actions:ne}=this;if(this._active)return void ne.push(W);let z;this._active=!0;do{if(z=W.execute(W.state,W.delay))break}while(W=ne.shift());if(this._active=!1,z){for(;W=ne.shift();)W.unsubscribe();throw z}}}},62969:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(21272),n(1236),n(26528),n(90033),function(){var x=C,X=x.lib.StreamCipher,W=x.algo,ne=W.RC4=X.extend({_doReset:function(){for(var w=this._key,he=w.words,k=w.sigBytes,me=this._S=[],le=0;le<256;le++)me[le]=le;le=0;for(var R=0;le<256;le++){var V=le%k,E=me[le];me[le]=me[R=(R+me[le]+(he[V>>>2]>>>24-V%4*8&255))%256],me[R]=E}this._i=this._j=0},_doProcessBlock:function(w,he){w[he]^=z.call(this)},keySize:8,ivSize:0});function z(){for(var w=this._S,he=this._i,k=this._j,me=0,le=0;le<4;le++){var R=w[he=(he+1)%256];w[he]=w[k=(k+w[he])%256],w[k]=R,me|=w[(w[he]+w[k])%256]<<24-8*le}return this._i=he,this._j=k,me}x.RC4=X._createHelper(ne);var Z=W.RC4Drop=ne.extend({cfg:ne.cfg.extend({drop:192}),_doReset:function(){ne._doReset.call(this);for(var w=this.cfg.drop;w>0;w--)z.call(this)}});x.RC4Drop=X._createHelper(Z)}(),C.RC4)},63322:(ze,Oe,n)=>{"use strict";n.d(Oe,{Q:()=>X});var C=n(67606),x=n(17593),G=n(31979);function X(W,ne=0){return(0,x.N)((z,Z)=>{z.subscribe((0,G._)(Z,w=>(0,C.N)(Z,W,()=>Z.next(w),ne),()=>(0,C.N)(Z,W,()=>Z.complete(),ne),w=>(0,C.N)(Z,W,()=>Z.error(w),ne)))})}},64319:function(ze,Oe,n){var x,G,C;ze.exports=(C=n(95275),n(90033),C.mode.OFB=(G=(x=C.lib.BlockCipherMode.extend()).Encryptor=x.extend({processBlock:function(X,W){var ne=this._cipher,z=ne.blockSize,Z=this._iv,w=this._keystream;Z&&(w=this._keystream=Z.slice(0),this._iv=void 0),ne.encryptBlock(w,0);for(var he=0;he<z;he++)X[W+he]^=w[he]}}),x.Decryptor=G,x),C.mode.OFB)},65357:function(ze,Oe,n){var x,G,X,W,ne,Z,w,C;ze.exports=(C=n(95275),n(92787),n(15487),W=(G=(x=C).lib).WordArray,Z=(ne=x.algo).HMAC,w=ne.PBKDF2=(X=G.Base).extend({cfg:X.extend({keySize:4,hasher:ne.SHA256,iterations:25e4}),init:function(he){this.cfg=this.cfg.extend(he)},compute:function(he,k){for(var me=this.cfg,le=Z.create(me.hasher,he),R=W.create(),V=W.create([1]),ge=R.words,E=V.words,b=me.keySize,p=me.iterations;ge.length<b;){var j=le.update(k).finalize(V);le.reset();for(var T=j.words,I=T.length,oe=j,F=1;F<p;F++){oe=le.finalize(oe),le.reset();for(var N=oe.words,te=0;te<I;te++)T[te]^=N[te]}R.concat(j),E[0]++}return R.sigBytes=4*b,R}}),x.PBKDF2=function(he,k,me){return w.create(me).compute(he,k)},C.PBKDF2)},67606:(ze,Oe,n)=>{"use strict";function C(x,G,X,W=0,ne=!1){const z=G.schedule(function(){X(),ne?x.add(this.schedule(null,W)):this.unsubscribe()},W);if(x.add(z),!ne)return z}n.d(Oe,{N:()=>C})},67650:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(21272),n(1236),n(26528),n(90033),function(){var x=C,X=x.lib.BlockCipher;const z=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Z=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var w={pbox:[],sbox:[]};function he(V,ge){let T=V.sbox[0][ge>>24&255]+V.sbox[1][ge>>16&255];return T^=V.sbox[2][ge>>8&255],T+=V.sbox[3][255&ge],T}function k(V,ge,E){let j,b=ge,p=E;for(let T=0;T<16;++T)b^=V.pbox[T],p=he(V,b)^p,j=b,b=p,p=j;return j=b,b=p,p=j,p^=V.pbox[16],b^=V.pbox[17],{left:b,right:p}}var R=x.algo.Blowfish=X.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var V=this._keyPriorReset=this._key;!function le(V,ge,E){for(let I=0;I<4;I++){V.sbox[I]=[];for(let oe=0;oe<256;oe++)V.sbox[I][oe]=Z[I][oe]}let b=0;for(let I=0;I<18;I++)V.pbox[I]=z[I]^ge[b],b++,b>=E&&(b=0);let p=0,j=0,T=0;for(let I=0;I<18;I+=2)T=k(V,p,j),p=T.left,j=T.right,V.pbox[I]=p,V.pbox[I+1]=j;for(let I=0;I<4;I++)for(let oe=0;oe<256;oe+=2)T=k(V,p,j),p=T.left,j=T.right,V.sbox[I][oe]=p,V.sbox[I][oe+1]=j;return!0}(w,V.words,V.sigBytes/4)}},encryptBlock:function(V,ge){var E=k(w,V[ge],V[ge+1]);V[ge]=E.left,V[ge+1]=E.right},decryptBlock:function(V,ge){var E=function me(V,ge,E){let j,b=ge,p=E;for(let T=17;T>1;--T)b^=V.pbox[T],p=he(V,b)^p,j=b,b=p,p=j;return j=b,b=p,p=j,p^=V.pbox[1],b^=V.pbox[0],{left:b,right:p}}(w,V[ge],V[ge+1]);V[ge]=E.left,V[ge+1]=E.right},blockSize:2,keySize:4,ivSize:2});x.Blowfish=X._createHelper(R)}(),C.Blowfish)},67951:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.pad.AnsiX923={pad:function(x,G){var X=x.sigBytes,W=4*G,ne=W-X%W,z=X+ne-1;x.clamp(),x.words[z>>>2]|=ne<<24-z%4*8,x.sigBytes+=ne},unpad:function(x){x.sigBytes-=255&x.words[x.sigBytes-1>>>2]}},C.pad.Ansix923)},69390:(ze,Oe,n)=>{"use strict";n.d(Oe,{P:()=>C});class C{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(G,X,W,ne,z=""){const Z=Array.isArray(X)?X:[X];if(G?.forEach)G.forEach(w=>{for(const he of Z)w.addEventListener(he,W,ne),this._boundedEvents.push({element:w,eventName:he,listener:W,groupName:z})});else if(G)for(const w of Z)G.addEventListener(w,W,ne),this._boundedEvents.push({element:G,eventName:w,listener:W,groupName:z})}unbind(G,X,W){const ne=Array.isArray(G)?G:[G],z=Array.isArray(X)?X:[X];for(const Z of z)for(const w of ne)"function"==typeof w?.removeEventListener&&w.removeEventListener(Z,W)}unbindByEventName(G,X){const W=this._boundedEvents.find(ne=>ne.element===G&&ne.eventName===X);W&&this.unbind(W.element,W.eventName,W.listener)}unbindAll(G){if(G){const X=Array.isArray(G)?G:[G];for(let W=this._boundedEvents.length-1;W>=0;--W){const ne=this._boundedEvents[W];if(X.some(z=>z===ne.groupName)){const{element:z,eventName:Z,listener:w}=ne;this.unbind(z,Z,w),this._boundedEvents.splice(W,1)}}}else for(;this._boundedEvents.length>0;){const X=this._boundedEvents.pop(),{element:W,eventName:ne,listener:z}=X;this.unbind(W,ne,z)}}}},69822:(ze,Oe,n)=>{"use strict";n.d(Oe,{X:()=>C});const C=x=>x&&"number"==typeof x.length&&"function"!=typeof x},70088:(ze,Oe,n)=>{"use strict";n.d(Oe,{Ms:()=>ge,vU:()=>me});var C=n(20452),x=n(40740),G=n(18645),X=n(22953),W=n(7724);const ne=w("C",void 0,void 0);function w(T,I,oe){return{kind:T,value:I,error:oe}}var he=n(96889),k=n(27405);class me extends x.yU{constructor(I){super(),this.isStopped=!1,I?(this.destination=I,(0,x.Uv)(I)&&I.add(this)):this.destination=j}static create(I,oe,F){return new ge(I,oe,F)}next(I){this.isStopped?p(function Z(T){return w("N",T,void 0)}(I),this):this._next(I)}error(I){this.isStopped?p(function z(T){return w("E",void 0,T)}(I),this):(this.isStopped=!0,this._error(I))}complete(){this.isStopped?p(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(I){this.destination.next(I)}_error(I){try{this.destination.error(I)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const le=Function.prototype.bind;function R(T,I){return le.call(T,I)}class V{constructor(I){this.partialObserver=I}next(I){const{partialObserver:oe}=this;if(oe.next)try{oe.next(I)}catch(F){E(F)}}error(I){const{partialObserver:oe}=this;if(oe.error)try{oe.error(I)}catch(F){E(F)}else E(I)}complete(){const{partialObserver:I}=this;if(I.complete)try{I.complete()}catch(oe){E(oe)}}}class ge extends me{constructor(I,oe,F){let N;if(super(),(0,C.T)(I)||!I)N={next:I??void 0,error:oe??void 0,complete:F??void 0};else{let te;this&&G.$.useDeprecatedNextContext?(te=Object.create(I),te.unsubscribe=()=>this.unsubscribe(),N={next:I.next&&R(I.next,te),error:I.error&&R(I.error,te),complete:I.complete&&R(I.complete,te)}):N=I}this.destination=new V(N)}}function E(T){G.$.useDeprecatedSynchronousErrorHandling?(0,k.l)(T):(0,X.m)(T)}function p(T,I){const{onStoppedNotification:oe}=G.$;oe&&he.f.setTimeout(()=>oe(T,I))}const j={closed:!0,next:W.l,error:function b(T){throw T},complete:W.l}},70807:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(21272),n(1236),n(26528),n(90033),function(){var x=C,X=x.lib.BlockCipher,W=x.algo,ne=[],z=[],Z=[],w=[],he=[],k=[],me=[],le=[],R=[],V=[];!function(){for(var b=[],p=0;p<256;p++)b[p]=p<128?p<<1:p<<1^283;var j=0,T=0;for(p=0;p<256;p++){var I=T^T<<1^T<<2^T<<3^T<<4;ne[j]=I=I>>>8^255&I^99,z[I]=j;var te,oe=b[j],F=b[oe],N=b[F];Z[j]=(te=257*b[I]^16843008*I)<<24|te>>>8,w[j]=te<<16|te>>>16,he[j]=te<<8|te>>>24,k[j]=te,me[I]=(te=16843009*N^65537*F^257*oe^16843008*j)<<24|te>>>8,le[I]=te<<16|te>>>16,R[I]=te<<8|te>>>24,V[I]=te,j?(j=oe^b[b[b[N^oe]]],T^=b[b[T]]):j=T=1}}();var ge=[0,1,2,4,8,16,32,64,128,27,54],E=W.AES=X.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,j=p.words,T=p.sigBytes/4,oe=4*((this._nRounds=T+6)+1),F=this._keySchedule=[],N=0;N<oe;N++)N<T?F[N]=j[N]:(b=F[N-1],N%T?T>6&&N%T==4&&(b=ne[b>>>24]<<24|ne[b>>>16&255]<<16|ne[b>>>8&255]<<8|ne[255&b]):(b=ne[(b=b<<8|b>>>24)>>>24]<<24|ne[b>>>16&255]<<16|ne[b>>>8&255]<<8|ne[255&b],b^=ge[N/T|0]<<24),F[N]=F[N-T]^b);for(var te=this._invKeySchedule=[],v=0;v<oe;v++){if(N=oe-v,v%4)var b=F[N];else b=F[N-4];te[v]=v<4||N<=4?b:me[ne[b>>>24]]^le[ne[b>>>16&255]]^R[ne[b>>>8&255]]^V[ne[255&b]]}}},encryptBlock:function(b,p){this._doCryptBlock(b,p,this._keySchedule,Z,w,he,k,ne)},decryptBlock:function(b,p){var j=b[p+1];b[p+1]=b[p+3],b[p+3]=j,this._doCryptBlock(b,p,this._invKeySchedule,me,le,R,V,z),j=b[p+1],b[p+1]=b[p+3],b[p+3]=j},_doCryptBlock:function(b,p,j,T,I,oe,F,N){for(var te=this._nRounds,v=b[p]^j[0],S=b[p+1]^j[1],B=b[p+2]^j[2],O=b[p+3]^j[3],ae=4,se=1;se<te;se++){var fe=T[v>>>24]^I[S>>>16&255]^oe[B>>>8&255]^F[255&O]^j[ae++],_=T[S>>>24]^I[B>>>16&255]^oe[O>>>8&255]^F[255&v]^j[ae++],K=T[B>>>24]^I[O>>>16&255]^oe[v>>>8&255]^F[255&S]^j[ae++],ee=T[O>>>24]^I[v>>>16&255]^oe[S>>>8&255]^F[255&B]^j[ae++];v=fe,S=_,B=K,O=ee}fe=(N[v>>>24]<<24|N[S>>>16&255]<<16|N[B>>>8&255]<<8|N[255&O])^j[ae++],_=(N[S>>>24]<<24|N[B>>>16&255]<<16|N[O>>>8&255]<<8|N[255&v])^j[ae++],K=(N[B>>>24]<<24|N[O>>>16&255]<<16|N[v>>>8&255]<<8|N[255&S])^j[ae++],ee=(N[O>>>24]<<24|N[v>>>16&255]<<16|N[S>>>8&255]<<8|N[255&B])^j[ae++],b[p]=fe,b[p+1]=_,b[p+2]=K,b[p+3]=ee},keySize:8});x.AES=X._createHelper(E)}(),C.AES)},72858:()=>{},72972:(ze,Oe,n)=>{"use strict";function C(x){return new TypeError(`You provided ${null!==x&&"object"==typeof x?"an invalid object":`'${x}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}n.d(Oe,{L:()=>C})},73667:(ze,Oe,n)=>{"use strict";n.d(Oe,{Q:()=>le,Sm:()=>ge,Vw:()=>Z,aZ:()=>E,hb:()=>R,hj:()=>w,ig:()=>ne,kB:()=>V,om:()=>k,qj:()=>z,rb:()=>W});var C=n(96598),x=n(43794),G=n(81742);let X=null;function W(){return X}function ne(I){X??=I}class z{}let Z=(()=>{class I{historyGo(F){throw new Error("")}static \u0275fac=function(N){return new(N||I)};static \u0275prov=C.jDH({token:I,factory:()=>(0,C.WQX)(he),providedIn:"platform"})}return I})();const w=new C.nKC("");let he=(()=>{class I extends Z{_location;_history;_doc=(0,C.WQX)(G.q);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(F){const N=W().getGlobalEventTarget(this._doc,"window");return N.addEventListener("popstate",F,!1),()=>N.removeEventListener("popstate",F)}onHashChange(F){const N=W().getGlobalEventTarget(this._doc,"window");return N.addEventListener("hashchange",F,!1),()=>N.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,N,te){this._history.pushState(F,N,te)}replaceState(F,N,te){this._history.replaceState(F,N,te)}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}static \u0275fac=function(N){return new(N||I)};static \u0275prov=C.jDH({token:I,factory:()=>new I,providedIn:"platform"})}return I})();function k(I,oe){return I?oe?I.endsWith("/")?oe.startsWith("/")?I+oe.slice(1):I+oe:oe.startsWith("/")?I+oe:`${I}/${oe}`:I:oe}function me(I){const oe=I.search(/#|\?|$/);return"/"===I[oe-1]?I.slice(0,oe-1)+I.slice(oe):I}function le(I){return I&&"?"!==I[0]?`?${I}`:I}let R=(()=>{class I{historyGo(F){throw new Error("")}static \u0275fac=function(N){return new(N||I)};static \u0275prov=C.jDH({token:I,factory:()=>(0,C.WQX)(ge),providedIn:"root"})}return I})();const V=new C.nKC("");let ge=(()=>{class I extends R{_platformLocation;_baseHref;_removeListenerFns=[];constructor(F,N){super(),this._platformLocation=F,this._baseHref=N??this._platformLocation.getBaseHrefFromDOM()??(0,C.WQX)(G.q).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return k(this._baseHref,F)}path(F=!1){const N=this._platformLocation.pathname+le(this._platformLocation.search),te=this._platformLocation.hash;return te&&F?`${N}${te}`:N}pushState(F,N,te,v){const S=this.prepareExternalUrl(te+le(v));this._platformLocation.pushState(F,N,S)}replaceState(F,N,te,v){const S=this.prepareExternalUrl(te+le(v));this._platformLocation.replaceState(F,N,S)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static \u0275fac=function(N){return new(N||I)(C.KVO(Z),C.KVO(V,8))};static \u0275prov=C.jDH({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),E=(()=>{class I{_subject=new x.B;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(F){this._locationStrategy=F;const N=this._locationStrategy.getBaseHref();this._basePath=function T(I){if(new RegExp("^(https?:)?//").test(I)){const[,F]=I.split(/\/\/[^\/]+/);return F}return I}(me(j(N))),this._locationStrategy.onPopState(te=>{this._subject.next({url:this.path(!0),pop:!0,state:te.state,type:te.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,N=""){return this.path()==this.normalize(F+le(N))}normalize(F){return I.stripTrailingSlash(function p(I,oe){if(!I||!oe.startsWith(I))return oe;const F=oe.substring(I.length);return""===F||["/",";","?","#"].includes(F[0])?F:oe}(this._basePath,j(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,N="",te=null){this._locationStrategy.pushState(te,"",F,N),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+le(N)),te)}replaceState(F,N="",te=null){this._locationStrategy.replaceState(te,"",F,N),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+le(N)),te)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription??=this.subscribe(N=>{this._notifyUrlChangeListeners(N.url,N.state)}),()=>{const N=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice(N,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",N){this._urlChangeListeners.forEach(te=>te(F,N))}subscribe(F,N,te){return this._subject.subscribe({next:F,error:N??void 0,complete:te??void 0})}static normalizeQueryParams=le;static joinWithSlash=k;static stripTrailingSlash=me;static \u0275fac=function(N){return new(N||I)(C.KVO(R))};static \u0275prov=C.jDH({token:I,factory:()=>function b(){return new E((0,C.KVO)(R))}(),providedIn:"root"})}return I})();function j(I){return I.replace(/\/index.html$/,"")}},73973:(ze,Oe,n)=>{"use strict";n.d(Oe,{T:()=>G});var C=n(17593),x=n(31979);function G(X,W){return(0,C.N)((ne,z)=>{let Z=0;ne.subscribe((0,x._)(z,w=>{z.next(X.call(W,w,Z++))}))})}},74399:(ze,Oe,n)=>{"use strict";n.d(Oe,{R:()=>W});var C=n(40740);class x extends C.yU{constructor(z,Z){super()}schedule(z,Z=0){return this}}const G={setInterval(ne,z,...Z){const{delegate:w}=G;return w?.setInterval?w.setInterval(ne,z,...Z):setInterval(ne,z,...Z)},clearInterval(ne){const{delegate:z}=G;return(z?.clearInterval||clearInterval)(ne)},delegate:void 0};var X=n(35527);class W extends x{constructor(z,Z){super(z,Z),this.scheduler=z,this.work=Z,this.pending=!1}schedule(z,Z=0){var w;if(this.closed)return this;this.state=z;const he=this.id,k=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(k,he,Z)),this.pending=!0,this.delay=Z,this.id=null!==(w=this.id)&&void 0!==w?w:this.requestAsyncId(k,this.id,Z),this}requestAsyncId(z,Z,w=0){return G.setInterval(z.flush.bind(z,this),w)}recycleAsyncId(z,Z,w=0){if(null!=w&&this.delay===w&&!1===this.pending)return Z;null!=Z&&G.clearInterval(Z)}execute(z,Z){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const w=this._execute(z,Z);if(w)return w;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(z,Z){let he,w=!1;try{this.work(z)}catch(k){w=!0,he=k||new Error("Scheduled action threw falsy error")}if(w)return this.unsubscribe(),he}unsubscribe(){if(!this.closed){const{id:z,scheduler:Z}=this,{actions:w}=Z;this.work=this.state=this.scheduler=null,this.pending=!1,(0,X.o)(w,this),null!=z&&(this.id=this.recycleAsyncId(Z,z,null)),this.delay=null,super.unsubscribe()}}}},74980:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.pad.NoPadding={pad:function(){},unpad:function(){}},C.pad.NoPadding)},75406:(ze,Oe,n)=>{"use strict";function C(z,Z){Z=encodeURIComponent(Z);for(const w of z.split(";")){const he=w.indexOf("="),[k,me]=-1==he?[w,""]:[w.slice(0,he),w.slice(he+1)];if(k.trim()===Z)return decodeURIComponent(me)}return null}n.d(Oe,{N0:()=>ne,UE:()=>X,Vy:()=>W,Zn:()=>x,bS:()=>C});const x="browser",G="server";function X(z){return z===x}function W(z){return z===G}class ne{}},75679:(ze,Oe,n)=>{"use strict";n.d(Oe,{uI:()=>W});var C=n(74523),x=n(26336),G=n(43767),X=n(32040);class W{constructor(){this.Profiles=new x.bT,this.LadingDocs=new x.G9;let he=X.d.admin.GetConfig("LandingDocs",X.d.SessionManager.RoleID);if(null==he||0==he.Tables.length||0==he.Tables[0].length||G.J0.StringIsNullOrEmpty(he.Tables[0][0].Value))return;let k=new G.VB;k.LoadXml(he.Tables[0][0].Value),k.DocumentElement.childNodes.forEach(me=>{let V,ge,E,le=me,R=new ne;switch(le.attributes.key.value){case"SALES_FLOW":R.Title="Sales";break;case"PURCHASE_FLOW":R.Title="Purchase";break;case"INVENTORY_FLOW":R.Title="Inventory";break;case"ACCOUNTING_FLOW":R.Title="Accounting";break;case"FM_FLOW":R.Title="FacilityManagement";break;case"HRM_FLOW":R.Title="HRM";break;default:R.Title=le.attributes.key.value}R.Type=le.attributes.key.value,this.Profiles.Add(R.Type,R),me.childNodes.forEach(b=>{let p=b;for(V=p.attributes.LID?G.J0.Int(p.attributes.LID.value):0,ge="1"==p.attributes.Club.value,E=0;E<p.childNodes.length;E++){let j=he.Tables[1].find(T=>T.CostCenterID==G.J0.Int(p.childNodes[E].attributes.D.value));if(null!=p.childNodes[E].attributes.Landing&&"1"==p.childNodes[E].attributes.Landing.value){let T=parseInt(j.CostCenterID);this.LadingDocs.ContainsKey(T)?0==this.LadingDocs[T]&&(this.LadingDocs[T]=null!=p.childNodes[E].attributes.R?G.J0.Int(p.childNodes[E].attributes.R.value):0):this.LadingDocs.Add(T,null!=p.childNodes[E].attributes.R?G.J0.Int(p.childNodes[E].attributes.R.value):0)}if(ge&&0!=E)R.DocData[R.DocData.length-1].AddDoc(j.CostCenterID,j.DocumentName,j.IsInventory);else{let T=new z;T.LID=V,T.AddDoc(j.CostCenterID,j.DocumentName,j.IsInventory),T.DocType=j.DocumentType,W.IsDocumentAssigned(j.CostCenterID)&&(T.ShowNew=!0),R.DocData.push(T)}}})})}static GetLandingReport(he){return null==X.d.page.QuickDocumentData?0:X.d.page.QuickDocumentData.LadingDocs.ContainsKey(he)?X.d.page.QuickDocumentData?.LadingDocs[he]:0}static IsDocumentAssigned(he){for(let k=0;k<X.d.SessionManager.MenuTabs.length;k++){let me=X.d.SessionManager.MenuTabs[k];for(let le=0;le<me.Groups.length;le++)if(me.Groups[le].Items.find(R=>R.FeatureID==he))return!0}return!1}GetProfile(he){return this.Profiles.ContainsKey(he)?JSON.parse(JSON.stringify(this.Profiles[he])):null}GetDocs(he){let k="";return he.Docs.forEach(me=>{k.length>0&&(k+=","),k+=me.CCID}),k}OnNewClick(he){W.LoadDocument(he.CCID,he.Title)}OnListClick(he,k,me,le){let R="";3==me?R=" and INV.ProductID="+le:2==me&&(R=he.Docs[0].IsInv?" and (INV.DebitAccount="+le+" or INV.CreditAccount="+le+")":" and (ACC.DebitAccount="+le+" or ACC.CreditAccount="+le+")"),W.LoadDocumentLandingPage(k.CCID,k.Title,he.Where,he.pType)}RefreshWidget(he,k,me,le,R){he.IsLoading=!0;let j,I,V="",ge="",E="",b="",p="",T="";he.Docs[0].IsInv?(I="INV",j=" INV_DocDetails INV with(nolock)"):(I="ACC",j=" ACC_DocDetails ACC with(nolock)");let oe=W.GetDimensionWhere("DCC.dcCCNID");oe.length>0&&(T=he.Docs[0].IsInv?" join COM_DocCCDATA DCC with(nolock) on DCC.InvDocDetailsID="+I+".InvDocDetailsID":" join COM_DocCCDATA DCC with(nolock) on DCC.AccDocDetailsID="+I+".AccDocDetailsID"),E=he.Docs.length>1?I+".CostCenterID in ("+this.GetDocs(he)+")":I+".CostCenterID="+he.Docs[0].CCID,E+=" and "+I+".StatusID=369",E+=oe,he.Where="",2==me?"SALES_FLOW"==k.Type?he.Where+=6==he.DocType?" and "+I+".CreditAccount="+le:" and "+I+".DebitAccount="+le:"PURCHASE_FLOW"==k.Type?he.Where+=10==he.DocType?" and "+I+".DebitAccount="+le:" and "+I+".CreditAccount="+le:("INVENTORY_FLOW"==k.Type||"ACCOUNTING_FLOW"==k.Type)&&(he.Where+=" and ("+I+".DebitAccount="+le+" or "+I+".CreditAccount="+le+")"):3==me&&(he.Where+=" and "+I+".ProductID="+le);let F=Date.Today().AddYears(-1);he.Where+=" and "+I+".DocDate>=convert(float,convert(datetime,'"+F.ToString("dd-MMM-yyyy")+"'))",E+=he.Where,ge=I+".DocID",b=I+".DocID",he.Docs.length>1&&(ge=I+".CostCenterID,"+ge,b=I+".CostCenterID,"+b,p="CostCenterID"),V="\nselect "+(p.length>0?p+",":"")+"count(*) CNT from (\nSELECT "+b+"\nFROM "+j+T+"\nWHERE "+E+"\nGROUP BY "+b+") AS T",p.length>0&&(V+=" Group by "+p),X.d.report.DataSetAsyn("RPT022",V).then(N=>{if(1==he.Docs.length)he.Value=N.Tables[0][0].CNT.Commas("N0"),he.Docs[0].Value=he.Value;else{let te=0;he.Docs.forEach(v=>{let S=N.Tables[0].find(O=>O.CostCenterID==v.CCID),B=S?S.CNT:0;te+=B,v.Value=B.Commas("N0")}),he.Value=te.Commas("N0")}he.IsLoading=!1})}static GetDimensionWhere(he){let k="";return"True"==X.d.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==X.d.SessionManager.Preferences["LW Reports"]&&(X.d.SessionManager.LocationID>0?k=" and "+he+"2="+X.d.SessionManager.LocationID:"1"!=X.d.SessionManager.RoleID&&X.d.SessionManager.LocationWhere.length>0&&(k=" and "+he+"2 in ("+X.d.SessionManager.LocationWhere+")")),k}static LoadDocument(he,k){return(0,C.A)(function*(){let me={};const{AddEditDocumentComponent:le}=yield Promise.all([n.e(7996),n.e(2881),n.e(8405),n.e(895),n.e(9702),n.e(2076),n.e(9503)]).then(n.bind(n,30786)),{AddEditDocumentViewModel:R}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,5109));let V=new R(he,k,!1);Object.assign(me,{component:le,params:{obj:V}}),X.d.page.addNewTab(me)})()}static LoadDocumentLandingPage(he,k,me,le){return(0,C.A)(function*(R,V,ge,E,b=null,p=!1){const{DocumentsListComponent:j}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(426)]).then(n.bind(n,80426)),{DocumentsListViewModel:T}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076),n.e(8182)]).then(n.bind(n,65801));let I=X.d.page.tabs.find(oe=>oe.params?.obj instanceof T&&oe.params?.obj.CostCenterID==R);if(!I||p){let oe={};oe.title=V;let F=new T(R,V,ge,E,b);Object.assign(oe,{component:j,params:{obj:F}}),X.d.page.addNewTab(oe)}else X.d.page.SetActiveTab(I)}).apply(this,arguments)}}class ne{constructor(){this.DocData=[]}}class z{constructor(){this.Docs=[],this.IsLoading=!1,this.ShowNew=!1,this.Where=""}AddDoc(he,k,me){let le=new Z;le.CCID=he,le.Title=k,le.IsInv=me,this.Docs.push(le)}}class Z{}},77224:(ze,Oe,n)=>{"use strict";n.d(Oe,{_:()=>G});var C=n(86969),x=n(70088);function G(X,W){const ne="object"==typeof W;return new Promise((z,Z)=>{const w=new x.Ms({next:he=>{z(he),w.unsubscribe()},error:Z,complete:()=>{ne?z(W.defaultValue):Z(new C.G)}});X.subscribe(w)})}},77436:(ze,Oe,n)=>{"use strict";n.d(Oe,{l:()=>G});var C=n(81113),x=n(20452);function G(X){return(0,x.T)(X[C.s])}},79358:(ze,Oe,n)=>{"use strict";n.d(Oe,{Q:()=>W});var C=n(17593),x=n(31979),G=n(36369),X=n(7724);function W(ne){return(0,C.N)((z,Z)=>{(0,G.Tg)(ne).subscribe((0,x._)(Z,()=>Z.complete(),X.l)),!Z.closed&&z.subscribe(Z)})}},81113:(ze,Oe,n)=>{"use strict";n.d(Oe,{s:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},81371:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(46882),function(x){var G=C,X=G.lib,W=X.WordArray,ne=X.Hasher,Z=G.x64.Word,w=G.algo,he=[],k=[],me=[];!function(){for(var V=1,ge=0,E=0;E<24;E++){he[V+5*ge]=(E+1)*(E+2)/2%64;var p=(2*V+3*ge)%5;V=ge%5,ge=p}for(V=0;V<5;V++)for(ge=0;ge<5;ge++)k[V+5*ge]=ge+(2*V+3*ge)%5*5;for(var j=1,T=0;T<24;T++){for(var I=0,oe=0,F=0;F<7;F++){if(1&j){var N=(1<<F)-1;N<32?oe^=1<<N:I^=1<<N-32}128&j?j=j<<1^113:j<<=1}me[T]=Z.create(I,oe)}}();var le=[];!function(){for(var V=0;V<25;V++)le[V]=Z.create()}();var R=w.SHA3=ne.extend({cfg:ne.cfg.extend({outputLength:512}),_doReset:function(){for(var V=this._state=[],ge=0;ge<25;ge++)V[ge]=new Z.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(V,ge){for(var E=this._state,b=this.blockSize/2,p=0;p<b;p++){var j=V[ge+2*p],T=V[ge+2*p+1];j=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),(I=E[p]).high^=T=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),I.low^=j}for(var oe=0;oe<24;oe++){for(var F=0;F<5;F++){for(var N=0,te=0,v=0;v<5;v++)N^=(I=E[F+5*v]).high,te^=I.low;var S=le[F];S.high=N,S.low=te}for(F=0;F<5;F++){var B=le[(F+4)%5],O=le[(F+1)%5],ae=O.high,se=O.low;for(N=B.high^(ae<<1|se>>>31),te=B.low^(se<<1|ae>>>31),v=0;v<5;v++)(I=E[F+5*v]).high^=N,I.low^=te}for(var fe=1;fe<25;fe++){var _=(I=E[fe]).high,K=I.low,ee=he[fe];ee<32?(N=_<<ee|K>>>32-ee,te=K<<ee|_>>>32-ee):(N=K<<ee-32|_>>>64-ee,te=_<<ee-32|K>>>64-ee);var U=le[k[fe]];U.high=N,U.low=te}var ie=le[0],J=E[0];for(ie.high=J.high,ie.low=J.low,F=0;F<5;F++)for(v=0;v<5;v++){var Ce=le[fe=F+5*v],Y=le[(F+1)%5+5*v],Ee=le[(F+2)%5+5*v];(I=E[fe]).high=Ce.high^~Y.high&Ee.high,I.low=Ce.low^~Y.low&Ee.low}var I,Te=me[oe];(I=E[0]).high^=Te.high,I.low^=Te.low}},_doFinalize:function(){var V=this._data,ge=V.words,b=8*V.sigBytes,p=32*this.blockSize;ge[b>>>5]|=1<<24-b%32,ge[(x.ceil((b+1)/p)*p>>>5)-1]|=128,V.sigBytes=4*ge.length,this._process();for(var j=this._state,T=this.cfg.outputLength/8,I=T/8,oe=[],F=0;F<I;F++){var N=j[F],te=N.high,v=N.low;te=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8),oe.push(v=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)),oe.push(te)}return new W.init(oe,T)},clone:function(){for(var V=ne.clone.call(this),ge=V._state=this._state.slice(0),E=0;E<25;E++)ge[E]=ge[E].clone();return V}});G.SHA3=ne._createHelper(R),G.HmacSHA3=ne._createHmacHelper(R)}(Math),C.SHA3)},81742:(ze,Oe,n)=>{"use strict";n.d(Oe,{q:()=>x});const x=new(n(96598).nKC)("")},84069:(ze,Oe,n)=>{"use strict";n.d(Oe,{I:()=>X});var C=n(73973);const{isArray:x}=Array;function X(W){return(0,C.T)(ne=>function G(W,ne){return x(ne)?W(...ne):W(ne)}(W,ne))}},84151:(ze,Oe,n)=>{"use strict";n.d(Oe,{Dw:()=>he,Je:()=>ge,L6:()=>E,R0:()=>le,W7:()=>R,Z_:()=>k,hV:()=>me,lT:()=>p,nW:()=>b,s3:()=>V});var C=n(74523),x=n(58170),G=n(27730),X=n(43767),W=n(32040),ne=n(26336),z=n(4192),Z=n(89731),w=n(5011);class he extends x.MI{constructor(T=0){super(),this.ClassName="PactTextBoxData",this.isSKU=!1,this._Textd=0,this.IsPwd=!1,this._text="",this.IgnoreSpaces=!1,this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.LostFocusCommand=new x.Yk,this.TextChangedCommand=new x.Yk,this.DBColumnID=T}static PactTextBoxData_1(T){let I=new he;return I.DBColumnID=T,I.Mandatory=!1,I}static PactTextBoxData_2(T,I){let oe=new he;return oe.DBColumnName=T,oe.FeatureID=I,oe}get Textd(){return this._Textd}set Textd(T){(this._Textd!=T||0==T&&this._text!=T.toString())&&(this._text=X.J0.DoubleTryParse(T).toString(),this._Textd=X.J0.DoubleTryParse(T))}get Text(){return this._text}set Text(T){this._text!=T&&(("INT"==this.DataType||"FLOAT"==this.DataType)&&(this._Textd=X.J0.Double(T)),null==T||null==T?this._text="":X.J0.String(T).startsWith("<FlowDocument")?(this.Xaml=T,this.Tag=T,this._text=X.J0.GetXamlText(T.toString())):(this._text=this.IsFirstLetterCaps&&!X.J0.String(T).startsWith("<FlowDocument")?this.MakeTitle(T):this.IsAllCaps&&!X.J0.String(T).startsWith("<FlowDocument")?T.toUpperCase():T,""!=this._text&&this.IgnoreSpaces&&(this._text=this._text.Replace(" ","")),X.J0.String(T).startsWith("<FlowDocument")||this.CheckChars(),X.J0.IsEmpty(this.Expression)||X.J0.IsEmpty(this.ViewFieldColor)?!X.J0.IsEmpty(this.FieldExpression)&&!X.J0.IsEmpty(this.LableFieldColor)&&this.ValidateFieldExpression(this._text,this.FieldExpression,this.LableFieldColor):this.ValidateFieldExpression(this._text,this.Expression,this.ViewFieldColor)),this._text=W.d.SessionManager.PactSanitize(T))}PactTextBox_KeyDown(T,I){I.ctrlKey&&89===I.which&&W.d.page.ShowDialog(this,z.PactRichTextBoxComponent,{ShowCenter:!0,Title:"Editor"})}CheckChars(){}ValidateFieldExpression(T,I,oe){try{let N,F=new ne.bT;N=null!=this.Lbl?this.Lbl.Replace(" ",""):"";let te=new Z.Nl(N,"");F.push(N,te),F[N].setFieldValue(T),this.ForeGround="1"==W.d.eval.EvaluateExpression(I,F).toString().toString()?oe:"#333333"}catch(F){console.log(F.Message)}}MakeTitle(T){if(!X.J0.StringIsNullOrEmpty(T)){let I=T.split(" ");for(let oe=0;oe<I.length;oe++)!I[oe]&&I[oe].length>0&&(I[oe]=I[oe][0].toString().toUpperCase()+I[oe].substring(1).toLowerCase());return I.join(" ")}return""}GetValidationError(T){if("Text"===T){if(this.Mandatory&&null!=this.Text&&X.J0.IsNullOrWhiteSpace(this.Text))return W.d.translate.instant("Enter")+" "+this.Label;if(null!=this.DataType&&null!=this.Text&&""!=this.Text)if("INT"==this.DataType){if(!isFinite(this.Text))return W.d.translate.instant("Invalid")+" "+this.Label}else if("FLOAT"==this.DataType){if(!isFinite(this.Text))return W.d.translate.instant("Invalid")+" "+this.Label}else if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return W.d.translate.instant("Invalid")+" "+this.Label}return""}static GetValidTextXml(T){return null===T||""===T||void 0===T?"":(T.replace&&(T=(T=(T=(T=(T=(T=T.Replace("'","''")).Replace("<br>","&lt;")).Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")),T)}static GetValidXml(T){return null===T||""===T||void 0===T?"":(T.replace&&(T=(T=(T=(T=(T=T.Replace("<br>","&lt;")).Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")),T)}ValidateData(){if(this.Mandatory&&X.J0.IsNullOrWhiteSpace(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Enter")+" "+this.Label:W.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if(null!=this.DataType&&null!=this.Text&&""!=this.Text){if("INT"==this.DataType&&!isFinite(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("FLOAT"==this.DataType&&!isFinite(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname}if((this.MinChar>0||this.MaxChar>0)&&!X.J0.IsNullOrWhiteSpace(this.Text)){if(this.MinChar>0&&this.Text.trim().length<this.MinChar)return"Enter Min. Character of "+this.MinChar+" at "+this.Label;if(this.MaxChar>0&&this.Text.trim().length>this.MaxChar)return"Enter Max. Character of "+this.MaxChar+" at "+this.Label}return""}}class k extends he{constructor(T=0){super(),this.ClassName="PactMobileImageBoxData",this.isSKU=!1,this.DBColumnID=T}}class me extends x.MI{constructor(T=0){super(),this.Height="66",this.ClassName="PactTextAreaData",this._text="",this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.IgnoreSpaces=!1,this.DBColumnID=T}static PactTextAreaData_1(T){let I=new me;return I.DBColumnID=T,I.Mandatory=!1,I}static PactTextAreaData_2(T,I){let oe=new me;return oe.DBColumnName=T,oe.FeatureID=I,oe}get Text(){return this._text}set Text(T){this._text!=T&&(null==T||null==T?this._text="":X.J0.String(T).startsWith("<FlowDocument")?(this.Xaml=T,this.Tag=T,this._text=X.J0.GetXamlText(T.toString())):(this._text=this.IsFirstLetterCaps&&!X.J0.String(T).startsWith("<FlowDocument")?this.MakeTitle(T):this.IsAllCaps&&!X.J0.String(T).startsWith("<FlowDocument")?T.toUpperCase():T,""!=this._text&&this.IgnoreSpaces&&(this._text=this._text.Replace(" ","")),X.J0.String(T).startsWith("<FlowDocument")||this.CheckChars()))}MakeTitle(T){if(!T){let I=T.split(" ");for(let oe=0;oe<I.length;oe++)!I[oe]&&I[oe].length>0&&(I[oe]=I[oe][0].toString().toUpperCase()+I[oe].substring(1).toLowerCase());return I.join(" ")}return""}ValidateData(){if(this.Mandatory&&X.J0.IsNullOrWhiteSpace(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Enter")+" "+this.Label:W.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if(null!=this.DataType&&null!=this.Text&&""!=this.Text){if("INT"==this.DataType&&!isFinite(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("FLOAT"==this.DataType&&!isFinite(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname}return""}PactTextBox_KeyDown(T,I){I.ctrlKey&&89===I.which&&W.d.page.ShowDialog(this,z.PactRichTextBoxComponent,{ShowCenter:!0,Title:"Editor"})}CheckChars(){}}class le extends x.MI{constructor(T=0){super(),this.DBColumnID=T}PactRichTextBoxData_1(T){this.DBColumnID=T,this.Mandatory=!1}PactRichTextBoxData_2(T,I){this.DBColumnName=T,this.FeatureID=I}get Text(){return this._Text}set Text(T){this._Text!=T&&(this._Text=T)}get htmlcontent(){return this._htmlcontent}set htmlcontent(T){this._htmlcontent!=T&&(this._htmlcontent=T)}get DocumentText(){return this._DocumentText}set DocumentText(T){this._DocumentText!=T&&(this._DocumentText=T,this.onLoadHtml())}onLoadHtml(){var T=this;return(0,C.A)(function*(){if(!X.J0.IsEmpty(T.DocumentText)&&null!=T.DocumentText){let I=yield W.d.common.ConvertXamlToHtml(T.DocumentText);T._htmlcontent=I.HtmlText}})()}get Tag(){return this._Tag}set Tag(T){this._Tag!=T&&(this._Tag=T)}GetValidationError(T){return"Text"===T&&this.Mandatory&&null!=this.Text&&X.J0.IsNullOrWhiteSpace(this.Text)?W.d.GetResource("Enter")+" "+this.Label:""}ValidateData(){return this.Mandatory&&null!=this.Text&&X.J0.IsNullOrWhiteSpace(this.Text)?X.J0.IsEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.IsEmpty(this.tabname)?W.d.GetResource("Enter")+" "+this.Label:W.d.GetResource("Enter")+" "+this.Label+" at "+this.tabname:""}}class R extends he{get isValid(){return/^https?:\/\//.test(this.Text)}get Url(){return this._Url}set Url(T){this._Url!=T&&(this.validateUrl(),this._Url=T,this._text=T)}constructor(T=0){super(),this.isLoading=!1,this.DBColumnID=T}validateUrl(){this.isLoading=!0,this.errorMessage="",setTimeout(()=>{this.isValid||(this.errorMessage="Invalid URL Format"),this.isLoading=!1},1e3)}}class V extends x.MI{constructor(T=0){super(),this.prefID="CodePrefix",this.suffID="CodeSuffix",this.LostFocusCommand=new x.Yk,this.TextChangedCommand=new x.Yk,this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.IgnoreSpaces=!1,this._PrefixCode="",this.PrefixVisibility=!1,this.PrefixEnable=!1,this.PrefixWidth=0,this._SuffixCode="",this.SuffixVisibility=!1,this.SuffixEnable=!1,this.SuffixWidth=0,this.ExceedsLimit=0,this.IsEnable_DB=!0,this.DBColumnID=T}static PactCodeData_1(T){let I=new V;return I.DBColumnID=T,I.Mandatory=!1,I}static PactCodeData_2(T,I){let oe=new V;return oe.DBColumnName=T,oe.FeatureID=I,oe}MakeTitle(T){if(!T){let I=T.split(" ");for(let oe=0;oe<I.length;oe++)!I[oe]&&I[oe].length>0&&(I[oe]=I[oe][0].toString().toUpperCase()+I[oe].substring(1).toLowerCase());return I.join(" ")}return""}get PrefixCode(){return this._PrefixCode}set PrefixCode(T){this._PrefixCode!=T&&(this._PrefixCode=null==T?"":T,this.PrefixCode=W.d.SessionManager.PactSanitize(T))}get SuffixCode(){return this._SuffixCode}set SuffixCode(T){this._SuffixCode!=T&&(this._SuffixCode=null==T?"":T,this.SuffixCode=W.d.SessionManager.PactSanitize(T))}ValidateData(){if(this.Mandatory&&X.J0.IsNullOrWhiteSpace(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Enter")+" "+this.Label:W.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if(null!=this.DataType&&null!=this.Text&&""!=this.Text){if("INT"==this.DataType&&!isFinite(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("FLOAT"==this.DataType&&!isFinite(this.Text))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Invalid")+" "+this.Label:W.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname}return""}}class ge extends he{constructor(){super(),this.LostFocusCommand=new x.Yk,this.TextChangedCommand=new x.Yk,this.IsPwd=!0}static PactPasswordBoxData_1(T){let I=new ge;return I.DBColumnID=T,I.Mandatory=!1,I}static PactPasswordBoxData_2(T,I){let oe=new ge;return oe.DBColumnName=T,oe.FeatureID=I,oe}get Password(){return this.Text}set Password(T){this.Text=T}ValidateData(){return this.Mandatory&&X.J0.IsNullOrWhiteSpace(this.Password)?X.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.StringIsNullOrEmpty(this.tabname)?W.d.translate.instant("Enter")+" "+this.Label:W.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname:""}}class E extends G.y${constructor(T=0){super(),this.TextWidth="0.45*",this.ComboWidth="0.55*",this.DBColumnID=T}static PactTextBoxWithComboData_1(T){let I=new E;return I.DBColumnID=T,I.Mandatory=!1,I}GetValidationError(){if(this.Mandatory){if(X.J0.StringIsNullOrEmpty(this.SelectedValue))return W.d.translate.instant("Select")+" "+this.Label;if("FLOAT"==this.DataType&&!isFinite(this.Text))return W.d.translate.instant("Invalid")+" "+this.Label}return""}}class b extends he{constructor(){super(),this.ButtonClick=new x.Yk}static PactTextBoxLinkData_1(T){let I=new b;return I.DBColumnID=T,I.Mandatory=!1,I}}class p extends x.MI{constructor(T=0){super(),this.IgnoreSpaces=!1,this._text="",this.LostFocusCommand=new x.Yk,this.TextChangedCommand=new x.Yk,this.GPSClick=new x.Yk,this.DBColumnID=T,this.Mandatory=!1,this.GPSClick.Subscribe(this,"OnGPSClick")}static PactGPSData_2(T,I){let oe=new p;return oe.DBColumnName=T,oe.FeatureID=I,oe}get Text(){return this._text}set Text(T){this._text!=T&&(this._text=null==T?"":T,this.CheckChars())}CheckChars(){}static GetValidTextXml(T){return X.J0.IsEmpty(T)?"":T=(T=(T=(T=(T=T.Replace("'","''")).Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")}static GetValidXml(T){return X.J0.IsEmpty(T)?"":T=(T=(T=(T=T.Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")}ValidateData(){let T="";return this.Mandatory&&X.J0.IsNullOrWhiteSpace(this.Text)?X.J0.IsEmpty(this.SectionID)||"2"!=this.SectionID||X.J0.IsEmpty(this.tabname)?W.d.GetResource("Enter")+" "+this.Label:W.d.GetResource("Enter")+" "+this.Label+" at "+this.tabname:(X.J0.IsEmpty(this.Text)||this.Text.Contains(",")||(T="GPS should have latitude and longitude"),T)}OnGPSClick(T){var I=this;return(0,C.A)(function*(){if(console.log("PactGPSBox::Enter OnGPSClick"),!X.J0.IsEmpty(I.Text)&&(console.log("PactGPSBox::Enter Value >> "+I.Text),I.Text.Contains(","))){let oe=I.Text.split(","),F=oe[0],N=oe[1];if(W.d.SessionManager.Preferences.ContainsKey("GpsUrl")&&""!=W.d.SessionManager.Preferences.GpsUrl.toString()){console.log("PactGPSBox::Gps Url is --\x3e> "+W.d.SessionManager.Preferences.GpsUrl.toString());let te=W.d.SessionManager.Preferences.GpsUrl.toString();te=te.Replace("[lat]",F).Replace("[lng]",N),console.log("PactGPSBox::Gps Url is --\x3e> "+te),W.d.IsMobile&&W.d.IsNativeMobile?yield w.P.open({url:te,isPDF:!1,isExport:!1}):window.open(te,"_blank"),console.log("PactGPSBox::Gps Url opened --\x3e> "+te)}}console.log("PactGPSBox::Exiting OnGPSClick")})()}}},84217:function(ze,Oe,n){var C,X;ze.exports=(C=n(95275),X=C.lib.WordArray,C.enc.Base64url={stringify:function(Z,w){void 0===w&&(w=!0);var he=Z.words,k=Z.sigBytes,me=w?this._safe_map:this._map;Z.clamp();for(var le=[],R=0;R<k;R+=3)for(var b=(he[R>>>2]>>>24-R%4*8&255)<<16|(he[R+1>>>2]>>>24-(R+1)%4*8&255)<<8|he[R+2>>>2]>>>24-(R+2)%4*8&255,p=0;p<4&&R+.75*p<k;p++)le.push(me.charAt(b>>>6*(3-p)&63));var j=me.charAt(64);if(j)for(;le.length%4;)le.push(j);return le.join("")},parse:function(Z,w){void 0===w&&(w=!0);var he=Z.length,k=w?this._safe_map:this._map,me=this._reverseMap;if(!me){me=this._reverseMap=[];for(var le=0;le<k.length;le++)me[k.charCodeAt(le)]=le}var R=k.charAt(64);if(R){var V=Z.indexOf(R);-1!==V&&(he=V)}return function z(Z,w,he){for(var k=[],me=0,le=0;le<w;le++)if(le%4){var R=he[Z.charCodeAt(le-1)]<<le%4*2,V=he[Z.charCodeAt(le)]>>>6-le%4*2;k[me>>>2]|=(R|V)<<24-me%4*8,me++}return X.create(k,me)}(Z,he,me)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},C.enc.Base64url)},86234:(ze,Oe,n)=>{"use strict";n.d(Oe,{Y:()=>W});var C=n(74523),x=n(43767),G=n(32040),X=n(26336);class W{constructor(z){this.args=z,this.DecimalFormat="",this.DecimalFormatNew="",this.grid=z&&z.grid,this.init()}get collection(){return this.columnDef&&this.columnDef.editor.collection||[]}get columnDef(){return this.args&&this.args.column||{}}get columnEditor(){return this.columnDef&&this.columnDef.editor||{}}get hasAutoCommitEdit(){return this.args.grid.getOptions().autoCommitEdit}get validator(){return this.columnEditor.validator||this.columnDef.validator}get Columns(){return this.gridOptions.params.TableColumns||{}}get gridOptions(){return this.grid?.getOptions?.()}init(){this.$input=$(`<input type="text" class="" placeholder="${this.columnEditor&&this.columnEditor.placeholder||""}" title="${this.columnEditor&&this.columnEditor.title||""}" />`).appendTo(this.args.container).on("keydown",w=>{this._lastInputEvent=w,this.textBox_KeyDown("",w)}),this.collection.IsNumeric&&(this.$input.css("text-align","right"),this.args&&this.Columns.Contains("Decimals")&&!x.J0.IsEmpty(this.args.item.Decimals)?(this.DecimalFormat="0."+this.args.item.Decimals+"-"+this.args.item.Decimals,this.DecimalFormatNew=this.args.item.Decimals):x.J0.IsEmpty(this.collection.DecimalPoints)||(this.DecimalFormat="0."+this.collection.DecimalPoints+"-"+this.collection.DecimalPoints,this.DecimalFormatNew=this.collection.DecimalPoints)),!this.collection.IsNumeric&&!x.J0.IsEmpty(this.collection.TextAlign)&&("CENTER"==this.collection.TextAlign.toUpperCase()?this.$input.css("text-align","center"):"RIGHT"==this.collection.TextAlign.toUpperCase()?this.$input.css("text-align","right"):this.$input.css("text-align","left")),setTimeout(()=>{this.$input.focus().select()},50)}destroy(){this.$input.off("keydown").remove()}focus(){this.$input.focus()}getValue(){return this.$input.val()}setValue(z){this.$input.val(G.d.SessionManager.PactSanitize(z))}loadValue(z){this.defaultValue=this.collection.IsNumeric?G.d.SessionManager.Preferences.ContainsKey("Commas")&&"Millions"!=G.d.SessionManager.Preferences.Commas&&""!=G.d.SessionManager.Preferences.Commas?x.J0.IsEmpty(z[this.args.column.field])?z[this.args.column.field]:x.J0.Double(z[this.args.column.field]).Commas("N"+this.DecimalFormatNew):"0.0-0"===this.DecimalFormat||x.J0.IsEmpty(z[this.args.column.field])?z[this.args.column.field]:G.d.SessionManager.transformDecimal(z[this.args.column.field],this.DecimalFormat):z[this.args.column.field],this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select(),!this.collection.IsNumeric&&!x.J0.IsEmpty(z[this.args.column.field])&&z[this.args.column.field].startsWith("<FlowDocument")&&(this.Tag=z[this.args.column.field],this.$input.val(x.J0.GetXamlText(this.Tag.toString())))}serializeValue(){if(!x.J0.IsEmpty(this.Tag)&&this.Tag.startsWith("<FlowDocument"))return this.Tag.toString();if(console.log("transformHtml setValue editor found"),this.$input.val(G.d.SessionManager.PactSanitize(this.$input.val())),!isNaN(this.$input.val().replace(/,/g,""))||!this.collection.IsNumeric)return this.$input.val();if(x.J0.DoubleBool(this.$input.val().replace(/,/g,"")))return this.$input.val();try{var z=G.d.eval.EvaluateExpression(this.$input.val().replace(/,/g,""),new X.bT);if(null!=!x.J0.IsEmpty(z)&&"Infinity"!=z.toString()&&"-Infinity"!=z.toString()&&"NaN"!=z.toString()&&x.J0.DoubleTryParse(z.ToString()))return z}catch{return this.$input.val()}}applyValue(z,Z){const w=this.validate(Z);z[this.args.column.field]=this.collection.IsNumeric&&!x.J0.IsEmpty(Z)?G.d.SessionManager.Preferences.ContainsKey("Commas")&&"Millions"!=G.d.SessionManager.Preferences.Commas&&""!=G.d.SessionManager.Preferences.Commas?w&&w.valid?x.J0.Double(Z).Commas("N"+this.DecimalFormatNew).replace(/,/g,""):"":"0.0-0"===this.DecimalFormat?Z:w&&w.valid?x.J0.String(G.d.SessionManager.transformDecimal(Z,this.DecimalFormat)).replace(/,/g,""):"":this.collection.IsNumeric&&x.J0.IsEmpty(Z)?"":w&&w.valid?Z:""}isValueChanged(){return!(!this.columnEditor||!this.columnEditor.alwaysSaveOnEnterKey||""!==(this._lastInputEvent&&this._lastInputEvent.key))||!(""===this.$input.val()&&null===this.defaultValue)&&this.$input.val().replace(/,/g,"")!==this.defaultValue}save(){const z=this.validate();z&&z.valid&&(this.hasAutoCommitEdit?this.args.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())}textBox_MouseDoubleClick(z,Z){}textBox_KeyDown(z,Z){!this.collection.IsNumeric&&Z.ctrlKey&&89===Z.which&&this.ShowTichTextDilog()}ShowTichTextDilog(){var z=this;return(0,C.A)(function*(){const{PactRichTextBoxComponent:Z}=yield Promise.resolve().then(n.bind(n,4192));G.d.page.ShowDialog(z,Z,{ShowCenter:!0,Title:"Editor"})})()}QtyReader(z){}textBox_TextChanged(z,Z){if(console.log("transformHtml textBox_TextChanged"),this.collection.IsInTextchanged)return;let w=z;if(w.Text.startsWith("<FlowDocument")&&(w.Tag=w.Text),null!=w){let he=w.CaretIndex;this.collection.IsFirstLetterCaps?w.Text=this.MakeTitle(w.Text):this.collection.IsAllCaps&&(w.Text=w.Text.toUpperCase()),w.CaretIndex=he}this.collection.IsInTextchanged=!1}MakeTitle(z){if(!x.J0.IsEmpty(z)){let Z=z.split(" ");for(let w=0;w<Z.length;w++)Z[w]=Z[w][0].toString().toUpperCase()+Z[w].substring(1);return Z.join(" ")}return""}validate(z){if(isNaN(this.$input.val().replace(/,/g,""))&&this.collection.IsNumeric){if(x.J0.DoubleBool(this.$input.val().replace(/,/g,"")))return{valid:!1,msg:"Please enter a valid decimal number"};try{var Z=G.d.eval.EvaluateExpression(this.$input.val().replace(/,/g,""),new X.bT);null!=!x.J0.IsEmpty(Z)&&"Infinity"!=Z.toString()&&"-Infinity"!=Z.toString()&&"NaN"!=Z.toString()&&x.J0.DoubleTryParse(Z.ToString())&&(z=Z)}catch{return{valid:!1,msg:"Please enter a valid decimal number"}}}if(this.validator){const w=void 0!==z?z:this.$input&&this.$input.val&&this.$input.val();return this.validator(w,this.args)}return{valid:!0,msg:null}}}},86945:(ze,Oe,n)=>{"use strict";n.d(Oe,{R0:()=>ne,lI:()=>W,ms:()=>X});var C=n(20452),x=n(57089);function G(z){return z[z.length-1]}function X(z){return(0,C.T)(G(z))?z.pop():void 0}function W(z){return(0,x.m)(G(z))?z.pop():void 0}function ne(z,Z){return"number"==typeof G(z)?z.pop():Z}},86969:(ze,Oe,n)=>{"use strict";n.d(Oe,{G:()=>x});const x=(0,n(4234).L)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},88952:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(21272),n(1236),n(26528),n(90033),function(){var x=C,X=x.lib.StreamCipher,ne=[],z=[],Z=[],w=x.algo.RabbitLegacy=X.extend({_doReset:function(){var k=this._key.words,me=this.cfg.iv,le=this._X=[k[0],k[3]<<16|k[2]>>>16,k[1],k[0]<<16|k[3]>>>16,k[2],k[1]<<16|k[0]>>>16,k[3],k[2]<<16|k[1]>>>16],R=this._C=[k[2]<<16|k[2]>>>16,4294901760&k[0]|65535&k[1],k[3]<<16|k[3]>>>16,4294901760&k[1]|65535&k[2],k[0]<<16|k[0]>>>16,4294901760&k[2]|65535&k[3],k[1]<<16|k[1]>>>16,4294901760&k[3]|65535&k[0]];this._b=0;for(var V=0;V<4;V++)he.call(this);for(V=0;V<8;V++)R[V]^=le[V+4&7];if(me){var ge=me.words,E=ge[0],b=ge[1],p=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),j=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),T=p>>>16|4294901760&j,I=j<<16|65535&p;for(R[0]^=p,R[1]^=T,R[2]^=j,R[3]^=I,R[4]^=p,R[5]^=T,R[6]^=j,R[7]^=I,V=0;V<4;V++)he.call(this)}},_doProcessBlock:function(k,me){var le=this._X;he.call(this),ne[0]=le[0]^le[5]>>>16^le[3]<<16,ne[1]=le[2]^le[7]>>>16^le[5]<<16,ne[2]=le[4]^le[1]>>>16^le[7]<<16,ne[3]=le[6]^le[3]>>>16^le[1]<<16;for(var R=0;R<4;R++)ne[R]=16711935&(ne[R]<<8|ne[R]>>>24)|4278255360&(ne[R]<<24|ne[R]>>>8),k[me+R]^=ne[R]},blockSize:4,ivSize:2});function he(){for(var k=this._X,me=this._C,le=0;le<8;le++)z[le]=me[le];for(me[0]=me[0]+1295307597+this._b|0,me[1]=me[1]+3545052371+(me[0]>>>0<z[0]>>>0?1:0)|0,me[2]=me[2]+886263092+(me[1]>>>0<z[1]>>>0?1:0)|0,me[3]=me[3]+1295307597+(me[2]>>>0<z[2]>>>0?1:0)|0,me[4]=me[4]+3545052371+(me[3]>>>0<z[3]>>>0?1:0)|0,me[5]=me[5]+886263092+(me[4]>>>0<z[4]>>>0?1:0)|0,me[6]=me[6]+1295307597+(me[5]>>>0<z[5]>>>0?1:0)|0,me[7]=me[7]+3545052371+(me[6]>>>0<z[6]>>>0?1:0)|0,this._b=me[7]>>>0<z[7]>>>0?1:0,le=0;le<8;le++){var R=k[le]+me[le],V=65535&R,ge=R>>>16;Z[le]=((V*V>>>17)+V*ge>>>15)+ge*ge^((4294901760&R)*R|0)+((65535&R)*R|0)}k[0]=Z[0]+(Z[7]<<16|Z[7]>>>16)+(Z[6]<<16|Z[6]>>>16)|0,k[1]=Z[1]+(Z[0]<<8|Z[0]>>>24)+Z[7]|0,k[2]=Z[2]+(Z[1]<<16|Z[1]>>>16)+(Z[0]<<16|Z[0]>>>16)|0,k[3]=Z[3]+(Z[2]<<8|Z[2]>>>24)+Z[1]|0,k[4]=Z[4]+(Z[3]<<16|Z[3]>>>16)+(Z[2]<<16|Z[2]>>>16)|0,k[5]=Z[5]+(Z[4]<<8|Z[4]>>>24)+Z[3]|0,k[6]=Z[6]+(Z[5]<<16|Z[5]>>>16)+(Z[4]<<16|Z[4]>>>16)|0,k[7]=Z[7]+(Z[6]<<8|Z[6]>>>24)+Z[5]|0}x.RabbitLegacy=X._createHelper(w)}(),C.RabbitLegacy)},89731:(ze,Oe,n)=>{"use strict";n.d(Oe,{C3:()=>Z,CC:()=>W,Nl:()=>ne,PE:()=>me,Wz:()=>w});var C=n(43767),x=n(32040),G=n(26336),X=n(96598);let W=(()=>{class R{constructor(){this.ThrowException=!0,this.tokenName={ADD:"ADD",SUB:"SUB",MUL:"MUL",DIV:"DIV",POW:"POW",PCT:"PCT",QUOT:"QUOT",ABS:"ABS",NOT:"NOT",OPENP:"OPENP",CLOSEP:"CLOSEP",DQT:"DQT",AND:"AND",OR:"OR",COMA:"COMA",EQL:"EQL",GRT:"GRT",LES:"LES",GTE:"GTE",LTE:"LTE",NTE:"NTE",KWRDTHEN:"KWRDTHEN",KWRDIF:"KWRDIF",KWRDIF2:"KWRDIF2",KWRDELSE:"KWRDELSE",IDENTIFIER:"IDENTIFIER",INTEGER:"INTEGER",DOUBLE:"DOUBLE",CONCAT:"CONCAT",MOD:"MOD",TRUNC:"TRUNC",ROUND:"ROUND",DATEDIFF:"DATEDIFF",NONE:"NONE",QTY:"QTY",RATE:"RATE",GROSS:"GROSS",NET:"NET",AVGRT:"AVGRT",LSTPRCHSRT:"LSTPRCHSRT",LSTLNDGRT:"LSTLNDGRT",CONVQTY:"CONVQTY",UNITS:"UNITS",BASEQTY:"BASEQTY",EXCHRT:"EXCHRT",STRING:"STRING",USERDEF:"USERDEF",APPDEF:"APPDEF",SUBSTR:"SUBSTR",UPPER:"UPPER",LOWER:"LOWER",DATENAME:"DATENAME",LENGTH:"LENGTH",MCONCAT:"MCONCAT",DATEADD:"DATEADD",REPLACE:"REPLACE",KWRDELSEIF:"KWRDELSEIF",FLOOR:"FLOOR",CEIL:"CEIL",INDEXOF:"INDEXOF",ISNUM:"ISNUM",REGEX:"REGEX",TRIM:"TRIM",NEWDATE:"NEWDATE",FORMAT:"FORMAT",TIMEADD:"TIMEADD"},this.keywords=["IF","THEN","ELSE","AND","OR","CONCAT","QTY","RATE","GROSS","NET","AVGRATE","LASTPURCHASERATE","LASTLANDINGRATE","CONVERSIONQTY","UNITS","BASEQTY","EXCHANGERATE","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT"],this.keywordsreports=["IF","THEN","ELSE","AND","OR","CONCAT","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT","TIMEADD"],this.tokenClass={OPERAND:"OPERAND",OPERATOR:"OPERATOR",USERDEF:"USERDEF",MATHOP:"MATHOP",LOGICOP:"LOGICOP",COMPOP:"COMPOP",FINANOP:"FINANOP",FUNC:"FUNC",GROUP:"GROUP"},this.tokenType={REFERENCE:"REFERENCE",UNARY:"UNARY",BINARY:"BINARY",TERTIARY:"TERTIARY",STATIC:"STATIC",KEYWORD:"KEYWORD"},this.funckeywords=["CONCAT","ABS","KWRDIF","KWRDTHEN","KWRDELSE","AND","OR","MOD","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","KWRDELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT"],this.fieldType={INT:"INT",DOUBLE:"DOUBLE",STRING:"STRING",COSTCENTER:"COSTCENTER "}}SetKeyWords(ge){}EvaluateExpression(ge,E,b=!1){var B,O,ae,p=this.tokenName,j="REPORT"==this.FormulaType||"VPT"==this.FormulaType?this.keywordsreports:this.keywords,T=this.tokenClass,I=this.tokenType,oe=this.funckeywords,F_stack=function(){var J;this.Push=function(Ce){typeof J>"u"&&(J=[]),J.push(Ce)},this.Pop=function(){return J.pop()},this.Peek=function(Ce){return J[J.length-1]},this.GetArray=function(){return J},this.Count=function(Ce){return typeof J>"u"?-1:J.length},this.Clear=function(){J=[]}},N=[],v=new function(){var J;this.Enqueue=function(Ce){typeof J>"u"&&(J=[]),J.push(Ce)},this.Dequeue=function(){return J.shift()},this.Peek=function(){return J[0]},this.GetArray=function(){return J},this.Count=function(Ce){return typeof J>"u"?-1:J.length},this.Clear=function(){J=[]}};return function fe(J,Ce){for(var Le,Be,Y=new F_stack,Ee=new F_stack,Te=new F_stack,Ue="",ke=[],xe=0;xe<J.length;xe++)switch(Be=J[xe],Be.tknClass){case T.OPERAND:Ce.Enqueue(Be),Y.Count()>0&&"KWRDELSE"===(Le=Y.Peek()).tokenName&&Ce.Enqueue(Y.Pop());break;case T.FINANOP:Ce.Enqueue(Be);break;case T.FUNC:Y.Push(Be);break;case T.OPERATOR:Y.Count()>0&&((Le=Y.Peek()).tknClass===T.MATHOP&&Ce.Enqueue(Y.Pop()),"COMA"==Be.tokenName&&ke.length>0&&ke[ke.length-1]++);break;case T.MATHOP:switch(Be.tokenValue){case"+":case"-":if(Y.Count()>0)for(Le=Y.Peek();ee(Le)&&(Ce.Enqueue(Y.Pop()),Y.Count()>0);)Le=Y.Peek();Y.Push(Be);break;case"*":case"/":case"^":case"@":if(Y.Count()>0)for(Le=Y.Peek();ee(Le)&&"+"!==Le.tokenValue.toString()&&"-"!==Le.tokenValue.toString()&&(Ce.Enqueue(Y.Pop()),Y.Count()>0);)Le=Y.Peek();Y.Push(Be)}break;case T.LOGICOP:switch(Ue=Be.tokenName){case"KWRDIF":case"KWRDELSE":case"KWRDELSEIF":Y.Push(Be);break;case"AND":case"OR":case"NOT":Ee.Count()>0&&Ce.Enqueue(Ee.Pop()),Te.Count()>0&&Ce.Enqueue(Te.Pop()),Te.Push(Be);break;case"KWRDIF2":Be.tokenName="KWRDIF",Ce.Enqueue(Be);break;default:throw"Unknown Logical Operator : "+Ue+"!"}break;case T.COMPOP:switch(Be.tokenValue.toString()){case"<":case"<>":case"<=":case">":case">=":case"=":Y.Count()>0&&(Le=Y.Peek()).tknClass==T.MATHOP&&Ce.Enqueue(Y.Pop()),Ee.Push(Be)}break;case T.GROUP:switch(Be.tokenValue.toString()){case"(":ke.push(1),Y.Push(Be);break;case")":if(!(Y.Count()>0))throw"Unbalanced parenthesis!";for(Le=Y.Peek();"("!=Le.tokenValue.toString();){if(Ce.Enqueue(Y.Pop()),!(Y.Count()>0))throw"Unbalanced parenthesis!";Le=Y.Peek()}Y.Pop();var A=0;if(ke.length>0&&(A=ke[ke.length-1],ke.splice(ke.length-1,1)),Y.Count()>0&&(Le=Y.Peek()).tknClass==T.FUNC){null!=Le.tokenValue&&("CONCAT"==Le.tokenValue.toString()||"MCONCAT"==Le.tokenValue.toString())&&(Le.OpCnt=A),Ce.Enqueue(Y.Pop()),U(Le.tokenName.toString())&&Ce.Enqueue(Y.Pop());continue}Ee.Count()>0&&Ce.Enqueue(Ee.Pop()),Te.Count()>0&&Ce.Enqueue(Te.Pop()),Y.Count()>0&&(ie((Le=Y.Peek()).tokenName.toString())&&Ce.Enqueue(Y.Pop()),U(Le.tokenName.toString())&&Ce.Enqueue(Y.Pop()))}}for(;Y.Count()>0;)Le=Y.Pop(),Ce.Enqueue(Le);for(xe=0;xe<Ce.Count();xe++);}(N=function _(J){var Y=[];Y.tokenName="",Y.tokenId=99999,Y.tknClass=T.OPERATOR,Y.tknType=I.UNARY,Y.tokenValue="";var Ee=[];Ee.tokenName="",Ee.tokenId=99999,Ee.tknClass=T.OPERATOR,Ee.tknType=I.UNARY,Ee.tokenValue="";var Te=[];Te.tokenName="",Te.tokenId=99999,Te.tknClass=T.OPERATOR,Te.tknType=I.UNARY,Te.tokenValue="";for(var Le=0;Le<J.length;)if(Y=J[Le],Le++,"-"==Y.tokenValue){if(Ee.tknClass!=T.OPERAND){if(!(Le<J.length&&"CLOSEP"!=Ee.tokenName))return J;if(Te=J[Le],Le++,Te.tknClass==T.OPERAND){if(J.splice(Le-2,1),Le--,Te.tknClass==I.STATIC){if("INTEGER"!=Te.tokenName&&"DOUBLE"!=Te.tokenName)throw"Improper use of - operator";Te.tokenValue=-1*parseFloat(Te.tokenValue.toString().replace(/,/g,""))}else Te.tokenValue="-"+Te.tokenValue;Ee=Te}}}else Ee=Y;return J}(N=function K(J,Ce){var Y,Ee,je,Te=J;N=Ce;for(var Le=Te.length,tt=-1;tt<Le;){if(-1==(Y=Re(Te)))return N;switch(Ee=Y){case"+":De(p.ADD,T.MATHOP,I.BINARY,"+");break;case"-":De(p.SUB,T.MATHOP,I.BINARY,"-");break;case"*":De(p.MUL,T.MATHOP,I.BINARY,"*");break;case"/":De(p.DIV,T.MATHOP,I.BINARY,"/");break;case"^":De(p.POW,T.MATHOP,I.BINARY,"^");break;case"|":De(p.ABS,T.MATHOP,I.UNARY,"|");break;case"@":De(p.QUOT,T.MATHOP,I.BINARY,"@");break;case",":De(p.COMA,T.OPERATOR,I.BINARY,",");break;case"%":De(p.PCT,T.FINANOP,I.BINARY,"%");break;case"!":De(p.NOT,T.LOGICOP,I.UNARY,"!");break;case"?":De(p.KWRDIF2,T.LOGICOP,I.KEYWORD,"?");break;case":":De(p.KWRDELSE,T.LOGICOP,I.KEYWORD,":");break;case"(":De(p.OPENP,T.GROUP,I.BINARY,"(");break;case")":De(p.CLOSEP,T.GROUP,I.BINARY,")");break;case"=":De(p.EQL,T.COMPOP,I.BINARY,"=");break;case" ":case"\n":case"\t":break;case'"':var Ue="";if(-1==(Y=Re(Te)))throw"Invalid formatted string detected";if('"'===(Ee=Y)){De(p.STRING,T.OPERAND,I.STATIC,"");break}for(;tt<Le&&'"'!=Ee&&(Ue+=Ee,Ee=Y=Re(Te),-1!=Y););if(tt>=Le&&'"'!=Ee)throw"Invalid formatted string detected";De(p.STRING,T.OPERAND,I.STATIC,Ue);break;case"<":if(Ee=Y=Re(Te),-1===Y)return De(p.LES,T.COMPOP,I.BINARY,"<"),N;if(">"===Ee){De(p.NTE,T.COMPOP,I.BINARY,"<>");break}if("="===Ee){De(p.LTE,T.COMPOP,I.BINARY,"<=");break}De(p.LES,T.COMPOP,I.BINARY,"<"),be();break;case">":if(Ee=Y=Re(Te),-1===Y)return De(p.GRT,T.COMPOP,I.BINARY,">"),N;if("="===Ee){De(p.GTE,T.COMPOP,I.BINARY,">=");break}De(p.GRT,T.COMPOP,I.BINARY,">"),be();break;default:if(isNaN(Ee)){for(Ue="";tt<Le&&(je=void 0,je=!1,"+-*/^%|!=,()<>@? \t\n".indexOf(Ee)>-1&&(je=!0),!je)&&(Ue+=Ee,Ee=Y=Re(Te),-1!=Y););if(Ue.trim(),Ne(Ue)){var A=!1,Se=Ke(Ue);(Se===p.KWRDIF||Se===p.KWRDELSE||Se===p.KWRDELSEIF||Se===p.AND||Se===p.OR)&&(De(Se,T.LOGICOP,I.KEYWORD,Ue),A=!0),Se===p.KWRDTHEN&&(A=!0),Se===p.CONCAT||Se===p.ABS||Se===p.MOD||Se===p.TRUNC||Se===p.ROUND||Se===p.FLOOR||Se===p.CEIL||Se===p.DATEDIFF||Se==p.DATEADD||Se===p.SUBSTR||Se===p.UPPER||Se===p.LOWER||Se===p.DATENAME||Se===p.LENGTH||Se===p.MCONCAT||Se===p.REPLACE||Se===p.INDEXOF||Se===p.ISNUM||Se==p.FORMAT||Se==p.REGEX||Se==p.TRIM||Se==p.NEWDATE?(De(Se,T.FUNC,I.KEYWORD,Se.toString()),A=!0):A||De(p.APPDEF,T.OPERAND,I.REFERENCE,Se.toString())}else De(p.USERDEF,T.OPERAND,I.REFERENCE,Ue);if(-1===Y)return N;be();break}var Be=0;do{if(Be=10*parseInt(Be)+parseInt(Ee),Ee=Y=Re(Te),-1==Y)break}while(tt<Le&&!isNaN(parseInt(Ee)));if(-1==Y)return De(p.INTEGER,T.OPERAND,I.STATIC,Be),N;if("."==Ee){var xe=0,ve=1;if(Ee=Y=Re(Te),-1==Y)return N;do{if(xe+=Ee*(ve/=10),Ee=Y=Re(Te),-1==Y)break}while(tt<Le&&!isNaN(parseInt(Ee)));if(De(p.DOUBLE,T.OPERAND,I.STATIC,xe=Be+xe),-1==Y)return N;be()}else De(p.INTEGER,T.OPERAND,I.STATIC,Be),be()}}function Re(Ae){return++tt>=Ae.length?-1:Ae[tt]}function be(){tt--}function Ne(Ae){var je=!1;return j.indexOf(Ae.toUpperCase())>=0&&(je=!0),je}function Ke(Ae){switch(j.indexOf(Ae.toUpperCase())){case 0:return p.KWRDIF;case 1:return p.KWRDTHEN;case 2:return p.KWRDELSE;case 3:return p.AND;case 4:return p.OR;case 5:return p.CONCAT;case 6:return p.QTY;case 7:return p.RATE;case 8:return p.GROSS;case 9:return p.NET;case 10:return p.AVGRT;case 11:return p.LSTPRCHSRT;case 12:return p.LSTLNDGRT;case 13:return p.CONVQTY;case 14:return p.UNITS;case 15:return p.BASEQTY;case 16:return p.EXCHRT;case 17:return p.MOD;case 18:return p.ABS;case 19:return p.TRUNC;case 20:return p.ROUND;case 21:return p.DATEDIFF;case 22:return p.SUBSTR;case 23:return p.UPPER;case 24:return p.LOWER;case 25:return p.DATENAME;case 26:return p.LENGTH;case 27:return p.MCONCAT;case 28:return p.DATEADD;case 29:return p.REPLACE;case 30:return p.KWRDELSEIF;case 31:return p.FLOOR;case 32:return p.CEIL;case 33:return p.INDEXOF;case 34:return p.ISNUM;case 35:return p.REGEX;case 36:return p.TRIM;case 37:return p.NEWDATE;case 38:return p.FORMAT;default:return p.NONE}}function De(Ae,je,$e,nt){var gt=Ae.toString(),Qe=N.length+1,mt=[];mt.tokenName=gt,mt.tokenId=Qe,mt.tknClass=je,mt.tknType=$e,mt.tokenValue=nt,N.push(mt)}return null}(ge,N)),v),b?C.J0.IsEmpty(v.GetArray().find(J=>"REFERENCE"==J.tknType).tokenValue)?"":v.GetArray().find(J=>"REFERENCE"==J.tknType).tokenValue:function se(J,Ce){var Le,tt,Y=new F_stack,Ee=0,Te=0,Ue="",ke="",Be=!1,xe=!1,ve=!1;let A;var Se=[];Se.tokenName="",Se.tokenId=0,Se.tknClass=T.OPERAND,Se.tknType=I.STATIC,Se.tokenValue="";var Re=[];Re.fieldName="",Re.fieldID=0,Re.fieldType=0,Re.fieldFormula="",Re.fieldResult="",Re.isFormulaEvaluated=!1,Re.isFormulaValid=!1;var be=[];be.tokenName="",be.tokenId=0,be.tknClass=T.OPERAND,be.tknType=I.STATIC,be.tokenValue="";var He=[];He.tokenName="",He.tokenId=0,He.tknClass=T.OPERAND,He.tknType=I.STATIC,He.tokenValue="";var Ne=new Object,Ke=Ce.GetArray();if(null==Ke)return 0;for(var De=0;De<Ke.length;De++){Se=Ke[De];var Ae=new Object;switch(Se.tknClass){case T.OPERAND:switch(Se.tknType){case I.STATIC:Y.Push(Se);break;case I.REFERENCE:var $e=J,nt=Se.tokenValue.toString(),gt=1;if("-"===nt.substring(0,1)&&(gt=-1,nt=nt.substring(1)),"RATE"===nt&&null!=$e.Rate){var Qe=(Re=$e.Rate).fieldResult;gt<0&&(Ee=C.J0.DoubleTryParse(Qe.toString().replace(/,/g,"")),Qe=-1*Ee),Ne=ut(Ae,Se.tokenName,Se.tokenId,Se.tknClass,Se.tknType,Qe),Y.Push(Ne)}else{if(null==$e[nt])throw"Identifier not found in dictionary!";Qe=(Re=$e[nt]).fieldResult,gt<0&&(Ee=C.J0.DoubleTryParse(Qe.toString().replace(/,/g,"")),Qe=0===Ee?1*Ee:-1*Ee),Ne=ut(Ae,Se.tokenName,Se.tokenId,Se.tknClass,Se.tknType,Qe),Y.Push(Ne)}}break;case T.FINANOP:var mt=Se.tokenValue.toString();if(!(Y.Count()>=1))throw"Invalid # of operands to % Financial Operator!";if("%"!==(be=Y.Pop(),mt))throw"Invalid Financial Operator!";Ee=parseFloat(be.tokenValue.toString().replace(/,/g,"")),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,parseFloat(""+Ee/100)),Y.Push(Ne);break;case T.MATHOP:var at=Se.tokenValue;if(Y.Count()>=2)switch(He=Y.Pop(),be=Y.Pop(),Te=null!=He.tokenValue&&""!=He.tokenValue?parseFloat(He.tokenValue.toString().replace(/,/g,"")):0,Ee=null!=be.tokenValue&&""!=be.tokenValue?parseFloat(be.tokenValue.toString().replace(/,/g,"")):0,at){case"+":Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,parseFloat((Ee+Te).toString())),Y.Push(Ne);break;case"-":Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,parseFloat((Ee-Te).toString())),Y.Push(Ne);break;case"*":Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,parseFloat((Ee*Te).toString())),Y.Push(Ne);break;case"/":Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,0===Te?0:parseFloat((Ee/Te).toString())),Y.Push(Ne);break;case"^":Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,Math.pow(Ee,Te)),Y.Push(Ne);break;case"@":Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,0===Te?0:Math[Ee/Te>0?"floor":"ceil"](Ee/Te)),Y.Push(Ne)}break;case T.COMPOP:var Et=Se.tokenValue.toString(),St=!1;if(Y.Count()>=2){He=Y.Pop();var dn=(be=Y.Pop()).tokenValue.toString(),Ut=He.tokenValue.toString();switch(Et){case"<":case"<=":case">":case">=":C.J0.isDateOrNum(dn)||C.J0.isDateOrNum(Ut)?(Le=C.J0.isValidDate(dn)?C.J0.ParseDate(dn):new Date(1900,1,1),tt=C.J0.isValidDate(Ut)?C.J0.ParseDate(Ut):new Date(1900,1,1),"<"==Et&&(St=Le<tt),"<="==Et&&(St=Le<=tt),">"==Et&&(St=Le>tt),">="==Et&&(St=Le>=tt),Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,St.toString()),Y.Push(Ne)):(Te=parseFloat(He.tokenValue.toString().replace(/,/g,"")),Ee=parseFloat(be.tokenValue.toString().replace(/,/g,"")),"<"===Et&&(St=Ee<Te),"<="===Et&&(St=Ee<=Te),">"===Et&&(St=Ee>Te),">="===Et&&(St=Ee>=Te),Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,St.toString()),Y.Push(Ne));break;case"<>":case"=":C.J0.isDateOrNum(dn)||C.J0.isDateOrNum(Ut)?(Le=C.J0.isValidDate(dn)?C.J0.ParseDate(dn):new Date(1900,1,1),tt=C.J0.isValidDate(Ut)?C.J0.ParseDate(Ut):new Date(1900,1,1),St="<>"==Et?Le.getTime()!=tt.getTime():Le.getTime()==tt.getTime(),Ne=new k,Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,St.toString()),Y.Push(Ne)):"STRING"!==He.tokenName&&C.J0.DoubleBool(Ut.toString())?(C.J0.IsEmpty(He.tokenValue)||(Te=parseFloat(He.tokenValue.toString().replace(/,/g,""))),C.J0.IsEmpty(be.tokenValue)||(Ee=parseFloat(be.tokenValue.toString().replace(/,/g,""))),Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,(St="<>"===Et?Ee!=Te:Ee==Te).toString()),Y.Push(Ne)):(ke=He.tokenValue.toString(),Ue=!1===be.tokenValue?"False":!0===be.tokenValue?"True":be.tokenValue.toString(),Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,(St="<>"===Et?Ue!=ke:Ue==ke).toString()),Y.Push(Ne));break;default:throw"Unknown Comparative Operator : "+Et+"!"}}break;case T.FUNC:var Ht=Se.tokenValue.toString().trim();switch(Ht){case"ABS":if(!(Y.Count()>=1))throw"Invalid # of parameters to function, ABS!";be=Y.Pop(),(Ee=parseFloat(be.tokenValue.toString().replace(/,/g,"")))<0&&(Ee=-Ee),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,Ee),Y.Push(Ne);break;case"UPPER":if(!(Y.Count()>=1))throw"Invalid # of parameters to function, UPPER!";Ue=(be=Y.Pop()).tokenValue.toString().toUpperCase(),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Ue.toString()),Y.Push(Ne);break;case"LOWER":if(!(Y.Count()>=1))throw"Invalid # of parameters to function, LOWER!";Ue=(be=Y.Pop()).tokenValue.toString().toLowerCase(),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Ue.toString()),Y.Push(Ne);break;case"CONCAT":case"MCONCAT":if(!(Y.Count()>=1))throw"Invalid # of parameters to function, MCONCAT!";if(Ue="",Se.OpCnt>0)for(var xn=0;xn<Se.OpCnt&&0!=Y.Count()&&(He=Y.Peek()).tknType!=I.KEYWORD;xn++)Y.Pop(),Ue=(ke=He.tokenValue.toString())+Ue;else for(;Y.Count()>0&&(He=Y.Peek()).tknType!=I.KEYWORD;)Y.Pop(),Ue=(ke=He.tokenValue.toString())+Ue;Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Ue),Y.Push(Ne);break;case"MOD":if(!(Y.Count()>=2))throw"Invalid # of parameters to function, MOD!";He=Y.Pop(),be=Y.Pop(),Te=parseFloat(He.tokenValue.toString().replace(/,/g,"")),Ee=parseFloat(be.tokenValue.toString().replace(/,/g,"")),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,Ee%Te),Y.Push(Ne);break;case"SUBSTR":if(!(Y.Count()>=2))throw"Invalid # of parameters to function, SUBSTR!";var _t="";if(Y.Count()>=3){$t=Y.Pop(),He=Y.Pop(),be=Y.Pop();var cn=parseInt($t.tokenValue.toString().replace(/,/g,"")),Nn=parseInt(He.tokenValue.toString().replace(/,/g,""));cn>(Ue=be.tokenValue.toString()).length-Nn&&(cn=Ue.length-Nn),_t=Nn<0?Ue:Ue.substring(Nn,cn)}else Y.Count()>=2&&(He=Y.Pop(),be=Y.Pop(),Nn=parseInt(He.tokenValue.toString().replace(/,/g,"")),Ue=be.tokenValue.toString(),_t=Nn<=0?Ue:Ue.substring(Nn,cn));Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,_t.toString()),Y.Push(Ne);break;case"REPLACE":if(3!=Y.Count())throw"Invalid # of parameters to function, SUBSTR!";$t=Y.Pop(),He=Y.Pop(),Ue=(be=Y.Pop()).tokenValue.toString(),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Ue.replace(He.tokenValue.toString(),$t.tokenValue.toString())),Y.Push(Ne);break;case"INDEXOF":if(2!=Y.Count())throw"Invalid # of parameters to function, SUBSTR!";He=Y.Pop(),Ue=(be=Y.Pop()).tokenValue.toString(),Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,Ue.indexOf(He.tokenValue.toString())),Y.Push(Ne);break;case"TRUNC":if(!(Y.Count()>=2))throw"Invalid # of parameters to function, TRUNC!";var xt;He=Y.Pop(),be=Y.Pop(),Te=parseFloat(He.tokenValue.toString().replace(/,/g,"")),Ue=be.tokenValue.toString(),xt=(xt=parseFloat(Ue.toString().replace(/,/g,"")))<0&&xt>-1?-1*parseFloat(parseInt(xt).toString()+"."+xt.toString().substring(xt.toString().indexOf(".")+1).substring(0,Te)):parseFloat(parseInt(xt).toString()+"."+xt.toString().substring(xt.toString().indexOf(".")+1).substring(0,Te)),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,xt),Y.Push(Ne);break;case"ROUND":if(!(Y.Count()>=2))throw"Invalid # of parameters to function, ROUND!";{let st="",Jn="",wt=1;He=Y.Pop(),be=Y.Pop(),ke=He.tokenValue.toString(),Ue=be.tokenValue.toString(),Te=C.J0.Double(ke.toString().replace(/,/g,"")),Ee=C.J0.Double(Ue.toString().replace(/,/g,"")),st=ke,Jn=Ue;let Qt=Te,Dn=Ee+Te/2,rn=Dn-Dn%Qt,ps=Jn.indexOf(".");if(-1==ps)Qt<1?(Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,C.J0.Double(Ee)),Y.Push(Ne)):(Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,C.J0.Double(rn)),Y.Push(Ne));else{ps++;let Gn=Jn.substr(ps);Gn.length>5&&(Gn=Gn.substr(0,5));let Gs=st.indexOf(".");if(Gs>0){let Po;if(st=st.substr(Gs+1),st.length>5&&(st=st.substr(0,5)),Dn=C.J0.Double(Gn),Qt=C.J0.Double(st),Gn.length<st.length)Po=C.J0.Double(Jn);else{wt*=Math.pow(10,C.J0.Double(Gn.length-st.length)),Qt*=wt;let Oo=Dn%Qt;Dn+=Qt/2,Oo=Dn%Qt,Dn-=Oo,Po=C.J0.Double(Jn.substr(0,ps)),wt=Math.pow(10,Gn.length),Po+=C.J0.Double(Dn)/wt}Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,C.J0.Double(Po)),Y.Push(Ne)}else Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,C.J0.Double(rn)),Y.Push(Ne)}}break;case"FLOOR":Y.Count()>=1&&(Ue=(be=Y.Pop()).tokenValue.toString(),Ee=parseFloat(Ue.toString().replace(/,/g,"")),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,Math.floor(Ee)),Y.Push(Ne));break;case"CEIL":Y.Count()>=1&&(Ue=(be=Y.Pop()).tokenValue.toString(),Ee=parseFloat(Ue.toString().replace(/,/g,"")),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,Math.ceil(Ee)),Y.Push(Ne));break;case"ISNUM":if(1==Y.Count()){var Ni=Ni(Ue=(be=Y.Pop()).tokenValue.toString())?1:0;Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,Ni),Y.Push(Ne)}break;case"FORMAT":if(4==Y.Count()){let st=new G.bT,Jn=(be=Y.Pop()).tokenValue.toString().split("~");be=Y.Pop(),B=-1,be.tokenValue.toString().split("~").forEach(wt=>{B++,!st.ContainsKey(wt)&&st.Add(wt,B<Jn.length?Jn[B]:wt)}),be=Y.Pop(),O=C.J0.Int(be.tokenValue),be=Y.Pop(),Ee=C.J0.Int(be.tokenValue),Ee=C.J0.Int(be.tokenValue),Ue="",st.ContainsKey("B")&&(Ee>=1e9||1==st.length)?(Ue=st.B,Ee/=1e9):st.ContainsKey("C")&&(Ee>=1e7||!(st.ContainsKey("M")||st.ContainsKey("L")||st.ContainsKey("K")))?(Ue=st.C,Ee/=1e7):st.ContainsKey("M")&&(Ee>=1e6||!st.ContainsKey("L")&&!st.ContainsKey("K"))?(Ue=st.M,Ee/=1e6):st.ContainsKey("L")&&(Ee>=1e5||!st.ContainsKey("K"))?(Ue=st.L,Ee/=1e5):st.ContainsKey("K")&&(Ue=st.K,Ee/=1e3),Te=Ee-Math.round(Ee),Ee=Math.round(Ee),O>0&&0!=Te?(Ee+=Math.round(Te*Math.pow(10,O))/Math.pow(10,O),ke="N"+O.toString()):ke="N0",Ue=0!=Ee?Ee.ToString(ke).toString()+" "+Ue:"0",Ne=new k,Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Ue),Y.Push(Ne)}break;case"REGEX":if(2!=Y.Count())throw"Invalid # of parameters to function, REGEX";be=Y.Pop(),He=Y.Pop(),Ue=be.getTokenValue.toString(),ke=He.getTokenValue.toString(),Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,Ue.match(ke)?1:0),Y.Push(Ne);break;case"TRIM":if(2!=Y.Count())throw new Error("Invalid # of parameters to function, TRIM");{let st;be=Y.Pop(),He=Y.Pop(),Ue=be.getTokenValue.toString(),ke=He.getTokenValue.toString(),-1!=Ue.indexOf("\r\n")?Ue=Ue.replace("\r\n","\n"):-1!=Ue.indexOf("\n")&&(Ue=Ue.replace("\n","\n")),st=Ue.split(""),Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,ke),Y.Push(Ne)}break;case"NEWDATE":if(!(Y.Count()>1))throw new Error("Invalid # of parameters to function, CEIL!");null!==(be=Y.Pop()).getTokenValue.toString()?be.getTokenValue.toString().length>0&&(isNaN(be.getTokenValue.toString())||(B=parseInt(be.getTokenValue.toString()),O=B,ae=B)):(B=0,O=0,ae=0),Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,new Date(ae,O,B)),Y.Push(Ne);break;case"DATEDIFF":if(!(Y.Count()>=3))throw"Invalid # of parameters to function, DATEDIFF!";{var en;$t=Y.Pop(),He=Y.Pop(),en=0,Wt=(be=Y.Pop()).tokenValue.toString().toUpperCase();let wt=new Date("01-01-0001"),Qt=new Date,Dn=new Date;try{if(""==He.tokenValue||""==$t.tokenValue){Ne=new k,Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,""),Y.Push(Ne);break}try{Qt=C.J0.parseFlexibleDate(C.J0.String(He.tokenValue)),Dn=C.J0.parseFlexibleDate(C.J0.String($t.tokenValue))}catch{Ne=new k,Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,""),Y.Push(Ne);break}}catch{Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,""),Y.Push(Ne);break}switch(en=0,C.J0.String(Wt).toUpperCase()){case"Y":if(en=0,Qt>=Dn){for(wt=new Date(Dn),wt.setFullYear(Dn.getFullYear()+1);wt<=Qt;)en++,wt.setFullYear(wt.getFullYear()+1);1==C.J0.GetTimeSpan(wt,Qt)&&en++}else for(wt=new Date(Qt),wt.setFullYear(Qt.getFullYear()+1);wt<=Dn;)en--,wt.setFullYear(wt.getFullYear()+1);break;case"M":if(en=0,Qt>=Dn){for(wt=new Date(Dn),wt=C.J0.addMonths(Dn,1);wt<=Qt;)en++,wt=C.J0.addMonths(wt,1);1==C.J0.GetTimeSpan(wt,Qt)&&en++}else for(wt=new Date(Qt),wt=C.J0.addMonths(Qt,1);wt<=Dn;)en--,wt=C.J0.addMonths(wt,1);break;case"D":en=C.J0.GetTimeSpan(Qt,Dn);break;case"T":let Yi=Qt.Subtract(Dn),rn=Yi.TotalHours.PrefixZero(2)+":"+Yi.Minutes.PrefixZero(2)+":"+Yi.Seconds.PrefixZero(2);return Ne=new k,Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,rn),Y.Push(Ne),Y.Pop();case"HH":return Ne=new k,Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Qt.Subtract(Dn).TotalHours.toString()),Y.Push(Ne),Y.Pop();case"HHM":Ne=new k;let ps=Qt.Subtract(Dn).TotalHours,Gn=Math.floor(Math.abs(ps));return Gn+=60*(Math.abs(ps)-Gn)/100,ps<0&&(Gn=-Gn),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,Gn.toString()),Y.Push(Ne),Y.Pop();case"MM":en=Qt.Subtract(Dn).TotalMinutes;break;case"SS":en=Qt.Subtract(Dn).TotalSeconds;break;default:throw"Invalid Interval specified for DateDiff. Valid values are Y, M, D!"}Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,parseFloat(en.toString().replace(/,/g,""))),Y.Push(Ne)}break;case"TIMEADD":if(Y.length>=2){let st,Jn,wt=0;for(;Y.length>0;)be=Y.Pop(),st=parseFloat(be.getTokenValue().toString()),0!=st&&(Jn=st.ToString("0.00").split("."),wt+=60*parseInt(Jn[0]),Jn.length>1&&(st>0?wt+=parseInt(Jn[1]):wt-=parseInt(Jn[1])));st=wt/60+parseFloat("0."+(wt%60).ToString("00")),Ne=new k,Ne=ut(Ae,"DOUBLE",99999,T.OPERAND,I.STATIC,st.ToString("0.00")),Y.Push(Ne)}break;case"DATEADD":if(!(Y.Count()>=3))throw"Invalid # of parameters to function, DATEADD!";{var mi,Wt,$t=[];$t=Y.Pop(),He=Y.Pop(),Wt=(be=Y.Pop()).tokenValue.toString().toUpperCase();let wt=new Date,Qt=new Date;if(wt=C.J0.ParseDate(He.tokenValue),mi=parseInt($t.tokenValue.toString().replace(/,/g,"")),isNaN(mi)){Ne=ut(Ae,"DATETIME",99999,T.OPERAND,I.STATIC,""),Y.Push(Ne);break}switch(Wt){case"Y":Qt=new Date(new Date(wt)).AddYears(mi);break;case"M":Qt=new Date(new Date(wt)).AddMonths(mi);break;case"D":Qt=new Date(new Date(wt)).AddDays(mi);break;case"MM":Qt=new Date(new Date(wt).AddMinutes(mi));break;default:throw new Error("Invalid Interval specified for DATEADD. Valid values are Y, M, D!")}Qt=C.J0.ParseDate(Qt),Ne=ut(Ae,"DATETIME",99999,T.OPERAND,I.STATIC,Qt),Y.Push(Ne)}break;case"DATENAME":He=Y.Pop();var yn=(be=Y.Pop()).tokenValue.toString();if(A=Date.Today(),!He||C.J0.IsEmpty(He.tokenValue)){ut(Ne,"STRING",99999,T.OPERAND,I.STATIC,""),Y.Push(Ne);break}try{A=C.J0.ParseDate(He.tokenValue)}catch{ut(Ne,"STRING",99999,T.OPERAND,I.STATIC,"ERR"),Y.Push(Ne);break}if("Invalid Date"==A){ut(Ne,"STRING",99999,T.OPERAND,I.STATIC,"ERR"),Y.Push(Ne);break}switch(yn.toUpperCase()){case"QUARTER":case"QUARTERLY":var ri=0;A.iMonth()>=x.d.SessionManager.AccountingFromMonth?(ri=(A.iMonth()-x.d.SessionManager.AccountingFromMonth)/3,ri++):A.iMonth()<x.d.SessionManager.AccountingFromMonth&&(ri=(12+A.iMonth()-x.d.SessionManager.AccountingFromMonth)/3,ri++),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,"Q"+ri+" "+A.getFullYear());break;case"HALFYEAR":case"HALFYEARLY":var Fi=0;A.iMonth()>=x.d.SessionManager.AccountingFromMonth?(Fi=(A.iMonth()-x.d.SessionManager.AccountingFromMonth)/6,Fi++):A.iMonth()<x.d.SessionManager.AccountingFromMonth&&(Fi=(12+A.iMonth()-x.d.SessionManager.AccountingFromMonth)/6,Fi++),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,"H"+Fi+" "+A.getFullYear());break;case"WEEK":case"WEEKLY":var Tt=0,ct=new Date(A.getFullYear(),A.getMonth(),1).getDay();Tt=(A.getDate()+ct)/7,(A.getDate()+ct)%7!=0&&Tt++,Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,"W"+Tt+" "+A.ToString("MMM"));break;case"WEEKOFYEAR":break;case"DAYSINMONTH":A=new Date,Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,A.DaysInMonth());break;case"FIRSTOFCURRENTMONTH":A=Date.Today(),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,new Date(A.getFullYear(),A.getMonth(),1));break;case"FIRSTOFNEXTMONTH":A=Date.Today(),Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,new Date(A.getFullYear(),A.getMonth(),1).AddMonths(1));break;case"DDDD":Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,A.getDayName());break;case"DDD":Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(A));break;default:Ne=ut(Ae,"STRING",99999,T.OPERAND,I.STATIC,A.ToString(yn))}Y.Push(Ne);break;case"LENGTH":if(!(Y.Count()>=1))throw"Invalid # of parameters to function, DATEDIFF!";var vn=(be=Y.Pop()).tokenValue.toString();Ne=ut(Ae,"INTEGER",99999,T.OPERAND,I.STATIC,vn.length),Y.Push(Ne);break;default:throw"Unknown Function : "+Ht+"!"}break;case T.LOGICOP:var On=Se.tokenName.trim();switch(On){case"KWRDIF":Y.Push(Se);break;case"KWRDELSEIF":Y.Push(Se),ve=!0;break;case"KWRDELSE":var Li,li;if(ve){if(!(Y.Count()>4))throw"Invalid If..Else syntax!";var Xn,nl;Xn=Y.Pop();for(var Ii=!1;Y.Count()>0;)if(nl=Y.Pop(),Y.Pop(),"TRUE"===Y.Pop().tokenValue.toString().toUpperCase()){Y.Clear(),Y.Push(nl),Ii=!0;break}Ii||(Y.Clear(),Y.Push(Xn))}else if(Y.Count()>=4){var sa;if(sa=Y.Pop(),$t=Y.Pop(),He=Y.Pop(),be=Y.Pop(),li=He.tokenName.toString().trim(),Li=be.tokenValue.toString(),"KWRDIF"!==li.toUpperCase())throw"Invalid If..Else syntax!";if("TRUE"===Li.toUpperCase())Y.Push($t);else{if("FALSE"!==Li.toUpperCase())throw"Invalid If..Else syntax!";Y.Push(sa)}}break;case"NOT":if(!(Y.Count()>=1))throw"Invalid use of ! (Not) operator!";if("TRUE"===(Li=(be=Y.Pop()).tokenValue.toString().trim()).toUpperCase())Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,"FALSE"),Y.Push(Ne);else{if("FALSE"!==Li.trim().toUpperCase())throw"Invalid operand used with ! (Not) operator!";Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,"TRUE"),Y.Push(Ne)}break;case"AND":case"OR":if(!(Y.Count()>=2))throw"Invalid # of operands used with And (&&) operator!";He=Y.Pop(),be=Y.Pop(),ke=He.tokenValue.toString(),Ue=be.tokenValue.toString();var xi=ke.toUpperCase().trim(),oo=Ue.toUpperCase().trim();if("TRUE"===xi)xe=!0;else{if("FALSE"!==xi)throw"Invalid operand used with And (&&) operator!";xe=!1}if("TRUE"===oo)Be=!0;else{if("FALSE"!==oo)throw"Invalid operand used with And (&&) operator!";Be=!1}Ne=ut(Ae,"BOOL",99999,T.OPERAND,I.STATIC,("AND"===On?Be&&xe:Be||xe).toString().trim().toUpperCase()),Y.Push(Ne)}}}if(1==Y.Count())return Y.Pop();throw"Invalid number of arguments in the formula!";function ut(st,Jn,wt,Qt,Dn,Yi){return st.tokenName=Jn,st.tokenId=wt,st.tknClass=Qt,st.tknType=Dn,st.tokenValue=Yi,st}}(E,v).tokenValue;function ee(J){var Ce=!1;switch(J.tknClass){case T.MATHOP:case T.COMPOP:Ce=!0;break;default:Ce=!1}return Ce}function U(J){var Ce=!1;return"!"==J&&(Ce=!0),Ce}function ie(J){var Ce=!1;return-1!=oe.indexOf(J.toUpperCase())&&(Ce=!0),Ce}}static{this.\u0275fac=function(E){return new(E||R)}}static{this.\u0275prov=X.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}}return R})();class ne{constructor(V="",ge=null){this.fieldName="",this.fieldName=V,this.fieldResult=ge??""}getFieldResult(){return this.fieldResult}getFieldName(){return this.fieldName}setFieldValue(V){this.fieldResult=V??""}setFieldDetails(V,ge,E,b,p,j,T){this.fieldName=V,this.fieldResult=p??""}Clone(){let V=new ne;return V.fieldName=this.fieldName,V.fieldResult=this.fieldResult,V}}var z=function(R){return R[R.ADD=0]="ADD",R[R.SUB=1]="SUB",R[R.MUL=2]="MUL",R[R.DIV=3]="DIV",R[R.POW=4]="POW",R[R.PCT=5]="PCT",R[R.QUOT=6]="QUOT",R[R.ABS=7]="ABS",R[R.NOT=8]="NOT",R[R.OPENP=9]="OPENP",R[R.CLOSEP=10]="CLOSEP",R[R.DQT=11]="DQT",R[R.AND=12]="AND",R[R.OR=13]="OR",R[R.COMA=14]="COMA",R[R.EQL=15]="EQL",R[R.GRT=16]="GRT",R[R.LES=17]="LES",R[R.GTE=18]="GTE",R[R.LTE=19]="LTE",R[R.NTE=20]="NTE",R[R.KWRDTHEN=21]="KWRDTHEN",R[R.KWRDIF=22]="KWRDIF",R[R.KWRDIF2=23]="KWRDIF2",R[R.KWRDELSE=24]="KWRDELSE",R[R.IDENTIFIER=25]="IDENTIFIER",R[R.INTEGER=26]="INTEGER",R[R.DOUBLE=27]="DOUBLE",R[R.CONCAT=28]="CONCAT",R[R.MOD=29]="MOD",R[R.TRUNC=30]="TRUNC",R[R.ROUND=31]="ROUND",R[R.DATEDIFF=32]="DATEDIFF",R[R.NONE=33]="NONE",R[R.QTY=34]="QTY",R[R.RATE=35]="RATE",R[R.GROSS=36]="GROSS",R[R.NET=37]="NET",R[R.AVGRT=38]="AVGRT",R[R.LSTPRCHSRT=39]="LSTPRCHSRT",R[R.LSTLNDGRT=40]="LSTLNDGRT",R[R.CONVQTY=41]="CONVQTY",R[R.UNITS=42]="UNITS",R[R.BASEQTY=43]="BASEQTY",R[R.EXCHRT=44]="EXCHRT",R[R.STRING=45]="STRING",R[R.USERDEF=46]="USERDEF",R[R.APPDEF=47]="APPDEF",R[R.SUBSTR=48]="SUBSTR",R[R.UPPER=49]="UPPER",R[R.LOWER=50]="LOWER",R[R.DATENAME=51]="DATENAME",R[R.LENGTH=52]="LENGTH",R[R.MCONCAT=53]="MCONCAT",R[R.DATEADD=54]="DATEADD",R[R.REPLACE=55]="REPLACE",R[R.KWRDELSEIF=56]="KWRDELSEIF",R[R.FLOOR=57]="FLOOR",R[R.CEIL=58]="CEIL",R[R.INDEXOF=59]="INDEXOF",R[R.ISNUM=60]="ISNUM",R[R.REGEX=61]="REGEX",R[R.TRIM=62]="TRIM",R[R.NEWDATE=63]="NEWDATE",R[R.FORMAT=64]="FORMAT",R}(z||{}),Z=function(R){return R[R.OPERAND=0]="OPERAND",R[R.OPERATOR=1]="OPERATOR",R[R.USERDEF=2]="USERDEF",R[R.MATHOP=3]="MATHOP",R[R.LOGICOP=4]="LOGICOP",R[R.COMPOP=5]="COMPOP",R[R.FINANOP=6]="FINANOP",R[R.FUNC=7]="FUNC",R[R.GROUP=8]="GROUP",R}(Z||{}),w=function(R){return R[R.REFERENCE=0]="REFERENCE",R[R.UNARY=1]="UNARY",R[R.BINARY=2]="BINARY",R[R.TERTIARY=3]="TERTIARY",R[R.STATIC=4]="STATIC",R[R.KEYWORD=5]="KEYWORD",R}(w||{});class k{constructor(V="",ge=0,E=Z.OPERAND,b=w.STATIC,p=""){this.tokenId=0,this.OpCnt=0,this.tokenName=V,this.tokenId=ge,this.tknClass=E,this.tknType=b,this.tokenValue=p}SetAll(V,ge,E,b,p){this.tokenName=V,this.tokenId=ge,this.tknClass=E,this.tknType=b,this.tokenValue=p}getTokenClass(){return this.tknClass}getTokenType(){return this.tknType}getTokenValue(){return this.tokenValue}getTokenName(){return this.tokenName}getTokenID(){return this.tokenId}setTokenName(V){this.tokenName=V}setTokenValue(V){this.tokenValue=V}getFormattedString(){let V="";return V="Name : "+this.tokenName+"\t\t Class : "+this.tknClass.toString()+"\t\t Type : "+this.tknType.toString()+"\t\t Value : "+this.tokenValue,V}}class me{constructor(){this.ThrowException=!0,this.formulaParser=new le}ParseFormula(V,ge){let E="";try{return this.formulaParser.tokenizeString(V,ge),E="Expression Parsing Successful!!!",E}catch(b){throw new Error("Unable to Parse Expression"+b.message)}}SetKeyWords(V){("REPORT"==V||"VPT"==V)&&(this.formulaParser.keywords=["IF","THEN","ELSE","AND","OR","CONCAT","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT","TIMEADD"])}}class le{constructor(){this.bufPointer=0,this.keywords=["IF","THEN","ELSE","AND","OR","CONCAT","QTY","RATE","GROSS","NET","AVGRATE","LASTPURCHASERATE","LASTLANDINGRATE","CONVERSIONQTY","UNITS","BASEQTY","EXCHANGERATE","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT","TIMEADD"],this.srcString="",this.bufPointer=-1}getNextChar(){return this.bufPointer++,this.bufPointer>=this.srcString.length?-1:this.srcString.charCodeAt(this.bufPointer)}putCharBack(){this.bufPointer--}isTokenKeyChar(V){let ge=!1;return"+-*/^%|!=,()<>@? \t\n".indexOf(V)>-1&&(ge=!0),ge}isTokenKeyword(V){let ge=!1;return this.keywords.Contains(V.toUpperCase())&&(ge=!0),ge}getTokenName(V){let ge=-1,E=V.toUpperCase();for(let b=0;b<this.keywords.length;b++)if(this.keywords[b]==E){ge=b;break}switch(ge){case 0:return z.KWRDIF;case 1:return z.KWRDTHEN;case 2:return z.KWRDELSE;case 3:return z.AND;case 4:return z.OR;case 5:return z.CONCAT;case 6:return z.QTY;case 7:return z.RATE;case 8:return z.GROSS;case 9:return z.NET;case 10:return z.AVGRT;case 11:return z.LSTPRCHSRT;case 12:return z.LSTLNDGRT;case 13:return z.CONVQTY;case 14:return z.UNITS;case 15:return z.BASEQTY;case 16:return z.EXCHRT;case 17:return z.MOD;case 18:return z.ABS;case 19:return z.TRUNC;case 20:return z.ROUND;case 21:return z.DATEDIFF;case 22:return z.SUBSTR;case 23:return z.UPPER;case 24:return z.LOWER;case 25:return z.DATENAME;case 26:return z.LENGTH;case 27:return z.MCONCAT;case 28:return z.DATEADD;case 29:return z.REPLACE;case 30:return z.KWRDELSEIF;case 31:return z.FLOOR;case 32:return z.CEIL;case 33:return z.INDEXOF;case 34:return z.ISNUM;case 35:return z.REGEX;case 36:return z.TRIM;case 37:return z.NEWDATE;case 38:return z.FORMAT;default:return z.NONE}}addToken(V,ge,E,b){let p=V.toString(),T=new k(p,this.symbolTable.length+1,ge,E,b);this.symbolTable.push(T)}unaryMinusRefactor(V){let ge="No unary minus detected",E=new k("",99999,Z.OPERATOR,w.UNARY,""),b=new k("",99999,Z.OPERATOR,w.UNARY,""),p=new k("",99999,Z.OPERATOR,w.UNARY,"");if(V.length<2)return ge="Not many token to check for unary mius",ge;if(0==V.length)return ge="Symbol Table Empty",ge;let j=0;for(;j<V.length;)if(E=V[j],j++,E.getTokenValue().toString().Trim().Equals("-")){if(b.getTokenClass()!=Z.OPERAND){if(!(j<V.length&&"CLOSEP"!=b.getTokenName()))return ge;if(p=V[j],j++,p.getTokenClass()==Z.OPERAND){if(V.RemoveAt(j-2),j--,p.getTokenType()==w.STATIC){let T=p.getTokenName().toString().Trim();if("INTEGER"!=T&&"DOUBLE"!=T)return ge="Improper use of - operator!",ge;p.setTokenValue(-1*parseFloat(p.getTokenValue().toString().Trim()))}else p.setTokenValue("-"+p.getTokenValue().toString().Trim());b=p}}}else b=E;return ge}tokenizeString(V,ge){let b,E=0,p=0;for(this.srcString=V,this.symbolTable=ge,p=this.srcString.length,this.bufPointer=-1;this.bufPointer<p;){if(E=this.getNextChar(),b=String.fromCharCode(E),-1==E)return;switch(b){case"+":this.addToken("ADD",Z.MATHOP,w.BINARY,"+");break;case"-":this.addToken("SUB",Z.MATHOP,w.BINARY,"-");break;case"*":this.addToken(z.MUL,Z.MATHOP,w.BINARY,"*");break;case"/":this.addToken(z.DIV,Z.MATHOP,w.BINARY,"/");break;case"^":this.addToken(z.POW,Z.MATHOP,w.BINARY,"^");break;case"|":this.addToken(z.ABS,Z.MATHOP,w.UNARY,"|");break;case"@":this.addToken(z.QUOT,Z.MATHOP,w.BINARY,"@");break;case",":this.addToken(z.COMA,Z.OPERATOR,w.BINARY,",");break;case"%":this.addToken(z.PCT,Z.FINANOP,w.BINARY,"%");break;case"!":this.addToken(z.NOT,Z.LOGICOP,w.UNARY,"!");break;case"?":this.addToken(z.KWRDIF2,Z.LOGICOP,w.KEYWORD,"?");break;case":":this.addToken(z.KWRDELSE,Z.LOGICOP,w.KEYWORD,":");break;case"(":this.addToken(z.OPENP,Z.GROUP,w.BINARY,"(");break;case")":this.addToken(z.CLOSEP,Z.GROUP,w.BINARY,")");break;case"=":this.addToken(z.EQL,Z.COMPOP,w.BINARY,"=");break;case" ":case"\n":case"\t":break;case'"':let j="",T=0;if(E=this.getNextChar(),b=String.fromCharCode(E),-1==E)throw new Error("Invalid formatted string detected!");if('"'==b){this.addToken(z.STRING,Z.OPERAND,w.STATIC,"");break}for(;this.bufPointer<p&&'"'!=b&&(j+=b,T++,E=this.getNextChar(),b=String.fromCharCode(E),-1!=E););if(this.bufPointer>=p&&'"'!=b)throw new Error("Invalid formatted string detected!");this.addToken(z.STRING,Z.OPERAND,w.STATIC,j);break;case"<":if(E=this.getNextChar(),b=String.fromCharCode(E),-1==E)return void this.addToken(z.LES,Z.COMPOP,w.BINARY,"<");if(">"==b){this.addToken(z.NTE,Z.COMPOP,w.BINARY,"<>");break}if("="==b){this.addToken(z.LTE,Z.COMPOP,w.BINARY,"<=");break}this.addToken(z.LES,Z.COMPOP,w.BINARY,"<"),this.putCharBack();break;case">":if(E=this.getNextChar(),b=String.fromCharCode(E),-1==E)return void this.addToken(z.GRT,Z.COMPOP,w.BINARY,">");if("="==b){this.addToken(z.GTE,Z.COMPOP,w.BINARY,">=");break}this.addToken(z.GRT,Z.COMPOP,w.BINARY,">"),this.putCharBack();break;default:if(C.J0.IsDigit(b)){let I=0;do{if(I=10*I+b.charCodeAt(0)-48,E=this.getNextChar(),b=String.fromCharCode(E),-1==E)break}while(this.bufPointer<p&&C.J0.IsDigit(b));if(-1==E)return void this.addToken(z.INTEGER,Z.OPERAND,w.STATIC,I);if("."==b){let oe=0,F=1;if(E=this.getNextChar(),b=String.fromCharCode(E),-1==E)return;do{if(F/=10,oe+=(b.charCodeAt(0)-48)*F,E=this.getNextChar(),b=String.fromCharCode(E),-1==E)break}while(this.bufPointer<p&&C.J0.IsDigit(b));if(oe=I+oe,this.addToken(z.DOUBLE,Z.OPERAND,w.STATIC,C.J0.Double(oe)),-1==E)return;this.putCharBack()}else this.addToken(z.INTEGER,Z.OPERAND,w.STATIC,C.J0.Int(I)),this.putCharBack();break}{let I="",oe=0;for(;this.bufPointer<p&&!this.isTokenKeyChar(b)&&(I+=b,oe++,E=this.getNextChar(),b=String.fromCharCode(E),-1!=E););if(I.Trim(),this.isTokenKeyword(I)){let F=!1,N=this.getTokenName(I);(N==z.KWRDIF||N==z.KWRDELSE||N==z.KWRDELSEIF||N==z.AND||N==z.OR)&&(this.addToken(N,Z.LOGICOP,w.KEYWORD,I),F=!0),N==z.KWRDTHEN?F=!0:N==z.CONCAT||N==z.ABS||N==z.MOD||N==z.TRUNC||N==z.ROUND||N==z.FLOOR||N==z.CEIL||N==z.DATEDIFF||N==z.DATEADD||N==z.SUBSTR||N==z.UPPER||N==z.LOWER||N==z.DATENAME||N==z.LENGTH||N==z.MCONCAT||N==z.REPLACE||N==z.INDEXOF||N==z.ISNUM||N==z.REGEX||N==z.TRIM||N==z.NEWDATE||N==z.FORMAT?(this.addToken(I,Z.FUNC,w.KEYWORD,I),F=!0):F||this.addToken(z.APPDEF,Z.OPERAND,w.REFERENCE,N.toString())}else this.addToken(z.USERDEF,Z.OPERAND,w.REFERENCE,I);if(-1==E)return;this.putCharBack();break}}}}}},90033:function(ze,Oe,n){var G,X,W,ne,z,Z,he,me,le,V,ge,E,p,T,oe,F,te,v,C;ze.exports=(C=n(95275),n(26528),void(C.lib.Cipher||(G=C,X=G.lib,W=X.Base,ne=X.WordArray,z=X.BufferedBlockAlgorithm,Z=G.enc,he=Z.Base64,me=G.algo.EvpKDF,le=X.Cipher=z.extend({cfg:W.extend(),createEncryptor:function(S,B){return this.create(this._ENC_XFORM_MODE,S,B)},createDecryptor:function(S,B){return this.create(this._DEC_XFORM_MODE,S,B)},init:function(S,B,O){this.cfg=this.cfg.extend(O),this._xformMode=S,this._key=B,this.reset()},reset:function(){z.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){return S&&this._append(S),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(B){return"string"==typeof B?v:F}return function(B){return{encrypt:function(O,ae,se){return S(ae).encrypt(B,O,ae,se)},decrypt:function(O,ae,se){return S(ae).decrypt(B,O,ae,se)}}}}()}),X.StreamCipher=le.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),V=G.mode={},ge=X.BlockCipherMode=W.extend({createEncryptor:function(S,B){return this.Encryptor.create(S,B)},createDecryptor:function(S,B){return this.Decryptor.create(S,B)},init:function(S,B){this._cipher=S,this._iv=B}}),E=V.CBC=function(){var S=ge.extend();function B(O,ae,se){var fe,_=this._iv;_?(fe=_,this._iv=undefined):fe=this._prevBlock;for(var K=0;K<se;K++)O[ae+K]^=fe[K]}return S.Encryptor=S.extend({processBlock:function(O,ae){var se=this._cipher,fe=se.blockSize;B.call(this,O,ae,fe),se.encryptBlock(O,ae),this._prevBlock=O.slice(ae,ae+fe)}}),S.Decryptor=S.extend({processBlock:function(O,ae){var se=this._cipher,fe=se.blockSize,_=O.slice(ae,ae+fe);se.decryptBlock(O,ae),B.call(this,O,ae,fe),this._prevBlock=_}}),S}(),p=(G.pad={}).Pkcs7={pad:function(S,B){for(var O=4*B,ae=O-S.sigBytes%O,se=ae<<24|ae<<16|ae<<8|ae,fe=[],_=0;_<ae;_+=4)fe.push(se);var K=ne.create(fe,ae);S.concat(K)},unpad:function(S){S.sigBytes-=255&S.words[S.sigBytes-1>>>2]}},X.BlockCipher=le.extend({cfg:le.cfg.extend({mode:E,padding:p}),reset:function(){var S;le.reset.call(this);var B=this.cfg,O=B.iv,ae=B.mode;this._xformMode==this._ENC_XFORM_MODE?S=ae.createEncryptor:(S=ae.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,O&&O.words):(this._mode=S.call(ae,this,O&&O.words),this._mode.__creator=S)},_doProcessBlock:function(S,B){this._mode.processBlock(S,B)},_doFinalize:function(){var S,B=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(B.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),B.unpad(S)),S},blockSize:4}),T=X.CipherParams=W.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),oe=(G.format={}).OpenSSL={stringify:function(S){var O=S.ciphertext,ae=S.salt;return(ae?ne.create([1398893684,1701076831]).concat(ae).concat(O):O).toString(he)},parse:function(S){var B,O=he.parse(S),ae=O.words;return 1398893684==ae[0]&&1701076831==ae[1]&&(B=ne.create(ae.slice(2,4)),ae.splice(0,4),O.sigBytes-=16),T.create({ciphertext:O,salt:B})}},F=X.SerializableCipher=W.extend({cfg:W.extend({format:oe}),encrypt:function(S,B,O,ae){ae=this.cfg.extend(ae);var se=S.createEncryptor(O,ae),fe=se.finalize(B),_=se.cfg;return T.create({ciphertext:fe,key:O,iv:_.iv,algorithm:S,mode:_.mode,padding:_.padding,blockSize:S.blockSize,formatter:ae.format})},decrypt:function(S,B,O,ae){return ae=this.cfg.extend(ae),B=this._parse(B,ae.format),S.createDecryptor(O,ae).finalize(B.ciphertext)},_parse:function(S,B){return"string"==typeof S?B.parse(S,this):S}}),te=(G.kdf={}).OpenSSL={execute:function(S,B,O,ae,se){if(ae||(ae=ne.random(8)),se)var fe=me.create({keySize:B+O,hasher:se}).compute(S,ae);else fe=me.create({keySize:B+O}).compute(S,ae);var _=ne.create(fe.words.slice(B),4*O);return fe.sigBytes=4*B,T.create({key:fe,iv:_,salt:ae})}},v=X.PasswordBasedCipher=F.extend({cfg:F.cfg.extend({kdf:te}),encrypt:function(S,B,O,ae){var se=(ae=this.cfg.extend(ae)).kdf.execute(O,S.keySize,S.ivSize,ae.salt,ae.hasher);ae.iv=se.iv;var fe=F.encrypt.call(this,S,B,se.key,ae);return fe.mixIn(se),fe},decrypt:function(S,B,O,ae){ae=this.cfg.extend(ae),B=this._parse(B,ae.format);var se=ae.kdf.execute(O,S.keySize,S.ivSize,B.salt,ae.hasher);return ae.iv=se.iv,F.decrypt.call(this,S,B,se.key,ae)}}))))},91353:function(ze,Oe,n){var x,C;ze.exports=(C=n(95275),n(90033),C.mode.ECB=((x=C.lib.BlockCipherMode.extend()).Encryptor=x.extend({processBlock:function(G,X){this._cipher.encryptBlock(G,X)}}),x.Decryptor=x.extend({processBlock:function(G,X){this._cipher.decryptBlock(G,X)}}),x),C.mode.ECB)},92787:function(ze,Oe,n){var C;ze.exports=(C=n(95275),function(x){var G=C,X=G.lib,W=X.WordArray,ne=X.Hasher,z=G.algo,Z=[],w=[];!function(){function me(ge){for(var E=x.sqrt(ge),b=2;b<=E;b++)if(!(ge%b))return!1;return!0}function le(ge){return 4294967296*(ge-(0|ge))|0}for(var R=2,V=0;V<64;)me(R)&&(V<8&&(Z[V]=le(x.pow(R,.5))),w[V]=le(x.pow(R,1/3)),V++),R++}();var he=[],k=z.SHA256=ne.extend({_doReset:function(){this._hash=new W.init(Z.slice(0))},_doProcessBlock:function(me,le){for(var R=this._hash.words,V=R[0],ge=R[1],E=R[2],b=R[3],p=R[4],j=R[5],T=R[6],I=R[7],oe=0;oe<64;oe++){if(oe<16)he[oe]=0|me[le+oe];else{var F=he[oe-15],te=he[oe-2];he[oe]=((F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3)+he[oe-7]+((te<<15|te>>>17)^(te<<13|te>>>19)^te>>>10)+he[oe-16]}var B=V&ge^V&E^ge&E,se=I+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&j^~p&T)+w[oe]+he[oe];I=T,T=j,j=p,p=b+se|0,b=E,E=ge,ge=V,V=se+(((V<<30|V>>>2)^(V<<19|V>>>13)^(V<<10|V>>>22))+B)|0}R[0]=R[0]+V|0,R[1]=R[1]+ge|0,R[2]=R[2]+E|0,R[3]=R[3]+b|0,R[4]=R[4]+p|0,R[5]=R[5]+j|0,R[6]=R[6]+T|0,R[7]=R[7]+I|0},_doFinalize:function(){var me=this._data,le=me.words,R=8*this._nDataBytes,V=8*me.sigBytes;return le[V>>>5]|=128<<24-V%32,le[14+(V+64>>>9<<4)]=x.floor(R/4294967296),le[15+(V+64>>>9<<4)]=R,me.sigBytes=4*le.length,this._process(),this._hash},clone:function(){var me=ne.clone.call(this);return me._hash=this._hash.clone(),me}});G.SHA256=ne._createHelper(k),G.HmacSHA256=ne._createHmacHelper(k)}(Math),C.SHA256)},92815:(ze,Oe,n)=>{"use strict";n.d(Oe,{C:()=>G,U:()=>X});var C=n(54016),x=n(20452);function G(W){return(0,C.AQ)(this,arguments,function*(){const z=W.getReader();try{for(;;){const{value:Z,done:w}=yield(0,C.N3)(z.read());if(w)return yield(0,C.N3)(void 0);yield yield(0,C.N3)(Z)}}finally{z.releaseLock()}})}function X(W){return(0,x.T)(W?.getReader)}},93438:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(90033),C.mode.CTRGladman=function(){var x=C.lib.BlockCipherMode.extend();function G(ne){if(255&~(ne>>24))ne+=1<<24;else{var z=ne>>16&255,Z=ne>>8&255,w=255&ne;255===z?(z=0,255===Z?(Z=0,255===w?w=0:++w):++Z):++z,ne=0,ne+=z<<16,ne+=Z<<8,ne+=w}return ne}var W=x.Encryptor=x.extend({processBlock:function(ne,z){var Z=this._cipher,w=Z.blockSize,he=this._iv,k=this._counter;he&&(k=this._counter=he.slice(0),this._iv=void 0),function X(ne){return 0===(ne[0]=G(ne[0]))&&(ne[1]=G(ne[1])),ne}(k);var me=k.slice(0);Z.encryptBlock(me,0);for(var le=0;le<w;le++)ne[z+le]^=me[le]}});return x.Decryptor=W,x}(),C.mode.CTRGladman)},93473:(ze,Oe,n)=>{"use strict";n.d(Oe,{m:()=>w});var C=n(96598);function x(he,k){1&he&&C.eu8(0)}function G(he,k){if(1&he&&(C.j41(0,"div"),C.EFF(1,"\n            "),C.DNE(2,x,1,0,"ng-container",5),C.EFF(3,"\n        "),C.k0s()),2&he){C.XpG();const me=C.sdS(11);C.R7$(2),C.Y8G("ngTemplateOutlet",me)}}function X(he,k){1&he&&C.eu8(0)}function W(he,k){if(1&he&&(C.j41(0,"div"),C.EFF(1,"\n            "),C.DNE(2,X,1,0,"ng-container",5),C.EFF(3,"\n        "),C.k0s()),2&he){C.XpG();const me=C.sdS(14);C.R7$(2),C.Y8G("ngTemplateOutlet",me)}}function ne(he,k){if(1&he&&(C.j41(0,"div"),C.EFF(1,"\n        "),C.eu8(2,9),C.EFF(3,"\n    "),C.k0s()),2&he){const me=C.XpG(2);C.R7$(2),C.Y8G("obj",me.obj.Grid)}}function z(he,k){if(1&he){const me=C.RV6();C.EFF(0,"\n    "),C.DNE(1,ne,4,1,"div",4),C.EFF(2,"\n    "),C.j41(3,"div",6),C.EFF(4," \n        "),C.j41(5,"div"),C.EFF(6,"    \n          "),C.j41(7,"button",7),C.bIt("click",function(){C.eBV(me);const R=C.XpG();return C.Njj(R.obj.OnButtonClick("Cancel"))}),C.nrm(8,"i",8),C.EFF(9),C.nI1(10,"translate"),C.k0s(),C.EFF(11," \n        "),C.k0s(),C.EFF(12,"       \n    "),C.k0s(),C.EFF(13,"\n")}if(2&he){const me=C.XpG();C.R7$(),C.Y8G("ngIf",me.obj.IsShown),C.R7$(8),C.JRh(C.bMT(10,2,"Cancel"))}}function Z(he,k){if(1&he){const me=C.RV6();C.EFF(0,"\n    "),C.j41(1,"div",3),C.EFF(2,"\n        "),C.eu8(3,10),C.EFF(4,"\n    "),C.k0s(),C.EFF(5,"\n    "),C.j41(6,"div",6),C.EFF(7," \n        "),C.j41(8,"div"),C.EFF(9,"\n          "),C.j41(10,"button",7),C.bIt("click",function(){C.eBV(me);const R=C.XpG();return C.Njj(R.obj.ButtonClick.Call("Save"))}),C.nrm(11,"i",11),C.EFF(12),C.nI1(13,"translate"),C.k0s(),C.EFF(14," \n          "),C.j41(15,"button",7),C.bIt("click",function(){C.eBV(me);const R=C.XpG();return C.Njj(R.obj.ButtonClick.Call("Cancel"))}),C.EFF(16),C.nI1(17,"translate"),C.k0s(),C.EFF(18," \n        "),C.k0s(),C.EFF(19,"       \n    "),C.k0s(),C.EFF(20,"\n")}if(2&he){const me=C.XpG();C.R7$(3),C.Y8G("obj",me.obj.Name)("group",me.group),C.R7$(9),C.JRh(C.bMT(13,4,"Save")),C.R7$(4),C.JRh(C.bMT(17,6,"Cancel"))}}let w=(()=>{class he{constructor(){this.constructorName=""}ngOnInit(){this.constructorName=this.obj.ClassName}static{this.\u0275fac=function(le){return new(le||he)}}static{this.\u0275cmp=C.VBU({type:he,selectors:[["app-dialog"]],inputs:{obj:"obj"},standalone:!1,decls:15,vars:2,consts:[["StatusAssignGridViewModel",""],["QuickAddLookupsViewModel",""],[1,"master-screen",2,"width","599px"],[1,"PACTHeaderFields","dialogSubBody"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],["FieldDirective","",3,"obj"],["FieldDirective","",3,"obj","group"],[1,"fa-light","fa-floppy-disk"]],template:function(le,R){1&le&&(C.j41(0,"div",2),C.EFF(1,"\n    "),C.j41(2,"div",3),C.EFF(3,"\n        "),C.DNE(4,G,4,1,"div",4),C.EFF(5,"\n        "),C.DNE(6,W,4,1,"div",4),C.EFF(7,"\n    "),C.k0s(),C.EFF(8," \n"),C.k0s(),C.EFF(9,"\n"),C.DNE(10,z,14,4,"ng-template",null,0,C.C5r),C.EFF(12,"\n\n"),C.DNE(13,Z,21,8,"ng-template",null,1,C.C5r)),2&le&&(C.R7$(4),C.Y8G("ngIf","StatusAssignGridViewModel"==R.constructorName),C.R7$(2),C.Y8G("ngIf","QuickAddLookupsViewModel"==R.constructorName))},encapsulation:2})}}return he})()},93584:(ze,Oe,n)=>{"use strict";n.d(Oe,{F:()=>x,m:()=>G});var C=n(56050);function x(...X){return G(X)}function G(X){return 0===X.length?C.D:1===X.length?X[0]:function(ne){return X.reduce((z,Z)=>Z(z),ne)}}},94366:(ze,Oe,n)=>{"use strict";n.d(Oe,{c:()=>Z});var C=n(70088),x=n(40740),G=n(81113),X=n(93584),W=n(18645),ne=n(20452),z=n(27405);let Z=(()=>{class me{constructor(R){R&&(this._subscribe=R)}lift(R){const V=new me;return V.source=this,V.operator=R,V}subscribe(R,V,ge){const E=function k(me){return me&&me instanceof C.vU||function he(me){return me&&(0,ne.T)(me.next)&&(0,ne.T)(me.error)&&(0,ne.T)(me.complete)}(me)&&(0,x.Uv)(me)}(R)?R:new C.Ms(R,V,ge);return(0,z.Y)(()=>{const{operator:b,source:p}=this;E.add(b?b.call(E,p):p?this._subscribe(E):this._trySubscribe(E))}),E}_trySubscribe(R){try{return this._subscribe(R)}catch(V){R.error(V)}}forEach(R,V){return new(V=w(V))((ge,E)=>{const b=new C.Ms({next:p=>{try{R(p)}catch(j){E(j),b.unsubscribe()}},error:E,complete:ge});this.subscribe(b)})}_subscribe(R){var V;return null===(V=this.source)||void 0===V?void 0:V.subscribe(R)}[G.s](){return this}pipe(...R){return(0,X.m)(R)(this)}toPromise(R){return new(R=w(R))((V,ge)=>{let E;this.subscribe(b=>E=b,b=>ge(b),()=>V(E))})}}return me.create=le=>new me(le),me})();function w(me){var le;return null!==(le=me??W.$.Promise)&&void 0!==le?le:Promise}},94896:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(21272),n(1236),n(26528),n(90033),function(){var x=C,G=x.lib,X=G.WordArray,W=G.BlockCipher,ne=x.algo,z=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],Z=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],w=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],he=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],k=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],me=ne.DES=W.extend({_doReset:function(){for(var E=this._key.words,b=[],p=0;p<56;p++){var j=z[p]-1;b[p]=E[j>>>5]>>>31-j%32&1}for(var T=this._subKeys=[],I=0;I<16;I++){var oe=T[I]=[],F=w[I];for(p=0;p<24;p++)oe[p/6|0]|=b[(Z[p]-1+F)%28]<<31-p%6,oe[4+(p/6|0)]|=b[28+(Z[p+24]-1+F)%28]<<31-p%6;for(oe[0]=oe[0]<<1|oe[0]>>>31,p=1;p<7;p++)oe[p]=oe[p]>>>4*(p-1)+3;oe[7]=oe[7]<<5|oe[7]>>>27}var N=this._invSubKeys=[];for(p=0;p<16;p++)N[p]=T[15-p]},encryptBlock:function(ge,E){this._doCryptBlock(ge,E,this._subKeys)},decryptBlock:function(ge,E){this._doCryptBlock(ge,E,this._invSubKeys)},_doCryptBlock:function(ge,E,b){this._lBlock=ge[E],this._rBlock=ge[E+1],le.call(this,4,252645135),le.call(this,16,65535),R.call(this,2,858993459),R.call(this,8,16711935),le.call(this,1,1431655765);for(var p=0;p<16;p++){for(var j=b[p],T=this._lBlock,I=this._rBlock,oe=0,F=0;F<8;F++)oe|=he[F][((I^j[F])&k[F])>>>0];this._lBlock=I,this._rBlock=T^oe}var N=this._lBlock;this._lBlock=this._rBlock,this._rBlock=N,le.call(this,1,1431655765),R.call(this,8,16711935),R.call(this,2,858993459),le.call(this,16,65535),le.call(this,4,252645135),ge[E]=this._lBlock,ge[E+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function le(ge,E){var b=(this._lBlock>>>ge^this._rBlock)&E;this._rBlock^=b,this._lBlock^=b<<ge}function R(ge,E){var b=(this._rBlock>>>ge^this._lBlock)&E;this._lBlock^=b,this._rBlock^=b<<ge}x.DES=W._createHelper(me);var V=ne.TripleDES=W.extend({_doReset:function(){var E=this._key.words;if(2!==E.length&&4!==E.length&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=E.slice(0,2),p=E.length<4?E.slice(0,2):E.slice(2,4),j=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=me.createEncryptor(X.create(b)),this._des2=me.createEncryptor(X.create(p)),this._des3=me.createEncryptor(X.create(j))},encryptBlock:function(ge,E){this._des1.encryptBlock(ge,E),this._des2.decryptBlock(ge,E),this._des3.encryptBlock(ge,E)},decryptBlock:function(ge,E){this._des3.decryptBlock(ge,E),this._des2.encryptBlock(ge,E),this._des1.decryptBlock(ge,E)},keySize:6,ivSize:2,blockSize:2});x.TripleDES=W._createHelper(V)}(),C.TripleDES)},95176:function(ze,Oe,n){var C;ze.exports=(C=n(95275),n(21272),n(1236),n(26528),n(90033),function(){var x=C,X=x.lib.StreamCipher,ne=[],z=[],Z=[],w=x.algo.Rabbit=X.extend({_doReset:function(){for(var k=this._key.words,me=this.cfg.iv,le=0;le<4;le++)k[le]=16711935&(k[le]<<8|k[le]>>>24)|4278255360&(k[le]<<24|k[le]>>>8);var R=this._X=[k[0],k[3]<<16|k[2]>>>16,k[1],k[0]<<16|k[3]>>>16,k[2],k[1]<<16|k[0]>>>16,k[3],k[2]<<16|k[1]>>>16],V=this._C=[k[2]<<16|k[2]>>>16,4294901760&k[0]|65535&k[1],k[3]<<16|k[3]>>>16,4294901760&k[1]|65535&k[2],k[0]<<16|k[0]>>>16,4294901760&k[2]|65535&k[3],k[1]<<16|k[1]>>>16,4294901760&k[3]|65535&k[0]];for(this._b=0,le=0;le<4;le++)he.call(this);for(le=0;le<8;le++)V[le]^=R[le+4&7];if(me){var ge=me.words,E=ge[0],b=ge[1],p=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),j=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),T=p>>>16|4294901760&j,I=j<<16|65535&p;for(V[0]^=p,V[1]^=T,V[2]^=j,V[3]^=I,V[4]^=p,V[5]^=T,V[6]^=j,V[7]^=I,le=0;le<4;le++)he.call(this)}},_doProcessBlock:function(k,me){var le=this._X;he.call(this),ne[0]=le[0]^le[5]>>>16^le[3]<<16,ne[1]=le[2]^le[7]>>>16^le[5]<<16,ne[2]=le[4]^le[1]>>>16^le[7]<<16,ne[3]=le[6]^le[3]>>>16^le[1]<<16;for(var R=0;R<4;R++)ne[R]=16711935&(ne[R]<<8|ne[R]>>>24)|4278255360&(ne[R]<<24|ne[R]>>>8),k[me+R]^=ne[R]},blockSize:4,ivSize:2});function he(){for(var k=this._X,me=this._C,le=0;le<8;le++)z[le]=me[le];for(me[0]=me[0]+1295307597+this._b|0,me[1]=me[1]+3545052371+(me[0]>>>0<z[0]>>>0?1:0)|0,me[2]=me[2]+886263092+(me[1]>>>0<z[1]>>>0?1:0)|0,me[3]=me[3]+1295307597+(me[2]>>>0<z[2]>>>0?1:0)|0,me[4]=me[4]+3545052371+(me[3]>>>0<z[3]>>>0?1:0)|0,me[5]=me[5]+886263092+(me[4]>>>0<z[4]>>>0?1:0)|0,me[6]=me[6]+1295307597+(me[5]>>>0<z[5]>>>0?1:0)|0,me[7]=me[7]+3545052371+(me[6]>>>0<z[6]>>>0?1:0)|0,this._b=me[7]>>>0<z[7]>>>0?1:0,le=0;le<8;le++){var R=k[le]+me[le],V=65535&R,ge=R>>>16;Z[le]=((V*V>>>17)+V*ge>>>15)+ge*ge^((4294901760&R)*R|0)+((65535&R)*R|0)}k[0]=Z[0]+(Z[7]<<16|Z[7]>>>16)+(Z[6]<<16|Z[6]>>>16)|0,k[1]=Z[1]+(Z[0]<<8|Z[0]>>>24)+Z[7]|0,k[2]=Z[2]+(Z[1]<<16|Z[1]>>>16)+(Z[0]<<16|Z[0]>>>16)|0,k[3]=Z[3]+(Z[2]<<8|Z[2]>>>24)+Z[1]|0,k[4]=Z[4]+(Z[3]<<16|Z[3]>>>16)+(Z[2]<<16|Z[2]>>>16)|0,k[5]=Z[5]+(Z[4]<<8|Z[4]>>>24)+Z[3]|0,k[6]=Z[6]+(Z[5]<<16|Z[5]>>>16)+(Z[4]<<16|Z[4]>>>16)|0,k[7]=Z[7]+(Z[6]<<8|Z[6]>>>24)+Z[5]|0}x.Rabbit=X._createHelper(w)}(),C.Rabbit)},95275:function(ze,Oe,n){var C;ze.exports=(C=C||function(x){var X;if(typeof window<"u"&&window.crypto&&(X=window.crypto),typeof self<"u"&&self.crypto&&(X=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(X=globalThis.crypto),!X&&typeof window<"u"&&window.msCrypto&&(X=window.msCrypto),!X&&typeof global<"u"&&global.crypto&&(X=global.crypto),!X)try{X=n(72858)}catch{}var W=function(){if(X){if("function"==typeof X.getRandomValues)try{return X.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof X.randomBytes)try{return X.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},ne=Object.create||function(){function b(){}return function(p){var j;return b.prototype=p,j=new b,b.prototype=null,j}}(),z={},Z=z.lib={},w=Z.Base=function(){return{extend:function(b){var p=ne(this);return b&&p.mixIn(b),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var p in b)b.hasOwnProperty(p)&&(this[p]=b[p]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),he=Z.WordArray=w.extend({init:function(b,p){b=this.words=b||[],this.sigBytes=null!=p?p:4*b.length},toString:function(b){return(b||me).stringify(this)},concat:function(b){var p=this.words,j=b.words,T=this.sigBytes,I=b.sigBytes;if(this.clamp(),T%4)for(var oe=0;oe<I;oe++)p[T+oe>>>2]|=(j[oe>>>2]>>>24-oe%4*8&255)<<24-(T+oe)%4*8;else for(var N=0;N<I;N+=4)p[T+N>>>2]=j[N>>>2];return this.sigBytes+=I,this},clamp:function(){var b=this.words,p=this.sigBytes;b[p>>>2]&=4294967295<<32-p%4*8,b.length=x.ceil(p/4)},clone:function(){var b=w.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var p=[],j=0;j<b;j+=4)p.push(W());return new he.init(p,b)}}),k=z.enc={},me=k.Hex={stringify:function(b){for(var p=b.words,j=b.sigBytes,T=[],I=0;I<j;I++){var oe=p[I>>>2]>>>24-I%4*8&255;T.push((oe>>>4).toString(16)),T.push((15&oe).toString(16))}return T.join("")},parse:function(b){for(var p=b.length,j=[],T=0;T<p;T+=2)j[T>>>3]|=parseInt(b.substr(T,2),16)<<24-T%8*4;return new he.init(j,p/2)}},le=k.Latin1={stringify:function(b){for(var p=b.words,j=b.sigBytes,T=[],I=0;I<j;I++)T.push(String.fromCharCode(p[I>>>2]>>>24-I%4*8&255));return T.join("")},parse:function(b){for(var p=b.length,j=[],T=0;T<p;T++)j[T>>>2]|=(255&b.charCodeAt(T))<<24-T%4*8;return new he.init(j,p)}},R=k.Utf8={stringify:function(b){try{return decodeURIComponent(escape(le.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return le.parse(unescape(encodeURIComponent(b)))}},V=Z.BufferedBlockAlgorithm=w.extend({reset:function(){this._data=new he.init,this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=R.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var p,j=this._data,T=j.words,I=j.sigBytes,oe=this.blockSize,N=I/(4*oe),te=(N=b?x.ceil(N):x.max((0|N)-this._minBufferSize,0))*oe,v=x.min(4*te,I);if(te){for(var S=0;S<te;S+=oe)this._doProcessBlock(T,S);p=T.splice(0,te),j.sigBytes-=v}return new he.init(p,v)},clone:function(){var b=w.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0}),E=(Z.Hasher=V.extend({cfg:w.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){V.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){return b&&this._append(b),this._doFinalize()},blockSize:16,_createHelper:function(b){return function(p,j){return new b.init(j).finalize(p)}},_createHmacHelper:function(b){return function(p,j){return new E.HMAC.init(b,j).finalize(p)}}}),z.algo={});return z}(Math),C)},96336:(ze,Oe,n)=>{"use strict";n.d(Oe,{D9:()=>ae,Wr:()=>me,c$:()=>B,h:()=>se});var C=n(96598),x=n(30054),G=n(52021),X=n(5087),W=n(51174),ne=n(36649),z=n(19078),Z=n(22287),w=n(73973),he=n(47893),k=n(3177);class me{}let le=(()=>{class fe extends me{getTranslation(K){return(0,x.of)({})}static \u0275fac=(()=>{let K;return function(U){return(K||(K=C.xGo(fe)))(U||fe)}})();static \u0275prov=C.jDH({token:fe,factory:fe.\u0275fac})}return fe})();class R{}let V=(()=>{class fe{handle(K){return K.key}static \u0275fac=function(ee){return new(ee||fe)};static \u0275prov=C.jDH({token:fe,factory:fe.\u0275fac})}return fe})();function ge(fe,_){if(fe===_)return!0;if(null===fe||null===_)return!1;if(fe!=fe&&_!=_)return!0;let U,ie,J,K=typeof fe;if(K==typeof _&&"object"==K){if(!Array.isArray(fe)){if(Array.isArray(_))return!1;for(ie in J=Object.create(null),fe){if(!ge(fe[ie],_[ie]))return!1;J[ie]=!0}for(ie in _)if(!(ie in J)&&typeof _[ie]<"u")return!1;return!0}if(!Array.isArray(_))return!1;if((U=fe.length)==_.length){for(ie=0;ie<U;ie++)if(!ge(fe[ie],_[ie]))return!1;return!0}}return!1}function E(fe){return typeof fe<"u"&&null!==fe}function b(fe){return fe&&"object"==typeof fe&&!Array.isArray(fe)}function p(fe,_){let K=Object.assign({},fe);return b(fe)&&b(_)&&Object.keys(_).forEach(ee=>{b(_[ee])?ee in fe?K[ee]=p(fe[ee],_[ee]):Object.assign(K,{[ee]:_[ee]}):Object.assign(K,{[ee]:_[ee]})}),K}class j{}let T=(()=>{class fe extends j{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(K,ee){let U;return U="string"==typeof K?this.interpolateString(K,ee):"function"==typeof K?this.interpolateFunction(K,ee):K,U}getValue(K,ee){let U="string"==typeof ee?ee.split("."):[ee];ee="";do{ee+=U.shift(),!E(K)||!E(K[ee])||"object"!=typeof K[ee]&&U.length?U.length?ee+=".":K=void 0:(K=K[ee],ee="")}while(U.length);return K}interpolateFunction(K,ee){return K(ee)}interpolateString(K,ee){return ee?K.replace(this.templateMatcher,(U,ie)=>{let J=this.getValue(ee,ie);return E(J)?J:U}):K}static \u0275fac=(()=>{let K;return function(U){return(K||(K=C.xGo(fe)))(U||fe)}})();static \u0275prov=C.jDH({token:fe,factory:fe.\u0275fac})}return fe})();class I{}let oe=(()=>{class fe extends I{compile(K,ee){return K}compileTranslations(K,ee){return K}static \u0275fac=(()=>{let K;return function(U){return(K||(K=C.xGo(fe)))(U||fe)}})();static \u0275prov=C.jDH({token:fe,factory:fe.\u0275fac})}return fe})();class F{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new C.bkB;onLangChange=new C.bkB;onDefaultLangChange=new C.bkB}const N=new C.nKC("USE_STORE"),te=new C.nKC("USE_DEFAULT_LANG"),v=new C.nKC("DEFAULT_LANGUAGE"),S=new C.nKC("USE_EXTEND");let B=(()=>{class fe{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new C.bkB;_onLangChange=new C.bkB;_onDefaultLangChange=new C.bkB;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(K){this.isolate?this._defaultLang=K:this.store.defaultLang=K}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(K){this.isolate?this._currentLang=K:this.store.currentLang=K}get langs(){return this.isolate?this._langs:this.store.langs}set langs(K){this.isolate?this._langs=K:this.store.langs=K}get translations(){return this.isolate?this._translations:this.store.translations}set translations(K){this.isolate?this._translations=K:this.store.translations=K}constructor(K,ee,U,ie,J,Ce=!0,Y=!1,Ee=!1,Te){this.store=K,this.currentLoader=ee,this.compiler=U,this.parser=ie,this.missingTranslationHandler=J,this.useDefaultLang=Ce,this.isolate=Y,this.extend=Ee,Te&&this.setDefaultLang(Te)}setDefaultLang(K){if(K===this.defaultLang)return;let ee=this.retrieveTranslations(K);typeof ee<"u"?(null==this.defaultLang&&(this.defaultLang=K),ee.pipe((0,z.s)(1)).subscribe(U=>{this.changeDefaultLang(K)})):this.changeDefaultLang(K)}getDefaultLang(){return this.defaultLang}use(K){if(K===this.currentLang)return(0,x.of)(this.translations[K]);let ee=this.retrieveTranslations(K);return typeof ee<"u"?(this.currentLang||(this.currentLang=K),ee.pipe((0,z.s)(1)).subscribe(U=>{this.changeLang(K)}),ee):(this.changeLang(K),(0,x.of)(this.translations[K]))}retrieveTranslations(K){let ee;return(typeof this.translations[K]>"u"||this.extend)&&(this._translationRequests[K]=this._translationRequests[K]||this.getTranslation(K),ee=this._translationRequests[K]),ee}getTranslation(K){this.pending=!0;const ee=this.currentLoader.getTranslation(K).pipe((0,Z.t)(1),(0,z.s)(1));return this.loadingTranslations=ee.pipe((0,w.T)(U=>this.compiler.compileTranslations(U,K)),(0,Z.t)(1),(0,z.s)(1)),this.loadingTranslations.subscribe({next:U=>{this.translations[K]=this.extend&&this.translations[K]?{...U,...this.translations[K]}:U,this.updateLangs(),this.pending=!1},error:U=>{this.pending=!1}}),ee}setTranslation(K,ee,U=!1){ee=this.compiler.compileTranslations(ee,K),this.translations[K]=(U||this.extend)&&this.translations[K]?p(this.translations[K],ee):ee,this.updateLangs(),this.onTranslationChange.emit({lang:K,translations:this.translations[K]})}getLangs(){return this.langs}addLangs(K){K.forEach(ee=>{-1===this.langs.indexOf(ee)&&this.langs.push(ee)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(K,ee,U){let ie;if(ee instanceof Array){let J={},Ce=!1;for(let Y of ee)J[Y]=this.getParsedResult(K,Y,U),(0,G.A)(J[Y])&&(Ce=!0);if(Ce){const Y=ee.map(Ee=>(0,G.A)(J[Ee])?J[Ee]:(0,x.of)(J[Ee]));return(0,X.p)(Y).pipe((0,w.T)(Ee=>{let Te={};return Ee.forEach((Le,tt)=>{Te[ee[tt]]=Le}),Te}))}return J}if(K&&(ie=this.parser.interpolate(this.parser.getValue(K,ee),U)),typeof ie>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(ie=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],ee),U)),typeof ie>"u"){let J={key:ee,translateService:this};typeof U<"u"&&(J.interpolateParams=U),ie=this.missingTranslationHandler.handle(J)}return typeof ie<"u"?ie:ee}get(K,ee){if(!E(K)||!K.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,he.H)(U=>(U=this.getParsedResult(U,K,ee),(0,G.A)(U)?U:(0,x.of)(U))));{let U=this.getParsedResult(this.translations[this.currentLang],K,ee);return(0,G.A)(U)?U:(0,x.of)(U)}}getStreamOnTranslationChange(K,ee){if(!E(K)||!K.length)throw new Error('Parameter "key" required');return(0,W.x)((0,ne.v)(()=>this.get(K,ee)),this.onTranslationChange.pipe((0,k.n)(U=>{const ie=this.getParsedResult(U.translations,K,ee);return"function"==typeof ie.subscribe?ie:(0,x.of)(ie)})))}stream(K,ee){if(!E(K)||!K.length)throw new Error('Parameter "key" required');return(0,W.x)((0,ne.v)(()=>this.get(K,ee)),this.onLangChange.pipe((0,k.n)(U=>{const ie=this.getParsedResult(U.translations,K,ee);return(0,G.A)(ie)?ie:(0,x.of)(ie)})))}instant(K,ee){if(!E(K)||!K.length)throw new Error('Parameter "key" required');let U=this.getParsedResult(this.translations[this.currentLang],K,ee);if((0,G.A)(U)){if(K instanceof Array){let ie={};return K.forEach((J,Ce)=>{ie[K[Ce]]=K[Ce]}),ie}return K}return U}set(K,ee,U=this.currentLang){this.translations[U][K]=this.compiler.compile(ee,U),this.updateLangs(),this.onTranslationChange.emit({lang:U,translations:this.translations[U]})}changeLang(K){this.currentLang=K,this.onLangChange.emit({lang:K,translations:this.translations[K]}),null==this.defaultLang&&this.changeDefaultLang(K)}changeDefaultLang(K){this.defaultLang=K,this.onDefaultLangChange.emit({lang:K,translations:this.translations[K]})}reloadLang(K){return this.resetLang(K),this.getTranslation(K)}resetLang(K){this._translationRequests[K]=void 0,this.translations[K]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let K=window.navigator.languages?window.navigator.languages[0]:null;return K=K||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof K>"u"?void 0:(-1!==K.indexOf("-")&&(K=K.split("-")[0]),-1!==K.indexOf("_")&&(K=K.split("_")[0]),K)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let K=window.navigator.languages?window.navigator.languages[0]:null;return K=K||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,K}static \u0275fac=function(ee){return new(ee||fe)(C.KVO(F),C.KVO(me),C.KVO(I),C.KVO(j),C.KVO(R),C.KVO(te),C.KVO(N),C.KVO(S),C.KVO(v))};static \u0275prov=C.jDH({token:fe,factory:fe.\u0275fac})}return fe})(),ae=(()=>{class fe{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(K,ee){this.translate=K,this._ref=ee}updateValue(K,ee,U){let ie=J=>{this.value=void 0!==J?J:K,this.lastKey=K,this._ref.markForCheck()};if(U){let J=this.translate.getParsedResult(U,K,ee);(0,G.A)(J.subscribe)?J.subscribe(ie):ie(J)}this.translate.get(K,ee).subscribe(ie)}transform(K,...ee){if(!K||!K.length)return K;if(ge(K,this.lastKey)&&ge(ee,this.lastParams))return this.value;let U;if(E(ee[0])&&ee.length)if("string"==typeof ee[0]&&ee[0].length){let ie=ee[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{U=JSON.parse(ie)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${ee[0]}`)}}else"object"==typeof ee[0]&&!Array.isArray(ee[0])&&(U=ee[0]);return this.lastKey=K,this.lastParams=ee,this.updateValue(K,U),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(ie=>{this.lastKey&&ie.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(K,U,ie.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(ie=>{this.lastKey&&(this.lastKey=null,this.updateValue(K,U,ie.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(K,U))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(ee){return new(ee||fe)(C.rXU(B,16),C.rXU(C.gRc,16))};static \u0275pipe=C.EJ8({name:"translate",type:fe,pure:!1,standalone:!1});static \u0275prov=C.jDH({token:fe,factory:fe.\u0275fac})}return fe})(),se=(()=>{class fe{static forRoot(K={}){return{ngModule:fe,providers:[K.loader||{provide:me,useClass:le},K.compiler||{provide:I,useClass:oe},K.parser||{provide:j,useClass:T},K.missingTranslationHandler||{provide:R,useClass:V},F,{provide:N,useValue:K.isolate},{provide:te,useValue:K.useDefaultLang},{provide:S,useValue:K.extend},{provide:v,useValue:K.defaultLanguage},B]}}static forChild(K={}){return{ngModule:fe,providers:[K.loader||{provide:me,useClass:le},K.compiler||{provide:I,useClass:oe},K.parser||{provide:j,useClass:T},K.missingTranslationHandler||{provide:R,useClass:V},{provide:N,useValue:K.isolate},{provide:te,useValue:K.useDefaultLang},{provide:S,useValue:K.extend},{provide:v,useValue:K.defaultLanguage},B]}}static \u0275fac=function(ee){return new(ee||fe)};static \u0275mod=C.$C({type:fe});static \u0275inj=C.G2t({})}return fe})()},96598:(ze,Oe,n)=>{"use strict";function x(t,i){return Object.is(t,i)}n.d(Oe,{bc$:()=>d,iLQ:()=>ph,sZ2:()=>fr,hnV:()=>Bp,Hbi:()=>EN,o8S:()=>Ss,BIS:()=>e,gRc:()=>rT,Ql9:()=>jR,OM3:()=>ah,Ocv:()=>JR,abz:()=>ls,Z63:()=>Hi,aKT:()=>Ul,uvJ:()=>es,zcH:()=>Bs,bkB:()=>Hn,ES_:()=>Rg,y_5:()=>Mr,$GK:()=>Yt,nKC:()=>bt,zZn:()=>hi,_q3:()=>V0,MKu:()=>B0,xe9:()=>R0,Co$:()=>Hv,Vns:()=>Zl,SKi:()=>Rn,Xx1:()=>Wo,Agw:()=>tm,PLl:()=>Wu,rOR:()=>Iu,sFG:()=>tA,_9s:()=>sp,czy:()=>df,WPN:()=>zl,kdw:()=>Bi,C4Q:()=>eh,NYb:()=>mP,giA:()=>uE,xvI:()=>UR,RxE:()=>JS,c1b:()=>Df,gXe:()=>pr,mal:()=>Bc,Tzd:()=>Vc,Af3:()=>Jo,L39:()=>WN,EWP:()=>bh,sbv:()=>UA,a0P:()=>cF,Ol2:()=>Sp,w6W:()=>JA,oH4:()=>nT,QZP:()=>U0,Rfq:()=>pt,WQX:()=>vt,hFB:()=>Gg,naY:()=>oN,Hps:()=>xc,QuC:()=>Cs,EmA:()=>zs,Udg:()=>$N,fpN:()=>vN,phd:()=>yP,HJs:()=>hF,N4e:()=>yl,vPA:()=>qs,O8t:()=>so,H3F:()=>Rp,H8p:()=>Xo,KH2:()=>Ld,Ua0:()=>as,wOt:()=>Qe,WHO:()=>cE,e01:()=>hE,Lf2:()=>Di,lNU:()=>gt,h9k:()=>GC,$MX:()=>_u,ZF7:()=>ad,Kcf:()=>AI,e5t:()=>RI,UyX:()=>OI,cWb:()=>PI,osQ:()=>bI,H5H:()=>r0,Zy3:()=>at,mq5:()=>lD,JZv:()=>en,LfX:()=>Po,plB:()=>Ql,jNT:()=>Vp,zjR:()=>gE,ngT:()=>bi,TL$:()=>tC,Tbb:()=>yn,rcV:()=>Cr,Vt3:()=>Ip,OA$:()=>Ia,Jv_:()=>fS,R7$:()=>dy,BMQ:()=>Wp,x72:()=>$p,qtP:()=>zp,HbH:()=>GE,ZvI:()=>XE,STu:()=>JE,ZWY:()=>QE,AVh:()=>kp,vxM:()=>_E,wni:()=>jD,C6U:()=>KD,SS7:()=>v0,VBU:()=>Gv,FsC:()=>jv,jDH:()=>rn,G2t:()=>Gn,$C:()=>Tp,EJ8:()=>Wv,rXU:()=>yd,nrm:()=>n0,eu8:()=>s0,bVm:()=>wf,qex:()=>Lf,k0s:()=>Ff,j41:()=>Nf,RV6:()=>oD,xGo:()=>yc,Mr5:()=>o0,KVO:()=>zn,kS0:()=>hr,QTQ:()=>rv,bIt:()=>d0,lsd:()=>zD,joV:()=>Bn,qSk:()=>Rl,XpG:()=>RD,nI1:()=>xS,bMT:()=>MS,i5U:()=>AS,brH:()=>PS,ii3:()=>OS,SdG:()=>FD,NAR:()=>ND,Y8G:()=>Jp,FS9:()=>h0,Mz_:()=>Gf,FCK:()=>u0,lJ4:()=>pS,eq3:()=>CS,l_i:()=>yS,sMw:()=>vS,NyB:()=>YD,mGM:()=>$D,sdS:()=>XD,Dyx:()=>nD,Z7z:()=>tD,fX1:()=>eD,Njj:()=>$r,EBC:()=>QC,tSv:()=>JC,eBV:()=>Pn,npT:()=>jC,B4B:()=>Dm,n$t:()=>$C,wjB:()=>gS,Aen:()=>to,xc7:()=>Zp,jIU:()=>f0,DNE:()=>Pp,C5r:()=>bS,EFF:()=>nS,JRh:()=>g0,SpI:()=>jf,Lme:()=>m0,E5c:()=>p0,DH7:()=>cS,mxI:()=>y0,R50:()=>C0,GBs:()=>WD}),n(74523);let G=null,X=!1,W=1;const ne=Symbol("SIGNAL");function z(t){const i=G;return G=t,i}const k={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function me(t){if(X)throw new Error("");if(null===G)return;G.consumerOnSignalRead(t);const i=G.nextProducerIndex++;te(G),i<G.producerNode.length&&G.producerNode[i]!==t&&N(G)&&F(G.producerNode[i],G.producerIndexOfThis[i]),G.producerNode[i]!==t&&(G.producerNode[i]=t,G.producerIndexOfThis[i]=N(G)?oe(t,G,i):0),G.producerLastReadVersion[i]=t.version}function R(t){if((!N(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==W)){if(!t.producerMustRecompute(t)&&!T(t))return void b(t);t.producerRecomputeValue(t),b(t)}}function V(t){if(void 0===t.liveConsumerNode)return;const i=X;X=!0;try{for(const o of t.liveConsumerNode)o.dirty||E(o)}finally{X=i}}function ge(){return!1!==G?.consumerAllowSignalWrites}function E(t){t.dirty=!0,V(t),t.consumerMarkedDirty?.(t)}function b(t){t.dirty=!1,t.lastCleanEpoch=W}function p(t){return t&&(t.nextProducerIndex=0),z(t)}function j(t,i){if(z(i),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(N(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)F(t.producerNode[o],t.producerIndexOfThis[o]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function T(t){te(t);for(let i=0;i<t.producerNode.length;i++){const o=t.producerNode[i],l=t.producerLastReadVersion[i];if(l!==o.version||(R(o),l!==o.version))return!0}return!1}function I(t){if(te(t),N(t))for(let i=0;i<t.producerNode.length;i++)F(t.producerNode[i],t.producerIndexOfThis[i]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function oe(t,i,o){if(v(t),0===t.liveConsumerNode.length&&S(t))for(let l=0;l<t.producerNode.length;l++)t.producerIndexOfThis[l]=oe(t.producerNode[l],t,l);return t.liveConsumerIndexOfThis.push(o),t.liveConsumerNode.push(i)-1}function F(t,i){if(v(t),1===t.liveConsumerNode.length&&S(t))for(let l=0;l<t.producerNode.length;l++)F(t.producerNode[l],t.producerIndexOfThis[l]);const o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[i]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[i]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,i<t.liveConsumerNode.length){const l=t.liveConsumerIndexOfThis[i],h=t.liveConsumerNode[i];te(h),h.producerIndexOfThis[l]=i}}function N(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function te(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function v(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function S(t){return void 0!==t.producerNode}function B(t,i){const o=Object.create(fe);o.computation=t,void 0!==i&&(o.equal=i);const l=()=>{if(R(o),me(o),o.value===se)throw o.error;return o.value};return l[ne]=o,l}const O=Symbol("UNSET"),ae=Symbol("COMPUTING"),se=Symbol("ERRORED"),fe={...k,value:O,dirty:!0,error:null,equal:x,kind:"computed",producerMustRecompute:t=>t.value===O||t.value===ae,producerRecomputeValue(t){if(t.value===ae)throw new Error("Detected cycle in computations.");const i=t.value;t.value=ae;const o=p(t);let l,h=!1;try{l=t.computation(),z(null),h=i!==O&&i!==se&&l!==se&&t.equal(i,l)}catch(f){l=se,t.error=f}finally{j(t,o)}h?t.value=i:(t.value=l,t.version++)}};let K=function _(){throw new Error};function ee(t){K(t)}let ie=null;function Y(t,i){ge()||ee(t),t.equal(t.value,i)||(t.value=i,function tt(t){t.version++,function le(){W++}(),V(t),ie?.()}(t))}const Le={...k,equal:x,value:void 0,kind:"signal"};let Se;function Re(){return Se}function be(t){const i=Se;return Se=t,i}const He=Symbol("NotFound");Error;var De=n(62031),Ae=n(43794),je=n(40740),$e=n(73973);const gt="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class Qe extends Error{code;constructor(i,o){super(at(i,o)),this.code=i}}function at(t,i){return`${function mt(t){return`NG0${Math.abs(t)}`}(t)}${i?": "+i:""}`}const Et=Symbol("InputSignalNode#UNSET"),St={...Le,transformFn:void 0,applyValueToInputSignal(t,i){Y(t,i)}};function Ut(t,i){const o=Object.create(St);function l(){if(me(o),o.value===Et)throw new Qe(-950,null);return o.value}return o.value=t,o.transformFn=i?.transform,l[ne]=o,l}function Ht(t){return{toString:t}.toString()}const _t="__parameters__";function xt(t,i,o){return Ht(()=>{const l=function Nn(t){return function(...o){if(t){const l=t(...o);for(const h in l)this[h]=l[h]}}}(i);function h(...f){if(this instanceof h)return l.apply(this,f),this;const m=new h(...f);return D.annotation=m,D;function D(P,Q,de){const ye=P.hasOwnProperty(_t)?P[_t]:Object.defineProperty(P,_t,{value:[]})[_t];for(;ye.length<=de;)ye.push(null);return(ye[de]=ye[de]||[]).push(m),P}}return h.prototype.ngMetadataName=t,h.annotationCls=h,h})}const en=globalThis;function Wt(t){for(let i in t)if(t[i]===Wt)return i;throw Error("Could not find renamed property on target object.")}function mi(t,i){for(const o in i)i.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=i[o])}function yn(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(yn).join(", ")}]`;if(null==t)return""+t;const i=t.overriddenName||t.name;if(i)return`${i}`;const o=t.toString();if(null==o)return""+o;const l=o.indexOf("\n");return l>=0?o.slice(0,l):o}function ri(t,i){return t?i?`${t} ${i}`:t:i||""}const Tt=Wt({__forward_ref__:Wt});function pt(t){return t.__forward_ref__=pt,t.toString=function(){return yn(this())},t}function ct(t){return vn(t)?t():t}function vn(t){return"function"==typeof t&&t.hasOwnProperty(Tt)&&t.__forward_ref__===pt}function rn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gs(t){return Oo(t,sl)||Oo(t,oa)}function Po(t){return null!==Gs(t)}function Oo(t,i){return t.hasOwnProperty(i)?t[i]:null}function bo(t){return t&&(t.hasOwnProperty(Ro)||t.hasOwnProperty(No))?t[Ro]:null}const sl=Wt({\u0275prov:Wt}),Ro=Wt({\u0275inj:Wt}),oa=Wt({ngInjectableDef:Wt}),No=Wt({ngInjectorDef:Wt});class bt{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(i,o){this._desc=i,this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=rn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ll(t){return t&&!!t.\u0275providers}const lo=Wt({\u0275cmp:Wt}),ra=Wt({\u0275dir:Wt}),la=Wt({\u0275pipe:Wt}),ao=Wt({\u0275mod:Wt}),wi=Wt({\u0275fac:Wt}),Ws=Wt({__NG_ELEMENT_ID__:Wt}),al=Wt({__NG_ENV_ID__:Wt});function Ft(t){return"string"==typeof t?t:null==t?"":String(t)}function Dr(t,i){throw new Qe(-200,t)}function Sr(t,i){throw new Qe(-201,!1)}var Yt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Yt||{});let Tr;function Vo(){return Tr}function $n(t){const i=Tr;return Tr=t,i}function dl(t,i,o){const l=Gs(t);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&Yt.Optional?null:void 0!==i?i:void Sr()}const Vi={},cl="__NG_DI_FLAG__";class co{injector;constructor(i){this.injector=i}retrieve(i,o){return this.injector.get(i,o.optional?He:Vi,o)}}const Bo="ngTempTokenPath",da=/\n/gm,Uo="__source";function Gd(t,i=Yt.Default){if(void 0===Re())throw new Qe(-203,!1);if(null===Re())return dl(t,void 0,i);{const o=Re();let l;return l=o instanceof co?o.injector:o,l.get(t,i&Yt.Optional?null:void 0,i)}}function zn(t,i=Yt.Default){return(Vo()||Gd)(ct(t),i)}function vt(t,i=Yt.Default){return zn(t,xs(i))}function xs(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function xr(t){const i=[];for(let o=0;o<t.length;o++){const l=ct(t[o]);if(Array.isArray(l)){if(0===l.length)throw new Qe(900,!1);let h,f=Yt.Default;for(let m=0;m<l.length;m++){const D=l[m],P=ca(D);"number"==typeof P?-1===P?h=D.token:f|=P:h=D}i.push(zn(h,f))}else i.push(zn(l))}return i}function Go(t,i){return t[cl]=i,t.prototype[cl]=i,t}function ca(t){return t[cl]}const Mr=Go(xt("Inject",t=>({token:t})),-1),Wo=Go(xt("Optional"),8),Bi=Go(xt("SkipSelf"),4);function Ms(t,i){return t.hasOwnProperty(wi)?t[wi]:null}function ho(t,i){t.forEach(o=>Array.isArray(o)?ho(o,i):i(o))}function hl(t,i,o){i>=t.length?t.push(o):t.splice(i,0,o)}function $s(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function Mi(t,i,o){let l=Ko(t,i);return l>=0?t[1|l]=o:(l=~l,function $o(t,i,o,l){let h=t.length;if(h==i)t.push(o,l);else if(1===h)t.push(l,t[0]),t[0]=o;else{for(h--,t.push(t[h-1],t[h]);h>i;)t[h]=t[h-2],h--;t[i]=o,t[i+1]=l}}(t,l,i,o)),l}function zo(t,i){const o=Ko(t,i);if(o>=0)return t[1|o]}function Ko(t,i){return function ua(t,i,o){let l=0,h=t.length>>o;for(;h!==l;){const f=l+(h-l>>1),m=t[f<<o];if(i===m)return f<<o;m>i?h=f:l=f+1}return~(h<<o)}(t,i,1)}const Xi={},ln=[],Hi=new bt(""),fa=new bt("",-1),ga=new bt("");class Yo{get(i,o=Vi){if(o===Vi){const l=new Error(`NullInjectorError: No provider for ${yn(i)}!`);throw l.name="NullInjectorError",l}return o}}function pi(t,i){const o=t[ao]||null;if(!o&&!0===i)throw new Error(`Type ${yn(t)} does not have '\u0275mod' property.`);return o}function on(t){return t[lo]||null}function di(t){return t[ra]||null}function Ci(t){return t[la]||null}function Cs(t){const i=on(t)||di(t)||Ci(t);return null!==i&&i.standalone}function zs(t){return{\u0275providers:t}}function Wd(...t){return{\u0275providers:fl(0,t),\u0275fromNgModule:!0}}function fl(t,...i){const o=[],l=new Set;let h;const f=m=>{o.push(m)};return ho(i,m=>{const D=m;re(D,f,[],l)&&(h||=[],h.push(D))}),void 0!==h&&gl(h,f),o}function gl(t,i){for(let o=0;o<t.length;o++){const{ngModule:l,providers:h}=t[o];H(h,f=>{i(f,l)})}}function re(t,i,o,l){if(!(t=ct(t)))return!1;let h=null,f=bo(t);const m=!f&&on(t);if(f||m){if(m&&!m.standalone)return!1;h=t}else{const P=t.ngModule;if(f=bo(P),!f)return!1;h=P}const D=l.has(h);if(m){if(D)return!1;if(l.add(h),m.dependencies){const P="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const Q of P)re(Q,i,o,l)}}else{if(!f)return!1;{if(null!=f.imports&&!D){let Q;l.add(h);try{ho(f.imports,de=>{re(de,i,o,l)&&(Q||=[],Q.push(de))})}finally{}void 0!==Q&&gl(Q,i)}if(!D){const Q=Ms(h)||(()=>new h);i({provide:h,useFactory:Q,deps:ln},h),i({provide:ga,useValue:h,multi:!0},h),i({provide:Hi,useValue:()=>zn(h),multi:!0},h)}const P=f.providers;if(null!=P&&!D){const Q=t;H(P,de=>{i(de,Q)})}}}return h!==t&&void 0!==t.providers}function H(t,i){for(let o of t)ll(o)&&(o=o.\u0275providers),Array.isArray(o)?H(o,i):i(o)}const ue=Wt({provide:String,useValue:Wt});function Fe(t){return null!==t&&"object"==typeof t&&ue in t}function Qn(t){return"function"==typeof t}const Xo=new bt(""),We={},ml={};let $d;function pl(){return void 0===$d&&($d=new Yo),$d}class es{}class fo extends es{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(i,o,l,h){super(),this.parent=o,this.source=l,this.scopes=h,zd(i,m=>this.processProvider(m)),this.records.set(fa,Or(void 0,this)),h.has("environment")&&this.records.set(es,Or(void 0,this));const f=this.records.get(Xo);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(ga,ln,Yt.Self))}retrieve(i,o){return this.get(i,o.optional?He:Vi,o)}destroy(){Cl(this),this._destroyed=!0;const i=z(null);try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of o)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(i)}}onDestroy(i){return Cl(this),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){Cl(this);const o=be(this),l=$n(void 0);try{return i()}finally{be(o),$n(l)}}get(i,o=Vi,l=Yt.Default){if(Cl(this),i.hasOwnProperty(al))return i[al](this);l=xs(l);const f=be(this),m=$n(void 0);try{if(!(l&Yt.SkipSelf)){let P=this.records.get(i);if(void 0===P){const Q=function ng(t){return"function"==typeof t||"object"==typeof t&&t instanceof bt}(i)&&Gs(i);P=Q&&this.injectableDefInScope(Q)?Or(ts(i),We):null,this.records.set(i,P)}if(null!=P)return this.hydrate(i,P,l)}return(l&Yt.Self?pl():this.parent).get(i,o=l&Yt.Optional&&o===Vi?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Bo]=D[Bo]||[]).unshift(yn(i)),f)throw D;return function jo(t,i,o,l){const h=t[Bo];throw i[Uo]&&h.unshift(i[Uo]),t.message=function Zt(t,i,o,l=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let h=yn(i);if(Array.isArray(i))h=i.map(yn).join(" -> ");else if("object"==typeof i){let f=[];for(let m in i)if(i.hasOwnProperty(m)){let D=i[m];f.push(m+":"+("string"==typeof D?JSON.stringify(D):yn(D)))}h=`{${f.join(", ")}}`}return`${o}${l?"("+l+")":""}[${h}]: ${t.replace(da,"\n  ")}`}("\n"+t.message,h,o,l),t.ngTokenPath=h,t[Bo]=null,t}(D,i,"R3InjectorError",this.source)}throw D}finally{$n(m),be(f)}}resolveInjectorInitializers(){const i=z(null),o=be(this),l=$n(void 0);try{const f=this.get(Hi,ln,Yt.Self);for(const m of f)m()}finally{be(o),$n(l),z(i)}}toString(){const i=[],o=this.records;for(const l of o.keys())i.push(yn(l));return`R3Injector[${i.join(", ")}]`}processProvider(i){let o=Qn(i=ct(i))?i:ct(i&&i.provide);const l=function _f(t){return Fe(t)?Or(void 0,t.useValue):Or(Ji(t),We)}(i);if(!Qn(i)&&!0===i.multi){let h=this.records.get(o);h||(h=Or(void 0,We,!0),h.factory=()=>xr(h.multi),this.records.set(o,h)),o=i,h.multi.push(i)}this.records.set(o,l)}hydrate(i,o,l){const h=z(null);try{return o.value===ml?Dr(yn(i)):o.value===We&&(o.value=ml,o.value=o.factory(void 0,l)),"object"==typeof o.value&&o.value&&function tg(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}finally{z(h)}}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ct(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(i){const o=this._onDestroyHooks.indexOf(i);-1!==o&&this._onDestroyHooks.splice(o,1)}}function ts(t){const i=Gs(t),o=null!==i?i.factory:Ms(t);if(null!==o)return o;if(t instanceof bt)throw new Qe(204,!1);if(t instanceof Function)return function ma(t){if(t.length>0)throw new Qe(204,!1);const o=function il(t){return t&&(t[sl]||t[oa])||null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new Qe(204,!1)}function Ji(t,i,o){let l;if(Qn(t)){const h=ct(t);return Ms(h)||ts(h)}if(Fe(t))l=()=>ct(t.useValue);else if(function Xt(t){return!(!t||!t.useFactory)}(t))l=()=>t.useFactory(...xr(t.deps||[]));else if(function Ct(t){return!(!t||!t.useExisting)}(t))l=(h,f)=>zn(ct(t.useExisting),void 0!==f&&f&Yt.Optional?Yt.Optional:void 0);else{const h=ct(t&&(t.useClass||t.provide));if(!function eg(t){return!!t.deps}(t))return Ms(h)||ts(h);l=()=>new h(...xr(t.deps))}return l}function Cl(t){if(t.destroyed)throw new Qe(205,!1)}function Or(t,i,o=!1){return{factory:t,value:i,multi:o?[]:void 0}}function zd(t,i){for(const o of t)Array.isArray(o)?zd(o,i):o&&ll(o)?zd(o.\u0275providers,i):i(o)}function yl(t,i){let o;t instanceof fo?(Cl(t),o=t):o=new co(t);const h=be(o),f=$n(void 0);try{return i()}finally{be(h),$n(f)}}function Kd(){return void 0!==Vo()||null!=Re()}function Jo(t){if(!Kd())throw new Qe(-203,!1)}const ht=0,it=1,Nt=2,pn=3,nn=4,ti=5,kn=6,go=7,Lt=8,wn=9,As=10,Mt=11,Qo=12,Nr=13,Ps=14,Fn=15,Zo=16,ko=17,ys=18,Fr=19,ya=20,Ys=21,qo=23,Qi=24,Dt=26,El=1,ji=7,ni=9,an=10;function ot(t){return Array.isArray(t)&&"object"==typeof t[El]}function sn(t){return Array.isArray(t)&&!0===t[El]}function jt(t){return!!(4&t.flags)}function un(t){return t.componentOffset>-1}function Os(t){return!(1&~t.flags)}function yi(t){return!!t.template}function En(t){return!!(512&t[Nt])}function Kn(t){return!(256&~t[Nt])}class Ei{previousValue;currentValue;firstChange;constructor(i,o,l){this.previousValue=i,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ta(t,i,o,l){null!==i?i.applyValueToInputSignal(i,l):t[o]=l}const Ia=(()=>{const t=()=>Sl;return t.ngInherit=!0,t})();function Sl(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ma),xa}function xa(){const t=Hh(this),i=t?.current;if(i){const o=t.previous;if(o===Xi)t.previous=i;else for(let l in i)o[l]=i[l];t.current=null,this.ngOnChanges(i)}}function Ma(t,i,o,l,h){const f=this.declaredInputs[l],m=Hh(t)||function Uh(t,i){return t[kd]=i}(t,{previous:Xi,current:null}),D=m.current||(m.current={}),P=m.previous,Q=P[f];D[f]=new Ei(Q&&Q.currentValue,o,P===Xi),Ta(t,i,h,o)}const kd="__ngSimpleChanges__";function Hh(t){return t[kd]||null}const Sn=function(t,i=null,o){},qd="svg";function hn(t){for(;Array.isArray(t);)t=t[ht];return t}function Ur(t,i){return hn(i[t])}function It(t,i){return hn(i[t.index])}function Rs(t,i){return t.data[i]}function Qs(t,i){return t[i]}function ec(t,i,o,l){o>=t.data.length&&(t.data[o]=null,t.blueprint[o]=null),i[o]=l}function Pi(t,i){const o=i[t];return ot(o)?o:o[ht]}function tc(t){return!(128&~t[Nt])}function ns(t,i){return null==i?null:t[i]}function Gh(t){t[ko]=0}function Gr(t){1024&t[Nt]||(t[Nt]|=1024,tc(t)&&po(t))}function Vn(t){return!!(9216&t[Nt]||t[Qi]?.dirty)}function tr(t){t[As].changeDetectionScheduler?.notify(8),64&t[Nt]&&(t[Nt]|=1024),Vn(t)&&po(t)}function po(t){t[As].changeDetectionScheduler?.notify(0);let i=vs(t);for(;null!==i&&!(8192&i[Nt])&&(i[Nt]|=8192,tc(i));)i=vs(i)}function jr(t,i){if(Kn(t))throw new Qe(911,!1);null===t[Ys]&&(t[Ys]=[]),t[Ys].push(i)}function vs(t){const i=t[pn];return sn(i)?i[pn]:i}function Wr(t){return t[go]??=[]}function nr(t){return t.cleanup??=[]}const Vt={lFrame:ac(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Oa=!1;function jh(){return Vt.bindingsEnabled}function ir(){return null!==Vt.skipHydrationRootTNode}function Ye(){return Vt.lFrame.lView}function Rt(){return Vt.lFrame.tView}function Pn(t){return Vt.lFrame.contextLView=t,t[Lt]}function $r(t){return Vt.lFrame.contextLView=null,t}function kt(){let t=cg();for(;null!==t&&64===t.type;)t=t.parent;return t}function cg(){return Vt.lFrame.currentTNode}function ss(t,i){const o=Vt.lFrame;o.currentTNode=t,o.isParent=i}function zr(){return Vt.lFrame.isParent}function Ns(){Vt.lFrame.isParent=!1}function $h(){return Oa}function ba(t){const i=Oa;return Oa=t,i}function Oi(){const t=Vt.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function Fs(){return Vt.lFrame.bindingIndex}function os(){return Vt.lFrame.bindingIndex++}function rs(t){const i=Vt.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,o}function fg(t,i){const o=Vt.lFrame;o.bindingIndex=o.bindingRootIndex=t,oc(i)}function oc(t){Vt.lFrame.currentDirectiveIndex=t}function Ra(){return Vt.lFrame.currentQueryIndex}function bl(t){Vt.lFrame.currentQueryIndex=t}function Xh(t){const i=t[it];return 2===i.type?i.declTNode:1===i.type?t[ti]:null}function rc(t,i,o){if(o&Yt.SkipSelf){let h=i,f=t;for(;!(h=h.parent,null!==h||o&Yt.Host||(h=Xh(f),null===h||(f=f[Ps],10&h.type))););if(null===h)return!1;i=h,t=f}const l=Vt.lFrame=lc();return l.currentTNode=i,l.lView=t,!0}function Na(t){const i=lc(),o=t[it];Vt.lFrame=i,i.currentTNode=o.firstChild,i.lView=t,i.tView=o,i.contextLView=t,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function lc(){const t=Vt.lFrame,i=null===t?null:t.child;return null===i?ac(t):i}function ac(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function dc(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const cc=dc;function Fa(){const t=dc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ci(){return Vt.lFrame.selectedIndex}function Ls(t){Vt.lFrame.selectedIndex=t}function Tn(){const t=Vt.lFrame;return Rs(t.tView,t.selectedIndex)}function Rl(){Vt.lFrame.currentNamespace=qd}function Bn(){!function Zs(){Vt.lFrame.currentNamespace=null}()}let Jh=!0;function Co(){return Jh}function ws(t){Jh=t}function uc(t,i){for(let o=i.directiveStart,l=i.directiveEnd;o<l;o++){const f=t.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:D,ngAfterViewInit:P,ngAfterViewChecked:Q,ngOnDestroy:de}=f;m&&(t.contentHooks??=[]).push(-o,m),D&&((t.contentHooks??=[]).push(o,D),(t.contentCheckHooks??=[]).push(o,D)),P&&(t.viewHooks??=[]).push(-o,P),Q&&((t.viewHooks??=[]).push(o,Q),(t.viewCheckHooks??=[]).push(o,Q)),null!=de&&(t.destroyHooks??=[]).push(o,de)}}function La(t,i,o){gc(t,i,3,o)}function sr(t,i,o,l){(3&t[Nt])===o&&gc(t,i,o,l)}function fc(t,i){let o=t[Nt];(3&o)===i&&(o&=16383,o+=1,t[Nt]=o)}function gc(t,i,o,l){const f=l??-1,m=i.length-1;let D=0;for(let P=void 0!==l?65535&t[ko]:0;P<m;P++)if("number"==typeof i[P+1]){if(D=i[P],null!=l&&D>=l)break}else i[P]<0&&(t[ko]+=65536),(D<f||-1==f)&&(mc(t,o,i,P),t[ko]=(4294901760&t[ko])+P+2),P++}function wa(t,i){Sn(4,t,i);const o=z(null);try{i.call(t)}finally{z(o),Sn(5,t,i)}}function mc(t,i,o,l){const h=o[l]<0,f=o[l+1],D=t[h?-o[l]:o[l]];h?t[Nt]>>14<t[ko]>>16&&(3&t[Nt])===i&&(t[Nt]+=16384,wa(D,f)):wa(D,f)}const yo=-1;class or{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(i,o,l){this.factory=i,this.canSeeViewProviders=o,this.injectImpl=l}}function Ha(t){return 3===t||4===t||6===t}function Zh(t){return 64===t.charCodeAt(0)}function lr(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let o=-1;for(let l=0;l<i.length;l++){const h=i[l];"number"==typeof h?o=h:0===o||kh(t,o,h,0,-1===o||2===o?i[++l]:null)}}return t}function kh(t,i,o,l,h){let f=0,m=t.length;if(-1===i)m=-1;else for(;f<t.length;){const D=t[f++];if("number"==typeof D){if(D===i){m=-1;break}if(D>i){m=f-1;break}}}for(;f<t.length;){const D=t[f];if("number"==typeof D)break;if(D===o)return void(null!==h&&(t[f+1]=h));f++,null!==h&&f++}-1!==m&&(t.splice(m,0,i),f=m+1),t.splice(f++,0,o),null!==h&&t.splice(f++,0,h)}function Ua(t){return t!==yo}function Nl(t){return 32767&t}function Fl(t,i){let o=function qh(t){return t>>16}(t),l=i;for(;o>0;)l=l[Ps],o--;return l}let pc=!0;function Ga(t){const i=pc;return pc=t,i}const _h=255,Ll=5;let eu=0;const Ds={};function ar(t,i){const o=ja(t,i);if(-1!==o)return o;const l=i[it];l.firstCreatePass&&(t.injectorIndex=i.length,dr(l.data,t),dr(i,null),dr(l.blueprint,null));const h=wl(t,i),f=t.injectorIndex;if(Ua(h)){const m=Nl(h),D=Fl(h,i),P=D[it].data;for(let Q=0;Q<8;Q++)i[f+Q]=D[m+Q]|P[m+Q]}return i[f+8]=h,f}function dr(t,i){t.push(0,0,0,0,0,0,0,0,i)}function ja(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function wl(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,l=null,h=i;for(;null!==h;){if(l=$a(h),null===l)return yo;if(o++,h=h[Ps],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return yo}function Cc(t,i,o){!function Eg(t,i,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(Ws)&&(l=o[Ws]),null==l&&(l=o[Ws]=eu++);const h=l&_h;i.data[t+(h>>Ll)]|=1<<h}(t,i,o)}function tu(t,i,o){if(o&Yt.Optional||void 0!==t)return t;Sr()}function nu(t,i,o,l){if(o&Yt.Optional&&void 0===l&&(l=null),!(o&(Yt.Self|Yt.Host))){const h=t[wn],f=$n(void 0);try{return h?h.get(i,l,o&Yt.Optional):dl(i,l,o&Yt.Optional)}finally{$n(f)}}return tu(l,0,o)}function iu(t,i,o,l=Yt.Default,h){if(null!==t){if(2048&i[Nt]&&!(l&Yt.Self)){const m=function Ig(t,i,o,l,h){let f=t,m=i;for(;null!==f&&null!==m&&2048&m[Nt]&&!En(m);){const D=su(f,m,o,l|Yt.Self,Ds);if(D!==Ds)return D;let P=f.parent;if(!P){const Q=m[ya];if(Q){const de=Q.get(o,Ds,l);if(de!==Ds)return de}P=$a(m),m=m[Ps]}f=P}return h}(t,i,o,l,Ds);if(m!==Ds)return m}const f=su(t,i,o,l,Ds);if(f!==Ds)return f}return nu(i,o,l,h)}function su(t,i,o,l,h){const f=function Tg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(Ws)?t[Ws]:void 0;return"number"==typeof i?i>=0?i&_h:Eo:i}(o);if("function"==typeof f){if(!rc(i,t,l))return l&Yt.Host?tu(h,0,l):nu(i,o,l,h);try{let m;if(m=f(l),null!=m||l&Yt.Optional)return m;Sr()}finally{cc()}}else if("number"==typeof f){let m=null,D=ja(t,i),P=yo,Q=l&Yt.Host?i[Fn][ti]:null;for((-1===D||l&Yt.SkipSelf)&&(P=-1===D?wl(t,i):i[D+8],P!==yo&&ru(l,!1)?(m=i[it],D=Nl(P),i=Fl(P,i)):D=-1);-1!==D;){const de=i[it];if(ou(f,D,de.data)){const ye=Sg(D,i,o,m,l,Q);if(ye!==Ds)return ye}P=i[D+8],P!==yo&&ru(l,i[it].data[D+8]===Q)&&ou(f,D,i)?(m=de,D=Nl(P),i=Fl(P,i)):D=-1}}return h}function Sg(t,i,o,l,h,f){const m=i[it],D=m.data[t+8],de=Wa(D,m,o,null==l?un(D)&&pc:l!=m&&!!(3&D.type),h&Yt.Host&&f===D);return null!==de?Vl(i,m,de,D,h):Ds}function Wa(t,i,o,l,h){const f=t.providerIndexes,m=i.data,D=1048575&f,P=t.directiveStart,de=f>>20,Pe=h?D+de:t.directiveEnd;for(let Me=l?D:D+de;Me<Pe;Me++){const we=m[Me];if(Me<P&&o===we||Me>=P&&we.type===o)return Me}if(h){const Me=m[P];if(Me&&yi(Me)&&Me.type===o)return P}return null}function Vl(t,i,o,l,h){let f=t[o];const m=i.data;if(f instanceof or){const D=f;D.resolving&&Dr(function mn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ft(t)}(m[o]));const P=Ga(D.canSeeViewProviders);D.resolving=!0;const de=D.injectImpl?$n(D.injectImpl):null;rc(t,l,Yt.Default);try{f=t[o]=D.factory(void 0,h,m,t,l),i.firstCreatePass&&o>=l.directiveStart&&function mg(t,i,o){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:f}=i.type.prototype;if(l){const m=Sl(i);(o.preOrderHooks??=[]).push(t,m),(o.preOrderCheckHooks??=[]).push(t,m)}h&&(o.preOrderHooks??=[]).push(0-t,h),f&&((o.preOrderHooks??=[]).push(t,f),(o.preOrderCheckHooks??=[]).push(t,f))}(o,m[o],i)}finally{null!==de&&$n(de),Ga(P),D.resolving=!1,cc()}}return f}function ou(t,i,o){return!!(o[i+(t>>Ll)]&1<<t)}function ru(t,i){return!(t&Yt.Self||t&Yt.Host&&i)}class jn{_tNode;_lView;constructor(i,o){this._tNode=i,this._lView=o}get(i,o,l){return iu(this._tNode,this._lView,i,xs(l),o)}}function Eo(){return new jn(kt(),Ye())}function yc(t){return Ht(()=>{const i=t.prototype.constructor,o=i[wi]||vc(i),l=Object.prototype;let h=Object.getPrototypeOf(t.prototype).constructor;for(;h&&h!==l;){const f=h[wi]||vc(h);if(f&&f!==o)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function vc(t){return vn(t)?()=>{const i=vc(ct(t));return i&&i()}:Ms(t)}function $a(t){const i=t[it],o=i.type;return 2===o?i.declTNode:1===o?t[ti]:null}function hr(t){return function Dg(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const o=t.attrs;if(o){const l=o.length;let h=0;for(;h<l;){const f=o[h];if(Ha(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<l&&"string"==typeof o[h];)h++;else{if(f===i)return o[h+1];h+=2}}}return null}(kt(),t)}function hu(t,i=null,o=null,l){const h=uu(t,i,o,l);return h.resolveInjectorInitializers(),h}function uu(t,i=null,o=null,l,h=new Set){const f=[o||ln,Wd(t)];return l=l||("object"==typeof t?void 0:yn(t)),new fo(f,i||pl(),l||null,h)}class hi{static THROW_IF_NOT_FOUND=Vi;static NULL=new Yo;static create(i,o){if(Array.isArray(i))return hu({name:""},o,i,"");{const l=i.name??"";return hu({name:l},i.parent,i.providers,l)}}static \u0275prov=rn({token:hi,providedIn:"any",factory:()=>zn(fa)});static __NG_ELEMENT_ID__=-1}class Rg{attributeName;constructor(i){this.attributeName=i}__NG_ELEMENT_ID__=()=>hr(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}new bt("").__NG_ELEMENT_ID__=t=>{const i=kt();if(null===i)throw new Qe(204,!1);if(2&i.type)return i.value;if(t&Yt.Optional)return null;throw new Qe(204,!1)};const fu=!1;let ls=(()=>class t{static __NG_ELEMENT_ID__=Fg;static __NG_ENV_ID__=o=>o})();class Ya extends ls{_lView;constructor(i){super(),this._lView=i}onDestroy(i){const o=this._lView;return Kn(o)?(i(),()=>{}):(jr(o,i),()=>function Tl(t,i){if(null===t[Ys])return;const o=t[Ys].indexOf(i);-1!==o&&t[Ys].splice(o,1)}(o,i))}}function Fg(){return new Ya(Ye())}class ks{}const Do=new bt("",{providedIn:"root",factory:()=>!1}),Xa=new bt(""),gu=new bt("");let as=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new De.t(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}has(o){return this.pendingTasks.has(o)}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=rn({token:t,providedIn:"root",factory:()=>new t})}return t})();const Hn=class Dc extends Ae.B{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(i=!1){super(),this.__isAsync=i,Kd()&&(this.destroyRef=vt(ls,{optional:!0})??void 0,this.pendingTasks=vt(as,{optional:!0})??void 0)}emit(i){const o=z(null);try{super.next(i)}finally{z(o)}}subscribe(i,o,l){let h=i,f=o||(()=>null),m=l;if(i&&"object"==typeof i){const P=i;h=P.next?.bind(P),f=P.error?.bind(P),m=P.complete?.bind(P)}this.__isAsync&&(f=this.wrapInTimeout(f),h&&(h=this.wrapInTimeout(h)),m&&(m=this.wrapInTimeout(m)));const D=super.subscribe({next:h,error:f,complete:m});return i instanceof je.yU&&i.add(D),D}wrapInTimeout(i){return o=>{const l=this.pendingTasks?.add();setTimeout(()=>{try{i(o)}finally{void 0!==l&&this.pendingTasks?.remove(l)}})}}};function Yr(...t){}function Qa(t){let i,o;function l(){t=Yr;try{void 0!==o&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(o),void 0!==i&&clearTimeout(i)}catch{}}return i=setTimeout(()=>{t(),l()}),"function"==typeof requestAnimationFrame&&(o=requestAnimationFrame(()=>{t(),l()})),()=>l()}function Bl(t){return queueMicrotask(()=>t()),()=>{t=Yr}}const Xr="isAngularZone",Hl=Xr+"_ID";let Lg=0;class Rn{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Hn(!1);onMicrotaskEmpty=new Hn(!1);onStable=new Hn(!1);onError=new Hn(!1);constructor(i){const{enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1,scheduleInRootZone:f=fu}=i;if(typeof Zone>"u")throw new Qe(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!h&&l,m.shouldCoalesceRunChangeDetection=h,m.callbackScheduled=!1,m.scheduleInRootZone=f,function Vg(t){const i=()=>{!function wg(t){function i(){Qa(()=>{t.callbackScheduled=!1,ur(t),t.isCheckStableRunning=!0,Cu(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{i()}):t._outer.run(()=>{i()}),ur(t))}(t)},o=Lg++;t._inner=t._inner.fork({name:"angular",properties:{[Xr]:!0,[Hl]:o,[Hl+o]:!0},onInvokeTask:(l,h,f,m,D,P)=>{if(function Sc(t){return Du(t,"__ignore_ng_zone__")}(P))return l.invokeTask(f,m,D,P);try{return yu(t),l.invokeTask(f,m,D,P)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||t.shouldCoalesceRunChangeDetection)&&i(),vu(t)}},onInvoke:(l,h,f,m,D,P,Q)=>{try{return yu(t),l.invoke(f,m,D,P,Q)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function Eu(t){return Du(t,"__scheduler_tick__")}(P)&&i(),vu(t)}},onHasTask:(l,h,f,m)=>{l.hasTask(f,m),h===f&&("microTask"==m.change?(t._hasPendingMicrotasks=m.microTask,ur(t),Cu(t)):"macroTask"==m.change&&(t.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,h,f,m)=>(l.handleError(f,m),t.runOutsideAngular(()=>t.onError.emit(m)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Xr)}static assertInAngularZone(){if(!Rn.isInAngularZone())throw new Qe(909,!1)}static assertNotInAngularZone(){if(Rn.isInAngularZone())throw new Qe(909,!1)}run(i,o,l){return this._inner.run(i,o,l)}runTask(i,o,l,h){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+h,i,pu,Yr,Yr);try{return f.runTask(m,o,l)}finally{f.cancelTask(m)}}runGuarded(i,o,l){return this._inner.runGuarded(i,o,l)}runOutsideAngular(i){return this._outer.run(i)}}const pu={};function Cu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ur(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function yu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vu(t){t._nesting--,Cu(t)}class So{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Hn;onMicrotaskEmpty=new Hn;onStable=new Hn;onError=new Hn;run(i,o,l){return i.apply(o,l)}runGuarded(i,o,l){return i.apply(o,l)}runOutsideAngular(i){return i()}runTask(i,o,l,h){return i.apply(o,l)}}function Du(t,i){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[i]}class Bs{_console=console;handleError(i){this._console.error("ERROR",i)}}const Hg=new bt("",{providedIn:"root",factory:()=>{const t=vt(Rn),i=vt(Bs);return o=>t.runOutsideAngular(()=>i.handleError(o))}});function Ic(t,i){return Ut(t,i)}const Gg=(Ic.required=function Ug(t){return Ut(Et,t)},Ic);function jg(){return Jr(kt(),Ye())}function Jr(t,i){return new Ul(It(t,i))}let Ul=(()=>class t{nativeElement;constructor(o){this.nativeElement=o}static __NG_ELEMENT_ID__=jg})();function Su(t){return t instanceof Ul?t.nativeElement:t}function xc(t){return"function"==typeof t&&void 0!==t[ne]}function qs(t,i){const o=function J(t,i){const o=Object.create(Le);o.value=t,void 0!==i&&(o.equal=i);const l=()=>(me(o),o.value);return l[ne]=o,l}(t,i?.equal),l=o[ne];return o.set=h=>Y(l,h),o.update=h=>function Ee(t,i){ge()||ee(t),Y(t,i(t.value))}(l,h),o.asReadonly=Za.bind(o),o}function Za(){const t=this[ne];if(void 0===t.readonlyFn){const i=()=>this();i[ne]=t,t.readonlyFn=i}return t.readonlyFn}function Tu(t){return xc(t)&&"function"==typeof t.set}function Wg(){return this._results[Symbol.iterator]()}class Iu{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ae.B}constructor(i=!1){this._emitDistinctChangesOnly=i}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){this.dirty=!1;const l=function ai(t){return t.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function ha(t,i,o){if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++){let h=t[l],f=i[l];if(o&&(h=o(h),f=o(f)),f!==h)return!1}return!0}(this._results,l,o))&&(this._results=l,this.length=l.length,this.last=l[this.length-1],this.first=l[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(i){this._onDirty=i}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Wg}function Gl(t){return!(128&~t.flags)}var ka=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ka||{});const qa=new Map;let $g=0;function Ac(t){qa.delete(t[Fr])}const Oc="__ngContext__";function Wi(t,i){ot(i)?(t[Oc]=i[Fr],function zg(t){qa.set(t[Fr],t)}(i)):t[Oc]=i}function Lu(t){return Vu(t[Qo])}function wu(t){return Vu(t[nn])}function Vu(t){for(;null!==t&&!sn(t);)t=t[nn];return t}let ju;function tC(t){ju=t}function _s(){if(void 0!==ju)return ju;if(typeof document<"u")return document;throw new Qe(210,!1)}const fr=new bt("",{providedIn:"root",factory:()=>nC}),nC="ng",Wu=new bt(""),tm=new bt("",{providedIn:"platform",factory:()=>"unknown"}),d=new bt(""),e=new bt("",{providedIn:"root",factory:()=>_s().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Yn=new bt("",{providedIn:"root",factory:()=>!1});var $i=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}($i||{});const Di=new bt(""),ed=new Set;function bi(t){ed.has(t)||(ed.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}let gr=(()=>class t{view;node;constructor(o,l){this.view=o,this.node=l}static __NG_ELEMENT_ID__=$u})();function $u(){return new gr(Ye(),kt())}var Hs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Hs||{});let td=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=rn({token:t,providedIn:"root",factory:()=>new t})}return t})();const Fc=[Hs.EarlyRead,Hs.Write,Hs.MixedReadWrite,Hs.Read];let Lc=(()=>{class t{ngZone=vt(Rn);scheduler=vt(ks);errorHandler=vt(Bs,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){vt(Di,{optional:!0})}execute(){const o=this.sequences.size>0;o&&Sn(16),this.executing=!0;for(const l of Fc)for(const h of this.sequences)if(!h.erroredOrDestroyed&&h.hooks[l])try{h.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,h.hooks[l])(h.pipelinedValue),h.snapshot))}catch(f){h.erroredOrDestroyed=!0,this.errorHandler?.handleError(f)}this.executing=!1;for(const l of this.sequences)l.afterRun(),l.once&&(this.sequences.delete(l),l.destroy());for(const l of this.deferredRegistrations)this.sequences.add(l);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),o&&Sn(17)}register(o){const{view:l}=o;void 0!==l?((l[25]??=[]).push(o),po(l),l[Nt]|=8192):this.executing?this.deferredRegistrations.add(o):this.addSequence(o)}addSequence(o){this.sequences.add(o),this.scheduler.notify(7)}unregister(o){this.executing&&this.sequences.has(o)?(o.erroredOrDestroyed=!0,o.pipelinedValue=void 0,o.once=!0):(this.sequences.delete(o),this.deferredRegistrations.delete(o))}maybeTrace(o,l){return l?l.run($i.AFTER_NEXT_RENDER,o):o()}static \u0275prov=rn({token:t,providedIn:"root",factory:()=>new t})}return t})();class wc{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(i,o,l,h,f,m=null){this.impl=i,this.hooks=o,this.view=l,this.once=h,this.snapshot=m,this.unregisterOnDestroy=f?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const i=this.view?.[25];i&&(this.view[25]=i.filter(o=>o!==this))}}function Vc(t,i){!i?.injector&&Jo();const o=i?.injector??vt(hi);return bi("NgAfterRender"),fn(t,o,i,!1)}function Bc(t,i){!i?.injector&&Jo();const o=i?.injector??vt(hi);return bi("NgAfterNextRender"),fn(t,o,i,!0)}function fn(t,i,o,l){const h=i.get(td);h.impl??=i.get(Lc);const f=i.get(Di,null,{optional:!0}),m=o?.phase??Hs.MixedReadWrite,D=!0!==o?.manualCleanup?i.get(ls):null,P=i.get(gr,null,{optional:!0}),Q=new wc(h.impl,function Pt(t,i){if(t instanceof Function){const o=[void 0,void 0,void 0,void 0];return o[i]=t,o}return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t,m),P?.view,l,D,f?.snapshot(null));return h.impl.register(Q),Q}let pC=(t,i,o,l)=>{},CC=()=>null;function yC(t,i,o=!1){return CC(t,i,o)}function AC(t,i){const o=t.contentQueries;if(null!==o){const l=z(null);try{for(let h=0;h<o.length;h+=2){const m=o[h+1];if(-1!==m){const D=t.data[m];bl(o[h]),D.contentQueries(2,i[m],m)}}}finally{z(l)}}}function mm(t,i,o){bl(0);const l=z(null);try{i(t,o)}finally{z(l)}}function pm(t,i,o){if(jt(i)){const l=z(null);try{const f=i.directiveEnd;for(let m=i.directiveStart;m<f;m++){const D=t.data[m];D.contentQueries&&D.contentQueries(1,o[m],m)}}finally{z(l)}}}var pr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pr||{});let ku,qu;function ld(t){return function PC(){if(void 0===ku&&(ku=null,en.trustedTypes))try{ku=en.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ku}()?.createHTML(t)||t}function Cm(){if(void 0===qu&&(qu=null,en.trustedTypes))try{qu=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return qu}function OC(t){return Cm()?.createHTML(t)||t}function RC(t){return Cm()?.createScriptURL(t)||t}class $l{changingThisBreaksApplicationSecurity;constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}class DI extends $l{getTypeName(){return"HTML"}}class SI extends $l{getTypeName(){return"Style"}}class TI extends $l{getTypeName(){return"Script"}}class II extends $l{getTypeName(){return"URL"}}class xI extends $l{getTypeName(){return"ResourceURL"}}function Cr(t){return t instanceof $l?t.changingThisBreaksApplicationSecurity:t}function ad(t,i){const o=function MI(t){return t instanceof $l&&t.getTypeName()||null}(t);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${gt})`)}return o===i}function AI(t){return new DI(t)}function PI(t){return new SI(t)}function OI(t){return new TI(t)}function bI(t){return new II(t)}function RI(t){return new xI(t)}class NI{inertDocumentHelper;constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(ld(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.firstChild?.remove(),o)}catch{return null}}}class FI{defaultDoc;inertDocument;constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=ld(i),o}}const wI=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function _u(t){return(t=String(t)).match(wI)?t:"unsafe:"+t}function yr(t){const i={};for(const o of t.split(","))i[o]=!0;return i}function Yc(...t){const i={};for(const o of t)for(const l in o)o.hasOwnProperty(l)&&(i[l]=!0);return i}const FC=yr("area,br,col,hr,img,wbr"),LC=yr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),wC=yr("rp,rt"),ym=Yc(FC,Yc(LC,yr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yc(wC,yr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yc(wC,LC)),vm=yr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),VC=Yc(vm,yr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),VI=yr("script,style,template");class BI{sanitizedSomething=!1;buf=[];sanitizeChildren(i){let o=i.firstChild,l=!0,h=[];for(;o;)if(o.nodeType===Node.ELEMENT_NODE?l=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,l&&o.firstChild)h.push(o),o=GI(o);else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let f=UI(o);if(f){o=f;break}o=h.pop()}return this.buf.join("")}startElement(i){const o=BC(i).toLowerCase();if(!ym.hasOwnProperty(o))return this.sanitizedSomething=!0,!VI.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const l=i.attributes;for(let h=0;h<l.length;h++){const f=l.item(h),m=f.name,D=m.toLowerCase();if(!VC.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let P=f.value;vm[D]&&(P=_u(P)),this.buf.push(" ",m,'="',UC(P),'"')}return this.buf.push(">"),!0}endElement(i){const o=BC(i).toLowerCase();ym.hasOwnProperty(o)&&!FC.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(UC(i))}}function UI(t){const i=t.nextSibling;if(i&&t!==i.previousSibling)throw HC(i);return i}function GI(t){const i=t.firstChild;if(i&&function HI(t,i){return(t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,i))throw HC(i);return i}function BC(t){const i=t.nodeName;return"string"==typeof i?i:"FORM"}function HC(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const jI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,WI=/([^\#-~ |!])/g;function UC(t){return t.replace(/&/g,"&amp;").replace(jI,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(WI,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ef;function GC(t,i){let o=null;try{ef=ef||function NC(t){const i=new FI(t);return function LI(){try{return!!(new window.DOMParser).parseFromString(ld(""),"text/html")}catch{return!1}}()?new NI(i):i}(t);let l=i?String(i):"";o=ef.getInertBodyElement(l);let h=5,f=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=f,f=o.innerHTML,o=ef.getInertBodyElement(l)}while(l!==f);return ld((new BI).sanitizeChildren(Em(o)||o))}finally{if(o){const l=Em(o)||o;for(;l.firstChild;)l.firstChild.remove()}}}function Em(t){return"content"in t&&function $I(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var zl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(zl||{});function jC(t){const i=Xc();return i?OC(i.sanitize(zl.HTML,t)||""):ad(t,"HTML")?OC(Cr(t)):GC(_s(),Ft(t))}function Dm(t){const i=Xc();return i?i.sanitize(zl.URL,t)||"":ad(t,"URL")?Cr(t):_u(Ft(t))}function WC(t){const i=Xc();if(i)return RC(i.sanitize(zl.RESOURCE_URL,t)||"");if(ad(t,"ResourceURL"))return RC(Cr(t));throw new Qe(904,!1)}function $C(t,i,o){return function JI(t,i){return"src"===i&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===i&&("base"===t||"link"===t)?WC:Dm}(i,o)(t)}function Xc(){const t=Ye();return t&&t[As].sanitizer}const QI=/^>|^->|<!--|-->|--!>|<!-$/g,ZI=/(<|>)/g;function JC(t){return t.ownerDocument.defaultView}function QC(t){return t.ownerDocument}function Io(t){return t instanceof Function?t():t}function rx(t,i,o){let l=t.length;for(;;){const h=t.indexOf(i,o);if(-1===h)return h;if(0===h||t.charCodeAt(h-1)<=32){const f=i.length;if(h+f===l||t.charCodeAt(h+f)<=32)return h}o=h+1}}const ey="ng-template";function lx(t,i,o,l){let h=0;if(l){for(;h<i.length&&"string"==typeof i[h];h+=2)if("class"===i[h]&&-1!==rx(i[h+1].toLowerCase(),o,0))return!0}else if(Im(t))return!1;if(h=i.indexOf(1,h),h>-1){let f;for(;++h<i.length&&"string"==typeof(f=i[h]);)if(f.toLowerCase()===o)return!0}return!1}function Im(t){return 4===t.type&&t.value!==ey}function ax(t,i,o){return i===(4!==t.type||o?t.value:ey)}function dx(t,i,o){let l=4;const h=t.attrs,f=null!==h?function ux(t){for(let i=0;i<t.length;i++)if(Ha(t[i]))return i;return t.length}(h):0;let m=!1;for(let D=0;D<i.length;D++){const P=i[D];if("number"!=typeof P){if(!m)if(4&l){if(l=2|1&l,""!==P&&!ax(t,P,o)||""===P&&1===i.length){if(eo(l))return!1;m=!0}}else if(8&l){if(null===h||!lx(t,h,P,o)){if(eo(l))return!1;m=!0}}else{const Q=i[++D],de=cx(P,h,Im(t),o);if(-1===de){if(eo(l))return!1;m=!0;continue}if(""!==Q){let ye;if(ye=de>f?"":h[de+1].toLowerCase(),2&l&&Q!==ye){if(eo(l))return!1;m=!0}}}}else{if(!m&&!eo(l)&&!eo(P))return!1;if(m&&eo(P))continue;m=!1,l=P|1&l}}return eo(l)||m}function eo(t){return!(1&t)}function cx(t,i,o,l){if(null===i)return-1;let h=0;if(l||!o){let f=!1;for(;h<i.length;){const m=i[h];if(m===t)return h;if(3===m||6===m)f=!0;else{if(1===m||2===m){let D=i[++h];for(;"string"==typeof D;)D=i[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=f?1:2}return-1}return function fx(t,i){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const l=t[o];if("number"==typeof l)return-1;if(l===i)return o;o++}return-1}(i,t)}function ty(t,i,o=!1){for(let l=0;l<i.length;l++)if(dx(t,i[l],o))return!0;return!1}function gx(t,i){e:for(let o=0;o<i.length;o++){const l=i[o];if(t.length===l.length){for(let h=0;h<t.length;h++)if(t[h]!==l[h])continue e;return!0}}return!1}function ny(t,i){return t?":not("+i.trim()+")":i}function mx(t){let i=t[0],o=1,l=2,h="",f=!1;for(;o<t.length;){let m=t[o];if("string"==typeof m)if(2&l){const D=t[++o];h+="["+m+(D.length>0?'="'+D+'"':"")+"]"}else 8&l?h+="."+m:4&l&&(h+=" "+m);else""!==h&&!eo(m)&&(i+=ny(f,h),h=""),l=m,f=f||!eo(l);o++}return""!==h&&(i+=ny(f,h)),i}const Jt={};function Mm(t,i){return t.createComment(function zC(t){return t.replace(QI,i=>i.replace(ZI,"\u200b$1\u200b"))}(i))}function sf(t,i,o){return t.createElement(i,o)}function Kl(t,i,o,l,h){t.insertBefore(i,o,l,h)}function sy(t,i,o){t.appendChild(i,o)}function oy(t,i,o,l,h){null!==l?Kl(t,i,o,l,h):sy(t,i,o)}function ly(t,i,o){const{mergedAttrs:l,classes:h,styles:f}=o;null!==l&&function vg(t,i,o){let l=0;for(;l<o.length;){const h=o[l];if("number"==typeof h){if(0!==h)break;l++;const f=o[l++],m=o[l++],D=o[l++];t.setAttribute(i,m,D,f)}else{const f=h,m=o[++l];Zh(f)?t.setProperty(i,f,m):t.setAttribute(i,f,m),l++}}}(t,i,l),null!==h&&function vx(t,i,o){""===o?t.removeAttribute(i,"class"):t.setAttribute(i,"class",o)}(t,i,h),null!==f&&function yx(t,i,o){t.setAttribute(i,"style",o)}(t,i,f)}function Am(t,i,o,l,h,f,m,D,P,Q,de){const ye=Dt+l,Pe=ye+h,Me=function Ex(t,i){const o=[];for(let l=0;l<i;l++)o.push(l<t?null:Jt);return o}(ye,Pe),we="function"==typeof Q?Q():Q;return Me[it]={type:t,blueprint:Me,template:o,queries:null,viewQuery:D,declTNode:i,data:Me.slice().fill(null,ye),bindingStartIndex:ye,expandoStartIndex:Pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:P,consts:we,incompleteFirstPass:!1,ssrId:de}}function of(t,i,o,l,h,f,m,D,P,Q,de){const ye=i.blueprint.slice();return ye[ht]=h,ye[Nt]=1228|l,(null!==Q||t&&2048&t[Nt])&&(ye[Nt]|=2048),Gh(ye),ye[pn]=ye[Ps]=t,ye[Lt]=o,ye[As]=m||t&&t[As],ye[Mt]=D||t&&t[Mt],ye[wn]=P||t&&t[wn]||null,ye[ti]=f,ye[Fr]=function Pu(){return $g++}(),ye[kn]=de,ye[ya]=Q,ye[Fn]=2==i.type?t[Fn]:ye,ye}function Pm(t){let i=16;return t.signals?i=4096:t.onPush&&(i=64),i}function Qc(t,i,o,l){if(0===o)return-1;const h=i.length;for(let f=0;f<o;f++)i.push(l),t.blueprint.push(l),t.data.push(null);return h}function Om(t,i){return t[Qo]?t[Nr][nn]=i:t[Qo]=i,t[Nr]=i,i}function dy(t=1){cy(Rt(),Ye(),ci()+t,!1)}function cy(t,i,o,l){if(!l)if(3&~i[Nt]){const f=t.preOrderHooks;null!==f&&sr(i,f,0,o)}else{const f=t.preOrderCheckHooks;null!==f&&La(i,f,o)}Ls(o)}var rf=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(rf||{});function bm(t,i,o,l){const h=z(null);try{const[f,m,D]=t.inputs[o];let P=null;!!(m&rf.SignalBased)&&(P=i[f][ne]),null!==P&&void 0!==P.transformFn?l=P.transformFn(l):null!==D&&(l=D.call(i,l)),null!==t.setInput?t.setInput(i,P,l,o,f):Ta(i,P,f,l)}finally{z(h)}}function hy(t,i,o,l,h){const f=ci(),m=2&l;try{Ls(-1),m&&i.length>Dt&&cy(t,i,Dt,!1),Sn(m?2:0,h),o(l,h)}finally{Ls(f),Sn(m?3:1,h)}}function lf(t,i,o){(function Px(t,i,o){const l=o.directiveStart,h=o.directiveEnd;un(o)&&function Dx(t,i,o){const l=It(i,t),h=function ay(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Am(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):i}(o),f=t[As].rendererFactory,m=Om(t,of(t,h,null,Pm(o),l,i,null,f.createRenderer(l,o),null,null,null));t[i.index]=m}(i,o,t.data[l+o.componentOffset]),t.firstCreatePass||ar(o,i);const f=o.initialInputs;for(let m=l;m<h;m++){const D=t.data[m],P=Vl(i,t,m,o);Wi(P,i),null!==f&&Rx(0,m-l,P,D,0,f),yi(D)&&(Pi(o.index,i)[Lt]=Vl(i,t,m,o))}})(t,i,o),!(64&~o.flags)&&function Ox(t,i,o){const l=o.directiveStart,h=o.directiveEnd,f=o.index,m=function Yh(){return Vt.lFrame.currentDirectiveIndex}();try{Ls(f);for(let D=l;D<h;D++){const P=t.data[D],Q=i[D];oc(D),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&bx(P,Q)}}finally{Ls(-1),oc(m)}}(t,i,o)}function Rm(t,i,o=It){const l=i.localNames;if(null!==l){let h=i.index+1;for(let f=0;f<l.length;f+=2){const m=l[f+1],D=-1===m?o(i,t):t[m];t[h++]=D}}}let Vm,uy=()=>null;function hs(t,i,o,l,h,f,m,D){if(D||!wm(i,t,o,l,h)){if(3&i.type){const P=It(i,o);l=function Mx(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(l),h=null!=m?m(h,i.value||"",l):h,f.setProperty(P,l,h)}}else un(i)&&function Ax(t,i){const o=Pi(i,t);16&o[Nt]||(o[Nt]|=64)}(o,i.index)}function bx(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function Nm(t,i){const o=t.directiveRegistry;let l=null;if(o)for(let h=0;h<o.length;h++){const f=o[h];ty(i,f.selectors,!1)&&(l??=[],yi(f)?l.unshift(f):l.push(f))}return l}function xo(t,i,o,l,h,f){const m=It(t,i);!function Fm(t,i,o,l,h,f,m){if(null==f)t.removeAttribute(i,h,o);else{const D=null==m?Ft(f):m(f,l||"",h);t.setAttribute(i,h,D,o)}}(i[Mt],m,f,t.value,o,l,h)}function Rx(t,i,o,l,h,f){const m=f[i];if(null!==m)for(let D=0;D<m.length;D+=2)bm(l,o,m[D],m[D+1])}function wm(t,i,o,l,h){const f=t.inputs?.[l],m=t.hostDirectiveInputs?.[l];let D=!1;if(m)for(let P=0;P<m.length;P+=2){const Q=m[P];bm(i.data[Q],o[Q],m[P+1],h),D=!0}if(f)for(const P of f)bm(i.data[P],o[P],l,h),D=!0;return D}function Nx(t,i){const o=Pi(i,t),l=o[it];!function Fx(t,i){for(let o=i.length;o<t.blueprint.length;o++)i.push(t.blueprint[o])}(l,o);const h=o[ht];null!==h&&null===o[kn]&&(o[kn]=yC(h,o[wn])),Sn(18),af(l,o,o[Lt]),Sn(19,o[Lt])}function af(t,i,o){Na(i);try{const l=t.viewQuery;null!==l&&mm(1,l,o);const h=t.template;null!==h&&hy(t,i,h,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),i[ys]?.finishViewCreation(t),t.staticContentQueries&&AC(t,i),t.staticViewQueries&&mm(2,t.viewQuery,o);const f=t.components;null!==f&&function Lx(t,i){for(let o=0;o<i.length;o++)Nx(t,i[o])}(i,f)}catch(l){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),l}finally{i[Nt]&=-5,Fa()}}function cd(t,i,o,l){const h=z(null);try{const f=i.tView,P=of(t,f,o,4096&t[Nt]?4096:16,null,i,null,null,l?.injector??null,l?.embeddedViewInjector??null,l?.dehydratedView??null);P[Zo]=t[i.index];const de=t[ys];return null!==de&&(P[ys]=de.createEmbeddedView(f)),af(f,P,o),P}finally{z(h)}}function Yl(t,i){return!i||null===i.firstChild||Gl(t)}function Bm(t,i){return Vm(t,i)}var df=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(df||{});function Zr(t){return!(32&~t.flags)}function hd(t,i,o,l,h){if(null!=l){let f,m=!1;sn(l)?f=l:ot(l)&&(m=!0,l=l[ht]);const D=hn(l);0===t&&null!==o?null==h?sy(i,o,D):Kl(i,o,D,h||null,!0):1===t&&null!==o?Kl(i,o,D,h||null,!0):2===t?function Jc(t,i,o){t.removeChild(null,i,o)}(i,D,m):3===t&&i.destroyNode(D),null!=f&&function jx(t,i,o,l,h){const f=o[ji];f!==hn(o)&&hd(i,t,l,f,h);for(let D=an;D<o.length;D++){const P=o[D];hf(P[it],P,t,i,l,f)}}(i,t,f,o,h)}}function py(t,i){i[As].changeDetectionScheduler?.notify(9),hf(t,i,i[Mt],2,null,null)}function Hm(t,i){const o=t[ni],l=o.indexOf(i);o.splice(l,1)}function Zc(t,i){if(Kn(i))return;const o=i[Mt];o.destroyNode&&hf(t,i,o,3,null,null),function Bx(t){let i=t[Qo];if(!i)return Um(t[it],t);for(;i;){let o=null;if(ot(i))o=i[Qo];else{const l=i[an];l&&(o=l)}if(!o){for(;i&&!i[nn]&&i!==t;)ot(i)&&Um(i[it],i),i=i[pn];null===i&&(i=t),ot(i)&&Um(i[it],i),o=i&&i[nn]}i=o}}(i)}function Um(t,i){if(Kn(i))return;const o=z(null);try{i[Nt]&=-129,i[Nt]|=256,i[Qi]&&I(i[Qi]),function Ux(t,i){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let l=0;l<o.length;l+=2){const h=i[o[l]];if(!(h instanceof or)){const f=o[l+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const D=h[f[m]],P=f[m+1];Sn(4,D,P);try{P.call(D)}finally{Sn(5,D,P)}}else{Sn(4,h,f);try{f.call(h)}finally{Sn(5,h,f)}}}}}(t,i),function Hx(t,i){const o=t.cleanup,l=i[go];if(null!==o)for(let m=0;m<o.length-1;m+=2)if("string"==typeof o[m]){const D=o[m+3];D>=0?l[D]():l[-D].unsubscribe(),m+=2}else o[m].call(l[o[m+1]]);null!==l&&(i[go]=null);const h=i[Ys];if(null!==h){i[Ys]=null;for(let m=0;m<h.length;m++)(0,h[m])()}const f=i[qo];if(null!==f){i[qo]=null;for(const m of f)m.destroy()}}(t,i),1===i[it].type&&i[Mt].destroy();const l=i[Zo];if(null!==l&&sn(i[pn])){l!==i[pn]&&Hm(l,i);const h=i[ys];null!==h&&h.detachView(t)}Ac(i)}finally{z(o)}}function Gm(t,i,o){return function Cy(t,i,o){let l=i;for(;null!==l&&168&l.type;)l=(i=l).parent;if(null===l)return o[ht];if(un(l)){const{encapsulation:h}=t.data[l.directiveStart+l.componentOffset];if(h===pr.None||h===pr.Emulated)return null}return It(l,o)}(t,i.parent,o)}function yy(t,i,o){return Ey(t,i,o)}let jm,Ey=function vy(t,i,o){return 40&t.type?It(t,o):null};function cf(t,i,o,l){const h=Gm(t,l,i),f=i[Mt],D=yy(l.parent||i[ti],l,i);if(null!=h)if(Array.isArray(o))for(let P=0;P<o.length;P++)oy(f,h,o[P],D,!1);else oy(f,h,o,D,!1);void 0!==jm&&jm(f,l,i,o,h)}function Xl(t,i){if(null!==i){const o=i.type;if(3&o)return It(i,t);if(4&o)return Wm(-1,t[i.index]);if(8&o){const l=i.child;if(null!==l)return Xl(t,l);{const h=t[i.index];return sn(h)?Wm(-1,h):hn(h)}}if(128&o)return Xl(t,i.next);if(32&o)return Bm(i,t)()||hn(t[i.index]);{const l=Sy(t,i);return null!==l?Array.isArray(l)?l[0]:Xl(vs(t[Fn]),l):Xl(t,i.next)}}return null}function Sy(t,i){return null!==i?t[Fn][ti].projection[i.projection]:null}function Wm(t,i){const o=an+t+1;if(o<i.length){const l=i[o],h=l[it].firstChild;if(null!==h)return Xl(l,h)}return i[ji]}function $m(t,i,o,l,h,f,m){for(;null!=o;){if(128===o.type){o=o.next;continue}const D=l[o.index],P=o.type;if(m&&0===i&&(D&&Wi(hn(D),l),o.flags|=2),!Zr(o))if(8&P)$m(t,i,o.child,l,h,f,!1),hd(i,t,h,D,f);else if(32&P){const Q=Bm(o,l);let de;for(;de=Q();)hd(i,t,h,de,f);hd(i,t,h,D,f)}else 16&P?Ty(t,i,l,o,h,f):hd(i,t,h,D,f);o=m?o.projectionNext:o.next}}function hf(t,i,o,l,h,f){$m(o,l,t.firstChild,i,h,f,!1)}function Ty(t,i,o,l,h,f){const m=o[Fn],P=m[ti].projection[l.projection];if(Array.isArray(P))for(let Q=0;Q<P.length;Q++)hd(i,t,h,P[Q],f);else{let Q=P;const de=m[pn];Gl(l)&&(Q.flags|=128),$m(t,i,Q,de,h,f,!0)}}function ud(t,i,o,l,h=!1){for(;null!==o;){if(128===o.type){o=h?o.projectionNext:o.next;continue}const f=i[o.index];null!==f&&l.push(hn(f)),sn(f)&&zm(f,l);const m=o.type;if(8&m)ud(t,i,o.child,l);else if(32&m){const D=Bm(o,i);let P;for(;P=D();)l.push(P)}else if(16&m){const D=Sy(i,o);if(Array.isArray(D))l.push(...D);else{const P=vs(i[Fn]);ud(P[it],P,D,l,!0)}}o=h?o.projectionNext:o.next}return l}function zm(t,i){for(let o=an;o<t.length;o++){const l=t[o],h=l[it].firstChild;null!==h&&ud(l[it],l,h,i)}t[ji]!==t[ht]&&i.push(t[ji])}function Iy(t){if(null!==t[25]){for(const i of t[25])i.impl.addSequence(i);t[25].length=0}}let xy=[];const Yx={...k,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{po(t.lView)},consumerOnSignalRead(){this.lView[Qi]=this}},Jx={...k,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let i=vs(t.lView);for(;i&&!My(i[it]);)i=vs(i);i&&Gr(i)},consumerOnSignalRead(){this.lView[Qi]=this}};function My(t){return 2!==t.type}function Ay(t){if(null===t[qo])return;let i=!0;for(;i;){let o=!1;for(const l of t[qo])l.dirty&&(o=!0,null===l.zone||Zone.current===l.zone?l.run():l.zone.run(()=>l.run()));i=o&&!!(8192&t[Nt])}}function uf(t,i=!0,o=0){const h=t[As].rendererFactory;h.begin?.();try{!function Zx(t,i){const o=$h();try{ba(!0),Km(t,i);let l=0;for(;Vn(t);){if(100===l)throw new Qe(103,!1);l++,Km(t,1)}}finally{ba(o)}}(t,o)}catch(m){throw i&&function Lm(t,i){const o=t[wn],l=o?o.get(Bs,null):null;l&&l.handleError(i)}(t,m),m}finally{h.end?.()}}function Oy(t,i,o,l){if(Kn(i))return;const h=i[Nt];Na(i);let D=!0,P=null,Q=null;My(t)?(Q=function $x(t){return t[Qi]??function zx(t){const i=xy.pop()??Object.create(Yx);return i.lView=t,i}(t)}(i),P=p(Q)):null===function Z(){return G}()?(D=!1,Q=function Xx(t){const i=t[Qi]??Object.create(Jx);return i.lView=t,i}(i),P=p(Q)):i[Qi]&&(I(i[Qi]),i[Qi]=null);try{Gh(i),function Ol(t){return Vt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&hy(t,i,o,2,l);const de=!(3&~h);if(de){const Me=t.preOrderCheckHooks;null!==Me&&La(i,Me,null)}else{const Me=t.preOrderHooks;null!==Me&&sr(i,Me,0,null),fc(i,0)}if(function kx(t){for(let i=Lu(t);null!==i;i=wu(i)){if(!(2&i[Nt]))continue;const o=i[ni];for(let l=0;l<o.length;l++)Gr(o[l])}}(i),Ay(i),by(i,0),null!==t.contentQueries&&AC(t,i),de){const Me=t.contentCheckHooks;null!==Me&&La(i,Me)}else{const Me=t.contentHooks;null!==Me&&sr(i,Me,1),fc(i,1)}!function _x(t,i){const o=t.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const h=o[l];if(h<0)Ls(~h);else{const f=h,m=o[++l],D=o[++l];fg(m,f);const P=i[f];Sn(24,P),D(2,P),Sn(25,P)}}}finally{Ls(-1)}}(t,i);const ye=t.components;null!==ye&&Ny(i,ye,0);const Pe=t.viewQuery;if(null!==Pe&&mm(2,Pe,l),de){const Me=t.viewCheckHooks;null!==Me&&La(i,Me)}else{const Me=t.viewHooks;null!==Me&&sr(i,Me,2),fc(i,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[22]){for(const Me of i[22])Me();i[22]=null}Iy(i),i[Nt]&=-73}catch(de){throw po(i),de}finally{null!==Q&&(j(Q,P),D&&function Kx(t){t.lView[Qi]!==t&&(t.lView=null,xy.push(t))}(Q)),Fa()}}function by(t,i){for(let o=Lu(t);null!==o;o=wu(o))for(let l=an;l<o.length;l++)Ry(o[l],i)}function qx(t,i,o){Sn(18);const l=Pi(i,t);Ry(l,o),Sn(19,l[Lt])}function Ry(t,i){tc(t)&&Km(t,i)}function Km(t,i){const l=t[it],h=t[Nt],f=t[Qi];let m=!!(0===i&&16&h);if(m||=!!(64&h&&0===i),m||=!!(1024&h),m||=!(!f?.dirty||!T(f)),m||=!1,f&&(f.dirty=!1),t[Nt]&=-9217,m)Oy(l,t,l.template,t[Lt]);else if(8192&h){Ay(t),by(t,1);const D=l.components;null!==D&&Ny(t,D,1),Iy(t)}}function Ny(t,i,o){for(let l=0;l<i.length;l++)qx(t,i[l],o)}function kc(t,i){const o=$h()?64:1088;for(t[As].changeDetectionScheduler?.notify(i);t;){t[Nt]|=o;const l=vs(t);if(En(t)&&!l)return t;t=l}return null}function Fy(t,i,o,l){return[t,!0,0,i,null,l,null,o,null,null]}function Ly(t,i){const o=an+i;if(o<t.length)return t[o]}function fd(t,i,o,l=!0){const h=i[it];if(function eM(t,i,o,l){const h=an+l,f=o.length;l>0&&(o[h-1][nn]=i),l<f-an?(i[nn]=o[h],hl(o,an+l,i)):(o.push(i),i[nn]=null),i[pn]=o;const m=i[Zo];null!==m&&o!==m&&wy(m,i);const D=i[ys];null!==D&&D.insertView(t),tr(i),i[Nt]|=128}(h,i,t,o),l){const m=Wm(o,t),D=i[Mt],P=D.parentNode(t[ji]);null!==P&&function Vx(t,i,o,l,h,f){l[ht]=h,l[ti]=i,hf(t,l,o,1,h,f)}(h,t[ti],D,i,P,m)}const f=i[kn];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function Ym(t,i){const o=qc(t,i);return void 0!==o&&Zc(o[it],o),o}function qc(t,i){if(t.length<=an)return;const o=an+i,l=t[o];if(l){const h=l[Zo];null!==h&&h!==t&&Hm(h,l),i>0&&(t[o-1][nn]=l[nn]);const f=$s(t,an+i);!function my(t,i){py(t,i),i[ht]=null,i[ti]=null}(l[it],l);const m=f[ys];null!==m&&m.detachView(f[it]),l[pn]=null,l[nn]=null,l[Nt]&=-129}return l}function wy(t,i){const o=t[ni],l=i[pn];(ot(l)||i[Fn]!==l[pn][Fn])&&(t[Nt]|=2),null===o?t[ni]=[i]:o.push(i)}let _c=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const i=this._lView,o=i[it];return ud(o,i,o.firstChild,[])}constructor(i,o,l=!0){this._lView=i,this._cdRefInjectingView=o,this.notifyErrorHandler=l}get context(){return this._lView[Lt]}set context(i){this._lView[Lt]=i}get destroyed(){return Kn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[pn];if(sn(i)){const o=i[8],l=o?o.indexOf(this):-1;l>-1&&(qc(i,l),$s(o,l))}this._attachedToViewContainer=!1}Zc(this._lView[it],this._lView)}onDestroy(i){jr(this._lView,i)}markForCheck(){kc(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Nt]&=-129}reattach(){tr(this._lView),this._lView[Nt]|=128}detectChanges(){this._lView[Nt]|=1024,uf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Qe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const i=En(this._lView),o=this._lView[Zo];null!==o&&!i&&Hm(o,this._lView),py(this._lView[it],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Qe(902,!1);this._appRef=i;const o=En(this._lView),l=this._lView[Zo];null!==l&&!o&&wy(l,this._lView),tr(this._lView)}},eh=(()=>class t{static __NG_ELEMENT_ID__=iM})();const tM=eh,nM=class extends tM{_declarationLView;_declarationTContainer;elementRef;constructor(i,o,l){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,o){return this.createEmbeddedViewImpl(i,o)}createEmbeddedViewImpl(i,o,l){const h=cd(this._declarationLView,this._declarationTContainer,i,{embeddedViewInjector:o,dehydratedView:l});return new _c(h)}};function iM(){return ff(kt(),Ye())}function ff(t,i){return 4&t.type?new nM(i,t,Jr(t,i)):null}function gd(t,i,o,l,h){let f=t.data[i];if(null===f)f=function Zm(t,i,o,l,h){const f=cg(),m=zr(),P=t.data[i]=function fM(t,i,o,l,h,f){let m=i?i.injectorIndex:-1,D=0;return ir()&&(D|=128),{type:o,index:l,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:D,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,i,l,h);return function uM(t,i,o,l){null===t.firstChild&&(t.firstChild=i),null!==o&&(l?null==o.child&&null!==i.parent&&(o.child=i):null===o.next&&(o.next=i,i.prev=o))}(t,P,f,m),P}(t,i,o,l,h),function zh(){return Vt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=o,f.value=l,f.attrs=h;const m=function Pl(){const t=Vt.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return ss(f,!0),f}let iv=()=>null;function pd(t,i){return iv(t,i)}let _M=class{},sv=class{};class eA{resolveComponentFactory(i){throw Error(`No component factory found for ${yn(i)}.`)}}let ah=class{static NULL=new eA};class sp{}let tA=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function nA(){const t=Ye(),o=Pi(kt().index,t);return(ot(o)?o:t)[Mt]}()})(),iA=(()=>{class t{static \u0275prov=rn({token:t,providedIn:"root",factory:()=>null})}return t})();function Ql(t){return!!pi(t)}const rp={};class Cd{injector;parentInjector;constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,l){l=xs(l);const h=this.injector.get(i,rp,l);return h!==rp||o===rp?h:this.parentInjector.get(i,o,l)}}function lp(t,i,o){let l=o?t.styles:null,h=o?t.classes:null,f=0;if(null!==i)for(let m=0;m<i.length;m++){const D=i[m];"number"==typeof D?f=D:1==f?h=ri(h,D):2==f&&(l=ri(l,D+": "+i[++m]+";"))}o?t.styles=l:t.stylesWithoutHost=l,o?t.classes=h:t.classesWithoutHost=h}function yd(t,i=Yt.Default){const o=Ye();return null===o?zn(t,i):iu(kt(),o,ct(t),i)}function rv(){throw new Error("invalid")}function ap(t,i,o,l,h){const f=null===l?null:{"":-1},m=h(t,o);if(null!==m){let D,P=null,Q=null;const de=function aA(t){let i=null,o=!1;for(let m=0;m<t.length;m++){const D=t[m];if(0===m&&yi(D)&&(i=D),null!==D.findHostDirectiveDefs){o=!0;break}}if(!o)return null;let l=null,h=null,f=null;for(const m of t)null!==m.findHostDirectiveDefs&&(l??=[],h??=new Map,f??=new Map,dA(m,l,f,h)),m===i&&(l??=[],l.push(m));return null!==l?(l.push(...null===i?t:t.slice(1)),[l,h,f]):null}(m);null===de?D=m:[D,P,Q]=de,function hA(t,i,o,l,h,f,m){const D=l.length;let P=!1;for(let Pe=0;Pe<D;Pe++){const Me=l[Pe];!P&&yi(Me)&&(P=!0,cA(t,o,Pe)),Cc(ar(o,i),t,Me.type)}!function CA(t,i,o){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+o,t.providerIndexes=i}(o,t.data.length,D);for(let Pe=0;Pe<D;Pe++){const Me=l[Pe];Me.providersResolver&&Me.providersResolver(Me)}let Q=!1,de=!1,ye=Qc(t,i,D,null);D>0&&(o.directiveToIndex=new Map);for(let Pe=0;Pe<D;Pe++){const Me=l[Pe];if(o.mergedAttrs=lr(o.mergedAttrs,Me.hostAttrs),fA(t,o,i,ye,Me),pA(ye,Me,h),null!==m&&m.has(Me)){const[Ze,lt]=m.get(Me);o.directiveToIndex.set(Me.type,[ye,Ze+o.directiveStart,lt+o.directiveStart])}else(null===f||!f.has(Me))&&o.directiveToIndex.set(Me.type,ye);null!==Me.contentQueries&&(o.flags|=4),(null!==Me.hostBindings||null!==Me.hostAttrs||0!==Me.hostVars)&&(o.flags|=64);const we=Me.type.prototype;!Q&&(we.ngOnChanges||we.ngOnInit||we.ngDoCheck)&&((t.preOrderHooks??=[]).push(o.index),Q=!0),!de&&(we.ngOnChanges||we.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(o.index),de=!0),ye++}!function uA(t,i,o){for(let l=i.directiveStart;l<i.directiveEnd;l++){const h=t.data[l];if(null!==o&&o.has(h)){const f=o.get(h);av(0,i,f,l),av(1,i,f,l),cv(i,l,!0)}else lv(0,i,h,l),lv(1,i,h,l),cv(i,l,!1)}}(t,o,f)}(t,i,o,D,f,P,Q)}null!==f&&null!==l&&function lA(t,i,o){const l=t.localNames=[];for(let h=0;h<i.length;h+=2){const f=o[i[h+1]];if(null==f)throw new Qe(-301,!1);l.push(i[h],f)}}(o,l,f)}function dA(t,i,o,l){const h=i.length;t.findHostDirectiveDefs(t,i,l),o.set(t,[h,i.length-1])}function cA(t,i,o){i.componentOffset=o,(t.components??=[]).push(i.index)}function lv(t,i,o,l){const h=0===t?o.inputs:o.outputs;for(const f in h)if(h.hasOwnProperty(f)){let m;m=0===t?i.inputs??={}:i.outputs??={},m[f]??=[],m[f].push(l),dv(i,f)}}function av(t,i,o,l){const h=0===t?o.inputs:o.outputs;for(const f in h)if(h.hasOwnProperty(f)){const m=h[f];let D;D=0===t?i.hostDirectiveInputs??={}:i.hostDirectiveOutputs??={},D[m]??=[],D[m].push(l,f),dv(i,m)}}function dv(t,i){"class"===i?t.flags|=8:"style"===i&&(t.flags|=16)}function cv(t,i,o){const{attrs:l,inputs:h,hostDirectiveInputs:f}=t;if(null===l||!o&&null===h||o&&null===f||Im(t))return t.initialInputs??=[],void t.initialInputs.push(null);let m=null,D=0;for(;D<l.length;){const P=l[D];if(0!==P)if(5!==P){if("number"==typeof P)break;if(!o&&h.hasOwnProperty(P)){const Q=h[P];for(const de of Q)if(de===i){m??=[],m.push(P,l[D+1]);break}}else if(o&&f.hasOwnProperty(P)){const Q=f[P];for(let de=0;de<Q.length;de+=2)if(Q[de]===i){m??=[],m.push(Q[de+1],l[D+1]);break}}D+=2}else D+=2;else D+=4}t.initialInputs??=[],t.initialInputs.push(m)}function fA(t,i,o,l,h){t.data[l]=h;const f=h.factory||(h.factory=Ms(h.type)),m=new or(f,yi(h),yd);t.blueprint[l]=m,o[l]=m,function gA(t,i,o,l,h){const f=h.hostBindings;if(f){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const D=~i.index;(function mA(t){let i=t.length;for(;i>0;){const o=t[--i];if("number"==typeof o&&o<0)return o}return 0})(m)!=D&&m.push(D),m.push(o,l,f)}}(t,i,l,Qc(t,o,h.hostVars,Jt),h)}function pA(t,i,o){if(o){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)o[i.exportAs[l]]=t;yi(i)&&(o[""]=t)}}function hv(t,i,o,l,h,f,m,D){const P=i.consts,de=gd(i,t,2,l,ns(P,m));return f&&ap(i,o,de,ns(P,D),h),de.mergedAttrs=lr(de.mergedAttrs,de.attrs),null!==de.attrs&&lp(de,de.attrs,!1),null!==de.mergedAttrs&&lp(de,de.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,de),de}function uv(t,i){uc(t,i),jt(i)&&t.queries.elementEnd(i)}class fv extends ah{ngModule;constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=on(i);return new hh(o,this.ngModule)}}class hh extends sv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function yA(t){return Object.keys(t).map(i=>{const[o,l,h]=t[i],f={propName:o,templateName:i,isSignal:!!(l&rf.SignalBased)};return h&&(f.transform=h),f})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function vA(t){return Object.keys(t).map(i=>({propName:t[i],templateName:i}))}(this.componentDef.outputs),this.cachedOutputs}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function px(t){return t.map(mx).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors??[],this.isBoundToModule=!!o}create(i,o,l,h){Sn(22);const f=z(null);try{const m=this.componentDef,D=l?["ng-version","19.2.14"]:function Cx(t){const i=[],o=[];let l=1,h=2;for(;l<t.length;){let f=t[l];if("string"==typeof f)2===h?""!==f&&i.push(f,t[++l]):8===h&&o.push(f);else{if(!eo(h))break;h=f}l++}return o.length&&i.push(1,...o),i}(this.componentDef.selectors[0]),P=Am(0,null,null,1,0,null,null,null,null,[D],null),Q=function EA(t,i,o){let l=i instanceof es?i:i?.injector;return l&&null!==t.getStandaloneInjector&&(l=t.getStandaloneInjector(l)||l),l?new Cd(o,l):o}(m,h||this.ngModule,i),de=function DA(t){const i=t.get(sp,null);if(null===i)throw new Qe(407,!1);return{rendererFactory:i,sanitizer:t.get(iA,null),changeDetectionScheduler:t.get(ks,null)}}(Q),ye=de.rendererFactory.createRenderer(null,m),Pe=l?function Sx(t,i,o,l){const f=l.get(Yn,!1)||o===pr.ShadowDom,m=t.selectRootElement(i,f);return function Tx(t){uy(t)}(m),m}(ye,l,m.encapsulation,Q):function SA(t,i){const o=(t.selectors[0][0]||"div").toLowerCase();return sf(i,o,"svg"===o?qd:"math"===o?"math":null)}(m,ye),Me=of(null,P,null,512|Pm(m),null,null,de,ye,Q,null,yC(Pe,Q,!0));Me[Dt]=Pe,Na(Me);let we=null;try{const Ze=hv(Dt,P,Me,"#host",()=>[this.componentDef],!0,0);Pe&&(ly(ye,Pe,Ze),Wi(Pe,Me)),lf(P,Me,Ze),pm(P,Ze,Me),uv(P,Ze),void 0!==o&&function IA(t,i,o){const l=t.projection=[];for(let h=0;h<i.length;h++){const f=o[h];l.push(null!=f&&f.length?Array.from(f):null)}}(Ze,this.ngContentSelectors,o),we=Pi(Ze.index,Me),Me[Lt]=we[Lt],af(P,Me,null)}catch(Ze){throw null!==we&&Ac(we),Ac(Me),Ze}finally{Sn(23),Fa()}return new TA(this.componentType,Me)}finally{z(f)}}}class TA extends _M{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(i,o){super(),this._rootLView=o,this._tNode=Rs(o[it],Dt),this.location=Jr(this._tNode,o),this.instance=Pi(this._tNode.index,o)[Lt],this.hostView=this.changeDetectorRef=new _c(o,void 0,!1),this.componentType=i}setInput(i,o){const l=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),o))return;const h=this._rootLView;wm(l,h[it],h,i,o),this.previousInputValues.set(i,o),kc(Pi(l.index,h),1)}get injector(){return new jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}let Df=(()=>class t{static __NG_ELEMENT_ID__=xA})();function xA(){return pv(kt(),Ye())}const MA=Df,gv=class extends MA{_lContainer;_hostTNode;_hostLView;constructor(i,o,l){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=l}get element(){return Jr(this._hostTNode,this._hostLView)}get injector(){return new jn(this._hostTNode,this._hostLView)}get parentInjector(){const i=wl(this._hostTNode,this._hostLView);if(Ua(i)){const o=Fl(i,this._hostLView),l=Nl(i);return new jn(o[it].data[l+8],o)}return new jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=mv(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-an}createEmbeddedView(i,o,l){let h,f;"number"==typeof l?h=l:null!=l&&(h=l.index,f=l.injector);const m=pd(this._lContainer,i.ssrId),D=i.createEmbeddedViewImpl(o||{},f,m);return this.insertImpl(D,h,Yl(this._hostTNode,m)),D}createComponent(i,o,l,h,f){const m=i&&!function Rr(t){return"function"==typeof t}(i);let D;if(m)D=o;else{const we=o||{};D=we.index,l=we.injector,h=we.projectableNodes,f=we.environmentInjector||we.ngModuleRef}const P=m?i:new hh(on(i)),Q=l||this.parentInjector;if(!f&&null==P.ngModule){const Ze=(m?Q:this.parentInjector).get(es,null);Ze&&(f=Ze)}const de=on(P.componentType??{}),ye=pd(this._lContainer,de?.id??null),Me=P.create(Q,h,ye?.firstChild??null,f);return this.insertImpl(Me.hostView,D,Yl(this._hostTNode,ye)),Me}insert(i,o){return this.insertImpl(i,o,!0)}insertImpl(i,o,l){const h=i._lView;if(function ag(t){return sn(t[pn])}(h)){const D=this.indexOf(i);if(-1!==D)this.detach(D);else{const P=h[pn],Q=new gv(P,P[ti],P[pn]);Q.detach(Q.indexOf(i))}}const f=this._adjustIndex(o),m=this._lContainer;return fd(m,h,f,l),i.attachToViewContainerRef(),hl(dp(m),f,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=mv(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),l=qc(this._lContainer,o);l&&($s(dp(this._lContainer),o),Zc(l[it],l))}detach(i){const o=this._adjustIndex(i,-1),l=qc(this._lContainer,o);return l&&null!=$s(dp(this._lContainer),o)?new _c(l):null}_adjustIndex(i,o=0){return i??this.length+o}};function mv(t){return t[8]}function dp(t){return t[8]||(t[8]=[])}function pv(t,i){let o;const l=i[t.index];return sn(l)?o=l:(o=Fy(l,i,null,t),i[t.index]=o,Om(i,o)),Cv(o,i,t,l),new gv(o,t,i)}let Cv=function vv(t,i,o,l){if(t[ji])return;let h;h=8&o.type?hn(l):function AA(t,i){const o=t[Mt],l=o.createComment(""),h=It(i,t),f=o.parentNode(h);return Kl(o,f,l,o.nextSibling(h),!1),l}(i,o),t[ji]=h},cp=()=>!1;class hp{queryList;matches=null;constructor(i){this.queryList=i}clone(){return new hp(this.queryList)}setDirty(){this.queryList.setDirty()}}class up{queries;constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const l=null!==i.contentQueries?i.contentQueries[0]:o.length,h=[];for(let f=0;f<l;f++){const m=o.getByIndex(f);h.push(this.queries[m.indexInDeclarationView].clone())}return new up(h)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}finishViewCreation(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==Cp(i,o).matches&&this.queries[o].setDirty()}}class Ev{flags;read;predicate;constructor(i,o,l=null){this.flags=o,this.read=l,this.predicate="string"==typeof i?function wA(t){return t.split(",").map(i=>i.trim())}(i):i}}class fp{queries;constructor(i=[]){this.queries=i}elementStart(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let l=0;l<this.length;l++){const h=null!==o?o.length:0,f=this.getByIndex(l).embeddedTView(i,h);f&&(f.indexInDeclarationView=l,null!==o?o.push(f):o=[f])}return null!==o?new fp(o):null}template(i,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class gp{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(i,o=-1){this.metadata=i,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new gp(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1&~this.metadata.flags){const o=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const f=l[h];this.matchTNodeWithReadOption(i,o,RA(o,f)),this.matchTNodeWithReadOption(i,o,Wa(o,i,f,!1,!1))}else l===eh?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Wa(o,i,l,!1,!1))}matchTNodeWithReadOption(i,o,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Ul||h===Df||h===eh&&4&o.type)this.addMatch(o.index,-2);else{const f=Wa(o,i,h,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,l)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function RA(t,i){const o=t.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===i)return o[l+1];return null}function FA(t,i,o,l){return-1===o?function NA(t,i){return 11&t.type?Jr(t,i):4&t.type?ff(t,i):null}(i,t):-2===o?function LA(t,i,o){return o===Ul?Jr(i,t):o===eh?ff(i,t):o===Df?pv(i,t):void 0}(t,i,l):Vl(t,t[it],o,i)}function Dv(t,i,o,l){const h=i[ys].queries[l];if(null===h.matches){const f=t.data,m=o.matches,D=[];for(let P=0;null!==m&&P<m.length;P+=2){const Q=m[P];D.push(Q<0?null:FA(i,f[Q],m[P+1],o.metadata.read))}h.matches=D}return h.matches}function mp(t,i,o,l){const h=t.queries.getByIndex(o),f=h.matches;if(null!==f){const m=Dv(t,i,h,o);for(let D=0;D<f.length;D+=2){const P=f[D];if(P>0)l.push(m[D/2]);else{const Q=f[D+1],de=i[-P];for(let ye=an;ye<de.length;ye++){const Pe=de[ye];Pe[Zo]===Pe[pn]&&mp(Pe[it],Pe,Q,l)}if(null!==de[ni]){const ye=de[ni];for(let Pe=0;Pe<ye.length;Pe++){const Me=ye[Pe];mp(Me[it],Me,Q,l)}}}}}return l}function pp(t,i){return t[ys].queries[i].queryList}function Sv(t,i,o){const l=new Iu(!(4&~o));return function dg(t,i,o,l){const h=Wr(i);h.push(o),t.firstCreatePass&&nr(t).push(l,h.length-1)}(t,i,l,l.destroy),(i[ys]??=new up).queries.push(new hp(l))-1}function Iv(t,i,o,l){const h=Rt();if(h.firstCreatePass){const f=kt();xv(h,new Ev(i,o,l),f.index),function VA(t,i){const o=t.contentQueries||(t.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,i)}(h,t),!(2&~o)&&(h.staticContentQueries=!0)}return Sv(h,Ye(),o)}function xv(t,i,o){null===t.queries&&(t.queries=new fp),t.queries.track(new gp(i,o))}function Cp(t,i){return t.queries.getByIndex(i)}function Mv(t,i){const o=t[it],l=Cp(o,i);return l.crossesNgTemplate?mp(o,t,i,[]):Dv(o,t,l,i)}function yp(t,i,o){let l;const h=B(()=>{l._dirtyCounter();const f=function BA(t,i){const o=t._lView,l=t._queryIndex;if(void 0===o||void 0===l||4&o[Nt])return i?void 0:ln;const h=pp(o,l),f=Mv(o,l);return h.reset(f,Su),i?h.first:h._changesDetected||void 0===t._flatValue?t._flatValue=h.toArray():t._flatValue}(l,t);if(i&&void 0===f)throw new Qe(-951,!1);return f});return l=h[ne],l._dirtyCounter=qs(0),l._flatValue=void 0,h}function Rv(t,i){return function Av(t){return yp(!0,!1)}()}const UA=(Rv.required=function HA(t,i){return function Pv(t){return yp(!0,!0)}()},Rv);let Zl=class{},Hv=class{};function JA(t,i){return new Ep(t,i??null,[])}class Ep extends Zl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new fv(this);constructor(i,o,l,h=!0){super(),this.ngModuleType=i,this._parent=o;const f=pi(i);this._bootstrapComponents=Io(f.bootstrap),this._r3Injector=uu(i,o,[{provide:Zl,useValue:this},{provide:ah,useValue:this.componentFactoryResolver},...l],yn(i),new Set(["environment"])),h&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Dp extends Hv{moduleType;constructor(i){super(),this.moduleType=i}create(i){return new Ep(this.moduleType,i,[])}}class Uv extends Zl{injector;componentFactoryResolver=new fv(this);instance=null;constructor(i){super();const o=new fo([...i.providers,{provide:Zl,useValue:this},{provide:ah,useValue:this.componentFactoryResolver}],i.parent||pl(),i.debugName,new Set(["environment"]));this.injector=o,i.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Sp(t,i,o=null){return new Uv({providers:t,parent:i,debugName:o,runEnvironmentInitializers:!0}).injector}let ZA=(()=>{class t{_injector;cachedInjectors=new Map;constructor(o){this._injector=o}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o)){const l=fl(0,o.type),h=l.length>0?Sp([l],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o,h)}return this.cachedInjectors.get(o)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=rn({token:t,providedIn:"environment",factory:()=>new t(zn(es))})}return t})();function Gv(t){return Ht(()=>{const i=$v(t),o={...i,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ka.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&t.dependencies||null,getStandaloneInjector:i.standalone?h=>h.get(ZA).getOrCreateStandaloneInjector(o):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pr.Emulated,styles:t.styles||ln,_:null,schemas:t.schemas||null,tView:null,id:""};i.standalone&&bi("NgStandalone"),zv(o);const l=t.dependencies;return o.directiveDefs=Sf(l,!1),o.pipeDefs=Sf(l,!0),o.id=function n1(t){let i=0;const l=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const f of l.join("|"))i=Math.imul(31,i)+f.charCodeAt(0)|0;return i+=2147483648,"c"+i}(o),o})}function kA(t){return on(t)||di(t)}function qA(t){return null!==t}function Tp(t){return Ht(()=>({type:t.type,bootstrap:t.bootstrap||ln,declarations:t.declarations||ln,imports:t.imports||ln,exports:t.exports||ln,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function _A(t,i){if(null==t)return Xi;const o={};for(const l in t)if(t.hasOwnProperty(l)){const h=t[l];let f,m,D,P;Array.isArray(h)?(D=h[0],f=h[1],m=h[2]??f,P=h[3]||null):(f=h,m=h,D=rf.None,P=null),o[f]=[l,D,P],i[f]=m}return o}function e1(t){if(null==t)return Xi;const i={};for(const o in t)t.hasOwnProperty(o)&&(i[t[o]]=o);return i}function jv(t){return Ht(()=>{const i=$v(t);return zv(i),i})}function Wv(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function $v(t){const i={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputConfig:t.inputs||Xi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||ln,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_A(t.inputs,i),outputs:e1(t.outputs),debugInfo:null}}function zv(t){t.features?.forEach(i=>i(t))}function Sf(t,i){if(!t)return null;const o=i?Ci:kA;return()=>("function"==typeof t?t():t).map(l=>o(l)).filter(qA)}function Ip(t){let i=function Kv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const l=[t];for(;i;){let h;if(yi(t))h=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Qe(903,!1);h=i.\u0275dir}if(h){if(o){l.push(h);const m=t;m.inputs=xp(t.inputs),m.declaredInputs=xp(t.declaredInputs),m.outputs=xp(t.outputs);const D=h.hostBindings;D&&a1(t,D);const P=h.viewQuery,Q=h.contentQueries;if(P&&r1(t,P),Q&&l1(t,Q),s1(t,h),mi(t.outputs,h.outputs),yi(h)&&h.data.animation){const de=t.data;de.animation=(de.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let m=0;m<f.length;m++){const D=f[m];D&&D.ngInherit&&D(t),D===Ip&&(o=!1)}}i=Object.getPrototypeOf(i)}!function o1(t){let i=0,o=null;for(let l=t.length-1;l>=0;l--){const h=t[l];h.hostVars=i+=h.hostVars,h.hostAttrs=lr(h.hostAttrs,o=lr(o,h.hostAttrs))}}(l)}function s1(t,i){for(const o in i.inputs){if(!i.inputs.hasOwnProperty(o)||t.inputs.hasOwnProperty(o))continue;const l=i.inputs[o];void 0!==l&&(t.inputs[o]=l,t.declaredInputs[o]=i.declaredInputs[o])}}function xp(t){return t===Xi?{}:t===ln?[]:t}function r1(t,i){const o=t.viewQuery;t.viewQuery=o?(l,h)=>{i(l,h),o(l,h)}:i}function l1(t,i){const o=t.contentQueries;t.contentQueries=o?(l,h,f)=>{i(l,h,f),o(l,h,f)}:i}function a1(t,i){const o=t.hostBindings;t.hostBindings=o?(l,h)=>{i(l,h),o(l,h)}:i}function Tf(t){return!!Ap(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ap(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Mo(t,i,o){return t[i]=o}function _n(t,i,o){return!Object.is(t[i],o)&&(t[i]=o,!0)}function kl(t,i,o,l){const h=_n(t,i,o);return _n(t,i+1,l)||h}function If(t,i,o,l,h){const f=kl(t,i,o,l);return _n(t,i+2,h)||f}function gh(t,i,o,l,h,f,m,D,P,Q){const de=o+Dt,ye=i.firstCreatePass?function C1(t,i,o,l,h,f,m,D,P){const Q=i.consts,de=gd(i,t,4,m||null,D||null);jh()&&ap(i,o,de,ns(Q,P),Nm),de.mergedAttrs=lr(de.mergedAttrs,de.attrs),uc(i,de);const ye=de.tView=Am(2,de,l,h,f,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Q,null);return null!==i.queries&&(i.queries.template(i,de),ye.queries=i.queries.embeddedTView(de)),de}(de,i,t,l,h,f,m,D,P):i.data[de];ss(ye,!1);const Pe=Zv(i,t,ye,o);Co()&&cf(i,t,Pe,ye),Wi(Pe,t);const Me=Fy(Pe,t,Pe,ye);return t[de]=Me,Om(t,Me),function yv(t,i,o){return cp(t,i,o)}(Me,ye,t),Os(ye)&&lf(i,t,ye),null!=P&&Rm(t,ye,Q),ye}function Pp(t,i,o,l,h,f,m,D){const P=Ye(),Q=Rt();return gh(P,Q,t,i,o,l,h,ns(Q.consts,f),m,D),Pp}let Zv=function kv(t,i,o,l){return ws(!0),i[Mt].createComment("")};let Rp=(()=>{class t{log(o){console.log(o)}warn(o){console.warn(o)}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const cE=new bt(""),hE=new bt("");let wp,mP=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(o,l,h){this._ngZone=o,this.registry=l,Kd()&&(this._destroyRef=vt(ls,{optional:!0})??void 0),wp||(function pP(t){wp=t}(h),h.addToWindow(l)),this._watchAngularEvents(),o.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){const o=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),l=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Rn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{o.unsubscribe(),l.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb()}});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1))}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,h){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o()},l)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:h})}whenStable(o,l,h){if(h&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,h),this._runCallbacksIfReady()}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,l,h){return[]}static \u0275fac=function(l){return new(l||t)(zn(Rn),zn(uE),zn(hE))};static \u0275prov=rn({token:t,factory:t.\u0275fac})}return t})(),uE=(()=>{class t{_applications=new Map;registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return wp?.findTestabilityInTree(this,o,l)??null}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),fE=(()=>{class t{static \u0275prov=rn({token:t,providedIn:"root",factory:()=>new CP})}return t})();class CP{queuedEffectCount=0;queues=new Map;schedule(i){this.enqueue(i)}remove(i){const l=this.queues.get(i.zone);l.has(i)&&(l.delete(i),this.queuedEffectCount--)}enqueue(i){const o=i.zone;this.queues.has(o)||this.queues.set(o,new Set);const l=this.queues.get(o);l.has(i)||(this.queuedEffectCount++,l.add(i))}flush(){for(;this.queuedEffectCount>0;)for(const[i,o]of this.queues)null===i?this.flushQueue(o):i.run(()=>this.flushQueue(o))}flushQueue(i){for(const o of i)i.delete(o),this.queuedEffectCount--,o.run()}}function Vp(t){return!!t&&"function"==typeof t.then}function gE(t){return!!t&&"function"==typeof t.subscribe}const Bp=new bt("");function yP(t){return zs([{provide:Bp,multi:!0,useValue:t}])}let mE=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((o,l)=>{this.resolve=o,this.reject=l});appInits=vt(Bp,{optional:!0})??[];injector=vt(hi);constructor(){}runInitializers(){if(this.initialized)return;const o=[];for(const h of this.appInits){const f=yl(this.injector,h);if(Vp(f))o.push(f);else if(gE(f)){const m=new Promise((D,P)=>{f.subscribe({complete:D,error:P})});o.push(m)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{l()}).catch(h=>{this.reject(h)}),0===o.length&&l(),this.initialized=!0}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ph=new bt("");function CE(t,i){return Array.isArray(i)?i.reduce(CE,t):{...t,...i}}let Ss=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=vt(Hg);afterRenderManager=vt(td);zonelessEnabled=vt(Do);rootEffectScheduler=vt(fE);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ae.B;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=vt(as).hasPendingTasks.pipe((0,$e.T)(o=>!o));constructor(){vt(Di,{optional:!0})}whenStable(){let o;return new Promise(l=>{o=this.isStable.subscribe({next:h=>{h&&l()}})}).finally(()=>{o.unsubscribe()})}_injector=vt(es);_rendererFactory=null;get injector(){return this._injector}bootstrap(o,l){return this.bootstrapImpl(o,l)}bootstrapImpl(o,l,h=hi.NULL){Sn(10);const f=o instanceof sv;if(!this._injector.get(mE).done)throw new Qe(405,"");let D;D=f?o:this._injector.get(ah).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const P=function vP(t){return t.isBoundToModule}(D)?void 0:this._injector.get(Zl),de=D.create(h,[],l||D.selector,P),ye=de.location.nativeElement,Pe=de.injector.get(cE,null);return Pe?.registerApplication(ye),de.onDestroy(()=>{this.detachView(de.hostView),Pf(this.components,de),Pe?.unregisterApplication(ye)}),this._loadComponent(de),Sn(11,de),de}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Sn(12),null!==this.tracingSnapshot?this.tracingSnapshot.run($i.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Qe(101,!1);const o=z(null);try{this._runningTick=!0,this.synchronize()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(o),this.afterTick.next(),Sn(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(sp,null,{optional:!0}));let o=0;for(;0!==this.dirtyFlags&&o++<10;)Sn(14),this.synchronizeOnce(),Sn(15)}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const o=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:l,notifyErrorHandler:h}of this.allViews)DP(l,h,o,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:o})=>Vn(o))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;Pf(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(ph,[]).forEach(h=>h(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Pf(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Qe(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pf(t,i){const o=t.indexOf(i);o>-1&&t.splice(o,1)}function DP(t,i,o,l){(o||Vn(t))&&uf(t,i,o&&!l?0:1)}function Wp(t,i,o,l){const h=Ye();return _n(h,os(),i)&&(Rt(),xo(Tn(),h,t,i,o,l)),Wp}function Td(t,i,o,l){return _n(t,os(),o)?i+Ft(o)+l:Jt}function Id(t,i,o,l,h,f){const D=kl(t,Fs(),o,h);return rs(2),D?i+Ft(o)+l+Ft(h)+f:Jt}function xd(t,i,o,l,h,f,m,D){const Q=If(t,Fs(),o,h,m);return rs(3),Q?i+Ft(o)+l+Ft(h)+f+Ft(m)+D:Jt}function $p(t,i,o,l,h,f){const m=Ye(),D=Td(m,i,o,l);return D!==Jt&&xo(Tn(),m,t,D,h,f),$p}function zp(t,i,o,l,h,f,m,D){const P=Ye(),Q=Id(P,i,o,l,h,f);return Q!==Jt&&xo(Tn(),P,t,Q,m,D),zp}function Of(t,i){return t<<17|i<<2}function _l(t){return t>>17&32767}function Kp(t){return 2|t}function Rd(t){return(131068&t)>>2}function Yp(t,i){return-131069&t|i<<2}function Xp(t){return 1|t}function FE(t,i,o,l){const h=t[o+1],f=null===i;let m=l?_l(h):Rd(h),D=!1;for(;0!==m&&(!1===D||f);){const Q=t[m+1];lO(t[m],i)&&(D=!0,t[m+1]=l?Xp(Q):Kp(Q)),m=l?_l(Q):Rd(Q)}D&&(t[o+1]=l?Kp(h):Xp(h))}function lO(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Ko(t,i)>=0}const gi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function LE(t){return t.substring(gi.key,gi.keyEnd)}function aO(t){return t.substring(gi.value,gi.valueEnd)}function wE(t,i){const o=gi.textEnd;return o===i?-1:(i=gi.keyEnd=function hO(t,i,o){for(;i<o&&t.charCodeAt(i)>32;)i++;return i}(t,gi.key=i,o),Nd(t,i,o))}function VE(t,i){const o=gi.textEnd;let l=gi.key=Nd(t,i,o);return o===l?-1:(l=gi.keyEnd=function uO(t,i,o){let l;for(;i<o&&(45===(l=t.charCodeAt(i))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)i++;return i}(t,l,o),l=HE(t,l,o),l=gi.value=Nd(t,l,o),l=gi.valueEnd=function fO(t,i,o){let l=-1,h=-1,f=-1,m=i,D=m;for(;m<o;){const P=t.charCodeAt(m++);if(59===P)return D;34===P||39===P?D=m=UE(t,P,m,o):i===m-4&&85===f&&82===h&&76===l&&40===P?D=m=UE(t,41,m,o):P>32&&(D=m),f=h,h=l,l=-33&P}return D}(t,l,o),HE(t,l,o))}function BE(t){gi.key=0,gi.keyEnd=0,gi.value=0,gi.valueEnd=0,gi.textEnd=t.length}function Nd(t,i,o){for(;i<o&&t.charCodeAt(i)<=32;)i++;return i}function HE(t,i,o,l){return(i=Nd(t,i,o))<o&&i++,i}function UE(t,i,o,l){let h=-1,f=o;for(;f<l;){const m=t.charCodeAt(f++);if(m==i&&92!==h)return f;h=92==m&&92===h?0:m}throw new Error}function Jp(t,i,o){const l=Ye();return _n(l,os(),i)&&hs(Rt(),Tn(),l,t,i,l[Mt],o,!1),Jp}function Qp(t,i,o,l,h){wm(i,t,o,h?"class":"style",l)}function Zp(t,i,o){return no(t,i,o,!1),Zp}function kp(t,i){return no(t,i,null,!0),kp}function to(t){io($E,gO,t,!1)}function gO(t,i){for(let o=function cO(t){return BE(t),VE(t,Nd(t,0,gi.textEnd))}(i);o>=0;o=VE(i,o))$E(t,LE(i),aO(i))}function GE(t){io(EO,Ao,t,!0)}function Ao(t,i){for(let o=function dO(t){return BE(t),wE(t,Nd(t,0,gi.textEnd))}(i);o>=0;o=wE(i,o))Mi(t,LE(i),!0)}function no(t,i,o,l){const h=Ye(),f=Rt(),m=rs(2);f.firstUpdatePass&&WE(f,t,m,l),i!==Jt&&_n(h,m,i)&&zE(f,f.data[ci()],h,h[Mt],t,h[m+1]=function SO(t,i){return null==t||""===t||("string"==typeof i?t+=i:"object"==typeof t&&(t=yn(Cr(t)))),t}(i,o),l,m)}function io(t,i,o,l){const h=Rt(),f=rs(2);h.firstUpdatePass&&WE(h,null,f,l);const m=Ye();if(o!==Jt&&_n(m,f,o)){const D=h.data[ci()];if(YE(D,l)&&!jE(h,f)){let P=l?D.classesWithoutHost:D.stylesWithoutHost;null!==P&&(o=ri(P,o||"")),Qp(h,D,m,o,l)}else!function DO(t,i,o,l,h,f,m,D){h===Jt&&(h=ln);let P=0,Q=0,de=0<h.length?h[0]:null,ye=0<f.length?f[0]:null;for(;null!==de||null!==ye;){const Pe=P<h.length?h[P+1]:void 0,Me=Q<f.length?f[Q+1]:void 0;let Ze,we=null;de===ye?(P+=2,Q+=2,Pe!==Me&&(we=ye,Ze=Me)):null===ye||null!==de&&de<ye?(P+=2,we=de):(Q+=2,we=ye,Ze=Me),null!==we&&zE(t,i,o,l,we,Ze,m,D),de=P<h.length?h[P]:null,ye=Q<f.length?f[Q]:null}}(h,D,m,m[Mt],m[f+1],m[f+1]=function vO(t,i,o){if(null==o||""===o)return ln;const l=[],h=Cr(o);if(Array.isArray(h))for(let f=0;f<h.length;f++)t(l,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&t(l,f,h[f]);else"string"==typeof h&&i(l,h);return l}(t,i,o),l,f)}}function jE(t,i){return i>=t.expandoStartIndex}function WE(t,i,o,l){const h=t.data;if(null===h[o+1]){const f=h[ci()],m=jE(t,o);YE(f,l)&&null===i&&!m&&(i=!1),i=function mO(t,i,o,l){const h=function Kr(t){const i=Vt.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let f=l?i.residualClasses:i.residualStyles;if(null===h)0===(l?i.classBindings:i.styleBindings)&&(o=yh(o=qp(null,t,i,o,l),i.attrs,l),f=null);else{const m=i.directiveStylingLast;if(-1===m||t[m]!==h)if(o=qp(h,t,i,o,l),null===f){let P=function pO(t,i,o){const l=o?i.classBindings:i.styleBindings;if(0!==Rd(l))return t[_l(l)]}(t,i,l);void 0!==P&&Array.isArray(P)&&(P=qp(null,t,i,P[1],l),P=yh(P,i.attrs,l),function CO(t,i,o,l){t[_l(o?i.classBindings:i.styleBindings)]=l}(t,i,l,P))}else f=function yO(t,i,o){let l;const h=i.directiveEnd;for(let f=1+i.directiveStylingLast;f<h;f++)l=yh(l,t[f].hostAttrs,o);return yh(l,i.attrs,o)}(t,i,l)}return void 0!==f&&(l?i.residualClasses=f:i.residualStyles=f),o}(h,f,i,l),function oO(t,i,o,l,h,f){let m=f?i.classBindings:i.styleBindings,D=_l(m),P=Rd(m);t[l]=o;let de,Q=!1;if(Array.isArray(o)?(de=o[1],(null===de||Ko(o,de)>0)&&(Q=!0)):de=o,h)if(0!==P){const Pe=_l(t[D+1]);t[l+1]=Of(Pe,D),0!==Pe&&(t[Pe+1]=Yp(t[Pe+1],l)),t[D+1]=function iO(t,i){return 131071&t|i<<17}(t[D+1],l)}else t[l+1]=Of(D,0),0!==D&&(t[D+1]=Yp(t[D+1],l)),D=l;else t[l+1]=Of(P,0),0===D?D=l:t[P+1]=Yp(t[P+1],l),P=l;Q&&(t[l+1]=Kp(t[l+1])),FE(t,de,l,!0),FE(t,de,l,!1),function rO(t,i,o,l,h){const f=h?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof i&&Ko(f,i)>=0&&(o[l+1]=Xp(o[l+1]))}(i,de,t,l,f),m=Of(D,P),f?i.classBindings=m:i.styleBindings=m}(h,f,i,o,m,l)}}function qp(t,i,o,l,h){let f=null;const m=o.directiveEnd;let D=o.directiveStylingLast;for(-1===D?D=o.directiveStart:D++;D<m&&(f=i[D],l=yh(l,f.hostAttrs,h),f!==t);)D++;return null!==t&&(o.directiveStylingLast=D),l}function yh(t,i,o){const l=o?1:2;let h=-1;if(null!==i)for(let f=0;f<i.length;f++){const m=i[f];"number"==typeof m?h=m:h===l&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Mi(t,m,!!o||i[++f]))}return void 0===t?null:t}function $E(t,i,o){Mi(t,i,Cr(o))}function EO(t,i,o){const l=String(i);""!==l&&!l.includes(" ")&&Mi(t,l,o)}function zE(t,i,o,l,h,f,m,D){if(!(3&i.type))return;const P=t.data,Q=P[D+1],de=function sO(t){return!(1&~t)}(Q)?KE(P,i,o,h,Rd(Q),m):void 0;bf(de)||(bf(f)||function nO(t){return!(2&~t)}(Q)&&(f=KE(P,null,o,h,D,m)),function Wx(t,i,o,l,h){if(i)h?t.addClass(o,l):t.removeClass(o,l);else{let f=-1===l.indexOf("-")?void 0:df.DashCase;null==h?t.removeStyle(o,l,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=df.Important),t.setStyle(o,l,h,f))}}(l,m,Ur(ci(),o),h,f))}function KE(t,i,o,l,h,f){const m=null===i;let D;for(;h>0;){const P=t[h],Q=Array.isArray(P),de=Q?P[1]:P,ye=null===de;let Pe=o[h+1];Pe===Jt&&(Pe=ye?ln:void 0);let Me=ye?zo(Pe,l):de===l?Pe:void 0;if(Q&&!bf(Me)&&(Me=zo(P,l)),bf(Me)&&(D=Me,m))return D;const we=t[h+1];h=m?_l(we):Rd(we)}if(null!==i){let P=f?i.residualClasses:i.residualStyles;null!=P&&(D=zo(P,l))}return D}function bf(t){return void 0!==t}function YE(t,i){return!!(t.flags&(i?8:16))}function XE(t,i,o){io(Mi,Ao,Td(Ye(),t,i,o),!0)}function JE(t,i,o,l,h){io(Mi,Ao,Id(Ye(),t,i,o,l,h),!0)}function QE(t,i,o,l,h,f,m){io(Mi,Ao,xd(Ye(),t,i,o,l,h,f,m),!0)}class bO{destroy(i){}updateValue(i,o){}swap(i,o){const l=Math.min(i,o),h=Math.max(i,o),f=this.detach(h);if(h-l>1){const m=this.detach(l);this.attach(l,f),this.attach(h,m)}else this.attach(l,f)}move(i,o){this.attach(o,this.detach(i))}}function _p(t,i,o,l,h){return t===o&&Object.is(i,l)?1:Object.is(h(t,i),h(o,l))?-1:0}function e0(t,i,o,l){return!(void 0===i||!i.has(l)||(t.attach(o,i.get(l)),i.delete(l),0))}function ZE(t,i,o,l,h){if(e0(t,i,l,o(l,h)))t.updateValue(l,h);else{const f=t.create(l,h);t.attach(l,f)}}function kE(t,i,o,l){const h=new Set;for(let f=i;f<=o;f++)h.add(l(f,t.at(f)));return h}class qE{kvMap=new Map;_vMap=void 0;has(i){return this.kvMap.has(i)}delete(i){if(!this.has(i))return!1;const o=this.kvMap.get(i);return void 0!==this._vMap&&this._vMap.has(o)?(this.kvMap.set(i,this._vMap.get(o)),this._vMap.delete(o)):this.kvMap.delete(i),!0}get(i){return this.kvMap.get(i)}set(i,o){if(this.kvMap.has(i)){let l=this.kvMap.get(i);void 0===this._vMap&&(this._vMap=new Map);const h=this._vMap;for(;h.has(l);)l=h.get(l);h.set(l,o)}else this.kvMap.set(i,o)}forEach(i){for(let[o,l]of this.kvMap)if(i(l,o),void 0!==this._vMap){const h=this._vMap;for(;h.has(l);)l=h.get(l),i(l,o)}}}function _E(t,i){bi("NgControlFlow");const o=Ye(),l=os(),h=o[l]!==Jt?o[l]:-1,f=-1!==h?Rf(o,Dt+h):void 0;if(_n(o,l,t)){const D=z(null);try{if(void 0!==f&&Ym(f,0),-1!==t){const P=Dt+t,Q=Rf(o,P),de=t0(o[it],P),ye=pd(Q,de.tView.ssrId);fd(Q,cd(o,de,i,{dehydratedView:ye}),0,Yl(de,ye))}}finally{z(D)}}else if(void 0!==f){const D=Ly(f,0);void 0!==D&&(D[Lt]=i)}}class NO{lContainer;$implicit;$index;constructor(i,o,l){this.lContainer=i,this.$implicit=o,this.$index=l}get $count(){return this.lContainer.length-an}}function eD(t,i){return i}class LO{hasEmptyBlock;trackByFn;liveCollection;constructor(i,o,l){this.hasEmptyBlock=i,this.trackByFn=o,this.liveCollection=l}}function tD(t,i,o,l,h,f,m,D,P,Q,de,ye,Pe){bi("NgControlFlow");const Me=Ye(),we=Rt(),Ze=void 0!==P,lt=Ye(),dt=D?m.bind(lt[Fn][Lt]):m,et=new LO(Ze,dt);lt[Dt+t]=et,gh(Me,we,t+1,i,o,l,h,ns(we.consts,f)),Ze&&gh(Me,we,t+2,P,Q,de,ye,ns(we.consts,Pe))}class wO extends bO{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(i,o,l){super(),this.lContainer=i,this.hostLView=o,this.templateTNode=l}get length(){return this.lContainer.length-an}at(i){return this.getLView(i)[Lt].$implicit}attach(i,o){const l=o[kn];this.needsIndexUpdate||=i!==this.length,fd(this.lContainer,o,i,Yl(this.templateTNode,l))}detach(i){return this.needsIndexUpdate||=i!==this.length-1,function VO(t,i){return qc(t,i)}(this.lContainer,i)}create(i,o){const l=pd(this.lContainer,this.templateTNode.tView.ssrId),h=cd(this.hostLView,this.templateTNode,new NO(this.lContainer,o,i),{dehydratedView:l});return this.operationsCounter?.recordCreate(),h}destroy(i){Zc(i[it],i),this.operationsCounter?.recordDestroy()}updateValue(i,o){this.getLView(i)[Lt].$implicit=o}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let i=0;i<this.length;i++)this.getLView(i)[Lt].$index=i}getLView(i){return function BO(t,i){return Ly(t,i)}(this.lContainer,i)}}function nD(t){const i=z(null),o=ci();try{const l=Ye(),h=l[it],f=l[o],m=o+1,D=Rf(l,m);if(void 0===f.liveCollection){const Q=t0(h,m);f.liveCollection=new wO(D,l,Q)}else f.liveCollection.reset();const P=f.liveCollection;if(function RO(t,i,o){let l,h,f=0,m=t.length-1;if(Array.isArray(i)){let P=i.length-1;for(;f<=m&&f<=P;){const Q=t.at(f),de=i[f],ye=_p(f,Q,f,de,o);if(0!==ye){ye<0&&t.updateValue(f,de),f++;continue}const Pe=t.at(m),Me=i[P],we=_p(m,Pe,P,Me,o);if(0!==we){we<0&&t.updateValue(m,Me),m--,P--;continue}const Ze=o(f,Q),lt=o(m,Pe),dt=o(f,de);if(Object.is(dt,lt)){const et=o(P,Me);Object.is(et,Ze)?(t.swap(f,m),t.updateValue(m,Me),P--,m--):t.move(m,f),t.updateValue(f,de),f++}else if(l??=new qE,h??=kE(t,f,m,o),e0(t,l,f,dt))t.updateValue(f,de),f++,m++;else if(h.has(dt))l.set(Ze,t.detach(f)),m--;else{const et=t.create(f,i[f]);t.attach(f,et),f++,m++}}for(;f<=P;)ZE(t,l,o,f,i[f]),f++}else if(null!=i){const P=i[Symbol.iterator]();let Q=P.next();for(;!Q.done&&f<=m;){const de=t.at(f),ye=Q.value,Pe=_p(f,de,f,ye,o);if(0!==Pe)Pe<0&&t.updateValue(f,ye),f++,Q=P.next();else{l??=new qE,h??=kE(t,f,m,o);const Me=o(f,ye);if(e0(t,l,f,Me))t.updateValue(f,ye),f++,m++,Q=P.next();else if(h.has(Me)){const we=o(f,de);l.set(we,t.detach(f)),m--}else t.attach(f,t.create(f,ye)),f++,m++,Q=P.next()}}for(;!Q.done;)ZE(t,l,o,t.length,Q.value),Q=P.next()}for(;f<=m;)t.destroy(t.detach(m--));l?.forEach(P=>{t.destroy(P)})}(P,t,f.trackByFn),P.updateIndexes(),f.hasEmptyBlock){const Q=os(),de=0===P.length;if(_n(l,Q,de)){const ye=o+2,Pe=Rf(l,ye);if(de){const Me=t0(h,ye),we=pd(Pe,Me.tView.ssrId);fd(Pe,cd(l,Me,void 0,{dehydratedView:we}),0,Yl(Me,we))}else Ym(Pe,0)}}}finally{z(i)}}function Rf(t,i){return t[i]}function t0(t,i){return Rs(t,i)}function Nf(t,i,o,l){const h=Ye(),f=Rt(),m=Dt+t,D=h[Mt],P=f.firstCreatePass?hv(m,f,h,i,Nm,jh(),o,l):f.data[m],Q=iD(f,h,P,D,i,t);h[m]=Q;const de=Os(P);return ss(P,!0),ly(D,Q,P),!Zr(P)&&Co()&&cf(f,h,Q,P),(0===function nc(){return Vt.lFrame.elementDepthCount}()||de)&&Wi(Q,h),function ic(){Vt.lFrame.elementDepthCount++}(),de&&(lf(f,h,P),pm(f,P,h)),null!==l&&Rm(h,P),Nf}function Ff(){let t=kt();zr()?Ns():(t=t.parent,ss(t,!1));const i=t;(function zt(t){return Vt.skipHydrationRootTNode===t})(i)&&function Al(){Vt.skipHydrationRootTNode=null}(),function is(){Vt.lFrame.elementDepthCount--}();const o=Rt();return o.firstCreatePass&&uv(o,i),null!=i.classesWithoutHost&&function Qh(t){return!!(8&t.flags)}(i)&&Qp(o,i,Ye(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Cg(t){return!!(16&t.flags)}(i)&&Qp(o,i,Ye(),i.stylesWithoutHost,!1),Ff}function n0(t,i,o,l){return Nf(t,i,o,l),Ff(),n0}let iD=(t,i,o,l,h,f)=>(ws(!0),sf(l,h,function Ln(){return Vt.lFrame.currentNamespace}()));function Lf(t,i,o){const l=Ye(),h=Rt(),f=t+Dt,m=h.firstCreatePass?function GO(t,i,o,l,h){const f=i.consts,m=ns(f,l),D=gd(i,t,8,"ng-container",m);null!==m&&lp(D,m,!0);const P=ns(f,h);return jh()&&ap(i,o,D,P,Nm),D.mergedAttrs=lr(D.mergedAttrs,D.attrs),null!==i.queries&&i.queries.elementStart(i,D),D}(f,h,l,i,o):h.data[f];ss(m,!0);const D=sD(h,l,m,t);return l[f]=D,Co()&&cf(h,l,D,m),Wi(D,l),Os(m)&&(lf(h,l,m),pm(h,m,l)),null!=o&&Rm(l,m),Lf}function wf(){let t=kt();const i=Rt();return zr()?Ns():(t=t.parent,ss(t,!1)),i.firstCreatePass&&(uc(i,t),jt(t)&&i.queries.elementEnd(t)),wf}function s0(t,i,o){return Lf(t,i,o),wf(),s0}let sD=(t,i,o,l)=>(ws(!0),Mm(i[Mt],""));function oD(){return Ye()}function o0(t,i,o){const l=Ye();return _n(l,os(),i)&&hs(Rt(),Tn(),l,t,i,l[Mt],o,!0),o0}const ea=void 0;var zO=["en",[["a","p"],["AM","PM"],ea],[["AM","PM"],ea,ea],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ea,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ea,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ea,"{1} 'at' {0}",ea],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $O(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Fd={};function r0(t){const i=function KO(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=aD(i);if(o)return o;const l=i.split("-")[0];if(o=aD(l),o)return o;if("en"===l)return zO;throw new Qe(701,!1)}function lD(t){return r0(t)[Ld.PluralCase]}function aD(t){return t in Fd||(Fd[t]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[t]),Fd[t]}var Ld=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ld||{});const Vf="en-US";let dD=Vf;function AD(t,i,o){return function l(h){if(h===Function)return o;kc(un(t)?Pi(t.index,i):i,5);const m=i[Lt];let D=PD(i,m,o,h),P=l.__ngNextListenerFn__;for(;P;)D=PD(i,m,P,h)&&D,P=P.__ngNextListenerFn__;return D}}function PD(t,i,o,l){const h=z(null);try{return Sn(6,i,o),!1!==o(l)}catch(f){return function Fb(t,i){const o=t[wn],l=o?o.get(Bs,null):null;l&&l.handleError(i)}(t,f),!1}finally{Sn(7,i,o),z(h)}}function OD(t,i,o,l,h,f){const D=i[it],de=i[o][D.data[o].outputs[l]],ye=D.firstCreatePass?nr(D):null,Pe=Wr(i),Me=de.subscribe(f),we=Pe.length;Pe.push(f,Me),ye&&ye.push(h,t.index,we,-(we+1))}function d0(t,i,o,l){const h=Ye(),f=Rt(),m=kt();return c0(f,h,h[Mt],m,t,i,l),d0}function c0(t,i,o,l,h,f,m){const D=Os(l),Q=t.firstCreatePass?nr(t):null,de=Wr(i);let ye=!0;if(3&l.type||m){const Pe=It(l,i),Me=m?m(Pe):Pe,we=de.length,Ze=m?dt=>m(hn(dt[l.index])):l.index;let lt=null;if(!m&&D&&(lt=function Lb(t,i,o,l){const h=t.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const m=h[f];if(m===o&&h[f+1]===l){const D=i[go],P=h[f+2];return D.length>P?D[P]:null}"string"==typeof m&&(f+=2)}return null}(t,i,h,l.index)),null!==lt)(lt.__ngLastListenerFn__||lt).__ngNextListenerFn__=f,lt.__ngLastListenerFn__=f,ye=!1;else{!function kT(t,i,o,l){pC(t,i,o,l)}(i,Me,h,f=AD(l,i,f));const dt=o.listen(Me,h,f);de.push(f,dt),Q&&Q.push(h,Ze,we,we+1)}}else f=AD(l,i,f);if(ye){const Pe=l.outputs?.[h],Me=l.hostDirectiveOutputs?.[h];if(Me&&Me.length)for(let we=0;we<Me.length;we+=2)OD(l,i,Me[we],Me[we+1],h,f);if(Pe&&Pe.length)for(const we of Pe)OD(l,i,we,h,h,f)}}function RD(t=1){return function hc(t){return(Vt.lFrame.contextLView=function Pa(t,i){for(;t>0;)i=i[Ps],t--;return i}(t,Vt.lFrame.contextLView))[Lt]}(t)}function wb(t,i){let o=null;const l=function hx(t){const i=t.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(t);for(let h=0;h<i.length;h++){const f=i[h];if("*"!==f){if(null===l?ty(t,f,!0):gx(l,f))return h}else o=h}return o}function ND(t){const i=Ye()[Fn][ti];if(!i.projection){const l=i.projection=function uo(t,i){const o=[];for(let l=0;l<t;l++)o.push(i);return o}(t?t.length:1,null),h=l.slice();let f=i.child;for(;null!==f;){if(128!==f.type){const m=t?wb(f,t):0;null!==m&&(h[m]?h[m].projectionNext=f:l[m]=f,h[m]=f)}f=f.next}}}function FD(t,i=0,o,l,h,f){const m=Ye(),D=Rt(),P=l?t+1:null;null!==P&&gh(m,D,P,l,h,f,null,o);const Q=gd(D,Dt+t,16,null,o||null);null===Q.projection&&(Q.projection=i),Ns();const ye=!m[kn]||ir();null===m[Fn][ti].projection[Q.projection]&&null!==P?function Vb(t,i,o){const l=Dt+o,h=i.data[l],f=t[l],m=pd(f,h.tView.ssrId);fd(f,cd(t,h,void 0,{dehydratedView:m}),0,Yl(h,m))}(m,D,P):ye&&!Zr(Q)&&function Gx(t,i,o){Ty(i[Mt],0,i,o,Gm(t,o,i),yy(o.parent||i[ti],o,i))}(D,m,Q)}function h0(t,i,o){return Gf(t,"",i,"",o),h0}function Gf(t,i,o,l,h){const f=Ye(),m=Td(f,i,o,l);return m!==Jt&&hs(Rt(),Tn(),f,t,m,f[Mt],h,!1),Gf}function u0(t,i,o,l,h,f,m){const D=Ye(),P=Id(D,i,o,l,h,f);return P!==Jt&&hs(Rt(),Tn(),D,t,P,D[Mt],m,!1),u0}function jD(t,i,o,l){Iv(t,i,o,l)}function WD(t,i,o){!function Tv(t,i,o){const l=Rt();return l.firstCreatePass&&(xv(l,new Ev(t,i,o),-1),!(2&~i)&&(l.staticViewQueries=!0)),Sv(l,Ye(),i)}(t,i,o)}function $D(t){const i=Ye(),o=Rt(),l=Ra();bl(l+1);const h=Cp(o,l);if(t.dirty&&function lg(t){return!(4&~t[Nt])}(i)===!(2&~h.metadata.flags)){if(null===h.matches)t.reset([]);else{const f=Mv(i,l);t.reset(f,Su),t.notifyOnChanges()}return!0}return!1}function zD(){return pp(Ye(),Ra())}function KD(t,i,o,l,h){!function bv(t,i){const o=t[ne];o._lView=Ye(),o._queryIndex=i,o._queryList=pp(o._lView,i),o._queryList.onDirty(()=>o._dirtyCounter.update(l=>l+1))}(i,Iv(t,o,l,h))}function YD(t=1){bl(Ra()+t)}function XD(t){return Qs(function sc(){return Vt.lFrame.contextLView}(),Dt+t)}function f0(t,i,o,l,h){return no(t,Td(Ye(),i,o,l),h,!1),f0}function nS(t,i=""){const o=Ye(),l=Rt(),h=t+Dt,f=l.firstCreatePass?gd(l,h,1,i,null):l.data[h],m=iS(l,o,f,i,t);o[h]=m,Co()&&cf(l,o,m,f),ss(f,!1)}let iS=(t,i,o,l,h)=>(ws(!0),function xm(t,i){return t.createText(i)}(i[Mt],l));function g0(t){return jf("",t,""),g0}function jf(t,i,o){const l=Ye(),h=Td(l,t,i,o);return h!==Jt&&vr(l,ci(),h),jf}function m0(t,i,o,l,h){const f=Ye(),m=Id(f,t,i,o,l,h);return m!==Jt&&vr(f,ci(),m),m0}function p0(t,i,o,l,h,f,m){const D=Ye(),P=xd(D,t,i,o,l,h,f,m);return P!==Jt&&vr(D,ci(),P),p0}function vr(t,i,o){const l=Ur(i,t);!function iy(t,i,o){t.setValue(i,o)}(t[Mt],l,o)}function C0(t,i,o){Tu(i)&&(i=i());const l=Ye();return _n(l,os(),i)&&hs(Rt(),Tn(),l,t,i,l[Mt],o,!1),C0}function cS(t,i){const o=Tu(t);return o&&t.set(i),o}function y0(t,i){const o=Ye(),l=Rt(),h=kt();return c0(l,o,o[Mt],h,t,i),y0}const hS={};function v0(t){const i=Rt(),o=Ye(),l=t+Dt;return ss(gd(i,l,128,null,null),!1),ec(i,o,l,hS),v0}function E0(t,i,o,l,h){if(t=ct(t),Array.isArray(t))for(let f=0;f<t.length;f++)E0(t[f],i,o,l,h);else{const f=Rt(),m=Ye(),D=kt();let P=Qn(t)?t:ct(t.provide);const Q=Ji(t),de=1048575&D.providerIndexes,ye=D.directiveStart,Pe=D.providerIndexes>>20;if(Qn(t)||!t.multi){const Me=new or(Q,h,yd),we=S0(P,i,h?de:de+Pe,ye);-1===we?(Cc(ar(D,m),f,P),D0(f,t,i.length),i.push(P),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),o.push(Me),m.push(Me)):(o[we]=Me,m[we]=Me)}else{const Me=S0(P,i,de+Pe,ye),we=S0(P,i,de,de+Pe),lt=we>=0&&o[we];if(h&&!lt||!h&&!(Me>=0&&o[Me])){Cc(ar(D,m),f,P);const dt=function tR(t,i,o,l,h){const f=new or(t,o,yd);return f.multi=[],f.index=i,f.componentProviders=0,uS(f,h,l&&!o),f}(h?eR:_b,o.length,h,l,Q);!h&&lt&&(o[we].providerFactory=dt),D0(f,t,i.length,0),i.push(P),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),o.push(dt),m.push(dt)}else D0(f,t,Me>-1?Me:we,uS(o[h?we:Me],Q,!h&&l));!h&&l&&lt&&o[we].componentProviders++}}}function D0(t,i,o,l){const h=Qn(i),f=function Pr(t){return!!t.useClass}(i);if(h||f){const P=(f?ct(i.useClass):i).prototype.ngOnDestroy;if(P){const Q=t.destroyHooks||(t.destroyHooks=[]);if(!h&&i.multi){const de=Q.indexOf(o);-1===de?Q.push(o,[l,P]):Q[de+1].push(l,P)}else Q.push(o,P)}}}function uS(t,i,o){return o&&t.componentProviders++,t.multi.push(i)-1}function S0(t,i,o,l){for(let h=o;h<l;h++)if(i[h]===t)return h;return-1}function _b(t,i,o,l,h){return T0(this.multi,[])}function eR(t,i,o,l,h){const f=this.multi;let m;if(this.providerFactory){const D=this.providerFactory.componentProviders,P=Vl(l,l[it],this.providerFactory.index,h);m=P.slice(0,D),T0(f,m);for(let Q=D;Q<P.length;Q++)m.push(P[Q])}else m=[],T0(f,m);return m}function T0(t,i){for(let o=0;o<t.length;o++)i.push((0,t[o])());return i}function fS(t,i=[]){return o=>{o.providersResolver=(l,h)=>function qb(t,i,o){const l=Rt();if(l.firstCreatePass){const h=yi(t);E0(o,l.data,l.blueprint,h,!0),E0(i,l.data,l.blueprint,h,!1)}}(l,h?h(t):t,i)}}function gS(t,i,o){const l=t.\u0275cmp;l.directiveDefs=Sf(i,!1),l.pipeDefs=Sf(o,!0)}function pS(t,i,o){const l=Oi()+t,h=Ye();return h[l]===Jt?Mo(h,l,o?i.call(o):i()):function fh(t,i){return t[i]}(h,l)}function CS(t,i,o,l){return ES(Ye(),Oi(),t,i,o,l)}function yS(t,i,o,l,h){return DS(Ye(),Oi(),t,i,o,l,h)}function vS(t,i,o,l,h,f){return SS(Ye(),Oi(),t,i,o,l,h,f)}function Ih(t,i){const o=t[i];return o===Jt?void 0:o}function ES(t,i,o,l,h,f){const m=i+o;return _n(t,m,h)?Mo(t,m+1,f?l.call(f,h):l(h)):Ih(t,m+1)}function DS(t,i,o,l,h,f,m){const D=i+o;return kl(t,D,h,f)?Mo(t,D+2,m?l.call(m,h,f):l(h,f)):Ih(t,D+2)}function SS(t,i,o,l,h,f,m,D){const P=i+o;return If(t,P,h,f,m)?Mo(t,P+3,D?l.call(D,h,f,m):l(h,f,m)):Ih(t,P+3)}function TS(t,i,o,l,h,f,m,D,P){const Q=i+o;return function Us(t,i,o,l,h,f){const m=kl(t,i,o,l);return kl(t,i+2,h,f)||m}(t,Q,h,f,m,D)?Mo(t,Q+4,P?l.call(P,h,f,m,D):l(h,f,m,D)):Ih(t,Q+4)}function xS(t,i){const o=Rt();let l;const h=t+Dt;o.firstCreatePass?(l=function cR(t,i){if(i)for(let o=i.length-1;o>=0;o--){const l=i[o];if(t===l.name)return l}}(i,o.pipeRegistry),o.data[h]=l,l.onDestroy&&(o.destroyHooks??=[]).push(h,l.onDestroy)):l=o.data[h];const f=l.factory||(l.factory=Ms(l.type)),D=$n(yd);try{const P=Ga(!1),Q=f();return Ga(P),ec(o,Ye(),h,Q),Q}finally{$n(D)}}function MS(t,i,o){const l=t+Dt,h=Ye(),f=Qs(h,l);return xh(h,l)?ES(h,Oi(),i,f.transform,o,f):f.transform(o)}function AS(t,i,o,l){const h=t+Dt,f=Ye(),m=Qs(f,h);return xh(f,h)?DS(f,Oi(),i,m.transform,o,l,m):m.transform(o,l)}function PS(t,i,o,l,h){const f=t+Dt,m=Ye(),D=Qs(m,f);return xh(m,f)?SS(m,Oi(),i,D.transform,o,l,h,D):D.transform(o,l,h)}function OS(t,i,o,l,h,f){const m=t+Dt,D=Ye(),P=Qs(D,m);return xh(D,m)?TS(D,Oi(),i,P.transform,o,l,h,f,P):P.transform(o,l,h,f)}function xh(t,i){return t[it].data[i].pure}function bS(t,i){return ff(t,i)}class JS{full;major;minor;patch;constructor(i){this.full=i;const o=i.split(".");this.major=o[0],this.minor=o[1],this.patch=o.slice(2).join(".")}}const UR=new JS("19.2.14");class GR{ngModuleFactory;componentFactories;constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let jR=(()=>{class t{compileModuleSync(o){return new Dp(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),f=Io(pi(o).declarations).reduce((m,D)=>{const P=on(D);return P&&m.push(new hh(P)),m},[]);return new GR(l,f)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zR=(()=>{class t{zone=vt(Rn);changeDetectionScheduler=vt(ks);applicationRef=vt(Ss);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function P0({ngZoneFactory:t,ignoreChangesOutsideZone:i,scheduleInRootZone:o}){return t??=()=>new Rn({...O0(),scheduleInRootZone:o}),[{provide:Rn,useFactory:t},{provide:Hi,multi:!0,useFactory:()=>{const l=vt(zR,{optional:!0});return()=>l.initialize()}},{provide:Hi,multi:!0,useFactory:()=>{const l=vt(YR);return()=>{l.initialize()}}},!0===i?{provide:Xa,useValue:!0}:[],{provide:gu,useValue:o??fu}]}function O0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let YR=(()=>{class t{subscription=new je.yU;initialized=!1;zone=vt(Rn);pendingTasks=vt(as);initialize(){if(this.initialized)return;this.initialized=!0;let o=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(o=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rn.assertNotInAngularZone(),queueMicrotask(()=>{null!==o&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(o),o=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rn.assertInAngularZone(),o??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ah=(()=>{class t{appRef=vt(Ss);taskService=vt(as);ngZone=vt(Rn);zonelessEnabled=vt(Do);tracing=vt(Di,{optional:!0});disableScheduling=vt(Xa,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je.yU;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(vt(gu,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof So||!this.zoneIsDefined)}notify(o){if(!this.zonelessEnabled&&5===o)return;let l=!1;switch(o){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,l=!0;break;case 12:this.appRef.dirtyFlags|=16,l=!0;break;case 11:l=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(l))return;const h=this.useMicrotaskScheduler?Bl:Qa;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>h(()=>this.tick())):this.ngZone.runOutsideAngular(()=>h(()=>this.tick()))}shouldScheduleTick(o){return!(this.disableScheduling&&!o||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const o=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(l){throw this.taskService.remove(o),l}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(o)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const o=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(o)}}static \u0275fac=function(l){return new(l||t)};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const R0=new bt("",{providedIn:"root",factory:()=>vt(R0,Yt.Optional|Yt.SkipSelf)||function XR(){return typeof $localize<"u"&&$localize.locale||Vf}()}),JR=new bt("",{providedIn:"root",factory:()=>"USD"}),Kf=new bt(""),_R=new bt("");function Ph(t){return!t.moduleRef}let eT=(()=>{class t{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(o){this._injector=o}bootstrapModuleFactory(o,l){const h=l?.scheduleInRootZone,m=l?.ignoreChangesOutsideZone,D=[P0({ngZoneFactory:()=>function Bg(t="zone.js",i){return"noop"===t?new So:"zone.js"===t?new Rn(i):t}(l?.ngZone,{...O0({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}),scheduleInRootZone:h}),ignoreChangesOutsideZone:m}),{provide:ks,useExisting:Ah}],P=function QA(t,i,o){return new Ep(t,i,o,!1)}(o.moduleType,this.injector,D);return function _S(t){const i=Ph(t)?t.r3Injector:t.moduleRef.injector,o=i.get(Rn);return o.run(()=>{Ph(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const l=i.get(Bs,null);let h;if(o.runOutsideAngular(()=>{h=o.onError.subscribe({next:f=>{l.handleError(f)}})}),Ph(t)){const f=()=>i.destroy(),m=t.platformInjector.get(Kf);m.add(f),i.onDestroy(()=>{h.unsubscribe(),m.delete(f)})}else{const f=()=>t.moduleRef.destroy(),m=t.platformInjector.get(Kf);m.add(f),t.moduleRef.onDestroy(()=>{Pf(t.allPlatformModules,t.moduleRef),h.unsubscribe(),m.delete(f)})}return function tN(t,i,o){try{const l=o();return Vp(l)?l.catch(h=>{throw i.runOutsideAngular(()=>t.handleError(h)),h}):l}catch(l){throw i.runOutsideAngular(()=>t.handleError(l)),l}}(l,o,()=>{const f=i.get(mE);return f.runInitializers(),f.donePromise.then(()=>{if(function QO(t){"string"==typeof t&&(dD=t.toLowerCase().replace(/_/g,"-"))}(i.get(R0,Vf)||Vf),!i.get(_R,!0))return Ph(t)?i.get(Ss):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ph(t)){const P=i.get(Ss);return void 0!==t.rootComponent&&P.bootstrap(t.rootComponent),P}return function eN(t,i){const o=t.injector.get(Ss);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!t.instance.ngDoBootstrap)throw new Qe(-403,!1);t.instance.ngDoBootstrap(o)}i.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({moduleRef:P,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(o,l=[]){const h=CE({},l);return function $R(t,i,o){const l=new Dp(o);return Promise.resolve(l)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,h))}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(Kf,null);o&&(o.forEach(l=>l()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(l){return new(l||t)(zn(hi))};static \u0275prov=rn({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),tl=null;const tT=new bt("");function nT(t,i,o=[]){const l=`Platform: ${i}`,h=new bt(l);return(f=[])=>{let m=N0();if(!m||m.injector.get(tT,!1)){const D=[...o,...f,{provide:h,useValue:!0}];t?t(D):function nN(t){if(tl&&!tl.get(tT,!1))throw new Qe(400,!1);(function pE(){!function U(t){K=t}(()=>{throw new Qe(600,!1)})})(),tl=t;const i=t.get(eT);(function sT(t){const i=t.get(Wu,null);yl(t,()=>{i?.forEach(o=>o())})})(t)}(function iT(t=[],i){return hi.create({name:i,providers:[{provide:Xo,useValue:"platform"},{provide:Kf,useValue:new Set([()=>tl=null])},...t]})}(D,l))}return function iN(){const i=N0();if(!i)throw new Qe(401,!1);return i}()}}function N0(){return tl?.get(eT)??null}function oN(){return!1}let rT=(()=>class t{static __NG_ELEMENT_ID__=rN})();function rN(t){return function lN(t,i,o){if(un(t)&&!o){const l=Pi(t.index,i);return new _c(l,l)}return 175&t.type?new _c(i[Fn],i):null}(kt(),Ye(),!(16&~t))}class cT{constructor(){}supports(i){return Tf(i)}create(i){return new uN(i)}}const hN=(t,i)=>i;class uN{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(i){this._trackByFn=i||hN}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,l=this._removalsHead,h=0,f=null;for(;o||l;){const m=!l||o&&o.currentIndex<uT(l,h,f)?o:l,D=uT(m,h,f),P=m.currentIndex;if(m===l)h--,l=l._nextRemoved;else if(o=o._next,null==m.previousIndex)h++;else{f||(f=[]);const Q=D-h,de=P-h;if(Q!=de){for(let Pe=0;Pe<Q;Pe++){const Me=Pe<f.length?f[Pe]:f[Pe]=0,we=Me+Pe;de<=we&&we<Q&&(f[Pe]=Me+1)}f[m.previousIndex]=de-Q}}D!==P&&i(m,D,P)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Tf(i))throw new Qe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let h,f,m,o=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let D=0;D<this.length;D++)f=i[D],m=this._trackByFn(D,f),null!==o&&Object.is(o.trackById,m)?(l&&(o=this._verifyReinsertion(o,f,m,D)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,D),l=!0),o=o._next}else h=0,function m1(t,i){if(Array.isArray(t))for(let o=0;o<t.length;o++)i(t[o]);else{const o=t[Symbol.iterator]();let l;for(;!(l=o.next()).done;)i(l.value)}}(i,D=>{m=this._trackByFn(h,D),null!==o&&Object.is(o.trackById,m)?(l&&(o=this._verifyReinsertion(o,D,m,h)),Object.is(o.item,D)||this._addIdentityChange(o,D)):(o=this._mismatch(o,D,m,h),l=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,l,h){let f;return null===i?f=this._itTail:(f=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,f,h)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,f,h)):i=this._addAfter(new fN(o,l),f,h),i}_verifyReinsertion(i,o,l,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?i=this._reinsertAfter(f,i._prev,h):i.currentIndex!=h&&(i.currentIndex=h,this._addToMoves(i,h)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const h=i._prevRemoved,f=i._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(i,o,l),this._addToMoves(i,l),i}_moveAfter(i,o,l){return this._unlink(i),this._insertAfter(i,o,l),this._addToMoves(i,l),i}_addAfter(i,o,l){return this._insertAfter(i,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,l){const h=null===o?this._itHead:o._next;return i._next=h,i._prev=o,null===h?this._itTail=i:h._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new hT),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,l=i._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hT),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class fN{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(i,o){this.item=i,this.trackById=o}}class gN{_head=null;_tail=null;add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const o=i._prevDup,l=i._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class hT{map=new Map;put(i){const o=i.trackById;let l=this.map.get(o);l||(l=new gN,this.map.set(o,l)),l.add(i)}get(i,o){const h=this.map.get(i);return h?h.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uT(t,i,o){const l=t.previousIndex;if(null===l)return l;let h=0;return o&&l<o.length&&(h=o[l]),l+i+h}class fT{constructor(){}supports(i){return i instanceof Map||Ap(i)}create(){return new mN}}class mN{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Ap(i)))throw new Qe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(h,l);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const l=i._prev;return o._next=i,o._prev=l,i._prev=o,l&&(l._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const h=this._records.get(i);this._maybeAddToChanges(h,o);const f=h._prev,m=h._next;return f&&(f._next=m),m&&(m._prev=f),h._next=null,h._prev=null,h}const l=new pN(i);return this._records.set(i,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(l=>o(i[l],l))}}class pN{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(i){this.key=i}}function gT(){return new V0([new cT])}let V0=(()=>{class t{factories;static \u0275prov=rn({token:t,providedIn:"root",factory:gT});constructor(o){this.factories=o}static create(o,l){if(null!=l){const h=l.factories.slice();o=o.concat(h)}return new t(o)}static extend(o){return{provide:t,useFactory:l=>t.create(o,l||gT()),deps:[[t,new Bi,new Wo]]}}find(o){const l=this.factories.find(h=>h.supports(o));if(null!=l)return l;throw new Qe(901,!1)}}return t})();function mT(){return new B0([new fT])}let B0=(()=>{class t{static \u0275prov=rn({token:t,providedIn:"root",factory:mT});factories;constructor(o){this.factories=o}static create(o,l){if(l){const h=l.factories.slice();o=o.concat(h)}return new t(o)}static extend(o){return{provide:t,useFactory:l=>t.create(o,l||mT()),deps:[[t,new Bi,new Wo]]}}find(o){const l=this.factories.find(h=>h.supports(o));if(l)return l;throw new Qe(901,!1)}}return t})();const vN=nT(null,"core",[]);let EN=(()=>{class t{constructor(o){}static \u0275fac=function(l){return new(l||t)(zn(Ss))};static \u0275mod=Tp({type:t});static \u0275inj=Gn({})}return t})();function WN(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function $N(t,i=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?i:Number(t)}function so(t){return function A(t){const i=z(null);try{return t()}finally{z(i)}}(t)}function bh(t,i){return B(t,i?.equal)}class JN{[ne];constructor(i){this[ne]=i}destroy(){this[ne].destroy()}}function U0(t,i){!i?.injector&&Jo();const o=i?.injector??vt(hi);let h,l=!0!==i?.manualCleanup?o.get(ls):null;const f=o.get(gr,null,{optional:!0}),m=o.get(ks);return null===f||i?.forceRoot?h=function qN(t,i,o){const l=Object.create(QN);return l.fn=t,l.scheduler=i,l.notifier=o,l.zone=typeof Zone<"u"?Zone.current:null,l.scheduler.schedule(l),l.notifier.notify(12),l}(t,o.get(fE),m):(h=function kN(t,i,o){const l=Object.create(ZN);return l.view=t,l.zone=typeof Zone<"u"?Zone.current:null,l.notifier=i,l.fn=o,t[qo]??=new Set,t[qo].add(l),l.consumerMarkedDirty(l),l}(f.view,m,t),l instanceof Ya&&l._lView===f.view&&(l=null)),h.injector=o,null!==l&&(h.onDestroyFn=l.onDestroy(()=>h.destroy())),new JN(h)}const OT={...k,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Yr,run(){if(this.dirty=!1,this.hasRun&&!T(this))return;this.hasRun=!0;const t=l=>(this.cleanupFns??=[]).push(l),i=p(this),o=ba(!1);try{this.maybeCleanup(),this.fn(t)}finally{ba(o),j(this,i)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}},QN={...OT,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){I(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}},ZN={...OT,consumerMarkedDirty(){this.view[Nt]|=8192,po(this.view),this.notifier.notify(13)},destroy(){I(this),this.onDestroyFn(),this.maybeCleanup(),this.view[qo]?.delete(this)}};function cF(t,i){const o=on(t),l=i.elementInjector||pl();return new hh(o).create(l,i.projectableNodes,i.hostElement,i.environmentInjector)}function hF(t){const i=on(t);if(!i)return null;const o=new hh(i);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},96889:(ze,Oe,n)=>{"use strict";n.d(Oe,{f:()=>C});const C={setTimeout(x,G,...X){const{delegate:W}=C;return W?.setTimeout?W.setTimeout(x,G,...X):setTimeout(x,G,...X)},clearTimeout(x){const{delegate:G}=C;return(G?.clearTimeout||clearTimeout)(x)},delegate:void 0}},98580:(ze,Oe,n)=>{"use strict";n.d(Oe,{V:()=>X,g:()=>W});var C=n(74523),x=n(32040),G=n(43767);class X{constructor(){this.DisplayMessage=""}}class W{get Title(){return this.title}set Title(z){this.title!=z&&(this.title=z,this.DialogOptions&&(this.DialogOptions.Title=z))}get DisplayMessage(){return this._DisplayMessage}set DisplayMessage(z){z?(this.Msgcss=z.Contains("Error")||z.Contains("adminstrator")?"error":z.Contains("Succes")?"":"warn",""==this.DisplayMessageRental&&(this.timerDispMsg?this.timerDispMsg.Enabled=!1:(this.timerDispMsg=new G.M4,this.timerDispMsg.Interval=5e3,this.timerDispMsg.Elapsed(this,"timerDispMsg_Elapsed")),this.timerDispMsg.Enabled=!0),this.MessageVisibility=!0):this.MessageVisibility=!1,this._DisplayMessage=""==this.DisplayMessageRental?z:this.DisplayMessageRental}timerDispMsg_Elapsed(){this.timerDispMsg.Enabled=!1,this.MessageVisibility=!1}get HidePactLogo(){return x.d.HidePactLogo}get IsMobile(){return x.d.IsMobile}get EnableSettings(){return x.d.EnableSettings}get IsCustMobileApp(){return x.d.IsCustMobileApp}get IsNativeMobile(){return x.d.IsNativeMobile}get IsMac(){return x.d.IsMac}constructor(){this._DisplayMessage="",this.Msgcss="",this.DisplayMessageRental=""}OnRequestClose(z){return(0,C.A)(function*(){const{ConfirmOnExit:Z}=yield Promise.all([n.e(9891),n.e(534),n.e(7996),n.e(2881),n.e(1755),n.e(3884),n.e(7030),n.e(4628),n.e(5984),n.e(5152),n.e(8405),n.e(895),n.e(5819),n.e(6015),n.e(2963),n.e(108),n.e(2290),n.e(8024),n.e(3364),n.e(9284),n.e(9128),n.e(1938),n.e(2726),n.e(4065),n.e(2014),n.e(2209),n.e(2771),n.e(6084),n.e(4882),n.e(4119),n.e(9702),n.e(2076)]).then(n.bind(n,63180));new Z("Confirmontabclose",he=>{"YES"==he.toUpperCase()&&x.d.page.removeTab(z)})})()}DialogCallBack(z){this.DialogOptions?.CallBack&&2==this.DialogOptions.CallBack.length&&this.DialogOptions.CallBack[0][this.DialogOptions.CallBack[1]](z)}}}}]);